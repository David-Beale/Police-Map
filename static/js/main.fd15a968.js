/*! For license information please see main.fd15a968.js.LICENSE.txt */
!function(){var e={67228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},22858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},23646:function(e,t,n){var r=n(67228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},81506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},48926:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},69100:function(e,t,n){var r=n(99489),i=n(57067);function a(t,n,o){return i()?(e.exports=a=Reflect.construct,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},93913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},43269:function(e,t,n){var r=n(60379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},99842:function(e,t,n){var r=n(29754),i=n(57067),a=n(78585);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},59713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},16525:function(e,t,n){var r=n(58331);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},29754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var r=n(99489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},70430:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},57067:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},46860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},13884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},80521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},98206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},78585:function(e,t,n){var r=n(50008).default,i=n(81506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2911:function(e,t,n){var r=n(58331),i=n(59713);function a(e,t,n,o){return a="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,a){var o,s=r(e,t);if(s){if((o=Object.getOwnPropertyDescriptor(s,t)).set)return o.set.call(a,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(a,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(a,t,o)}else i(a,t,n);return!0},a(e,t,n,o)}e.exports=function(e,t,n,r,i){if(!a(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports.__esModule=!0,e.exports.default=e.exports},99489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},63038:function(e,t,n){var r=n(22858),i=n(13884),a=n(60379),o=n(80521);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},58331:function(e,t,n){var r=n(29754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var r=n(23646),i=n(46860),a=n(60379),o=n(98206);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},50008:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},60379:function(e,t,n){var r=n(67228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},65957:function(e,t,n){var r=n(29754),i=n(99489),a=n(70430),o=n(69100);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},87757:function(e,t,n){e.exports=n(19727)},78677:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=n(96567),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function l(e,t){return e.indexOf(t)}function c(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,v=1,g=0,y=0,x=0,_="";function b(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:m,column:v,length:o,return:""}}function w(e,t){return o(b("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return x=y>0?c(_,--y):0,v--,10===x&&(v=1,m--),x}function M(){return x=y<g?c(_,y++):0,v++,10===x&&(v=1,m++),x}function E(){return c(_,y)}function T(){return y}function k(e,t){return d(_,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A(e){return m=v=1,g=h(_=e),y=0,[]}function P(e){return _="",e}function O(e){return s(k(y-1,D(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(x=E())&&x<33;)M();return C(e)>2||C(x)>3?"":" "}function R(e,t){for(;--t&&M()&&!(x<48||x>102||x>57&&x<65||x>70&&x<97););return k(e,T()+(t<6&&32==E()&&32==M()))}function D(e){for(;M();)switch(x){case e:return y;case 34:case 39:34!==e&&39!==e&&D(x);break;case 40:41===e&&D(e);break;case 92:M()}return y}function I(e,t){for(;M()&&e+x!==57&&(e+x!==84||47!==E()););return"/*"+k(t,y-1)+"*"+a(47===e?e:M())}function F(e){for(;!C(E());)M();return k(e,y)}var N="-ms-",j="-moz-",z="-webkit-",U="comm",B="rule",V="decl",G="@keyframes";function H(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Z(e,t,n,r){switch(e.type){case"@import":case V:return e.return=e.return||e.value;case U:return"";case G:return e.return=e.value+"{"+H(e.children,r)+"}";case B:e.value=e.props.join(",")}return h(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function W(e,t){switch(function(e,t){return(((t<<2^c(e,0))<<2^c(e,1))<<2^c(e,2))<<2^c(e,3)}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+j+e+N+e+e;case 6828:case 4268:return z+e+N+e+e;case 6165:return z+e+N+"flex-"+e+e;case 5187:return z+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return z+e+N+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return z+e+N+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+N+u(e,"shrink","negative")+e;case 5292:return z+e+N+u(e,"basis","preferred-size")+e;case 6060:return z+"box-"+u(e,"-grow","")+z+e+N+u(e,"grow","positive")+e;case 4554:return z+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(c(e,t+1)){case 109:if(45!==c(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+j+(108==c(e,t+3)?"$3":"$2-$3"))+e;case 115:return~l(e,"stretch")?W(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==c(e,t+1))break;case 6444:switch(c(e,h(e)-3-(~l(e,"!important")&&10))){case 107:return u(e,":",":"+z)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===c(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(c(e,t+11)){case 114:return z+e+N+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+N+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+N+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+N+e+e}return e}function q(e){return P(X("",null,null,null,[""],e=A(e),0,[0],e))}function X(e,t,n,r,i,o,s,c,d){for(var f=0,m=0,v=s,g=0,y=0,x=0,_=1,b=1,w=1,k=0,C="",A=i,P=o,D=r,N=C;b;)switch(x=k,k=M()){case 40:if(108!=x&&58==N.charCodeAt(v-1)){-1!=l(N+=u(O(k),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:N+=O(k);break;case 9:case 10:case 13:case 32:N+=L(x);break;case 92:N+=R(T()-1,7);continue;case 47:switch(E()){case 42:case 47:p(Y(I(M(),T()),t,n),d);break;default:N+="/"}break;case 123*_:c[f++]=h(N)*w;case 125*_:case 59:case 0:switch(k){case 0:case 125:b=0;case 59+m:y>0&&h(N)-v&&p(y>32?Q(N+";",r,n,v-1):Q(u(N," ","")+";",r,n,v-2),d);break;case 59:N+=";";default:if(p(D=K(N,t,n,f,m,i,c,C,A=[],P=[],v),o),123===k)if(0===m)X(N,t,D,D,A,o,v,c,P);else switch(g){case 100:case 109:case 115:X(e,D,D,r&&p(K(e,D,D,0,0,i,c,C,i,A=[],v),P),i,P,v,c,r?A:P);break;default:X(N,D,D,D,[""],P,0,c,P)}}f=m=y=0,_=w=1,C=N="",v=s;break;case 58:v=1+h(N),y=x;default:if(_<1)if(123==k)--_;else if(125==k&&0==_++&&125==S())continue;switch(N+=a(k),k*_){case 38:w=m>0?1:(N+="\f",-1);break;case 44:c[f++]=(h(N)-1)*w,w=1;break;case 64:45===E()&&(N+=O(M())),g=E(),m=v=h(C=N+=F(T())),k++;break;case 45:45===x&&2==h(N)&&(_=0)}}return o}function K(e,t,n,r,a,o,l,c,h,p,m){for(var v=a-1,g=0===a?o:[""],y=f(g),x=0,_=0,w=0;x<r;++x)for(var S=0,M=d(e,v+1,v=i(_=l[x])),E=e;S<y;++S)(E=s(_>0?g[S]+" "+M:u(M,/&\f/g,g[S])))&&(h[w++]=E);return b(e,t,n,0===a?B:c,h,p,m)}function Y(e,t,n){return b(e,t,n,U,a(x),d(e,2,-2),0)}function Q(e,t,n,r){return b(e,t,n,V,d(e,0,r),d(e,r+1,-1),r)}var $=function(e,t,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(t[n]=1),!C(i);)M();return k(e,y)},J=function(e,t){return P(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===E()&&(t[n]=1),e[n]+=$(y-1,t,n);break;case 2:e[n]+=O(r);break;case 4:if(44===r){e[++n]=58===E()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=a(r)}}while(r=M());return e}(A(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],a=J(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var l=0;l<o.length;l++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[l]):o[l]+" "+a[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=W(e.value,e.length);break;case G:return H([w(e,{value:u(e.value,"@","@"+z)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([w(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([w(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,N+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var a,o,s={},u=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var l,c,d=[Z,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=f(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([te,ne].concat(i,d));o=function(e,t,n,r){l=n,H(q(e?e+"{"+t.styles+"}":t.styles),h),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r.m({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return p.sheet.hydrate(u),p}},50620:function(e,t){"use strict";t.Z=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},91672:function(e,t,n){"use strict";n.d(t,{T:function(){return s},w:function(){return o}});var r=n(72791),i=n(78677),a=(n(84804),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));a.Provider;var o=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(a);return e(t,i,n)}))},s=(0,r.createContext)({})},84804:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i=n(63840),a=n(50620),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,a.Z)((function(e){return u(e)?e:e.replace(o,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===i.Z[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return f={name:n.name,styles:n.styles,next:f},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":l(o)&&(r+=c(a)+":"+d(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=h(e,t,o);switch(a){case"animation":case"animationName":r+=c(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)l(o[u])&&(r+=c(a)+":"+d(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=f,a=n(e);return f=i,h(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var f,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,a="";f=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,a+=h(n,t,o)):a+=o[0];for(var s=1;s<e.length;s++)a+=h(n,t,e[s]),i&&(a+=o[s]);p.lastIndex=0;for(var u,l="";null!==(u=p.exec(a));)l+="-"+u[1];return{name:r(a)+l,styles:a,next:f}}},96567:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}()},63840:function(e,t){"use strict";t.Z={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},95438:function(e,t,n){"use strict";n.d(t,{f:function(){return r},M:function(){return i}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}}},97489:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17668),t),i(n(63014),t),i(n(71350),t),i(n(22939),t),i(n(14650),t),i(n(47633),t)},26309:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67538),t),i(n(22939),t),i(n(38794),t),i(n(72885),t),i(n(6705),t),i(n(73917),t),i(n(71872),t),i(n(53693),t),i(n(47468),t),i(n(23365),t),i(n(68891),t),i(n(79829),t),i(n(91173),t),i(n(51566),t),i(n(44987),t),i(n(47633),t),i(n(68374),t),i(n(84727),t)},67538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorUtils=void 0;var r=n(15739),i=n(34585),a=n(55471),o=255,s=new i.Color;!function(e){e.getHexFromRgba=function(e,t,n,i){return r.assert(i>=0&&i<=1),o-Math.floor(i*o)<<24^e*o<<16^t*o<<8^n*o<<0},e.getHexFromRgb=function(e,t,n){return r.assert(e>=0&&e<=1),r.assert(t>=0&&t<=1),r.assert(n>=0&&n<=1),e*o<<16^t*o<<8^n*o<<0},e.getHexFromHsl=function(e,t,n){return r.assert(e>=0&&e<=1),r.assert(t>=0&&t<=1),r.assert(n>=0&&n<=1),s.setHSL(e,t,n).getHex()},e.getRgbaFromHex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.RGBA;return r.assert(0===(0&e),"Wrong hex format"),t.r=(e>>16&o)/o,t.g=(e>>8&o)/o,t.b=(e>>0&o)/o,t.a=(o-(e>>24&o))/o,t},e.hasAlphaInHex=function(e){return r.assert(0===(0&e),"Wrong hex format"),e>>24!==0},e.getAlphaFromHex=function(e){return r.assert(0===(0&e),"Wrong hex format"),(o-(e>>24)&o)/o},e.removeAlphaFromHex=function(e){return r.assert(0===(0&e),"Wrong hex format"),16777215&e}}(t.ColorUtils||(t.ColorUtils={}))},51566:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.scaleHeight=t.getFeatureText=t.getFeatureName=t.getFeatureId=t.getProjectionName=t.getProjection=t.GeometryType=t.getArrayConstructor=void 0;var i=n(31201),a=n(22939),o=n(51638),s=n(38794);function u(e,t,n,i,a){var o,s;if(void 0===t&&(t="name"),n){var u=e.lookup("".concat(t,":short"));if("string"===typeof u&&u.length>0)return u}if(i){var l=e.lookup("iso_code");if("string"===typeof l&&l.length>0)return l}if(void 0!==a){var c,d=r(a);try{for(d.s();!(c=d.n()).done;){var h=c.value;if("string"===typeof(s=null!==(o=e.lookup("".concat(t,":").concat(h)))&&void 0!==o?o:e.lookup("".concat(t,"_").concat(h)))&&s.length>0)return s}}catch(f){d.e(f)}finally{d.f()}}if("string"===typeof(s=e.lookup(t)))return s}t.getArrayConstructor=function(e){switch(e){case"float":return Float32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array}},function(e){e[e.Unspecified=0]="Unspecified",e[e.Point=1]="Point",e[e.Line=2]="Line",e[e.SolidLine=3]="SolidLine",e[e.Text=4]="Text",e[e.TextPath=5]="TextPath",e[e.ExtrudedLine=6]="ExtrudedLine",e[e.Polygon=7]="Polygon",e[e.ExtrudedPolygon=8]="ExtrudedPolygon",e[e.Object3D=9]="Object3D",e[e.Other=1e3]="Other"}(t.GeometryType||(t.GeometryType={})),t.getProjection=function(e){switch(e){case"mercator":return i.mercatorProjection;case"webMercator":return i.webMercatorProjection;case"sphere":return i.sphereProjection;case"normalizedEquirectangular":return i.normalizedEquirectangularProjection;case"equirectangular":return i.equirectangularProjection;default:throw new Error("Unknown projection ".concat(e))}},t.getProjectionName=function(e){if(e===i.mercatorProjection)return"mercator";if(e===i.webMercatorProjection)return"webMercator";if(e===i.sphereProjection)return"sphere";if(e===i.normalizedEquirectangularProjection)return"normalizedEquirectangular";if(e===i.equirectangularProjection)return"equirectangular";throw new Error("Unknown projection")},t.getFeatureId=function(e){if(void 0===e)return 0;if("string"===typeof e||"number"===typeof e)return e;if(e.hasOwnProperty("$id")){var t=e.$id;if("string"===typeof t||"number"===typeof t)return t}return 0},t.getFeatureName=u,t.getFeatureText=function(e,t,n){var r,i,l=e instanceof a.Env?e:e.env,c="name";if(s.isTextTechnique(t)||s.isPoiTechnique(t)||s.isLineMarkerTechnique(t)){if(void 0!==t.text)return o.evaluateTechniqueAttr(e,t.text);if(void 0!==t.label&&"string"!==typeof(c=o.evaluateTechniqueAttr(e,t.label)))return;r=t.useAbbreviation,i=t.useIsoCode}return u(l,c,r,i,n)},t.scaleHeight=function(e,t,n){return!o.evaluateTechniqueAttr(e,t.constantHeight,n<12)}},18284:function(e,t,n){"use strict";var r=n(2205).default,i=n(99842).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapEnv=t.Env=void 0;var s=function(){function e(){a(this,e)}return o(e,[{key:"lookup",value:function(e){}},{key:"unmap",value:function(){return{}}}],[{key:"isEnv",value:function(t){return t instanceof e}}]),e}();t.Env=s;var u=function(e){r(n,e);var t=i(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).entries=e,i.parent=r,i}return o(n,[{key:"lookup",value:function(e){if(this.entries.hasOwnProperty(e)){var t=this.entries[e];if(void 0!==t)return t}return this.parent?this.parent.lookup(e):void 0}},{key:"unmap",value:function(){var e=this.parent?this.parent.unmap():{};for(var t in this.entries)this.entries.hasOwnProperty(t)&&(e[t]=this.entries[t]);return e}}]),n}(s);t.MapEnv=u},22939:function(e,t,n){"use strict";var r=n(43269).default,i=n(319).default,a=n(2205).default,o=n(99842).default,s=n(63038).default,u=n(93913).default,l=n(34575).default,c=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),d=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||c(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolateExpr=t.StepExpr=t.CaseExpr=t.MatchExpr=t.CallExpr=t.HasAttributeExpr=t.ObjectLiteralExpr=t.StringLiteralExpr=t.NumberLiteralExpr=t.BooleanLiteralExpr=t.NullLiteralExpr=t.LiteralExpr=t.VarExpr=t.Expr=t.ExprScope=t.isJsonExpr=t.ExprDependencies=void 0;var h=n(34585),f=n(37087),p=n(72037),m=n(9375),v=n(53693),g=n(79145),y=n(55471);d(n(18284),t);var x=new f.ExprEvaluator,_=new p.ExprInstantiator,b=u((function e(){l(this,e),this.properties=new Set}));t.ExprDependencies=b;var w,S=function(){function e(){l(this,e)}return u(e,[{key:"visitNullLiteralExpr",value:function(e,t){}},{key:"visitBooleanLiteralExpr",value:function(e,t){}},{key:"visitNumberLiteralExpr",value:function(e,t){}},{key:"visitStringLiteralExpr",value:function(e,t){}},{key:"visitObjectLiteralExpr",value:function(e,t){}},{key:"visitVarExpr",value:function(e,t){t.properties.add(e.name)}},{key:"visitHasAttributeExpr",value:function(e,t){t.properties.add(e.name)}},{key:"visitCallExpr",value:function(e,t){var n=this;switch(e.args.forEach((function(e){return e.accept(n,t)})),e.op){case"dynamic-properties":t.volatile=!0;break;case"feature-state":t.featureState=!0,t.properties.add("$state"),t.properties.add("$id");break;case"id":t.properties.add("$id");break;case"zoom":case"world-ppi-scale":case"world-discrete-ppi-scale":t.properties.add("$zoom");break;case"geometry-type":t.properties.add("$geometryType")}}},{key:"visitMatchExpr",value:function(e,t){var n=this;e.value.accept(this,t),e.branches.forEach((function(e){var r=s(e,2);r[0];return r[1].accept(n,t)})),e.fallback.accept(this,t)}},{key:"visitCaseExpr",value:function(e,t){var n=this;e.branches.forEach((function(e){var r=s(e,2),i=r[0],a=r[1];i.accept(n,t),a.accept(n,t)})),e.fallback.accept(this,t)}},{key:"visitStepExpr",value:function(e,t){var n=this;e.input.accept(this,t),e.defaultValue.accept(this,t),e.stops.forEach((function(e){var r=s(e,2);r[0];return r[1].accept(n,t)}))}},{key:"visitInterpolateExpr",value:function(e,t){var n=this;e.input.accept(this,t),e.stops.forEach((function(e){var r=s(e,2);r[0];return r[1].accept(n,t)}))}}],[{key:"of",value:function(e){var t=new b;return e.accept(this.instance,t),t}}]),e}();function M(e){return Array.isArray(e)&&e.length>0&&"string"===typeof e[0]}S.instance=new S,t.isJsonExpr=M,function(e){e[e.Value=0]="Value",e[e.Condition=1]="Condition",e[e.Dynamic=2]="Dynamic"}(w=t.ExprScope||(t.ExprScope={}));var E=function(){function e(){l(this,e)}return u(e,[{key:"evaluate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.Value,n=arguments.length>2?arguments[2]:void 0;return this.accept(x,new f.ExprEvaluatorContext(x,e,t,n))}},{key:"instantiate",value:function(e){return this.accept(_,e)}},{key:"dependencies",value:function(){return this.m_dependencies||(this.m_dependencies=S.of(this)),this.m_dependencies}},{key:"intern",value:function(e){return e.add(this)}},{key:"toJSON",value:function(){return(new z).serialize(this)}},{key:"isDynamic",value:function(){return void 0===this.m_isDynamic&&(this.m_isDynamic=this.exprIsDynamic()),this.m_isDynamic}}],[{key:"isExpr",value:function(t){return t instanceof e}},{key:"parse",value:function(e){return new m.ExprParser(e).parse()}},{key:"fromJSON",value:function(e,t,n){return U(e,void 0!==t?{definitions:t,lockedNames:new Set,cache:null!==n&&void 0!==n?n:new Map}:void 0)}}]),e}();t.Expr=E;var T=function(e){a(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this)).name=e,r}return u(n,[{key:"accept",value:function(e,t){return e.visitVarExpr(this,t)}},{key:"exprIsDynamic",value:function(){return!1}}]),n}(E);t.VarExpr=T;var k=function(e){a(n,e);var t=o(n);function n(){return l(this,n),t.apply(this,arguments)}return u(n,[{key:"exprIsDynamic",value:function(){return!1}}],[{key:"fromValue",value:function(e){switch(typeof e){case"boolean":return new A(e);case"number":return new P(e);case"string":return new O(e);case"object":return null===e?C.instance:new L(e);default:throw new Error("failed to create a literal from '".concat(e,"'"))}}}]),n}(E);t.LiteralExpr=k;var C=function(e){a(n,e);var t=o(n);function n(){var e;return l(this,n),(e=t.call(this)).value=null,e}return u(n,[{key:"accept",value:function(e,t){return e.visitNullLiteralExpr(this,t)}},{key:"exprIsDynamic",value:function(){return!1}}]),n}(k);t.NullLiteralExpr=C,C.instance=new C;var A=function(e){a(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this)).value=e,r}return u(n,[{key:"accept",value:function(e,t){return e.visitBooleanLiteralExpr(this,t)}}]),n}(k);t.BooleanLiteralExpr=A;var P=function(e){a(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this)).value=e,r}return u(n,[{key:"accept",value:function(e,t){return e.visitNumberLiteralExpr(this,t)}}]),n}(k);t.NumberLiteralExpr=P;var O=function(e){a(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this)).value=e,r}return u(n,[{key:"promotedValue",get:function(){var e,t,n;return void 0===this.m_promotedValue&&(this.m_promotedValue=null!==(t=null!==(e=y.RGBA.parse(this.value))&&void 0!==e?e:g.Pixels.parse(this.value))&&void 0!==t?t:null),null!==(n=this.m_promotedValue)&&void 0!==n?n:void 0}},{key:"accept",value:function(e,t){return e.visitStringLiteralExpr(this,t)}}]),n}(k);t.StringLiteralExpr=O;var L=function(e){a(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this)).value=e,r}return u(n,[{key:"isArrayLiteral",get:function(){return Array.isArray(this.value)}},{key:"accept",value:function(e,t){return e.visitObjectLiteralExpr(this,t)}}]),n}(k);t.ObjectLiteralExpr=L;var R=function(e){a(n,e);var t=o(n);function n(e){var r;return l(this,n),(r=t.call(this)).name=e,r}return u(n,[{key:"accept",value:function(e,t){return e.visitHasAttributeExpr(this,t)}},{key:"exprIsDynamic",value:function(){return!1}}]),n}(E);t.HasAttributeExpr=R;var D=function(e){a(n,e);var t=o(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).op=e,i.args=r,i}return u(n,[{key:"children",get:function(){return this.args}},{key:"accept",value:function(e,t){return e.visitCallExpr(this,t)}},{key:"exprIsDynamic",value:function(){var e,t=null!==(e=this.descriptor)&&void 0!==e?e:f.ExprEvaluator.getOperator(this.op);return!!(t&&t.isDynamicOperator&&t.isDynamicOperator(this))||this.args.some((function(e){return e.isDynamic()}))}}]),n}(E);t.CallExpr=D;var I=function(e){a(n,e);var t=o(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).value=e,a.branches=r,a.fallback=i,a}return u(n,[{key:"accept",value:function(e,t){return e.visitMatchExpr(this,t)}},{key:"exprIsDynamic",value:function(){return this.value.isDynamic()||this.branches.some((function(e){var t=s(e,2);t[0];return t[1].isDynamic()}))||this.fallback.isDynamic()}}],[{key:"isValidMatchLabel",value:function(e){switch(typeof e){case"number":case"string":return!0;case"object":if(!Array.isArray(e)||0===e.length)return!1;var t=typeof e[0];return("number"===t||"string"===t)&&e.every((function(e){return typeof e===t}));default:return!1}}}]),n}(E);t.MatchExpr=I;var F=function(e){a(n,e);var t=o(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).branches=e,i.fallback=r,i}return u(n,[{key:"accept",value:function(e,t){return e.visitCaseExpr(this,t)}},{key:"exprIsDynamic",value:function(){return this.branches.some((function(e){var t=s(e,2),n=t[0],r=t[1];return n.isDynamic()||r.isDynamic()}))||this.fallback.isDynamic()}}]),n}(E);t.CaseExpr=F;var N=function(e){a(n,e);var t=o(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).input=e,a.defaultValue=r,a.stops=i,a}return u(n,[{key:"accept",value:function(e,t){return e.visitStepExpr(this,t)}},{key:"exprIsDynamic",value:function(){return this.input.isDynamic()||this.defaultValue.isDynamic()||this.stops.some((function(e){var t=s(e,2);t[0];return t[1].isDynamic()}))}}]),n}(E);t.StepExpr=N;var j=function(e){a(n,e);var t=o(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).mode=e,a.input=r,a.stops=i,a}return u(n,[{key:"accept",value:function(e,t){return e.visitInterpolateExpr(this,t)}},{key:"exprIsDynamic",value:function(){return this.input.isDynamic()||this.stops.some((function(e){var t=s(e,2);t[0];return t[1].isDynamic()}))}}]),n}(E);t.InterpolateExpr=j;var z=function(){function e(){l(this,e)}return u(e,[{key:"serialize",value:function(e){return e.accept(this,void 0)}},{key:"visitNullLiteralExpr",value:function(e,t){return null}},{key:"visitBooleanLiteralExpr",value:function(e,t){return e.value}},{key:"visitNumberLiteralExpr",value:function(e,t){return e.value}},{key:"visitStringLiteralExpr",value:function(e,t){return e.value}},{key:"visitObjectLiteralExpr",value:function(e,t){return e.value instanceof h.Vector2?["make-vector",e.value.x,e.value.y]:e.value instanceof h.Vector3?["make-vector",e.value.x,e.value.y,e.value.z]:e.value instanceof h.Vector4?["make-vector",e.value.x,e.value.y,e.value.z,e.value.w]:["literal",e.value]}},{key:"visitVarExpr",value:function(e,t){return["get",e.name]}},{key:"visitHasAttributeExpr",value:function(e,t){return["has",e.name]}},{key:"visitCallExpr",value:function(e,t){var n=this;return[e.op].concat(i(e.args.map((function(e){return n.serialize(e)}))))}},{key:"visitMatchExpr",value:function(e,t){var n,i=[],a=r(e.branches);try{for(a.s();!(n=a.n()).done;){var o=s(n.value,2),u=o[0],l=o[1];i.push(u,this.serialize(l))}}catch(c){a.e(c)}finally{a.f()}return["match",this.serialize(e.value)].concat(i,[this.serialize(e.fallback)])}},{key:"visitCaseExpr",value:function(e,t){var n,i=[],a=r(e.branches);try{for(a.s();!(n=a.n()).done;){var o=s(n.value,2),u=o[0],l=o[1];i.push(this.serialize(u),this.serialize(l))}}catch(c){a.e(c)}finally{a.f()}return["case"].concat(i,[this.serialize(e.fallback)])}},{key:"visitStepExpr",value:function(e,t){var n=this,r=["step"];return r.push(this.serialize(e.input)),r.push(this.serialize(e.defaultValue)),e.stops.forEach((function(e){var t=s(e,2),i=t[0],a=t[1];r.push(i),r.push(n.serialize(a))})),r}},{key:"visitInterpolateExpr",value:function(e,t){var n=this,r=["interpolate",e.mode];return r.push(this.serialize(e.input)),e.stops.forEach((function(e){var t=s(e,2),i=t[0],a=t[1];r.push(i),r.push(n.serialize(a))})),r}}]),e}();function U(e,t){if(Array.isArray(e))return B(e,t);if(null===e)return C.instance;if("boolean"===typeof e)return new A(e);if("number"===typeof e)return new P(e);if("string"===typeof e)return new O(e);throw new Error("failed to create expression from: ".concat(JSON.stringify(e)))}function B(e,t){var n=e[0];if("string"!==typeof n)throw new Error("expected a builtin function name");switch(n){case"!has":case"!in":return new D("!",[B([n.slice(1)].concat(i(e.slice(1))))]);case"ref":return function(e,t){if("string"!==typeof e[1])throw new Error("expected the name of an attribute");if(void 0===t)throw new Error("ref used with no definitions");var n=e[1];if(t.lockedNames.has(n))throw new Error("circular referene to '".concat(n,"'"));if(!(n in t.definitions))throw new Error("definition '".concat(n,"' not found"));var r=t.cache.get(n);if(void 0!==r)return r;var i,a=t.definitions[n];if(v.isInterpolatedPropertyDefinition(a.value))return E.fromJSON(v.interpolatedPropertyDefinitionToJsonExpr(a.value));if(!M(a.value))return E.fromJSON(a.value);a=a.value;if(!M(a))throw new Error("unsupported definition ".concat(n));t.lockedNames.add(n);try{i=U(a,t)}finally{t.lockedNames.delete(n)}return t.cache.set(n,i),i}(e,t);case"get":return function(e,t){if(void 0!==e[2])return V("get",e,t);var n=e[1];if("string"!==typeof n)throw new Error("expected the name of an attribute");return new T(n)}(e,t);case"has":return function(e,t){if(void 0!==e[2])return V("has",e,t);var n=e[1];if("string"!==typeof n)throw new Error("expected the name of an attribute");return new R(n)}(e,t);case"literal":return function(e){var t=e[1];if(null===t||"object"!==typeof t)throw new Error("expected an object or array literal");return new L(t)}(e);case"match":return function(e,t){if(e.length<4)throw new Error("not enough arguments");if(!(e.length%2))throw new Error("fallback is missing in 'match' expression");for(var n=U(e[1],t),r=[],i=2;i<e.length-1;i+=2){var a=e[i];if(!I.isValidMatchLabel(a))throw new Error("'".concat(JSON.stringify(a),"' is not a valid label for 'match'"));var o=U(e[i+1],t);r.push([a,o])}var s=U(e[e.length-1],t);return new I(n,r,s)}(e,t);case"case":return function(e,t){if(e.length<3)throw new Error("not enough arguments");if(e.length%2)throw new Error("fallback is missing in 'case' expression");for(var n=[],r=1;r<e.length-1;r+=2){var i=U(e[r],t),a=U(e[r+1],t);n.push([i,a])}var o=U(e[e.length-1],t);return new F(n,o)}(e,t);case"interpolate":return function(e,t){var n=e[1];if(!function(e){if(!Array.isArray(e))return!1;switch(e[0]){case"discrete":case"linear":case"cubic":case"exponential":return!0;default:return!1}}(n))throw new Error("expected an interpolation type");if("exponential"===n[0]&&"number"!==typeof n[1])throw new Error("expected the base of the exponential interpolation");var r=void 0!==e[2]?U(e[2],t):void 0;if(!E.isExpr(r))throw new Error("expected the input of the interpolation");if(3===e.length||!(e.length%2))throw new Error("invalid number of samples");for(var i=[],a=3;a<e.length-1;a+=2){var o=e[a],s=U(e[a+1],t);i.push([o,s])}return new j(n,r,i)}(e,t);case"step":return function(e,t){if(e.length<2)throw new Error("expected the input of the 'step' operator");if(e.length<3||!(e.length%2))throw new Error("not enough arguments");for(var n=U(e[1],t),r=U(e[2],t),i=[],a=3;a<e.length;a+=2){var o=e[a],s=U(e[a+1],t);i.push([o,s])}return new N(n,r,i)}(e,t);default:return V(n,e,t)}}function V(e,t,n){return new D(e,t.slice(1).map((function(e){return U(e,n)})))}},37087:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ExprEvaluator=t.ExprEvaluatorContext=void 0;var s=n(34585),u=n(22939),l=n(59944),c=n(99880),d=n(98502),h=n(25074),f=n(80303),p=n(28778),m=n(14982),v=n(70628),g=n(20120),y=n(80354),x=n(33668),_=n(43433),b=n(70081),w=n(79145),S=n(55471),M=new Map;function E(e,t){var n,r,i;if(t instanceof u.StringLiteralExpr)return null!==(n=t.promotedValue)&&void 0!==n?n:t.value;var a=e.evaluate(t);return"string"===typeof a&&null!==(i=null!==(r=S.RGBA.parse(a))&&void 0!==r?r:w.Pixels.parse(a))&&void 0!==i?i:a}var T=function(){function e(t,n,r,i){a(this,e),this.evaluator=t,this.env=n,this.scope=r,this.cache=i}return o(e,[{key:"evaluate",value:function(e){var t,n;if(void 0===e)throw new Error("Failed to evaluate expression");var r=null===(t=this.cache)||void 0===t?void 0:t.get(e);if(void 0!==r)return r;var i=e.accept(this.evaluator,this);return null===(n=this.cache)||void 0===n||n.set(e,i),i}},{key:"wrapValue",value:function(e){return u.Expr.isExpr(e)?e:u.LiteralExpr.fromValue(e)}}]),e}();t.ExprEvaluatorContext=T;var k=function(){function e(){a(this,e)}return o(e,[{key:"visitVarExpr",value:function(e,t){var n=t.env.lookup(e.name);return void 0!==n?n:null}},{key:"visitNullLiteralExpr",value:function(e,t){return null}},{key:"visitBooleanLiteralExpr",value:function(e,t){return e.value}},{key:"visitNumberLiteralExpr",value:function(e,t){return e.value}},{key:"visitStringLiteralExpr",value:function(e,t){return e.value}},{key:"visitObjectLiteralExpr",value:function(e,t){return e.value}},{key:"visitHasAttributeExpr",value:function(e,t){return void 0!==t.env.lookup(e.name)}},{key:"visitMatchExpr",value:function(e,t){var n,a=t.evaluate(e.value),o=i(e.branches);try{for(o.s();!(n=o.n()).done;){var s=r(n.value,2),u=s[0],l=s[1];if(Array.isArray(u)&&u.includes(a))return t.evaluate(l);if(u===a)return t.evaluate(l)}}catch(c){o.e(c)}finally{o.f()}return t.evaluate(e.fallback)}},{key:"visitCaseExpr",value:function(e,t){if(t.scope===u.ExprScope.Value){var n=e.branches.findIndex((function(e){var t=r(e,2),n=t[0];t[1];return n.isDynamic()}));if(-1!==n){for(var a,o=0;o<e.branches.length;++o){var s=r(e.branches[o],2),l=s[0],c=s[1],d=t.evaluate(l),h=t.evaluate(c);if(o<n&&Boolean(d))return h;if((u.Expr.isExpr(d)||Boolean(d))&&(void 0===a&&(a=[]),null===a||void 0===a||a.push([t.wrapValue(d),t.wrapValue(h)]),!u.Expr.isExpr(d)&&Boolean(d)))return new u.CaseExpr(a,u.LiteralExpr.fromValue(null))}var f=t.evaluate(e.fallback);return void 0===a?f:new u.CaseExpr(a,t.wrapValue(f))}}var p,m=i(e.branches);try{for(m.s();!(p=m.n()).done;){var v=r(p.value,2),g=v[0],y=v[1];if(t.evaluate(g))return t.evaluate(y)}}catch(x){m.e(x)}finally{m.f()}return t.evaluate(e.fallback)}},{key:"visitCallExpr",value:function(e,t){var n,r=null!==(n=e.descriptor)&&void 0!==n?n:M.get(e.op);if(r){var i;if(e.descriptor=r,t.scope===u.ExprScope.Value&&e.isDynamic()){if(e.descriptor.partialEvaluate)return e.descriptor.partialEvaluate(t,e);var a=e.args.map((function(e){return t.wrapValue(t.evaluate(e))}));if(a.every((function(t,n){return t===e.args[n]})))return e;i=new u.CallExpr(e.op,a)}else i=r.call(t,e);return i}throw new Error("undefined operator '".concat(e.op,"'"))}},{key:"visitStepExpr",value:function(e,t){if(t.scope===u.ExprScope.Value){var n=t.evaluate(e.input),i=t.evaluate(e.defaultValue);return new u.StepExpr(t.wrapValue(n),t.wrapValue(i),e.stops.map((function(e){var n=r(e,2),i=n[0],a=n[1],o=t.evaluate(a);return[i,t.wrapValue(o)]})))}var a=t.evaluate(e.input);if("number"!==typeof a)throw new Error("input '".concat(a,"' must be a number"));if(a<e.stops[0][0])return t.evaluate(e.defaultValue);var o=e.stops.findIndex((function(e){return e[0]>a}));return-1===o&&(o=e.stops.length),t.evaluate(e.stops[o-1][1])}},{key:"visitInterpolateExpr",value:function(e,t){if(t.scope===u.ExprScope.Value){var n=t.evaluate(e.input);return new u.InterpolateExpr(e.mode,t.wrapValue(n),e.stops.map((function(e){var n=r(e,2),i=n[0],a=n[1],o=t.evaluate(a);return[i,t.wrapValue(o)]})))}var i=t.evaluate(e.input);if("number"!==typeof i)throw new Error("input must be a number");if("cubic"===e.mode[0])return function(e,t,n){if(n<t.stops[0][0])return E(e,t.stops[0][1]);if(n>=t.stops[t.stops.length-1][0])return E(e,t.stops[t.stops.length-1][1]);var r=t.stops.findIndex((function(e){return e[0]>n})),i=Math.max(0,r-1),a=0===i?r:i-1,o=r<t.stops.length-1?r+1:r-1,u=t.stops[a][0],l=t.stops[i][0],c=t.stops[r][0],d=.5*(c-l),h=d/(l-u),f=d/(t.stops[o][0]-c),p=(n-l)/(c-l),m=p*p,v=m*p,g=-h*v+2*h*m-h*p,y=(1+h)*v+(-1.5-2*h)*m+(-.5+h)*p+1,x=(-1-f)*v+(1.5+f)*m+.5*p,_=f*v-f*m,b=E(e,t.stops[a][1]),M=E(e,t.stops[i][1]),T=E(e,t.stops[r][1]),k=E(e,t.stops[o][1]);if("number"===typeof b&&"number"===typeof M&&"number"===typeof T&&"number"===typeof k)return g*b+y*M+x*T+_*k;if(b instanceof S.RGBA&&M instanceof S.RGBA&&T instanceof S.RGBA&&k instanceof S.RGBA)return new S.RGBA(s.MathUtils.clamp(g*b.r+y*M.r+x*T.r+_*k.r,0,1),s.MathUtils.clamp(g*b.g+y*M.g+x*T.g+_*k.g,0,1),s.MathUtils.clamp(g*b.b+y*M.b+x*T.b+_*k.b,0,1),s.MathUtils.clamp(g*b.a+y*M.a+x*T.a+_*k.a,0,1));if(b instanceof w.Pixels&&M instanceof w.Pixels&&T instanceof w.Pixels&&k instanceof w.Pixels)return new w.Pixels(g*b.value+y*M.value+x*T.value+_*k.value);if(b instanceof s.Color&&M instanceof s.Color&&T instanceof s.Color&&k instanceof s.Color)return new s.Color(g*b.r+y*M.r+x*T.r+_*k.r,g*b.g+y*M.g+x*T.g+_*k.g,g*b.b+y*M.b+x*T.b+_*k.b);if(b instanceof s.Vector2&&M instanceof s.Vector2&&T instanceof s.Vector2&&k instanceof s.Vector2)return new s.Vector2(g*b.x+y*M.x+x*T.x+_*k.x,g*b.y+y*M.y+x*T.y+_*k.y);if(b instanceof s.Vector3&&M instanceof s.Vector3&&T instanceof s.Vector3&&k instanceof s.Vector3)return new s.Vector3(g*b.x+y*M.x+x*T.x+_*k.x,g*b.y+y*M.y+x*T.y+_*k.y,g*b.z+y*M.z+x*T.z+_*k.z);if(b instanceof s.Vector4&&M instanceof s.Vector4&&T instanceof s.Vector4&&k instanceof s.Vector4)return new s.Vector4(g*b.x+y*M.x+x*T.x+_*k.x,g*b.y+y*M.y+x*T.y+_*k.y,g*b.z+y*M.z+x*T.z+_*k.z,g*b.w+y*M.w+x*T.w+_*k.w);if(Array.isArray(b)&&Array.isArray(M)&&Array.isArray(T)&&Array.isArray(k)){for(var C=b.length,A=[],P=0;P<C;++P)A[P]=g*b[P]+y*M[P]+x*T[P]+_*k[P];return A}throw new Error("failed to interpolate values")}(t,e,i);var a=e.stops.findIndex((function(e){return e[0]>i}));if(-1===a)return t.evaluate(e.stops[e.stops.length-1][1]);if(0===a)return t.evaluate(e.stops[0][1]);var o=r(e.stops[a],2),l=o[0],c=o[1],d=r(e.stops[a-1],2),h=d[0],f=d[1],p=E(t,f),m=0;switch(e.mode[0]){case"discrete":return p;case"linear":m=(i-h)/(l-h);break;case"exponential":var v=e.mode[1];m=1===v?(i-h)/(l-h):(Math.pow(v,i-h)-1)/(Math.pow(v,l-h)-1);break;default:throw new Error("interpolation mode ".concat(JSON.stringify(e.mode)," is not supported"))}var g=E(t,c);if("number"===typeof p&&"number"===typeof g)return s.MathUtils.lerp(p,g,m);if(p instanceof S.RGBA&&g instanceof S.RGBA)return p.clone().lerp(g,m);if(p instanceof w.Pixels&&g instanceof w.Pixels)return new w.Pixels(s.MathUtils.lerp(p.value,g.value,m));if(p instanceof s.Color&&g instanceof s.Color)return p.clone().lerp(g,m);if(p instanceof s.Vector2&&g instanceof s.Vector2)return p.clone().lerp(g,m);if(p instanceof s.Vector3&&g instanceof s.Vector3)return p.clone().lerp(g,m);if(p instanceof s.Vector4&&g instanceof s.Vector4)return p.clone().lerp(g,m);if(Array.isArray(p)&&Array.isArray(g)&&p.length===g.length)return p.map((function(e,t){return s.MathUtils.lerp(e,g[t],m)}));throw new Error("todo: mix(".concat(JSON.stringify(p),", ").concat(JSON.stringify(g),", ").concat(m,")"))}}],[{key:"defineOperator",value:function(e,t){M.set(e,t)}},{key:"defineOperators",value:function(e){var t=this;Object.getOwnPropertyNames(e).forEach((function(n){t.defineOperator(n,e[n])}))}},{key:"getOperator",value:function(e){return M.get(e)}}]),e}();t.ExprEvaluator=k,k.defineOperators(c.CastOperators),k.defineOperators(h.ComparisonOperators),k.defineOperators(v.MathOperators),k.defineOperators(x.StringOperators),k.defineOperators(d.ColorOperators),k.defineOperators(_.TypeOperators),k.defineOperators(g.MiscOperators),k.defineOperators(p.FlowOperators),k.defineOperators(l.ArrayOperators),k.defineOperators(y.ObjectOperators),k.defineOperators(f.FeatureOperators),k.defineOperators(m.MapOperators),k.defineOperators(b.VectorOperators)},72037:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ExprInstantiator=void 0;var s=n(18284),u=n(22939),l=new s.Env,c=function(){function e(){a(this,e)}return o(e,[{key:"visitNullLiteralExpr",value:function(e,t){return e}},{key:"visitBooleanLiteralExpr",value:function(e,t){return e}},{key:"visitNumberLiteralExpr",value:function(e,t){return e}},{key:"visitStringLiteralExpr",value:function(e,t){return e}},{key:"visitObjectLiteralExpr",value:function(e,t){return e}},{key:"visitVarExpr",value:function(e,t){if(t.preserve&&t.preserve.has(e.name))return e;var n=t.env.lookup(e.name);return u.LiteralExpr.fromValue(void 0!==n?n:null)}},{key:"visitHasAttributeExpr",value:function(e,t){if(t.preserve&&t.preserve.has(e.name))return e;var n=void 0!==t.env.lookup(e.name);return u.LiteralExpr.fromValue(n)}},{key:"visitCallExpr",value:function(e,t){var n=this,r=e.args.map((function(e){return e.accept(n,t)}));return r.some((function(t,n){return t!==e.args[n]}))?new u.CallExpr(e.op,r):e}},{key:"visitMatchExpr",value:function(e,t){var n=this,a=e.value.accept(this,t);if(a instanceof u.LiteralExpr){var o,s=a.value,l=i(e.branches);try{for(l.s();!(o=l.n()).done;){var c=r(o.value,2),d=c[0],h=c[1];if(Array.isArray(d)&&d.includes(s))return h.accept(this,t);if(d===s)return h.accept(this,t)}}catch(v){l.e(v)}finally{l.f()}return e.fallback.accept(this,t)}var f=e.value!==a,p=e.branches.map((function(e){var i=r(e,2),a=i[0],o=i[1],s=o.accept(n,t);return s!==o&&(f=!0),[a,s]})),m=e.fallback.accept(this,t);return m!==e.fallback&&(f=!0),f?new u.MatchExpr(a,p,m):e}},{key:"visitCaseExpr",value:function(e,t){var n,a=this,o=[],s=!1,c=i(e.branches);try{for(c.s();!(n=c.n()).done;){var d=r(n.value,2),h=d[0],f=d[1],p=h.accept(this,t),m=p.dependencies();if(h.isDynamic()||0!==m.properties.size)p!==h&&(s=!0),o.push([p,f]);else if(Boolean(p.evaluate(l,u.ExprScope.Condition)))return f.accept(this,t)}}catch(g){c.e(g)}finally{c.f()}if(0===o.length)return e.fallback.accept(this,t);o.length!==e.branches.length&&(s=!0),o.forEach((function(e){var n=e[1].accept(a,t);n!==e[1]&&(s=!0),e[1]=n}));var v=e.fallback.accept(this,t);return v!==e.fallback&&(s=!0),s?new u.CaseExpr(o,v):e}},{key:"visitStepExpr",value:function(e,t){var n=this,i=e.input.accept(this,t),a=e.defaultValue.accept(this,t),o=e.stops.map((function(e){var i=r(e,2);return[i[0],i[1].accept(n,t)]}));return new u.StepExpr(i,a,o)}},{key:"visitInterpolateExpr",value:function(e,t){var n=this,i=e.input.accept(this,t),a=e.stops.map((function(e){var i=r(e,2);return[i[0],i[1].accept(n,t)]}));return new u.InterpolateExpr(e.mode,i,a)}}]),e}();t.ExprInstantiator=c},9375:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ExprParser=void 0;var a,o,s=n(22939);function u(e){switch(e){case a.Tab:case a.Lf:case a.Cr:case a.Space:return!0;default:return!1}}function l(e){return e>=a._0&&e<=a._9}function c(e){return e>=a.a&&e<=a.z||e>=a.A&&e<=a.Z}function d(e){return function(e){return c(e)||l(e)}(e)||e===a._||e===a.Dollar||e===a.Dot||e===a.LBracket||e===a.RBracket}function h(e){switch(e){case o.Eof:return"eof";case o.Error:return"error";case o.Identifier:return"identifier";case o.Number:return"number";case o.String:return"string";case o.Comma:return",";case o.LParen:return"(";case o.RParen:return")";case o.LBracket:return"[";case o.RBracket:return"]";case o.Exclaim:return"!";case o.TildeEqual:return"~=";case o.CaretEqual:return"^=";case o.DollarEqual:return"$=";case o.EqualEqual:return"==";case o.ExclaimEqual:return"!=";case o.Less:return"<";case o.Greater:return">";case o.LessEqual:return"<=";case o.GreaterEqual:return">=";case o.BarBar:return"||";case o.AmpAmp:return"&&";default:throw new Error("invalid token ".concat(e))}}!function(e){e[e.Tab=9]="Tab",e[e.Lf=10]="Lf",e[e.Cr=13]="Cr",e[e.Space=32]="Space",e[e.LParen=40]="LParen",e[e.RParen=41]="RParen",e[e.Comma=44]="Comma",e[e.Dot=46]="Dot",e[e.LBracket=91]="LBracket",e[e.Backslash=92]="Backslash",e[e.RBracket=93]="RBracket",e[e._0=48]="_0",e[e._9=57]="_9",e[e._=95]="_",e[e.A=64]="A",e[e.Z=90]="Z",e[e.a=97]="a",e[e.z=122]="z",e[e.DoubleQuote=34]="DoubleQuote",e[e.SingleQuote=39]="SingleQuote",e[e.Exclaim=33]="Exclaim",e[e.Equal=61]="Equal",e[e.Caret=94]="Caret",e[e.Tilde=126]="Tilde",e[e.Dollar=36]="Dollar",e[e.Less=60]="Less",e[e.Greater=62]="Greater",e[e.Bar=124]="Bar",e[e.Amp=38]="Amp"}(a||(a={})),function(e){e[e.Eof=0]="Eof",e[e.Error=1]="Error",e[e.Identifier=2]="Identifier",e[e.Number=3]="Number",e[e.String=4]="String",e[e.Comma=5]="Comma",e[e.LParen=6]="LParen",e[e.RParen=7]="RParen",e[e.LBracket=8]="LBracket",e[e.RBracket=9]="RBracket",e[e.Exclaim=10]="Exclaim",e[e.TildeEqual=11]="TildeEqual",e[e.CaretEqual=12]="CaretEqual",e[e.DollarEqual=13]="DollarEqual",e[e.EqualEqual=14]="EqualEqual",e[e.ExclaimEqual=15]="ExclaimEqual",e[e.Less=16]="Less",e[e.Greater=17]="Greater",e[e.LessEqual=18]="LessEqual",e[e.GreaterEqual=19]="GreaterEqual",e[e.BarBar=20]="BarBar",e[e.AmpAmp=21]="AmpAmp"}(o||(o={}));var f=function(){function e(t){r(this,e),this.code=t,this.m_token=o.Error,this.m_index=0,this.m_char=a.Lf}return i(e,[{key:"token",value:function(){return this.m_token}},{key:"text",value:function(){var e;return null!==(e=this.m_text)&&void 0!==e?e:""}},{key:"next",value:function(){if(this.m_token=this.yylex(),this.m_token===o.Error)throw new Error("unexpected character ".concat(this.m_char));return this.m_token}},{key:"yyinp",value:function(){var e;this.m_char=null!==(e=this.code.codePointAt(this.m_index++))&&void 0!==e?e:0}},{key:"yylex",value:function(){for(this.m_text=void 0;u(this.m_char);)this.yyinp();if(0===this.m_char)return o.Eof;var e=this.m_char;switch(this.yyinp(),e){case a.LParen:return o.LParen;case a.RParen:return o.RParen;case a.LBracket:return o.LBracket;case a.RBracket:return o.RBracket;case a.Comma:return o.Comma;case a.SingleQuote:case a.DoubleQuote:for(var t=this.m_index-1;this.m_char&&this.m_char!==e;)this.yyinp();if(this.m_char!==e)throw new Error("Unfinished string literal");return this.yyinp(),this.m_text=this.code.substring(t,this.m_index-2),o.String;case a.Exclaim:return this.m_char===a.Equal?(this.yyinp(),o.ExclaimEqual):o.Exclaim;case a.Caret:return this.m_char===a.Equal?(this.yyinp(),o.CaretEqual):o.Error;case a.Tilde:return this.m_char===a.Equal?(this.yyinp(),o.TildeEqual):o.Error;case a.Equal:return this.m_char===a.Equal?(this.yyinp(),o.EqualEqual):o.Error;case a.Less:return this.m_char===a.Equal?(this.yyinp(),o.LessEqual):o.Less;case a.Greater:return this.m_char===a.Equal?(this.yyinp(),o.GreaterEqual):o.Greater;case a.Bar:return this.m_char===a.Bar?(this.yyinp(),o.BarBar):o.Error;case a.Amp:return this.m_char===a.Amp?(this.yyinp(),o.AmpAmp):o.Error;default:var n=this.m_index-2;if(c(e)||e===a._||e===a.Dollar&&d(this.m_char)){for(;d(this.m_char);)this.yyinp();return this.m_text=this.code.substring(n,this.m_index-1),o.Identifier}if(l(e)){for(;l(this.m_char);)this.yyinp();if(this.m_char===a.Dot)for(this.yyinp();l(this.m_char);)this.yyinp();return this.m_text=this.code.substring(n,this.m_index-1),o.Number}if(e===a.Dollar)return this.m_char===a.Equal?(this.yyinp(),o.DollarEqual):o.Error}return o.Error}}]),e}();function p(e){switch(e){case o.TildeEqual:return"~=";case o.CaretEqual:return"^=";case o.DollarEqual:return"$=";case o.EqualEqual:return"==";case o.ExclaimEqual:return"!=";default:return}}function m(e){switch(e){case o.Less:return"<";case o.Greater:return">";case o.LessEqual:return"<=";case o.GreaterEqual:return">=";default:return}}var v=function(){function e(t){r(this,e),this.lex=new f(t),this.lex.next()}return i(e,[{key:"parse",value:function(){return this.parseLogicalOr()}},{key:"yyexpect",value:function(e){if(this.lex.token()!==e)throw new Error("Syntax error: Expected token '".concat(h(e),"' but ")+"found '".concat(h(this.lex.token()),"'"));this.lex.next()}},{key:"parsePrimary",value:function(){switch(this.lex.token()){case o.Identifier:var e=this.lex.text();switch(e){case"has":this.lex.next(),this.yyexpect(o.LParen);var t=this.lex.text();return this.yyexpect(o.Identifier),this.yyexpect(o.RParen),new s.HasAttributeExpr(t);case"length":this.lex.next(),this.yyexpect(o.LParen);var n=this.parseLogicalOr();return this.yyexpect(o.RParen),new s.CallExpr("length",[n]);default:var r=new s.VarExpr(e);return this.lex.next(),r}case o.LParen:this.lex.next();var i=this.parseLogicalOr();return this.yyexpect(o.RParen),i;default:return this.parseLiteral()}}},{key:"parseLiteral",value:function(){switch(this.lex.token()){case o.Number:var e=new s.NumberLiteralExpr(parseFloat(this.lex.text()));return this.lex.next(),e;case o.String:var t=new s.StringLiteralExpr(this.lex.text());return this.lex.next(),t;default:throw new Error("Syntax error")}}},{key:"parseUnary",value:function(){return this.lex.token()===o.Exclaim?(this.lex.next(),new s.CallExpr("!",[this.parseUnary()])):this.parsePrimary()}},{key:"parseRelational",value:function(){for(var e=this.parseUnary();;)if(this.lex.token()===o.Identifier&&"in"===this.lex.text()){this.lex.next(),this.yyexpect(o.LBracket);for(var t=[this.parseLiteral()];this.lex.token()===o.Comma;)this.lex.next(),t.push(this.parseLiteral());this.yyexpect(o.RBracket),e=new s.CallExpr("in",[e,s.LiteralExpr.fromValue(t.map((function(e){return e.value})))])}else{var n=m(this.lex.token());if(void 0===n)break;this.lex.next();var r=this.parseUnary();e=new s.CallExpr(n,[e,r])}return e}},{key:"parseEquality",value:function(){for(var e=this.parseRelational();;){var t=p(this.lex.token());if(void 0===t)break;"~="===t&&(t="in"),this.lex.next();var n=this.parseRelational();e=new s.CallExpr(t,[e,n])}return e}},{key:"parseLogicalAnd",value:function(){var e=this.parseEquality();if(this.lex.token()!==o.AmpAmp)return e;var t=[e];do{this.lex.next(),t.push(this.parseEquality())}while(this.lex.token()===o.AmpAmp);return new s.CallExpr("all",t)}},{key:"parseLogicalOr",value:function(){var e=this.parseLogicalAnd();if(this.lex.token()!==o.BarBar)return e;var t=[e];do{this.lex.next(),t.push(this.parseLogicalAnd())}while(this.lex.token()===o.BarBar);return new s.CallExpr("any",t)}}]),e}();t.ExprParser=v},46704:function(e,t,n){"use strict";var r=n(43269).default,i=n(63038).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ExprPool=void 0;var s=n(22939),u=function(){function e(){a(this,e),this.m_booleanLiterals=new Map,this.m_numberLiterals=new Map,this.m_stringLiterals=new Map,this.m_objectLiterals=new Map,this.m_arrayLiterals=[],this.m_varExprs=new Map,this.m_hasAttributeExprs=new Map,this.m_matchExprs=[],this.m_caseExprs=[],this.m_interpolateExprs=[],this.m_stepExprs=[],this.m_callExprs=new Map}return o(e,[{key:"add",value:function(e){return e.accept(this,void 0)}},{key:"visitNullLiteralExpr",value:function(e,t){return s.NullLiteralExpr.instance}},{key:"visitBooleanLiteralExpr",value:function(e,t){var n=this.m_booleanLiterals.get(e.value);return n||(this.m_booleanLiterals.set(e.value,e),e)}},{key:"visitNumberLiteralExpr",value:function(e,t){var n=this.m_numberLiterals.get(e.value);return n||(this.m_numberLiterals.set(e.value,e),e)}},{key:"visitStringLiteralExpr",value:function(e,t){var n=this.m_stringLiterals.get(e.value);return n||(this.m_stringLiterals.set(e.value,e),e)}},{key:"visitObjectLiteralExpr",value:function(e,t){var n=this.m_objectLiterals.get(e.value);if(n)return n;if(Array.isArray(e.value)){var r=e.value,i=this.m_arrayLiterals.find((function(e){var t=e.value;return t.length===r.length&&r.every((function(e,n){return e===t[n]}))}));if(void 0!==i)return i;this.m_arrayLiterals.push(e)}return this.m_objectLiterals.set(e.value,e),e}},{key:"visitVarExpr",value:function(e,t){var n=this.m_varExprs.get(e.name);return n||(this.m_varExprs.set(e.name,e),e)}},{key:"visitHasAttributeExpr",value:function(e,t){var n=this.m_hasAttributeExprs.get(e.name);return n||(this.m_hasAttributeExprs.set(e.name,e),e)}},{key:"visitMatchExpr",value:function(e,t){var n,a=this,o=e.value.accept(this,t),u=e.branches.map((function(e){var n=i(e,2);return[n[0],n[1].accept(a,t)]})),l=e.fallback.accept(this,t),c=r(this.m_matchExprs);try{for(c.s();!(n=c.n()).done;){var d=n.value;if(d.value===o&&(d.fallback===l&&d.branches.length===u.length)){for(var h=!0,f=0;f<u.length;f++)if(u[f][0]!==d.branches[f][0]||u[f][1]!==d.branches[f][1]){h=!1;break}if(h)return d}}}catch(m){c.e(m)}finally{c.f()}var p=new s.MatchExpr(o,u,l);return this.m_matchExprs.push(p),p}},{key:"visitCaseExpr",value:function(e,t){var n,a=this,o=e.branches.map((function(e){var n=i(e,2),r=n[0],o=n[1];return[r.accept(a,t),o.accept(a,t)]})),u=e.fallback.accept(this,t),l=r(this.m_caseExprs);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(c.fallback===u&&c.branches.length===o.length){for(var d=!0,h=0;h<o.length;h++)if(o[h][0]!==c.branches[h][0]||o[h][1]!==c.branches[h][1]){d=!1;break}if(d)return c}}}catch(p){l.e(p)}finally{l.f()}var f=new s.CaseExpr(o,u);return this.m_caseExprs.push(f),f}},{key:"visitCallExpr",value:function(e,t){var n=this,i=e.args.map((function(e){return e.accept(n,t)}));this.m_callExprs.has(e.op)||this.m_callExprs.set(e.op,[]);var a,o=this.m_callExprs.get(e.op),u=r(o);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l.args.length===i.length){for(var c=0;c<l.args.length&&l.args[c]===i[c];++c);if(c===l.args.length)return l}}}catch(h){u.e(h)}finally{u.f()}var d=new s.CallExpr(e.op,i);return d.descriptor=e.descriptor,o.push(d),d}},{key:"visitStepExpr",value:function(e,t){var n=this;if(this.m_stepExprs.includes(e))return e;var a,o=e.input.accept(this,t),u=e.defaultValue.accept(this,t),l=e.stops.map((function(e){var r=e[0],i=e[1].accept(n,t);return i===e[1]?e:[r,i]})),c=r(this.m_stepExprs);try{var d=function(){var e=a.value;if(e.input===o&&e.defaultValue===u&&l.length===e.stops.length&&l.every((function(t,n){var r=i(t,2),a=r[0],o=r[1];return a===e.stops[n][0]&&o===e.stops[n][1]})))return{v:e}};for(c.s();!(a=c.n()).done;){var h=d();if("object"===typeof h)return h.v}}catch(p){c.e(p)}finally{c.f()}var f=new s.StepExpr(o,u,l);return this.m_stepExprs.push(f),f}},{key:"visitInterpolateExpr",value:function(e,t){var n=this;if(this.m_interpolateExprs.includes(e))return e;var a,o=e.input.accept(this,t),u=e.stops.map((function(e){var r=e[0],i=e[1].accept(n,t);return i===e[1]?e:[r,i]})),l=r(this.m_interpolateExprs);try{var c=function(){var t=a.value;if(t.input===o&&t.mode[0]===e.mode[0]&&t.mode[1]===e.mode[1]&&u.length===t.stops.length&&u.every((function(e,n){var r=i(e,2),a=r[0],o=r[1];return a===t.stops[n][0]&&o===t.stops[n][1]})))return{v:t}};for(l.s();!(a=l.n()).done;){var d=c();if("object"===typeof d)return d.v}}catch(f){l.e(f)}finally{l.f()}var h=new s.InterpolateExpr(e.mode,o,u);return this.m_interpolateExprs.push(h),h}}]),e}();t.ExprPool=u},47633:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFeatureGeometry=void 0,t.isFeatureGeometry=function(e){var t=e.type;return"Point"===t||"MultiPoint"===t||"LineString"===t||"MultiLineString"===t||"Polygon"===t||"MultiPolygon"===t}},63014:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},79829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},91173:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53693:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interpolatedPropertyDefinitionToJsonExpr=t.isInterpolatedPropertyDefinition=t.InterpolationMode=void 0,function(e){e[e.Discrete=0]="Discrete",e[e.Linear=1]="Linear",e[e.Cubic=2]="Cubic",e[e.Exponential=3]="Exponential"}(t.InterpolationMode||(t.InterpolationMode={})),t.isInterpolatedPropertyDefinition=function(e){return!!(e&&void 0===e.interpolationMode&&Array.isArray(e.values)&&e.values.length>0&&void 0!==e.values[0]&&Array.isArray(e.zoomLevels)&&e.zoomLevels.length>0&&void 0!==e.zoomLevels[0]&&e.values.length===e.zoomLevels.length)},t.interpolatedPropertyDefinitionToJsonExpr=function(e){if(void 0===e.interpolation||"Discrete"===e.interpolation){for(var t=["step",["zoom"],e.values[0]],n=1;n<e.zoomLevels.length;++n)t.push(e.zoomLevels[n],e.values[n]);return t}var r=["interpolate"];switch(e.interpolation){case"Linear":r.push(["linear"]);break;case"Cubic":r.push(["cubic"]);break;case"Exponential":r.push(["exponential",void 0!==e.exponent?e.exponent:2]);break;default:throw new Error("interpolation mode '".concat(e.interpolation,"' is not supported"))}r.push(["zoom"]);for(var i=0;i<e.zoomLevels.length;++i)r.push(e.zoomLevels[i],e.values[i]);return r}},71350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPolygonEdges=void 0;var r=n(34585),i=new r.Vector2,a=new r.Vector2,o=new r.Vector2,s=new r.Vector2;t.addPolygonEdges=function(e,t,n,r,u,l,c,d){for(var h=0;h<u.length;++h)if(u[h])if(!0===l){var f=t+2*h,p=f+1,m=t+(h+1)%u.length*2,v=m+1;!0===c&&e.push(f,m),e.push(p,v);var g=(0===h?u.length:h)-1;if(u[g])if(void 0!==d){var y=r[h*n],x=r[h*n+1],_=r[(h+1)%u.length*n],b=r[(h+1)%u.length*n+1];i.set(y,x),a.set(_,b),o.set(r[g*n],r[g*n+1]),s.set(i.x,i.y),s.sub(o).normalize().dot(a.sub(i).normalize())<=d&&e.push(f,p)}else e.push(f,p)}else{var w=t+h,S=t+(h+1)%u.length;e.push(w,S)}}},79145:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Pixels=void 0;var a=/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*))px$/,o=function(){function e(t){r(this,e),this.value=t}return i(e,[{key:"toJSON",value:function(){return"".concat(this.value,"px")}}],[{key:"parse",value:function(t){var n=a.exec(t);if(null!==n)return new e(Number(n[1]))}}]),e}();t.Pixels=o},73917:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyValue=void 0;var r=n(15739),i=n(22939),a=n(79145),o=n(55471),s=n(84727),u=r.LoggerManager.instance.create("PropertyValue");t.getPropertyValue=function(e,t,n){var r,l,c;if(i.Expr.isExpr(e))try{var d=e.evaluate(t,i.ExprScope.Dynamic,n);return"string"===typeof d&&(d=null!==(l=null!==(r=o.RGBA.parse(d))&&void 0!==r?r:a.Pixels.parse(d))&&void 0!==l?l:d),d instanceof o.RGBA?d.getHex():d instanceof a.Pixels?d.value*(null!==(c=Number(t.lookup("$pixelToMeters")))&&void 0!==c?c:1):d}catch(p){return u.error("failed to evaluate expression",JSON.stringify(e),"error",String(p)),null}if(null===e||"undefined"===typeof e)return null;if("string"!==typeof e)return e;var h=t.lookup("$pixelToMeters")||1,f=s.parseStringEncodedNumeral(e,h);return void 0!==f?f:e}},55471:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RGBA=void 0;var a=n(34585),o=n(67538),s=n(84727),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,e),this.r=t,this.g=n,this.b=i,this.a=a}return i(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.a)}},{key:"getHex",value:function(){return o.ColorUtils.getHexFromRgba(this.r,this.g,this.b,this.a)}},{key:"lerp",value:function(e,t){return this.r=a.MathUtils.lerp(this.r,e.r,t),this.g=a.MathUtils.lerp(this.g,e.g,t),this.b=a.MathUtils.lerp(this.b,e.b,t),this.a=a.MathUtils.lerp(this.a,e.a,t),this}},{key:"toJSON",value:function(){return"rgba(".concat(255*this.r<<0,", ").concat(255*this.g<<0,", ").concat(255*this.b<<0,", ").concat(this.a,")")}}],[{key:"parse",value:function(e){var t=s.parseStringEncodedColor(e);if(void 0!==t)return o.ColorUtils.getRgbaFromHex(t)}}]),e}();t.RGBA=u},84727:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringEncodedColor=t.parseStringEncodedNumeral=t.StringEncodedNumeralFormatMaxSize=t.StringEncodedNumeralFormats=t.StringEncodedColorFormats=t.StringEncodedMetricFormats=t.StringEncodedNumeralType=void 0;var i,a=n(15739),o=n(10173),s=n(67538);!function(e){e[e.Meters=0]="Meters",e[e.Pixels=1]="Pixels",e[e.Hex=2]="Hex"}(i=t.StringEncodedNumeralType||(t.StringEncodedNumeralType={}));var u={type:i.Meters,size:1,regExp:/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*))m$/,decoder:function(e,t){var n=u.regExp.exec(e);return!!n&&void 0!==(t[0]=Number(n[1]))}},l={type:i.Pixels,size:1,mask:1,regExp:/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*))px$/,decoder:function(e,t){var n=l.regExp.exec(e);return null!==n&&(t[0]=Number(n[1]),!0)}},c={type:i.Hex,size:4,regExp:/^\#((?:[0-9A-Fa-f][0-9A-Fa-f]){4}|[0-9A-Fa-f]{4})$/,decoder:function(e,t){var n=c.regExp.exec(e);if(null===n)return!1;var r=n[1],i=r.length;return a.assert(4===i||8===i,"Matched incorrect hex color format"),4===i?(t[0]=parseInt(r.charAt(0)+r.charAt(0),16)/255,t[1]=parseInt(r.charAt(1)+r.charAt(1),16)/255,t[2]=parseInt(r.charAt(2)+r.charAt(2),16)/255,t[3]=4===i?parseInt(r.charAt(3)+r.charAt(3),16)/255:1):8===i&&(t[0]=parseInt(r.charAt(0)+r.charAt(1),16)/255,t[1]=parseInt(r.charAt(2)+r.charAt(3),16)/255,t[2]=parseInt(r.charAt(4)+r.charAt(5),16)/255,t[3]=8===i?parseInt(r.charAt(6)+r.charAt(7),16)/255:1),!0}};t.StringEncodedMetricFormats=[u,l];var d=t.StringEncodedMetricFormats.reduce((function(e,t){return Math.max(e,t.size)}),0);t.StringEncodedColorFormats=[c];var h=t.StringEncodedColorFormats.reduce((function(e,t){return Math.max(e,t.size)}),0);t.StringEncodedNumeralFormats=[].concat(r(t.StringEncodedMetricFormats),r(t.StringEncodedColorFormats)),t.StringEncodedNumeralFormatMaxSize=Math.max(h,d);var f=new Array(t.StringEncodedNumeralFormatMaxSize);function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.find((function(t){return!!t.decoder(e,f)}));if(void 0===r){var a=o.parseCSSColor(e);return Array.isArray(a)&&!a.some((function(e){return isNaN(e)}))?s.ColorUtils.getHexFromRgba(a[0]/255,a[1]/255,a[2]/255,a[3]):void 0}switch(null===r||void 0===r?void 0:r.type){case i.Pixels:return f[0]*n;case i.Hex:return s.ColorUtils.getHexFromRgba(f[0],f[1],f[2],f[3]);default:return f[0]}}t.parseStringEncodedNumeral=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return p(e,t.StringEncodedNumeralFormats,n)},t.parseStringEncodedColor=function(e){return p(e,t.StringEncodedColorFormats)}},17668:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.makeDecodedTechnique=t.StyleSetEvaluator=void 0;var s=n(15739),u=n(22939),l=n(46704),c=n(53693),d=n(91753),h=n(38794),f=s.LoggerManager.instance.create("StyleSetEvaluator"),p=d.AttrScope.TechniqueGeometry;var m=function(){function e(){a(this,e)}return o(e,[{key:"classify",value:function(e){if(e._whenExpr){var t=this.switchStyle(e);e._whenExpr=e._whenExpr.accept(this,void 0),this._style=t}}},{key:"visitNullLiteralExpr",value:function(e,t){return e}},{key:"visitBooleanLiteralExpr",value:function(e,t){return e}},{key:"visitNumberLiteralExpr",value:function(e,t){return e}},{key:"visitStringLiteralExpr",value:function(e,t){return e}},{key:"visitObjectLiteralExpr",value:function(e,t){return e}},{key:"visitVarExpr",value:function(e,t){return e}},{key:"visitHasAttributeExpr",value:function(e,t){return e}},{key:"visitMatchExpr",value:function(e,t){return e}},{key:"visitCaseExpr",value:function(e,t){return e}},{key:"visitCallExpr",value:function(e,t){var n=this;if("all"===e.op){var r=e.args.map((function(t){return t.accept(n,e)})).filter((function(e){return void 0!==e}));return new u.CallExpr(e.op,r)}if(t){var i=this.matchVarStringComparison(e);if(i){if(void 0===this._style.layer&&"$layer"===i.name)return void(this._style.layer=i.value);if(void 0===this._style._geometryType&&"$geometryType"===i.name)return void(this._style._geometryType=i.value)}}return e}},{key:"visitStepExpr",value:function(e,t){return e}},{key:"visitInterpolateExpr",value:function(e,t){return e}},{key:"matchVarStringComparison",value:function(e){if("=="===e.op){var t=e.args[0],n=e.args[1];if(t instanceof u.VarExpr&&n instanceof u.StringLiteralExpr)return{name:t.name,value:n.value};if(n instanceof u.VarExpr&&t instanceof u.StringLiteralExpr)return{name:n.name,value:t.value}}}},{key:"switchStyle",value:function(e){var t=this._style;return this._style=e,t}}]),e}(),v=function(){function e(t,n){a(this,e),this.key="",this.set(t,n)}return o(e,[{key:"set",value:function(e,t,n){var r=!1;if(void 0===e){var i=void 0!==n?n.lookup("$layer"):void 0;e="string"===typeof i?i:void 0}if(this.layer!==e&&(this.layer=e,r=!0),void 0===t){var a=void 0!==n?n.lookup("$geometryType"):void 0;t="string"===typeof a?a:void 0}return this.geometryType!==t&&(this.geometryType=t,r=!0),r&&this.updateKey(),this}},{key:"updateKey",value:function(){void 0!==this.layer?void 0!==this.geometryType?this.key="".concat(this.layer,":").concat(this.geometryType):this.key="".concat(this.layer,":"):void 0!==this.geometryType?this.key=":".concat(this.geometryType):this.key="all",this.cachedStyleSet=void 0}}]),e}(),g=function(){function e(t){var n;a(this,e),this.m_options=t,this.m_techniques=[],this.m_exprPool=new l.ExprPool,this.m_cachedResults=new Map,this.m_styleConditionClassifier=new m,this.m_subStyleSetCache=new Map,this.m_definitionExprCache=new Map,this.m_tmpOptimizedSubSetKey=new v,this.m_emptyEnv=new u.Env,this.m_featureDependencies=[],this.m_nextArrayBufferId=0,this.m_definitions=this.m_options.definitions,this.styleSet=(n=this.m_options.styleSet,this.m_definitions,n.map((function(e){return function(e,t){return Object.assign({},e)}(e)}))),function(e){var t,n=0,r=0,a=i(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;o._styleSetIndex=r++,void 0!==o.technique&&void 0===o.renderOrder&&(o.renderOrder=n++)}}catch(s){a.e(s)}finally{a.f()}}(this.styleSet),this.compileStyleSet()}return o(e,[{key:"getMatchingTechniques",value:function(e,t,n){var r=this;if(this.m_previousResult&&this.m_previousEnv&&this.m_featureDependencies.every((function(t){var n;return(null===(n=r.m_previousEnv)||void 0===n?void 0:n.lookup(t))===e.lookup(t)})))return this.m_previousResult;var a=[];this.m_cachedResults.clear();var o=this.m_tmpOptimizedSubSetKey;o.set(t,n,e),this.m_layer=o.layer,this.m_geometryType=o.geometryType,this.m_zoomLevel=e.lookup("$zoom");var s,u=this.getOptimizedStyleSet(o),l=i(u);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(this.processStyle(e,c,a))break}}catch(d){l.e(d)}finally{l.f()}return this.m_previousResult=a,this.m_previousEnv=e,a}},{key:"wantsLayer",value:function(e){return this.getOptimizedStyleSet(this.m_tmpOptimizedSubSetKey.set(e,void 0)).length>0}},{key:"wantsFeature",value:function(e,t){return this.getOptimizedStyleSet(this.m_tmpOptimizedSubSetKey.set(e,t)).length>0}},{key:"expressionEvaluatorCache",get:function(){return this.m_cachedResults}},{key:"resetTechniques",value:function(){var e,t=i(this.m_techniques);try{for(t.s();!(e=t.n()).done;){e.value._index=void 0}}catch(n){t.e(n)}finally{t.f()}this.m_techniques.length=0,this.m_previousResult=void 0,this.m_previousEnv=void 0}},{key:"techniques",get:function(){return this.m_techniques}},{key:"decodedTechniques",get:function(){return this.m_techniques.map(y)}},{key:"getOptimizedStyleSet",value:function(e){if(void 0!==e.cachedStyleSet)return e.cachedStyleSet;var t=this.m_subStyleSetCache.get(e.key);return void 0!==t?(e.cachedStyleSet=t,t):(t=this.createPreFilteredStyleSet(e),this.m_subStyleSetCache.set(e.key,t),e.cachedStyleSet=t,t)}},{key:"createPreFilteredStyleSet",value:function(e){var t=e.layer,n=e.geometryType;return this.styleSet.filter((function(e){return(void 0===t||void 0===e.layer||e.layer===t)&&(void 0===n||void 0===e._geometryType||e._geometryType===n)}))}},{key:"compileStyleSet",value:function(){var e=this;this.m_featureDependencies=["$layer","$geometryType","$zoom"],this.styleSet.forEach((function(t){return e.compileStyle(t)})),this.styleSet.forEach((function(t){e.getOptimizedStyleSet(e.m_tmpOptimizedSubSetKey.set(t.layer,t._geometryType))}))}},{key:"compileStyle",value:function(e){var t=this;if(this.checkStyleDynamicAttributes(e),void 0!==e.when)try{e._whenExpr=Array.isArray(e.when)?u.Expr.fromJSON(e.when,this.m_definitions,this.m_definitionExprCache):u.Expr.parse(e.when),this.m_styleConditionClassifier.classify(e),void 0!==e._whenExpr&&(e._whenExpr=e._whenExpr.intern(this.m_exprPool));var n=e._whenExpr.dependencies();null===n||void 0===n||n.properties.forEach((function(e){t.m_featureDependencies.includes(e)||t.m_featureDependencies.push(e)})),u.isJsonExpr(e.minZoomLevel)&&(e._minZoomLevelExpr=u.Expr.fromJSON(e.minZoomLevel).intern(this.m_exprPool)),u.isJsonExpr(e.maxZoomLevel)&&(e._maxZoomLevelExpr=u.Expr.fromJSON(e.maxZoomLevel).intern(this.m_exprPool))}catch(r){f.log("failed to evaluate expression",JSON.stringify(e.when),"error",String(r))}}},{key:"processStyle",value:function(e,t,n){if(!this.checkZoomLevel(e,t))return!1;if(void 0!==this.m_layer&&void 0!==t.layer&&t.layer!==this.m_layer)return!1;if(void 0!==this.m_geometryType&&void 0!==t._geometryType&&t._geometryType!==this.m_geometryType)return!1;if(t._whenExpr)try{if(!t._whenExpr.evaluate(e,u.ExprScope.Condition,this.m_cachedResults))return!1}catch(r){return f.error("failed to evaluate expression '".concat(JSON.stringify(t.when),"': ").concat(r)),!1}return void 0!==t.technique&&("none"!==t.technique&&n.push(this.getTechniqueForStyleMatch(e,t)),!0===t.final)}},{key:"checkZoomLevel",value:function(e,t){var n,r;if(void 0===t.minZoomLevel&&void 0===t.maxZoomLevel)return!0;var i=this.m_zoomLevel;if(void 0===i)return!0;if(void 0!==t.minZoomLevel){var a=t.minZoomLevel;if(!1===(null===(n=t._minZoomLevelExpr)||void 0===n?void 0:n.isDynamic()))try{a=t._minZoomLevelExpr.evaluate(e,u.ExprScope.Condition,this.m_cachedResults)}catch(s){f.error("failed to evaluate expression '".concat(JSON.stringify(t._minZoomLevelExpr),"': ").concat(s))}if("number"===typeof a&&i<a)return!1}if(void 0!==t.maxZoomLevel){var o=t.maxZoomLevel;if(!1===(null===(r=t._maxZoomLevelExpr)||void 0===r?void 0:r.isDynamic()))try{o=t._maxZoomLevelExpr.evaluate(e,u.ExprScope.Condition,this.m_cachedResults)}catch(s){f.error("failed to evaluate expression '".concat(JSON.stringify(t._maxZoomLevelExpr),"': ").concat(s))}if("number"===typeof o&&i>=o)return!1}return!0}},{key:"getTechniqueForStyleMatch",value:function(e,t){var n;if(void 0!==t._dynamicTechniques){var r=this.evaluateTechniqueProperties(t,e),i=this.getDynamicTechniqueKey(t,r);void 0===(n=t._dynamicTechniques.get(i))&&(n=this.createTechnique(t,i,r),t._dynamicTechniques.set(i,n))}else void 0===(n=t._staticTechnique)&&(t._staticTechnique=n=this.createTechnique(t,"".concat(t._styleSetIndex),[]));return void 0===n._index&&(n._index=this.m_techniques.length,this.m_techniques.push(n)),n}},{key:"getDynamicTechniqueKey",value:function(e,t){var n=this,i=t.map((function(e){var t=r(e,2),i=(t[0],t[1]);return void 0===i?"U":"object"===typeof i?JSON.stringify(i,(function(e,t){if(t instanceof ArrayBuffer){var r=t.id;return void 0===r&&(r=t.id=n.m_nextArrayBufferId++),r}return t})):JSON.stringify(i)})).join(":");return"".concat(e._styleSetIndex,":").concat(i)}},{key:"checkStyleDynamicAttributes",value:function(e){var t,n=this;if(void 0===e._dynamicTechniqueAttributes&&"none"!==e.technique){e._dynamicTechniqueAttributes=[],e._dynamicFeatureAttributes=[],e._dynamicForwardedAttributes=[],e._staticAttributes=[];var r=e._dynamicFeatureAttributes,i=e._dynamicTechniqueAttributes,a=e._dynamicForwardedAttributes,o=e._staticAttributes,s=function(t,s){if(void 0!==s){if(u.isJsonExpr(s)?s=u.Expr.fromJSON(s,n.m_definitions,n.m_definitionExprCache).intern(n.m_exprPool):c.isInterpolatedPropertyDefinition(s)&&(s=u.Expr.fromJSON(c.interpolatedPropertyDefinitionToJsonExpr(s)).intern(n.m_exprPool)),u.Expr.isExpr(s)){var l=s.dependencies();l.featureState&&("enabled"!==t?f.log("feature-state is not supported in this context"):e._usesFeatureState=!0),0!==l.properties.size||s.isDynamic()||(s=s.evaluate(n.m_emptyEnv))}if(u.Expr.isExpr(s)){var h=function(e,t){var n,r;return"extruded-polygon"===e.technique&&"color"===t&&!1!==e.vertexColors?p:null!==(r=null===(n=d.getTechniqueAttributeDescriptor(e.technique,t))||void 0===n?void 0:n.scope)&&void 0!==r?r:p}(e,t),m=s.dependencies();switch(m.properties.forEach((function(e){n.m_featureDependencies.includes(e)||n.m_featureDependencies.push(e)})),h){case d.AttrScope.FeatureGeometry:r.push([t,s]);break;case d.AttrScope.TechniqueGeometry:i.push([t,s]);break;case d.AttrScope.TechniqueRendering:0===m.properties.size?a.push([t,s]):i.push([t,s])}}else void 0!==s&&null!==s&&o.push([t,s])}},l=new Map([["category","_category"],["secondaryCategory","_secondaryCategory"]]);for(var h in e){if(e.hasOwnProperty(h))if(!h.startsWith("_"))if(!["when","technique","layer","attr","description"].includes(h))s(null!==(t=l.get(h))&&void 0!==t?t:h,e[h])}if(void 0!==e.attr)for(var m in e.attr)e.attr.hasOwnProperty(m)&&s(m,e.attr[m]);i.length>0&&(e._dynamicTechniques=new Map)}}},{key:"evaluateTechniqueProperties",value:function(e,t){var n=this;return void 0===e._dynamicTechniqueAttributes?[]:e._dynamicTechniqueAttributes.map((function(e){var i=r(e,2),a=i[0],o=i[1];try{return[a,o.evaluate(t,u.ExprScope.Value,n.m_cachedResults)]}catch(s){return f.error("failed to evaluate expression '".concat(o.toJSON(),"': ").concat(s)),[a,null]}}))}},{key:"createTechnique",value:function(e,t,n){var a,o,s={};if(s.name=e.technique,void 0!==e._staticAttributes){var u,l=i(e._staticAttributes);try{for(l.s();!(u=l.n()).done;){var c=r(u.value,2),d=c[0],f=c[1];null!==f&&(s[d]=f)}}catch(A){l.e(A)}finally{l.f()}}var p,m=i(n);try{for(m.s();!(p=m.n()).done;){var v=r(p.value,2),g=v[0],y=v[1];null!==y&&(s[g]=y)}}catch(A){m.e(A)}finally{m.f()}if(void 0!==e._dynamicFeatureAttributes){var x,_=i(e._dynamicFeatureAttributes);try{for(_.s();!(x=_.n()).done;){var b=r(x.value,2),w=b[0],S=b[1];s[w]=S}}catch(A){_.e(A)}finally{_.f()}}if(void 0!==e._dynamicForwardedAttributes){var M,E=i(e._dynamicForwardedAttributes);try{for(E.s();!(M=E.n()).done;){var T=r(M.value,2),k=T[0],C=T[1];s[k]=C}}catch(A){E.e(A)}finally{E.f()}}return s._index=this.m_techniques.length,s._styleSetIndex=e._styleSetIndex,void 0!==e.styleSet&&(s._styleSet=e.styleSet),void 0!==e._usesFeatureState&&(s._usesFeatureState=e._usesFeatureState),h.setTechniqueRenderOrderOrPriority(s,null!==(a=this.m_options.priorities)&&void 0!==a?a:[],null!==(o=this.m_options.labelPriorities)&&void 0!==o?o:[]),this.m_techniques.push(s),s}}]),e}();function y(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"===typeof r&&(r.isVector2||r.isVector3||r.isVector4)&&(r=u.LiteralExpr.fromValue(r)),u.Expr.isExpr(r)&&(r=r.toJSON()),t[n]=r}return t}t.StyleSetEvaluator=g,t.makeDecodedTechnique=y},51638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateTechniqueAttr=void 0;var r=n(22939),i=n(71872);t.evaluateTechniqueAttr=function(e,t,n){if(void 0===t)return n;var a=r.Env.isEnv(e)?i.getPropertyValue(t,e):i.getPropertyValue(t,e.env,e.cachedExprResults);return null!==a&&void 0!==a?a:n}},91753:function(e,t){"use strict";var n;function r(){for(var e={attrDescriptors:{}},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];void 0!==o.attrTransparencyColor&&(e.attrTransparencyColor=o.attrTransparencyColor),void 0!==o.attrDescriptors&&(e.attrDescriptors=Object.assign(Object.assign({},e.attrDescriptors),o.attrDescriptors))}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTechniqueAutomaticAttrs=t.getTechniqueAttributeDescriptor=t.getTechniqueDescriptor=t.AttrScope=void 0,function(e){e[e.FeatureGeometry=0]="FeatureGeometry",e[e.TechniqueGeometry=1]="TechniqueGeometry",e[e.TechniqueRendering=2]="TechniqueRendering"}(n=t.AttrScope||(t.AttrScope={}));var i={attrTransparencyColor:"color",attrDescriptors:{constantHeight:n.FeatureGeometry,enabled:n.FeatureGeometry,fadeFar:n.TechniqueRendering,fadeNear:n.TechniqueRendering,transparent:{scope:n.TechniqueRendering,automatic:!0},side:{scope:n.TechniqueRendering,automatic:!0}}},a=r(i,{attrDescriptors:{color:{scope:n.TechniqueRendering,automatic:!0},size:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0}}}),o=r(i,a),s=r(i,a),u=r(i,{attrDescriptors:{text:n.FeatureGeometry,label:n.FeatureGeometry,useAbbreviation:n.FeatureGeometry,useIsoCode:n.FeatureGeometry,poiName:n.FeatureGeometry,imageTexture:n.FeatureGeometry,iconColor:n.TechniqueRendering,iconBrightness:n.TechniqueRendering,backgroundColor:n.TechniqueRendering,backgroundSize:n.TechniqueRendering,backgroundOpacity:n.TechniqueRendering,color:n.TechniqueRendering,opacity:n.TechniqueRendering,size:n.TechniqueRendering}}),l={attrDescriptors:{polygonOffset:{scope:n.TechniqueRendering,automatic:!0},polygonOffsetFactor:{scope:n.TechniqueRendering,automatic:!0},polygonOffsetUnits:{scope:n.TechniqueRendering,automatic:!0},depthTest:{scope:n.TechniqueRendering,automatic:!0},transparent:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},color:{scope:n.TechniqueRendering,automatic:!0},lineColor:n.TechniqueRendering,lineFadeFar:n.TechniqueRendering,lineFadeNear:n.TechniqueRendering}},c=r(i,l,{attrDescriptors:{lineWidth:n.TechniqueRendering,secondaryWidth:n.TechniqueRendering,secondaryColor:n.TechniqueRendering,dashSize:n.TechniqueRendering,gapSize:n.TechniqueRendering,outlineColor:{scope:n.TechniqueRendering,automatic:!0},caps:{scope:n.TechniqueRendering,automatic:!0},drawRangeStart:{scope:n.TechniqueRendering,automatic:!0},drawRangeEnd:{scope:n.TechniqueRendering,automatic:!0},dashes:{scope:n.TechniqueRendering,automatic:!0},dashColor:{scope:n.TechniqueRendering,automatic:!0}}}),d=r(i,{attrDescriptors:{color:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},lineWidth:n.FeatureGeometry}}),h=r(i,l,{attrDescriptors:{wireframe:{scope:n.TechniqueRendering,automatic:!0},color:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},transparent:{scope:n.TechniqueRendering,automatic:!0},lineWidth:n.TechniqueRendering,map:{scope:n.TechniqueRendering,automatic:!0}}}),f=r(i,{attrDescriptors:{color:{scope:n.TechniqueRendering,automatic:!0},vertexColors:{scope:n.TechniqueRendering,automatic:!0},wireframe:{scope:n.TechniqueRendering,automatic:!0},roughness:{scope:n.TechniqueRendering,automatic:!0},metalness:{scope:n.TechniqueRendering,automatic:!0},alphaTest:{scope:n.TechniqueRendering,automatic:!0},depthTest:{scope:n.TechniqueRendering,automatic:!0},transparent:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},emissive:{scope:n.TechniqueRendering,automatic:!0},emissiveIntensity:{scope:n.TechniqueRendering,automatic:!0},refractionRatio:{scope:n.TechniqueRendering,automatic:!0},normalMapType:{scope:n.TechniqueRendering,automatic:!0},map:{scope:n.TechniqueRendering,automatic:!0},normalMap:{scope:n.TechniqueRendering,automatic:!0},displacementMap:{scope:n.TechniqueRendering,automatic:!0},roughnessMap:{scope:n.TechniqueRendering,automatic:!0},emissiveMap:{scope:n.TechniqueRendering,automatic:!0},bumpMap:{scope:n.TechniqueRendering,automatic:!0},metalnessMap:{scope:n.TechniqueRendering,automatic:!0},alphaMap:{scope:n.TechniqueRendering,automatic:!0}}}),p={"extruded-polygon":r(i,f,{attrDescriptors:{height:n.FeatureGeometry,floorHeight:n.FeatureGeometry,color:n.FeatureGeometry,defaultColor:n.FeatureGeometry,defaultHeight:n.FeatureGeometry,boundaryWalls:n.FeatureGeometry,footprint:n.FeatureGeometry,maxSlope:n.FeatureGeometry,animateExtrusion:n.TechniqueRendering,lineWidth:n.TechniqueRendering,lineFadeNear:n.TechniqueRendering,lineFadeFar:n.TechniqueRendering,lineColor:n.TechniqueRendering}}),"line-marker":u,"labeled-icon":u,"solid-line":c,"dashed-line":c,terrain:f,standard:f,squares:o,circles:s,line:d,segments:d,fill:h,text:r(i,{attrDescriptors:{text:n.FeatureGeometry,label:n.FeatureGeometry,useAbbreviation:n.FeatureGeometry,useIsoCode:n.FeatureGeometry,backgroundColor:n.TechniqueRendering,backgroundSize:n.TechniqueRendering,backgroundOpacity:n.TechniqueRendering,color:n.TechniqueRendering,opacity:n.TechniqueRendering,priority:n.TechniqueRendering,size:n.TechniqueRendering}}),shader:r(i,{attrDescriptors:{params:n.TechniqueRendering}})};function m(e){return"string"!==typeof e&&(e=e.name),p[e]}t.getTechniqueDescriptor=m,t.getTechniqueAttributeDescriptor=function(e,t){var n=m(e),r=null===n||void 0===n?void 0:n.attrDescriptors,i=null===r||void 0===r?void 0:r[t];if(void 0!==typeof i)return"object"===typeof i?i:{scope:i}};var v=new Map;t.getTechniqueAutomaticAttrs=function(e){var t;if("string"!==typeof e&&(e=e.name),v.has(e))return v.get(e);var n=[],r=null===(t=m(e))||void 0===t?void 0:t.attrDescriptors;if(void 0===r)return n;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];void 0!==a&&"number"!==typeof a&&!0===a.automatic&&n.push(i)}return v.set(e,n),n}},72885:function(e,t,n){"use strict";var r,i=n(43269).default,a=n(34575).default,o=n(93913).default,s=n(2205).default,u=n(99842).default,l=n(65957).default;Object.defineProperty(t,"__esModule",{value:!0}),t.isTextureBuffer=t.PlacementToken=t.transientToPickability=t.Pickability=t.PoiStackMode=t.TextureCoordinateType=t.GeometryKindSet=t.GeometryKind=t.StandardGeometryKind=void 0,function(e){e.All="_all_",e.Background="background",e.Terrain="terrain",e.Area="area",e.Line="line",e.Water="water",e.Border="border",e.Road="road",e.Building="building",e.Label="label",e.Detail="detail"}(r=t.StandardGeometryKind||(t.StandardGeometryKind={})),t.GeometryKind=r;var c,d=function(e){s(n,e);var t=u(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"isSuperset",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.has(r))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}},{key:"hasIntersection",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.has(r))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"hasOrIntersects",value:function(e){return e instanceof Set?this.hasIntersection(e):this.has(e)}},{key:"hasOrIntersectsArray",value:function(e){var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.has(r))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}}]),n}(l(Set));t.GeometryKindSet=d,function(e){e.TileSpace="tile-space",e.EquirectangularSpace="equirectangular-space",e.FeatureSpace="feature-space"}(t.TextureCoordinateType||(t.TextureCoordinateType={})),function(e){e.Show="show-in-stack",e.Hide="hide-in-stack",e.ShowParent="show-parent"}(t.PoiStackMode||(t.PoiStackMode={})),function(e){e.onlyVisible="only-visible",e.transient="transient",e.all="all"}(c=t.Pickability||(t.Pickability={})),t.transientToPickability=function(e){var t=c.onlyVisible;return void 0!==e&&null!==e&&(t="string"===typeof e?e:!0===e?c.transient:c.onlyVisible),t},function(e){e.TopLeft="TL",e.Top="T",e.TopRight="TR",e.Right="R",e.BottomRight="BR",e.Bottom="B",e.BottomLeft="BL",e.Left="L",e.Center="C",e.NorthWest="NW",e.North="N",e.NorthEast="NE",e.East="E",e.SouthEast="SE",e.South="S",e.SouthWest="SW",e.West="W"}(t.PlacementToken||(t.PlacementToken={})),t.isTextureBuffer=function(e){return e&&e.buffer&&"string"===typeof e.type}},38794:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.setTechniqueRenderOrderOrPriority=t.composeTechniqueTextureName=t.addBuffersToTransferList=t.textureCoordinateType=t.supportsTextures=t.needsVertexNormals=t.isLabelRejectionLineTechnique=t.isShaderTechnique=t.isTextTechnique=t.isTerrainTechnique=t.isStandardTechnique=t.isExtrudedPolygonTechnique=t.isFillTechnique=t.isStandardExtrudedLineTechnique=t.isBasicExtrudedLineTechnique=t.isExtrudedLineTechnique=t.isSegmentsTechnique=t.isSpecialDashesLineTechnique=t.isSolidLineTechnique=t.isLineTechnique=t.isLineMarkerTechnique=t.isPoiTechnique=t.isSquaresTechnique=t.isCirclesTechnique=t.TRANSPARENCY_PROPERTY_KEYS=t.TEXTURE_PROPERTY_KEYS=void 0;var i=n(72885);function a(e){return"labeled-icon"===e.name}function o(e){return"line-marker"===e.name}function s(e){return"extruded-line"===e.name}function u(e){return s(e)&&"standard"===e.shading}function l(e){return"fill"===e.name}function c(e){return"extruded-polygon"===e.name}function d(e){return"standard"===e.name}function h(e){return"terrain"===e.name}function f(e){return"text"===e.name}function p(e){return"shader"===e.name}function m(e){return l(e)||d(e)||c(e)||h(e)}t.TEXTURE_PROPERTY_KEYS=["map","normalMap","displacementMap","roughnessMap","emissiveMap","alphaMap","metalnessMap","bumpMap"],t.TRANSPARENCY_PROPERTY_KEYS=["opacity","transparent"],t.isCirclesTechnique=function(e){return"circles"===e.name},t.isSquaresTechnique=function(e){return"squares"===e.name},t.isPoiTechnique=a,t.isLineMarkerTechnique=o,t.isLineTechnique=function(e){return"line"===e.name},t.isSolidLineTechnique=function(e){return"solid-line"===e.name||"dashed-line"===e.name},t.isSpecialDashesLineTechnique=function(e){return("solid-line"===e.name||"dashed-line"===e.name)&&void 0!==e.dashes&&"Square"!==e.dashes},t.isSegmentsTechnique=function(e){return"segments"===e.name},t.isExtrudedLineTechnique=s,t.isBasicExtrudedLineTechnique=function(e){return s(e)&&"basic"===e.shading},t.isStandardExtrudedLineTechnique=u,t.isFillTechnique=l,t.isExtrudedPolygonTechnique=c,t.isStandardTechnique=d,t.isTerrainTechnique=h,t.isTextTechnique=f,t.isShaderTechnique=p,t.isLabelRejectionLineTechnique=function(e){return"label-rejection-line"===e.name},t.needsVertexNormals=function(e){return c(e)||l(e)||d(e)||h(e)||u(e)},t.supportsTextures=m,t.textureCoordinateType=function(e){return m(e)||p(e)?e.textureCoordinateType:void 0},t.addBuffersToTransferList=function(e,n){if(d(e)||c(e)||h(e)){var a,o=r(t.TEXTURE_PROPERTY_KEYS);try{for(o.s();!(a=o.n()).done;){var s=e[a.value];i.isTextureBuffer(s)&&s.buffer instanceof ArrayBuffer&&n.push(s.buffer)}}catch(u){o.e(u)}finally{o.f()}}},t.composeTechniqueTextureName=function(e,t){var n=e;return"string"===typeof t.imageTexturePrefix&&(n=t.imageTexturePrefix+n),"string"===typeof t.imageTexturePostfix&&(n+=t.imageTexturePostfix),n},t.setTechniqueRenderOrderOrPriority=function(e,t,n){if(f(e)||a(e)||o(e)){if(n&&"string"===typeof e._category){var r=n.indexOf(e._category);-1!==r&&(e.priority=n.length-r)}}else if(t&&void 0!==e._styleSet){var i=function(n){var r=null===t||void 0===t?void 0:t.findIndex((function(t){return t.group===e._styleSet&&t.category===n}));return void 0!==r&&-1!==r?10*(r+1):void 0};if("string"===typeof e._category){var s=i(e._category);void 0!==s&&(e.renderOrder=s)}if("string"===typeof e._secondaryCategory){var u=i(e._secondaryCategory);void 0!==u&&(e.secondaryRenderOrder=u)}}}},6705:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonExprReference=void 0,t.isJsonExprReference=function(e){return Array.isArray(e)&&2===e.length&&"ref"===e[0]&&"string"===typeof e[1]}},68374:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeVisitor=void 0;var o=n(22939),s=function(){function e(t){i(this,e),this.theme=t}return a(e,[{key:"visitStyles",value:function(e){var t=function(t){return!o.isJsonExpr(t)&&!!e(t)};if(void 0!==this.theme.styles)for(var n in this.theme.styles)if(void 0!==this.theme.styles[n]){var i,a=r(this.theme.styles[n]);try{for(a.s();!(i=a.n()).done;){if(t(i.value))return!0}}catch(s){a.e(s)}finally{a.f()}}return!1}}]),e}();t.ThemeVisitor=s},14650:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeBufferUtils=void 0;var i=n(51566);!function(e){function t(e){if(e instanceof Int8Array)return"int8";if(e instanceof Uint8Array)return"uint8";if(e instanceof Int16Array)return"int16";if(e instanceof Uint16Array)return"uint16";if(e instanceof Int32Array)return"int32";if(e instanceof Uint32Array)return"uint32";if(e instanceof Float32Array)return"float";throw new Error("Unsupported buffer type ".concat(name))}function n(e){var n=e.array;return{name:e.name,buffer:n.buffer,type:t(n),itemCount:e.itemSize,normalized:e.normalized}}e.getBufferElementType=t,e.fromThreeBufferAttribute=n,e.fromThreeInterleavedBufferAttribute=function(e){throw new Error("Not implemented yet")},e.fromThreeBufferGeometry=function(e,t){var a,o=[],s=Object.getOwnPropertyNames(e.attributes),u=r(s);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=n(e.attributes[l]);c.name=l,o.push(c)}}catch(p){u.e(p)}finally{u.f()}var d=null!==e.index?n(e.index):void 0,h=0;if(void 0!==d)h=null===e.index?0:e.index.count;else{var f=e.attributes.position;if(void 0===f)throw new Error("Missing position attibute to deduce item count");h=f.count}return{type:i.GeometryType.Unspecified,vertexAttributes:o,index:d,groups:[{start:0,count:h,technique:t}]}}}(t.ThreeBufferUtils||(t.ThreeBufferUtils={}))},44987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68891:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerDecoderProtocol=t.RequestController=void 0;var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;r(this,e),this.priority=t,this.abortController=n}return i(e,[{key:"signal",get:function(){return this.abortController.signal}},{key:"abort",value:function(){this.abortController.abort()}}]),e}();t.RequestController=a,function(e){var t,n;!function(e){e.Configuration="configuration"}(t=e.DecoderMessageName||(e.DecoderMessageName={})),e.isConfigurationMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Configuration},function(e){e.DecodeTileRequest="decode-tile-request",e.TileInfoRequest="tile-info-request"}(n=e.Requests||(e.Requests={})),e.isDecodeTileRequest=function(e){return e&&"string"===typeof e.type&&e.type===n.DecodeTileRequest},e.isTileInfoRequest=function(e){return e&&"string"===typeof e.type&&e.type===n.TileInfoRequest}}(t.WorkerDecoderProtocol||(t.WorkerDecoderProtocol={}))},47468:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerServiceProtocol=void 0,function(e){var t;e.WORKER_SERVICE_MANAGER_SERVICE_ID="worker-service-manager",function(e){e.Initialized="initialized",e.Request="request",e.Response="response"}(t=e.ServiceMessageName||(e.ServiceMessageName={})),e.isInitializedMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Initialized},function(e){e.CreateService="create-service",e.DestroyService="destroy-service"}(e.Requests||(e.Requests={})),e.isUnknownServiceError=function(e){return e.message.includes("unknown targetServiceType requested: ")},e.isRequestMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Request},e.isResponseMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Response}}(t.WorkerServiceProtocol||(t.WorkerServiceProtocol={}))},23365:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerTilerProtocol=void 0,function(e){var t;!function(e){e.RegisterIndex="register-index",e.UpdateIndex="update-index",e.TileRequest="tile-request"}(t=e.Requests||(e.Requests={})),e.isRegisterIndexRequest=function(e){return e&&"string"===typeof e.type&&e.type===t.RegisterIndex},e.isUpdateIndexRequest=function(e){return e&&"string"===typeof e.type&&e.type===t.UpdateIndex},e.isTileRequest=function(e){return e&&"string"===typeof e.type&&e.type===t.TileRequest}}(t.WorkerTilerProtocol||(t.WorkerTilerProtocol={}))},59944:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayOperators=void 0;var i=n(22939),a=["boolean","number","string"];function o(e,t){if(!(e instanceof i.StringLiteralExpr)||!a.includes(e.value))throw new Error('expected "boolean", "number" or "string" instead of \''.concat(JSON.stringify(e),"'"));var n=e.value;t.forEach((function(e,t){if(typeof e!==n)throw new Error("expected array element at index ".concat(t," to have type '").concat(n,"'"))}))}function s(e,t){var n=e.evaluate(t);if(!Array.isArray(n))throw new Error("'".concat(n,"' is not an array"));return n}var u={array:{call:function(e,t){switch(t.args.length){case 0:throw new Error("not enough arguments");case 1:return s(e,t.args[0]);case 2:var n=s(e,t.args[1]);return o(t.args[0],n),n;case 3:var r=s(e,t.args[2]);return function(e,t){if(!(e instanceof i.NumberLiteralExpr))throw new Error("missing expected number of elements");var n=e.value;if(t.length!==n)throw new Error("the array must have ".concat(n," element(s)"))}(t.args[1],r),o(t.args[0],r),r;default:throw new Error("too many arguments")}}},"make-array":{call:function(e,t){if(0===t.args.length)throw new Error("not enough arguments");return r(t.args.map((function(t){return e.evaluate(t)})))}},at:{call:function(e,t){var n=t.args,r=e.evaluate(n[0]);if("number"!==typeof r)throw new Error("expected the index of the element to retrieve");var i=e.evaluate(n[1]);if(!Array.isArray(i))throw new Error("expected an array");return r>=0&&r<i.length?i[r]:null}},slice:{call:function(e,t){if(t.args.length<2)throw new Error("not enough arguments");var n=e.evaluate(t.args[0]);if("string"!==typeof n&&!Array.isArray(n))throw new Error("input must be a string or an array");var r,i=e.evaluate(t.args[1]);if("number"!==typeof i)throw new Error("expected an index");if(t.args.length>2&&"number"!==typeof(r=e.evaluate(t.args[2])))throw new Error("expected an index");return n.slice(i,r)}}};t.ArrayOperators=u},99880:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CastOperators=void 0;var i={"to-boolean":{call:function(e,t){return Boolean(e.evaluate(t.args[0]))}},"to-string":{call:function(e,t){return String(e.evaluate(t.args[0]))}},"to-number":{call:function(e,t){var n,i=r(t.args);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=Number(e.evaluate(a));if(!isNaN(o))return o}}catch(s){i.e(s)}finally{i.f()}throw new Error("cannot convert the value to a number")}}};t.CastOperators=i},98502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorOperators=void 0;var r=n(34585),i=n(67538),a=n(84727),o={alpha:{call:function(e,t){var n=e.evaluate(t.args[0]);return"string"===typeof n&&(n=a.parseStringEncodedColor(n)),"number"===typeof n?i.ColorUtils.getAlphaFromHex(n):1}},rgba:{call:function(e,t){var n=e.evaluate(t.args[0]),a=e.evaluate(t.args[1]),o=e.evaluate(t.args[2]),s=e.evaluate(t.args[3]);if("number"===typeof n&&"number"===typeof a&&"number"===typeof o&&"number"===typeof s&&n>=0&&a>=0&&o>=0&&s>=0&&s<=1)return function(e,t,n,a){return i.ColorUtils.getHexFromRgba(r.MathUtils.clamp(e,0,255)/255,r.MathUtils.clamp(t,0,255)/255,r.MathUtils.clamp(n,0,255)/255,r.MathUtils.clamp(a,0,1))}(n,a,o,s);throw new Error("unknown color 'rgba(".concat(n,",").concat(a,",").concat(o,",").concat(s,")'"))}},rgb:{call:function(e,t){var n=e.evaluate(t.args[0]),a=e.evaluate(t.args[1]),o=e.evaluate(t.args[2]);if("number"===typeof n&&"number"===typeof a&&"number"===typeof o&&n>=0&&a>=0&&o>=0)return function(e,t,n){return i.ColorUtils.getHexFromRgb(r.MathUtils.clamp(e,0,255)/255,r.MathUtils.clamp(t,0,255)/255,r.MathUtils.clamp(n,0,255)/255)}(n,a,o);throw new Error("unknown color 'rgb(".concat(n,",").concat(a,",").concat(o,")'"))}},hsl:{call:function(e,t){var n=e.evaluate(t.args[0]),a=e.evaluate(t.args[1]),o=e.evaluate(t.args[2]);if("number"===typeof n&&"number"===typeof a&&"number"===typeof o&&n>=0&&a>=0&&o>=0)return function(e,t,n){return i.ColorUtils.getHexFromHsl(r.MathUtils.euclideanModulo(e,360)/360,r.MathUtils.clamp(t,0,100)/100,r.MathUtils.clamp(n,0,100)/100)}(n,a,o);throw new Error("unknown color 'hsl(".concat(n,",").concat(a,"%,").concat(o,"%)'"))}}};t.ColorOperators=o},25074:function(e,t){"use strict";function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.evaluate(t.args[0]),i=e.evaluate(t.args[1]);if(!("number"===typeof r&&"number"===typeof i||"string"===typeof r&&"string"===typeof i)&&n)throw new Error("invalid operands '".concat(r,"' and '").concat(i,"' for operator '").concat(t.op,"'"));switch(t.op){case"<":return r<i;case">":return r>i;case"<=":return r<=i;case">=":return r>=i;default:throw new Error("invalid comparison operator '".concat(t.op,"'"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.ComparisonOperators=void 0;var r={"!":{call:function(e,t){return!e.evaluate(t.args[0])}},"==":{call:function(e,t){return e.evaluate(t.args[0])===e.evaluate(t.args[1])}},"!=":{call:function(e,t){return e.evaluate(t.args[0])!==e.evaluate(t.args[1])}},"<":{call:function(e,t){return n(e,t)}},">":{call:function(e,t){return n(e,t)}},"<=":{call:function(e,t){return n(e,t)}},">=":{call:function(e,t){return n(e,t)}}};t.ComparisonOperators=r},80303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureOperators=void 0;var r=n(18284),i=n(22939),a={"geometry-type":{call:function(e,t){switch(e.env.lookup("$geometryType")){case"point":return"Point";case"line":return"LineString";case"polygon":return"Polygon";default:return null}}},"feature-state":{isDynamicOperator:function(){return!0},call:function(e,t){var n,a;if(e.scope!==i.ExprScope.Dynamic)throw new Error("feature-state cannot be used in this context");var o=e.evaluate(t.args[0]);if("string"!==typeof o)throw new Error("expected the name of the property of the feature state");var s=e.env.lookup("$state");return r.Env.isEnv(s)?null!==(n=s.lookup(o))&&void 0!==n?n:null:s instanceof Map&&null!==(a=s.get(o))&&void 0!==a?a:null}},id:{call:function(e,t){var n;return null!==(n=e.env.lookup("$id"))&&void 0!==n?n:null}}};t.FeatureOperators=a},28778:function(e,t,n){"use strict";var r=n(43269).default;function i(e,t,n){switch(t){case"boolean":case"number":case"string":var i,a=r(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e.evaluate(o);if(typeof s===t)return s}}catch(u){a.e(u)}finally{a.f()}throw new Error("expected a '".concat(t,"'"));default:throw new Error("invalid type '".concat(t,"'"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.FlowOperators=void 0;var a={all:{call:function(e,t){var n,i=r(t.args);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!e.evaluate(a))return!1}}catch(o){i.e(o)}finally{i.f()}return!0}},any:{call:function(e,t){var n,i=r(t.args);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(e.evaluate(a))return!0}}catch(o){i.e(o)}finally{i.f()}return!1}},none:{call:function(e,t){var n,i=r(t.args);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(e.evaluate(a))return!1}}catch(o){i.e(o)}finally{i.f()}return!0}},boolean:{call:function(e,t){return i(e,"boolean",t.args)}},number:{call:function(e,t){return i(e,"number",t.args)}},string:{call:function(e,t){return i(e,"string",t.args)}}};t.FlowOperators=a},14982:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapOperators=void 0;var r=n(22939),i={"ppi-scale":{call:function(e,t){return e.evaluate(t.args[0])*(t.args[1]?e.evaluate(t.args[1]):1)}},"world-ppi-scale":{isDynamicOperator:function(){return!0},call:function(e,t){var n=e.evaluate(t.args[0]),r=t.args[1]?e.evaluate(t.args[1]):1,i=e.env.lookup("$zoom");return n*(Math.pow(2,17)/Math.pow(2,i))*r}},"world-discrete-ppi-scale":{isDynamicOperator:function(){return!0},call:function(e,t){var n=e.evaluate(t.args[0]),r=t.args[1]?e.evaluate(t.args[1]):1,i=e.env.lookup("$zoom");return n*(Math.pow(2,17)/Math.pow(2,Math.floor(i)))*r}},ppi:{call:function(e){var t=e.env.lookup("$ppi");return"number"===typeof t?t:72}},zoom:{isDynamicOperator:function(){return!0},call:function(e,t){var n;return e.scope===r.ExprScope.Value?t:null!==(n=e.env.lookup("$zoom"))&&void 0!==n?n:null}}};t.MapOperators=i},70628:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MathOperators=void 0;var i=n(34585),a={"^":{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error("invalid operands '".concat(typeof n,"' and '").concat(typeof r,"' for operator '^'"));return Math.pow(n,r)}},"-":{call:function(e,t){if(1===t.args.length){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("\xecnvalid operand '".concat(typeof n," for operator '-'"));return-n}var r=e.evaluate(t.args[0]),i=e.evaluate(t.args[1]);if("number"!==typeof r||"number"!==typeof i)throw new Error("invalid operands '".concat(typeof r,"' and '").concat(typeof i,"' for operator '-'"));return r-i}},"/":{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error("invalid operands '".concat(typeof n,"' and '").concat(typeof r,"' for operator '/'"));return n/r}},"%":{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error("invalid operands '".concat(typeof n,"' and '").concat(typeof r,"' for operator '%'"));return n%r}},"+":{call:function(e,t){return t.args.reduce((function(t,n){return Number(t)+Number(e.evaluate(n))}),0)}},"*":{call:function(e,t){return t.args.reduce((function(t,n){return Number(t)*Number(e.evaluate(n))}),1)}},abs:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'abs'"));return Math.abs(n)}},acos:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'acos'"));return Math.acos(n)}},asin:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'asin'"));return Math.asin(n)}},atan:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'atan'"));return Math.atan(n)}},ceil:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'ceil'"));return Math.ceil(n)}},cos:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'cos'"));return Math.cos(n)}},e:{call:function(){return Math.E}},floor:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'floor'"));return Math.floor(n)}},ln:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'ln'"));return Math.log(n)}},ln2:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'ln2'"));return Math.log2(n)}},log10:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'log10'"));return Math.log10(n)}},max:{call:function(e,t){return Math.max.apply(Math,r(t.args.map((function(t){return Number(e.evaluate(t))}))))}},min:{call:function(e,t){return Math.min.apply(Math,r(t.args.map((function(t){return Number(e.evaluate(t))}))))}},clamp:{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]),a=e.evaluate(t.args[2]);if("number"!==typeof n||"number"!==typeof r||"number"!==typeof a)throw new Error("invalid operands '".concat(n,"', ").concat(r,", ").concat(a," for operator 'clamp'"));return i.MathUtils.clamp(n,r,a)}},pi:{call:function(){return Math.PI}},round:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'round'"));return Math.round(n)}},sin:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'sin'"));return Math.sin(n)}},sqrt:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'sqrt'"));return Math.sqrt(n)}},tan:{call:function(e,t){var n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error("invalid operand '".concat(n,"' for operator 'tan'"));return Math.tan(n)}}};t.MathOperators=a},20120:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MiscOperators=void 0;var i={length:{call:function(e,t){var n=e.evaluate(t.args[0]);if(Array.isArray(n)||"string"===typeof n)return n.length;throw new Error("invalid operand '".concat(n,"' for operator 'length'"))}},coalesce:{call:function(e,t){var n,i=r(t.args);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=e.evaluate(a);if(null!==o)return o}}catch(s){i.e(s)}finally{i.f()}return null}}};t.MiscOperators=i},80354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectOperators=void 0;var r,i=n(18284),a=n(22939),o=Object.prototype.hasOwnProperty;function s(e,t,n){var a,s=e.evaluate(t[0]);if("string"!==typeof s)throw new Error("expected the name of an attribute");var u=e.evaluate(t[1]);if(u&&"object"===typeof u){if(i.Env.isEnv(u)){var l=null!==(a=u.lookup(s))&&void 0!==a?a:null;return n===r.get?l:null!==l}if(o.call(u,s))return n!==r.get||u[s]}return n===r.get&&null}!function(e){e[e.get=0]="get",e[e.has=1]="has"}(r||(r={}));var u={in:{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return("string"===typeof n&&"string"===typeof r||!!Array.isArray(r))&&r.includes(n)}},get:{call:function(e,t){return s(e,t.args,r.get)}},has:{call:function(e,t){return s(e,t.args,r.has)}},"dynamic-properties":{isDynamicOperator:function(){return!0},call:function(e,t){return e.scope===a.ExprScope.Dynamic?e.env:t}}};t.ObjectOperators=u},33668:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.StringOperators=void 0;var i={concat:{call:function(e,t){var n;return(n="").concat.apply(n,r(t.args.map((function(t){return String(e.evaluate(t))}))))}},downcase:{call:function(e,t){return String(e.evaluate(t.args[0])).toLocaleLowerCase()}},upcase:{call:function(e,t){return String(e.evaluate(t.args[0])).toLocaleUpperCase()}},"~=":{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return"string"===typeof n&&"string"===typeof r&&n.includes(r)}},"^=":{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return"string"===typeof n&&"string"===typeof r&&n.startsWith(r)}},"$=":{call:function(e,t){var n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return"string"===typeof n&&"string"===typeof r&&n.endsWith(r)}}};t.StringOperators=i},43433:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeOperators=void 0;t.TypeOperators={typeof:{call:function(e,t){return typeof e.evaluate(t.args[0])}}}},70081:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VectorOperators=void 0;var i=n(34585),a=n(22939);function o(e,t,n){var a;switch(n){case"vector2":a=i.Vector2;break;case"vector3":a=i.Vector3;break;case"vector4":a=i.Vector4}var o,s=r(t.args);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=e.evaluate(u);if(l instanceof a)return l}}catch(c){s.e(c)}finally{s.f()}throw new Error('expected a "'.concat(n,'"'))}function s(e,t,n){var a,o;switch(n){case"vector2":a=i.Vector2,o=2;break;case"vector3":a=i.Vector3,o=3;break;case"vector4":a=i.Vector4,o=4}var s,u=r(t.args);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=e.evaluate(l);if(c instanceof a)return c;if(Array.isArray(c)&&c.length===o&&c.every((function(e){return"number"===typeof e})))return(new a).fromArray(c)}}catch(d){u.e(d)}finally{u.f()}throw new Error('expected a "'.concat(n,'"'))}var u={"make-vector":{call:function(e,t){if(void 0!==t._value)return t._value;if(t.args.length<2)throw new Error("not enough arguments");if(t.args.length>4)throw new Error("too many arguments");var n,r=t.args.map((function(t){return e.evaluate(t)}));switch(r.forEach((function(e,t){if("number"!==typeof e)throw new Error("expected vector component at index ".concat(t,' to have type "number"'))})),r.length){case 2:n=(new i.Vector2).fromArray(r);break;case 3:n=(new i.Vector3).fromArray(r);break;case 4:n=(new i.Vector4).fromArray(r);break;default:throw new Error("too many arguments")}return t.args.every((function(e){return e instanceof a.NumberLiteralExpr}))&&(t._value=n),n}},vector2:{call:function(e,t){return o(e,t,"vector2")}},vector3:{call:function(e,t){return o(e,t,"vector3")}},vector4:{call:function(e,t){return o(e,t,"vector4")}},"to-vector2":{call:function(e,t){return s(e,t,"vector2")}},"to-vector3":{call:function(e,t){return s(e,t,"vector3")}},"to-vector4":{call:function(e,t){return s(e,t,"vector4")}}};t.VectorOperators=u},89064:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},44317:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeLengthGeometrySubdivisionModifier=t.SubdivisionMode=void 0;var s,u=n(31201),l=n(15739),c=n(34585),d=n(70403),h=[new c.Vector3,new c.Vector3];!function(e){e[e.All=0]="All",e[e.NoDiagonals=1]="NoDiagonals"}(s=t.SubdivisionMode||(t.SubdivisionMode={}));var f=function(e){a(n,e);var t=o(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.All,c=arguments.length>3?arguments[3]:void 0;r(this,n),(a=t.call(this)).subdivision=e,a.geoBox=i,a.subdivisionMode=o,a.projection=c,l.assert(c.type===u.ProjectionType.Planar,"EdgeLengthGeometrySubdivisionModifier only supports planar projections");var d=c.projectPoint(i.northEast,h[0]),f=c.projectPoint(i.southWest,h[1]);return a.m_projectedBox={min:{x:Math.min(d.x,f.x),y:Math.min(d.y,f.y),z:Math.min(d.z,f.z)},max:{x:Math.max(d.x,f.x),y:Math.max(d.y,f.y),z:Math.max(d.z,f.z)}},a.m_maxLengthX=(a.m_projectedBox.max.x-a.m_projectedBox.min.x)/e,a.m_maxLengthY=(a.m_projectedBox.max.y-a.m_projectedBox.min.y)/e,a.subdivisionMode===s.All&&(a.m_maxLengthX*=1.1,a.m_maxLengthY*=1.1),a.m_maxLength=Math.sqrt(a.m_maxLengthX*a.m_maxLengthX+a.m_maxLengthY*a.m_maxLengthY),a}return i(n,[{key:"maxLength",get:function(){return this.m_maxLength}},{key:"maxLengthX",get:function(){return this.m_maxLengthX}},{key:"maxLengthY",get:function(){return this.m_maxLengthY}},{key:"shouldSplitTriangle",value:function(e,t,n){var r=this.shouldSplitEdge(e,t),i=this.shouldSplitEdge(t,n),a=this.shouldSplitEdge(n,e);if(r||i||a){var o=e.distanceTo(t),s=t.distanceTo(n),u=n.distanceTo(e),l=Math.max(r?o:0,i?s:0,a?u:0);if(o===l)return 0;if(s===l)return 1;if(u===l)return 2;throw new Error("Could not split triangle.")}}},{key:"shouldSplitEdge",value:function(e,t){switch(this.subdivisionMode){case s.All:return e.y===t.y&&Math.abs(e.x-t.x)>this.m_maxLengthX||e.x===t.x&&Math.abs(e.y-t.y)>this.m_maxLengthY||e.distanceTo(t)>this.m_maxLength;case s.NoDiagonals:return e.y===t.y&&Math.abs(e.x-t.x)>this.m_maxLengthX||e.x===t.x&&Math.abs(e.y-t.y)>this.m_maxLengthY}}}]),n}(d.SubdivisionModifier);t.EdgeLengthGeometrySubdivisionModifier=f},80684:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalGeometrySubdivisionModifier=void 0;var s=n(31201),u=n(34585),l=n(70403),c=[new u.Vector3,new u.Vector3,new u.Vector3],d=function(e){a(n,e);var t=o(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.sphereProjection;return r(this,n),(i=t.call(this)).angle=e,i.projection=a,i}return i(n,[{key:"shouldSplitTriangle",value:function(e,t,n){var r=s.sphereProjection.reprojectPoint(this.projection,e,c[0]),i=s.sphereProjection.reprojectPoint(this.projection,t,c[1]),a=s.sphereProjection.reprojectPoint(this.projection,n,c[2]),o=r.angleTo(i),u=i.angleTo(a),l=a.angleTo(r),d=Math.max(o,Math.max(u,l));if(!(d<this.angle)){if(d===o)return 0;if(d===u)return 1;if(d===l)return 2;throw new Error("failed to split triangle")}}}]),n}(l.SubdivisionModifier);t.SphericalGeometrySubdivisionModifier=d},70403:function(e,t,n){"use strict";var r=n(319).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SubdivisionModifier=void 0;var o=n(34585),s=new o.Vector3,u=new o.Vector3,l=new o.Vector3,c=function(){function e(){i(this,e)}return a(e,[{key:"modify",value:function(e){var t=e.getAttribute("position"),n=Array.from(t.array),i=e.getAttribute("uv"),a=void 0!==i?Array.from(i.array):void 0,o=e.getAttribute("edge"),c=void 0!==o?Array.from(o.array):void 0,d=e.getAttribute("wall"),h=void 0!==d?Array.from(d.array):void 0,f=e.getIndex(),p=Array.from(f.array),m=new Map;function v(e,t){var i="".concat(Math.min(e,t),"_").concat(Math.max(e,t)),o=m.get(i);if(void 0!==o)return o;s.set(n[3*e],n[3*e+1],n[3*e+2]),u.set(n[3*t],n[3*t+1],n[3*t+2]),l.lerpVectors(s,u,.5);var d=n.length/3;return n.push.apply(n,r(l.toArray())),m.set(i,d),void 0!==a&&(s.set(a[2*e],a[2*e+1],0),u.set(a[2*t],a[2*t+1],0),l.lerpVectors(s,u,.5),a.push(l.x,l.y)),void 0!==c&&(c[e]===t?(c.push(t),c[e]=d):c[t]===e?(c.push(e),c[t]=d):c.push(-1)),void 0!==h&&(h[e]===t?(h.push(t),h[e]=d):h[t]===e?(h.push(e),h[t]=d):h.push(-1)),d}for(var g=[];p.length>=3;){var y=p.shift(),x=p.shift(),_=p.shift();switch(s.set(n[3*y],n[3*y+1],n[3*y+2]),u.set(n[3*x],n[3*x+1],n[3*x+2]),l.set(n[3*_],n[3*_+1],n[3*_+2]),this.shouldSplitTriangle(s,u,l)){case 0:var b=v(y,x);p.push(y,b,_,b,x,_);break;case 1:var w=v(x,_);p.push(y,x,w,y,w,_);break;case 2:var S=v(_,y);p.push(y,x,S,S,x,_);break;case void 0:g.push(y,x,_);break;default:throw new Error("failed to subdivide the given geometry")}}return t.array=t.array instanceof Float32Array?new Float32Array(n):new Float64Array(n),t.count=n.length/t.itemSize,t.needsUpdate=!0,e.setIndex(g),void 0!==a&&(i.array=new Float32Array(a),i.count=a.length/i.itemSize,i.needsUpdate=!0),void 0!==c&&(o.array=new Float32Array(c),o.count=c.length/o.itemSize,o.needsUpdate=!0),e}}]),e}();t.SubdivisionModifier=c},31201:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5761),t),i(n(24632),t),i(n(93369),t),i(n(52022),t),i(n(88931),t),i(n(95166),t),i(n(53306),t),i(n(62713),t),i(n(19573),t),i(n(2187),t),i(n(35196),t),i(n(72129),t),i(n(99428),t),i(n(56030),t),i(n(89399),t),i(n(90458),t),i(n(40798),t),i(n(18291),t),i(n(1216),t),i(n(75294),t),i(n(59449),t),i(n(1511),t),i(n(10550),t),i(n(73751),t),i(n(48217),t),i(n(97194),t),i(n(34573),t),i(n(80045),t),i(n(98058),t),i(n(29307),t),i(n(22024),t),i(n(11247),t),i(n(63920),t),i(n(35946),t),i(n(35417),t),i(n(19616),t)},5761:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GeoBox=void 0;var a=n(34585),o=n(52022),s=function(){function e(t,n){r(this,e),this.southWest=t,this.northEast=n,this.west>this.east&&(this.northEast.longitude+=360)}return i(e,[{key:"minAltitude",get:function(){if(void 0!==this.southWest.altitude&&void 0!==this.northEast.altitude)return Math.min(this.southWest.altitude,this.northEast.altitude)}},{key:"maxAltitude",get:function(){if(void 0!==this.southWest.altitude&&void 0!==this.northEast.altitude)return Math.max(this.southWest.altitude,this.northEast.altitude)}},{key:"south",get:function(){return this.southWest.latitude}},{key:"north",get:function(){return this.northEast.latitude}},{key:"west",get:function(){return this.southWest.longitude}},{key:"east",get:function(){return this.northEast.longitude}},{key:"center",get:function(){var e,t=.5*(this.south+this.north),n=this.west,r=this.east,i=this.minAltitude,a=this.altitudeSpan;if(void 0!==i&&void 0!==a&&(e=i+.5*a),n<=r)return new o.GeoCoordinates(t,.5*(n+r),e);var s=.5*(360+r+n);return s>360&&(s-=360),new o.GeoCoordinates(t,s,e)}},{key:"latitudeSpanInRadians",get:function(){return a.MathUtils.degToRad(this.latitudeSpan)}},{key:"longitudeSpanInRadians",get:function(){return a.MathUtils.degToRad(this.longitudeSpan)}},{key:"latitudeSpan",get:function(){return this.north-this.south}},{key:"altitudeSpan",get:function(){if(void 0!==this.maxAltitude&&void 0!==this.minAltitude)return this.maxAltitude-this.minAltitude}},{key:"longitudeSpan",get:function(){var e=this.northEast.longitude-this.southWest.longitude;return e<0&&(e+=360),e}},{key:"latitudeSpanInDegrees",get:function(){return this.latitudeSpan}},{key:"longitudeSpanInDegrees",get:function(){return this.longitudeSpan}},{key:"contains",value:function(e){if(void 0===e.altitude||void 0===this.minAltitude||void 0===this.maxAltitude)return this.containsHelper(e);var t=this.minAltitude===this.maxAltitude,n=this.minAltitude===e.altitude,r=this.minAltitude<=e.altitude&&this.maxAltitude>e.altitude;return!!(t?n:r)&&this.containsHelper(e)}},{key:"clone",value:function(){return new e(this.southWest.clone(),this.northEast.clone())}},{key:"growToContain",value:function(e){this.southWest.latitude=Math.min(this.southWest.latitude,e.latitude),this.southWest.longitude=Math.min(this.southWest.longitude,e.longitude),this.southWest.altitude=void 0!==this.southWest.altitude&&void 0!==e.altitude?Math.min(this.southWest.altitude,e.altitude):void 0!==this.southWest.altitude?this.southWest.altitude:void 0!==e.altitude?e.altitude:void 0,this.northEast.latitude=Math.max(this.northEast.latitude,e.latitude),this.northEast.longitude=Math.max(this.northEast.longitude,e.longitude),this.northEast.altitude=void 0!==this.northEast.altitude&&void 0!==e.altitude?Math.max(this.northEast.altitude,e.altitude):void 0!==this.northEast.altitude?this.northEast.altitude:void 0!==e.altitude?e.altitude:void 0}},{key:"containsHelper",value:function(e){if(e.latitude<this.southWest.latitude||e.latitude>=this.northEast.latitude)return!1;var t=this.west,n=this.east,r=e.longitude;if(n>o.MAX_LONGITUDE)for(;r<t;)r+=360;if(r>n)for(;r>t+360;)r-=360;return r>=t&&r<n}}],[{key:"fromCoordinates",value:function(t,n){return new e(t,n)}},{key:"fromCenterAndExtents",value:function(t,n){return new e(new o.GeoCoordinates(t.latitude-n.latitudeSpan/2,t.longitude-n.longitudeSpan/2),new o.GeoCoordinates(t.latitude+n.latitudeSpan/2,t.longitude+n.longitudeSpan/2))}}]),e}();t.GeoBox=s},24632:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoBoxExtentLike=void 0,t.isGeoBoxExtentLike=function(e){return e&&"object"===typeof e&&"number"===typeof e.latitudeSpan&&"number"===typeof e.longitudeSpan}},44471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoCoordLike=t.geoCoordLikeToGeoPointLike=t.geoCoordLikeToGeoCoordinatesLike=void 0;var r=n(93369),i=n(88931),a=n(62713);t.geoCoordLikeToGeoCoordinatesLike=function(e){return r.isGeoCoordinatesLike(e)?e:a.isLatLngLike(e)?{latitude:e.lat,longitude:e.lng}:{latitude:e[1],longitude:e[0]}},t.geoCoordLikeToGeoPointLike=function(e){return i.isGeoPointLike(e)?e:a.isLatLngLike(e)?[e.lng,e.lat]:[e.longitude,e.latitude]},t.isGeoCoordLike=function(e){return r.isGeoCoordinatesLike(e)||a.isLatLngLike(e)||!i.isGeoPointLike(e)}},52022:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GeoCoordinates=t.MIN_LONGITUDE=t.MAX_LONGITUDE=t.MIN_LATITUDE=t.MAX_LATITUDE=void 0;var a=n(34585),o=n(93369),s=n(88931),u=n(62713);t.MAX_LATITUDE=90,t.MIN_LATITUDE=-90,t.MAX_LONGITUDE=180,t.MIN_LONGITUDE=-180;var l=new a.Vector3,c=new a.Vector3;var d=function(){function e(t,n,i){r(this,e),this.latitude=t,this.longitude=n,this.altitude=i}return i(e,[{key:"latitudeInRadians",get:function(){return a.MathUtils.degToRad(this.latitude)}},{key:"longitudeInRadians",get:function(){return a.MathUtils.degToRad(this.longitude)}},{key:"latitudeInDegrees",get:function(){return this.latitude}},{key:"longitudeInDegrees",get:function(){return this.longitude}},{key:"lat",get:function(){return this.latitude}},{key:"lng",get:function(){return this.longitude}},{key:"isValid",value:function(){return!isNaN(this.latitude)&&!isNaN(this.longitude)}},{key:"normalized",value:function(){var t=this.latitude,n=this.longitude;return isNaN(t)||isNaN(n)?this:((n<-180||n>180)&&(n=function(e,t){var n=e%t;return n<0===t<0?n:n+t}(n+180,360)-180),new e(t=a.MathUtils.clamp(t,-90,90),n,this.altitude))}},{key:"equals",value:function(e){return this.latitude===e.latitude&&this.longitude===e.longitude&&this.altitude===e.altitude}},{key:"copy",value:function(e){return this.latitude=e.latitude,this.longitude=e.longitude,this.altitude=e.altitude,this}},{key:"clone",value:function(){return new e(this.latitude,this.longitude,this.altitude)}},{key:"toLatLng",value:function(){return{lat:this.latitude,lng:this.longitude}}},{key:"toGeoPoint",value:function(){return void 0!==this.altitude?[this.longitude,this.latitude,this.altitude]:[this.longitude,this.latitude]}},{key:"minLongitudeSpanTo",value:function(e){var t=Math.min(this.longitude,e.longitude),n=Math.max(this.longitude,e.longitude);return Math.min(n-t,360+t-n)}}],[{key:"fromDegrees",value:function(t,n,r){return new e(t,n,r)}},{key:"fromRadians",value:function(t,n,r){return new e(a.MathUtils.radToDeg(t),a.MathUtils.radToDeg(n),r)}},{key:"fromLatLng",value:function(t){return new e(t.lat,t.lng)}},{key:"fromGeoPoint",value:function(t){return new e(t[1],t[0],t[2])}},{key:"fromObject",value:function(t){if(s.isGeoPointLike(t))return e.fromGeoPoint(t);if(o.isGeoCoordinatesLike(t))return e.fromDegrees(t.latitude,t.longitude,t.altitude);if(u.isLatLngLike(t))return e.fromDegrees(t.lat,t.lng);throw new Error("Invalid input coordinate format.")}},{key:"lerp",value:function(t,n,r){var i,a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(o){if(t.lng<n.lng){var u=t.clone();return u.longitude+=360,this.lerp(n,u,1-r)}var d=n.clone();return d.longitude+=360,this.lerp(t,d,r)}var h=l.set(t.lat,t.lng,null!==(i=t.altitude)&&void 0!==i?i:0),f=c.set(n.lat,n.lng,null!==(a=n.altitude)&&void 0!==a?a:0);h.lerp(f,r);var p=new e(h.x,h.y,h.z);return s?p.normalized():p}}]),e}();t.GeoCoordinates=d},93369:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoCoordinatesLike=void 0,t.isGeoCoordinatesLike=function(e){return e&&"number"===typeof e.latitude&&"number"===typeof e.longitude&&("number"===typeof e.altitude||"undefined"===typeof e.altitude)}},88931:function(e,t,n){"use strict";var r=n(63038).default;Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoPointLike=void 0,t.isGeoPointLike=function(e){if(Array.isArray(e)){var t=r(e,3),n=t[0],i=t[1],a=t[2];return"number"===typeof n&&"number"===typeof i&&(void 0===a||"number"===typeof a)}return!1}},53306:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GeoPolygon=t.isAntimeridianCrossing=void 0;var a=n(34585),o=n(5761),s=n(52022),u=n(44471);function l(e,t){return Math.max(e,t)-Math.min(e,t)}function c(e,t){return e>0&&t<0&&l(e,t)>180}t.isAntimeridianCrossing=function(e,t){return Math.sign(e)===-Math.sign(t)&&l(e,t)>180};var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,e),this.m_coordinates=t.map((function(e){return u.geoCoordLikeToGeoCoordinatesLike(e)})),n&&this.sortCCW(),i&&this.wrapCoordinatesAround()}return i(e,[{key:"coordinates",get:function(){return this.m_coordinates}},{key:"getGeoBoundingBox",value:function(){var e=this.getCentroid();if(void 0===e)return o.GeoBox.fromCoordinates(this.coordinates[0],this.coordinates[0]);var t=this.getEastAndWest(e),n=t.east,r=t.west,i=this.getNorthAndSouth(),a=i.north,u=i.south;return o.GeoBox.fromCoordinates(new s.GeoCoordinates(u,r),new s.GeoCoordinates(a,n))}},{key:"getCentroid",value:function(){var e=this,t=this.getArea();if(0!==t){var n,r=0,i=0,a=this.m_coordinates.length-1;return this.m_coordinates.forEach((function(t,o){var s=e.m_coordinates[a];n=t.latitude*s.longitude-s.latitude*t.longitude,r+=(t.latitude+s.latitude)*n,i+=(t.longitude+s.longitude)*n,a=o})),n=6*t,new s.GeoCoordinates(r/n,t<0?i/n-180:i/n)}}},{key:"sortCCW",value:function(){var e=this.getPolyAverageCenter();e&&this.m_coordinates.sort((function(t,n){var r=new a.Vector2(t.latitude-e.latitude,t.longitude-e.longitude).normalize();return new a.Vector2(n.latitude-e.latitude,n.longitude-e.longitude).normalize().angle()-r.angle()}))}},{key:"wrapCoordinatesAround",value:function(){var e=this,t=this.m_coordinates.findIndex((function(t,n){var r=0===n?e.m_coordinates.length-1:n-1;return c(e.m_coordinates[r].longitude,t.longitude)}));if(!(t<0))for(var n=!0,r=0;r<this.m_coordinates.length;r++){var i=(t+r)%this.m_coordinates.length,a=this.m_coordinates[i].longitude,o=this.m_coordinates[(i+1)%this.m_coordinates.length].longitude;n&&(this.m_coordinates[i].longitude+=360),c(o,a)?n=!1:c(a,o)&&(n=!0)}}},{key:"getPolyAverageCenter",value:function(){var e=this.m_coordinates.reduce((function(e,t){return new s.GeoCoordinates(e.latitude+t.latitude,e.longitude+t.longitude)}));return new s.GeoCoordinates(e.latitude/this.m_coordinates.length,e.longitude/this.m_coordinates.length)}},{key:"getArea",value:function(){var e=this,t=0,n=this.m_coordinates.length-1;return this.m_coordinates.forEach((function(r,i){var a=e.m_coordinates[n];t+=r.latitude*a.longitude,t-=r.longitude*a.latitude,n=i})),t/=2}},{key:"getEastAndWest",value:function(e){var t=this,n=e.longitude,r=e.longitude,i=this.m_coordinates.length-1;return this.m_coordinates.forEach((function(o,s){var u=t.m_coordinates[i];i=s;var l=new a.Vector2(o.latitude-e.latitude,o.longitude-e.longitude).normalize(),c=new a.Vector2(u.latitude-e.latitude,u.longitude-e.longitude).normalize(),d=1===Math.sign(c.angle()-l.angle());c.y>=0&&l.y<0&&(d=!0);var h=o.longitude;h<e.longitude?d?n=Math.min(n,h):r=Math.min(r,h):d?r=Math.max(r,h):n=Math.max(n,h)})),{east:r,west:n}}},{key:"getNorthAndSouth",value:function(){var e=s.MIN_LATITUDE,t=s.MAX_LATITUDE;return this.m_coordinates.forEach((function(n,r){e=Math.max(e,n.latitude),t=Math.min(t,n.latitude)})),{north:e,south:t}}}]),e}();t.GeoPolygon=d},95166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoPolygonLike=void 0;var r=n(44471);t.isGeoPolygonLike=function(e){if(!e||!Array.isArray(e.coordinates)&&e.coordinates.length>2)return!1;var t=!0;return e.coordinates.forEach((function(n){r.isGeoCoordLike(e)||(t=!1)})),t}},62713:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLatLngLike=void 0,t.isLatLngLike=function(e){return e&&"number"===typeof e.lat&&"number"===typeof e.lng}},11247:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBox3Like=void 0,t.isBox3Like=function(e){var t=e;return void 0!==t.min&&void 0!==t.max}},35946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0;var r=n(34585);!function(e){function t(e){return(e%=360)<0&&(e+=360),e}function n(e,n){var r=(e=t(e))-(n=t(n));return r>180?r-360:r<=-180?r+360:r}e.newEmptyBox3=function(){return{min:{x:1/0,y:1/0,z:1/0},max:{x:-1/0,y:-1/0,z:-1/0}}},e.newVector3=function(e,t,n,r){return void 0===r?{x:e,y:t,z:n}:(r.x=e,r.y=t,r.z=n,r)},e.copyVector3=function(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t},e.degToRad=r.MathUtils.degToRad,e.radToDeg=r.MathUtils.radToDeg,e.clamp=r.MathUtils.clamp,e.normalizeAngleDeg=t,e.normalizeLongitudeDeg=function(e){return(e=t(e))>180&&(e-=360),e},e.angleDistanceDeg=n,e.interpolateAnglesDeg=function(e,t,r){return(e+n(t,e)*r)%360}}(t.MathUtils||(t.MathUtils={}))},19616:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.OrientedBox3=void 0;var o=n(34585);function s(e,t,n,r,i){var a=n.dot(t),o=n.dot(e);if(Math.abs(o)<1e-20)return Math.abs(a)<=r;var s=1/o,u=(a+r)*s,l=(a-r)*s;return u>l?(l>i.min&&(i.min=l),u<i.max&&(i.max=u)):(u>i.min&&(i.min=u),l<i.max&&(i.max=l)),i.min<=i.max&&i.max>=0}var u=new o.Vector3,l={min:-1/0,max:1/0},c=function(){function e(t,n,r){i(this,e),this.position=new o.Vector3,this.xAxis=new o.Vector3(1,0,0),this.yAxis=new o.Vector3(0,1,0),this.zAxis=new o.Vector3(0,0,1),this.extents=new o.Vector3,void 0!==t&&this.position.copy(t),void 0!==n&&n.extractBasis(this.xAxis,this.yAxis,this.zAxis),void 0!==r&&this.extents.copy(r)}return a(e,[{key:"clone",value:function(){var t=new e;return t.copy(this),t}},{key:"copy",value:function(e){this.position.copy(e.position),this.xAxis.copy(e.xAxis),this.yAxis.copy(e.yAxis),this.zAxis.copy(e.zAxis),this.extents.copy(e.extents)}},{key:"getCenter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Vector3;return e.copy(this.position)}},{key:"getSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Vector3;return e.copy(this.extents).multiplyScalar(2)}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Matrix4;return e.makeBasis(this.xAxis,this.yAxis,this.zAxis)}},{key:"intersects",value:function(e){var t,n=Array.isArray(e)?e:e.planes,i=r(n);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=Math.abs(a.normal.dot(this.xAxis)*this.extents.x)+Math.abs(a.normal.dot(this.yAxis)*this.extents.y)+Math.abs(a.normal.dot(this.zAxis)*this.extents.z);if(a.distanceToPoint(this.position)+o<0)return!1}}catch(s){i.e(s)}finally{i.f()}return!0}},{key:"intersectsRay",value:function(e){if(l.min=-1/0,l.max=1/0,u.copy(this.position).sub(e.origin),s(e.direction,u,this.xAxis,this.extents.x,l)&&s(e.direction,u,this.yAxis,this.extents.y,l)&&s(e.direction,u,this.zAxis,this.extents.z,l))return l.min>0?l.min:l.max}},{key:"contains",value:function(e){var t=e.x-this.position.x,n=e.y-this.position.y,r=e.z-this.position.z,i=Math.abs(t*this.xAxis.x+n*this.xAxis.y+r*this.xAxis.z),a=Math.abs(t*this.yAxis.x+n*this.yAxis.y+r*this.yAxis.z),o=Math.abs(t*this.zAxis.x+n*this.zAxis.y+r*this.zAxis.z);return!(i>this.extents.x||a>this.extents.y||o>this.extents.z)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceToPointSquared(e))}},{key:"distanceToPointSquared",value:function(e){var t=new o.Vector3;t.subVectors(e,this.position);for(var n=[t.dot(this.xAxis),t.dot(this.yAxis),t.dot(this.zAxis)],r=0,i=0;i<3;++i){var a=n[i],s=this.extents.getComponent(i);if(a<-s){var u=s+a;r+=u*u}else if(a>s){var l=a-s;r+=l*l}}return r}}]),e}();t.OrientedBox3=c},63920:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOrientedBox3Like=void 0,t.isOrientedBox3Like=function(e){var t=e;return void 0!==t.position&&void 0!==t.xAxis&&void 0!==t.yAxis&&void 0!==t.zAxis&&void 0!==t.extents}},35417:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTransformLike=void 0,t.isTransformLike=function(e){var t=e;return void 0!==t.position&&void 0!==t.xAxis&&void 0!==t.yAxis&&void 0!==t.zAxis}},29307:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVector2Like=void 0,t.isVector2Like=function(e){return e&&"number"===typeof e.x&&"number"===typeof e.y}},22024:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVector3Like=void 0,t.isVector3Like=function(e){return e&&"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.z}},19573:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.EarthConstants=void 0;var a=r((function e(){i(this,e)}));t.EarthConstants=a,a.EQUATORIAL_CIRCUMFERENCE=40075016.68557849,a.EQUATORIAL_RADIUS=6378137,a.MIN_ELEVATION=-433,a.MAX_ELEVATION=8848,a.MAX_BUILDING_HEIGHT=828},2187:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.equirectangularProjection=t.normalizedEquirectangularProjection=void 0;var s=n(34585),u=n(5761),l=n(52022),c=n(11247),d=n(35946),h=n(63920),f=n(19573),p=n(72129),m=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).type=p.ProjectionType.Planar,e}return i(n,[{key:"getScaleFactor",value:function(e){return 1}},{key:"worldExtent",value:function(e,t,n){return n||(n=new s.Box3),n.min.x=0,n.min.y=0,n.min.z=e,n.max.x=this.unitScale,n.max.y=this.unitScale/2,n.max.z=t,n}},{key:"projectPoint",value:function(e,t){var r;return void 0===t&&(t={x:0,y:0,z:0}),t.x=(s.MathUtils.degToRad(e.longitude)+Math.PI)*n.geoToWorldScale*this.unitScale,t.y=(s.MathUtils.degToRad(e.latitude)+.5*Math.PI)*n.geoToWorldScale*this.unitScale,t.z=null!==(r=e.altitude)&&void 0!==r?r:0,t}},{key:"unprojectPoint",value:function(e){return l.GeoCoordinates.fromRadians(e.y*n.worldToGeoScale/this.unitScale-.5*Math.PI,e.x*n.worldToGeoScale/this.unitScale-Math.PI,e.z)}},{key:"unprojectAltitude",value:function(e){return e.z}},{key:"projectBox",value:function(e,t){var r=this.projectPoint(new l.GeoCoordinates(e.center.latitude,e.center.longitude,0)),i=e.latitudeSpanInRadians,a=e.longitudeSpanInRadians,o=e.altitudeSpan,u=a*n.geoToWorldScale,f=i*n.geoToWorldScale;return t||(t=new s.Box3),c.isBox3Like(t)?(t.min.x=r.x-.5*u*this.unitScale,t.min.y=r.y-.5*f*this.unitScale,t.max.x=r.x+.5*u*this.unitScale,t.max.y=r.y+.5*f*this.unitScale,void 0!==o?(t.min.z=r.z-.5*o,t.max.z=r.z+.5*o):(t.min.z=0,t.max.z=0)):h.isOrientedBox3Like(t)&&(d.MathUtils.newVector3(1,0,0,t.xAxis),d.MathUtils.newVector3(0,1,0,t.yAxis),d.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=r.x,t.position.y=r.y,t.position.z=r.z,t.extents.x=.5*u*this.unitScale,t.extents.y=.5*f*this.unitScale,t.extents.z=Math.max(Number.EPSILON,.5*(null!==o&&void 0!==o?o:0))),t}},{key:"unprojectBox",value:function(e){var t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return u.GeoBox.fromCoordinates(t,n)}},{key:"groundDistance",value:function(e){return e.z}},{key:"scalePointToSurface",value:function(e){return e.z=0,e}},{key:"surfaceNormal",value:function(e,t){return void 0===t?t={x:0,y:0,z:1}:(t.x=0,t.y=0,t.z=1),t}}]),n}(p.Projection);m.geoToWorldScale=1/(2*Math.PI),m.worldToGeoScale=2*Math.PI/1,t.normalizedEquirectangularProjection=new m(1),t.equirectangularProjection=new m(f.EarthConstants.EQUATORIAL_CIRCUMFERENCE)},35196:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.identityProjection=void 0;var s=n(34585),u=n(5761),l=n(52022),c=n(11247),d=n(35946),h=n(63920),f=n(72129),p=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).type=f.ProjectionType.Planar,e}return i(n,[{key:"getScaleFactor",value:function(e){return 1}},{key:"worldExtent",value:function(e,t,n){return n||(n=new s.Box3),n.min.x=-Math.PI,n.min.y=.5*-Math.PI,n.min.z=e,n.max.x=Math.PI,n.max.y=.5*Math.PI,n.max.z=t,n}},{key:"projectPoint",value:function(e,t){var n;return t||(t={x:0,y:0,z:0}),t.x=s.MathUtils.degToRad(e.longitude),t.y=s.MathUtils.degToRad(e.latitude),t.z=null!==(n=e.altitude)&&void 0!==n?n:0,t}},{key:"unprojectPoint",value:function(e){return l.GeoCoordinates.fromRadians(e.y,e.x,e.z)}},{key:"unprojectAltitude",value:function(e){return e.z}},{key:"projectBox",value:function(e,t){t||(t=new s.Box3);var n=this.projectPoint(new l.GeoCoordinates(e.south,e.west,e.minAltitude)),r=this.projectPoint(new l.GeoCoordinates(e.north,e.east,e.maxAltitude));return c.isBox3Like(t)?(t.min.x=n.x,t.min.y=n.y,t.min.z=n.z,t.max.x=r.x,t.max.y=r.y,t.max.z=r.z):h.isOrientedBox3Like(t)&&(d.MathUtils.newVector3(1,0,0,t.xAxis),d.MathUtils.newVector3(0,1,0,t.yAxis),d.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=.5*(n.x+r.x),t.position.y=.5*(n.y+r.y),t.position.z=.5*(n.z+r.z),t.extents.x=.5*(r.x-n.x),t.extents.y=.5*(r.y-n.y),t.extents.z=Math.max(Number.EPSILON,.5*(r.z-n.z))),t}},{key:"unprojectBox",value:function(e){var t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return u.GeoBox.fromCoordinates(t,n)}},{key:"groundDistance",value:function(e){return e.z}},{key:"scalePointToSurface",value:function(e){return e.z=0,e}},{key:"surfaceNormal",value:function(e,t){return void 0===t?t={x:0,y:0,z:1}:(t.x=0,t.y=0,t.z=1),t}}]),n}(f.Projection);t.identityProjection=new p(1)},99428:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(16525).default,o=n(29754).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.webMercatorProjection=t.mercatorProjection=t.MercatorConstants=void 0;var l=n(34585),c=n(5761),d=n(52022),h=n(93369),f=n(11247),p=n(35946),m=n(63920),v=n(19573),g=n(72129),y=function(e){s(h,e);var n=u(h);function h(){var e;return r(this,h),(e=n.apply(this,arguments)).type=g.ProjectionType.Planar,e}return i(h,[{key:"getScaleFactor",value:function(e){return Math.cosh(2*Math.PI*(e.y/this.unitScale-.5))}},{key:"worldExtent",value:function(e,t,n){return n||(n=new l.Box3),n.min.x=0,n.min.y=0,n.min.z=e,n.max.x=this.unitScale,n.max.y=this.unitScale,n.max.z=t,n}},{key:"projectPoint",value:function(e,t){var n,r;return r=e instanceof d.GeoCoordinates?e:new d.GeoCoordinates(e.latitude,e.longitude,e.altitude),t||(t={x:0,y:0,z:0}),t.x=(r.longitude+180)/360*this.unitScale,t.y=(.5*h.latitudeClampProject(r.latitudeInRadians)+.5)*this.unitScale,t.z=null!==(n=r.altitude)&&void 0!==n?n:0,t}},{key:"unprojectPoint",value:function(e){return d.GeoCoordinates.fromRadians(h.unprojectLatitude(2*(e.y/this.unitScale-.5)),e.x/this.unitScale*2*Math.PI-Math.PI,e.z)}},{key:"unprojectAltitude",value:function(e){return e.z}},{key:"projectBox",value:function(e,t){var n,r=this.projectPoint(e.center),i=(.5*h.latitudeClampProject(e.northEast.latitudeInRadians)+.5)*this.unitScale,a=(.5*h.latitudeClampProject(e.southWest.latitudeInRadians)+.5)*this.unitScale,o=.5*(i+a);r.y=o;var s=i-a,u=e.longitudeSpan/360*this.unitScale;if(t||(t=new l.Box3),f.isBox3Like(t)){t.min.x=r.x-.5*u,t.min.y=r.y-.5*s,t.max.x=r.x+.5*u,t.max.y=r.y+.5*s;var c=e.altitudeSpan;void 0!==c?(t.min.z=r.z-.5*c,t.max.z=r.z+.5*c):(t.min.z=0,t.max.z=0)}else{if(!m.isOrientedBox3Like(t))throw new Error("invalid bounding box");p.MathUtils.newVector3(1,0,0,t.xAxis),p.MathUtils.newVector3(0,1,0,t.yAxis),p.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=r.x,t.position.y=r.y,t.position.z=r.z,t.extents.x=.5*u,t.extents.y=.5*s,t.extents.z=Math.max(Number.EPSILON,.5*(null!==(n=e.altitudeSpan)&&void 0!==n?n:0))}return t}},{key:"unprojectBox",value:function(e){var t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return c.GeoBox.fromCoordinates(t,n)}},{key:"groundDistance",value:function(e){return e.z}},{key:"scalePointToSurface",value:function(e){return e.z=0,e}},{key:"surfaceNormal",value:function(e,t){return void 0===t?t={x:0,y:0,z:1}:(t.x=0,t.y=0,t.z=1),t}},{key:"reprojectPoint",value:function(e,n,r){return e===this||e!==t.webMercatorProjection&&e!==t.mercatorProjection?a(o(h.prototype),"reprojectPoint",this).call(this,e,n,r):(void 0===r&&(r={}),r.x=n.x,r.y=this.unitScale-n.y,r.z=n.z,r)}}],[{key:"clamp",value:function(e,t,n){return Math.min(Math.max(t,e),n)}},{key:"latitudeClamp",value:function(e){return h.clamp(e,-_.MAXIMUM_LATITUDE,_.MAXIMUM_LATITUDE)}},{key:"latitudeProject",value:function(e){return Math.log(Math.tan(.25*Math.PI+.5*e))/Math.PI}},{key:"latitudeClampProject",value:function(e){return h.latitudeProject(h.latitudeClamp(e))}},{key:"unprojectLatitude",value:function(e){return 2*Math.atan(Math.exp(Math.PI*e))-.5*Math.PI}}]),h}(g.Projection),x=function(e){s(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"projectPoint",value:function(e,t){var n,r;r=e instanceof d.GeoCoordinates?e:new d.GeoCoordinates(e.latitude,e.longitude,e.altitude),t||(t={x:0,y:0,z:0}),t.x=(r.longitude+180)/360*this.unitScale;var i=Math.sin(y.latitudeClamp(r.latitudeInRadians));return t.y=(.5-Math.log((1+i)/(1-i))/(4*Math.PI))*this.unitScale,t.z=null!==(n=r.altitude)&&void 0!==n?n:0,t}},{key:"unprojectPoint",value:function(e){var t=e.x/this.unitScale-.5,n=.5-e.y/this.unitScale,r=360*t,i=90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI;return new d.GeoCoordinates(i,r,e.z)}},{key:"projectBox",value:function(e,t){var r=a(o(n.prototype),"projectBox",this).call(this,e,t);if(f.isBox3Like(r)){var i=r.max.y;r.max.y=this.unitScale-r.min.y,r.min.y=this.unitScale-i}else m.isOrientedBox3Like(r)&&(p.MathUtils.newVector3(1,0,0,r.xAxis),p.MathUtils.newVector3(0,-1,0,r.yAxis),p.MathUtils.newVector3(0,0,-1,r.zAxis),r.position.y=this.unitScale-r.position.y);return r}},{key:"unprojectBox",value:function(e){var t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return new c.GeoBox(new d.GeoCoordinates(n.latitude,t.longitude,t.altitude),new d.GeoCoordinates(t.latitude,n.longitude,n.altitude))}},{key:"surfaceNormal",value:function(e,t){return void 0===t?t={x:0,y:0,z:-1}:(t.x=0,t.y=0,t.z=-1),t}},{key:"localTangentSpace",value:function(e,t){return h.isGeoCoordinatesLike(e)?this.projectPoint(e,t.position):p.MathUtils.copyVector3(e,t.position),p.MathUtils.newVector3(1,0,0,t.xAxis),p.MathUtils.newVector3(0,-1,0,t.yAxis),p.MathUtils.newVector3(0,0,-1,t.zAxis),t}}]),n}(y),_=i((function e(){r(this,e)}));t.MercatorConstants=_,_.MAXIMUM_LATITUDE=1.4844222297453322,t.mercatorProjection=new y(v.EarthConstants.EQUATORIAL_CIRCUMFERENCE),t.webMercatorProjection=new x(v.EarthConstants.EQUATORIAL_CIRCUMFERENCE)},72129:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=t.ProjectionType=void 0;var a=n(93369),o=n(35946);!function(e){e[e.Planar=0]="Planar",e[e.Spherical=1]="Spherical"}(t.ProjectionType||(t.ProjectionType={}));var s=function(){function e(t){r(this,e),this.unitScale=t}return i(e,[{key:"localTangentSpace",value:function(e,t){return a.isGeoCoordinatesLike(e)?this.projectPoint(e,t.position):o.MathUtils.copyVector3(e,t.position),o.MathUtils.newVector3(1,0,0,t.xAxis),o.MathUtils.newVector3(0,1,0,t.yAxis),o.MathUtils.newVector3(0,0,1,t.zAxis),t}},{key:"reprojectPoint",value:function(e,t,n){return e===this?void 0===n?{x:t.x,y:t.y,z:t.z}:(n.x=t.x,n.y=t.y,n.z=t.z,n):this.projectPoint(e.unprojectPoint(t),n)}}]),e}();t.Projection=s},89399:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(16525).default,o=n(29754).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.sphereProjection=void 0;var l=n(34585),c=n(52022),d=n(93369),h=n(11247),f=n(35946),p=n(63920),m=n(19573),v=n(99428),g=n(72129);function y(e,t,n,r){var i=e.x*r.x+t.x*r.y+n.x*r.z,a=e.y*r.x+t.y*r.y+n.y*r.z,o=e.z*r.x+t.z*r.y+n.z*r.z;return r.x=i,r.y=a,r.z=o,r}function x(e){var t=1/Math.PI,n=Math.floor(2*(e*t+1));return l.MathUtils.clamp(n,0,4)}function _(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}function b(e,t,n){for(var r,i=.5*(n+(null!==(r=e.maxAltitude)&&void 0!==r?r:0)),a=l.MathUtils.degToRad(e.west),o=l.MathUtils.degToRad(e.east),s=x(a),u=x(o),c=Math.cos(a),d=c,h=Math.sin(a),f=h,p=s+1;p<=u;p++){var m=(p+1&1)*((2&p)-1);c=Math.min(m,c),d=Math.max(m,d);var v=(1&p)*((2&p)-1);h=Math.min(v,h),f=Math.max(v,f)}var g=Math.cos(o);c=Math.min(g,c),d=Math.max(g,d);var y=Math.sin(o);h=Math.min(y,h);var _=(d+c)*i,b=(d-c)*i,w=((f=Math.max(y,f))+h)*i,S=(f-h)*i,M=l.MathUtils.degToRad(e.south),E=l.MathUtils.degToRad(e.north),T=Math.sin(E),k=Math.sin(M),C=(T+k)*i,A=(T-k)*i;return t.min.x=_-b,t.min.y=w-S,t.min.z=C-A,t.max.x=_+b,t.max.y=w+S,t.max.z=C+A,t}function w(e,t,n){var r,i=n+(null!==(r=e.altitude)&&void 0!==r?r:0),a=l.MathUtils.degToRad(e.latitude),o=l.MathUtils.degToRad(e.longitude),s=Math.cos(a);return t.x=i*s*Math.cos(o),t.y=i*s*Math.sin(o),t.z=i*Math.sin(a),t}var S=function(e){s(n,e);var t=u(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).type=g.ProjectionType.Spherical,e}return i(n,[{key:"worldExtent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new l.Box3,r=this.unitScale+t;return n.min.x=-r,n.min.y=-r,n.min.z=-r,n.max.x=r,n.max.y=r,n.max.z=r,n}},{key:"projectPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.MathUtils.newVector3(0,0,0);return w(e,t,this.unitScale)}},{key:"unprojectPoint",value:function(e){var t=e.x*e.x+e.y*e.y,n=Math.sqrt(t),r=e.z/n;if(isNaN(r))return c.GeoCoordinates.fromRadians(0,0,-this.unitScale);var i=Math.sqrt(t+e.z*e.z);return c.GeoCoordinates.fromRadians(Math.atan(r),Math.atan2(e.y,e.x),i-this.unitScale)}},{key:"unprojectAltitude",value:function(e){var t=e.x*e.x+e.y*e.y+e.z*e.z;return Math.sqrt(t)-m.EarthConstants.EQUATORIAL_RADIUS}},{key:"projectBox",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l.Box3;if(h.isBox3Like(r))return b(e,r,this.unitScale);if(p.isOrientedBox3Like(r)){if(e.longitudeSpan>=90){var i=b(e,new l.Box3,this.unitScale);return f.MathUtils.newVector3(1,0,0,r.xAxis),f.MathUtils.newVector3(0,1,0,r.yAxis),f.MathUtils.newVector3(0,0,1,r.zAxis),r.position.x=.5*(i.max.x+i.min.x),r.position.y=.5*(i.max.y+i.min.y),r.position.z=.5*(i.max.z+i.min.z),r.extents.x=.5*(i.max.x-i.min.x),r.extents.y=.5*(i.max.y-i.min.y),r.extents.z=.5*(i.max.z-i.min.z),r}var a,o,s,u=e.south,c=e.west,d=e.north,m=e.east,v=e.center,g=v.longitude,x=v.latitude,_=Math.cos(l.MathUtils.degToRad(u)),w=Math.sin(l.MathUtils.degToRad(u)),S=Math.cos(l.MathUtils.degToRad(c)),M=Math.sin(l.MathUtils.degToRad(c)),E=Math.cos(l.MathUtils.degToRad(d)),T=Math.sin(l.MathUtils.degToRad(d)),k=Math.cos(l.MathUtils.degToRad(m)),C=Math.sin(l.MathUtils.degToRad(m)),A=Math.cos(l.MathUtils.degToRad(g)),P=Math.sin(l.MathUtils.degToRad(g)),O=Math.cos(l.MathUtils.degToRad(x)),L=Math.sin(l.MathUtils.degToRad(x));f.MathUtils.newVector3(A*O,P*O,L,r.zAxis),f.MathUtils.newVector3(-P,A,0,r.xAxis),f.MathUtils.newVector3(-A*L,-P*L,O,r.yAxis),u>=0?(a=Math.abs(_*(A*(M-C)+P*(k-S))),o=O*w-L*_,s=O*T-L*E*(A*k+P*C)):(d<=0?(a=Math.abs(E*(A*(M-C)+P*(k-S))),s=O*T-L*E):(a=Math.abs(A*(M-C)+P*(k-S)),s=O*T-L*E*(P*C+A*k)),o=O*w-L*_*(A*k+P*C));var R=.5*(this.unitScale+(null!==(t=e.maxAltitude)&&void 0!==t?t:0)),D=.5*(this.unitScale+(null!==(n=e.minAltitude)&&void 0!==n?n:0)),I=O*(A*k+P*C),F=Math.min(E*I+T*L,_*I+w*L);return f.MathUtils.newVector3(a*R,(s-o)*R,R-F*D,r.extents),f.MathUtils.newVector3(0,(o+s)*R,R+R,r.position),y(r.xAxis,r.yAxis,r.zAxis,r.position),r.position.x=r.position.x-r.zAxis.x*r.extents.z,r.position.y=r.position.y-r.zAxis.y*r.extents.z,r.position.z=r.position.z-r.zAxis.z*r.extents.z,r}throw new Error("Invalid bounding box")}},{key:"unprojectBox",value:function(e){throw new Error("Method not implemented.")}},{key:"getScaleFactor",value:function(e){return 1}},{key:"groundDistance",value:function(e){return _(e)-this.unitScale}},{key:"scalePointToSurface",value:function(e){var t=this.unitScale/(_(e)||1);return e.x*=t,e.y*=t,e.z*=t,e}},{key:"surfaceNormal",value:function(e,t){void 0===t&&(t={x:0,y:0,z:0});var n=1/(_(e)||1);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t}},{key:"reprojectPoint",value:function(e,t,r){if(e===v.mercatorProjection||e===v.webMercatorProjection){var i=t.x,s=t.y,u=t.z,l=this.unitScale,c=i/l-Math.PI,d=s/l-Math.PI,h=Math.exp(d),f=h*h,p=2*h/(f+1),m=(f-1)/(f+1),g=l+u;return void 0===r&&(r={}),r.x=Math.cos(c)*p*g,r.y=Math.sin(c)*p*g,r.z=m*g,e===v.webMercatorProjection&&(r.z=-r.z),r}return a(o(n.prototype),"reprojectPoint",this).call(this,e,t,r)}},{key:"localTangentSpace",value:function(e,t){var n;d.isGeoCoordinatesLike(e)?(this.projectPoint(e,t.position),n=e):(f.MathUtils.copyVector3(e,t.position),n=this.unprojectPoint(e));var r=l.MathUtils.degToRad(n.latitude),i=l.MathUtils.degToRad(n.longitude),a=Math.cos(i),o=Math.sin(i),s=Math.cos(r),u=Math.sin(r);return f.MathUtils.newVector3(a*s,o*s,u,t.zAxis),f.MathUtils.newVector3(-o,a,0,t.xAxis),f.MathUtils.newVector3(-a*u,-o*u,s,t.yAxis),t}}]),n}(g.Projection);t.sphereProjection=new S(m.EarthConstants.EQUATORIAL_RADIUS)},56030:function(e,t,n){"use strict";var r=n(43269).default,i=n(319).default,a=n(34575).default,o=n(93913).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.transverseMercatorProjection=t.TransverseMercatorUtils=void 0;var l=n(34585),c=n(5761),d=n(52022),h=n(11247),f=n(35946),p=n(63920),m=n(19573),v=n(72129),g=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).unitScale=e,r.type=v.ProjectionType.Planar,r.m_phi0=0,r.m_lambda0=0,r}return o(n,[{key:"getScaleFactor",value:function(e){return Math.cosh(2*(e.x/this.unitScale-.5)*Math.PI)}},{key:"worldExtent",value:function(e,t,n){return n||(n=new l.Box3),n.min.x=0,n.min.y=0,n.min.z=e,n.max.x=this.unitScale,n.max.y=this.unitScale,n.max.z=t,n}},{key:"projectPoint",value:function(e,t){var r;t||(t={x:0,y:0,z:0});var i=n.clampGeoPoint(e,this.unitScale),a=i.longitude/360+.5,o=1===a?0:Math.floor(a),s=l.MathUtils.degToRad(i.latitude),u=l.MathUtils.degToRad(i.longitude-360*o)-this.m_lambda0,c=Math.cos(s)*Math.sin(u);t.x=Math.atanh(c),t.y=Math.atan2(Math.tan(s),Math.cos(u))-this.m_phi0;var d=.5/Math.PI;return t.x=this.unitScale*(l.MathUtils.clamp(t.x*d+.5,0,1)+o),t.y=this.unitScale*l.MathUtils.clamp(t.y*d+.5,0,1),t.z=null!==(r=e.altitude)&&void 0!==r?r:0,t}},{key:"unprojectPoint",value:function(e){var t=2*Math.PI,n=e.x/this.unitScale,r=e.y/this.unitScale,i=1===n?0:Math.floor(n),a=t*(n-.5-i),o=t*(r-.5),s=e.z||0,u=o+this.m_phi0,l=Math.asin(Math.sin(u)/Math.cosh(a)),c=this.m_lambda0+Math.atan2(Math.sinh(a),Math.cos(u))+i*t;return d.GeoCoordinates.fromRadians(l,c,s)}},{key:"projectBox",value:function(e,t){var n=this,r=e.north,a=e.south,o=e.east,s=e.west,u=[e.center,e.northEast,e.southWest,new d.GeoCoordinates(a,o),new d.GeoCoordinates(r,s)],c=y.POLE_EDGE_DEG,m=s<90&&o>90,v=s<0&&o>0,g=s<c&&o>-c&&r>0&&a<0;s<-90&&o>-90&&(u.push(new d.GeoCoordinates(r,-90)),u.push(new d.GeoCoordinates(a,-90))),m&&(u.push(new d.GeoCoordinates(r,90)),u.push(new d.GeoCoordinates(a,90))),v&&(u.push(new d.GeoCoordinates(r,0)),u.push(new d.GeoCoordinates(a,0))),g&&(u.push(new d.GeoCoordinates(0,s)),u.push(new d.GeoCoordinates(0,o))),y.alignLatitude(u,u[0]);var x=u.map((function(e){return n.projectPoint(e)})),_=x.map((function(e){return e.x})),b=x.map((function(e){return e.y})),w=x.map((function(e){return e.z})),S=Math.min.apply(Math,i(_)),M=Math.min.apply(Math,i(b)),E=Math.min.apply(Math,i(w)),T=Math.max.apply(Math,i(_)),k=Math.max.apply(Math,i(b)),C=Math.max.apply(Math,i(w));if(t||(t=new l.Box3),h.isBox3Like(t))t.min.x=S,t.min.y=M,t.min.z=E,t.max.x=T,t.max.y=k,t.max.z=C;else{if(!p.isOrientedBox3Like(t))throw new Error("invalid bounding box");f.MathUtils.newVector3(1,0,0,t.xAxis),f.MathUtils.newVector3(0,1,0,t.yAxis),f.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=(S+T)/2,t.position.y=(M+k)/2,t.position.z=(E+C)/2,t.extents.x=(T-S)/2,t.extents.y=(k-M)/2,t.extents.z=(C-E)/2}return t}},{key:"unprojectBox",value:function(e){var t=this,n=this.unitScale,r=e.min,a=e.max,o=[{x:(r.x+a.x)/2,y:(r.y+a.y)/2,z:0},r,a,{x:r.x,y:a.y,z:0},{x:a.x,y:r.y,z:0}],s=.5*n,u=.25*n,l=.75*n,h=r.x<s&&a.x>s,f=r.y<s&&a.y>s,p=r.y<u&&a.y>u,m=r.y<l&&a.y>l;f&&(o.push({x:r.x,y:s,z:0}),o.push({x:a.x,y:s,z:0}),h&&o.push({x:s,y:s,z:0})),p&&(o.push({x:r.x,y:u,z:0}),o.push({x:a.x,y:u,z:0}),h&&o.push({x:s,y:u,z:0})),m&&(o.push({x:r.x,y:l,z:0}),o.push({x:a.x,y:l,z:0}),h&&o.push({x:s,y:l,z:0}));var v=o.map((function(e){return t.unprojectPoint(e)}));y.alignLongitude(v,v[0]);var g=v.map((function(e){return e.latitude})),x=v.filter((function(e){return Math.abs(e.latitude)<90})).map((function(e){return e.longitude})),_=v.map((function(e){var t;return null!==(t=e.altitude)&&void 0!==t?t:0})),b=new d.GeoCoordinates(Math.min.apply(Math,i(g)),Math.min.apply(Math,i(x)),Math.min.apply(Math,i(_))),w=new d.GeoCoordinates(Math.max.apply(Math,i(g)),Math.max.apply(Math,i(x)),Math.max.apply(Math,i(_)));return c.GeoBox.fromCoordinates(b,w)}},{key:"unprojectAltitude",value:function(e){return e.z}},{key:"groundDistance",value:function(e){return e.z}},{key:"scalePointToSurface",value:function(e){return e.z=0,e}},{key:"surfaceNormal",value:function(e,t){return void 0===t?t={x:0,y:0,z:-1}:(t.x=0,t.y=0,t.z=-1),t}}],[{key:"clampGeoPoint",value:function(e,t){var n=e.latitude,r=e.longitude,i=y.POLE_RADIUS,a=y.POLE_RADIUS_SQ,o=Math.round(r/90),s=90*o-r;if(o%2===0||Math.abs(s)>i)return e;var u=n-0,l=s*s+u*u;if(l<a){var c=Math.sqrt(l),h=(i-c)/c,f=0===s&&0===u?1*i:s;return new d.GeoCoordinates(n+u*h,r+f*h)}return e}}]),n}(v.Projection),y=function(){function e(){a(this,e)}return o(e,null,[{key:"alignLatitude",value:function(e,t){var n,i=r(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;0===a.latitude&&(a.latitude=1e-9*t.latitude)}}catch(o){i.e(o)}finally{i.f()}}},{key:"alignLongitude",value:function(e,t){var n,i=t.longitude<0?180:-180,a=t.longitude<0?-180:180,o=r(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.longitude===i&&(s.longitude=a)}}catch(u){o.e(u)}finally{o.f()}}}]),e}();t.TransverseMercatorUtils=y,y.POLE_EDGE=1.4844222297453322,y.POLE_EDGE_DEG=l.MathUtils.radToDeg(y.POLE_EDGE),y.POLE_RADIUS=90-y.POLE_EDGE_DEG,y.POLE_RADIUS_SQ=Math.pow(y.POLE_RADIUS,2),t.transverseMercatorProjection=new g(m.EarthConstants.EQUATORIAL_CIRCUMFERENCE)},90458:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FlatTileBoundingBoxGenerator=void 0;var a=n(34585),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,e),this.tilingScheme=t,this.minElevation=n,this.maxElevation=i,this.m_tilingScheme=t,this.m_worldBox=t.projection.worldExtent(n,i);var a=this.m_worldBox,o=a.min,s=a.max;this.m_worldDimensions={x:s.x-o.x,y:s.y-o.y,z:s.z-o.z}}return i(e,[{key:"projection",get:function(){return this.m_tilingScheme.projection}},{key:"subdivisionScheme",get:function(){return this.m_tilingScheme.subdivisionScheme}},{key:"getWorldBox",value:function(e,t){var n=e.level,r=this.subdivisionScheme.getLevelDimensionX(n),i=this.subdivisionScheme.getLevelDimensionY(n),o=this.m_worldDimensions.x/r,s=this.m_worldDimensions.y/i,u=this.m_worldBox.min.x+o*e.column,l=this.m_worldBox.min.y+s*e.row;return t||(t=new a.Box3),t.min.x=u,t.min.y=l,t.min.z=this.m_worldBox.min.z,t.max.x=u+o,t.max.y=l+s,t.max.z=this.m_worldBox.max.z,t}},{key:"getGeoBox",value:function(e){var t=this.getWorldBox(e);return this.projection.unprojectBox(t)}}]),e}();t.FlatTileBoundingBoxGenerator=o},40798:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.halfQuadTreeSubdivisionScheme=void 0;var a=function(){function e(){r(this,e)}return i(e,[{key:"getSubdivisionX",value:function(){return 2}},{key:"getSubdivisionY",value:function(e){return 0===e?1:2}},{key:"getLevelDimensionX",value:function(e){return 1<<e}},{key:"getLevelDimensionY",value:function(e){return 0!==e?1<<e-1:1}}]),e}();t.halfQuadTreeSubdivisionScheme=new a},97194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hereTilingScheme=void 0;var r=n(2187),i=n(40798),a=n(48217);t.hereTilingScheme=new a.TilingScheme(i.halfQuadTreeSubdivisionScheme,r.normalizedEquirectangularProjection)},80045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mercatorTilingScheme=void 0;var r=n(99428),i=n(18291),a=n(48217);t.mercatorTilingScheme=new a.TilingScheme(i.quadTreeSubdivisionScheme,r.mercatorProjection)},98058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polarTilingScheme=void 0;var r=n(56030),i=n(18291),a=n(48217);t.polarTilingScheme=new a.TilingScheme(i.quadTreeSubdivisionScheme,r.transverseMercatorProjection)},1216:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTree=void 0;var o=n(1511),s=function(){function e(t){i(this,e),this.tilingScheme=t}return a(e,[{key:"visit",value:function(e){this.visitTileKey(o.TileKey.fromRowColumnLevel(0,0,0),e)}},{key:"visitTileKey",value:function(e,t){if(t(e,this.tilingScheme.getGeoBox(e))){var n,i=r(this.tilingScheme.getSubTileKeys(e));try{for(i.s();!(n=i.n()).done;){var a=n.value;this.visitTileKey(a,t)}}catch(o){i.e(o)}finally{i.f()}}}}]),e}();t.QuadTree=s},18291:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.quadTreeSubdivisionScheme=void 0;var a=function(){function e(){r(this,e)}return i(e,[{key:"getSubdivisionX",value:function(){return 2}},{key:"getSubdivisionY",value:function(){return 2}},{key:"getLevelDimensionX",value:function(e){return 1<<e}},{key:"getLevelDimensionY",value:function(e){return 1<<e}}]),e}();t.quadTreeSubdivisionScheme=new a},75294:function(e,t,n){"use strict";var r=n(87757),i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SubTiles=void 0;var o=n(1511),s=function(e){function t(e,n,r){i(this,t),this.tileKey=e,this.sizeX=n,this.sizeY=r}return a(t,[{key:e,value:function(){return 2===this.sizeX&&2===this.sizeY?t.ZCurveIterator(this.tileKey):t.RowColumnIterator(this.tileKey,this.sizeX,this.sizeY)}}]),t}(Symbol.iterator);t.SubTiles=s,function(e){var t=r.mark(i),n=r.mark(a);function i(e,n,i){var a,s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<i)){t.next=12;break}s=0;case 3:if(!(s<n)){t.next=9;break}return t.next=6,o.TileKey.fromRowColumnLevel(e.row*i+a,e.column*n+s,e.level+1);case 6:s++,t.next=3;break;case 9:a++,t.next=1;break;case 12:case"end":return t.stop()}}),t)}function a(e){var t;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=0;case 1:if(!(t<4)){n.next=7;break}return n.next=4,o.TileKey.fromRowColumnLevel(e.row<<1|t>>1,e.column<<1|1&t,e.level+1);case 4:t++,n.next=1;break;case 7:case"end":return n.stop()}}),n)}e.RowColumnIterator=i,e.ZCurveIterator=a}(s=t.SubTiles||(t.SubTiles={}))},59449:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1511:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileKey=void 0;var a=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648,4294967296,8589934592,17179869184,34359738368,68719476736,137438953472,274877906944,549755813888,1099511627776,2199023255552,4398046511104,8796093022208,17592186044416,35184372088832,70368744177664,0x800000000000,281474976710656,562949953421312,0x4000000000000,0x8000000000000,4503599627370496],o=function(){function e(t,n,i){r(this,e),this.row=t,this.column=n,this.level=i}return i(e,[{key:"parent",value:function(){if(0===this.level)throw new Error("Cannot get the parent of the root tile key");return e.fromRowColumnLevel(this.row>>>1,this.column>>>1,this.level-1)}},{key:"changedLevelBy",value:function(t){var n=Math.max(0,this.level+t),r=this.row,i=this.column;return t>=0?(r<<=t,i<<=t):(r>>>=-t,i>>>=-t),e.fromRowColumnLevel(r,i,n)}},{key:"changedLevelTo",value:function(e){return this.changedLevelBy(e-this.level)}},{key:"mortonCode",value:function(){if(void 0===this.m_mortonCode){for(var e=this.column,t=this.row,n=a[this.level<<1],r=0;r<this.level;++r)1&e&&(n+=a[2*r]),1&t&&(n+=a[2*r+1]),e>>>=1,t>>>=1;this.m_mortonCode=n}return this.m_mortonCode}},{key:"toHereTile",value:function(){return void 0===this.m_hereTile&&(this.m_hereTile=this.mortonCode().toString()),this.m_hereTile}},{key:"toQuadKey",value:function(){for(var e="",t=this.level;t>0;--t){var n=1<<t-1,r=0!==(this.column&n),i=0!==(this.row&n);e+=r&&i?"3":i?"2":r?"1":"0"}return e}},{key:"equals",value:function(e){return this.row===e.row&&this.column===e.column&&this.level===e.level}},{key:"addedSubKey",value:function(t){var n=e.fromQuadKey(0===t.length?"-":t),r=this.changedLevelBy(n.level);return e.fromRowColumnLevel(r.row+n.row,r.column+n.column,r.level)}},{key:"addedSubHereTile",value:function(t){var n=e.fromHereTile(t),r=this.changedLevelBy(n.level);return e.fromRowColumnLevel(r.row+n.row,r.column+n.column,r.level)}},{key:"getSubHereTile",value:function(e){var t=1<<2*e;return(this.mortonCode()&t-1|t).toString()}},{key:"rowCount",value:function(){return e.rowsAtLevel(this.level)}},{key:"columnCount",value:function(){return e.columnsAtLevel(this.level)}}],[{key:"fromRowColumnLevel",value:function(t,n,r){return new e(t,n,r)}},{key:"fromQuadKey",value:function(t){for(var n=t.length,r=0,i=0,a=0;a<t.length;++a){var o=1<<a,s=parseInt(t.charAt(n-a-1),10);1&s&&(i|=o),2&s&&(r|=o)}return e.fromRowColumnLevel(r,i,n)}},{key:"fromMortonCode",value:function(t){for(var n=0,r=0,i=0,a=t;a>1;){var o=1<<n;1&a&&(i|=o),2&a&&(r|=o),n++,a=(a-(3&a))/4}var s=e.fromRowColumnLevel(r,i,n);return s.m_mortonCode=t,s}},{key:"fromHereTile",value:function(t){var n=e.fromMortonCode(parseInt(t,10));return n.m_hereTile=t,n}},{key:"columnsAtLevel",value:function(e){return Math.pow(2,e)}},{key:"rowsAtLevel",value:function(e){return Math.pow(2,e)}},{key:"atCoords",value:function(t,n,r,i,a){return e.fromRowColumnLevel(Math.floor(r/(a/e.rowsAtLevel(t))),Math.floor(n/(i/e.columnsAtLevel(t))),t)}},{key:"parentMortonCode",value:function(e){return Math.floor(e/4)}}]),e}();t.TileKey=o},10550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileKeyUtils=t.powerOfTwo=void 0;var r=n(52022),i=n(1511);t.powerOfTwo=function(){var e=.5;return new Array(53).fill(0).map((function(){return e*=2}))}(),function(e){function n(e,t,n){var r=e.projection,a=e.subdivisionScheme,o=a.getLevelDimensionX(n),s=a.getLevelDimensionY(n),u=r.worldExtent(0,0),l=u.min,c=u.max,d=c.x-l.x,h=c.y-l.y;if(t.x<l.x||t.x>c.x)return null;if(t.y<l.y||t.y>c.y)return null;var f=Math.min(o-1,Math.floor(o*(t.x-l.x)/d)),p=Math.min(s-1,Math.floor(s*(t.y-l.y)/h));return i.TileKey.fromRowColumnLevel(p,f,n)}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=s(t,n);return e.mortonCode()+r}function o(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=0,i=e,a=0;a<n;a++){var o=t.powerOfTwo[52-a];i>=o&&(i-=o,r+=t.powerOfTwo[n-1-a])}return{offset:r-=t.powerOfTwo[n-1],mortonCode:i}}function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=0,i=t.powerOfTwo[n];for(e+=i/2;e<0;)e+=i;for(;e>=i;)e-=i;for(var a=0;a<n&&e>0;a++)1&e&&(r+=t.powerOfTwo[53-n+a]),e>>>=1;return r}e.geoCoordinatesToTileKey=function(e,t,r){return n(e,e.projection.projectPoint(t),r)},e.worldCoordinatesToTileKey=n,e.geoRectangleToTileKeys=function(t,n,a){var o=function(e,t,n){return e<t?n-(t-e)%(n-t):t+(e-t)%(n-t)},s=function(e,t,n){return Math.min(Math.max(e,t),n)},u=o(n.southWest.longitudeInRadians,-Math.PI,Math.PI),l=s(n.southWest.latitudeInRadians,-.5*Math.PI,.5*Math.PI),c=o(n.northEast.longitudeInRadians,-Math.PI,Math.PI),d=s(n.northEast.latitudeInRadians,-.5*Math.PI,.5*Math.PI),h=e.geoCoordinatesToTileKey(t,r.GeoCoordinates.fromRadians(l,u),a),f=e.geoCoordinatesToTileKey(t,r.GeoCoordinates.fromRadians(d,c),a),p=t.subdivisionScheme.getLevelDimensionX(a);if(!h||!f)throw new Error("Invalid coordinates");var m=h.column,v=f.column;u>c&&(v+=v!==m?p:p-1);for(var g=Math.min(h.row,f.row),y=Math.max(h.row,f.row),x=new Array,_=g;_<=y;++_)for(var b=m;b<=v;++b)x.push(i.TileKey.fromRowColumnLevel(_,b%p,a));return x},e.getKeyForTileKeyAndOffset=a,e.extractOffsetAndMortonKeyFromKey=o,e.getParentKeyFromKey=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=o(e,t),r=n.offset,s=n.mortonCode,u=i.TileKey.fromMortonCode(i.TileKey.parentMortonCode(s));return a(u,r,t)}}(t.TileKeyUtils||(t.TileKeyUtils={}))},73751:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileTreeTraverse=void 0;var a=n(75294),o=function(){function e(t){r(this,e),this.m_subdivisionScheme=t}return i(e,[{key:"subTiles",value:function(e){var t=this.m_subdivisionScheme.getSubdivisionX(e.level),n=this.m_subdivisionScheme.getSubdivisionY(e.level);return new a.SubTiles(e,t,n)}}]),e}();t.TileTreeTraverse=o},48217:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TilingScheme=void 0;var a=n(90458),o=n(10550),s=n(73751),u=function(){function e(t,n){r(this,e),this.subdivisionScheme=t,this.projection=n,this.boundingBoxGenerator=new a.FlatTileBoundingBoxGenerator(this),this.tileTreeTraverse=new s.TileTreeTraverse(t)}return i(e,[{key:"getSubTileKeys",value:function(e){return this.tileTreeTraverse.subTiles(e)}},{key:"getTileKey",value:function(e,t){return o.TileKeyUtils.geoCoordinatesToTileKey(this,e,t)}},{key:"getTileKeys",value:function(e,t){return o.TileKeyUtils.geoRectangleToTileKeys(this,e,t)}},{key:"getGeoBox",value:function(e){return this.boundingBoxGenerator.getGeoBox(e)}},{key:"getWorldBox",value:function(e,t){return this.boundingBoxGenerator.getWorldBox(e,t)}}]),e}();t.TilingScheme=u},34573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webMercatorTilingScheme=void 0;var r=n(99428),i=n(18291),a=n(48217);t.webMercatorTilingScheme=new a.TilingScheme(i.quadTreeSubdivisionScheme,r.webMercatorProjection)},63266:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(74699),t),i(n(87776),t),i(n(56216),t),i(n(76800),t)},56216:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(16525).default,o=n(29754).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.HighPrecisionLine=t.HighPrecisionWireFrameLine=void 0;var l=n(34585),c=n(76800),d=function(e){s(n,e);var t=u(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e,i)).matrixWorldInverse=new l.Matrix4,a&&o.setPositions(a),o}return i(n,[{key:"bufferGeometry",get:function(){return this.geometry}},{key:"shaderMaterial",get:function(){return this.material}},{key:"setPositions",value:function(e){c.HighPrecisionUtils.setPositions(this,e)}},{key:"setupForRendering",value:function(){var e=this;this.onBeforeRender=function(t,n,r,i,a,o){c.HighPrecisionUtils.updateHpUniforms(e,r,e.shaderMaterial)}}},{key:"updateMatrixWorld",value:function(e){var t=this.matrixWorldNeedsUpdate||e;a(o(n.prototype),"updateMatrixWorld",this).call(this,e),t&&this.matrixWorldInverse.copy(this.matrixWorld).invert()}}]),n}(l.Line);t.HighPrecisionWireFrameLine=d;var h=function(e){s(n,e);var t=u(n);function n(e,i,a){var o;return r(this,n),(o=t.call(this,e,i)).matrixWorldInverse=new l.Matrix4,a&&o.setPositions(a),o}return i(n,[{key:"bufferGeometry",get:function(){return this.geometry}},{key:"shaderMaterial",get:function(){return this.material}},{key:"setPositions",value:function(e){c.HighPrecisionUtils.setPositions(this,e)}},{key:"setupForRendering",value:function(){var e=this;this.onBeforeRender=function(t,n,r,i,a,o){c.HighPrecisionUtils.updateHpUniforms(e,r,e.shaderMaterial)}}},{key:"updateMatrixWorld",value:function(e){var t=this.matrixWorldNeedsUpdate||e;a(o(n.prototype),"updateMatrixWorld",this).call(this,e),t&&this.matrixWorldInverse.copy(this.matrixWorld).invert()}}]),n}(l.Mesh);t.HighPrecisionLine=h},32451:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(16525).default,o=n(29754).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.HighPrecisionPoints=void 0;var l=n(85164),c=n(34585),d=n(76800),h=function(e){s(n,e);var t=u(n);function n(e,i,a,o,s){var u;return r(this,n),void 0===i&&(i=new l.HighPrecisionPointMaterial({color:o||l.HighPrecisionPointMaterial.DEFAULT_COLOR,opacity:void 0!==s?s:1})),(u=t.call(this,void 0===e?new c.BufferGeometry:e,i)).matrixWorldInverse=new c.Matrix4,a&&u.setPositions(a),u}return i(n,[{key:"bufferGeometry",get:function(){return this.geometry}},{key:"clearGeometry",value:function(){return this.geometry=new c.BufferGeometry}},{key:"shaderMaterial",get:function(){return this.material}},{key:"setPositions",value:function(e){d.HighPrecisionUtils.setPositions(this,e)}},{key:"setupForRendering",value:function(){var e=this;this.material.isHighPrecisionPointsMaterial&&void 0!==this.dimensionality&&this.material.setDimensionality(this.dimensionality),this.onBeforeRender=function(t,n,r,i,a,o){d.HighPrecisionUtils.updateHpUniforms(e,r,e.shaderMaterial)}}},{key:"updateMatrixWorld",value:function(e){var t=this.matrixWorldNeedsUpdate||e;a(o(n.prototype),"updateMatrixWorld",this).call(this,e),t&&this.matrixWorldInverse.copy(this.matrixWorld).invert()}}]),n}(c.Points);t.HighPrecisionPoints=h},76800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighPrecisionUtils=void 0;var r=n(85164),i=n(34585),a=n(56216),o=n(32451),s=n(87776);!function(e){function t(e){return new i.Vector3(Math.fround(e.x),Math.fround(e.y),Math.fround(e.z))}function n(e,n){var r=(new i.Matrix4).copy(e.projectionMatrix).multiply(e.matrixWorldInverse),a=new i.Vector3(0,0,0).applyMatrix4(n),o=t(a);return{viewProjection:r,eyePosHi:o,eyePosLo:t(a.sub(o))}}function u(e){if(e.length>0){var t=e[0];if(void 0===t||null===t)throw Error("Empty element in positions");var n=new Array,r=new Array,a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var a=0,o=t;a<o.length;a++){var s=o[a],u=Math.fround(s);r.push(s-u),n.push(u)}};if(void 0!==t.z)e.forEach((function(e){!function(e){a(e.x,e.y,e.z)}(e)}));else{if(n.length%3!==0)throw Error("Positions must be 3D, not 2D");e.forEach((function(e){a(e)}))}return{positionHigh:new i.Float32BufferAttribute(n,3),positionLow:new i.Float32BufferAttribute(r,3)}}return{positionHigh:new i.Float32BufferAttribute([],3),positionLow:new i.Float32BufferAttribute([],3)}}function l(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new Array,i=e.length,a=0;a<i;a+=t){for(var o=0;o<n;o++)r.push(e[a+o]);var s=e[a+n],u=e[a+n+1],l=e[a+n+2],c=Math.fround(s),d=s-c,h=Math.fround(u),f=u-h,p=Math.fround(l),m=l-p;r.push(c,h,p,d,f,m);for(var v=n+3;v<t;v++)r.push(e[a+v])}return r}function c(e,t){var n=u(t);return e.bufferGeometry.setAttribute("position",n.positionHigh),e.bufferGeometry.setAttribute("positionLow",n.positionLow),n.positionHigh.itemSize}e.doubleToFloatVec=t,e.makeFloatVec=function(e){var t=Math.fround(e.x),n=Math.fround(e.y),r=Math.fround(e.z),a=new i.Vector3(e.x-t,e.y-n,e.z-r);return e.x=Math.fround(t),e.y=Math.fround(n),e.z=Math.fround(r),a},e.createHighPrecisionCameraPos=n,e.updateHpUniforms=function(e,t,r){var i=n(t,e.matrixWorldInverse),a=i.viewProjection;if(void 0===r||!r.isMaterial)throw Error("High pecision line has no high precision material");if(!(r.uniforms&&r.uniforms.u_mvp&&r.uniforms.u_eyepos&&r.uniforms.u_eyepos_lowpart))throw Error("High pecision material has missing uniforms");r.uniforms.u_mvp.value=new Float32Array(a.elements),r.uniforms.u_eyepos.value=new Float32Array(i.eyePosHi.toArray()),r.uniforms.u_eyepos_lowpart.value=new Float32Array(i.eyePosLo.toArray())},e.createAttributes=u,e.addInterleavedAttributes3=l,e.setPositions=c,e.convertPositions=function(e){if(e.length<=0)return{positions:[]};var t=e[0];if(void 0===t||null===t)throw Error("Empty element in positions");var n=t;if(void 0===n.y&&void 0===n.z)return{positions:e};var r=new Array;return e.forEach((function(e){r.push(e.x,e.y,e.z)})),{positions:r}},e.createLine=function(e,t){var n=void 0!==t.lineWidth?t.lineWidth:5,o=void 0!==t.addCircles&&t.addCircles,u=void 0!==t.wireFrame&&t.wireFrame,c=[],d=[];s.triangulateLine(e,n,c,d,o);var h=new i.BufferGeometry,f=l(c,3),p=new i.InterleavedBuffer(new Float32Array(f),6),m=new i.InterleavedBufferAttribute(p,3,0,!1),v=new i.InterleavedBufferAttribute(p,3,3,!1);h.setAttribute("position",m),h.setAttribute("positionLow",v),h.setIndex(new i.BufferAttribute(new Uint32Array(d),1));var g=new r.HighPrecisionLineMaterial(t),y=u?new a.HighPrecisionWireFrameLine(h,g):new a.HighPrecisionLine(h,g);return y.setupForRendering(),y},e.createPoints=function(e,t){for(var n=[],a=0;a<e.length;a++)n.push(n.length/3);var s=new i.BufferGeometry,u=r.isHighPrecisionPointMaterial(t)?t:new r.HighPrecisionPointMaterial(t),l=new o.HighPrecisionPoints(s,u);return c(l,e),l.setupForRendering(),l}}(t.HighPrecisionUtils||(t.HighPrecisionUtils={}))},74699:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default,a=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LineGroup=t.createSimpleLineGeometry=t.createLineGeometry=t.LineGeometry=void 0;var o=n(15739),s=n(34585),u=new s.Vector3,l=new s.Vector3,c=new s.Vector3,d=new s.Vector3,h=new s.Vector3,f=.1,p={attributes:[{name:"extrusionCoord",itemSize:3,offset:0},{name:"position",itemSize:3,offset:3},{name:"tangent",itemSize:3,offset:6},{name:"bitangent",itemSize:4,offset:9}],stride:13},m={attributes:[{name:"uv",itemSize:2,offset:p.stride},{name:"normal",itemSize:3,offset:p.stride+2}],stride:5},v={attributes:[].concat(a(p.attributes),a(m.attributes)),stride:p.stride+m.stride},g={attributes:[{name:"extrusionCoord",itemSize:2,offset:0},{name:"position",itemSize:3,offset:2},{name:"positionLow",itemSize:3,offset:5},{name:"tangent",itemSize:3,offset:8},{name:"bitangent",itemSize:4,offset:11}],stride:15},y={attributes:[].concat(a(g.attributes),a(m.attributes)),stride:g.stride+m.stride},x=r((function e(){i(this,e),this.vertices=[],this.vertexColors=[],this.indices=[]}));function _(e,t){return t?e?y:g:e?v:p}function b(e,t,n,r,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new x,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(0===t.length)return s;var p=_(void 0!==i,u).stride,m=t.length/3,v=new Array(m),g=new Array(t.length-3),y=s.vertices.length/p,b=void 0!==r&&r.length>0,w=void 0!==i&&i.length>0,S=void 0!==a&&a.length&&t.length;o.assert(!b||r.length===m),o.assert(!w||i.length/2===m),o.assert(!S||a.length===t.length);var E=f;v[0]=E;for(var T=0;T<m-1;++T){for(var k=0,C=0;C<3;++C){var A=t[3*(T+1)+C]-t[3*T+C];g[3*T+C]=A,k+=A*A}var P=Math.sqrt(k);E+=P,v[T+1]=E}var O=b?Math.abs(r[r.length-1]-r[0]):1,L=v[v.length-1]/O;if(b)for(var R=0;R<m;++R)v[R]=r[R]*L+f;for(var D=!0,I=0;I<3;++I)D=D&&t[I]===t[t.length-3+I];for(var F=[],N=function(r,o,f,p,m){var v;F.length=0,s.vertices.push(p,-1*m,L),F.push(p,1*m,L);for(var y=0;y<3;++y){if(u){var x=Math.fround(t[3*r+y]),_=t[3*r+y]-x;s.vertices.push(x,_),F.push(x,_)}else s.vertices.push(t[3*r+y]),F.push(t[3*r+y]);l.setComponent(y,t[3*r+y])}for(var b=0;b<3;++b)c.setComponent(b,g[o+b]),d.setComponent(b,g[f+b]);c.normalize(),s.vertices.push(c.x,c.y,c.z),F.push(c.x,c.y,c.z),l.add(e),n.surfaceNormal(l,l);var E=M(l,c,d.normalize(),h);s.vertices.push(h.x,h.y,h.z,E),F.push(h.x,h.y,h.z,E),w&&(s.vertices.push(i[2*r],i[2*r+1]),F.push(i[2*r],i[2*r+1]),s.vertices.push(l.x,l.y,l.z),F.push(l.x,l.y,l.z)),(v=s.vertices).push.apply(v,F),S&&(s.vertexColors.push(a[3*r],a[3*r+1],a[3*r+2]),s.vertexColors.push(a[3*r],a[3*r+1],a[3*r+2]))},j=0;j<m;++j){var z=D&&0===j?g.length-3:3*Math.max(0,j-1),U=D&&j===m-1?0:Math.min(3*j,g.length-3);j>0&&N(j,z,U,v[j-1],v[j]),j+1<m&&N(j,z,U,-1*v[Math.min(j,v.length-1)],v[Math.min(j+1,v.length-1)])}for(var B=0;B<m-1;++B){var V=y+4*B;s.indices.push(V,V+1,V+2,V+2,V+1,V+3)}return s}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new x;if(0===e.length)return n;for(var r=e.length/3,i=n.vertices.length/3,a=void 0!==t&&t.length&&e.length,o=0;o<r;++o,i++){o>0&&n.indices.push(i),o<r-1&&n.indices.push(i);for(var s=0;s<3;++s)n.vertices.push(e[3*o+s]),a&&n.vertexColors.push(t[3*o+s])}return n}t.LineGeometry=x,t.createLineGeometry=b,t.createSimpleLineGeometry=w;var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e),this.hasNormalsAndUvs=t,this.highPrecision=n,this.isSimple=r,this.m_geometry=new x}return r(e,[{key:"clear",value:function(){this.m_geometry.vertices=[],this.m_geometry.vertexColors=[],this.m_geometry.indices=[]}},{key:"add",value:function(e,t,n,r,i,a){return this.isSimple?w(t,a,this.m_geometry):(o.assert(!this.hasNormalsAndUvs||void 0!==i),b(e,t,n,r,i,a,this.m_geometry,this.highPrecision)),this}},{key:"vertices",get:function(){return this.m_geometry.vertices}},{key:"vertexColors",get:function(){return this.m_geometry.vertexColors}},{key:"indices",get:function(){return this.m_geometry.indices}},{key:"vertexAttributes",get:function(){return _(this.hasNormalsAndUvs,this.highPrecision).attributes}},{key:"stride",get:function(){return _(this.hasNormalsAndUvs,this.highPrecision).stride}},{key:"createGeometry",value:function(t){return void 0===t&&(t=new s.BufferGeometry),e.createGeometry(this.m_geometry.vertices,this.m_geometry.vertexColors,this.m_geometry.indices,t,this.hasNormalsAndUvs,this.highPrecision)}}],[{key:"createGeometry",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(o)return r.setAttribute("position",new s.BufferAttribute(new Float32Array(e),3)),t.length===e.length&&r.setAttribute("color",new s.BufferAttribute(new Float32Array(t),3)),r.setIndex(new s.BufferAttribute(new Uint32Array(n),1)),r;var u=_(i,a),l=new s.InterleavedBuffer(new Float32Array(e),u.stride);return u.attributes.forEach((function(e){var t=new s.InterleavedBufferAttribute(l,e.itemSize,e.offset,!1);r.setAttribute(e.name,t)})),t.length===e.length&&r.setAttribute("color",new s.BufferAttribute(new Float32Array(t),3)),r.setIndex(new s.BufferAttribute(new Uint32Array(n),1)),r}}]),e}();function M(e,t,n,r){var i=0;return t.equals(n)||(i=Math.acos(t.dot(n))*Math.sign(e.dot(u.copy(t).cross(n))),Number.isNaN(i)&&(i=0)),r.copy(t).add(n).normalize().cross(e).normalize(),i}t.LineGroup=S},87776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructLineWidth=t.reconstructLine=t.triangulateLine=t.numCirclePoints=void 0;var r=n(34585),i=new r.Vector3(0,0,1),a=[0,1,2,1,3,2],o=[0,1,3,3,1,2,0,3,4,5,4,3],s=Math.PI/8;function u(e,t,n,r,i,a){var o=i.length/3;i.push(e,t,0);for(var u=0;u<9;++u){var l=s*u+Math.PI/2+n;i.push(e+r*Math.cos(l),t+r*Math.sin(l),0),a.push(o,o+u+1,o+(u+1)%9+1)}}t.numCirclePoints=function(e){return 9},t.triangulateLine=function(e,t,n,s){var l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l;if(!(e.length<3)){var d=new r.Vector2;if(l){var h=3!==e.length?d.set(e[3]-e[0],e[4]-e[1]).angle():0;u(e[0],e[1],h,t,n,s)}for(var f=n.length/3,p=new r.Vector3,m=new r.Vector3,v=new r.Vector3,g=new r.Vector3,y=new r.Vector3,x=new r.Vector3,_=new r.Vector3,b=new r.Vector3,w=new r.Vector3,S=e.length/3,M=0,E=0;E<S;++E){var T=!1;if(m.set(e[3*E],e[3*E+1],e[3*E+2]),E+1<S){if(v.set(e[3*(E+1)],e[3*(E+1)+1],e[3*(E+1)+2]),g.copy(v).sub(m).normalize().cross(i),y.copy(g),E>0&&(y.add(p).multiplyScalar(1-.5*g.dot(p)),T=p.angleTo(g)>Math.PI/2)){var k=t/Math.cos(g.angleTo(p)/2);x.copy(g).add(p).normalize().multiplyScalar(-k).add(m),_.copy(p).multiplyScalar(t).add(m),b.copy(g).add(p).normalize().multiplyScalar(k).add(m),w.copy(g).multiplyScalar(t).add(m)}T?n.push(x.x,x.y,x.z,_.x,_.y,_.z,b.x,b.y,b.z,w.x,w.y,w.z):(x.copy(y).multiplyScalar(-t).add(m),_.copy(y).multiplyScalar(t).add(m),n.push(x.x,x.y,x.z,_.x,_.y,_.z)),p.copy(g)}else x.copy(p).multiplyScalar(-t).add(m),_.copy(p).multiplyScalar(t).add(m),n.push(x.x,x.y,x.z,_.x,_.y,_.z);E!==S-1&&((T?o:a).forEach((function(e){return s.push(f+M+e)})),M+=T?4:2)}if(c){var C=2!==e.length?d.set(e[3*(S-3)]-e[3*(S-2)],e[3*(S-3)+1]-e[3*(S-2)+1]).angle():Math.PI;u(e[3*(S-2)],e[3*(S-2)+1],C,t,n,s)}}},t.reconstructLine=function(e,t){for(var n=new Float32Array(e.length/2),r=3*t,i=2*r;r<n.length;r+=3,i+=6)n[r]=e[i]+.5*(e[i+3]-e[i]),n[r+1]=e[i+1]+.5*(e[i+3+1]-e[i+1]),n[r+2]=e[i+2]+.5*(e[i+3+2]-e[i+2]);return n},t.reconstructLineWidth=function(e,t){var n=e[2*t+3]-e[2*t],r=e[2*t+3+1]-e[2*t+1],i=e[2*t+3+2]-e[2*t+2];return.5*Math.sqrt(n*n+r*r+i*i)}},51106:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28350),t)},28350:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.Entry=void 0;var a=n(15739),o=r((function e(t,n,r,a,o){i(this,e),this.key=t,this.value=n,this.size=r,this.newer=a,this.older=o}));t.Entry=o;var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 1};i(this,e),this.m_size=0,this.m_map=new Map,this.m_newest=null,this.m_oldest=null,this.m_capacity=t,this.m_sizeFunction=n}return r(e,[{key:"forEach",value:function(e,t){for(var n=this.m_newest;null!==n;){var r=n.older;e.call(t,n.value,n.key,this),n=r}}},{key:"size",get:function(){return this.m_size}},{key:"capacity",get:function(){return this.m_capacity}},{key:"map",get:function(){return this.m_map}},{key:"newest",get:function(){return this.m_newest}},{key:"oldest",get:function(){return this.m_oldest}},{key:"setCapacity",value:function(e){this.m_capacity=e,this.evict()}},{key:"setCapacityAndMeasure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 1};this.m_capacity=e,this.m_sizeFunction=t,this.shrinkToCapacity()}},{key:"shrinkToCapacity",value:function(){for(var e=0,t=this.m_sizeFunction,n=this.m_newest;null!==n;){var r=t(n.value);n.size=r,e+=r,n=n.older}this.m_size=e,this.evict()}},{key:"set",value:function(e,t){var n=this.m_sizeFunction(t),r=this.m_map.get(e);if(void 0!==r)this.m_size=this.m_size-r.size+n,r.value=t,r.size=n,this.promoteEntry(r),this.evict();else{if(n>this.m_capacity)return;if(r=new o(e,t,n,null,null),0===this.m_map.size)this.m_newest=this.m_oldest=r;else{a.assert(null!==this.m_newest);var i=this.m_newest;r.older=this.m_newest,i.newer=r,this.m_newest=r}this.m_map.set(e,r),this.m_size+=n,this.evict()}}},{key:"get",value:function(e){var t=this.m_map.get(e);if(void 0!==t)return this.promoteEntry(t),t.value}},{key:"has",value:function(e){return this.m_map.has(e)}},{key:"clear",value:function(){this.m_newest=this.m_oldest=null,this.m_size=0,this.m_map.clear()}},{key:"evictAll",value:function(){var e=this.evictionCallback;void 0!==e&&this.forEach((function(t,n){return e(n,t)})),this.clear()}},{key:"evictSelected",value:function(e,t){for(var n=this.evictionCallback,r=this.m_newest;null!==r;){var i=r.older;e.call(t,r.value,r.key)&&(void 0!==n&&n(r.key,r.value),this.deleteEntry(r),this.m_map.delete(r.key)),r=i}}},{key:"delete",value:function(e){var t=this.m_map.get(e);return void 0!==t&&(this.deleteEntry(t),this.m_map.delete(e))}},{key:"evict",value:function(){for(;null!==this.m_oldest&&this.m_size>this.m_capacity;){if(void 0===this.evictOldest())return}}},{key:"evictOldest",value:function(){a.assert(null!==this.m_oldest);var e=this.m_oldest;a.assert(null===e.older);var t=e;if(void 0!==this.canEvict)for(;!this.canEvict(t.key,t.value);){if(null===t.newer)return;t=t.newer}if(t===e)this.m_oldest=t.newer,null!==t.newer&&(a.assert(t.newer.older===t),t.newer.older=null);else{if(null===t.newer)return;a.assert(t.newer.older===t),t.newer.older=t.older,null!==t.older&&(t.older.newer=t.newer)}var n=this.m_map.delete(t.key);return a.assert(!0===n),n&&void 0!==this.evictionCallback&&this.evictionCallback(t.key,t.value),this.m_size-=t.size,t}},{key:"deleteEntry",value:function(e){e===this.m_newest?this.m_newest=e.older:e.newer?e.newer.older=e.older:a.assert(!1),e===this.m_oldest?this.m_oldest=e.newer:e.older?e.older.newer=e.newer:a.assert(!1),this.m_size-=e.size}},{key:"promoteEntry",value:function(e){if(e!==this.m_newest){e.newer&&(a.assert(e.newer.older===e),e.newer.older=e.older),e.older&&(a.assert(e.older.newer===e),e.older.newer=e.newer),e===this.m_oldest&&(this.m_oldest=e.newer),e.newer=null,e.older=this.m_newest,a.assert(null!==this.m_newest);var t=this.m_newest;a.assert(null===t.newer),t.newer=e,this.m_newest=e}}}]),e}();t.LRUCache=s},48218:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(48971),t),i(n(73530),t),i(n(19007),t),i(n(53161),t),i(n(36814),t),i(n(99424),t),i(n(74034),t)},74034:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CameraAnimationBuilder=void 0;var o=n(31201),s=n(34585),u=n(99424),l=function(){function e(){i(this,e)}return a(e,null,[{key:"getLookAtFromView",value:function(e){return{target:e.target,heading:e.heading,tilt:e.tilt,distance:e.targetDistance}}},{key:"appendControlPoint",value:function(e,t,n){n=null!==n&&void 0!==n?n:10,e.controlPoints.length>0&&(void 0===t.timestamp||t.timestamp<=e.controlPoints[e.controlPoints.length-1].timestamp)&&(t.timestamp=e.controlPoints[e.controlPoints.length-1].timestamp+n),e.controlPoints.push(t)}},{key:"prependControlPoint",value:function(e,t,n){n=void 0!==n?n:10;var i,a=r(e.controlPoints);try{for(a.s();!(i=a.n()).done;){i.value.timestamp+=n}}catch(o){a.e(o)}finally{a.f()}t.timestamp=0,e.controlPoints.unshift(t)}},{key:"createBowFlyToOptions",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,a=[t],l=new s.Vector3;e.projection.projectPoint(t.target,l);var c=null!==r&&void 0!==r?r:2*l.distanceTo(e.projection.projectPoint(n.target));c=Math.max(t.distance+n.distance,c);var d=o.GeoCoordinates.lerp(t.target,n.target,.25),h=new u.ControlPoint({target:d,distance:c,timestamp:i/3,tilt:o.MathUtils.interpolateAnglesDeg(t.tilt,n.tilt,.25),heading:o.MathUtils.interpolateAnglesDeg(t.heading,n.heading,.25)});a.push(h);var f=o.GeoCoordinates.lerp(t.target,n.target,.75),p=new u.ControlPoint({target:f,distance:c,timestamp:i/3*2,tilt:o.MathUtils.interpolateAnglesDeg(t.tilt,n.tilt,.75),heading:o.MathUtils.interpolateAnglesDeg(t.heading,n.heading,.75)});return a.push(p),n.timestamp=i,a.push(n),{controlPoints:a}}},{key:"createOrbitOptions",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=4,r=[e],i=n-1,a=360/i,o=t/i,s=1;s<n;s++){var u=r[s-1];r.push(Object.assign(Object.assign({},u),{heading:u.heading-a,timestamp:u.timestamp+o}))}return{controlPoints:r}}}]),e}();t.CameraAnimationBuilder=l},99424:function(e,t,n){"use strict";var r=n(2205).default,i=n(99842).default,a=n(93913).default,o=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CameraKeyTrackAnimation=t.ControlPoint=void 0;var s=n(31201),u=n(48991),l=n(15739),c=n(34585),d=l.LoggerManager.instance.create("CameraKeyTrackAnimation"),h=a((function e(t){var n,r,i,a;o(this,e),this.timestamp=0,this.timestamp=t.timestamp,this.target=t.target?s.GeoCoordinates.fromObject(t.target):new s.GeoCoordinates(0,0),this.tilt=null!==(n=t.tilt)&&void 0!==n?n:0,this.heading=null!==(r=t.heading)&&void 0!==r?r:0,this.distance=null!==(i=t.distance)&&void 0!==i?i:0,this.name=null!==(a=t.name)&&void 0!==a?a:Date.now().toString()}));t.ControlPoint=h;var f=function(e){r(n,e);var t=i(n);function n(e){var r;return o(this,n),(r=t.call(this)).distance=0,r.name=e,r}return a(n)}(c.Object3D),p=function(){function e(t,n){var r,i,a,s,u=this;o(this,e),this.m_mapView=t,this.m_options=n,this.m_dummy=new f("dummy"),this.m_azimuthAxis=new c.Vector3(0,0,1),this.m_altitudeAxis=new c.Vector3(1,0,0),this.m_running=!1,this.m_lastFrameTime=0;var l=void 0!==this.m_options.interpolation?this.m_options.interpolation:c.InterpolateSmooth;this.m_options.loop=null!==(r=this.m_options.loop)&&void 0!==r?r:c.LoopOnce,this.m_options.repetitions=null!==(i=this.m_options.repetitions)&&void 0!==i?i:1,this.m_options.rotateOnlyClockwise=null===(a=this.m_options.rotateOnlyClockwise)||void 0===a||a,this.m_name=(null!==(s=this.m_options.name)&&void 0!==s?s:"CameraKeyTrackAnimation")+Date.now();var h=this.m_options.controlPoints.map((function(e){return e.timestamp})),p=[],m=[];this.m_options.controlPoints.map((function(e){var t=u.m_mapView.projection.projectPoint(e.target);p.push(t.x),p.push(t.y),p.push(t.z);var n=new c.Quaternion;n.setFromAxisAngle(u.m_azimuthAxis,c.MathUtils.degToRad(e.heading)),n.multiply((new c.Quaternion).setFromAxisAngle(u.m_altitudeAxis,c.MathUtils.degToRad(e.tilt))),m.push(n.x),m.push(n.y),m.push(n.z),m.push(n.w)}));var v=new c.VectorKeyframeTrack(".position",h,p,l),g=new c.QuaternionKeyframeTrack(".quaternion",h,m,l),y=new c.NumberKeyframeTrack(".distance",h,this.m_options.controlPoints.map((function(e){return e.distance})),l);this.m_animationClip=new c.AnimationClip("cameraflyoveranimation",-1,[v,g,y]),this.m_animationClip.validate()||d.error("Review the entered controlpoints for: ",this.m_name,", The Animation was provided with invalid track data"),this.m_animationClip.resetDuration(),this.m_animationClip.trim(),this.m_animationMixer=new c.AnimationMixer(this.m_dummy),this.m_animationAction=this.m_animationMixer.clipAction(this.m_animationClip),this.m_animationAction.setLoop(this.m_options.loop,this.m_options.repetitions),this.m_animationAction.clampWhenFinished=!0,this.m_animateCb=this.animate.bind(this),this.m_animationMixer.addEventListener("finished",this.stop.bind(this))}return a(e,[{key:"loop",set:function(e){this.m_options.loop=e,this.m_animationAction.setLoop(this.m_options.loop,this.m_options.repetitions)}},{key:"repetitions",set:function(e){this.m_options.repetitions=e,this.m_animationAction.setLoop(this.m_options.loop,this.m_options.repetitions)}},{key:"rotateOnlyClockwise",set:function(e){this.m_options.rotateOnlyClockwise=e}},{key:"start",value:function(e,t){this.m_running&&this.stop(),this.m_onFinished=t,this.m_animationAction.reset().play(),this.m_lastFrameTime=Date.now(),this.m_mapView.addEventListener(u.MapViewEventNames.Render,this.m_animateCb),this.m_mapView.beginAnimation(),this.m_running=!0}},{key:"stop",value:function(){this.m_mapView.removeEventListener(u.MapViewEventNames.Render,this.m_animateCb),this.m_mapView.endAnimation(),void 0!==this.m_onFinished&&window.setTimeout(this.m_onFinished,0),this.m_running=!1}},{key:"isRunning",value:function(){return this.m_running}},{key:"updateCameraFromDummy",value:function(){var e=c.MathUtils.radToDeg(this.m_azimuthAxis.clone().applyQuaternion(this.m_dummy.quaternion).angleTo(this.m_azimuthAxis));e=c.MathUtils.clamp(e,0,u.MapViewUtils.MAX_TILT_DEG);var t=this.m_altitudeAxis.clone().applyQuaternion(this.m_dummy.quaternion),n=t.angleTo(this.m_altitudeAxis);this.m_options.rotateOnlyClockwise&&(this.m_azimuthAxis.dot(t.normalize().cross(this.m_altitudeAxis))>=0&&(n=2*Math.PI-n));var r=c.MathUtils.radToDeg(n),i=this.m_mapView.projection.unprojectPoint(this.m_dummy.position),a=Math.max(0,this.m_dummy.distance);(isNaN(e)||isNaN(r)||isNaN(a)||!i.isValid())&&d.error("Cannot update due to invalid data",e,r,a,i),this.m_mapView.lookAt({target:i,distance:a,tilt:e,heading:r})}},{key:"animate",value:function(e){var t=(Date.now()-this.m_lastFrameTime)/1e3;this.m_animationMixer.update(t),this.m_lastFrameTime=Date.now(),this.updateCameraFromDummy()}}]),e}();t.CameraKeyTrackAnimation=p},19007:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LongPressHandler=void 0;var a=function(){function e(t,n,i){r(this,e),this.element=t,this.onLongPress=n,this.onTap=i,this.timeout=500,this.moveThreshold=5,this.buttonId=0,this.m_pressEvent=void 0,this.m_timerId=void 0,this.m_moveHandlerRegistered=!1,this.m_boundPointerMoveHandler=this.onPointerMove.bind(this),this.m_boundMouseDownHandler=this.onMouseDown.bind(this),this.m_boundTouchStartHandler=this.onTouchStart.bind(this),this.m_boundMouseUpHandler=this.onMouseUp.bind(this),this.m_boundTouchEndHandler=this.onTouchEnd.bind(this),this.element.addEventListener("mousedown",this.m_boundMouseDownHandler),this.element.addEventListener("touchstart",this.m_boundTouchStartHandler),this.element.addEventListener("mouseup",this.m_boundMouseUpHandler),this.element.addEventListener("touchend",this.m_boundTouchEndHandler)}return i(e,[{key:"dispose",value:function(){this.cancel(),this.element.removeEventListener("mousedown",this.m_boundMouseDownHandler),this.element.removeEventListener("touchstart",this.m_boundTouchStartHandler),this.element.removeEventListener("mouseup",this.m_boundMouseUpHandler),this.element.removeEventListener("touchend",this.m_boundTouchEndHandler)}},{key:"startPress",value:function(e){var t,n,r=this;this.cancelTimer(),this.m_pressEvent=null!==(n=null===(t=e.changedTouches)||void 0===t?void 0:t[0])&&void 0!==n?n:e,this.m_timerId=setTimeout((function(){return r.onTimeout()}),this.timeout),this.addPointerMoveHandler()}},{key:"onMouseDown",value:function(e){e.button===this.buttonId&&this.startPress(e)}},{key:"onTouchStart",value:function(e){this.m_pressEvent?this.cancel():1===e.changedTouches.length&&this.startPress(e)}},{key:"onMouseUp",value:function(e){var t;this.m_pressEvent&&e.button===this.buttonId&&(this.cancel(),null===(t=this.onTap)||void 0===t||t.call(this,e))}},{key:"onTouchEnd",value:function(e){var t;1===e.changedTouches.length&&e.changedTouches[0].identifier===this.m_pressEvent.identifier&&(this.cancel(),null===(t=this.onTap)||void 0===t||t.call(this,e.changedTouches[0]))}},{key:"onPointerMove",value:function(e){var t,n;if(void 0!==this.m_pressEvent){var r=null!==(n=null===(t=e.changedTouches)||void 0===t?void 0:t[0])&&void 0!==n?n:e,i=r.clientX,a=r.clientY;Math.abs(i-this.m_pressEvent.clientX)+Math.abs(a-this.m_pressEvent.clientY)>this.moveThreshold&&this.cancel()}}},{key:"cancel",value:function(){this.m_pressEvent=void 0,this.cancelTimer(),this.removePointerMoveHandler()}},{key:"cancelTimer",value:function(){void 0!==this.m_timerId&&(clearTimeout(this.m_timerId),this.m_timerId=void 0)}},{key:"addPointerMoveHandler",value:function(){this.m_moveHandlerRegistered||(this.element.addEventListener("mousemove",this.m_boundPointerMoveHandler),this.element.addEventListener("touchmove",this.m_boundPointerMoveHandler),this.m_moveHandlerRegistered=!0)}},{key:"removePointerMoveHandler",value:function(){this.m_moveHandlerRegistered&&(this.element.removeEventListener("mousemove",this.m_boundPointerMoveHandler),this.element.removeEventListener("touchmove",this.m_boundPointerMoveHandler),this.m_moveHandlerRegistered=!1)}},{key:"onTimeout",value:function(){var e=this.m_pressEvent;this.m_timerId=void 0,this.cancel(),void 0!==e&&this.onLongPress(e)}}]),e}();t.LongPressHandler=a},36814:function(e,t,n){"use strict";var r=n(43269).default,i=n(2205).default,a=n(99842).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CameraPanAnimation=t.CameraRotationAnimation=t.CameraAnimation=t.InterpolationFunction=t.EasingFunction=void 0;var u,l,c=n(31201),d=n(15739),h=n(88926),f=n(34585),p=n(48971);!function(e){e[e.Linear=0]="Linear",e[e.QuadraticIn=1]="QuadraticIn",e[e.QuadraticOut=2]="QuadraticOut",e[e.QuadraticInOut=3]="QuadraticInOut",e[e.CubicIn=4]="CubicIn",e[e.CubicOut=5]="CubicOut",e[e.CubicInOut=6]="CubicInOut",e[e.QuarticIn=7]="QuarticIn",e[e.QuarticOut=8]="QuarticOut",e[e.QuarticInOut=9]="QuarticInOut",e[e.QuinticIn=10]="QuinticIn",e[e.QuinticOut=11]="QuinticOut",e[e.QuinticInOut=12]="QuinticInOut",e[e.SinusoidalIn=13]="SinusoidalIn",e[e.SinusoidalOut=14]="SinusoidalOut",e[e.SinusoidalInOut=15]="SinusoidalInOut",e[e.ExponentialIn=16]="ExponentialIn",e[e.ExponentialOut=17]="ExponentialOut",e[e.ExponentialInOut=18]="ExponentialInOut",e[e.CircularIn=19]="CircularIn",e[e.CircularOut=20]="CircularOut",e[e.CircularInOut=21]="CircularInOut",e[e.ElasticIn=22]="ElasticIn",e[e.ElasticOut=23]="ElasticOut",e[e.ElasticInOut=24]="ElasticInOut",e[e.BackIn=25]="BackIn",e[e.BackOut=26]="BackOut",e[e.BackInOut=27]="BackInOut",e[e.BounceIn=28]="BounceIn",e[e.BounceOut=29]="BounceOut",e[e.BounceInOut=30]="BounceInOut"}(u=t.EasingFunction||(t.EasingFunction={})),function(e){e[e.Linear=0]="Linear",e[e.Bezier=1]="Bezier",e[e.CatmullRom=2]="CatmullRom"}(l=t.InterpolationFunction||(t.InterpolationFunction={}));var m=function(){function e(t,n){o(this,e),this.mapView=t,this.name=n,this.running=!1,this.stopped=!1,this.duration=1e4,this.repeat=0,this.easing=h.Easing.Linear.None,function(){if(void 0!==g)return;g=new Map,y=new Map,g.set(u.Linear,h.Easing.Linear.None),g.set(u.QuadraticIn,h.Easing.Quadratic.In),g.set(u.QuadraticOut,h.Easing.Quadratic.Out),g.set(u.QuadraticInOut,h.Easing.Quadratic.InOut),g.set(u.CubicIn,h.Easing.Cubic.In),g.set(u.CubicOut,h.Easing.Cubic.Out),g.set(u.CubicInOut,h.Easing.Cubic.InOut),g.set(u.QuarticIn,h.Easing.Quartic.In),g.set(u.QuarticOut,h.Easing.Quartic.Out),g.set(u.QuarticInOut,h.Easing.Quartic.InOut),g.set(u.QuinticIn,h.Easing.Quintic.In),g.set(u.QuinticOut,h.Easing.Quintic.Out),g.set(u.QuinticInOut,h.Easing.Quintic.InOut),g.set(u.SinusoidalIn,h.Easing.Sinusoidal.In),g.set(u.SinusoidalOut,h.Easing.Sinusoidal.Out),g.set(u.SinusoidalInOut,h.Easing.Sinusoidal.InOut),g.set(u.ExponentialIn,h.Easing.Exponential.In),g.set(u.ExponentialOut,h.Easing.Exponential.Out),g.set(u.ExponentialInOut,h.Easing.Exponential.InOut),g.set(u.CircularIn,h.Easing.Circular.In),g.set(u.CircularOut,h.Easing.Circular.Out),g.set(u.CircularOut,h.Easing.Circular.InOut),g.set(u.ElasticIn,h.Easing.Elastic.In),g.set(u.ElasticOut,h.Easing.Elastic.Out),g.set(u.ElasticInOut,h.Easing.Elastic.InOut),g.set(u.BackIn,h.Easing.Back.In),g.set(u.BackOut,h.Easing.Back.Out),g.set(u.BackInOut,h.Easing.Back.InOut),g.set(u.BounceIn,h.Easing.Bounce.In),g.set(u.BounceOut,h.Easing.Bounce.Out),g.set(u.BounceInOut,h.Easing.Bounce.InOut),y.set(l.Linear,h.Interpolation.Linear),y.set(l.Bezier,h.Interpolation.Bezier),y.set(l.CatmullRom,h.Interpolation.CatmullRom)}()}return s(e,[{key:"update",value:function(e){return!!this.tween&&this.tween.update(null!==e&&void 0!==e?e:d.PerformanceTimer.now())}},{key:"isRunning",get:function(){return this.running}}]),e}();t.CameraAnimation=m;var v=function(e){i(n,e);var t=a(n);function n(e,r,i,a){var s,u;return o(this,n),(s=t.call(this,e,a)).m_mapControls=r,s.startAngle=0,s.endAngle=360,s.m_axis=new f.Vector3(0,0,1),s.beginInteractionListener=function(){s.stopped||s.stopTween()},s.endInteractionListener=function(){s.stopped||s.startTween()},void 0!==i.axis&&(s.m_axis=i.axis),void 0!==i.startAngle&&(s.startAngle=i.startAngle),void 0!==i.endAngle&&(s.endAngle=i.endAngle),void 0!==i.duration&&(s.duration=i.duration),void 0!==i.repeat&&(s.repeat=i.repeat),void 0!==i.easing&&(s.easing="function"===typeof i.easing?i.easing:null!==(u=g.get(i.easing))&&void 0!==u?u:h.Easing.Linear.None),s.m_lastRotationValue=s.startAngle,s}return s(n,[{key:"start",value:function(e,t){if(this.running)throw new Error("Animation already running"+this.name!==void 0?this.name:0);this.running=!0,this.onFinished=t,this.stopped=!1,this.m_mapControls&&(this.m_mapControls.addEventListener(p.EventNames.BeginInteraction,this.beginInteractionListener),this.m_mapControls.addEventListener(p.EventNames.EndInteraction,this.endInteractionListener)),this.startTween(e),this.mapView.beginAnimation()}},{key:"stop",value:function(){if(!this.running)throw new Error("Animation not running"+this.name!==void 0?this.name:0);this.running=!1,this.stopped=!0,this.mapView.endAnimation(),this.tween&&this.tween.stop(),this.m_mapControls&&(this.m_mapControls.removeEventListener(p.EventNames.BeginInteraction,this.beginInteractionListener),this.m_mapControls.removeEventListener(p.EventNames.EndInteraction,this.endInteractionListener))}},{key:"startTween",value:function(e){var t=this,n=new f.Quaternion;this.m_userCamerRotation=new f.Quaternion,this.mapView.camera.getWorldQuaternion(this.m_userCamerRotation),this.tween=new h.Tween({rotation:0}).to({rotation:this.endAngle-this.m_lastRotationValue},this.duration).onComplete((function(){t.stop(),t.onFinished&&t.onFinished()})).onUpdate((function(e){var r=e.rotation;t.m_lastRotationValue=r,n.setFromEuler(new f.Euler(0,0,f.MathUtils.degToRad(r))),void 0!==t.m_userCamerRotation&&n.multiply(t.m_userCamerRotation),t.mapView.camera.quaternion.copy(n)})),this.tween.repeat(this.repeat),this.tween.easing(this.easing),this.tween.start(e)}},{key:"stopTween",value:function(){this.tween&&this.tween.stop()}}]),n}(m);t.CameraRotationAnimation=v;var g,y,x=function(e){i(n,e);var t=a(n);function n(e,r,i){var a,s,u;return o(this,n),(a=t.call(this,e,i)).name=i,a.interpolation=h.Interpolation.CatmullRom,void 0!==r.duration&&(a.duration=r.duration),void 0!==r.repeat&&(a.repeat=r.repeat),void 0!==r.easing&&(a.easing="function"===typeof r.easing?r.easing:null!==(s=g.get(r.easing))&&void 0!==s?s:h.Easing.Linear.None),void 0!==r.interpolation&&(a.interpolation="function"===typeof r.interpolation?r.interpolation:null!==(u=y.get(r.interpolation))&&void 0!==u?u:h.Interpolation.Linear),a.m_geoCoordinates=void 0!==r.geoCoordinates?r.geoCoordinates:[],a}return s(n,[{key:"addPosition",value:function(e){this.m_geoCoordinates.push(e)}},{key:"start",value:function(e,t){var n,i=this;if(this.running)throw new Error("Animation already running"+this.name!==void 0?this.name:0);this.onFinished=t,this.running=!0;var a,o=new c.GeoCoordinates(this.mapView.geoCenter.latitude,this.mapView.geoCenter.longitude,this.mapView.camera.position.z),s={latitude:new Array,longitude:new Array,altitude:new Array},u=r(this.m_geoCoordinates);try{for(u.s();!(a=u.n()).done;){var l=a.value;s.latitude.push(l.latitude),s.longitude.push(l.longitude),s.altitude.push(null!==(n=l.altitude)&&void 0!==n?n:this.mapView.camera.position.z)}}catch(d){u.e(d)}finally{u.f()}this.tween=new h.Tween(o).to(s,this.duration).onComplete((function(){i.stop(),i.onFinished&&i.onFinished()})).onUpdate((function(e){var t=e.latitude,n=e.longitude,r=e.altitude;i.mapView.geoCenter=new c.GeoCoordinates(t,n,r),i.mapView.camera.position.z=null!==r&&void 0!==r?r:0})),this.tween.repeat(this.repeat),this.tween.easing(this.easing),this.tween.interpolation(this.interpolation),this.tween.start(e),this.mapView.beginAnimation()}},{key:"stop",value:function(){if(!this.running)throw new Error("Animation not running"+this.name!==void 0?this.name:0);this.running=!1,this.mapView.endAnimation(),this.tween&&this.tween.stop()}},{key:"isRunning",get:function(){return this.running}}]),n}(m);t.CameraPanAnimation=x},48971:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(81506).default,o=n(2205).default,s=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapControls=t.EventNames=t.TiltState=void 0;var u,l,c,d=n(31201),h=n(48991),f=n(34585),p=n(53161);!function(e){e[e.NONE=0]="NONE",e[e.PAN=1]="PAN",e[e.ROTATE=2]="ROTATE",e[e.ORBIT=3]="ORBIT",e[e.TOUCH=4]="TOUCH"}(u||(u={})),function(e){e[e.Tilted=0]="Tilted",e[e.Down=1]="Down"}(l=t.TiltState||(t.TiltState={})),function(e){e.Update="update",e.BeginInteraction="begin-interaction",e.EndInteraction="end-interaction"}(c=t.EventNames||(t.EventNames={}));var m={type:c.Update},v={type:c.BeginInteraction},g={type:c.EndInteraction},y=f.MathUtils.degToRad(89),x=.01,_=function(e){o(n,e);var t=s(n);function n(e){var i,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r(this,n),(i=t.call(this)).mapView=e,i.rotationMouseDeltaFactor=.1,i.orbitingMouseDeltaFactor=.1*f.MathUtils.DEG2RAD,i.orbitingTouchDeltaFactor=.1*f.MathUtils.DEG2RAD,i.enabled=!0,i.zoomEnabled=!0,i.panEnabled=!0,i.tiltEnabled=!0,i.rotateEnabled=!0,i.inertiaEnabled=!0,i.zoomInertiaDampingDuration=.6,i.panInertiaDampingDuration=1,i.tiltToggleDuration=.5,i.tiltAngle=Math.PI/4,i.northResetAnimationDuration=1.5,i.zoomLevelDeltaOnControl=1,i.minZoomLevel=0,i.maxZoomLevel=20,i.minCameraHeight=3,i.zoomLevelDeltaOnDoubleClick=1,i.doubleTapTime=.3,i.m_currentViewDirection=new f.Vector3,i.m_lastMousePosition=new f.Vector2(0,0),i.m_initialMousePosition=new f.Vector2(0,0),i.m_mouseDelta=new f.Vector2(0,0),i.m_needsRenderLastFrame=!0,i.m_panIsAnimated=!1,i.m_panDistanceFrameDelta=new f.Vector3,i.m_panAnimationTime=0,i.m_panAnimationStartTime=0,i.m_lastAveragedPanDistanceOrAngle=0,i.m_currentInertialPanningSpeed=0,i.m_lastPanVector=new f.Vector3,i.m_rotateGlobeQuaternion=new f.Quaternion,i.m_lastRotateGlobeAxis=new f.Vector3,i.m_lastRotateGlobeAngle=0,i.m_lastRotateGlobeFromVector=new f.Vector3,i.m_recentPanDistancesOrAngles=[0,0,0,0,0],i.m_currentPanDistanceOrAngleIndex=0,i.m_zoomIsAnimated=!1,i.m_zoomDeltaRequested=0,i.m_zoomTargetNormalizedCoordinates=new f.Vector2,i.m_zoomAnimationTime=0,i.m_zoomAnimationStartTime=0,i.m_startZoom=0,i.m_tiltIsAnimated=!1,i.m_tiltRequested=void 0,i.m_tiltAnimationTime=0,i.m_tiltAnimationStartTime=0,i.m_startTilt=0,i.m_state=u.NONE,i.m_tmpVector2=new f.Vector2,i.m_tmpVector3=new f.Vector3,i.m_tapStartTime=0,i.m_lastSingleTapTime=0,i.m_fingerMoved=!1,i.m_isDoubleTap=!1,i.m_resetNorthStartTime=0,i.m_resetNorthIsAnimated=!1,i.m_resetNorthAnimationDuration=0,i.m_currentAzimuth=0,i.m_lastAzimuth=0,i.m_startAzimuth=0,i.m_maxTiltAngle=y,i.m_touchState={touches:[],currentRotation:0,initialRotation:0},i.dispose=function(){},i.camera=e.camera,i.domElement=e.renderer.domElement,i.maxZoomLevel=e.maxZoomLevel,i.minZoomLevel=e.minZoomLevel,i.minCameraHeight=e.minCameraHeight,i.bindInputEvents(i.domElement),i.handleZoom=i.handleZoom.bind(a(i)),i.handlePan=i.handlePan.bind(a(i)),i.tilt=i.tilt.bind(a(i)),i.resetNorth=i.resetNorth.bind(a(i)),i.assignZoomAfterTouchZoomRender=i.assignZoomAfterTouchZoomRender.bind(a(i)),o&&e.addEventListener(h.MapViewEventNames.Dispose,(function(){i.dispose()})),i}return i(n,[{key:"zoomLevelDeltaOnMouseWheel",get:function(){return void 0!==this.m_zoomLevelDeltaOnMouseWheel?this.m_zoomLevelDeltaOnMouseWheel:this.inertiaEnabled?.8:.2},set:function(e){this.m_zoomLevelDeltaOnMouseWheel=e}},{key:"attitude",get:function(){var e=h.MapViewUtils.extractAttitude(this.mapView,this.camera);return{yaw:f.MathUtils.radToDeg(e.yaw),pitch:f.MathUtils.radToDeg(e.pitch),roll:f.MathUtils.radToDeg(e.roll)}}},{key:"pointToNorth",value:function(){this.m_startAzimuth=Math.PI+h.MapViewUtils.extractSphericalCoordinatesFromLocation(this.mapView,this.camera,this.mapView.target).azimuth,this.m_startAzimuth=Math.atan2(Math.sin(this.m_startAzimuth),Math.cos(this.m_startAzimuth)),0!==this.m_startAzimuth&&(this.stopExistingAnimations(),this.m_resetNorthAnimationDuration=this.northResetAnimationDuration,this.m_currentAzimuth=this.m_startAzimuth,this.m_resetNorthStartTime=performance.now(),this.resetNorth())}},{key:"zoomOnTargetPosition",value:function(e,t,n){h.MapViewUtils.zoomOnTargetPosition(this.mapView,e,t,n,this.m_maxTiltAngle)}},{key:"setZoomLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.enabled&&this.zoomEnabled&&(this.dispatchEvent(v),this.m_startZoom=this.currentZoom,this.m_zoomDeltaRequested=e-this.zoomLevelTargeted,this.stopExistingAnimations(),this.m_zoomAnimationStartTime=performance.now(),this.m_zoomTargetNormalizedCoordinates.set(t.x,t.y),this.handleZoom(),this.dispatchEvent(g))}},{key:"toggleTilt",value:function(){if(this.enabled&&this.tiltEnabled){this.stopExistingAnimations(),this.m_startTilt=this.currentTilt;var e=this.m_startTilt<x;this.m_tiltRequested=e?this.tiltAngle:0,this.m_tiltState=e?l.Tilted:l.Down,this.m_tiltAnimationStartTime=performance.now(),this.tilt()}}},{key:"cameraHeight",get:function(){return this.mapView.camera.position.z},set:function(e){this.camera.position.setZ(e),this.camera.matrixWorldNeedsUpdate=!0}},{key:"maxTiltAngle",get:function(){return f.MathUtils.radToDeg(this.m_maxTiltAngle)},set:function(e){this.m_maxTiltAngle=Math.max(0,Math.min(y,f.MathUtils.degToRad(e)))}},{key:"zoomLevelTargeted",get:function(){return void 0===this.m_targetedZoom?this.currentZoom:this.m_targetedZoom}},{key:"tiltState",get:function(){return void 0===this.m_tiltState&&(this.m_tiltState=this.currentTilt<x||this.m_tiltState===l.Down?l.Tilted:l.Down),this.m_tiltState}},{key:"currentZoom",get:function(){return void 0!==this.m_currentZoom?this.m_currentZoom:this.mapView.zoomLevel},set:function(e){this.m_currentZoom=e}},{key:"currentTilt",get:function(){return f.MathUtils.degToRad(this.mapView.tilt)},set:function(e){this.m_currentTilt=e}},{key:"targetedTilt",get:function(){return void 0===this.m_targetedTilt?void 0===this.m_currentTilt?this.currentTilt:this.m_currentTilt:this.m_targetedTilt}},{key:"assignZoomAfterTouchZoomRender",value:function(){this.m_currentZoom=this.mapView.zoomLevel,this.m_targetedZoom=this.mapView.zoomLevel,this.mapView.removeEventListener(h.MapViewEventNames.AfterRender,this.assignZoomAfterTouchZoomRender)}},{key:"stopExistingAnimations",value:function(){this.stopResetNorth(),this.stopZoom(),this.stopPan(),this.stopTilt()}},{key:"resetNorth",value:function(){var e=(performance.now()-this.m_resetNorthStartTime)/1e3;this.inertiaEnabled&&(this.m_resetNorthIsAnimated||(this.m_resetNorthIsAnimated=!0,this.mapView.addEventListener(h.MapViewEventNames.AfterRender,this.resetNorth)),e>this.m_resetNorthAnimationDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.stopResetNorth()):this.m_needsRenderLastFrame=!0);this.m_lastAzimuth=this.m_currentAzimuth,this.m_currentAzimuth=this.inertiaEnabled?this.easeOutCubic(this.m_startAzimuth,0,Math.min(1,e/this.m_resetNorthAnimationDuration)):0;var t=this.m_currentAzimuth-this.m_lastAzimuth;h.MapViewUtils.orbitAroundScreenPoint(this.mapView,{deltaAzimuth:t,maxTiltAngle:this.m_maxTiltAngle}),this.updateMapView()}},{key:"stopResetNorth",value:function(){this.mapView.removeEventListener(h.MapViewEventNames.AfterRender,this.resetNorth),this.m_resetNorthIsAnimated=!1}},{key:"tilt",value:function(){void 0!==this.m_tiltRequested&&(this.m_targetedTilt=Math.max(Math.min(this.m_tiltRequested,this.maxTiltAngle),0),this.m_tiltRequested=void 0);var e=!1;if(this.inertiaEnabled){this.m_tiltIsAnimated||(this.m_tiltIsAnimated=!0,this.mapView.addEventListener(h.MapViewEventNames.AfterRender,this.tilt));var t=performance.now();this.m_tiltAnimationTime=(t-this.m_tiltAnimationStartTime)/1e3,this.m_tiltAnimationTime>=this.tiltToggleDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.m_tiltAnimationTime=this.tiltToggleDuration,e=!0):this.m_needsRenderLastFrame=!0}this.m_currentTilt=this.inertiaEnabled?this.easeOutCubic(this.m_startTilt,this.targetedTilt,Math.min(1,this.m_tiltAnimationTime/this.tiltToggleDuration)):this.targetedTilt;var n=this.currentTilt,r=this.m_currentTilt-n;h.MapViewUtils.orbitAroundScreenPoint(this.mapView,{deltaTilt:r,maxTiltAngle:this.m_maxTiltAngle}),this.updateMapView(),e&&this.stopTilt()}},{key:"stopTilt",value:function(){this.mapView.removeEventListener(h.MapViewEventNames.AfterRender,this.tilt),this.m_tiltIsAnimated=!1,this.m_targetedTilt=this.m_currentTilt=void 0}},{key:"easeOutCubic",value:function(e,t,n){return e+(t-e)*(1-Math.pow(1-n,3))}},{key:"easeOutCirc",value:function(e,t,n){return e+(t-e)*Math.sqrt(1-Math.pow(n-1,2))}},{key:"handleZoom",value:function(){var e=!1;if(0!==this.m_zoomDeltaRequested&&(this.m_targetedZoom=Math.max(Math.min(this.zoomLevelTargeted+this.m_zoomDeltaRequested,this.maxZoomLevel),this.minZoomLevel),this.m_zoomDeltaRequested=0),this.inertiaEnabled&&this.zoomInertiaDampingDuration>0){this.m_zoomIsAnimated||(this.m_zoomIsAnimated=!0,this.mapView.addEventListener(h.MapViewEventNames.AfterRender,this.handleZoom));var t=performance.now();this.m_zoomAnimationTime=(t-this.m_zoomAnimationStartTime)/1e3,this.m_zoomAnimationTime>this.zoomInertiaDampingDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.m_zoomAnimationTime=this.zoomInertiaDampingDuration,e=!0,this.stopZoom()):this.m_needsRenderLastFrame=!0}this.currentZoom=!this.inertiaEnabled||Math.abs(this.zoomLevelTargeted-this.m_startZoom)<x?this.zoomLevelTargeted:this.easeOutCirc(this.m_startZoom,this.zoomLevelTargeted,Math.min(1,this.m_zoomAnimationTime/this.zoomInertiaDampingDuration));var n=h.MapViewUtils.zoomOnTargetPosition(this.mapView,this.m_zoomTargetNormalizedCoordinates.x,this.m_zoomTargetNormalizedCoordinates.y,this.currentZoom,this.m_maxTiltAngle);!e&&n||(this.m_targetedZoom=void 0,this.m_currentZoom=void 0),this.updateMapView()}},{key:"stopZoom",value:function(){this.mapView.removeEventListener(h.MapViewEventNames.AfterRender,this.handleZoom),this.m_zoomIsAnimated=!1}},{key:"handlePan",value:function(){if(this.m_state!==u.NONE||0!==this.m_lastAveragedPanDistanceOrAngle){this.inertiaEnabled&&!this.m_panIsAnimated&&(this.m_panIsAnimated=!0,this.mapView.addEventListener(h.MapViewEventNames.AfterRender,this.handlePan));var e=this.inertiaEnabled&&this.panInertiaDampingDuration>0&&this.m_state===u.NONE&&this.m_lastAveragedPanDistanceOrAngle>0;if(e){var t=performance.now();this.m_panAnimationTime=(t-this.m_panAnimationStartTime)/1e3,this.m_panAnimationTime>this.panInertiaDampingDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.m_panAnimationTime=this.panInertiaDampingDuration,this.mapView.removeEventListener(h.MapViewEventNames.AfterRender,this.handlePan),this.m_panIsAnimated=!1):this.m_needsRenderLastFrame=!0;var n=this.m_panAnimationTime/this.panInertiaDampingDuration;this.m_currentInertialPanningSpeed=this.easeOutCubic(this.m_lastAveragedPanDistanceOrAngle,0,Math.min(1,n)),0===this.m_currentInertialPanningSpeed&&(this.m_lastAveragedPanDistanceOrAngle=0),this.mapView.projection.type===d.ProjectionType.Planar?this.m_panDistanceFrameDelta.copy(this.m_lastPanVector).setLength(this.m_currentInertialPanningSpeed):this.mapView.projection.type===d.ProjectionType.Spherical&&this.m_rotateGlobeQuaternion.setFromAxisAngle(this.m_lastRotateGlobeAxis,this.m_currentInertialPanningSpeed).normalize()}else{var r=0;this.mapView.projection.type===d.ProjectionType.Planar?r=this.m_lastPanVector.copy(this.m_panDistanceFrameDelta).length():this.mapView.projection.type===d.ProjectionType.Spherical&&(r=this.m_lastRotateGlobeAngle,this.m_rotateGlobeQuaternion.setFromAxisAngle(this.m_lastRotateGlobeAxis,this.m_lastRotateGlobeAngle),this.m_rotateGlobeQuaternion.normalize()),this.m_currentPanDistanceOrAngleIndex=(this.m_currentPanDistanceOrAngleIndex+1)%5,this.m_recentPanDistancesOrAngles[this.m_currentPanDistanceOrAngleIndex]=r,this.m_lastAveragedPanDistanceOrAngle=this.m_recentPanDistancesOrAngles.reduce((function(e,t){return e+t}))/5}this.mapView.projection.type===d.ProjectionType.Planar?h.MapViewUtils.panCameraAboveFlatMap(this.mapView,this.m_panDistanceFrameDelta.x,this.m_panDistanceFrameDelta.y):this.mapView.projection.type===d.ProjectionType.Spherical&&h.MapViewUtils.panCameraAroundGlobe(this.mapView,this.m_lastRotateGlobeFromVector,this.m_tmpVector3.copy(this.m_lastRotateGlobeFromVector).applyQuaternion(this.m_rotateGlobeQuaternion)),e||(this.m_panDistanceFrameDelta.set(0,0,0),this.m_lastRotateGlobeAngle=0),this.updateMapView()}}},{key:"stopPan",value:function(){this.m_panDistanceFrameDelta.set(0,0,0),this.m_lastAveragedPanDistanceOrAngle=0}},{key:"bindInputEvents",value:function(e){var t=this.contextMenu.bind(this),n=this.mouseDown.bind(this),r=this.mouseWheel.bind(this),i=this.touchStart.bind(this),a=this.touchEnd.bind(this),o=this.touchMove.bind(this),s=this.mouseDoubleClick.bind(this);e.addEventListener("dblclick",s,!1),e.addEventListener("contextmenu",t,!1),e.addEventListener("mousedown",n,!1),e.addEventListener("wheel",r,!1),e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",a,!1),e.addEventListener("touchmove",o,!1),this.dispose=function(){e.removeEventListener("dblclick",s,!1),e.removeEventListener("contextmenu",t,!1),e.removeEventListener("mousedown",n,!1),e.removeEventListener("wheel",r,!1),e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchend",a,!1),e.removeEventListener("touchmove",o,!1)}}},{key:"updateMapView",value:function(){this.dispatchEvent(m),this.mapView.update()}},{key:"mouseDoubleClick",value:function(e){if(this.enabled&&this.zoomEnabled){var t=this.getPointerPosition(e);this.zoomOnDoubleClickOrTap(t.x,t.y)}}},{key:"mouseDown",value:function(e){if(!1!==this.enabled&&!e.shiftKey&&(e.stopPropagation(),this.m_state===u.NONE)){if(0===e.button&&!e.ctrlKey&&this.panEnabled)this.m_state=u.PAN;else if(1===e.button)this.m_state=u.ROTATE;else{if(2!==e.button&&!e.ctrlKey||!this.tiltEnabled)return;this.m_state=u.ORBIT}this.dispatchEvent(v);var t=this.getPointerPosition(e);if(this.m_lastMousePosition.copy(t),!0===e.altKey){var n=p.getWidthAndHeightFromCanvas(this.domElement),r=n.width,i=n.height;this.m_initialMousePosition.copy(p.calculateNormalizedDeviceCoordinates(t.x,t.y,r,i))}else h.CameraUtils.getPrincipalPoint(this.mapView.camera,this.m_initialMousePosition);var a=this.mouseMove.bind(this),o=this.mouseUp.bind(this);window.addEventListener("mousemove",a,!1),window.addEventListener("mouseup",o,!1),this.m_cleanupMouseEventListeners=function(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",o)}}}},{key:"mouseMove",value:function(e){if(!1!==this.enabled){var t=this.getPointerPosition(e);if(this.m_mouseDelta.set(t.x-this.m_lastMousePosition.x,t.y-this.m_lastMousePosition.y),this.m_state===u.PAN){var n=this.getWorldPositionWithElevation(this.m_lastMousePosition.x,this.m_lastMousePosition.y,t.x,t.y);if(void 0===n)return;var r=n.fromWorld,i=n.toWorld;this.panFromTo(r,i)}else this.m_state===u.ROTATE?(this.stopExistingAnimations(),h.MapViewUtils.rotate(this.mapView,-this.rotationMouseDeltaFactor*this.m_mouseDelta.x,this.rotationMouseDeltaFactor*this.m_mouseDelta.y,this.m_maxTiltAngle)):this.m_state===u.ORBIT&&(this.stopExistingAnimations(),h.MapViewUtils.orbitAroundScreenPoint(this.mapView,{center:this.m_tmpVector2.set(this.m_initialMousePosition.x,this.m_initialMousePosition.y),deltaAzimuth:this.orbitingMouseDeltaFactor*this.m_mouseDelta.x,deltaTilt:-this.orbitingMouseDeltaFactor*this.m_mouseDelta.y,maxTiltAngle:this.m_maxTiltAngle}));this.m_lastMousePosition.set(t.x,t.y),this.m_zoomAnimationStartTime=performance.now(),this.updateMapView(),e.preventDefault(),e.stopPropagation()}}},{key:"mouseUp",value:function(e){!1!==this.enabled&&(this.updateMapView(),e.preventDefault(),e.stopPropagation(),this.m_state=u.NONE,this.m_cleanupMouseEventListeners&&this.m_cleanupMouseEventListeners(),this.dispatchEvent(g))}},{key:"mouseWheel",value:function(e){if(this.enabled&&this.zoomEnabled){var t=p.getWidthAndHeightFromCanvas(this.domElement),n=t.width,r=t.height,i=p.calculateNormalizedDeviceCoordinates(e.offsetX,e.offsetY,n,r);this.setZoomLevel(this.mapView.zoomLevel-this.zoomLevelDeltaOnMouseWheel*Math.sign(e.deltaY),i),e.preventDefault(),e.stopPropagation()}}},{key:"updateCurrentRotation",value:function(){if(!(this.m_touchState.touches.length<2||0===this.m_touchState.touches[1].currentWorldPosition.length()||0===this.m_touchState.touches[0].currentWorldPosition.length())){var e=0,t=0;this.mapView.projection.type===d.ProjectionType.Planar?(e=this.m_touchState.touches[1].currentWorldPosition.x-this.m_touchState.touches[0].currentWorldPosition.x,t=this.m_touchState.touches[1].currentWorldPosition.y-this.m_touchState.touches[0].currentWorldPosition.y):this.mapView.projection.type===d.ProjectionType.Spherical&&(e=this.m_touchState.touches[1].currentTouchPoint.x-this.m_touchState.touches[0].currentTouchPoint.x,t=this.m_touchState.touches[0].currentTouchPoint.y-this.m_touchState.touches[1].currentTouchPoint.y,this.m_touchState.initialRotation=this.m_touchState.currentRotation),this.m_touchState.currentRotation=Math.atan2(t,e)}}},{key:"calculatePinchDistanceInWorldSpace",value:function(){if(this.m_touchState.touches.length<2)return 0;var e=this.m_tmpVector3.subVectors(this.m_touchState.touches[0].initialWorldPosition,this.m_touchState.touches[1].initialWorldPosition).length();return this.m_tmpVector3.subVectors(this.m_touchState.touches[0].currentWorldPosition,this.m_touchState.touches[1].currentWorldPosition).length()-e}},{key:"convertTouchPoint",value:function(e,t){var n=this.getPointerPosition(e);if(void 0!==t){var r=t.currentTouchPoint,i=this.getWorldPositionWithElevation(r.x,r.y,n.x,n.y),a=void 0===i?new f.Vector3:i.toWorld;return 0!==a.length()||3===this.m_touchState.touches.length&&this.tiltEnabled?(this.m_state!==u.TOUCH&&this.dispatchEvent(v),this.m_state=u.TOUCH,{currentTouchPoint:n,lastTouchPoint:n,currentWorldPosition:a,initialWorldPosition:a}):(this.setTouchState([]),this.m_state=u.NONE,void this.dispatchEvent(g))}var o=p.getWidthAndHeightFromCanvas(this.domElement),s=o.width,l=o.height,c=p.calculateNormalizedDeviceCoordinates(n.x,n.y,s,l),d=h.MapViewUtils.rayCastWorldCoordinates(this.mapView,c.x,c.y),m=null===d?new f.Vector3:d;return 0!==m.length()||3===this.m_touchState.touches.length&&this.tiltEnabled?(this.m_state!==u.TOUCH&&this.dispatchEvent(v),this.m_state=u.TOUCH,{currentTouchPoint:n,lastTouchPoint:n,currentWorldPosition:m,initialWorldPosition:m}):(this.setTouchState([]),this.m_state=u.NONE,void this.dispatchEvent(g))}},{key:"setTouchState",value:function(e){this.m_touchState.touches=[];for(var t=0;t<e.length;++t){var n=this.convertTouchPoint(e[t]);void 0!==n&&this.m_touchState.touches.push(n)}0!==this.m_touchState.touches.length&&(this.updateCurrentRotation(),this.m_touchState.initialRotation=this.m_touchState.currentRotation)}},{key:"updateTouches",value:function(e){for(var t=Math.min(e.length,this.m_touchState.touches.length),n=0;n<t;++n){var r=this.m_touchState.touches[n],i=this.convertTouchPoint(e[n],r);void 0!==i&&void 0!==r&&(i.initialWorldPosition=r.initialWorldPosition,i.lastTouchPoint=r.currentTouchPoint,this.m_touchState.touches[n]=i)}}},{key:"zoomOnDoubleClickOrTap",value:function(e,t){if(0!==this.zoomLevelDeltaOnDoubleClick){var n=p.getWidthAndHeightFromCanvas(this.domElement),r=n.width,i=n.height,a=p.calculateNormalizedDeviceCoordinates(e,t,r,i);this.setZoomLevel(this.currentZoom+this.zoomLevelDeltaOnDoubleClick,a)}}},{key:"touchStart",value:function(e){!1!==this.enabled&&(this.m_tapStartTime=performance.now(),this.m_fingerMoved=!1,this.m_state=u.TOUCH,this.dispatchEvent(v),this.setTouchState(e.touches),this.updateTouches(e.touches),e.preventDefault(),e.stopPropagation())}},{key:"touchMove",value:function(e){if(!1!==this.enabled){if(this.m_fingerMoved=!0,this.updateTouches(e.touches),this.panEnabled&&this.m_touchState.touches.length<=2&&void 0!==this.m_touchState.touches[0]&&this.panFromTo(this.m_touchState.touches[0].initialWorldPosition,this.m_touchState.touches[0].currentWorldPosition),2===this.m_touchState.touches.length){var t=this.m_touchState.touches,n=new f.Vector2;if(!0===this.zoomEnabled||!0===this.rotateEnabled){var r=p.getWidthAndHeightFromCanvas(this.domElement),i=r.width,a=r.height;t.forEach((function(e){var t=p.calculateNormalizedDeviceCoordinates(e.currentTouchPoint.x,e.currentTouchPoint.y,i,a);n.add(t)})),n.divideScalar(t.length)}if(this.zoomEnabled){var o=this.calculatePinchDistanceInWorldSpace();if(Math.abs(o)<x)return;var s=h.MapViewUtils.calculateZoomLevelFromDistance(this.mapView,this.mapView.targetDistance-o);h.MapViewUtils.zoomOnTargetPosition(this.mapView,n.x,n.y,s,this.m_maxTiltAngle)}if(this.rotateEnabled){this.updateCurrentRotation();var u=this.m_touchState.currentRotation-this.m_touchState.initialRotation;this.stopExistingAnimations(),h.MapViewUtils.orbitAroundScreenPoint(this.mapView,{center:this.m_tmpVector2.set(n.x,n.y),deltaAzimuth:u,maxTiltAngle:this.m_maxTiltAngle})}}if(3===this.m_touchState.touches.length&&this.tiltEnabled){var l=this.m_touchState.touches[0],c=this.m_tmpVector2.subVectors(l.currentTouchPoint,l.lastTouchPoint);this.stopExistingAnimations(),h.MapViewUtils.orbitAroundScreenPoint(this.mapView,{deltaAzimuth:this.orbitingTouchDeltaFactor*c.x,deltaTilt:-this.orbitingTouchDeltaFactor*c.y,maxTiltAngle:this.m_maxTiltAngle})}this.m_zoomAnimationStartTime=performance.now(),this.updateMapView(),e.preventDefault(),e.stopPropagation()}}},{key:"touchEnd",value:function(e){!1!==this.enabled&&(this.m_state=u.NONE,this.handleDoubleTap(),this.setTouchState(e.touches),this.dispatchEvent(g),this.updateMapView(),e.preventDefault(),e.stopPropagation())}},{key:"handleDoubleTap",value:function(){if(!this.m_fingerMoved&&this.zoomEnabled){var e=performance.now();if(!(e-this.m_tapStartTime>120))return this.m_isDoubleTap?(e-this.m_lastSingleTapTime>1e3*this.doubleTapTime||this.zoomOnDoubleClickOrTap(this.m_touchState.touches[0].currentTouchPoint.x,this.m_touchState.touches[0].currentTouchPoint.y),void(this.m_isDoubleTap=!1)):(this.m_isDoubleTap=!0,void(this.m_lastSingleTapTime=e))}}},{key:"contextMenu",value:function(e){e.preventDefault()}},{key:"getWorldPositionWithElevation",value:function(e,t,n,r){var i,a,o,s=p.getWidthAndHeightFromCanvas(this.domElement),u=s.width,l=s.height,c=p.calculateNormalizedDeviceCoordinates(e,t,u,l),d=p.calculateNormalizedDeviceCoordinates(n,r,u,l);if(void 0!==this.mapView.elevationProvider&&(o=this.mapView.elevationProvider.rayCast(e,t)),void 0===o)a=h.MapViewUtils.rayCastWorldCoordinates(this.mapView,c.x,c.y),i=h.MapViewUtils.rayCastWorldCoordinates(this.mapView,d.x,d.y);else{a=o;var f=this.mapView.projection.unprojectAltitude(a);i=h.MapViewUtils.rayCastWorldCoordinates(this.mapView,d.x,d.y,f)}if(null!==a&&null!==i)return{fromWorld:a,toWorld:i}}},{key:"panFromTo",value:function(e,t){this.stopExistingAnimations(),this.m_panAnimationStartTime=performance.now(),this.mapView.projection.type===d.ProjectionType.Planar?this.m_panDistanceFrameDelta.subVectors(e,t):this.mapView.projection.type===d.ProjectionType.Spherical&&(this.m_lastRotateGlobeFromVector.copy(e),this.m_lastRotateGlobeAxis.crossVectors(e,t).normalize(),this.m_lastRotateGlobeAngle=e.angleTo(t),isNaN(this.m_lastRotateGlobeAngle)&&(this.m_lastRotateGlobeAngle=0)),this.handlePan()}},{key:"getPointerPosition",value:function(e){var t=p.getWidthAndHeightFromCanvas(this.domElement),n=this.domElement.getBoundingClientRect(),r=Math.round(n.width)/t.width,i=Math.round(n.height)/t.height;return new f.Vector2((e.clientX-Math.floor(n.left))*r,(e.clientY-Math.floor(n.top))*i)}}],[{key:"create",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new n(e,t)}}]),n}(h.EventDispatcher);t.MapControls=_},73530:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapControlsUI=void 0;var a=n(31201),o=n(48991),s=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.controls=t,this.domElement=document.createElement("div"),this.m_buttonsElement=document.createElement("div"),this.m_zoomLevelElement=null,this.m_projectionSwitchElement=null,this.m_onMapViewRenderEvent=function(){if(null!==n.m_zoomLevelElement){var e=n.controls.zoomLevelTargeted.toFixed(1);"INPUT"===n.m_zoomLevelElement.tagName?n.m_zoomLevelElement.value=e:n.m_zoomLevelElement.innerHTML=e}},this.m_onWindowClick=function(e){var t=n.m_zoomLevelElement;e&&e.target&&e.target.contains&&e.target!==t&&!e.target.contains(t)&&t.blur()};var s=document.createElement("span");s.className="harp-gl_v-align",this.domElement.appendChild(s),this.m_buttonsElement=document.createElement("div"),this.m_buttonsElement.className="harp-gl_v-aligned",this.domElement.appendChild(this.m_buttonsElement);var u=document.createElement("button");u.innerText="+",u.className="harp-gl_controls_button-top",u.classList.add("harp-gl_controls-button");var l=document.createElement("button");l.innerText="-",l.className="harp-gl_controls_button-bottom",l.classList.add("harp-gl_controls-button");var c=document.createElement("button");c.innerText="3D",c.id="harp-gl_controls_tilt-button-ui",c.title="Toggle tilt",c.classList.add("harp-gl_controls-button"),c.classList.add("harp-gl_controls_button-bottom");var d=document.createElement("button");d.id="harp-gl_controls-button_compass",d.title="Reset North",d.classList.add("harp-gl_controls-button"),d.classList.add("harp-gl_controls_button-top");var h=document.createElement("span");if(h.id="harp-gl_controls_compass",d.appendChild(h),"show"===i.zoomLevel)this.m_zoomLevelElement=document.createElement("div"),t.mapView.addEventListener(o.MapViewEventNames.Render,this.m_onMapViewRenderEvent);else if("input"===i.zoomLevel){var f=document.createElement("input");f.type="number",f.step="0.1",t.mapView.addEventListener(o.MapViewEventNames.Render,this.m_onMapViewRenderEvent);var p=function(e){t.setZoomLevel(parseFloat(f.value)),e.preventDefault()};f.addEventListener("blur",p),f.addEventListener("keypress",(function(e){"Enter"===e.key&&p(e)})),window.addEventListener("click",this.m_onWindowClick),this.m_zoomLevelElement=f}if(i.projectionSwitch){var m=document.createElement("button");m.id="harp-gl_controls_switch_projection",m.classList.add("harp-gl_controls-button");var v=function(){return"Switch to ".concat(n.controls.mapView.projection.type===a.ProjectionType.Spherical?"flat":"globe"," projection")};m.title=v();var g='\n    <svg style="margin-top:5px;" stroke-width="2" class="harp-gl_controls_switch_svg" width="50" height="50" viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\n        <ellipse ry="9.79855" rx="4.56139" id="svg_6" cy="11.99798" cx="11.99798" fill="none"/>\n        <line id="svg_8" y2="8.16866" x2="21.12086" y1="8.16866" x1="3.10044"/>\n        <line id="svg_9" y2="16.10887" x2="21.0645" y1="16.10887" x1="3.04409"/>\n        <ellipse id="svg_11" ry="9.79855" rx="9.82671" cy="11.94167" cx="12.02614" fill="none"/>\n    </svg>',y='\n    <svg style="margin-top:5px;" class="harp-gl_controls_switch_svg" width="25" height="25" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\n        <rect id="svg_1" stroke-width="2" height="13.51524" width="18.35821" y="5.80349" x="3.21307" fill="none"/>\n        <path id="svg_14" d="m9.52018,7.71815l1.2357,-0.0032l-0.61945,1.18258l-0.61625,-1.17938z"/>\n        <path id="svg_15" d="m4.11409,7.32396l3.65718,-0.0032l0.28156,2.13991l-2.59042,1.57678l0.50682,1.80203l2.25254,0.8447l-0.90101,2.0836l0.28157,2.25254l-3.26619,-3.04093l0.67576,-2.02728l-0.61945,-1.97097l-1.01364,-3.15356l0.73528,-0.50362z"/>\n        <path id="svg_17" d="m13.23688,7.4929l2.02409,-0.0032l0.78839,1.29521l2.47779,-1.35152l2.75936,0.78839l0,1.57678l-0.73208,0.61945l-0.28157,1.97097c0,0 -0.67256,0.8479 -0.72888,0.90422c-0.05631,0.05631 0.28157,1.06996 0.33788,1.18258c0.05631,0.11263 -1.68941,-1.35152 -1.6926,-1.35472c-0.0032,-0.0032 -0.16574,1.29841 -0.16894,1.29521c-0.0032,-0.0032 -1.57358,-1.34832 -1.57678,-1.35152c-0.0032,-0.0032 -0.72888,0.67896 -0.73208,0.67576c-0.0032,-0.0032 -0.8415,-0.67256 -0.8447,-0.67576c-0.0032,-0.0032 0.73528,2.0868 0.79159,2.0868c0.05631,0 -0.50682,3.20987 -0.51002,3.20667c-0.0032,-0.0032 -1.2357,-0.16574 -1.34832,-0.16574c-0.11263,0 -0.95733,-1.52046 -0.90102,-1.57678c0.05631,-0.05631 0,-1.80203 -0.0032,-1.80523c-0.0032,-0.0032 -1.40464,-0.33468 -1.40784,-0.33788c-0.0032,-0.0032 -0.05311,-1.74252 -0.05631,-1.74572c-0.0032,-0.0032 1.18578,-0.8415 1.18258,-0.8447c-0.0032,-0.0032 1.69261,-0.16574 1.74892,-0.16574c0.05631,0 1.2389,-1.06996 1.2357,-1.07316c-0.0032,-0.0032 -1.91146,-0.10943 -1.91466,-0.11263c-0.0032,-0.0032 -1.96777,0.17214 -1.97097,0.16894c-0.0032,-0.0032 1.52366,-3.20667 1.52366,-3.20667z"/>\n    </svg>';m.innerHTML=this.controls.mapView.projection.type===a.ProjectionType.Spherical?y:g,m.addEventListener("click",(function(){n.controls.mapView.projection=n.controls.mapView.projection.type===a.ProjectionType.Spherical?a.mercatorProjection:a.sphereProjection,m.title=v(),m.innerHTML=n.controls.mapView.projection.type===a.ProjectionType.Spherical?y:g})),this.m_projectionSwitchElement=m}return this.m_buttonsElement.appendChild(u),null!==this.m_zoomLevelElement&&this.m_buttonsElement.appendChild(this.m_zoomLevelElement),this.m_buttonsElement.appendChild(l),this.m_buttonsElement.appendChild(d),this.m_buttonsElement.appendChild(c),null!==this.m_projectionSwitchElement&&this.m_buttonsElement.appendChild(this.m_projectionSwitchElement),u.addEventListener("click",(function(e){var n=t.zoomLevelTargeted+t.zoomLevelDeltaOnControl;t.setZoomLevel(n)})),u.addEventListener("dblclick",(function(e){e.stopPropagation()})),l.addEventListener("click",(function(e){var n=t.zoomLevelTargeted-t.zoomLevelDeltaOnControl;t.setZoomLevel(n)})),l.addEventListener("dblclick",(function(e){e.stopPropagation()})),c.addEventListener("click",(function(e){t.toggleTilt()})),d.addEventListener("click",(function(e){t.pointToNorth()})),t.mapView.addEventListener(o.MapViewEventNames.AfterRender,(function(){h.style.transform="rotate(".concat(t.mapView.heading,"deg)")})),this.domElement.className="harp-gl_controls",null!==this.m_zoomLevelElement&&this.m_zoomLevelElement.classList.add("harp-gl_controls_zoom-level"),!0!==i.disableDefaultStyle&&(this.initStyle(),this.domElement.style.cssText="\n                position: absolute;\n                right: 5px;\n                top: 0;\n                height: 100%; /* Vertical alignment is done dynamically, in the rest of the CSS. */\n                pointer-events: none; /* Allows to click the map even though height is 100%. */\n            "),this}return i(e,[{key:"projectionSwitchElement",get:function(){return this.m_projectionSwitchElement}},{key:"dispose",value:function(){null!==this.m_zoomLevelElement&&"INPUT"===this.m_zoomLevelElement.tagName&&window.removeEventListener("click",this.m_onWindowClick),this.controls.mapView.removeEventListener(o.MapViewEventNames.Render,this.m_onMapViewRenderEvent),this.domElement.remove()}},{key:"initStyle",value:function(){if(null===document.getElementById("here-harp-controls.map-controls-ui-styles")){var e=document.createElement("style");e.id="here-harp-controls.map-controls-ui-styles",e.appendChild(document.createTextNode('\n        /* CSS trick to align another div dynamically. */\n        .harp-gl_v-align{\n            height: 100%;\n            display: inline-block;\n            vertical-align: middle;\n        }\n        /* The target element to align vertically with vertical-align. */\n        .harp-gl_v-aligned{\n            pointer-events: all;\n            vertical-align: middle;\n            display: inline-block;\n        }\n        .harp-gl_controls-button {\n            display: block;\n            background-color: #272d37;\n            width: 40px;\n            height: 40px;\n            font-size: 22px;\n            font-weight: bold;\n            outline: none;\n            margin:0;\n            border: none;\n            color: rgba(255, 255, 255, 0.8);\n            cursor: pointer;\n            border-radius: 4px;\n            box-shadow: 0px 0px 5px 0 hsl(220, 4%, 40%);\n            transition: all 0.1s;\n            padding: 0 0 1px 1px;\n            user-select: none;\n            position:relative;\n        }\n        #harp-gl_controls_tilt-button-ui {\n            font-size: 16px;\n        }\n        .harp-gl_controls-button:active {\n            background-color: #37afaa;\n            color: #eee;\n        }\n        .harp-gl_controls-button:focus {\n            outline:none;\n        }\n        .harp-gl_controls_button-top{\n            margin-bottom:0;\n            border-bottom-right-radius:0;\n            border-bottom-left-radius:0;\n        }\n        .harp-gl_controls_button-bottom{\n            margin-top:1px;\n            border-top-right-radius:0;\n            border-top-left-radius:0;\n        }\n        .harp-gl_controls_zoom-level {\n            display: block;\n            background-color: #fff;\n            width: 40px;\n            height: 20px;\n            font-size: 12px;\n            font-weight: bold;\n            outline: none;\n            border: none;\n            color: #555;\n            opacity: 0.87;\n            box-shadow: 0px 0px 4px #aaa;\n            padding: 2px 0 0;\n            text-align: center;\n            user-select: text;\n        }\n        input.harp-gl_controls_zoom-level::-webkit-outer-spin-button,\n        input.harp-gl_controls_zoom-level::-webkit-inner-spin-button {\n            /* display: none; <- Crashes Chrome on hover */\n            -webkit-appearance: none;\n            margin: 0; /* <-- Apparently some margin are still there even though it\'s hidden */\n        }\n        input.harp-gl_controls_zoom-level[type=number] {\n            -moz-appearance:textfield; /* Firefox */\n        }\n        #harp-gl_controls-button_compass{\n            overflow: hidden;\n            margin: 5px 0 0 0;\n        }\n        #harp-gl_controls_compass{\n            pointer-events:none;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            margin:0\n        }\n        #harp-gl_controls_compass::after{\n            content: " ";\n            position:absolute;\n            left:50%;\n            margin-left:-3px;\n            top:50%;\n            margin-top: -18px;\n            border:solid 3px rgba(0,0,0,0);\n            border-bottom:solid 15px #a34f2e;\n        }\n        #harp-gl_controls_compass::before{\n            content: " ";\n            position:absolute;\n            left:50%;\n            margin-left:-3px;\n            top:50%;\n            margin-top:0px;\n            border:solid 3px rgba(0,0,0,0);\n            border-top:solid 15px #eee;\n        }\n        #harp-gl_controls_switch_projection{\n            margin-top:5px;\n        }\n        .harp-gl_controls_switch_svg{\n            width: 25px;\n            height: 25px;\n            stroke: #d4d5d7;\n            fill: #d4d5d7;\n        }\n    ')),document.head.appendChild(e)}}}]),e}();t.MapControlsUI=s},53161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWidthAndHeightFromCanvas=t.safeParseDecimalInt=t.azimuthAltitudeToDirection=t.calculateNormalizedDeviceCoordinates=void 0;var r=n(34585);function i(e,t){if(null===e||void 0===e||""===e)return t;if(!e.match(a))return t;var n=Number.parseInt(e,10);return isNaN(n)?t:n}t.calculateNormalizedDeviceCoordinates=function(e,t,n,i){return new r.Vector2(e/n*2-1,-t/i*2+1)},t.azimuthAltitudeToDirection=function(e,t){e=e,t=t;var n=new r.Vector3,i=Math.cos(t);return n.setX(Math.sin(e)*i),n.setY(Math.cos(e)*i),n.setZ(Math.sin(t)),n},t.safeParseDecimalInt=i;var a=/^\d+$/;t.getWidthAndHeightFromCanvas=function(e){return{width:i(e.style.width,e.clientWidth),height:i(e.style.height,e.clientHeight)}}},36676:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(81315),t),i(n(44659),t),i(n(4917),t)},81315:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DataProvider=void 0,n(89064);var s=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).m_clients=new Set,e}return i(n,[{key:"register",value:function(e){return 0===this.m_clients.size&&(this.m_connectPromise=this.connect()),this.m_clients.add(e),this.m_connectPromise}},{key:"unregister",value:function(e){this.m_clients.delete(e)&&0===this.m_clients.size&&this.dispose()}}]),n}(n(34585).EventDispatcher);t.DataProvider=s},44659:function(e,t,n){"use strict";var r=n(319).default,i=n(87757),a=n(48926).default,o=n(81506).default,s=n(2205).default,u=n(99842).default,l=n(34575).default,c=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileDataSource=t.TileFactory=void 0;var d=n(48991),h=n(30081),f=n(15739),p=n(4917),m=function(){function e(t){l(this,e),this.m_modelConstructor=t}return c(e,[{key:"create",value:function(e,t){var n=new this.m_modelConstructor(e,t);return n.tileLoader=new p.TileLoader(e,t,e.dataProvider(),e.decoder),n}}]),e}();t.TileFactory=m;var v=function(e){s(n,e);var t=u(n);function n(e,r){var i,a,s;if(l(this,n),(i=t.call(this,r)).m_tileFactory=e,i.m_options=r,i.logger=f.LoggerManager.instance.create("TileDataSource"),i.m_isReady=!1,r.decoder)i.m_decoder=r.decoder;else{if(!r.concurrentDecoderServiceName)throw new Error("TileDataSource[".concat(i.name,"]: unable to create, missing decoder or ")+"concurrentDecoderServiceName");i.m_decoder=d.ConcurrentDecoderFacade.getTileDecoder(r.concurrentDecoderServiceName,r.concurrentDecoderScriptUrl,r.concurrentDecoderWorkerCount,r.workerConnectionTimeout)}return i.useGeometryLoader=!0,i.cacheable=!0,i.m_unregisterClearTileCache=null===(s=(a=i.dataProvider()).onDidInvalidate)||void 0===s?void 0:s.call(a,(function(){return i.mapView.markTilesDirty(o(i))})),i}return c(n,[{key:"dispose",value:function(){var e;null===(e=this.m_unregisterClearTileCache)||void 0===e||e.call(this),this.decoder.dispose(),this.dataProvider().unregister(this)}},{key:"ready",value:function(){return this.m_isReady&&this.m_options.dataProvider.ready()}},{key:"decoder",get:function(){return this.m_decoder}},{key:"connect",value:function(){var e=a(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.m_options.dataProvider.register(this),this.m_decoder.connect()]);case 2:this.m_isReady=!0,t={},void 0!==this.m_options.storageLevelOffset&&(t={storageLevelOffset:this.m_options.storageLevelOffset}),this.m_decoder.configure({languages:this.languages},t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLanguages",value:function(e){this.languages=e,this.m_decoder.configure({languages:this.languages}),this.mapView.clearTileCache(this.name)}},{key:"setTheme",value:function(){var e=a(i.mark((function e(t,n){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.ThemeLoader.load(t);case 2:t=e.sent,void 0!==this.styleSetName&&void 0!==t.styles&&(r=t.styles[this.styleSetName]),void 0!==n&&(this.languages=n),void 0!==r&&(this.m_decoder.configure({styleSet:r,definitions:t.definitions,priorities:t.priorities,labelPriorities:t.labelPriorities,languages:n}),this.mapView.clearTileCache(this.name));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"dataProvider",value:function(){return this.m_options.dataProvider}},{key:"getTilingScheme",value:function(){return this.m_options.tilingScheme}},{key:"getTile",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.m_tileFactory.create(this,e);return i.copyrightInfo=this.m_options.copyrightInfo,void 0!==this.m_options.copyrightProvider&&this.m_options.copyrightProvider.getCopyrights(i.geoBox,e.level).then((function(e){i.copyrightInfo=void 0===i.copyrightInfo?e:[].concat(r(i.copyrightInfo),r(e)),t.requestUpdate()})),n||i.load(),i}},{key:"getTileInfo",value:function(e){var t=this;return new Promise((function(n,r){var i=new p.TileInfoLoader(t,e,t.m_options.dataProvider,t.decoder);i.loadAndDecode().then((function(e){e===d.TileLoaderState.Ready?n(i.tileInfo):r(new Error("TileDataSource#getInfoTile wrong final state: ".concat(e)))}))}))}}]),n}(d.DataSource);t.TileDataSource=v},4917:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileInfoLoader=t.TileLoader=void 0,n(89064);var s=n(26309),u=n(48991),l=n(44097),c=n(15739).LoggerManager.instance.create("TileLoader"),d=function(e){a(n,e);var t=o(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e,i)).dataSource=e,s.tileKey=i,s.dataProvider=a,s.tileDecoder=o,s}return i(n,[{key:"priority",get:function(){return this.m_priority},set:function(e){this.m_priority=e,void 0!==this.requestController&&(this.requestController.priority=e)}},{key:"loadImpl",value:function(e,t,n){var r=this;this.dataProvider.getTile(this.tileKey,e).then((function(i){if(e.aborted){var a=new Error("Aborted");throw a.name="AbortError",a}r.onLoaded(i,t,n)})).catch((function(e){"AbortError"!==e.name&&"AbortError: Aborted"!==e.message&&n(e)}))}},{key:"cancelImpl",value:function(){this.state===l.TileLoaderState.Decoding&&this.requestController&&(this.requestController.abort(),this.requestController=void 0)}},{key:"startDecodeTile",value:function(e,t){var n=this,r=this.payload;if(void 0!==r){this.state=l.TileLoaderState.Decoding,this.payload=void 0;var i=new s.RequestController(this.priority);this.requestController=i;var a=this.dataSource;this.tileDecoder.decodeTile(r,this.tileKey,a.projection,i).then((function(t){i.signal.aborted||n.onDecoded(t,e)})).catch((function(e){"AbortError"!==e.name&&"AbortError: Aborted"!==e.message&&t(e)}))}else c.error("TileLoader#startDecodeTile: Cannot decode without payload")}},{key:"onLoaded",value:function(e,t,n){this.state=l.TileLoaderState.Loaded,this.payload=e,0===e.byteLength||e.constructor===Object&&0===Object.keys(e).length?this.onDecoded({geometries:[],techniques:[]},t):this.startDecodeTile(t,n)}},{key:"onDecoded",value:function(e,t){this.decodedTile=e,t(l.TileLoaderState.Ready)}}]),n}(u.BaseTileLoader);t.TileLoader=d;var h=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"startDecodeTile",value:function(e,t){var n=this,r=this.payload;if(void 0!==r){this.state=l.TileLoaderState.Decoding,this.payload=void 0;var i=new s.RequestController(this.priority);this.requestController=i;var a=this.dataSource;this.tileDecoder.getTileInfo(r,this.tileKey,a.projection,i).then((function(t){i.signal.aborted||(n.tileInfo=t,e(l.TileLoaderState.Ready))})).catch((function(e){"AbortError"!==e.name&&"AbortError: Aborted"!==e.message&&t(e)}))}else c.error("TileInfoLoader#startDecodeTile: Cannot decode without payload")}}]),n}(d);t.TileInfoLoader=h},48991:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57721),t),i(n(31941),t),i(n(31221),t),i(n(20899),t),i(n(64172),t),i(n(45480),t),i(n(37119),t),i(n(86550),t),i(n(12324),t),i(n(58635),t),i(n(56951),t),i(n(52210),t),i(n(34495),t),i(n(8140),t),i(n(53509),t),i(n(87378),t),i(n(49046),t),i(n(26436),t),i(n(71690),t),i(n(13412),t),i(n(47857),t),i(n(17682),t),i(n(80821),t),i(n(41483),t),i(n(89644),t),i(n(44097),t),i(n(21317),t),i(n(89849),t),i(n(10018),t),i(n(29001),t),i(n(65312),t),i(n(64873),t),i(n(3457),t),i(n(12918),t),i(n(92980),t),i(n(61086),t),i(n(6549),t),i(n(91422),t),i(n(92301),t),i(n(40449),t),i(n(4509),t),i(n(24856),t),i(n(30081),t),i(n(67247),t),i(n(56300),t),i(n(27555),t),i(n(61563),t),i(n(3236),t),i(n(2391),t),i(n(56367),t),i(n(53687),t)},57721:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedExtrusionHandler=t.AnimatedExtrusionState=void 0;var o,s=n(26309),u=n(85164),l=n(15739);!function(e){e[e.None=0]="None",e[e.Started=1]="Started",e[e.Finished=2]="Finished"}(o=t.AnimatedExtrusionState||(t.AnimatedExtrusionState={}));var c=function(){function e(t){i(this,e),this.m_mapView=t,this.enabled=!0,this.duration=750,this.m_minZoomLevel=1,this.m_forceEnabled=!1,this.m_dataSourceMap=new Map,this.m_state=o.None,this.m_startTime=-1}return a(e,[{key:"forceEnabled",get:function(){return this.m_forceEnabled},set:function(e){this.m_forceEnabled=e,this.duration=750}},{key:"minZoomLevel",get:function(){return this.m_minZoomLevel}},{key:"setAnimationProperties",value:function(e,t){if(!s.isExtrudedPolygonTechnique(e))return!1;if(e.hasOwnProperty("minZoomLevel")&&(this.m_minZoomLevel=e.minZoomLevel),this.forceEnabled)return this.enabled;void 0!==e.animateExtrusionDuration&&(this.duration=e.animateExtrusionDuration);var n=s.getPropertyValue(e.animateExtrusion,t);return null===n?this.enabled:"boolean"===typeof n?n:"number"===typeof n&&0!==n}},{key:"update",value:function(e){var t=this.m_dataSourceMap.size>0&&e>=this.m_minZoomLevel;this.m_state===o.None&&t?this.m_state=o.Started:this.m_state===o.None||t||this.resetAnimation(!0),this.animateExtrusion()}},{key:"add",value:function(e,t){e.addDisposeCallback(this.removeTile.bind(this));var n=!1;this.m_state!==o.None&&((n=this.skipAnimation(e))?this.setTileExtrusionRatio(t,1):this.m_state===o.Finished&&this.resetAnimation(!1)),this.getOrCreateTileMap(e.dataSource).set(e.tileKey.mortonCode(),{materials:t,animated:n})}},{key:"isAnimating",get:function(){return this.m_state!==o.Finished&&this.m_state!==o.None}},{key:"getTileMap",value:function(e){return this.m_dataSourceMap.get(e)}},{key:"getOrCreateTileMap",value:function(e){var t=this.m_dataSourceMap.get(e);return t||(t=new Map,this.m_dataSourceMap.set(e,t)),t}},{key:"skipAnimation",value:function(e){return this.wasAnyAncestorAnimated(e)||this.wasAnyDescendantAnimated(e)}},{key:"wasAnyAncestorAnimated",value:function(e){var t,n,r=e.dataSource.getDataZoomLevel(this.m_minZoomLevel),i=Math.max(0,e.tileKey.level-r),a=Math.min(i,this.m_mapView.visibleTileSet.options.quadTreeSearchDistanceUp),o=this.getTileMap(e.dataSource);if(!o)return!1;for(var s=e.tileKey,u=1;u<=a;++u)if(s=s.parent(),null!==(n=null===(t=o.get(s.mortonCode()))||void 0===t?void 0:t.animated)&&void 0!==n&&n)return!0;return!1}},{key:"wasAnyDescendantAnimated",value:function(e){var t,n,i=e.dataSource.maxDataLevel-e.tileKey.level,a=Math.min(i,this.m_mapView.visibleTileSet.options.quadTreeSearchDistanceDown),o=this.getTileMap(e.dataSource);if(!o)return!1;for(var s=e.dataSource.getTilingScheme(),u=[e.tileKey],l=[],c=1;c<=a;++c){l.length=0;var d,h=r(u);try{for(h.s();!(d=h.n()).done;){var f,p=d.value,m=r(s.getSubTileKeys(p));try{for(m.s();!(f=m.n()).done;){var v=f.value;if(null!==(n=null===(t=o.get(v.mortonCode()))||void 0===t?void 0:t.animated)&&void 0!==n&&n)return!0;l.push(v)}}catch(y){m.e(y)}finally{m.f()}}}catch(y){h.e(y)}finally{h.f()}var g=[l,u];u=g[0],l=g[1]}return!1}},{key:"removeTile",value:function(e){var t=this.getTileMap(e.dataSource);t&&(t.delete(e.tileKey.mortonCode()),0===t.size&&this.m_dataSourceMap.delete(e.dataSource))}},{key:"animateExtrusion",value:function(){if(this.m_state===o.Started){var e=Date.now();this.m_startTime<0&&(this.m_startTime=e);var t=this.duration,n=Math.min(e-this.m_startTime,t),r=l.MathUtils.easeInOutCubic(u.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN,u.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX,n/t);this.setExtrusionRatio(r),n>=t&&(this.m_state=o.Finished),this.m_mapView.update()}}},{key:"resetAnimation",value:function(e){this.m_state=o.None,this.m_startTime=-1,e&&this.m_dataSourceMap.forEach((function(e){e.forEach((function(e){e.animated=!1}))}))}},{key:"setExtrusionRatio",value:function(e){var t=this;this.m_dataSourceMap.forEach((function(n){n.forEach((function(n){n.animated||(t.setTileExtrusionRatio(n.materials,e),e>=1&&(n.animated=!0))}))}))}},{key:"setTileExtrusionRatio",value:function(e,t){e.forEach((function(e){e.extrusionRatio=t}))}}]),e}();t.AnimatedExtrusionHandler=c},49417:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundDataSource=void 0;var l=n(31201),c=n(87378),d=n(23350),h=n(67247),f=function(e){s(n,e);var t=u(n);function n(){var e;return a(this,n),(e=t.call(this,{name:"background"})).m_tilingScheme=n.DEFAULT_TILING_SCHEME,e.cacheable=!0,e.addGroundPlane=!0,e.enablePicking=!1,e}return o(n,[{key:"updateStorageLevelOffset",value:function(){var e,t=this;this.mapView.dataSources.forEach((function(n){n!==t&&(n.getTilingScheme()===t.m_tilingScheme&&(e=void 0===e?n.storageLevelOffset:Math.max(e,n.storageLevelOffset)))})),void 0===e&&(e=0),e!==this.storageLevelOffset&&(this.storageLevelOffset=e,this.mapView.clearTileCache(this.name))}},{key:"setTheme",value:function(){var e=i(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mapView.clearTileCache(this.name);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setTilingScheme",value:function(e){var t=null!==e&&void 0!==e?e:n.DEFAULT_TILING_SCHEME;t!==this.m_tilingScheme&&(this.m_tilingScheme=t,this.updateStorageLevelOffset(),this.mapView.clearTileCache(this.name))}},{key:"getTilingScheme",value:function(){return this.m_tilingScheme}},{key:"getTile",value:function(e){var t=new h.Tile(this,e);return t.forceHasGeometry(!0),d.addGroundPlane(t,n.GROUND_RENDER_ORDER),t}}]),n}(c.DataSource);t.BackgroundDataSource=f,f.GROUND_RENDER_ORDER=Number.MIN_SAFE_INTEGER,f.DEFAULT_TILING_SCHEME=l.webMercatorTilingScheme},31941:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTileLoader=void 0;var a=n(15739),o=n(44097),s=a.LoggerManager.instance.create("BaseTileLoader"),u=function(){function e(t,n){r(this,e),this.dataSource=t,this.tileKey=n,this.state=o.TileLoaderState.Initialized,this.m_priority=0,this.loadAbortController=new AbortController}return i(e,[{key:"priority",get:function(){return this.m_priority},set:function(e){this.m_priority=e}},{key:"loadAndDecode",value:function(){switch(this.state){case o.TileLoaderState.Loading:case o.TileLoaderState.Loaded:case o.TileLoaderState.Decoding:return this.donePromise;case o.TileLoaderState.Ready:case o.TileLoaderState.Failed:case o.TileLoaderState.Initialized:case o.TileLoaderState.Canceled:return this.load(),this.donePromise}}},{key:"waitSettled",value:function(){return this.donePromise?this.donePromise:Promise.resolve(this.state)}},{key:"cancel",value:function(){this.state===o.TileLoaderState.Loading&&(this.loadAbortController.abort(),this.loadAbortController=new AbortController),this.cancelImpl(),this.onDone(o.TileLoaderState.Canceled)}},{key:"isFinished",get:function(){return this.state===o.TileLoaderState.Ready||this.state===o.TileLoaderState.Canceled||this.state===o.TileLoaderState.Failed}},{key:"cancelImpl",value:function(){}},{key:"load",value:function(){var e=this;this.loadImpl(this.loadAbortController.signal,this.onDone.bind(this),this.onError.bind(this)),void 0===this.donePromise&&(this.donePromise=new Promise((function(t,n){e.resolveDonePromise=t,e.rejectedDonePromise=n}))),this.state=o.TileLoaderState.Loading}},{key:"onDone",value:function(e){this.resolveDonePromise&&e===o.TileLoaderState.Ready?this.resolveDonePromise(e):this.rejectedDonePromise&&this.rejectedDonePromise(e),this.resolveDonePromise=void 0,this.rejectedDonePromise=void 0,this.donePromise=void 0,this.state=e}},{key:"onError",value:function(e){if(this.state!==o.TileLoaderState.Canceled){var t=this.dataSource;s.error("[".concat(t.name,"]: failed to load tile ").concat(this.tileKey.mortonCode()),e),this.error=e,this.onDone(o.TileLoaderState.Failed)}}}]),e}();t.BaseTileLoader=u},31221:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BoundsGenerator=void 0;var a=n(31201),o=n(80057),s=n(32344),u=function(){function e(t){r(this,e),this.m_view=t,this.createViewBounds()}return i(e,[{key:"generate",value:function(){return this.m_view.projection!==this.m_viewBounds.projection&&this.createViewBounds(),this.m_viewBounds.generate()}},{key:"createViewBounds",value:function(){this.m_viewBounds=this.m_view.projection.type===a.ProjectionType.Planar?new o.PlaneViewBounds(this.m_view.camera,this.m_view.projection,this.m_view):new s.SphereViewBounds(this.m_view.camera,this.m_view.projection)}}]),e}();t.BoundsGenerator=u},20899:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CameraMovementDetector=void 0;var a=n(34585),o=n(61563),s=function(){function e(t,n,i){var o=this;r(this,e),this.m_throttlingTimeout=t,this.m_movementStartedFunc=n,this.m_movementFinishedFunc=i,this.m_lastCameraPos=new a.Vector3,this.m_newCameraPos=new a.Vector3,this.m_throttlingTimerId=void 0,this.m_movementDetectorDeadline=0,this.onDeadlineTimer=function(){o.m_throttlingTimerId=void 0;var e=performance.now();e>=o.m_movementDetectorDeadline?o.movementFinished():o.startMovementFinishedTimer(e)},void 0===this.m_throttlingTimeout&&(this.m_throttlingTimeout=300)}return i(e,[{key:"checkCameraMoved",value:function(e,t){var n=o.MapViewUtils.extractAttitude(e,e.camera),r=e.camera.getWorldPosition(this.m_newCameraPos);if(void 0===this.m_lastAttitude)return this.m_lastCameraPos.copy(r),this.m_lastAttitude=n,!1;var i=!this.m_lastCameraPos.equals(r)||n.yaw!==this.m_lastAttitude.yaw||n.pitch!==this.m_lastAttitude.pitch||n.roll!==this.m_lastAttitude.roll;return i&&(this.m_lastCameraPos.copy(r),this.m_lastAttitude=n),i!==this.m_cameraMovedLastFrame&&(i&&this.movementStarted(),this.m_cameraMovedLastFrame=i),i&&(this.m_movementDetectorDeadline=t+this.m_throttlingTimeout,this.startMovementFinishedTimer(t)),this.m_cameraMovedLastFrame}},{key:"clear",value:function(e){var t=e.camera.getWorldPosition(this.m_newCameraPos);this.m_lastCameraPos.set(t.x,t.y,t.z);var n=o.MapViewUtils.extractAttitude(e,e.camera);this.m_lastAttitude=n}},{key:"forceMoved",value:function(){this.m_lastCameraPos.set(Number.NaN,Number.NaN,Number.NaN)}},{key:"cameraIsMoving",get:function(){return void 0!==this.m_throttlingTimerId}},{key:"dispose",value:function(){this.removeMovementFinishedTimer(),this.m_movementStartedFunc=void 0,this.m_movementFinishedFunc=void 0}},{key:"cameraMovedLastFrame",get:function(){return!0===this.m_cameraMovedLastFrame}},{key:"movementStarted",value:function(){void 0!==this.m_movementStartedFunc&&this.m_movementStartedFunc()}},{key:"movementFinished",value:function(){this.removeMovementFinishedTimer(),void 0!==this.m_movementFinishedFunc&&this.m_movementFinishedFunc()}},{key:"startMovementFinishedTimer",value:function(e){if(void 0===this.m_throttlingTimerId){var t=Math.max(0,this.m_movementDetectorDeadline-e);this.m_throttlingTimerId=setTimeout(this.onDeadlineTimer,t)}}},{key:"removeMovementFinishedTimer",value:function(){void 0!==this.m_throttlingTimerId&&(clearTimeout(this.m_throttlingTimerId),this.m_throttlingTimerId=void 0)}}]),e}();t.CameraMovementDetector=s},64172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraUtils=void 0;var r=n(15739),i=n(34585),a=n(71690);function o(e,t,n){return r.assert(e>0,"Focal length must be larger than 0"),Math.atan((1-t)*n*.5/e)}function s(e,t,n){return r.assert(e>0,"Focal length must be larger than 0"),0===t?2*Math.atan(.5*n/e):o(e,t,n)+o(e,-t,n)}function u(e){return e.userData.fovs}function l(e,t,n,r,u){var l,d=r*e.aspect,h=s(n,t.x,d);(h<a.MIN_FOV_RAD||h>a.MAX_FOV_RAD)&&(u=s(c(h=i.MathUtils.clamp(h,a.MIN_FOV_RAD,a.MAX_FOV_RAD),d,t.x),t.y,r));if(e.fov=i.MathUtils.radToDeg(u),0===(l=t).x&&0===l.y)delete e.userData.fovs;else{var f=r*e.aspect;e.userData.fovs={top:o(n,t.y,r),right:o(n,t.x,f),horizontal:h}}e.userData.focalLength=n}function c(e,t,n){var i=t/2;if(0===n)return i/Math.tan(e/2);var a=Math.pow(n,2);if(Math.abs(e-Math.PI/2)<1e-6)return i*Math.sqrt(1-a);var o=Math.tan(e),s=i*(1+Math.sign(o)*Math.sqrt(1+Math.pow(o,2)*(1-a)))/o;return r.assert(s>=0,"Focal length must be larger than 0"),s}!function(e){function t(e){var t;return null===(t=e.userData)||void 0===t?void 0:t.focalLength}function n(e){return i.MathUtils.degToRad(e.fov)}function r(e,t,r){t=i.MathUtils.clamp(t,a.MIN_FOV_RAD,a.MAX_FOV_RAD);var s=o(e);return l(e,s,c(t,r,s.y),r,t),n(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector2;return t.x=-e.projectionMatrix.elements[8],t.y=-e.projectionMatrix.elements[9],t}function d(e){var t,n;return null!==(n=null===(t=u(e))||void 0===t?void 0:t.horizontal)&&void 0!==n?n:2*Math.atan(Math.tan(i.MathUtils.degToRad(e.fov)/2)*e.aspect)}function h(e){var t,n;return null!==(n=null===(t=u(e))||void 0===t?void 0:t.top)&&void 0!==n?n:i.MathUtils.degToRad(e.fov/2)}function f(e){var t,n;return null!==(n=null===(t=u(e))||void 0===t?void 0:t.right)&&void 0!==n?n:d(e)/2}e.getFocalLength=t,e.setFocalLength=function(e,n,i){var u=o(e),c=s(n,u.y,i);return c<a.MIN_FOV_RAD||c>a.MAX_FOV_RAD?r(e,c,i):l(e,u,n,i,c),t(e)},e.getVerticalFov=n,e.setVerticalFov=r,e.convertWorldToScreenSize=function(e,t,n){return e*n/t},e.convertScreenToWorldSize=function(e,t,n){return t*n/e},e.getPrincipalPoint=o,e.setPrincipalPoint=function(e,t){var n=e.aspect,r=.999999;e.setViewOffset(n,1,-i.MathUtils.clamp(t.x,-.999999,r)*n/2,1*i.MathUtils.clamp(t.y,-.999999,r)/2,n,1)},e.getHorizontalFov=d,e.getTopFov=h,e.getBottomFov=function(e){return i.MathUtils.degToRad(e.fov)-h(e)},e.getRightFov=f,e.getLeftFov=function(e){var t;return void 0!==(null===(t=u(e))||void 0===t?void 0:t.right)?d(e)-f(e):d(e)/2}}(t.CameraUtils||(t.CameraUtils={}))},45480:function(e,t,n){"use strict";var r=n(2205).default,i=n(99842).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultClipPlanesEvaluator=t.TiltViewClipPlanesEvaluator=t.TopViewClipPlanesEvaluator=t.ElevationBasedClipPlanesEvaluator=void 0;var s,u=n(31201),l=n(15739),c=n(34585),d=n(64172),h=n(61563),f=1e-6;!function(e){var t=[new c.Vector3,new c.Vector3],n=new c.Raycaster,r=new c.Sphere(new c.Vector3,u.EarthConstants.EQUATORIAL_RADIUS);function i(e,t){return e-t<f?0:Math.sqrt(e*e-t*t)}e.getFarDistanceFromElevatedHorizon=function(t,n,r,a){var o=i(n,r),s=i(a,r),u=Math.asin(r/n),l=Math.abs(u-e.getNormalToFwdAngle(t));return Math.cos(l)*(o+s)},e.getProjNearPlaneTanDistance=function(e,n,r){var i=e.getWorldDirection(t[0]),a=t[1].copy(i).multiplyScalar(-r).sub(e.position),o=a.dot(i);return o/a.length()>Math.cos(n)?o:void 0},e.getProjSphereIntersectionDistance=function(e,i,a){n.setFromCamera(i,e),r.radius=a;var o=n.ray.intersectSphere(r,t[0]);return null!==o?o.sub(e.position).dot(e.getWorldDirection(t[1])):void 0},e.getNormalToFwdAngle=function(e){var n=t[0].copy(e.position).negate().normalize().dot(e.getWorldDirection(t[1]));return Math.acos(c.MathUtils.clamp(n,-1,1))}}(s||(s={}));var p=function(){function e(t,n){a(this,e),l.assert(t>=n),this.m_minElevation=n,this.m_maxElevation=t}return o(e,[{key:"maxElevation",get:function(){return this.m_maxElevation},set:function(e){this.m_maxElevation=e,this.m_minElevation=Math.min(e,this.m_minElevation)}},{key:"minElevation",get:function(){return this.m_minElevation},set:function(e){this.m_minElevation=e,this.m_maxElevation=Math.max(e,this.m_maxElevation)}}]),e}();t.ElevationBasedClipPlanesEvaluator=p;var m=function(e){r(n,e);var t=i(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.EarthConstants.MAX_BUILDING_HEIGHT,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.05,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6;a(this,n),(e=t.call(this,r,i)).nearMin=o,e.nearFarMarginRatio=s,e.farMaxRatio=d,e.m_tmpVectors=[new c.Vector3,new c.Vector3,new c.Vector3],e.m_tmpQuaternion=new c.Quaternion,l.assert(o>0),l.assert(s>=0),l.assert(d>1);var h=s*o;return e.m_minimumViewRange={near:o,far:o+h,minimum:e.nearMin,maximum:Math.max(o*d,o+h)},e}return o(n,[{key:"evaluateClipPlanes",value:function(e,t,n){l.assert(e instanceof c.PerspectiveCamera,"Unsupported camera type.");var r=e;return t.type===u.ProjectionType.Spherical?this.evaluateDistanceSphericalProj(r,t,n):t.type===u.ProjectionType.Planar?this.evaluateDistancePlanarProj(r,t,n):(l.assert(!1,"Unsupported projection type"),Object.assign({},this.minimumViewRange))}},{key:"minimumViewRange",get:function(){return this.m_minimumViewRange}},{key:"evaluateDistancePlanarProj",value:function(e,t,n){l.assert(t.type!==u.ProjectionType.Spherical);var r=this.nearMin,i=this.nearMin*this.farMaxRatio,a=t.groundDistance(e.position),o=a*this.farMaxRatio;r=a-this.maxElevation,i=a-this.minElevation,r=Math.max(r,this.nearMin),i=Math.min(i,o);var s=this.nearFarMarginRatio*(r+i)/2;return{near:r=Math.max(r-s/2,this.nearMin),far:i=Math.max(i+s/2,r+s),minimum:this.nearMin,maximum:Math.max(o,i)}}},{key:"evaluateDistanceSphericalProj",value:function(e,t,n){l.assert(t.type===u.ProjectionType.Spherical);var r=t.groundDistance(e.position),i=r-this.maxElevation,a=u.EarthConstants.EQUATORIAL_RADIUS,o=Math.max(f,e.position.length()),d=Math.asin(a/o),p=c.MathUtils.degToRad(e.fov/2);e.aspect>1&&(p=h.MapViewUtils.calculateHorizontalFovByVerticalFov(2*p,e.aspect));var m=a+this.maxElevation,v=s.getFarDistanceFromElevatedHorizon(e,o,a,m),g=p>d?v:this.getFovBasedFarPlane(e,o,a,2*p,t),y=r-this.minElevation,x=r*this.farMaxRatio;i=Math.max(i,this.nearMin),g=Math.max(g,y);var _=this.nearFarMarginRatio*(i+g)/2;return{near:i=Math.max(i-_/2,this.nearMin),far:g=Math.max(g+_/2,i+_),minimum:this.nearMin,maximum:x}}},{key:"getFovBasedFarPlane",value:function(e,t,n,r,i){var a=e.position;e.matrixWorld.extractBasis(this.m_tmpVectors[0],this.m_tmpVectors[1],this.m_tmpVectors[2]),this.m_tmpQuaternion.setFromAxisAngle(this.m_tmpVectors[0],r/2);var o=this.m_tmpVectors[2],s=this.m_tmpVectors[1].copy(o).applyQuaternion(this.m_tmpQuaternion),u=a.dot(s);if(u<0)return i.groundDistance(e.position)*this.farMaxRatio;var c=a.dot(a)-u*u,d=n*n;return l.assert(c<=d,"Please use this evaluator only for top view camera poses."),u-Math.sqrt(d-c)}}]),n}(p);t.TopViewClipPlanesEvaluator=m;var v=function(e){r(n,e);var t=i(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).m_tmpV2=new c.Vector2,e}return o(n,[{key:"evaluateDistancePlanarProj",value:function(e,t,n){l.assert(t.type!==u.ProjectionType.Spherical);var r=Object.assign({},this.minimumViewRange),i=Math.PI/2-f,a=t.groundDistance(e.position),o=h.MapViewUtils.extractCameraTilt(e,t),s=d.CameraUtils.getTopFov(e),p=d.CameraUtils.getBottomFov(e),m=c.MathUtils.clamp(o+s,-i,i),v=c.MathUtils.clamp(o-p,-i,i),g=Math.max(0,(a-this.minElevation)/Math.cos(m)),y=Math.max(0,(a-this.maxElevation)/Math.cos(v));return r.near=y*Math.cos(p),r.far=g*Math.cos(s),this.applyViewRangeConstraints(r,e,t,n)}},{key:"evaluateDistanceSphericalProj",value:function(e,t,n){l.assert(t.type===u.ProjectionType.Spherical);var r=Object.assign({},this.minimumViewRange);return r.near=this.computeNearDistSphericalProj(e,t),r.far=this.computeFarDistSphericalProj(e,t),this.applyViewRangeConstraints(r,e,t,n)}},{key:"computeNearDistSphericalProj",value:function(e,t){l.assert(t.type===u.ProjectionType.Spherical);var n=t.groundDistance(e.position)-this.maxElevation;if(n<=0)return 0;var r=u.EarthConstants.EQUATORIAL_RADIUS+this.maxElevation,i=d.CameraUtils.getBottomFov(e),a=s.getProjNearPlaneTanDistance(e,i,r);if(void 0!==a)return a;d.CameraUtils.getPrincipalPoint(e,this.m_tmpV2);var o=this.m_tmpV2.y>0,c=s.getProjSphereIntersectionDistance(e,this.m_tmpV2.setComponent(1,-1),r),h=o?s.getProjSphereIntersectionDistance(e,this.m_tmpV2.setComponent(1,1),r):1/0,f=Math.min(null!==c&&void 0!==c?c:1/0,null!==h&&void 0!==h?h:1/0);return l.assert(f!==1/0,"No reference point for near distance found"),null!==f&&void 0!==f?f:n}},{key:"computeFarDistSphericalProj",value:function(e,t){l.assert(t.type===u.ProjectionType.Spherical);var n=u.EarthConstants.EQUATORIAL_RADIUS,r=n+this.minElevation,i=n+this.maxElevation,a=e.position.length();d.CameraUtils.getPrincipalPoint(e,this.m_tmpV2);var o=this.m_tmpV2.x<=0?1:-1,c=this.m_tmpV2.y>0,h=s.getProjSphereIntersectionDistance(e,this.m_tmpV2.set(o,1),r),f=c?s.getProjSphereIntersectionDistance(e,this.m_tmpV2.set(o,-1),r):0,p=Math.max(null!==h&&void 0!==h?h:1/0,null!==f&&void 0!==f?f:1/0);return p!==1/0?p:s.getFarDistanceFromElevatedHorizon(e,a,n,i)}},{key:"applyViewRangeConstraints",value:function(e,t,n,r){var i=h.MapViewUtils.getTargetAndDistance(n,t,r).distance,a=n.groundDistance(t.position)-this.minElevation,o=i*this.farMaxRatio;e.near=Math.max(e.near,this.nearMin),e.far=c.MathUtils.clamp(e.far,a,o);var s=this.nearFarMarginRatio*(e.near+e.far)/2;return e.near=Math.max(e.near-s/2,this.nearMin),e.far=Math.max(e.far+s/2,e.near+s),e.minimum=this.nearMin,e.maximum=o,e}}]),n}(m);t.TiltViewClipPlanesEvaluator=v;t.createDefaultClipPlanesEvaluator=function(){return new v}},37119:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ColorCache=void 0;var a=n(34585),o=function(){function e(){r(this,e),this.m_map=new Map}return i(e,[{key:"getColor",value:function(e){"number"===typeof e&&(e="#"+e.toString(16).padStart(6,"0"));var t=this.m_map.get(e);return void 0!==t||(t=new a.Color(e),this.m_map.set(e,t)),t}},{key:"size",get:function(){return this.m_map.size}},{key:"clear",value:function(){this.m_map.clear()}}],[{key:"instance",get:function(){return this.m_instance}}]),e}();t.ColorCache=o,o.m_instance=new o},12324:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ConcurrentDecoderFacade=void 0;var a=n(17703),o=n(2391),s=function(){function e(){r(this,e)}return i(e,null,[{key:"getTileDecoder",value:function(e,t,n,r){var i=this.getWorkerSet(t,n,r);return new o.WorkerBasedDecoder(i,e)}},{key:"getWorkerSet",value:function(e,t,n){void 0===e&&(e=this.defaultScriptUrl);var r=this.workerSets[e];if(void 0===r){var i=void 0!==n?1e3*n:void 0;r=new a.ConcurrentWorkerSet({scriptUrl:e,workerCount:null!==t&&void 0!==t?t:this.defaultWorkerCount,workerConnectionTimeout:i}),this.workerSets[e]=r}return r}},{key:"destroyWorkerSet",value:function(e){var t=this.workerSets[e];void 0!==t&&(t.destroy(),delete this.workerSets[e])}},{key:"destroy",value:function(){var e=this;Object.keys(this.workerSets).forEach((function(t){e.workerSets[t].destroy()})),this.workerSets={}}},{key:"destroyIfTerminated",value:function(){var t=this,n=!0;Object.keys(this.workerSets).forEach((function(e){t.workerSets[e].terminated||(n=!1)})),n&&e.destroy()}}]),e}();t.ConcurrentDecoderFacade=s,s.defaultScriptUrl="./decoder.bundle.js",s.defaultWorkerCount=void 0,s.workerSets={}},58635:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ConcurrentTilerFacade=void 0;var a=n(17703),o=n(56367),s=function(){function e(){r(this,e)}return i(e,null,[{key:"getTiler",value:function(e,t,n,r){var i=this.getWorkerSet(t,n,r);return new o.WorkerBasedTiler(i,e)}},{key:"getWorkerSet",value:function(e,t,n){void 0===e&&(e=this.defaultScriptUrl);var r=this.workerSets[e];if(void 0===r){var i=void 0!==n?1e3*n:void 0;r=new a.ConcurrentWorkerSet({scriptUrl:e,workerCount:null!==t&&void 0!==t?t:this.defaultWorkerCount,workerConnectionTimeout:i}),this.workerSets[e]=r}return r}},{key:"destroyWorkerSet",value:function(e){var t=this.workerSets[e];void 0!==t&&(t.destroy(),delete this.workerSets[e])}},{key:"destroy",value:function(){var e=this;Object.keys(this.workerSets).forEach((function(t){e.workerSets[t].destroy()})),this.workerSets={}}},{key:"destroyIfTerminated",value:function(){var t=this,n=!0;Object.keys(this.workerSets).forEach((function(e){t.workerSets[e].terminated||(n=!1)})),n&&e.destroy()}}]),e}();t.ConcurrentTilerFacade=s,s.defaultScriptUrl="./decoder.bundle.js",s.defaultWorkerCount=1,s.workerSets={}},17703:function(e,t,n){"use strict";var r=n(43269).default,i=n(87757),a=n(48926).default,o=n(319).default,s=n(34575).default,u=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ConcurrentWorkerSet=t.DEFAULT_WORKER_INITIALIZATION_TIMEOUT=t.isLoggingMessage=void 0;var l=n(26309),c=n(15739),d=n(34585),h=n(53687),f=c.LoggerManager.instance.create("ConcurrentWorkerSet");function p(e){return e&&"number"===typeof e.level&&e.type===c.WORKERCHANNEL_MSG_TYPE}t.isLoggingMessage=p;t.DEFAULT_WORKER_INITIALIZATION_TIMEOUT=1e4;var m=function(){function e(t){var n=this;s(this,e),this.m_options=t,this.m_workerChannelLogger=c.LoggerManager.instance.create("WorkerChannel"),this.m_eventListeners=new Map,this.m_workers=new Array,this.m_availableWorkers=new Array,this.m_workerPromises=new Array,this.m_readyPromises=new Map,this.m_requests=new Map,this.m_workerRequestQueue=[],this.m_nextMessageId=0,this.m_stopped=!0,this.m_referenceCount=0,this.onWorkerMessage=function(e,t){var r,i,a,s,u,d;if(l.WorkerServiceProtocol.isResponseMessage(t.data)){var h=t.data;if(null===h.messageId)return void f.error("[".concat(n.m_options.scriptUrl,"]: Bad ResponseMessage: no messageId"));var m=n.m_requests.get(h.messageId);if(void 0===m)return void f.error("[".concat(n.m_options.scriptUrl,"]: Bad ResponseMessage: invalid messageId"));if(e>=0&&e<n.m_workers.length){var v=n.m_workers[e];n.m_availableWorkers.push(v),n.checkWorkerRequestQueue()}else f.error("[".concat(n.m_options.scriptUrl,"]: onWorkerMessage: invalid workerId"));if(void 0!==h.errorMessage){var g=new Error(h.errorMessage);void 0!==h.errorStack&&(g.stack=h.errorStack),m.resolver(g)}else m.resolver(void 0,h.response)}else if(l.WorkerServiceProtocol.isInitializedMessage(t.data)){var y=n.getReadyPromise(t.data.service);++y.count===n.m_workerPromises.length&&y.resolve()}else if(p(t.data))switch(t.data.level){case c.LogLevel.Trace:(r=n.m_workerChannelLogger).trace.apply(r,o(t.data.message));break;case c.LogLevel.Debug:(i=n.m_workerChannelLogger).debug.apply(i,o(t.data.message));break;case c.LogLevel.Log:(a=n.m_workerChannelLogger).log.apply(a,o(t.data.message));break;case c.LogLevel.Info:(s=n.m_workerChannelLogger).info.apply(s,o(t.data.message));break;case c.LogLevel.Warn:(u=n.m_workerChannelLogger).warn.apply(u,o(t.data.message));break;case c.LogLevel.Error:(d=n.m_workerChannelLogger).error.apply(d,o(t.data.message))}else n.eventHandler(t)},this.start()}return u(e,[{key:"addReference",value:function(){this.m_referenceCount+=1,1===this.m_referenceCount&&this.m_stopped&&this.start()}},{key:"removeReference",value:function(){this.m_referenceCount-=1,0===this.m_referenceCount&&this.destroy()}},{key:"start",value:function(e){var n=this;if(void 0!==e&&(this.m_options=e),!this.m_stopped)throw new Error("ConcurrentWorker set already started");this.m_workerCount=c.getOptionValue(this.m_options.workerCount,"undefined"!==typeof navigator&&void 0!==navigator.hardwareConcurrency?d.MathUtils.clamp(navigator.hardwareConcurrency-1,1,2):void 0,2);for(var r=c.getOptionValue(this.m_options.workerConnectionTimeout,t.DEFAULT_WORKER_INITIALIZATION_TIMEOUT),i=function(e){var t=h.WorkerLoader.startWorker(n.m_options.scriptUrl,r).then((function(t){var r=function(t){n.onWorkerMessage(e,t)};return t.addEventListener("message",r),n.m_workers.push(t),n.m_availableWorkers.push(t),{worker:t,listener:r}}));n.m_workerPromises.push(t)},a=0;a<this.m_workerCount;++a)i(a);this.m_stopped=!1}},{key:"workerCount",get:function(){return this.m_workerCount}},{key:"stop",value:function(){var e=a(i.mark((function e(){var t=this;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.m_stopped=!0,e.next=3,this.waitForAllResponses().then((function(){t.terminateWorkers()}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.m_stopped=!0,this.m_requests.forEach((function(e){e.resolver(new Error("worker destroyed"))})),this.m_requests.clear(),this.m_workerRequestQueue=[],this.terminateWorkers(),this.m_eventListeners.clear()}},{key:"terminated",get:function(){return 0===this.m_workers.length}},{key:"connect",value:function(){var e=a(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureStarted(),e.next=3,Promise.all(this.m_workerPromises);case 3:return e.next=5,this.getReadyPromise(t).promise;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addEventListener",value:function(e,t){this.m_eventListeners.set(e,t)}},{key:"removeEventListener",value:function(e){this.m_eventListeners.delete(e)}},{key:"invokeRequest",value:function(e,t,n,r){var i=this;this.ensureStarted();var a,o=this.m_nextMessageId++,s=new Promise((function(e,t){a=function(n,r){i.m_requests.delete(o),void 0!==n?t(n):e(r)}}));this.m_requests.set(o,{promise:s,resolver:a});var u={service:e,type:l.WorkerServiceProtocol.ServiceMessageName.Request,messageId:o,request:t};return this.postRequestMessage(u,n,r),s}},{key:"broadcastRequest",value:function(e,t,n){var i,a=this,o=[],s=r(this.m_workers);try{var u=function(){var r=i.value,s=a.m_nextMessageId++,u=void 0,c=new Promise((function(e,t){u=function(n,r){a.m_requests.delete(s),void 0!==n?t(n):e(r)}}));o.push(c),a.m_requests.set(s,{promise:c,resolver:u});var d={service:e,type:l.WorkerServiceProtocol.ServiceMessageName.Request,messageId:s,request:t};void 0!==n?r.postMessage(d,n):r.postMessage(d)};for(s.s();!(i=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}return Promise.all(o)}},{key:"broadcastMessage",value:function(e,t){this.ensureStarted(),void 0!==t?this.m_workers.forEach((function(n){return n.postMessage(e,t)})):this.m_workers.forEach((function(t){return t.postMessage(e)}))}},{key:"requestQueueSize",get:function(){return this.m_workerRequestQueue.length}},{key:"numWorkers",get:function(){return this.m_workers.length}},{key:"numIdleWorkers",get:function(){return this.m_availableWorkers.length}},{key:"eventHandler",value:function(e){"string"===typeof e.data.type&&this.dispatchEvent(e.data.type,e)}},{key:"postRequestMessage",value:function(e,t,n){if(this.ensureStarted(),0===this.m_workers.length)throw new Error("ConcurrentWorkerSet#postMessage: no workers started");if(void 0!==n&&n.signal.aborted){var r=this.m_requests.get(e.messageId);if(void 0===r)return void f.error("[".concat(this.m_options.scriptUrl,"]: Bad RequestMessage: invalid messageId"));var i=new Error("Aborted");return i.name="AbortError",void r.resolver(i,void 0)}if(this.m_availableWorkers.length>0){var a=this.m_availableWorkers.pop();void 0!==t?a.postMessage(e,t):a.postMessage(e)}else void 0===n&&(n=new l.RequestController(0)),0===n.priority&&(n.priority=-this.m_nextMessageId),this.m_workerRequestQueue.unshift({message:e,buffers:t,requestController:n})}},{key:"ensureStarted",value:function(){if(this.m_stopped)throw new Error("ConcurrentWorkerSet stopped")}},{key:"waitForAllResponses",value:function(){var e=a(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Array,this.m_requests.forEach((function(e){t.push(e.promise)})),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispatchEvent",value:function(e,t){var n=this.m_eventListeners.get(e);void 0!==n&&n(t)}},{key:"terminateWorkers",value:function(){this.m_workerPromises.forEach((function(e){e.then((function(e){void 0!==e&&(e.worker.removeEventListener("message",e.listener),e.worker.terminate())}))})),this.m_workers=[],this.m_workerPromises=[],this.m_availableWorkers=[],this.m_readyPromises.clear()}},{key:"getReadyPromise",value:function(e){var t=this,n=this.m_readyPromises.get(e);if(void 0!==n)return n;var r={count:0,promise:void 0,resolve:function(){},reject:function(e){r.error=e},error:void 0};return r.promise=new Promise((function(e,n){var i=r;void 0!==i.error?n(i.error):i.count===t.m_workerPromises.length&&e(),i.resolve=e,i.reject=n})),this.m_readyPromises.set(e,r),r}},{key:"checkWorkerRequestQueue",value:function(){if(0!==this.m_workerRequestQueue.length&&0!==this.m_availableWorkers.length)for(this.m_workerRequestQueue.sort((function(e,t){return e.requestController.priority-t.requestController.priority}));this.m_availableWorkers.length>0&&this.m_workerRequestQueue.length>0;){var e=this.m_workerRequestQueue.pop();this.postRequestMessage(e.message,e.buffers,e.requestController)}}}]),e}();t.ConcurrentWorkerSet=m},87378:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0;var l=n(46704),c=n(15739),d=n(34585),h=c.LoggerManager.instance.create("DataSource"),f=function(e){s(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,n),(e=t.call(this)).UPDATE_EVENT={type:"update"},e.enabled=!0,e.cacheable=!1,e.useGeometryLoader=!1,e.addGroundPlane=!1,e.minDataLevel=1,e.maxDataLevel=20,e.minDisplayLevel=1,e.maxDisplayLevel=20,e.allowOverlappingTiles=!0,e.enablePicking=!0,e.dataSourceOrder=0,e.exprPool=new l.ExprPool,e.m_maxGeometryHeight=0,e.m_minGeometryHeight=0,e.m_storageLevelOffset=0,e.m_featureStateMap=new Map;var i=r.name,o=r.styleSetName,s=r.languages,u=r.minZoomLevel,c=r.maxZoomLevel,d=r.minDataLevel,h=r.maxDataLevel,f=r.minDisplayLevel,p=r.maxDisplayLevel,m=r.storageLevelOffset,v=r.allowOverlappingTiles,g=r.enablePicking,y=r.minGeometryHeight,x=r.maxGeometryHeight,_=r.dataSourceOrder;return void 0!==i&&0!==i.length||(i="anonymous-datasource#".concat(++n.uniqueNameCounter)),e.name=i,e.styleSetName=o,void 0!==s&&(e.languages=s),void 0!==d&&(e.minDataLevel=d),void 0!==h&&(e.maxDataLevel=h),void 0!==u&&(e.minZoomLevel=u),void 0!==c&&(e.maxZoomLevel=c),void 0!==f&&(e.minDisplayLevel=f),void 0!==p&&(e.maxDisplayLevel=p),void 0!==m&&(e.m_storageLevelOffset=m),void 0!==v&&(e.allowOverlappingTiles=v),void 0!==g&&(e.enablePicking=g),void 0!==y&&(e.minGeometryHeight=y),void 0!==x&&(e.maxGeometryHeight=x),_&&(e.dataSourceOrder=_),e}return o(n,[{key:"getFeatureState",value:function(e){return this.m_featureStateMap.get(e)}},{key:"clearFeatureState",value:function(){this.m_featureStateMap.clear()}},{key:"setFeatureState",value:function(e,t){this.m_featureStateMap.set(e,t)}},{key:"removeFeatureState",value:function(e){this.m_featureStateMap.delete(e)}},{key:"styleSetName",get:function(){return this.m_styleSetName},set:function(e){e!==this.m_styleSetName&&(this.m_styleSetName=e,this.clearCache(),this.requestUpdate())}},{key:"dispose",value:function(){}},{key:"clearCache",value:function(){}},{key:"isFullyCovering",value:function(){return this.addGroundPlane}},{key:"ready",value:function(){return!0}},{key:"mapView",get:function(){if(void 0===this.m_mapView)throw new Error("This DataSource was not added to MapView");return this.m_mapView}},{key:"projection",get:function(){return this.mapView.projection}},{key:"connect",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"attach",value:function(e){this.m_mapView=e}},{key:"detach",value:function(e){c.assert(this.m_mapView===e),this.m_mapView=void 0}},{key:"isDetached",value:function(){return void 0===this.m_mapView}},{key:"setTheme",value:function(){var e=i(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setLanguages",value:function(e){this.languages=e}},{key:"setPoliticalView",value:function(e){}},{key:"updateTile",value:function(e){}},{key:"shouldPreloadTiles",value:function(){return!1}},{key:"minZoomLevel",get:function(){return h.warn("DataSource.minZoomLevel is deprecated. Use minDataLevel and maxDataLevel instead."),this.minDataLevel},set:function(e){h.warn("DataSource.minZoomLevel is deprecated. Use minDataLevel and minDisplayLevel instead."),this.minDataLevel=e}},{key:"maxZoomLevel",get:function(){return h.warn("DataSource.maxZoomLevel is deprecated. Use maxDataLevel and maxDisplayLevel instead."),this.maxDataLevel},set:function(e){h.warn("DataSource.maxZoomLevel is deprecated. Use maxDataLevel and maxDisplayLevel instead."),this.maxDataLevel=e}},{key:"maxGeometryHeight",get:function(){return this.m_maxGeometryHeight},set:function(e){this.m_maxGeometryHeight=e}},{key:"minGeometryHeight",get:function(){return this.m_minGeometryHeight},set:function(e){this.m_minGeometryHeight=e}},{key:"storageLevelOffset",get:function(){return this.m_storageLevelOffset},set:function(e){this.m_storageLevelOffset=e}},{key:"setEnableElevationOverlay",value:function(e){}},{key:"getDataZoomLevel",value:function(e){return d.MathUtils.clamp(e+this.m_storageLevelOffset,this.minDataLevel,this.maxDataLevel)}},{key:"isVisible",value:function(e){return e>=this.minDisplayLevel&&e<=this.maxDisplayLevel}},{key:"canGetTile",value:function(e,t){return t.level<=e}},{key:"shouldSubdivide",value:function(e,t){return t.level<=e}},{key:"shouldRenderText",value:function(e,t){return!0}},{key:"requestUpdate",value:function(){this.dispatchEvent(this.UPDATE_EVENT)}}]),n}(d.EventDispatcher);t.DataSource=f,f.uniqueNameCounter=0},60396:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.debugContext=t.DebugContext=void 0;var s=n(34585),u="undefined"===typeof window,l=function(e){a(n,e);var t=o(n);function n(e){var i;return r(this,n),(i=t.call(this)).value=e,i}return i(n,[{key:"set",value:function(e,t){this.value=e,this.dispatchEvent({type:n.SET_EVENT_TYPE,name:t,value:e})}}]),n}(s.EventDispatcher);l.SET_EVENT_TYPE="set";var c=function(){function e(){(r(this,e),this.m_optionsMap=new Map,!u&&"undefined"!==typeof window&&window)&&(window.__debugContext=this)}return i(e,[{key:"setValue",value:function(e,t){var n=this.m_optionsMap.get(e);n?n.set(t,e):(n=new l(t),this.m_optionsMap.set(e,n))}},{key:"getValue",value:function(e){var t=this.m_optionsMap.get(e);return t?t.value:void 0}},{key:"hasOption",value:function(e){return void 0!==this.m_optionsMap.get(e)}},{key:"addEventListener",value:function(e,t){var n=this.m_optionsMap.get(e);if(!n)throw Error("Unknown option: "+e);n.addEventListener(l.SET_EVENT_TYPE,t)}},{key:"hasEventListener",value:function(e,t){var n=this.m_optionsMap.get(e);if(n)return n.hasEventListener(l.SET_EVENT_TYPE,t);throw Error("Unknown option: "+e)}},{key:"removeEventListener",value:function(e,t){var n=this.m_optionsMap.get(e);if(!n)throw Error("Unknown option: "+e);n.removeEventListener(l.SET_EVENT_TYPE,t)}},{key:"options",get:function(){return this.m_optionsMap}},{key:"clear",value:function(){this.m_optionsMap.forEach((function(e){e.set(void 0,"")}))}}]),e}();t.DebugContext=c,t.debugContext=new c},47857:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateColorProperty=t.applyBaseColorToMaterial=t.applySecondaryColorToMaterial=t.evaluateBaseColorProperty=t.buildMetricValueEvaluator=t.getMaterialConstructor=t.BASE_TECHNIQUE_NON_MATERIAL_PROPS=t.buildObject=t.usesObject3D=t.getBufferAttribute=t.createMaterial=void 0;var i=n(26309),a=n(91753),o=n(85164),s=n(15739),u=n(34585),l=n(73224),c=n(58598),d=n(46246),h=n(12918),f=n(4716),p=s.LoggerManager.instance.create("DecodedTileHelpers");function m(e,t,n,r){var i=(new u.TextureLoader).load(e,t,void 0,n);r&&i.addEventListener("dispose",(function(){URL.revokeObjectURL(e)}))}function v(e,t,n){var r=e.dataTextureProperties;if(r){var i=r.type?f.toTextureDataType(r.type):void 0,a=function(e,t){if(void 0===t)return new Uint8Array(e);switch(t){case u.UnsignedByteType:return new Uint8Array(e);case u.ByteType:return new Int8Array(e);case u.ShortType:return new Int16Array(e);case u.UnsignedShortType:return new Uint16Array(e);case u.IntType:return new Int32Array(e);case u.UnsignedIntType:return new Uint32Array(e);case u.FloatType:return new Float32Array(e);case u.HalfFloatType:return new Uint16Array(e)}throw new Error("Unsupported texture data type")}(e.buffer,i);t(new u.DataTexture(a,r.width,r.height,r.format?f.toPixelFormat(r.format):void 0,i))}else n("no data texture properties provided.")}function g(e,t,n){var r=n.technique,a=r[t];if(void 0!==a)return new Promise((function(o,s){var l=function(n){!function(e,t){t&&(void 0!==t.wrapS&&(e.wrapS=f.toWrappingMode(t.wrapS)),void 0!==t.wrapT&&(e.wrapT=f.toWrappingMode(t.wrapT)),void 0!==t.magFilter&&(e.magFilter=f.toTextureFilter(t.magFilter)),void 0!==t.minFilter&&(e.minFilter=f.toTextureFilter(t.minFilter)),void 0!==t.flipY&&(e.flipY=t.flipY),void 0!==t.repeatU&&(e.repeat.x=t.repeatU),void 0!==t.repeatV&&(e.repeat.y=t.repeatV))}(n,r[t+"Properties"]),e[t]=n,e.needsUpdate=!0,o(n)},c=function(e){p.error("#createMaterial: Failed to load texture: ",e),s(e)};if(!i.Expr.isExpr(a)||(a=i.getPropertyValue(a,n.env)))if("string"===typeof a)m(a,l,c,!1);else if(i.isTextureBuffer(a))if("image/raw"===a.type)v(a,l,c);else{var d=new Blob([a.buffer],{type:a.type});m(URL.createObjectURL(d),l,c,!0)}else"object"!==typeof a||"IMG"!==a.nodeName&&"CANVAS"!==a.nodeName||l(new u.CanvasTexture(a));else l(new u.Texture)}))}function y(e,t){if(void 0!==e.name)switch(e.name){case"extruded-line":if(!i.isExtrudedLineTechnique(e))throw new Error("Invalid extruded-line technique");return"standard"===e.shading?o.MapMeshStandardMaterial:o.MapMeshBasicMaterial;case"standard":case"terrain":case"extruded-polygon":return o.MapMeshStandardMaterial;case"dashed-line":case"solid-line":return o.SolidLineMaterial;case"fill":return t?o.MapMeshStandardMaterial:o.MapMeshBasicMaterial;case"squares":return u.PointsMaterial;case"circles":return o.CirclePointsMaterial;case"line":case"segments":return u.LineBasicMaterial;case"shader":return u.ShaderMaterial;case"text":case"labeled-icon":case"line-marker":case"label-rejection-line":return}}function x(e,t){return void 0===e||null===e?e:("string"===typeof e&&(e.endsWith("px")?(t="Pixel",e=Number.parseFloat(e)):e.endsWith("m")&&(e=Number.parseFloat(e))),"Pixel"===t?function(t){var n;return(null!==(n=t.env.lookup("$pixelToMeters"))&&void 0!==n?n:1)*i.getPropertyValue(e,t.env)}:e)}function _(e,t,n){var r=S(t,n);void 0!==r&&(i.ColorUtils.hasAlphaInHex(r)&&(p.warn("Used RGBA value for technique color without transparency support!"),r=i.ColorUtils.removeAlphaFromHex(r)),e.setHex(r))}function b(e,t,n,r,a){var s=S(r,a);if(void 0!==s){var l=i.ColorUtils.getRgbaFromHex(s),c=l.r,d=l.g,h=l.b,f=n,p=l.a;void 0!==f.opacity&&(p*=w(f.opacity,a)),p=u.MathUtils.clamp(p,0,1),e instanceof o.RawShaderMaterial?e.setOpacity(p):e.opacity=p,t.setRGB(c,d,h),p>=1?o.disableBlending(e):o.enableBlending(e)}}function w(e,t){return void 0!==t&&i.Expr.isExpr(e)&&(e=i.getPropertyValue(e,t)),e}function S(e,t){if(void 0!==(e=w(e,t))&&null!==e){if("number"===typeof e)return e;if("string"===typeof e){var n=i.parseStringEncodedColor(e);if(void 0!==n)return n}p.error("Unsupported color format: '".concat(e,"'"))}}function M(e){var t;return null===(t=a.getTechniqueDescriptor(e))||void 0===t?void 0:t.attrTransparencyColor}t.createMaterial=function(e,t,n){var l=t.technique,c=y(l,!0===t.shadowsEnabled),h={};if(void 0!==c){c.prototype instanceof o.RawShaderMaterial&&(h.rendererCapabilities=e,c!==o.HighPrecisionLineMaterial&&(h.fog=t.fog)),!0===t.shadowsEnabled&&"fill"===l.name&&(h.removeDiffuseLight=!0);var f=new c(h);return void 0!==l.id&&(f.name=l.id),i.isExtrudedPolygonTechnique(l)&&(f.flatShading=!0),f.depthTest=i.isExtrudedPolygonTechnique(l)&&!1!==l.depthTest,i.supportsTextures(l)&&i.TEXTURE_PROPERTY_KEYS.forEach((function(e){var r=g(f,e,t);r&&(null===n||void 0===n||n(r))})),i.isShaderTechnique(l)?function(e,t){e.transparent?o.enableBlending(t):o.disableBlending(t);var n=e.params,r=M(e),a=r&&r in e.params;if(Object.getOwnPropertyNames(n).filter((function(e){if(r===e||a&&i.TRANSPARENCY_PROPERTY_KEYS.includes(e)){return false}var t=e;if(t==="name"){return false}return true})).forEach((function(e){!function(e,t,n,r){var i=e;if(i[t]instanceof u.Color)_(e[t],n,r);else{var a=w(n,r);null!==a&&(i[t]=a)}}(t,e,n[e])})),a){var s=r;b(t,t[s],e,n[s])}}(l,f):d.MapMaterialAdapter.create(f,function(e){var t,n=a.getTechniqueAutomaticAttrs(e);switch(e.name){case"dashed-line":case"solid-line":var i=s.pick(e,n);return i.lineWidth=x(null!==(t=e.lineWidth)&&void 0!==t?t:0,e.metricUnit),i.outlineWidth=x(e.outlineWidth,e.metricUnit),i.dashSize=x(e.dashSize,e.metricUnit),i.gapSize=x(e.gapSize,e.metricUnit),i.offset=x(e.offset,e.metricUnit),i;case"fill":case"circles":case"squares":case"line":case"segments":return s.pick(e,n);case"standard":case"terrain":case"extruded-polygon":var o=s.pick(e,n);return!0!==e.vertexColors&&(o.color=e.color),o;case"extruded-line":return s.pick(e,["color","wireframe","transparent","opacity","polygonOffset","polygonOffsetFactor","polygonOffsetUnits"].concat(r(n)));default:return{}}}(l)),f}},t.getBufferAttribute=function(e){switch(e.type){case"float":return new u.BufferAttribute(new Float32Array(e.buffer),e.itemCount);case"uint8":return new u.BufferAttribute(new Uint8Array(e.buffer),e.itemCount,e.normalized);case"uint16":return new u.BufferAttribute(new Uint16Array(e.buffer),e.itemCount,e.normalized);case"uint32":return new u.BufferAttribute(new Uint32Array(e.buffer),e.itemCount,e.normalized);case"int8":return new u.BufferAttribute(new Int8Array(e.buffer),e.itemCount,e.normalized);case"int16":return new u.BufferAttribute(new Int16Array(e.buffer),e.itemCount,e.normalized);case"int32":return new u.BufferAttribute(new Int32Array(e.buffer),e.itemCount,e.normalized);default:throw new Error("unsupported buffer of type ".concat(e.type))}},t.usesObject3D=function(e){var t=e.name;return void 0!==t&&"text"!==t&&"labeled-icon"!==t&&"line-marker"!==t&&"label-rejection-line"!==t},t.buildObject=function(e,t,n,r,a){switch(s.assert(void 0!==e.name),e.name){case"extruded-line":case"standard":case"extruded-polygon":case"fill":return a?new l.DisplacedMesh(t,n,(function(){return{min:r.elevationRange.minElevation,max:r.elevationRange.maxElevation}})):new u.Mesh(t,n);case"terrain":return new u.Mesh(t,n);case"dashed-line":case"solid-line":return a?new l.DisplacedMesh(t,n,(function(){return{min:r.elevationRange.minElevation,max:r.elevationRange.maxElevation}}),c.SolidLineMesh.raycast):new c.SolidLineMesh(t,n);case"circles":return new h.Circles(t,n);case"squares":return new h.Squares(t,n);case"line":case"segments":return new u.LineSegments(t,n);case"shader":switch(s.assert(i.isShaderTechnique(e),"Invalid technique"),e.primitive){case"line":return new u.Line(t,n);case"segments":return new u.LineSegments(t,n);case"point":return new u.Points(t,n);case"mesh":return new u.Mesh(t,n)}}return s.assert(!1,"Invalid technique"),new u.Object3D},t.BASE_TECHNIQUE_NON_MATERIAL_PROPS=["name","id","renderOrder","transient"],t.getMaterialConstructor=y,t.buildMetricValueEvaluator=x,t.evaluateBaseColorProperty=function(e,t){var n=function(e){var t=M(e);if(void 0!==t){return i.isShaderTechnique(e)?e.params[t]:e[t]}return}(e);if(void 0!==n)return S(n,t)},t.applySecondaryColorToMaterial=_,t.applyBaseColorToMaterial=b,t.evaluateColorProperty=S},17682:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.setDepthPrePassStencil=t.createDepthPrePassMesh=t.isDepthPrePassMesh=t.createDepthPrePassMaterial=t.isRenderDepthPrePassEnabled=t.DEPTH_PRE_PASS_STENCIL_MASK=void 0;var i=n(67538),a=n(85164),o=n(34585),s=n(47857);t.DEPTH_PRE_PASS_STENCIL_MASK=1;function u(e){e.depthWrite=!1,e.depthFunc=o.EqualDepth,e.colorWrite=!0,a.enforceBlending(e);var t=e.clone();return t.isDepthPrepassMaterial=!0,t.depthWrite=!0,t.depthTest=!0,t.depthFunc=o.LessDepth,t.colorWrite=!1,t.opacity=1,t.blending=o.NoBlending,t}t.isRenderDepthPrePassEnabled=function(e,t){if(!1===e.enableDepthPrePass)return!1;var n=void 0!==e.opacity&&e.opacity>0&&e.opacity<1;if(!n){var r=s.evaluateBaseColorProperty(e,t);if(void 0!==r){var a=i.ColorUtils.getAlphaFromHex(r);n=a>0&&a<1}}return n},t.createDepthPrePassMaterial=u,t.isDepthPrePassMesh=function(e){if(!0!==e.isMesh)return!1;var t=e;return t.material instanceof Array?t.material.every((function(e){return!0===e.isDepthPrepassMaterial})):!0===t.material.isDepthPrepassMaterial},t.createDepthPrePassMesh=function(e){var t=e.geometry;if(!(t instanceof o.BufferGeometry))throw new Error("#createDepthPassMesh only BufferGeometry is supported");var n=t.getAttribute("position");if(!n)throw new Error("#createDepthPassMesh position attribute not found");var i=new o.BufferGeometry;i.setAttribute("position",n);var a=t.getAttribute("uv");a&&i.setAttribute("uv",a);var s=t.getAttribute("normal");s&&i.setAttribute("normal",s);var l=t.getAttribute("extrusionAxis");l&&i.setAttribute("extrusionAxis",l),t.index&&i.setIndex(t.index);var c,d=r(t.groups);try{for(d.s();!(c=d.n()).done;){var h=c.value,f=h.start,p=h.count,m=h.materialIndex;i.addGroup(f,p,m)}}catch(y){d.e(y)}finally{d.f()}var v=e.material instanceof Array?e.material.map(u):u(e.material),g=new o.Mesh(i,v);return g.renderOrder=e.renderOrder-1e-6,g},t.setDepthPrePassStencil=function(e,n){function r(e){var n=e;n.stencilWrite=!0,n.stencilFail=o.KeepStencilOp,n.stencilZFail=o.KeepStencilOp,n.stencilZPass=o.ReplaceStencilOp,n.stencilFunc=o.AlwaysStencilFunc,n.stencilRef=255,n.stencilFuncMask=t.DEPTH_PRE_PASS_STENCIL_MASK}function i(e){var n=e;n.stencilWrite=!0,n.stencilFail=o.KeepStencilOp,n.stencilZFail=o.KeepStencilOp,n.stencilZPass=o.ZeroStencilOp,n.stencilFunc=o.EqualStencilFunc,n.stencilRef=255,n.stencilFuncMask=t.DEPTH_PRE_PASS_STENCIL_MASK}e.material instanceof Array?e.material.map(r):r(e.material),n.material instanceof Array?n.material.map(i):i(n.material)}},80821:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},41483:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},89644:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalculationStatus=void 0,function(e){e[e.PendingApproximate=0]="PendingApproximate",e[e.FinalPrecise=1]="FinalPrecise"}(t.CalculationStatus||(t.CalculationStatus={}))},49046:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;var a=function(){function e(){r(this,e),this.m_listeners=new Map}return i(e,[{key:"dispose",value:function(){this.removeAllEventListeners()}},{key:"hasEventListener",value:function(e,t){var n=this.m_listeners.get(e);return void 0!==n&&(void 0===t||n.includes(t))}},{key:"addEventListener",value:function(e,t){var n=this.m_listeners.get(e);void 0===n&&(n=[],this.m_listeners.set(e,n)),n.includes(t)||n.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this.m_listeners.get(e);if(void 0!==n)if(void 0===t)this.m_listeners.delete(e);else{var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&this.m_listeners.delete(e))}}},{key:"removeAllEventListeners",value:function(){for(var e=0,t=Array.from(this.m_listeners.keys());e<t.length;e++){var n=t[e];this.removeEventListener(n)}}},{key:"eventTypes",get:function(){return Array.from(this.m_listeners.keys())}},{key:"listeners",value:function(e){return this.m_listeners.get(e)}},{key:"dispatchEvent",value:function(e){var t=this.m_listeners.get(e.type);if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}]),e}();t.EventDispatcher=a},26436:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FixedClipPlanesEvaluator=void 0;var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r(this,e),this.minNear=t,this.minFarOffset=n,this.minFar=t+n,this.m_nearPlane=t,this.m_farPlane=this.minFar}return i(e,[{key:"nearPlane",get:function(){return this.m_nearPlane},set:function(e){this.invalidatePlanes(e,this.m_farPlane)}},{key:"farPlane",get:function(){return this.m_farPlane},set:function(e){this.invalidatePlanes(this.m_nearPlane,e)}},{key:"minElevation",get:function(){return 0},set:function(e){}},{key:"maxElevation",get:function(){return 0},set:function(e){}},{key:"evaluateClipPlanes",value:function(e,t,n){return{near:this.m_nearPlane,far:this.m_farPlane,minimum:this.minNear,maximum:this.m_farPlane}}},{key:"invalidatePlanes",value:function(e,t){var n=Math.max(this.minNear,e),r=Math.max(this.minFar,t,n+this.minFarOffset);this.m_nearPlane=n,this.m_farPlane=r}}]),e}();t.FixedClipPlanesEvaluator=a},71690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_FOV_RAD=t.MIN_FOV_RAD=t.MAX_FOV_DEG=t.MIN_FOV_DEG=t.DEFAULT_FOV_CALCULATION=void 0;var r=n(34585);t.DEFAULT_FOV_CALCULATION={type:"dynamic",fov:40},t.MIN_FOV_DEG=10,t.MAX_FOV_DEG=140,t.MIN_FOV_RAD=r.MathUtils.degToRad(t.MIN_FOV_DEG),t.MAX_FOV_RAD=r.MathUtils.degToRad(t.MAX_FOV_DEG)},95596:function(e,t,n){"use strict";var r=n(319).default,i=n(43269).default,a=n(93913).default,o=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FrustumIntersection=t.TileKeyEntry=void 0;var s=n(31201),u=n(15739),l=n(34585),c=n(89644),d=n(24943),h=n(61563),f=[new l.Vector3,new l.Vector3],p=new l.Vector4,m=a((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;o(this,e),this.tileKey=t,this.area=n,this.offset=r,this.elevationRange=i,this.distance=a}));t.TileKeyEntry=m;var v=function(){function e(t,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:256;o(this,e),this.m_camera=t,this.mapView=n,this.m_extendedFrustumCulling=r,this.m_tileWrappingEnabled=i,this.m_enableMixedLod=a,this.m_tilePixelSize=s,this.m_frustum=new l.Frustum,this.m_viewProjectionMatrix=new l.Matrix4,this.m_rootTileKeys=[],this.m_tileKeyEntries=new Map,this.m_mapTileCuller=new d.MapTileCuller(t)}return a(e,[{key:"camera",get:function(){return this.m_camera}},{key:"projection",get:function(){return this.mapView.projection}},{key:"updateFrustum",value:function(e){this.m_viewProjectionMatrix.multiplyMatrices(void 0!==e?e:this.m_camera.projectionMatrix,this.m_camera.matrixWorldInverse),this.m_frustum.setFromProjectionMatrix(this.m_viewProjectionMatrix),this.m_extendedFrustumCulling&&this.m_mapTileCuller.setup(),this.computeRequiredInitialRootTileKeys(this.m_camera.position)}},{key:"compute",value:function(e,t,n,a){var o=this;this.m_tileKeyEntries.clear(),u.assert(0!==this.mapView.viewportHeight);var c=Math.pow(this.m_tilePixelSize/this.mapView.viewportHeight,2),d=void 0!==t&&t.getTilingScheme()===e,h=this.mapView.projection.type===s.ProjectionType.Spherical||d,f=new Set(n),p=0,m=0;a.forEach((function(e){p=Math.min(p,e.minGeometryHeight),m=Math.max(m,e.maxGeometryHeight)}));var v,g={calculationFinal:!0,tileBounds:h?new s.OrientedBox3:new l.Box3},y=i(f);try{for(y.s();!(v=y.n()).done;){var x=v.value;this.m_tileKeyEntries.set(x,new Map)}}catch(L){y.e(L)}finally{y.f()}var _,b=i(this.m_rootTileKeys);try{for(b.s();!(_=b.n()).done;){var w=_.value,S=w.tileKey,M=w.offset,E=this.getTileKeyEntry(S,M,e,g,p,m,d?t:void 0);if(void 0!==E){var T,k=i(f);try{for(k.s();!(T=k.n()).done;){var C=T.value;this.m_tileKeyEntries.get(C).set(s.TileKeyUtils.getKeyForTileKeyAndOffset(S,M),E)}}catch(L){k.e(L)}finally{k.f()}}}}catch(L){b.e(L)}finally{b.f()}for(var A=r(this.m_rootTileKeys.values()),P=function(){var r=A.pop();if(void 0===r)return"break";var u=r.tileKey,l=r.offset;if(!a.some((function(e,t){return e.shouldSubdivide(n[t],u)})))return"continue";if(o.m_enableMixedLod&&r.area<c)return"continue";var h,v=s.TileKeyUtils.getKeyForTileKeyAndOffset(u,l),y=i(f);try{for(y.s();!(h=y.n()).done;){var x=h.value;if(!(u.level>=x))o.m_tileKeyEntries.get(x).delete(v)}}catch(L){y.e(L)}finally{y.f()}var _,b=i(e.getSubTileKeys(u));try{for(b.s();!(_=b.n()).done;){var w=_.value,S=o.getTileKeyEntry(w,l,e,g,p,m,d?t:void 0);if(void 0!==S){var M,E=i(f);try{for(E.s();!(M=E.n()).done;){var T=M.value;if(!(S.tileKey.level>T)){var k=s.TileKeyUtils.getKeyForTileKeyAndOffset(w,l);o.m_tileKeyEntries.get(T).set(k,S)}}}catch(L){E.e(L)}finally{E.f()}A.push(S)}}}catch(L){b.e(L)}finally{b.f()}};A.length>0;){var O=P();if("break"===O)break}return{tileKeyEntries:this.m_tileKeyEntries,calculationFinal:g.calculationFinal}}},{key:"getTileKeyEntry",value:function(e,t,n,r,i,a,o){var s,u,l=function(e,t,n){var r=e.getGeoBox(t),i=360*n;return r.northEast.longitude+=i,r.southWest.longitude+=i,r}(n,e,t);if(void 0!==o){var d=o.getElevationRange(e);l.southWest.altitude=d.minElevation,l.northEast.altitude=d.maxElevation,r.calculationFinal=r.calculationFinal&&d.calculationStatus===c.CalculationStatus.FinalPrecise}l.southWest.altitude=(null!==(s=l.southWest.altitude)&&void 0!==s?s:0)+i,l.northEast.altitude=(null!==(u=l.northEast.altitude)&&void 0!==u?u:0)+a,this.mapView.projection.projectBox(l,r.tileBounds);var h=this.computeTileAreaAndDistance(r.tileBounds),f=h.area,p=h.distance;if(f>0)return new m(e,f,t,{minElevation:l.southWest.altitude,maxElevation:l.northEast.altitude},p)}},{key:"computeTileAreaAndDistance",value:function(e){if(e instanceof l.Box3){if(this.m_extendedFrustumCulling&&!this.m_mapTileCuller.frustumIntersectsTileBox(e)||!this.m_frustum.intersectsBox(e))return{area:0,distance:1/0}}else if(!e.intersects(this.m_frustum))return{area:0,distance:1/0};var t=e.getCenter(f[0]),n=p.set(t.x,t.y,t.z,1).applyMatrix4(this.m_viewProjectionMatrix),r=.5*e.getSize(f[1]).length()/n.w;return{area:r*r,distance:n.z<=-n.w?-1:n.z>=n.w?1:n.z/n.w}}},{key:"computeRequiredInitialRootTileKeys",value:function(e){this.m_rootTileKeys=[];var t=s.TileKey.fromRowColumnLevel(0,0,0);if(this.mapView.projection.type===s.ProjectionType.Planar&&this.m_tileWrappingEnabled)for(var n=this.mapView.projection.unprojectPoint(e),r=Math.round(n.longitude/360),i=this.m_camera,a=h.MapViewUtils.extractAttitude(this.mapView,i).pitch,o=i.aspect>1?i.aspect:1/i.aspect,u=l.MathUtils.degToRad(i.fov*o/2)+a,c=Math.tan(u)*i.position.z-Math.tan(a)*i.position.z,d=new l.Vector3(e.x-c,e.y,e.z),f=this.mapView.projection.unprojectPoint(d),p=l.MathUtils.clamp(Math.ceil(Math.abs((n.longitude-f.longitude)/360)*Math.SQRT2),0,7),v=-p+r;v<=p+r;v++)this.m_rootTileKeys.push(new m(t,1/0,v));else this.m_rootTileKeys.push(new m(t,1/0,0))}}]),e}();t.FrustumIntersection=v},44097:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileLoaderState=void 0,function(e){e[e.Initialized=0]="Initialized",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Decoding=3]="Decoding",e[e.Ready=4]="Ready",e[e.Canceled=5]="Canceled",e[e.Failed=6]="Failed"}(t.TileLoaderState||(t.TileLoaderState={}))},29001:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapAnchors=void 0;var a=n(31201),o=n(34585),s=function(){function e(){r(this,e),this.m_anchors=[],this.m_priorities=[]}return i(e,[{key:"children",get:function(){return this.m_anchors}},{key:"add",value:function(e){this.m_anchors.push(e)}},{key:"remove",value:function(e){var t=this.m_anchors.findIndex((function(t){return t===e}));t>-1&&this.m_anchors.splice(t,1)}},{key:"clear",value:function(){this.m_anchors.length=0}},{key:"setPriorities",value:function(e){this.m_priorities=e}},{key:"update",value:function(e,t,n,r){var i=this,s=new o.Vector3;this.m_anchors.forEach((function(o){var u;if(void 0!==o.styleSet){var l=null===(u=i.m_priorities)||void 0===u?void 0:u.findIndex((function(e){return e.group===o.styleSet&&e.category===o.category}));void 0!==l&&-1!==l&&(o.renderOrder=10*(l+1))}var c=void 0!==o.geoPosition?o.geoPosition:o.anchor;void 0!==c&&(a.isVector3Like(c)?s.set(c.x,c.y,c.z):a.isGeoCoordinatesLike(c)&&e.projectPoint(c,s),o.position.copy(s).sub(t)),!0===o.overlay?r.add(o):n.add(o)}))}}]),e}();t.MapAnchors=s},46246:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapMaterialAdapter=void 0;var s=n(26309),u=n(85164),l=n(34585),c=n(47857);function d(e){return s.TEXTURE_PROPERTY_KEYS.includes(e)}var h=function(){function e(t,n){for(var r in a(this,e),this.m_lastUpdateFrameNumber=-1,this.tmpColor=new l.Color,this.material=t,this.styledProperties=n,this.currentStyledProperties={},this.m_dynamicProperties=[],n)if(n.hasOwnProperty(r)){var i=n[r];s.Expr.isExpr(i)||"function"===typeof i?this.m_dynamicProperties.push([r,i]):this.currentStyledProperties[r]=i}this.setupStaticProperties()}return o(e,[{key:"toJSON",value:function(){return{styledProperties:this.styledProperties}}},{key:"ensureUpdated",value:function(e){return this.m_lastUpdateFrameNumber!==e.frameNumber&&(this.m_lastUpdateFrameNumber=e.frameNumber,this.updateDynamicProperties(e))}},{key:"setupStaticProperties",value:function(){var e,t,n=!1;for(var r in this.styledProperties)if(this.styledProperties.hasOwnProperty(r)){var i=this.currentStyledProperties[r];void 0!==i&&null!==i&&("color"===r||"opacity"===r?n=!0:d(r)||this.applyMaterialGenericProp(r,i))}if(n){var a=null!==(e=this.currentStyledProperties.color)&&void 0!==e?e:16711680,o=null!==(t=this.currentStyledProperties.opacity)&&void 0!==t?t:1;this.applyMaterialBaseColor(a,o)}}},{key:"updateDynamicProperties",value:function(e){var t,n,a=!1;if(this.m_dynamicProperties.length>0){var o,u=!1,l=i(this.m_dynamicProperties);try{for(l.s();!(o=l.n()).done;){var c=r(o.value,2),h=c[0],f=c[1],p=s.Expr.isExpr(f)?s.getPropertyValue(f,e.env):f(e);p!==this.currentStyledProperties[h]&&(this.currentStyledProperties[h]=p,"color"===h||"opacity"===h?u=!0:d(h)?(this.applyMaterialTextureProp(h,p),a=!0):(this.applyMaterialGenericProp(h,p),a=!0))}}catch(g){l.e(g)}finally{l.f()}if(u){var m=null!==(t=this.currentStyledProperties.color)&&void 0!==t?t:16711680,v=null!==(n=this.currentStyledProperties.opacity)&&void 0!==n?n:1;this.applyMaterialBaseColor(m,v),a=!0}}return a}},{key:"applyMaterialTextureProp",value:function(e,t){var n=this.material;if(n[e]&&null!==t){var r,i=n[e];if("string"===typeof t)r=(new l.TextureLoader).load(t,(function(t){n[e]=t}));else if("object"===typeof t){var a=t,o="IMG"===a.nodeName,s="CANVAS"===a.nodeName;if(o||s)if(r=new l.CanvasTexture(a),o&&!a.complete){a.addEventListener("load",(function t(){n[e]=r,a.removeEventListener("load",t)}))}else n[e]=r}r&&(r.wrapS=i.wrapS,r.wrapT=i.wrapT,r.magFilter=i.magFilter,r.minFilter=i.minFilter,r.flipY=i.flipY,r.repeat=i.repeat)}}},{key:"applyMaterialGenericProp",value:function(e,t){var n=this.material;if(n[e]instanceof l.Color){var r=t;if("number"!==typeof r){var i=c.evaluateColorProperty(r);if(void 0===i)return;r=i}var a=s.ColorUtils.removeAlphaFromHex(r);this.tmpColor.set(a),t=this.tmpColor}n[e]=t}},{key:"applyMaterialBaseColor",value:function(e,t){if("number"!==typeof e){var n=c.evaluateColorProperty(e);if(void 0===n)return;e=n}var r=s.ColorUtils.getRgbaFromHex(null!==e&&void 0!==e?e:16711680),i=r.r,a=r.g,o=r.b,d=r.a*l.MathUtils.clamp(null!==t&&void 0!==t?t:1,0,1);this.material instanceof u.RawShaderMaterial?this.material.setOpacity(d):this.material.opacity=d,this.material.color.setRGB(i,a,o),d>=1?u.disableBlending(this.material):u.enableBlending(this.material)}}],[{key:"get",value:function(t){var n,r=null===(n=t.userData)||void 0===n?void 0:n.mapAdapter;return r instanceof e?r:void 0}},{key:"install",value:function(e){return e.material.userData||(e.material.userData={}),e.material.userData.mapAdapter=e}},{key:"create",value:function(t,n){return e.install(new e(t,n))}},{key:"ensureUpdated",value:function(t,n){var r,i;return null!==(i=null===(r=e.get(t))||void 0===r?void 0:r.ensureUpdated(n))&&void 0!==i&&i}}]),e}();t.MapMaterialAdapter=h},87213:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapObjectAdapter=void 0;var o=n(26309),s=n(46246),u=function(){function e(t,n){var r;i(this,e),this.m_lastUpdateFrameNumber=-1,this.m_notCompletlyTransparent=!0,this.object=t,this.technique=n.technique,this.kind=n.kind,this.dataSource=n.dataSource,this.m_pickability=null!==(r=n.pickability)&&void 0!==r?r:o.Pickability.onlyVisible,this.m_notCompletlyTransparent=this.getObjectMaterials().some((function(e){return e.opacity>0})),this.level=n.level}return a(e,[{key:"toJSON",value:function(){return{kind:this.kind,technique:this.technique}}},{key:"ensureUpdated",value:function(e){return this.m_lastUpdateFrameNumber!==e.frameNumber&&(this.m_lastUpdateFrameNumber=e.frameNumber,this.updateMaterials(e))}},{key:"isVisible",value:function(){return this.object.visible&&this.m_notCompletlyTransparent}},{key:"isPickable",value:function(){return this.pickability===o.Pickability.onlyVisible&&this.isVisible()||this.m_pickability===o.Pickability.all}},{key:"pickability",get:function(){return this.m_pickability}},{key:"updateMaterials",value:function(e){var t,n=!1,i=this.getObjectMaterials(),a=r(i);try{for(a.s();!(t=a.n()).done;){var o=t.value,u=s.MapMaterialAdapter.ensureUpdated(o,e);n=n||u}}catch(l){a.e(l)}finally{a.f()}return n&&(this.m_notCompletlyTransparent=i.some((function(e){return e.opacity>0}))),n}},{key:"getObjectMaterials",value:function(){var e=this.object;return Array.isArray(e.material)?e.material:void 0!==e.material?[e.material]:[]}}],[{key:"get",value:function(t){var n;return(null===(n=t.userData)||void 0===n?void 0:n.mapAdapter)instanceof e?t.userData.mapAdapter:void 0}},{key:"install",value:function(e){return e.object.userData||(e.object.userData={}),e.object.userData.mapAdapter=e}},{key:"create",value:function(t,n){return e.install(new e(t,n))}},{key:"ensureUpdated",value:function(t,n){var r,i;return null!==(i=null===(r=e.get(t))||void 0===r?void 0:r.ensureUpdated(n))&&void 0!==i&&i}}]),e}();t.MapObjectAdapter=u},24943:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapTileCuller=void 0;var o=n(34585),s=function(){function e(t){i(this,e),this.m_camera=t,this.m_globalFrustumMin=new o.Vector3,this.m_globalFrustumMax=new o.Vector3,this.m_frustumCorners=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3]}return a(e,[{key:"setup",value:function(){var e=this.getFrustumCorners(),t=this.m_camera.matrixWorld;this.m_globalFrustumMin.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.m_globalFrustumMax.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);var n,i=r(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.applyMatrix4(t),this.m_globalFrustumMin.x=Math.min(this.m_globalFrustumMin.x,a.x),this.m_globalFrustumMin.y=Math.min(this.m_globalFrustumMin.y,a.y),this.m_globalFrustumMin.z=Math.min(this.m_globalFrustumMin.z,a.z),this.m_globalFrustumMax.x=Math.max(this.m_globalFrustumMax.x,a.x),this.m_globalFrustumMax.y=Math.max(this.m_globalFrustumMax.y,a.y),this.m_globalFrustumMax.z=Math.max(this.m_globalFrustumMax.z,a.z)}}catch(o){i.e(o)}finally{i.f()}}},{key:"frustumIntersectsTileBox",value:function(e){var t=this.m_globalFrustumMin,n=this.m_globalFrustumMax;return!(n.x<e.min.x||n.y<e.min.y||n.z<e.min.z||t.x>e.max.x||t.y>e.max.y||t.z>e.max.z)}},{key:"getFrustumCorners",value:function(){var e=this.m_frustumCorners,t=this.m_camera.projectionMatrixInverse,n=0;function r(r,i,a){e[n++].set(r,i,a).applyMatrix4(t)}return r(-1,-1,-1),r(1,-1,-1),r(-1,1,-1),r(1,1,-1),r(-1,-1,1),r(1,-1,1),r(-1,1,1),r(1,1,1),e}}]),e}();t.MapTileCuller=s},65312:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(43269).default,o=n(34575).default,s=n(93913).default,u=n(81506).default,l=n(16525).default,c=n(29754).default,d=n(2205).default,h=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapView=t.MapViewPowerPreference=t.MapViewEventNames=t.TileTaskGroups=void 0;var f,p=n(26309),m=n(31201),v=n(15739),g=n(34585),y=n(57721),x=n(49417),_=n(20899),b=n(64172),w=n(45480),S=n(86550),M=n(12324),E=n(58635),T=n(52210),k=n(49046),C=n(71690),A=n(95596),P=n(91649),O=n(47021),L=n(10018),R=n(29001),D=n(31011),I=n(8379),F=n(8246),N=n(92980),j=n(61086),z=n(6549),U=n(13412),B=n(56396),V=n(91422),G=n(91088),H=n(40449),Z=n(63402),W=n(61563),q=n(3236);v.LoggerManager.instance.setLogLevelForAll(v.LogLevel.Error),function(e){e.FETCH_AND_DECODE="fetch",e.CREATE="create"}(t.TileTaskGroups||(t.TileTaskGroups={})),function(e){e.Update="update",e.Resize="resize",e.Render="render",e.AfterRender="didrender",e.FirstFrame="first-render",e.FrameComplete="frame-complete",e.ThemeLoaded="theme-loaded",e.AnimationStarted="animation-started",e.AnimationFinished="animation-finished",e.MovementStarted="movement-started",e.MovementFinished="movement-finished",e.DataSourceConnect="datasource-connect",e.CopyrightChanged="copyright-changed",e.ContextLost="webglcontext-lost",e.ContextRestored="webglcontext-restored",e.CameraPositionChanged="camera-changed",e.Dispose="dispose"}(f=t.MapViewEventNames||(t.MapViewEventNames={}));var X,K=v.LoggerManager.instance.create("MapView"),Y=4e6,Q={vector2:[new g.Vector2],vector3:[new g.Vector3,new g.Vector3,new g.Vector3],rayCaster:new g.Raycaster,groundPlane:new g.Plane,groundSphere:new g.Sphere(void 0,m.EarthConstants.EQUATORIAL_RADIUS),matrix4:[new g.Matrix4,new g.Matrix4],transform:[{position:new g.Vector3,xAxis:new g.Vector3,yAxis:new g.Vector3,zAxis:new g.Vector3}],color:new g.Color};!function(e){e.Default="default",e.LowPower="low-power",e.HighPerformance="high-performance"}(X=t.MapViewPowerPreference||(t.MapViewPowerPreference={}));var $={projection:m.mercatorProjection,addBackgroundDatasource:!0,maxVisibleDataSourceTiles:100,extendedFrustumCulling:!0,tileCacheSize:200,resourceComputationType:q.ResourceComputationType.EstimationInMb,quadTreeSearchDistanceUp:3,quadTreeSearchDistanceDown:2,pixelRatio:"undefined"!==typeof window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1,target:new m.GeoCoordinates(25,0),zoomLevel:5,tilt:0,heading:0,theme:{},maxTilesPerFrame:0},J=function(e){d(n,e);var t=h(n);function n(e){var r,i,a;o(this,n),(r=t.call(this)).UPDATE_EVENT={type:f.Update},r.RENDER_EVENT={type:f.Render},r.DID_RENDER_EVENT={type:f.AfterRender},r.FIRST_FRAME_EVENT={type:f.FirstFrame},r.FRAME_COMPLETE_EVENT={type:f.FrameComplete},r.THEME_LOADED_EVENT={type:f.ThemeLoaded},r.ANIMATION_STARTED_EVENT={type:f.AnimationStarted},r.ANIMATION_FINISHED_EVENT={type:f.AnimationFinished},r.MOVEMENT_STARTED_EVENT={type:f.MovementStarted},r.MOVEMENT_FINISHED_EVENT={type:f.MovementFinished},r.CONTEXT_LOST_EVENT={type:f.ContextLost},r.CONTEXT_RESTORED_EVENT={type:f.ContextRestored},r.COPYRIGHT_CHANGED_EVENT={type:f.CopyrightChanged},r.DISPOSE_EVENT={type:f.Dispose},r.m_renderLabels=!0,r.m_visibleTileSetLock=!1,r.m_tileWrappingEnabled=!0,r.m_zoomLevel=1,r.m_minZoomLevel=1,r.m_maxZoomLevel=20,r.m_minCameraHeight=20,r.m_rteCamera=new g.PerspectiveCamera,r.m_yaw=0,r.m_pitch=0,r.m_roll=0,r.m_targetDistance=0,r.m_targetGeoPos=m.GeoCoordinates.fromObject($.target),r.m_targetWorldPos=new g.Vector3,r.m_viewRanges={near:.1,far:Y,minimum:.1,maximum:Y},r.m_scene=new g.Scene,r.m_overlayScene=new g.Scene,r.m_sceneRoot=new g.Object3D,r.m_overlaySceneRoot=new g.Object3D,r.m_mapAnchors=new R.MapAnchors,r.m_animationCount=0,r.m_drawing=!1,r.m_updatePending=!1,r.m_frameNumber=0,r.m_forceCameraAspect=void 0,r.m_taskSchedulerTimeout=void 0,r.m_tileDataSources=[],r.m_connectedDataSources=new Set,r.m_failedDataSources=new Set,r.m_enablePolarDataSource=!0,r.m_raycaster=new g.Raycaster,r.m_plane=new g.Plane(new g.Vector3(0,0,1)),r.m_sphere=new g.Sphere(void 0,m.EarthConstants.EQUATORIAL_RADIUS),r.m_firstFrameRendered=!1,r.m_firstFrameComplete=!1,r.m_initialTextPlacementDone=!1,r.m_userImageCache=new L.MapViewImageCache,r.m_env=new p.MapEnv({}),r.m_poiManager=new j.PoiManager(u(r)),r.m_poiTableManager=new z.PoiTableManager(u(r)),r.m_lastTileIds="",r.m_copyrightInfo=[],r.m_disposed=!1,r.onWebGLContextLost=function(e){r.dispatchEvent(r.CONTEXT_LOST_EVENT),K.warn("WebGL context lost",e)},r.onWebGLContextRestored=function(e){r.dispatchEvent(r.CONTEXT_RESTORED_EVENT),void 0!==r.m_renderer&&(r.textElementsRenderer.restoreRenderers(r.m_renderer),r.getTheme().then((function(e){r.m_sceneEnvironment.updateClearColor(e.clearColor,e.clearAlpha),r.update()}))),K.warn("WebGL context restored",e)},r.m_options=Object.assign({},e),r.m_uriResolver=r.m_options.uriResolver,void 0!==r.m_options.minZoomLevel&&(r.m_minZoomLevel=r.m_options.minZoomLevel),void 0!==r.m_options.maxZoomLevel&&(r.m_maxZoomLevel=r.m_options.maxZoomLevel),void 0!==r.m_options.minCameraHeight&&(r.m_minCameraHeight=r.m_options.minCameraHeight),void 0!==r.m_options.maxBounds&&(r.m_geoMaxBounds=r.m_options.maxBounds),void 0!==r.m_options.decoderUrl&&(M.ConcurrentDecoderFacade.defaultScriptUrl=r.m_uriResolver?r.m_uriResolver.resolveUri(r.m_options.decoderUrl):r.m_options.decoderUrl),void 0!==r.m_options.decoderCount&&(M.ConcurrentDecoderFacade.defaultWorkerCount=r.m_options.decoderCount),r.m_visibleTileSetOptions=Object.assign(Object.assign({},$),{clipPlanesEvaluator:void 0!==e.clipPlanesEvaluator?e.clipPlanesEvaluator:w.createDefaultClipPlanesEvaluator()}),void 0!==e.projection&&(r.m_visibleTileSetOptions.projection=e.projection),void 0!==e.extendedFrustumCulling&&(r.m_visibleTileSetOptions.extendedFrustumCulling=e.extendedFrustumCulling),void 0!==e.maxVisibleDataSourceTiles&&(r.m_visibleTileSetOptions.maxVisibleDataSourceTiles=e.maxVisibleDataSourceTiles),void 0!==e.tileCacheSize&&(r.m_visibleTileSetOptions.tileCacheSize=e.tileCacheSize),void 0!==e.resourceComputationType&&(r.m_visibleTileSetOptions.resourceComputationType=e.resourceComputationType),void 0!==e.quadTreeSearchDistanceUp&&(r.m_visibleTileSetOptions.quadTreeSearchDistanceUp=e.quadTreeSearchDistanceUp),void 0!==e.quadTreeSearchDistanceDown&&(r.m_visibleTileSetOptions.quadTreeSearchDistanceDown=e.quadTreeSearchDistanceDown),void 0!==e.enablePolarDataSource&&(r.m_enablePolarDataSource=e.enablePolarDataSource),r.m_pixelRatio=e.pixelRatio,r.m_options.maxFps=null!==(i=r.m_options.maxFps)&&void 0!==i?i:0,r.m_options.enableStatistics=!0===r.m_options.enableStatistics,r.m_languages=r.m_options.languages,r.m_politicalView=r.m_options.politicalView,r.handleRequestAnimationFrame=r.renderLoop.bind(u(r)),void 0!==r.m_options.tileWrappingEnabled&&(r.m_tileWrappingEnabled=r.m_options.tileWrappingEnabled),r.setupStats(r.m_options.enableStatistics),r.canvas.addEventListener("webglcontextlost",r.onWebGLContextLost),r.canvas.addEventListener("webglcontextrestored",r.onWebGLContextRestored),r.m_renderer=new(null!==(a=g.WebGL1Renderer)&&void 0!==a?a:g.WebGLRenderer)({canvas:r.canvas,context:r.m_options.context,antialias:r.nativeWebglAntialiasEnabled,alpha:r.m_options.alpha,preserveDrawingBuffer:!0===r.m_options.preserveDrawingBuffer,powerPreference:void 0===r.m_options.powerPreference?X.Default:r.m_options.powerPreference}),r.m_renderer.autoClear=!1,r.m_renderer.debug.checkShaderErrors=!1,r.m_renderer.info.autoReset=!1,r.m_tileObjectRenderer=new Z.TileObjectRenderer(r.m_env,r.m_renderer),r.setupRenderer(r.m_tileObjectRenderer),r.m_options.fovCalculation=void 0===r.m_options.fovCalculation?C.DEFAULT_FOV_CALCULATION:r.m_options.fovCalculation,r.m_options.fovCalculation.fov=g.MathUtils.clamp(r.m_options.fovCalculation.fov,C.MIN_FOV_DEG,C.MAX_FOV_DEG);var s=r.getCanvasClientSize(),l=s.width,c=s.height,d=l/c;r.m_camera=new g.PerspectiveCamera(r.m_options.fovCalculation.fov,d,.1,Y),r.m_camera.up.set(0,0,1),r.setFovOnCamera(r.m_options.fovCalculation,c),r.projection.projectPoint(r.m_targetGeoPos,r.m_targetWorldPos),r.m_scene.add(r.m_camera),r.m_screenProjector=new B.ScreenProjector(r.m_camera),r.m_taskScheduler=new I.MapViewTaskScheduler(r.maxFps),r.m_tileGeometryManager=new O.TileGeometryManager(u(r)),void 0!==e.enableMixedLod&&(r.m_enableMixedLod=e.enableMixedLod),void 0!==e.lodMinTilePixelSize&&(r.m_lodMinTilePixelSize=e.lodMinTilePixelSize),r.m_visibleTiles=r.createVisibleTileSet(),r.m_sceneEnvironment=new D.MapViewEnvironment(u(r),e),r.setupCamera(),r.m_pickHandler=new N.PickHandler(u(r),r.m_rteCamera,!0===r.m_options.enablePickTechnique),r.m_movementDetector=new _.CameraMovementDetector(r.m_options.movementThrottleTimeout,(function(){return r.movementStarted()}),(function(){return r.movementFinished()}));var h=r.m_options.customAntialiasSettings;if(r.mapRenderingManager=new S.MapRenderingManager(l,c,r.m_options.dynamicPixelRatio,h),r.m_animatedExtrusionHandler=new y.AnimatedExtrusionHandler(u(r)),r.m_enablePolarDataSource){var x=void 0!==e.polarStyleSetName?e.polarStyleSetName:"polar";r.m_polarDataSource=new U.PolarTileDataSource({styleSetName:x,geometryLevelOffset:e.polarGeometryLevelOffset}),r.updatePolarDataSource()}return r.m_taskScheduler.addEventListener(f.Update,(function(){r.update()})),void 0!==e.throttlingEnabled&&(r.m_taskScheduler.throttlingEnabled=e.throttlingEnabled),r.m_themeManager=new F.MapViewThemeManager(u(r),r.m_uriResolver),r.m_textElementsRenderer=r.createTextRenderer(),r.setTheme(v.getOptionValue(r.m_options.theme,$.theme)),r.update(),r}return s(n,[{key:"lights",get:function(){return this.m_sceneEnvironment.lights}},{key:"taskQueue",get:function(){return this.m_taskScheduler.taskQueue}},{key:"renderLabels",get:function(){return this.m_renderLabels},set:function(e){this.m_renderLabels=e}},{key:"delayLabelsUntilMovementFinished",get:function(){return this.textElementsRenderer.delayLabelsUntilMovementFinished},set:function(e){this.textElementsRenderer.delayLabelsUntilMovementFinished=e}},{key:"textElementsRenderer",get:function(){return this.m_textElementsRenderer}},{key:"cameraMovementDetector",get:function(){return this.m_movementDetector}},{key:"animatedExtrusionHandler",get:function(){return this.m_animatedExtrusionHandler}},{key:"tileGeometryManager",get:function(){return this.m_tileGeometryManager}},{key:"enableMixedLod",get:function(){return this.m_enableMixedLod},set:function(e){this.m_enableMixedLod!==e&&(this.m_enableMixedLod=e,this.createVisibleTileSet(),this.update())}},{key:"tileWrappingEnabled",get:function(){return this.m_tileWrappingEnabled},set:function(e){this.projection.type!==m.ProjectionType.Spherical?(e!==this.m_tileWrappingEnabled&&(this.m_tileWrappingEnabled=e,this.createVisibleTileSet()),this.update()):K.warn("Setting this with spherical projection has no affect. Was this intended?")}},{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.DISPOSE_EVENT.time=Date.now(),this.dispatchEvent(this.DISPOSE_EVENT),this.m_disposed=!0,this.m_movementFinishedUpdateTimerId&&(clearTimeout(this.m_movementFinishedUpdateTimerId),this.m_movementFinishedUpdateTimerId=void 0),void 0!==this.m_animationFrameHandle&&(cancelAnimationFrame(this.m_animationFrameHandle),this.m_animationFrameHandle=void 0),this.canvas.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas.removeEventListener("webglcontextrestored",this.onWebGLContextRestored);var t,r=a(this.m_tileDataSources);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.dispose()}}catch(o){r.e(o)}finally{r.f()}this.m_visibleTiles.clearTileCache(),this.m_textElementsRenderer.clearRenderStates(),this.m_renderer.dispose(),e&&this.m_renderer.forceContextLoss(),this.m_themeManager.dispose(),this.m_tileGeometryManager.clear(),this.m_movementDetector.dispose(),M.ConcurrentDecoderFacade.destroyIfTerminated(),E.ConcurrentTilerFacade.destroyIfTerminated(),this.m_taskScheduler.clearQueuedTasks(),l(c(n.prototype),"dispose",this).call(this)}},{key:"disposed",get:function(){return this.m_disposed}},{key:"resourceComputationType",get:function(){return this.m_visibleTiles.resourceComputationType},set:function(e){this.m_visibleTiles.resourceComputationType=e}},{key:"getCacheSize",value:function(){return this.m_visibleTiles.getDataSourceCacheSize()}},{key:"setCacheSize",value:function(e,t){this.m_visibleTiles.setDataSourceCacheSize(e),t=void 0!==t?t:e/2,this.m_visibleTiles.setNumberOfVisibleTiles(Math.floor(t)),this.m_themeManager.updateCache(),this.m_textElementsRenderer.invalidateCache(),this.update()}},{key:"extendedFrustumCulling",get:function(){return void 0===this.m_options.extendedFrustumCulling||this.m_visibleTileSetOptions.extendedFrustumCulling},set:function(e){this.m_visibleTileSetOptions.extendedFrustumCulling=e}},{key:"lockVisibleTileSet",get:function(){return this.m_visibleTileSetLock},set:function(e){this.m_visibleTileSetLock=e}},{key:"pointOfView",get:function(){return this.m_pointOfView},set:function(e){this.m_pointOfView=e,this.update()}},{key:"loadPostEffects",value:function(e){var t=this;fetch(e).then((function(e){return e.json()})).then((function(e){t.m_postEffects=e,t.setPostEffects()}))}},{key:"postEffects",get:function(){return this.m_postEffects},set:function(e){this.m_postEffects=e,this.setPostEffects()}},{key:"theme",get:function(){return this.m_themeManager.theme},set:function(e){this.setTheme(e)}},{key:"setTheme",value:function(){var e=i(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.m_themeManager.setTheme(t);case 2:return n=e.sent,this.THEME_LOADED_EVENT.time=Date.now(),this.dispatchEvent(this.THEME_LOADED_EVENT),this.update(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTheme",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.m_themeManager.getTheme();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uriResolver",get:function(){return this.m_uriResolver}},{key:"forceCameraAspect",get:function(){return this.m_forceCameraAspect},set:function(e){this.m_forceCameraAspect=e}},{key:"languages",get:function(){return this.m_languages},set:function(e){var t=this;this.m_languages=e,this.m_tileDataSources.forEach((function(e){e.setLanguages(t.m_languages)})),this.update()}},{key:"politicalView",get:function(){return this.m_politicalView},set:function(e){this.m_politicalView!==e&&(this.m_politicalView=e,this.m_tileDataSources.forEach((function(t){t.setPoliticalView(e)})))}},{key:"copyrightInfo",get:function(){return this.m_copyrightInfo}},{key:"disableFading",get:function(){return this.m_textElementsRenderer.disableFading},set:function(e){this.m_textElementsRenderer.disableFading=e}},{key:"frameNumber",get:function(){return this.m_frameNumber}},{key:"resetFrameNumber",value:function(){this.m_frameNumber=0,this.m_previousFrameTimeStamp=void 0}},{key:"addEventListener",value:function(e,t){l(c(n.prototype),"addEventListener",this).call(this,e,t)}},{key:"removeEventListener",value:function(e,t){l(c(n.prototype),"removeEventListener",this).call(this,e,t)}},{key:"canvas",get:function(){return this.m_options.canvas}},{key:"collisionDebugCanvas",get:function(){return this.m_collisionDebugCanvas}},{key:"scene",get:function(){return this.m_scene}},{key:"overlayScene",get:function(){return this.m_overlayScene}},{key:"sceneEnvironment",get:function(){return this.m_sceneEnvironment}},{key:"camera",get:function(){return this.m_camera}},{key:"renderer",get:function(){return this.m_renderer}},{key:"clearColor",get:function(){var e=this.m_renderer.getClearColor(Q.color);return void 0!==e?e.getHex():0},set:function(e){this.m_renderer.setClearColor(e)}},{key:"clearAlpha",get:function(){var e=this.m_renderer.getClearAlpha();return void 0!==e?e:0},set:function(e){this.m_renderer.setClearAlpha(e)}},{key:"projection",get:function(){return this.m_visibleTileSetOptions.projection},set:function(e){var t=this.tilt,n=this.heading;this.m_visibleTileSetOptions.projection=e,this.updatePolarDataSource(),this.clearTileCache(),this.textElementsRenderer.clearRenderStates(),this.m_visibleTiles=this.createVisibleTileSet(),this.geoMaxBounds=this.geoMaxBounds,this.lookAtImpl({tilt:t,heading:n})}},{key:"clipPlanesEvaluator",get:function(){return this.m_visibleTileSetOptions.clipPlanesEvaluator},set:function(e){this.m_visibleTileSetOptions.clipPlanesEvaluator=e}},{key:"focalLength",get:function(){var e;return null!==(e=b.CameraUtils.getFocalLength(this.m_camera))&&void 0!==e?e:0}},{key:"target",get:function(){return this.m_targetGeoPos}},{key:"worldTarget",get:function(){return this.m_targetWorldPos}},{key:"targetDistance",get:function(){return this.m_targetDistance}},{key:"viewRanges",get:function(){return this.m_viewRanges}},{key:"geoCenter",get:function(){return this.projection.unprojectPoint(this.m_camera.position).normalized()},set:function(e){if(void 0!==e.altitude)this.projection.projectPoint(e,this.m_camera.position);else{var t=this.geoCenter.altitude;this.projection.projectPoint(new m.GeoCoordinates(e.latitude,e.longitude,t),this.m_camera.position)}this.update()}},{key:"mapAnchors",get:function(){return this.m_mapAnchors}},{key:"worldCenter",get:function(){return this.m_camera.position}},{key:"pickHandler",get:function(){return this.m_pickHandler}},{key:"imageCache",get:function(){return this.m_themeManager.imageCache}},{key:"userImageCache",get:function(){return this.m_userImageCache}},{key:"poiManager",get:function(){return this.m_poiManager}},{key:"poiTableManager",get:function(){return this.m_poiTableManager}},{key:"minCameraHeight",get:function(){return this.m_minCameraHeight}},{key:"minZoomLevel",get:function(){return this.m_minZoomLevel},set:function(e){this.m_minZoomLevel=e,this.update()}},{key:"maxZoomLevel",get:function(){return this.m_maxZoomLevel},set:function(e){this.m_maxZoomLevel=e,this.update()}},{key:"geoMaxBounds",get:function(){return this.m_geoMaxBounds},set:function(e){this.m_geoMaxBounds=e,this.m_worldMaxBounds=this.m_geoMaxBounds?this.projection.projectBox(this.m_geoMaxBounds,this.projection.type===m.ProjectionType.Planar?new g.Box3:new m.OrientedBox3):void 0}},{key:"worldMaxBounds",get:function(){return this.m_worldMaxBounds}},{key:"zoomLevel",get:function(){return this.m_zoomLevel},set:function(e){this.lookAtImpl({zoomLevel:e})}},{key:"tilt",get:function(){return g.MathUtils.radToDeg(this.m_pitch)},set:function(e){this.lookAtImpl({tilt:e})}},{key:"heading",get:function(){return-g.MathUtils.radToDeg(this.m_yaw)},set:function(e){this.lookAtImpl({heading:e})}},{key:"env",get:function(){return this.m_env}},{key:"storageLevel",get:function(){return g.MathUtils.clamp(Math.floor(this.m_zoomLevel),this.m_minZoomLevel,this.m_maxZoomLevel)}},{key:"viewportHeight",get:function(){return this.canvas.height}},{key:"nativeWebglAntialiasEnabled",get:function(){return void 0===this.m_options.enableNativeWebglAntialias?this.pixelRatio<2:this.m_options.enableNativeWebglAntialias}},{key:"dataSources",get:function(){return this.m_tileDataSources}},{key:"setFovCalculation",value:function(e){this.m_options.fovCalculation=e,this.updateCameras()}},{key:"getDataSourceByName",value:function(e){return this.m_tileDataSources.find((function(t){return t.name===e}))}},{key:"getDataSourcesByStyleSetName",value:function(e){return this.m_tileDataSources.filter((function(t){return t.styleSetName===e}))}},{key:"isDataSourceEnabled",value:function(e){return e.enabled&&e.ready()&&this.m_connectedDataSources.has(e.name)&&e.isVisible(this.zoomLevel)}},{key:"addDataSource",value:function(){var e=i(r.mark((function e(t){var n,i,a,o,s=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.getDataSourceByName(t.name)){e.next=3;break}throw new Error('A DataSource with the name "'.concat(t.name,'" already exists in this MapView.'));case 3:return t.attach(this),t.setEnableElevationOverlay(void 0!==this.m_elevationProvider),a=this.m_tileDataSources.find((function(e){return!0===e.addGroundPlane&&!(e instanceof x.BackgroundDataSource)})),!0===t.addGroundPlane&&void 0!==a&&console.warn("The DataSources ".concat(t.name," and ").concat(a.name," both have a ground plane added, this will cause problems with the fallback logic, see HARP-14728 & HARP-15488.")),this.m_tileDataSources.push(t),null===(n=this.m_sceneEnvironment)||void 0===n||n.updateBackgroundDataSource(),e.prev=9,e.next=12,t.connect();case 12:if(!!this.m_tileDataSources.includes(t)){e.next=15;break}return e.abrupt("return");case 15:return t.addEventListener(f.Update,(function(){s.update()})),e.next=18,this.getTheme();case 18:if(o=e.sent,t.setLanguages(this.m_languages),void 0===o||void 0===o.styles){e.next=23;break}return e.next=23,t.setTheme(o);case 23:this.m_connectedDataSources.add(t.name),this.dispatchEvent({type:f.DataSourceConnect,dataSourceName:t.name}),this.update(),e.next=33;break;case 28:e.prev=28,e.t0=e.catch(9),K.error("Failed to connect to datasource ".concat(t.name,": ").concat(null!==(i=e.t0.message)&&void 0!==i?i:e.t0)),this.m_failedDataSources.add(t.name),this.dispatchEvent({type:f.DataSourceConnect,dataSourceName:t.name,error:e.t0});case 33:case"end":return e.stop()}}),e,this,[[9,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeDataSource",value:function(e){var t=this.m_tileDataSources.indexOf(e);-1!==t&&(e.detach(this),this.m_visibleTiles.removeDataSource(e),this.m_tileDataSources.splice(t,1),this.m_connectedDataSources.delete(e.name),this.m_failedDataSources.delete(e.name),this.m_sceneEnvironment.updateBackgroundDataSource(),this.update())}},{key:"visibleTileSet",get:function(){return this.m_visibleTiles}},{key:"addOverlayText",value:function(e){this.m_textElementsRenderer.addOverlayText(e),this.update()}},{key:"clearOverlayText",value:function(){this.m_textElementsRenderer.clearOverlayText()}},{key:"lookAt",value:function(e,t,n,r){if(m.isGeoCoordinatesLike(e)){var i={target:e,zoomLevel:void 0!==t?W.MapViewUtils.calculateZoomLevelFromDistance(this,t):void 0,tilt:n,heading:r};this.lookAtImpl(i)}else"object"===typeof e&&this.lookAtImpl(e)}},{key:"setCameraGeolocationAndZoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.geoCenter=e;var i=Math.min(W.MapViewUtils.MAX_TILT_DEG,r);if(this.projection.type===m.ProjectionType.Spherical){var a=Math.asin(m.EarthConstants.EQUATORIAL_RADIUS/(W.MapViewUtils.calculateDistanceToGroundFromZoomLevel(this,t)+m.EarthConstants.EQUATORIAL_RADIUS)),o=g.MathUtils.radToDeg(a);i=Math.min(i,o)}W.MapViewUtils.zoomOnTargetPosition(this,0,0,t),W.MapViewUtils.setRotation(this,n,i),this.update()}},{key:"setDynamicProperty",value:function(e,t){if(e.startsWith("$"))throw new Error("failed to update the value of the dynamic property '".concat(e,"'"));this.m_env.entries[e]=t,this.update()}},{key:"removeDynamicProperty",value:function(e){if(e.startsWith("$"))throw new Error("failed to remove the dynamic property '".concat(e,"'"));delete this.m_env.entries[e],this.update()}},{key:"animating",get:function(){return this.m_animationCount>0}},{key:"beginAnimation",value:function(){0===this.m_animationCount++&&(this.update(),this.ANIMATION_STARTED_EVENT.time=Date.now(),this.dispatchEvent(this.ANIMATION_STARTED_EVENT))}},{key:"endAnimation",value:function(){this.m_animationCount>0&&--this.m_animationCount,0===this.m_animationCount&&(this.ANIMATION_FINISHED_EVENT.time=Date.now(),this.dispatchEvent(this.ANIMATION_FINISHED_EVENT))}},{key:"cameraIsMoving",get:function(){return this.m_movementDetector.cameraIsMoving}},{key:"isDynamicFrame",get:function(){return this.cameraIsMoving||this.animating||this.m_updatePending||this.m_animatedExtrusionHandler.isAnimating}},{key:"pixelToWorld",get:function(){if(void 0===this.m_pixelToWorld){v.assert(void 0!==this.m_options.fovCalculation);var e=this.m_targetDistance,t=b.CameraUtils.getFocalLength(this.m_camera);v.assert(void 0!==t),this.m_pixelToWorld=b.CameraUtils.convertScreenToWorldSize(t,e,1)}return this.m_pixelToWorld}},{key:"worldToPixel",get:function(){return 1/this.pixelToWorld}},{key:"pixelRatio",get:function(){return void 0!==this.m_pixelRatio?this.m_pixelRatio:"undefined"!==typeof window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1},set:function(e){this.m_pixelRatio=e,this.renderer.getPixelRatio()!==this.pixelRatio&&this.renderer.setPixelRatio(this.pixelRatio)}},{key:"maxFps",get:function(){return this.m_options.maxFps},set:function(e){this.m_options.maxFps=e,this.m_taskScheduler.maxFps=e}},{key:"dynamicPixelRatio",get:function(){return this.mapRenderingManager.lowResPixelRatio},set:function(e){this.mapRenderingManager.lowResPixelRatio=e}},{key:"getScreenPosition",value:function(e){m.isVector3Like(e)?Q.vector3[0].copy(e):this.projection.projectPoint(m.GeoCoordinates.fromObject(e),Q.vector3[0]);var t=this.m_screenProjector.project(Q.vector3[0]);if(void 0!==t){var n=this.getCanvasClientSize(),r=n.width,i=n.height;t.x=t.x+r/2,t.y=i-(t.y+i/2)}return t}},{key:"getWorldPositionAt",value:function(e,t,n){this.m_raycaster.setFromCamera(this.getNormalizedScreenCoordinates(e,t),this.m_camera);var r=this.projection.type===m.ProjectionType.Spherical?this.m_raycaster.ray.intersectSphere(this.m_sphere,Q.vector3[0]):this.m_raycaster.ray.intersectPlane(this.m_plane,Q.vector3[0]);if(null===r&&!0===n){var i=this.m_camera.getWorldDirection(Q.vector3[0]).dot(this.m_raycaster.ray.direction);return Q.vector3[0].copy(this.m_raycaster.ray.direction).multiplyScalar(this.m_camera.far/i).add(this.m_camera.position)}return r}},{key:"getGeoCoordinatesAt",value:function(e,t,n){var r=this.getWorldPositionAt(e,t,n);if(!r)return null;var i=this.projection.unprojectPoint(r);return this.tileWrappingEnabled||this.projection.type!==m.ProjectionType.Planar||(i.longitude=g.MathUtils.clamp(i.longitude,-180,180)),i}},{key:"getNormalizedScreenCoordinates",value:function(e,t){var n=this.getCanvasClientSize(),r=n.width,i=n.height;return new g.Vector3(e/r*2-1,-t/i*2+1,0)}},{key:"intersectMapObjects",value:function(e,t,n){return this.m_pickHandler.intersectMapObjects(e,t,n)}},{key:"resize",value:function(e,t){this.m_renderer.setSize(e,t,!1),this.m_renderer.getPixelRatio()!==this.pixelRatio&&this.m_renderer.setPixelRatio(this.pixelRatio),void 0!==this.mapRenderingManager&&this.mapRenderingManager.setSize(e,t),void 0!==this.collisionDebugCanvas&&(this.collisionDebugCanvas.width=e,this.collisionDebugCanvas.height=t),this.updateCameras(),this.update(),this.dispatchEvent({type:f.Resize,size:{width:e,height:t}})}},{key:"renderSync",value:function(e){void 0===e&&(e=v.PerformanceTimer.now()),this.render(e)}},{key:"update",value:function(){this.disposed?K.warn("update(): MapView has been disposed of."):(this.dispatchEvent(this.UPDATE_EVENT),this.m_updatePending||(this.m_updatePending=!0,this.startRenderLoop()))}},{key:"updatePending",get:function(){return this.m_updatePending}},{key:"requestUpdateIfNeeded",value:function(){this.update()}},{key:"clearTileCache",value:function(e,t){if(void 0!==this.m_visibleTiles){if(void 0!==e){var n=this.getDataSourceByName(e);n&&(this.m_visibleTiles.clearTileCache(n,t),n.clearCache())}else this.m_visibleTiles.clearTileCache(void 0,t),this.m_tileDataSources.forEach((function(e){return e.clearCache()}));void 0!==this.m_elevationProvider&&this.m_elevationProvider.clearCache()}}},{key:"forEachVisibleTile",value:function(e){this.m_visibleTiles.forEachVisibleTile(e)}},{key:"forEachCachedTile",value:function(e){this.m_visibleTiles.forEachCachedTile(e)}},{key:"markTilesDirty",value:function(e,t){this.m_visibleTiles.markTilesDirty(e,t),this.update()}},{key:"setElevationSource",value:function(){var e=i(r.mark((function e(t,n,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.m_elevationSource&&this.m_elevationSource!==t&&this.removeDataSource(this.m_elevationSource),this.m_tileDataSources.includes(t)){e.next=5;break}return e.next=5,this.addDataSource(t);case 5:if(this.m_elevationSource=t,this.m_elevationRangeSource=n,this.m_elevationRangeSource.ready()){e.next=10;break}return e.next=10,this.m_elevationRangeSource.connect();case 10:this.m_elevationProvider=i,this.dataSources.forEach((function(e){e.setEnableElevationOverlay(!0)})),this.m_tileGeometryManager.setTileUpdateCallback((function(e){P.overlayOnElevation(e)})),this.clearTileCache();case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"clearElevationSource",value:function(e){this.removeDataSource(e),this.m_elevationSource=void 0,this.m_elevationRangeSource=void 0,this.m_elevationProvider=void 0,this.dataSources.forEach((function(e){e.setEnableElevationOverlay(!1)})),this.m_tileGeometryManager.setTileUpdateCallback(void 0),this.clearTileCache()}},{key:"fog",get:function(){return this.m_sceneEnvironment.fog}},{key:"setPostEffects",value:function(){this.mapRenderingManager.bloom.enabled=!1,this.mapRenderingManager.outline.enabled=!1,this.mapRenderingManager.vignette.enabled=!1,this.mapRenderingManager.sepia.enabled=!1,void 0!==this.m_postEffects&&(void 0!==this.m_postEffects.bloom&&(this.mapRenderingManager.bloom=this.m_postEffects.bloom),void 0!==this.m_postEffects.outline&&(this.mapRenderingManager.outline.enabled=this.m_postEffects.outline.enabled,this.mapRenderingManager.updateOutline(this.m_postEffects.outline)),void 0!==this.m_postEffects.vignette&&(this.mapRenderingManager.vignette=this.m_postEffects.vignette),void 0!==this.m_postEffects.sepia&&(this.mapRenderingManager.sepia=this.m_postEffects.sepia))}},{key:"elevationProvider",get:function(){return this.m_elevationProvider}},{key:"throttlingEnabled",get:function(){return!0===this.m_taskScheduler.throttlingEnabled},set:function(e){this.m_taskScheduler.throttlingEnabled=e}},{key:"shadowsEnabled",get:function(){return!0===this.m_options.enableShadows},set:function(e){void 0!==this.m_renderer.shadowMap&&e!==this.m_renderer.shadowMap.enabled&&(this.m_options.enableShadows=e,this.m_renderer.shadowMap.enabled=e,this.m_renderer.shadowMap.type=g.PCFSoftShadowMap,this.clearTileCache())}},{key:"extractAttitude",value:function(){var e=this.m_camera,t=this.projection,n=Q.vector3[1],r=Q.transform[0],i=Q.matrix4[1];n.setFromMatrixPosition(e.matrixWorld),t.localTangentSpace(this.m_targetGeoPos,r),i.makeBasis(r.xAxis,r.yAxis,r.zAxis),Q.matrix4[0].copy(i).invert().multiply(e.matrixWorld),r.xAxis.setFromMatrixColumn(Q.matrix4[0],0),r.yAxis.setFromMatrixColumn(Q.matrix4[0],1),r.zAxis.setFromMatrixColumn(Q.matrix4[0],2);var a=0,o=0,s=0,u=r.zAxis.dot(n.set(0,0,1));return u<1-1e-10?u>1e-10-1?(a=Math.atan2(r.zAxis.x,-r.zAxis.y),o=Math.acos(r.zAxis.z),s=Math.atan2(r.xAxis.x,r.yAxis.z)):(a=-Math.atan2(-r.yAxis.x,r.xAxis.x),o=180,s=0):(a=Math.atan2(-r.yAxis.x,r.xAxis.x),o=0,s=0),{yaw:a,pitch:o,roll:s}}},{key:"lookAtImpl",value:function(e){var t,n=this,r=Math.min(v.getOptionValue(e.tilt,this.tilt),W.MapViewUtils.MAX_TILT_DEG),i=v.getOptionValue(e.heading,this.heading),a=void 0!==e.zoomLevel?W.MapViewUtils.calculateDistanceFromZoomLevel(this,g.MathUtils.clamp(e.zoomLevel,this.m_minZoomLevel,this.m_maxZoomLevel)):void 0!==e.distance?e.distance:this.m_targetDistance;if(void 0!==e.bounds){var o;if(e.bounds instanceof m.GeoBox)t=e.target?m.GeoCoordinates.fromObject(e.target):e.bounds.center,o=W.MapViewUtils.geoBoxToGeoPoints(e.bounds);else if(e.bounds instanceof m.GeoPolygon)t=e.bounds.getCentroid(),o=e.bounds.coordinates;else if(m.isGeoBoxExtentLike(e.bounds)){t=e.target?m.GeoCoordinates.fromObject(e.target):this.target;var s=m.GeoBox.fromCenterAndExtents(t,e.bounds);o=W.MapViewUtils.geoBoxToGeoPoints(s)}else{if(!Array.isArray(e.bounds))throw Error("#lookAt: Invalid 'bounds' value");o=e.bounds,void 0!==e.target&&(t=m.GeoCoordinates.fromObject(e.target))}e.bounds instanceof m.GeoBox||e.bounds instanceof m.GeoPolygon||!this.m_tileWrappingEnabled||this.projection.type!==m.ProjectionType.Planar||(o=W.MapViewUtils.wrapGeoPointsToScreen(o,t));var u=o.map((function(e){return n.projection.projectPoint(m.GeoCoordinates.fromObject(e),new g.Vector3)})),l=new g.Vector3;if(void 0===t)(new g.Box3).setFromPoints(u).getCenter(l),this.projection.scalePointToSurface(l),t=this.projection.unprojectPoint(l);else this.projection.projectPoint(t,l);return void 0!==e.zoomLevel||void 0!==e.distance?this.lookAtImpl({tilt:r,heading:i,distance:a,target:t}):this.lookAtImpl(W.MapViewUtils.getFitBoundsLookAtParams(t,l,u,{tilt:r,heading:i,minDistance:W.MapViewUtils.calculateDistanceFromZoomLevel(this,this.maxZoomLevel),projection:this.projection,camera:this.camera}))}t=void 0!==e.target?m.GeoCoordinates.fromObject(e.target):this.target,W.MapViewUtils.getCameraRotationAtTarget(this.projection,t,-i,r,this.camera.quaternion),W.MapViewUtils.getCameraPositionFromTargetCoordinates(t,a,-i,r,this.projection,this.camera.position),this.camera.updateMatrixWorld(!0),this.updateLookAtSettings(),this.update()}},{key:"updatePolarDataSource",value:function(){var e=this.m_polarDataSource;if(!0===this.m_enablePolarDataSource&&void 0!==e){var t=this.getDataSourceByName(e.name);this.projection.type===m.ProjectionType.Spherical?void 0===t&&this.addDataSource(e):void 0!==t&&this.removeDataSource(e)}}},{key:"updateCameras",value:function(e){var t;this.m_camera.updateMatrixWorld(!1),this.updateLookAtSettings();var n=this.m_renderer.getSize(Q.vector2[0]),r=n.width,i=n.height;this.m_camera.aspect=void 0!==this.m_forceCameraAspect?this.m_forceCameraAspect:r/i,this.setFovOnCamera(this.m_options.fovCalculation,i);var a=this.projection.getScaleFactor(this.camera.position),o=a*this.m_tileDataSources.reduce((function(e,t){return Math.max(e,t.maxGeometryHeight)}),0),s=a*this.m_tileDataSources.reduce((function(e,t){return Math.min(e,t.minGeometryHeight)}),0);Object.assign(this.m_viewRanges,void 0===e?this.m_visibleTiles.updateClipPlanes(o,s):e),this.m_camera.near=this.m_viewRanges.near,this.m_camera.far=this.m_viewRanges.far,this.m_camera.updateProjectionMatrix(),this.m_rteCamera.copy(this.m_camera),this.m_rteCamera.position.setScalar(0),this.m_rteCamera.updateMatrixWorld(!0),null===(t=this.m_textElementsRenderer)||void 0===t||t.updateCamera(),this.m_screenProjector.update(this.camera,r,i),this.m_pixelToWorld=void 0,this.m_sceneEnvironment.update()}},{key:"updateLookAtSettings",value:function(){var e=W.MapViewUtils.getTargetAndDistance(this.projection,this.camera,this.elevationProvider),t=e.target,n=e.distance;if(e.final||this.update(),this.geoMaxBounds){var r=W.MapViewUtils.constrainTargetAndDistanceToViewBounds(t,n,this);t=r.target,n=r.distance}this.m_targetWorldPos.copy(t),this.m_targetGeoPos=this.projection.unprojectPoint(this.m_targetWorldPos),this.m_targetDistance=n,this.m_zoomLevel=W.MapViewUtils.calculateZoomLevelFromDistance(this,this.m_targetDistance);var i=this.extractAttitude(),a=i.yaw,o=i.pitch,s=i.roll;this.m_yaw=a,this.m_pitch=o,this.m_roll=s}},{key:"updateEnv",value:function(){this.m_env.entries.$zoom=this.m_zoomLevel,this.m_env.entries.$pixelToMeters=this.pixelToWorld,this.m_env.entries.$frameNumber=this.m_frameNumber}},{key:"ndcToView",value:function(e,t){return t.set(e.x,e.y,e.z).applyMatrix4(this.camera.projectionMatrixInverse).applyMatrix4(this.m_rteCamera.matrixWorld),t}},{key:"renderLoop",value:function(e){if(!0!==this.m_options.synchronousRendering&&!this.disposed){if(0===this.maxFps)this.render(e);else{var t=1e3/this.maxFps;e>=(void 0===this.m_previousFrameTimeStamp?0:this.m_previousFrameTimeStamp)+t-3&&this.render(e)}this.m_updatePending||this.animating?this.m_animationFrameHandle=requestAnimationFrame(this.handleRequestAnimationFrame):this.m_animationFrameHandle=void 0}}},{key:"startRenderLoop",value:function(){void 0!==this.m_animationFrameHandle||this.m_options.synchronousRendering||(this.m_animationFrameHandle=requestAnimationFrame(this.handleRequestAnimationFrame))}},{key:"getEnabledTileDataSources",value:function(){var e,t=[],n=a(this.m_tileDataSources);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.isDataSourceEnabled(r)&&t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"render",value:function(e){var t=this;if(!this.m_drawing)if(this.disposed)K.warn("render(): MapView has been disposed of.");else{var n;this.RENDER_EVENT.time=e,this.dispatchEvent(this.RENDER_EVENT),this.m_tileObjectRenderer.prepareRender(),++this.m_frameNumber;var r,i,a,o,s,u,l=V.PerformanceStatistics.instance,c=l.enabled;if(c){if(n=l.currentFrame,void 0!==this.m_previousFrameTimeStamp){var d=e-this.m_previousFrameTimeStamp;n.setValue("render.fps",1e3/d)}l.storeAndClearFrameInfo(),(n=n).setValue("renderCount.frameNumber",this.m_frameNumber)}if(this.m_previousFrameTimeStamp=e,this.m_renderer.info.reset(),this.m_updatePending=!1,this.m_thisFrameTilesChanged=void 0,this.m_drawing=!0,this.m_renderer.getPixelRatio()!==this.pixelRatio&&this.m_renderer.setPixelRatio(this.pixelRatio),this.updateCameras(),this.updateEnv(),this.m_renderer.clear(),this.m_sceneRoot.children.length=0,this.m_overlaySceneRoot.children.length=0,c&&(r=v.PerformanceTimer.now()),!this.lockVisibleTileSet){var h=this.m_visibleTiles.updateRenderList(this.storageLevel,Math.floor(this.zoomLevel),this.getEnabledTileDataSources(),this.m_frameNumber,this.m_elevationRangeSource);h.viewRangesChanged&&this.updateCameras(h.viewRanges)}c&&(i=v.PerformanceTimer.now());var p=this.m_visibleTiles.dataSourceTileList;if(p.forEach((function(e){var n=e.zoomLevel;e.renderedTiles.forEach((function(e){t.m_tileObjectRenderer.render(e,n,t.zoomLevel,t.m_camera.position,t.m_sceneRoot),e.frameNumLastVisible=t.m_frameNumber}))})),this.m_initialTextPlacementDone||this.m_firstFrameComplete||this.isDynamicFrame||this.m_themeManager.isUpdating()||!this.m_poiTableManager.finishedLoading||!this.m_visibleTiles.allVisibleTilesLoaded||this.m_connectedDataSources.size+this.m_failedDataSources.size!==this.m_tileDataSources.length||this.m_textElementsRenderer.loading||(this.m_initialTextPlacementDone=!0),this.m_mapAnchors.update(this.projection,this.camera.position,this.m_sceneRoot,this.m_overlaySceneRoot),this.m_animatedExtrusionHandler.update(this.zoomLevel),void 0!==n&&(n.addValue("renderCount.numTilesRendered",0),n.addValue("renderCount.numTilesVisible",0),n.addValue("renderCount.numTilesLoading",0),p.forEach((function(e){e.zoomLevel;var t=e.renderedTiles,r=e.visibleTiles,i=e.numTilesLoading;n.addValue("renderCount.numTilesRendered",t.size),n.addValue("renderCount.numTilesVisible",r.length),n.addValue("renderCount.numTilesLoading",i)}))),this.m_movementDetector.checkCameraMoved(this,e)){var m=this.geoCenter,g=m.latitude,y=m.longitude,x=m.altitude;this.dispatchEvent({type:f.CameraPositionChanged,latitude:g,longitude:y,altitude:x,yaw:this.m_yaw,pitch:this.m_pitch,roll:this.m_roll,tilt:this.tilt,heading:this.heading,zoom:this.zoomLevel})}var _=void 0!==this.m_pointOfView?this.m_pointOfView:this.m_rteCamera;if(this.renderLabels&&!this.m_pointOfView&&this.m_textElementsRenderer.placeText(p,e),c&&(a=v.PerformanceTimer.now()),this.mapRenderingManager.render(this.m_renderer,this.m_scene,_,!this.isDynamicFrame),c&&(o=v.PerformanceTimer.now()),this.renderLabels&&!this.m_pointOfView&&this.m_textElementsRenderer.renderText(this.m_viewRanges.maximum),this.m_overlaySceneRoot.children.length>0&&this.m_renderer.render(this.m_overlayScene,_),c&&(s=v.PerformanceTimer.now()),this.m_firstFrameRendered||(this.m_firstFrameRendered=!0,c&&l.appResults.set("firstFrame",e),this.FIRST_FRAME_EVENT.time=e,this.dispatchEvent(this.FIRST_FRAME_EVENT)),this.m_visibleTiles.disposePendingTiles(),this.m_drawing=!1,this.checkCopyrightUpdates(),void 0!==this.m_taskSchedulerTimeout&&clearTimeout(this.m_taskSchedulerTimeout),this.m_taskSchedulerTimeout=setTimeout((function(){t.m_taskSchedulerTimeout=void 0,t.m_taskScheduler.processPending(e)}),0),void 0!==n){var b=(u=v.PerformanceTimer.now())-e;n.setValue("render.setupTime",r-e),n.setValue("render.cullTime",i-r),n.setValue("render.textPlacementTime",a-i),n.setValue("render.drawTime",o-a),n.setValue("render.textDrawTime",s-o),n.setValue("render.cleanupTime",u-s),n.setValue("render.frameRenderTime",b),n.setValue("render.fullFrameTime",b),n.setValue("render.geometryCreationTime",0),l.addWebGLInfo(this.m_renderer.info),l.addMemoryInfo()}this.DID_RENDER_EVENT.time=e,this.dispatchEvent(this.DID_RENDER_EVENT),!this.textElementsRenderer.loading&&this.m_visibleTiles.allVisibleTilesLoaded&&this.m_initialTextPlacementDone&&!this.m_animatedExtrusionHandler.isAnimating&&(!1===this.m_firstFrameComplete&&(this.m_firstFrameComplete=!0,c&&l.appResults.set("firstFrameComplete",e)),this.FRAME_COMPLETE_EVENT.time=e,this.dispatchEvent(this.FRAME_COMPLETE_EVENT))}}},{key:"setupCamera",value:function(){v.assert(void 0!==this.m_visibleTiles),this.m_options.target=m.GeoCoordinates.fromObject(v.getOptionValue(this.m_options.target,$.target)),this.m_options.target.altitude=0,this.m_options.tilt=v.getOptionValue(this.m_options.tilt,$.tilt),this.m_options.heading=v.getOptionValue(this.m_options.heading,$.heading),this.m_options.zoomLevel=v.getOptionValue(this.m_options.zoomLevel,$.zoomLevel),this.lookAtImpl(this.m_options);var e=this.getCanvasClientSize(),t=e.width,n=e.height;this.resize(t,n)}},{key:"createVisibleTileSet",value:function(){v.assert(void 0!==this.m_tileGeometryManager),this.m_visibleTiles&&(this.m_visibleTiles.clearTileCache(),this.m_visibleTiles.disposePendingTiles());var e=void 0===this.m_enableMixedLod?this.projection.type===m.ProjectionType.Spherical:this.m_enableMixedLod;return this.m_visibleTiles=new q.VisibleTileSet(new A.FrustumIntersection(this.m_camera,this,this.m_visibleTileSetOptions.extendedFrustumCulling,this.m_tileWrappingEnabled,e,this.m_lodMinTilePixelSize),this.m_tileGeometryManager,this.m_visibleTileSetOptions,this.taskQueue),this.m_visibleTiles}},{key:"movementStarted",value:function(){this.m_textElementsRenderer.movementStarted(),this.MOVEMENT_STARTED_EVENT.time=Date.now(),this.dispatchEvent(this.MOVEMENT_STARTED_EVENT)}},{key:"movementFinished",value:function(){var e=this;this.m_textElementsRenderer.movementFinished(),this.MOVEMENT_FINISHED_EVENT.time=Date.now(),this.dispatchEvent(this.MOVEMENT_FINISHED_EVENT),this.animating||(void 0!==this.m_movementFinishedUpdateTimerId&&clearTimeout(this.m_movementFinishedUpdateTimerId),this.m_movementFinishedUpdateTimerId=setTimeout((function(){e.m_movementFinishedUpdateTimerId=void 0,e.update()}),0))}},{key:"checkIfTilesChanged",value:function(){if(void 0!==this.m_thisFrameTilesChanged)return this.m_thisFrameTilesChanged;var e=this.m_visibleTiles.dataSourceTileList,t=[];t.length=0,e.forEach((function(e){var n=e.dataSource;e.renderedTiles.forEach((function(e){t.push(n.name+"-"+e.tileKey.mortonCode())}))})),t.sort();var n=t.join("#");return n!==this.m_lastTileIds?(this.m_lastTileIds=n,this.m_thisFrameTilesChanged=!0):this.m_thisFrameTilesChanged=!1,this.m_thisFrameTilesChanged}},{key:"checkCopyrightUpdates",value:function(){if(this.checkIfTilesChanged()){var e=this.getRenderedTilesCopyrightInfo();if(e!==this.m_copyrightInfo){if(e.length===this.m_copyrightInfo.length){for(var t=!0,n=0;n<e.length;n++){var r=e[n],i=this.m_copyrightInfo[n];if(r.label!==i.label){t=!1;break}}if(t)return}this.m_copyrightInfo=e,this.dispatchEvent(this.COPYRIGHT_CHANGED_EVENT)}}}},{key:"getRenderedTilesCopyrightInfo",value:function(){var e,t=[],n=a(this.m_visibleTiles.dataSourceTileList);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=a(i.renderedTiles.values());try{for(o.s();!(r=o.n()).done;){var s=r.value.copyrightInfo;void 0!==s&&0!==s.length&&(t=T.CopyrightInfo.mergeArrays(t,s))}}catch(u){o.e(u)}finally{o.f()}}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"setupStats",value:function(e){new V.PerformanceStatistics(e,1e3)}},{key:"setupRenderer",value:function(e){var t;this.m_scene.add(this.m_sceneRoot),this.m_overlayScene.add(this.m_overlaySceneRoot),this.shadowsEnabled=null!==(t=this.m_options.enableShadows)&&void 0!==t&&t,e.setupRenderer()}},{key:"createTextRenderer",value:function(){var e=this;return new H.TextElementsRenderer(new G.MapViewState(this,this.checkIfTilesChanged.bind(this)),(function(){e.update()}),this.m_screenProjector,this.m_poiManager,this.m_renderer,[this.imageCache,this.userImageCache],this.m_options)}},{key:"resetTextRenderer",value:function(){var e=i(r.mark((function e(t,n,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.m_textElementsRenderer.updateFontCatalogs(t);case 2:return e.next=4,this.m_textElementsRenderer.updateTextStyles(n,i);case 4:this.update();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setFovOnCamera",value:function(e,t){var n=g.MathUtils.degToRad(e.fov);if("fixed"!==e.type){var r=b.CameraUtils.getFocalLength(this.m_camera);void 0===r&&(b.CameraUtils.setVerticalFov(this.m_camera,n,t),r=b.CameraUtils.getFocalLength(this.m_camera)),b.CameraUtils.setFocalLength(this.m_camera,r,t)}else b.CameraUtils.setVerticalFov(this.m_camera,n,t)}},{key:"getCanvasClientSize",value:function(){var e=this.canvas,t=e.clientWidth,n=e.clientHeight;if(0===t||0===n||"number"!==typeof t||"number"!==typeof n){var r=this.m_renderer.getPixelRatio();return{width:Math.round(this.canvas.width/r),height:Math.round(this.canvas.height/r)}}return{width:t,height:n}}}]),n}(k.EventDispatcher);t.MapView=J},64873:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewAtmosphere=t.AtmosphereLightMode=void 0;var o,s,u,l=n(31201),c=n(85164),d=n(15739),h=n(34585),f=n(45480);!function(e){e[e.Ground=1]="Ground",e[e.Sky=2]="Sky",e[e.SkyAndGround=3]="SkyAndGround"}(o||(o={})),function(e){e[e.ScatteringShader=0]="ScatteringShader",e[e.SimpleColor=1]="SimpleColor",e[e.Wireframe=2]="Wireframe"}(s||(s={})),function(e){e[e.LightOverhead=0]="LightOverhead",e[e.LightDynamic=1]="LightDynamic"}(u=t.AtmosphereLightMode||(t.AtmosphereLightMode={}));var p=.025,m={clipPlanes:{near:0,far:0}},v=function(){function e(t,n,r,a,u){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.SkyAndGround,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.ScatteringShader;i(this,e),this.m_mapAnchors=t,this.m_sceneCamera=n,this.m_projection=r,this.m_rendererCapabilities=a,this.m_updateCallback=u,this.m_atmosphereVariant=c,this.m_materialVariant=d,this.m_enabled=!0,this.m_clipPlanesEvaluator=new f.TiltViewClipPlanesEvaluator(l.EarthConstants.EQUATORIAL_RADIUS*p,0,1,.05,1e7),this.m_lightDirection=new h.Vector3(0,1,0),this.m_atmosphereVariant&o.Sky&&this.createSkyGeometry(),this.m_atmosphereVariant&o.Ground&&this.createGroundGeometry(),this.addToMapAnchors(this.m_mapAnchors)}return a(e,[{key:"skyMesh",get:function(){return this.m_skyMesh}},{key:"groundMesh",get:function(){return this.m_groundMesh}},{key:"enabled",get:function(){return this.m_enabled},set:function(t){if(!this.disposed&&this.m_enabled!==t){this.m_enabled=t;var n=e.isPresent(this.m_mapAnchors);t&&!n?this.addToMapAnchors(this.m_mapAnchors):!t&&n&&this.removeFromMapAnchors(this.m_mapAnchors)}}},{key:"lightMode",set:function(e){if(this.m_materialVariant===s.ScatteringShader){var t=e===u.LightDynamic;if(void 0!==this.m_groundMaterial)this.m_groundMaterial.setDynamicLighting(t);if(void 0!==this.m_skyMaterial)this.m_skyMaterial.setDynamicLighting(t)}}},{key:"dispose",value:function(){var e,t,n,r;this.enabled&&(this.enabled=!1),null===(e=this.m_skyMaterial)||void 0===e||e.dispose(),null===(t=this.m_groundMaterial)||void 0===t||t.dispose(),null===(n=this.m_skyGeometry)||void 0===n||n.dispose(),null===(r=this.m_groundGeometry)||void 0===r||r.dispose(),this.m_skyGeometry=void 0,this.m_groundGeometry=void 0,this.m_skyMaterial=void 0,this.m_groundMaterial=void 0,this.m_skyMesh=void 0,this.m_groundMesh=void 0}},{key:"reset",value:function(e){}},{key:"disposed",get:function(){return void 0===this.m_skyMesh&&void 0===this.m_groundMesh}},{key:"addToMapAnchors",value:function(t){d.assert(!e.isPresent(t),"Atmosphere already added"),void 0!==this.m_skyMesh&&t.add(g(this.m_skyMesh,Number.MIN_SAFE_INTEGER)),void 0!==this.m_groundMesh&&t.add(g(this.m_groundMesh,Number.MAX_SAFE_INTEGER)),this.m_updateCallback&&this.m_updateCallback()}},{key:"removeFromMapAnchors",value:function(t){if(e.isPresent(t)){var n=!1;void 0!==this.m_skyMesh&&(t.remove(this.m_skyMesh),n=!0),void 0!==this.m_groundMesh&&(t.remove(this.m_groundMesh),n=!0),n&&this.m_updateCallback&&this.m_updateCallback()}}},{key:"createSkyGeometry",value:function(){if(this.m_projection.type===l.ProjectionType.Spherical)this.m_skyGeometry=new h.SphereGeometry(1.025*l.EarthConstants.EQUATORIAL_RADIUS,256,256);else this.m_skyGeometry=new h.PlaneGeometry(200,200);this.m_skyGeometry.translate(0,0,0),this.m_materialVariant===s.ScatteringShader?this.m_skyMaterial=new c.SkyAtmosphereMaterial({rendererCapabilities:this.m_rendererCapabilities}):this.m_materialVariant===s.SimpleColor?this.m_skyMaterial=new h.MeshBasicMaterial({color:new h.Color(12908781),opacity:.4,transparent:!1,depthTest:!0,depthWrite:!1,side:h.BackSide,blending:h.NormalBlending,fog:!1}):this.m_skyMaterial=new h.MeshStandardMaterial({color:8388607,depthTest:!1,depthWrite:!1,normalScale:new h.Vector2(-1,-1),side:h.BackSide,wireframe:!0}),this.m_skyMesh=new h.Mesh(this.m_skyGeometry,this.m_skyMaterial),this.m_skyMesh.name=e.SkyAtmosphereUserName,this.setupSkyForRendering()}},{key:"createGroundGeometry",value:function(){if(this.m_projection.type===l.ProjectionType.Spherical)this.m_groundGeometry=new h.SphereGeometry(1.0001*l.EarthConstants.EQUATORIAL_RADIUS,256,256);else this.m_groundGeometry=new h.PlaneGeometry(200,200);this.m_groundGeometry.translate(0,0,0),this.m_materialVariant===s.ScatteringShader?this.m_groundMaterial=new c.GroundAtmosphereMaterial({rendererCapabilities:this.m_rendererCapabilities}):this.m_materialVariant===s.SimpleColor?this.m_groundMaterial=new h.MeshBasicMaterial({color:new h.Color(50687),opacity:.4,transparent:!0,depthTest:!1,depthWrite:!1,side:h.FrontSide,blending:h.NormalBlending,fog:!1}):this.m_groundMaterial=new h.MeshStandardMaterial({color:1149338,depthTest:!0,depthWrite:!1,side:h.FrontSide,wireframe:!0}),this.m_groundMesh=new h.Mesh(this.m_groundGeometry,this.m_groundMaterial),this.m_groundMesh.name=e.GroundAtmosphereUserName,this.setupGroundForRendering()}},{key:"setupSkyForRendering",value:function(){var e,t=this;void 0!==this.m_skyMesh&&(e=this.m_materialVariant!==s.ScatteringShader?function(e,n){t.overrideClipPlanes(e)}:function(e,n){t.overrideClipPlanes(e),d.assert(n instanceof c.SkyAtmosphereMaterial);var r=t.m_skyMaterial;r.updateUniforms(r,t.m_skyMesh,e,t.m_lightDirection)},d.assert(void 0!==this.m_skyMaterial),this.m_skyMesh.onBeforeRender=function(t,n,r,i,a,o){e(r,a)},this.m_skyMesh.onAfterRender=function(e,n,r,i,a,o){t.revertClipPlanes(r)})}},{key:"setupGroundForRendering",value:function(){var e=this;void 0!==this.m_groundMesh&&this.m_materialVariant===s.ScatteringShader&&(d.assert(void 0!==this.m_groundMaterial),this.m_groundMesh.onBeforeRender=function(t,n,r,i,a,o){d.assert(a instanceof c.GroundAtmosphereMaterial);var s=e.m_groundMaterial;s.updateUniforms(s,e.m_groundMesh,r,e.m_lightDirection)})}},{key:"overrideClipPlanes",value:function(e){var t=this.m_sceneCamera;m.clipPlanes.near=t.near,m.clipPlanes.far=t.far;var n=this.m_clipPlanesEvaluator.evaluateClipPlanes(this.m_sceneCamera,this.m_projection);d.assert(e instanceof h.PerspectiveCamera);var r=e;r.near=n.near,r.far=n.far+.1*l.EarthConstants.EQUATORIAL_RADIUS,r.updateProjectionMatrix()}},{key:"revertClipPlanes",value:function(e){d.assert(e instanceof h.PerspectiveCamera);var t=e;t.near=m.clipPlanes.near,t.far=m.clipPlanes.far,t.updateProjectionMatrix()}}],[{key:"isPresent",value:function(t){var n,i=r(t.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.name===e.SkyAtmosphereUserName||a.name===e.GroundAtmosphereUserName)return!0}}catch(o){i.e(o)}finally{i.f()}return!1}}]),e}();function g(e,t){var n=e;return n.renderOrder=t,n.pickable=!1,n.anchor=new h.Vector3(0,0,0),n}t.MapViewAtmosphere=v,v.SkyAtmosphereUserName="SkyAtmosphere",v.GroundAtmosphereUserName="GroundAtmosphere"},31011:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewEnvironment=t.DEFAULT_CLEAR_COLOR=void 0;var a=n(31201),o=n(15739),s=n(34585),u=n(49417),l=n(3457),c=n(97229),d=n(4716),h=o.LoggerManager.instance.create("MapViewEnvironment");t.DEFAULT_CLEAR_COLOR=16777215;var f={vector3:[new s.Vector3,new s.Vector3,new s.Vector3],frustumPoints:[new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3]},p=function(){function e(t,n){r(this,e),this.m_mapView=t,this.m_fog=new l.MapViewFog(this.m_mapView.scene),!1!==n.addBackgroundDatasource&&(this.m_backgroundDataSource=new u.BackgroundDataSource,this.m_mapView.addDataSource(this.m_backgroundDataSource)),void 0!==n.backgroundTilingScheme&&void 0!==this.m_backgroundDataSource&&this.m_backgroundDataSource.setTilingScheme(n.backgroundTilingScheme),this.updateClearColor()}return i(e,[{key:"lights",get:function(){var e;return null!==(e=this.m_createdLights)&&void 0!==e?e:[]}},{key:"fog",get:function(){return this.m_fog}},{key:"updateBackgroundDataSource",value:function(){this.m_backgroundDataSource&&this.m_backgroundDataSource.updateStorageLevelOffset()}},{key:"clearBackgroundDataSource",value:function(){void 0!==this.m_backgroundDataSource&&this.m_mapView.clearTileCache(this.m_backgroundDataSource.name)}},{key:"update",value:function(){this.m_fog.update(this.m_mapView,this.m_mapView.viewRanges.maximum),void 0!==this.m_skyBackground&&this.m_mapView.projection.type===a.ProjectionType.Planar&&this.m_skyBackground.updateCamera(this.m_mapView.camera),this.updateLights()}},{key:"updateClearColor",value:function(e,n){void 0!==e?this.m_mapView.renderer.setClearColor(new s.Color(e),n):this.m_mapView.renderer.setClearColor(t.DEFAULT_CLEAR_COLOR,n)}},{key:"updateSkyBackground",value:function(e,t){if(this.m_skyBackground instanceof c.SkyBackground&&void 0!==e)this.updateSkyBackgroundColors(e,t);else{if(void 0===this.m_skyBackground&&void 0!==e)return void this.addNewSkyBackground(e,t);this.m_skyBackground instanceof c.SkyBackground&&void 0===e&&this.removeSkyBackGround()}}},{key:"updateLighting",value:function(e){var t,n=this;this.m_createdLights&&this.m_createdLights.forEach((function(e){n.m_mapView.scene.remove(e)})),null===(t=this.m_overlayCreatedLights)||void 0===t||t.forEach((function(e){n.m_mapView.overlayScene.remove(e),e instanceof s.DirectionalLight&&n.m_mapView.overlayScene.remove(e.target)})),void 0!==e&&(this.m_createdLights=[],this.m_overlayCreatedLights=[],e.forEach((function(e){var t=d.createLight(e);if(t){if(n.m_mapView.scene.add(t),t.isDirectionalLight){var r=t;n.m_mapView.scene.add(r.target)}n.m_createdLights.push(t);var i=t.clone();n.m_mapView.overlayScene.add(i),i instanceof s.DirectionalLight&&n.m_mapView.overlayScene.add(i.target.clone())}else h.warn("MapView: failed to create light ".concat(e.name," of type ").concat(e.type))})))}},{key:"updateLights",value:function(){var e=this;if(this.m_mapView.shadowsEnabled&&this.m_mapView.projection.type!==a.ProjectionType.Spherical&&void 0!==this.m_createdLights&&0!==this.m_createdLights.length){var t=[{x:-1,y:-1,z:-1},{x:1,y:-1,z:-1},{x:-1,y:1,z:-1},{x:1,y:1,z:-1},{x:-1,y:-1,z:1},{x:1,y:-1,z:1},{x:-1,y:1,z:1},{x:1,y:1,z:1}].map((function(t,n){return e.m_mapView.ndcToView(t,f.frustumPoints[n])}));this.m_createdLights.forEach((function(n){var r=n;if(!0===r.isDirectionalLight){var i=f.vector3[0];i.copy(r.target.position),i.sub(r.position),i.normalize();var o=f.vector3[1];e.m_mapView.projection.type===a.ProjectionType.Planar&&o.set(0,0,-1);var u=e.m_mapView.tilt,l=e.m_mapView.targetDistance*Math.cos(s.MathUtils.degToRad(u))/o.dot(i);r.target.position.copy(e.m_mapView.worldTarget).sub(e.m_mapView.camera.position),r.position.copy(e.m_mapView.worldTarget),r.position.addScaledVector(i,-l),r.position.sub(e.m_mapView.camera.position),r.updateMatrixWorld(),r.shadow.updateMatrices(r);var c=r.shadow.camera,d=t.map((function(t){return e.viewToLightSpace(t.clone(),c)})),h=new s.Box3;d.forEach((function(e){h.expandByPoint(e)})),c.left=h.min.x,c.right=h.max.x,c.top=h.max.y,c.bottom=h.min.y,c.near=.95*-h.max.z,c.far=-h.min.z,c.updateProjectionMatrix()}}))}}},{key:"addNewSkyBackground",value:function(e,t){"gradient"===e.type&&void 0===e.groundColor&&(e.groundColor=o.getOptionValue(t,"#000000")),this.m_skyBackground=new c.SkyBackground(e,this.m_mapView.projection.type,this.m_mapView.camera),this.m_mapView.scene.background=this.m_skyBackground.texture}},{key:"removeSkyBackGround",value:function(){this.m_mapView.scene.background=null,void 0!==this.m_skyBackground&&(this.m_skyBackground.dispose(),this.m_skyBackground=void 0)}},{key:"updateSkyBackgroundColors",value:function(e,t){var n;"gradient"===e.type&&void 0===e.groundColor&&(e.groundColor=o.getOptionValue(t,"#000000")),void 0!==this.m_skyBackground&&(this.m_skyBackground.updateTexture(e,this.m_mapView.projection.type),this.m_mapView.scene.background=null===(n=this.m_skyBackground)||void 0===n?void 0:n.texture)}},{key:"viewToLightSpace",value:function(e,t){return e.applyMatrix4(t.matrixWorldInverse)}}]),e}();t.MapViewEnvironment=p},3457:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewFog=void 0;var a=n(85164),o=n(50470),s=n(15739),u=n(34585),l=function(){function e(t){r(this,e),this.m_scene=t,this.m_enabled=!0,this.m_fog=new u.Fog(0),this.m_fogIsDefined=!1}return i(e,[{key:"enabled",get:function(){return this.m_enabled},set:function(e){this.m_enabled=e,e&&this.m_fogIsDefined&&null===this.m_scene.fog?this.add():e||null===this.m_scene.fog||this.remove()}},{key:"reset",value:function(e){this.m_cachedFog=e,void 0!==e&&void 0!==e.color&&void 0!==e.startRatio?(this.m_fogIsDefined=!0,this.m_fog.color.set(e.color),this.m_enabled&&null===this.m_scene.fog&&this.add()):(this.m_fogIsDefined=!1,null!==this.m_scene.fog&&this.remove())}},{key:"update",value:function(e,t){if(null!==this.m_scene.fog&&void 0!==this.m_cachedFog&&this.m_cachedFog&&void 0!==this.m_cachedFog.startRatio&&(void 0!==e.camera.far||void 0!==t)){var n=void 0!==t?t:e.camera.far,r=this.m_cachedFog.startRatio;s.assert(r<=1);var i=Math.abs(Math.cos(e.tilt)),a=s.MathUtils.smoothStep(1,0,i);this.m_fog.near=u.MathUtils.lerp(n*r,n,1-a),this.m_fog.far=u.MathUtils.lerp(1*n,n,a),this.m_fog.near=Math.min(this.m_fog.near,e.camera.far),this.m_fog.far=Math.min(this.m_fog.far,e.camera.far)}}},{key:"add",value:function(){this.m_scene.fog=this.m_fog,this.setFogInRawShaderMaterials(!0)}},{key:"remove",value:function(){this.m_scene.fog=null,this.setFogInRawShaderMaterials(!1)}},{key:"setFogInRawShaderMaterials",value:function(e){this.m_scene.traverse((function(t){if(t instanceof u.Mesh){var n=t.material;n instanceof u.Material&&!(n instanceof a.HighPrecisionLineMaterial)&&n.fog!==e&&(n.fog=e,n instanceof o.RawShaderMaterial&&n.invalidateFog())}}))}}]),e}();t.MapViewFog=l},12918:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Squares=t.Circles=t.MapViewPoints=void 0;var s=n(34585),u=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).enableRayTesting=!0,e}return i(n,[{key:"raycast",value:function(e,t){var n=this;if(this.enableRayTesting){var r=this.geometry,i=this.matrixWorld,a=l(e.ray.origin.clone().add(e.ray.direction).project(e.camera),e),o=function(r,o){var s=function(e,t,n){var r=e.clone().applyMatrix4(t),i=r.distanceTo(n.ray.origin),a=r.project(n.camera),o=a.x<1&&a.x>-1&&a.y<1&&a.y>-1;if(o){return{absoluteScreenPosition:l(a,n),pointIsOnScreen:o,distance:i}}return{pointIsOnScreen:o}}(r,i,e);s.pointIsOnScreen&&n.testPoint(r,s.absoluteScreenPosition,a,o,s.distance,t)},u=new s.Vector3,c=r.index,d=r.attributes.position.array;if(null!==c)for(var h=c.array,f=0,p=h.length;f<p;f++)o(u.fromArray(d,3*h[f]),f);else for(var m=0,v=d.length/3;m<v;m++)o(u.fromArray(d,3*m),m)}}}]),n}(s.Points);function l(e,t){return new s.Vector2(e.x+1,1-e.y).divideScalar(2).multiply(t.canvasSize).ceil()}t.MapViewPoints=u;var c=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"testPoint",value:function(e,t,n,r,i,a){var o=t.x-n.x,s=t.y-n.y;Math.sqrt(o*o+s*s)<=this.material.size/2&&a.push({point:e,distance:i,index:r,object:this})}}]),n}(u);t.Circles=c;var d=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"testPoint",value:function(e,t,n,r,i,a){var o=t.x-n.x,s=t.y-n.y,u=this.material.size/2;Math.abs(o)<=u&&Math.abs(s)<=u&&a.push({point:e,distance:i,index:r,object:this})}}]),n}(u);t.Squares=d},8379:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewTaskScheduler=void 0;var s=n(15739),u=n(34585),l=n(65312),c=n(91422),d={type:"update"},h=function(e){a(n,e);var t=o(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return r(this,n),(e=t.call(this)).m_maxFps=i,e.m_throttlingEnabled=!1,e.m_taskQueue=new s.TaskQueue({groups:[l.TileTaskGroups.FETCH_AND_DECODE,l.TileTaskGroups.CREATE],prioSortFn:function(e,t){return e.getPriority()-t.getPriority()}}),e.maxFps=i,e}return i(n,[{key:"maxFps",get:function(){return this.m_maxFps},set:function(e){this.m_maxFps=e<=0?60:e}},{key:"taskQueue",get:function(){return this.m_taskQueue}},{key:"throttlingEnabled",get:function(){return!0===this.m_throttlingEnabled},set:function(e){this.m_throttlingEnabled=e}},{key:"requestUpdate",value:function(){this.dispatchEvent(d)}},{key:"processPending",value:function(e){var t,n=this,r=c.PerformanceStatistics.instance,i=r.enabled?r.currentFrame:void 0;r.enabled&&(t=s.PerformanceTimer.now()),this.m_taskQueue.update();var a=this.taskQueue.numItemsLeft();null===i||void 0===i||i.setValue("TaskScheduler.numPendingTasks",a),this.throttlingEnabled?function(){var t=n.spaceInFrame(e);t=t>2?t-2:t,null===i||void 0===i||i.setValue("TaskScheduler.estimatedAvailableTime",t);for(var r=0,o=function(){function e(e){var n,i;return(t-=null!==(i=null===(n=e.estimatedProcessTime)||void 0===n?void 0:n.call(e))&&void 0!==i?i:2)>0||1===r}r++,[l.TileTaskGroups.CREATE,l.TileTaskGroups.FETCH_AND_DECODE].forEach((function(t){n.m_taskQueue.numItemsLeft(t)&&n.m_taskQueue.processNext(t,e)})),a=n.m_taskQueue.numItemsLeft()};t>0&&a>0;)o();(a=n.m_taskQueue.numItemsLeft())>0&&(null===i||void 0===i||i.setValue("TaskScheduler.pendingTasksNotYetProcessed",a),n.requestUpdate())}():(this.m_taskQueue.processNext(l.TileTaskGroups.CREATE,void 0,this.m_taskQueue.numItemsLeft(l.TileTaskGroups.CREATE)),this.m_taskQueue.processNext(l.TileTaskGroups.FETCH_AND_DECODE,void 0,this.m_taskQueue.numItemsLeft(l.TileTaskGroups.FETCH_AND_DECODE))),r.enabled&&(null===i||void 0===i||i.setValue("TaskScheduler.pendingTasksTime",s.PerformanceTimer.now()-t))}},{key:"clearQueuedTasks",value:function(){this.m_taskQueue.clear()}},{key:"spaceInFrame",value:function(e){var t=(performance||Date).now()-e;return Math.max(1e3/this.m_maxFps-t,0)}}]),n}(u.EventDispatcher);t.MapViewTaskScheduler=h},8246:function(e,t,n){"use strict";var r=n(43269).default,i=n(87757),a=n(48926).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewThemeManager=void 0;var u=n(15739),l=n(10018),c=n(30081),d=u.LoggerManager.instance.create("MapViewThemeManager"),h=function(){function e(t,n){o(this,e),this.m_mapView=t,this.m_uriResolver=n,this.m_abortControllers=[],this.m_theme={},this.m_imageCache=new l.MapViewImageCache}return s(e,[{key:"setTheme",value:function(){var e=a(i.mark((function e(t){var n=this;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isUpdating()&&(d.warn("Formerly set Theme is still updating, update will be canceled"),this.cancelThemeUpdate()),this.m_updatePromise=this.loadTheme(t).then(function(){var e=a(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateTheme(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,this.m_updatePromise;case 4:return this.m_updatePromise=void 0,e.abrupt("return",this.m_theme);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTheme",value:function(){var e=a(i.mark((function e(){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isUpdating()){e.next=3;break}return e.next=3,this.m_updatePromise;case 3:return e.abrupt("return",this.m_theme);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return void 0!==this.m_updatePromise}},{key:"theme",get:function(){return this.isUpdating()?{}:this.m_theme}},{key:"loadTheme",value:function(){var e=a(i.mark((function e(t){var n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"string"!==typeof t&&c.ThemeLoader.isThemeLoaded(t)){e.next=13;break}return e.prev=2,e.next=5,c.ThemeLoader.load(t,{uriResolver:this.m_uriResolver,signal:this.createAbortController().signal});case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),"AbortError"===e.t0.name?d.warn("theme loading was aborted due to: ".concat(e.t0)):d.error("failed to load theme: ".concat(e.t0));case 11:e.next=14;break;case 13:n=t;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTheme",value:function(){var e=a(i.mark((function e(t){var n,a,o,s,u,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.m_mapView.sceneEnvironment,this.m_theme.fog=t.fog,this.m_theme.sky=t.sky,o.updateSkyBackground(t.sky),o.fog.reset(t.fog),this.m_theme.lights=t.lights,o.updateLighting(t.lights),this.m_theme.clearColor=t.clearColor,this.m_theme.clearAlpha=t.clearAlpha,o.updateClearColor(t.clearColor,t.clearAlpha),this.m_theme.images=t.images,this.m_theme.imageTextures=t.imageTextures,e.next=14,this.updateImages(t.images,t.imageTextures);case 14:return this.m_theme.poiTables=t.poiTables,e.next=17,this.loadPoiTables(t.poiTables);case 17:return this.m_theme.textStyles=t.textStyles,this.m_theme.defaultTextStyle=t.defaultTextStyle,this.m_theme.fontCatalogs=t.fontCatalogs,e.next=22,this.m_mapView.resetTextRenderer(t.fontCatalogs,t.textStyles,t.defaultTextStyle);case 22:Array.isArray(t.priorities)&&(this.m_theme.priorities=t.priorities),this.m_mapView.mapAnchors.setPriorities(null!==(n=t.priorities)&&void 0!==n?n:[]),Array.isArray(t.labelPriorities)&&(this.m_theme.labelPriorities=t.labelPriorities),void 0===this.m_theme.styles&&(this.m_theme.styles={}),this.m_theme.styles=null!==(a=t.styles)&&void 0!==a?a:{},this.m_theme.definitions=t.definitions,o.clearBackgroundDataSource(),s=r(this.m_mapView.dataSources),e.prev=30,s.s();case 32:if((u=s.n()).done){e.next=38;break}return l=u.value,e.next=36,l.setTheme(this.m_theme);case 36:e.next=32;break;case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(30),s.e(e.t0);case 43:return e.prev=43,s.f(),e.finish(43);case 46:case"end":return e.stop()}}),e,this,[[30,40,43,46]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCache",value:function(){this.updateImages(this.m_theme.images,this.m_theme.imageTextures),this.m_mapView.sceneEnvironment.updateLighting(this.m_theme.lights),this.m_mapView.sceneEnvironment.updateSkyBackground(this.m_theme.sky,this.m_theme.clearColor)}},{key:"imageCache",get:function(){return this.m_imageCache}},{key:"dispose",value:function(){this.m_imageCache.clear()}},{key:"loadPoiTables",value:function(){var e=a(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.m_mapView.poiTableManager.clear(),e.next=3,this.m_mapView.poiTableManager.loadPoiTables(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelThemeUpdate",value:function(){for(var e=0;e<this.m_abortControllers.length;e++)this.m_abortControllers[e].abort();this.m_abortControllers=[],this.m_imageCache.clear(),this.m_mapView.poiManager.clear(),this.m_mapView.poiTableManager.clear()}},{key:"createAbortController",value:function(){return this.m_abortControllers.push(new AbortController),this.m_abortControllers[this.m_abortControllers.length-1]}},{key:"updateImages",value:function(){var e=a(i.mark((function e(t,n){var r,a,o,s,u=this;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.m_imageCache.clear(),this.m_mapView.poiManager.clear(),void 0===t){e.next=14;break}r=0,a=Object.keys(t);case 4:if(!(r<a.length)){e.next=14;break}if(o=a[r],s=t[o],this.m_imageCache.addImage(o,s.url,!0===s.preload),"string"!==typeof s.atlas){e.next=11;break}return e.next=11,this.m_mapView.poiManager.addTextureAtlas(o,s.atlas,this.createAbortController().signal);case 11:r++,e.next=4;break;case 14:void 0!==n&&n.forEach((function(e){u.m_mapView.poiManager.addImageTexture(e)}));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.MapViewThemeManager=h},60179:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PathBlockingElement=void 0;var a=n(34585),o=r((function e(t){i(this,e),this.points=t,this.screenSpaceLines=new Array(t.length>=2?t.length-1:0);for(var n=0;n<this.screenSpaceLines.length;n++)this.screenSpaceLines[n]=new a.Line3(new a.Vector3,new a.Vector3)}));t.PathBlockingElement=o},92980:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PickHandler=t.PickObjectType=void 0;var o,s=n(26309),u=n(31201),l=n(34585),c=n(12918),d=n(34436),h=n(77569),f=n(61563);!function(e){e[e.Unspecified=0]="Unspecified",e[e.Point=1]="Point",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.Text=4]="Text",e[e.Icon=5]="Icon",e[e.Object3D=6]="Object3D"}(o=t.PickObjectType||(t.PickObjectType={}));var p=new l.Vector3,m=new u.OrientedBox3;function v(e,t,n,r,i){var o,s=a(e.dependencies);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=u.mortonCode();if(!r.has(l)){r.add(l);var c=i.visibleTileSet.getCachedTile(e.dataSource,u,e.offset,i.frameNumber);void 0!==c&&n.intersectObjects(c.objects,!0,t)}}}catch(d){s.e(d)}finally{s.f()}}var g=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,e),this.mapView=t,this.camera=n,this.enablePickTechnique=i,this.m_pickingRaycaster=new d.PickingRaycaster(t.renderer.getSize(new l.Vector2))}return i(e,[{key:"intersectMapObjects",value:function(e,t,n){var r=this.mapView.getNormalizedScreenCoordinates(e,t),i=this.setupRaycaster(e,t),o=new h.PickListener(n);if(void 0!==this.mapView.textElementsRenderer){var s=this.mapView.canvas,u=s.clientWidth,c=s.clientHeight,d=r.x*u*.5,f=r.y*c*.5,p=new l.Vector2(d,f);this.mapView.textElementsRenderer.pickTextElements(p,o)}var m,g=[],y=this.getIntersectedTiles(i),x=new Set,_=a(y);try{for(_.s();!(m=_.n()).done;){var b=m.value,w=b.tile,S=b.distance;if(o.done&&o.furthestResult.distance<S)break;g.length=0,i.intersectObjects(w.objects,!0,g),v(w,g,i,x,this.mapView);var M,E=a(g);try{for(E.s();!(M=E.n()).done;){var T=M.value;o.addResult(this.createResult(T,w))}}catch(R){E.e(R)}finally{E.f()}}}catch(R){_.e(R)}finally{_.f()}g.length=0;var k,C=a(this.mapView.mapAnchors.children);try{for(C.s();!(k=C.n()).done;){var A=k.value;i.intersectObject(A,!0,g);var P,O=a(g);try{for(O.s();!(P=O.n()).done;){var L=P.value;o.addResult(this.createResult(L))}}catch(R){O.e(R)}finally{O.f()}}}catch(R){C.e(R)}finally{C.f()}return o.finish(),o.results}},{key:"raycasterFromScreenPoint",value:function(e,t){return this.m_pickingRaycaster.setFromCamera(this.mapView.getNormalizedScreenCoordinates(e,t),this.camera),this.mapView.renderer.getSize(this.m_pickingRaycaster.canvasSize),this.m_pickingRaycaster}},{key:"createResult",value:function(e,t){var n,r,i,a={type:o.Unspecified,point:e.point,distance:e.distance,dataSourceName:null===(n=e.object.userData)||void 0===n?void 0:n.dataSource,dataSourceOrder:null===(r=null===t||void 0===t?void 0:t.dataSource)||void 0===r?void 0:r.dataSourceOrder,intersection:e,tileKey:null===t||void 0===t?void 0:t.tileKey};if(void 0===e.object.userData||void 0===e.object.userData.feature)return a;this.enablePickTechnique&&(a.technique=e.object.userData.technique),a.renderOrder=null===(i=e.object)||void 0===i?void 0:i.renderOrder;var u,l=e.object.userData.feature;if(this.addObjInfo(l,e,a),a.userData){var c=s.getFeatureId(a.userData);a.featureId=0===c?void 0:c}switch(l.geometryType){case s.GeometryType.Point:case s.GeometryType.Text:u=o.Point;break;case s.GeometryType.Line:case s.GeometryType.ExtrudedLine:case s.GeometryType.SolidLine:case s.GeometryType.TextPath:u=o.Line;break;case s.GeometryType.Polygon:case s.GeometryType.ExtrudedPolygon:u=o.Area;break;case s.GeometryType.Object3D:u=o.Object3D;break;default:u=o.Unspecified}return a.type=u,a}},{key:"getIntersectedTiles",value:function(e){var t=this,n=new Array;return this.mapView.visibleTileSet.dataSourceTileList.forEach((function(r){r.dataSource.enablePicking&&r.renderedTiles.forEach((function(r){m.copy(r.boundingBox),m.position.sub(t.mapView.worldCenter);var i=r.computeWorldOffsetX();m.position.x+=i;var a=m.intersectsRay(e.ray);void 0!==a&&n.push({tile:r,distance:a})}))})),n.sort((function(e,t){return e.distance-t.distance})),n}},{key:"addObjInfo",value:function(e,t,n){if(void 0!==e.objInfos)if(n.intersection.object instanceof c.MapViewPoints)n.userData=e.objInfos[t.index];else if(void 0===e.starts||0===e.starts.length||"number"!==typeof t.faceIndex&&void 0===t.index)1===e.objInfos.length&&(n.userData=e.objInfos[0]);else if(1!==e.starts.length){var r,i="number"===typeof t.faceIndex?3*t.faceIndex:t.index,o=0,s=a(e.starts);try{for(s.s();!(r=s.n()).done;){if(r.value>i)break;o++}}catch(u){s.e(u)}finally{s.f()}n.userData=e.objInfos[o-1]}else n.userData=e.objInfos[0]}},{key:"setupRaycaster",value:function(e,t){var n=this.mapView.camera,r=this.raycasterFromScreenPoint(e,t),i=this.mapView.getWorldPositionAt(e,t,!0),a=n.position.distanceTo(i)/this.mapView.camera.getWorldDirection(p).dot(r.ray.direction);return r.params.Line.threshold=f.MapViewUtils.calculateWorldSizeByFocalLength(this.mapView.focalLength,a,1),r}}]),e}();t.PickHandler=g},77569:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PickListener=void 0;var a=n(15739);function o(e,t){var n,r,i=null!==(n=e.dataSourceOrder)&&void 0!==n?n:0,a=null!==(r=t.dataSourceOrder)&&void 0!==r?r:0;if(i!==a)return a-i;var o=e.distance-t.distance,s=void 0!==e.renderOrder&&void 0!==t.renderOrder;return Math.abs(o)>1e-4||!s?o:t.renderOrder-e.renderOrder}var s=function(){function e(t){r(this,e),this.m_parameters=t,this.m_results=[],this.m_sorted=!0,this.m_finished=!0}return i(e,[{key:"addResult",value:function(e){var t=this.m_results.findIndex((function(t){var n,r,i,a,o=t.type===e.type,s=null===(r=null===(n=e.intersection)||void 0===n?void 0:n.object.userData)||void 0===r?void 0:r.dataSource,u=s&&(null===(a=null===(i=t.intersection)||void 0===i?void 0:i.object.userData)||void 0===a?void 0:a.dataSource)===s,l=void 0!==e.featureId&&t.featureId===e.featureId,c=void 0===e.featureId&&void 0===t.featureId,d=e.userData&&t.userData===e.userData;return o&&u&&(l||c&&d)}));if(t<0)return this.m_sorted=!1,this.m_finished=!1,void this.m_results.push(e);var n=this.m_results[t];o(e,n)<0&&(this.m_results[t]=e,this.m_sorted=!1,this.m_finished=!1)}},{key:"done",get:function(){return!!this.maxResults&&this.m_results.length>=this.maxResults}},{key:"finish",value:function(){this.sortResults(),this.maxResults&&this.m_results.length>this.maxResults&&(this.m_results.length=this.maxResults),this.m_finished=!0}},{key:"results",get:function(){return a.assert(this.m_finished,"finish() was not called before getting the results"),this.m_results}},{key:"closestResult",get:function(){return this.sortResults(),this.m_results.length>0?this.m_results[0]:void 0}},{key:"furthestResult",get:function(){return this.sortResults(),this.m_results.length>0?this.m_results[this.m_results.length-1]:void 0}},{key:"maxResults",get:function(){var e,t,n=null!==(t=null===(e=this.m_parameters)||void 0===e?void 0:e.maxResultCount)&&void 0!==t?t:0;return n>0?n:void 0}},{key:"sortResults",value:function(){if(!this.m_sorted){var e=[],t=[];this.m_results.sort(o).forEach((function(n){return(0===n.distance?e:t).push(n)})),this.m_results=e.concat(t),this.m_sorted=!0}}}]),e}();t.PickListener=s},34436:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default,s=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PickingRaycaster=void 0;var u=n(34585),l=n(87213);function c(e,t,n,r){if(e.layers.test(t.layers)&&e.visible){var i=l.MapObjectAdapter.get(e);i&&!i.isPickable()||e.raycast(t,n)}if(!0===r){var a,o=s(e.children);try{for(o.s();!(a=o.n()).done;){c(a.value,t,n,!0)}}catch(u){o.e(u)}finally{o.f()}}}var d=function(e){a(n,e);var t=o(n);function n(e){var i;return r(this,n),(i=t.call(this)).canvasSize=e,i}return i(n,[{key:"intersectObject",value:function(e,t,n){var r=null!==n&&void 0!==n?n:[];return c(e,this,r,t),r}},{key:"intersectObjects",value:function(e,t,n){var r,i=null!==n&&void 0!==n?n:[],a=s(e);try{for(a.s();!(r=a.n()).done;){c(r.value,this,i,t)}}catch(o){a.e(o)}finally{a.f()}return i}}]),n}(u.Raycaster);t.PickingRaycaster=d},80057:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneViewBounds=void 0;var a=n(31201),o=n(15739),s=n(34585),u=n(61563),l=function(){function e(t,n,i){r(this,e),this.camera=t,this.projection=n,this.m_options=i,this.m_groundPlaneNormal=new s.Vector3(0,0,1),this.m_groundPlane=new s.Plane(this.m_groundPlaneNormal.clone()),o.assert(n.type===a.ProjectionType.Planar)}return i(e,[{key:"generate",value:function(){var e=this,t=[];if(this.addCanvasCornerIntersection(t),4===t.length)return this.createPolygon(t);this.addHorizonIntersection(t);var n=(new s.Frustum).setFromProjectionMatrix((new s.Matrix4).multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse)),r=this.getWorldConers(this.projection);if(this.m_options.tileWrappingEnabled||[r.ne,r.nw,r.se,r.sw].forEach((function(r){e.addPointInFrustum(r,n,t)})),this.m_options.tileWrappingEnabled){var i=(new s.Vector3).subVectors(r.sw,r.se).normalize(),a=(new s.Vector3).subVectors(r.se,r.sw).normalize();[new s.Ray(r.se,i),new s.Ray(r.se,a),new s.Ray(r.ne,i),new s.Ray(r.ne,a)].forEach((function(r){e.addFrustumIntersection(r,n,t)}))}else[new s.Line3(r.sw,r.se),new s.Line3(r.ne,r.nw),new s.Line3(r.se,r.ne),new s.Line3(r.nw,r.sw)].forEach((function(r){e.addFrustumIntersection(r,n,t)}));return this.createPolygon(t)}},{key:"createPolygon",value:function(e){if(e.length>2)return new a.GeoPolygon(e,!0)}},{key:"getWorldConers",value:function(e){var t=e.worldExtent(0,0);return{sw:t.min,se:new s.Vector3(t.max.x,t.min.y,0),nw:new s.Vector3(t.min.x,t.max.y,0),ne:t.max}}},{key:"addNDCRayIntersection",value:function(e,t){var n=this;e.forEach((function(e){var r=u.MapViewUtils.rayCastWorldCoordinates({camera:n.camera,projection:n.projection},e[0],e[1]);r&&n.validateAndAddToGeoPolygon(r,t)}))}},{key:"addHorizonIntersection",value:function(e){var t=this.getVerticalHorizonPositionInNDC();t&&this.addNDCRayIntersection([[-1,t],[1,t]],e)}},{key:"addCanvasCornerIntersection",value:function(e){this.addNDCRayIntersection([[-1,-1],[1,-1],[1,1],[-1,1]],e)}},{key:"validateAndAddToGeoPolygon",value:function(e,t){this.isInVisibleMap(e)&&t.push(this.projection.unprojectPoint(e))}},{key:"isInVisibleMap",value:function(e){return!(e.y<0||e.y>a.EarthConstants.EQUATORIAL_CIRCUMFERENCE)&&!(!this.m_options.tileWrappingEnabled&&(e.x<0||e.x>a.EarthConstants.EQUATORIAL_CIRCUMFERENCE))}},{key:"addPointInFrustum",value:function(e,t,n){if(t.containsPoint(e)){var r=this.projection.unprojectPoint(e);r.altitude=0,n.push(r)}}},{key:"addFrustumIntersection",value:function(e,t,n){var r=this;t.planes.forEach((function(t){var i=null,a=new s.Vector3;if(e instanceof s.Ray&&e.intersectsPlane(t)?i=e.intersectPlane(t,a):e instanceof s.Line3&&t.intersectsLine(e)&&(i=t.intersectLine(e,a)),i&&u.MapViewUtils.closeToFrustum(i,r.camera)){var o=r.projection.unprojectPoint(i);o.altitude=0,n.push(o)}}))}},{key:"getVerticalHorizonPositionInNDC",value:function(){var e=new s.Vector3(-1,-1,1).unproject(this.camera).add(new s.Vector3(1,-1,1).unproject(this.camera)).multiplyScalar(.5),t=new s.Vector3(-1,1,1).unproject(this.camera).add(new s.Vector3(1,1,1).unproject(this.camera)).multiplyScalar(.5),n=new s.Line3(e,t),r=new s.Vector3;if(this.m_groundPlane.intersectLine(n,r))return r.project(this.camera).y}}]),e}();t.PlaneViewBounds=l},13412:function(e,t,n){"use strict";var r=n(319).default,i=n(87757),a=n(48926).default,o=n(34575).default,s=n(93913).default,u=n(2205).default,l=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PolarTileDataSource=void 0;var c=n(26309),d=n(97489),h=n(31201),f=n(34585),p=n(87378),m=n(47857),v=n(87213),g=n(30081),y=n(67247),x=function(e){u(n,e);var t=l(n);function n(e){var r,i=e.name,a=void 0===i?"polar":i,s=e.styleSetName,u=void 0===s?"polar":s,l=e.minDataLevel,c=e.maxDataLevel,d=e.minDisplayLevel,p=e.maxDisplayLevel,m=e.storageLevelOffset,v=void 0===m?-2:m,g=e.geometryLevelOffset,y=void 0===g?1:g,x=e.debugTiles,_=void 0!==x&&x;return o(this,n),(r=t.call(this,{name:a,styleSetName:u,minDataLevel:l,maxDataLevel:c,minDisplayLevel:d,maxDisplayLevel:p,storageLevelOffset:v})).m_tilingScheme=h.polarTilingScheme,r.m_maxLatitude=f.MathUtils.radToDeg(h.MercatorConstants.MAXIMUM_LATITUDE),r.m_geometryLevelOffset=y,r.m_debugTiles=_,r.cacheable=!1,r.enablePicking=!1,r}return s(n,[{key:"dispose",value:function(){this.m_northPoleEntry&&(this.m_northPoleEntry.material.dispose(),delete this.m_northPoleEntry),this.m_southPoleEntry&&(this.m_southPoleEntry.material.dispose(),delete this.m_southPoleEntry),this.m_styleSetEvaluator&&delete this.m_styleSetEvaluator}},{key:"createTechiqueEntry",value:function(e){if(this.m_styleSetEvaluator){var t=new d.MapEnv({$geometryType:"polygon",$layer:"earth",kind:e}),n=this.m_styleSetEvaluator.getMatchingTechniques(t);if(0!==n.length){var r=n[0],i=m.createMaterial(this.mapView.renderer.capabilities,{technique:r,env:this.mapView.env});if(i)return{material:i,technique:r}}}}},{key:"setTheme",value:function(){var e=a(i.mark((function e(t){var n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ThemeLoader.load(t);case 2:t=e.sent,void 0!==this.styleSetName&&void 0!==t.styles&&(n=t.styles[this.styleSetName]),this.m_styleSetEvaluator=new d.StyleSetEvaluator({styleSet:null!==n&&void 0!==n?n:[],definitions:t.definitions,priorities:t.priorities,labelPriorities:t.labelPriorities}),this.m_northPoleEntry=this.createTechiqueEntry("north_pole"),this.m_southPoleEntry=this.createTechiqueEntry("south_pole"),this.mapView.markTilesDirty(this);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canGetTile",value:function(e,t){if(e!==t.level||t.level<1)return!1;var n=this.m_tilingScheme.getGeoBox(t),r=n.north,i=n.south;return r>this.m_maxLatitude||i<-this.m_maxLatitude}},{key:"shouldSubdivide",value:function(e,t){if(e<=t.level)return!1;var n=this.m_tilingScheme.getGeoBox(t),r=n.north,i=n.south;return r>this.m_maxLatitude||i<-this.m_maxLatitude}},{key:"getTilingScheme",value:function(){return this.m_tilingScheme}},{key:"getTile",value:function(e){var t=new y.Tile(this,e);return this.createTileGeometry(t),t}},{key:"geometryLevelOffset",get:function(){return this.m_geometryLevelOffset},set:function(e){this.m_geometryLevelOffset=e}},{key:"intersectEdge",value:function(e,t,n){var r=t.latitude,i=n.latitude,a=t.longitude,o=n.longitude;90===Math.abs(r)&&(a=o),90===Math.abs(i)&&(o=a);var s=o-a,u=(e-r)/(i-r);return new h.GeoCoordinates(e,a+s*u,0)}},{key:"createTileGeometry",value:function(e){var t=e.geoBox,n=t.north,i=t.south,a=n>0&&i>=0,o=a?this.m_northPoleEntry:this.m_southPoleEntry;if(void 0!==o){var s,u=this.m_tilingScheme.projection,l=this.projection,d=this.m_maxLatitude,p=a?d:-d,m=this.m_tilingScheme.boundingBoxGenerator.getWorldBox(e.tileKey),g=u.unprojectPoint(new f.Vector3(m.min.x,m.min.y,0)),y=u.unprojectPoint(new f.Vector3(m.max.x,m.min.y,0)),x=u.unprojectPoint(new f.Vector3(m.max.x,m.max.y,0)),_=u.unprojectPoint(new f.Vector3(m.min.x,m.max.y,0)),b=!1;if(1===e.tileKey.level){var w=0===m.min.x,S=w?m.max.x:m.min.x,M=(m.max.y+m.min.y)/2,E=u.unprojectPoint(new f.Vector3(S,M,0)),T=w?g:y;s=a?w?[E,x,T,y]:[E,g,T,_]:w?[E,y,T,x]:[E,_,T,g],b=!0}else{var k=(s=a?[g,y,x,_]:[g,_,x,y]).map((function(e){return e.latitude})),C=Math.max.apply(Math,r(k)),A=Math.min.apply(Math,r(k));if(a?C<p:A>p)return;if(b=a?A<p:C>p){var P=k.indexOf(a?C:A);if(0!==P)for(var O=0;O<P;O++)s.push(s.shift())}}if(b){var L=(m.min.x+m.max.x)/2,R=(m.min.y+m.max.y)/2,D=u.unprojectPoint(new f.Vector3(L,R,0));h.TransverseMercatorUtils.alignLongitude(s,D);var I=s[0],F=s[1],N=s[2],j=s[3],z=Math.abs(F.latitude)>=d,U=Math.abs(j.latitude)>=d,B=z?this.intersectEdge(p,F,N):this.intersectEdge(p,I,F),V=U?this.intersectEdge(p,j,N):this.intersectEdge(p,I,j);s.splice(z?2:1,4,B);for(var G=e.tileKey.level-this.storageLevelOffset+this.m_geometryLevelOffset,H=360/(1<<Math.max(0,G)),Z=Math.floor((B.longitude+180)/H),W=Math.ceil((V.longitude+180)/H),q=Z+1;q<W;q++)s.push(new h.GeoCoordinates(p,q*H-180,0));s.push(V),U&&s.push(j)}var X=new f.BufferGeometry,K=s.map((function(t){var n=l.projectPoint(t,new f.Vector3);return n.sub(e.center),n}));X.setFromPoints(K);for(var Y=[],Q=1;Q<K.length-1;Q++)a?Y.push(0,Q,Q+1):Y.push(0,Q+1,Q);X.setIndex(Y);var $=new f.Mesh(X,o.material);if($.userData={dataSource:this.name,tileKey:e.tileKey},this.m_debugTiles){var J=Math.round(16777215*Math.abs(Math.sin(11*e.tileKey.mortonCode())));$.material=new f.MeshBasicMaterial({color:J,transparent:!0,opacity:.5}),e.objects.push(new f.Mesh(X,new f.MeshBasicMaterial({color:J,wireframe:!0})))}v.MapObjectAdapter.create($,{dataSource:this,technique:o.technique,kind:[a?c.StandardGeometryKind.Water:c.StandardGeometryKind.Background]}),e.objects.push($)}else e.forceHasGeometry(!0)}}]),n}(p.DataSource);t.PolarTileDataSource=x},59456:function(e,t,n){"use strict";var r=n(16525).default,i=n(29754).default,a=n(43269).default,o=n(34575).default,s=n(93913).default,u=n(2205).default,l=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenCollisionsDebug=t.ScreenCollisions=t.isLineWithBound=t.DetailedCollisionBox=t.CollisionBox=void 0;var c=n(15739),d=n(34585),h=n(60396),f=n(15950),p=c.LoggerManager.instance.create("ScreenCollissions"),m=function(e){u(n,e);var t=l(n);function n(e){var r;return o(this,n),r=t.call(this),void 0!==e&&r.copy(e),r}return s(n,[{key:"copy",value:function(e){return e instanceof c.Math2D.Box?this.set(e.x,e.y,e.w,e.h):e instanceof d.Box2?this.set(e.min.x,e.min.y,e.max.x-e.min.x,e.max.y-e.min.y):this.set(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY),this}},{key:"minX",get:function(){return this.x},set:function(e){this.x=e}},{key:"maxX",get:function(){return this.x+this.w},set:function(e){this.w=e-this.x}},{key:"minY",get:function(){return this.y},set:function(e){this.y=e}},{key:"maxY",get:function(){return this.y+this.h},set:function(e){this.h=e-this.y}}]),n}(c.Math2D.Box);t.CollisionBox=m;var v=function(e){u(n,e);var t=l(n);function n(e,r){var i;return o(this,n),(i=t.call(this,e)).detailBoxes=r,i}return s(n)}(m);function g(e){return void 0!==e.line}t.DetailedCollisionBox=v,t.isLineWithBound=g;var y=new m,x=function(){function e(){o(this,e),this.screenBounds=new c.Math2D.Box,this.rtree=new f}return s(e,[{key:"reset",value:function(){this.rtree.clear()}},{key:"update",value:function(e,t){this.screenBounds.set(e/-2,t/-2,e,t),this.reset()}},{key:"allocate",value:function(e){var t=e instanceof m?e:new m(e);this.rtree.insert(t)}},{key:"allocateIBoxes",value:function(e){this.rtree.load(e)}},{key:"search",value:function(e){return this.rtree.search(e)}},{key:"isAllocated",value:function(e){var t=e instanceof m?e:y.copy(e),n=this.search(t);return this.intersectsDetails(t,n)}},{key:"isVisible",value:function(e){return this.screenBounds.intersects(e)}},{key:"isFullyVisible",value:function(e){return this.screenBounds.containsBox(e)}},{key:"intersectsDetails",value:function(e,t){var n,r=a(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i instanceof v){var o,s=a(i.detailBoxes);try{for(s.s();!(o=s.n()).done;){if(o.value.intersects(e))return!0}}catch(l){s.e(l)}finally{s.f()}}else{if(!g(i))return!0;var u=i;if(this.intersectsLine(e,u))return!0}}}catch(l){r.e(l)}finally{r.f()}return!1}},{key:"intersectsLine",value:function(e,t){var n,r,i,a,o=t.line,s=o.end.x-o.start.x;if(0!==s){var u=o.end.y-o.start.y,l=u,c=-s,d=o.start.y-u/s*o.start.x;n=Math.sign(e.minX*l+(e.minY-d)*c),r=Math.sign(e.maxX*l+(e.minY-d)*c),i=Math.sign(e.minX*l+(e.maxY-d)*c),a=Math.sign(e.maxX*l+(e.maxY-d)*c)}else n=Math.sign(e.minX-o.start.x),r=Math.sign(e.maxX-o.start.x),i=Math.sign(e.minX-o.start.x),a=Math.sign(e.maxX-o.start.x);return n!==r||n!==i||n!==a}}]),e}();t.ScreenCollisions=x;var _=function(e){u(n,e);var t=l(n);function n(e){var r;return o(this,n),(r=t.call(this)).m_renderContext=null,r.m_renderingEnabled=!1,r.m_numAllocations=0,r.m_numSuccessfulTests=0,r.m_numFailedTests=0,r.m_numSuccessfulVisibilityTests=0,r.m_numFailedVisibilityTests=0,void 0!==e&&null!==e&&(r.m_renderContext=e.getContext("2d")),r}return s(n,[{key:"reset",value:function(){r(i(n.prototype),"reset",this).call(this),this.m_numAllocations=0,this.m_numSuccessfulTests=0,this.m_numFailedTests=0,this.m_numSuccessfulVisibilityTests=0,this.m_numFailedVisibilityTests=0}},{key:"update",value:function(e,t){this.m_renderingEnabled&&p.log("Allocations: ".concat(this.m_numAllocations," Successful Tests: ").concat(this.m_numSuccessfulTests," Failed Tests: ").concat(this.m_numFailedTests,"  Successful Visibility Tests: ").concat(this.m_numSuccessfulVisibilityTests,"  Failed Visibility Tests: ").concat(this.m_numFailedVisibilityTests," ")),r(i(n.prototype),"update",this).call(this,e,t),null!==this.m_renderContext&&(this.m_renderContext.canvas.width=e,this.m_renderContext.canvas.height=t),this.m_renderingEnabled=h.debugContext.getValue("DEBUG_SCREEN_COLLISIONS")}},{key:"allocate",value:function(e){r(i(n.prototype),"allocate",this).call(this,e),this.m_numAllocations++,this.m_renderingEnabled&&null!==this.m_renderContext&&(this.m_renderContext.strokeStyle="#6666ff",this.m_renderContext.strokeRect(e.x-this.screenBounds.x,this.screenBounds.y+this.screenBounds.h-e.y,e.w,-e.h))}},{key:"allocateIBoxes",value:function(e){var t,o=a(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;this.m_numAllocations++,this.m_renderingEnabled&&null!==this.m_renderContext&&(this.m_renderContext.strokeStyle="#aa2222",this.m_renderContext.strokeRect(s.minX-this.screenBounds.x,this.screenBounds.y+this.screenBounds.h-s.minY,s.maxX-s.minX,-(s.maxY-s.minY)))}}catch(u){o.e(u)}finally{o.f()}r(i(n.prototype),"allocateIBoxes",this).call(this,e)}},{key:"intersectsDetails",value:function(e,t){var a=r(i(n.prototype),"intersectsDetails",this).call(this,e,t);if(this.m_renderingEnabled&&null!==this.m_renderContext){var o=a?2:1;this.m_renderContext.strokeStyle=a?"#FF0000":"#00ff00",this.m_renderContext.strokeRect(e.x-this.screenBounds.x-o,this.screenBounds.y+this.screenBounds.h-e.y+o,e.w+2*o,-e.h-2*o)}return a?this.m_numFailedTests++:this.m_numSuccessfulTests++,a}},{key:"isVisible",value:function(e){var t=r(i(n.prototype),"isVisible",this).call(this,e);return t?this.m_numSuccessfulVisibilityTests++:this.m_numFailedVisibilityTests++,t}}]),n}(x);t.ScreenCollisionsDebug=_},56396:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenProjector=void 0;var a=n(34585);function o(e){return e.z>-1&&e.z<1}var s=function(){function e(t){r(this,e),this.m_camera=t,this.m_width=0,this.m_height=0}return i(e,[{key:"width",get:function(){return this.m_width}},{key:"height",get:function(){return this.m_height}},{key:"project",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector2,r=this.projectVector(t,e.tempV3);return this.ndcToScreen(r,n)}},{key:"projectToScreen",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector2,r=this.projectVector(t,e.tempV3);if(o(r))return this.ndcToScreen(r,n)}},{key:"projectAreaToScreen",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new a.Vector2;n*=2,r*=2;var s=this.projectVector(t,e.tempV3);if(o(s)&&s.x+n>=-1&&s.x-n<=1&&s.y+r>=-1&&s.y-r<=1)return this.ndcToScreen(s,i)}},{key:"project3",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Vector3,r=this.projectVector(t,e.tempV3);if(r.z>-1&&r.z<1)return n.set(r.x*this.m_width/2,r.y*this.m_height/2,r.z),n}},{key:"projectVector",value:function(e,t){return t.set(e.x,e.y,e.z).project(this.m_camera),t}},{key:"onScreen",value:function(t){var n,r=this.projectVector(t,e.tempV3);return(n=r).z>-1&&n.z<1&&n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1}},{key:"update",value:function(e,t,n){this.m_camera=e,this.m_width=t,this.m_height=n}},{key:"ndcToScreen",value:function(e,t){return t.set(e.x*this.m_width/2,e.y*this.m_height/2)}}]),e}();t.ScreenProjector=s,s.tempV2=new a.Vector2,s.tempV3=new a.Vector3},97229:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBackground=void 0;var a=n(37958),o=n(65819),s=function(){function e(t,n,i){switch(r(this,e),this.m_sky=t,this.m_projectionType=n,this.m_sky.type){case"gradient":this.m_skyTexture=new o.SkyGradientTexture(this.m_sky,this.m_projectionType),this.updateCamera(i);break;case"cubemap":this.m_skyTexture=new a.SkyCubemapTexture(this.m_sky)}}return i(e,[{key:"dispose",value:function(){this.m_skyTexture.dispose()}},{key:"texture",get:function(){return this.m_skyTexture.texture}},{key:"updateCamera",value:function(e){"gradient"===this.m_sky.type&&this.m_skyTexture.update(e)}},{key:"updateTexture",value:function(e,t){var n=this.m_sky.type===e.type&&this.m_projectionType===t;switch(e.type){case"gradient":n?this.m_skyTexture.updateTexture(e):this.m_skyTexture=new o.SkyGradientTexture(e,t);break;case"cubemap":n?this.m_skyTexture.updateTexture(e):this.m_skyTexture=new a.SkyCubemapTexture(e)}this.m_projectionType=t,this.m_sky=e}}]),e}();t.SkyBackground=s},37958:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SkyCubemapTexture=t.SkyCubemapFaceId=t.SKY_CUBEMAP_FACE_COUNT=void 0;var a,o=n(15739),s=n(34585),u=o.LoggerManager.instance.create("SkyCubemapTexture");t.SKY_CUBEMAP_FACE_COUNT=6,function(e){e[e.positiveX=0]="positiveX",e[e.negativeX=1]="negativeX",e[e.positiveY=2]="positiveY",e[e.negativeY=3]="negativeY",e[e.positiveZ=4]="positiveZ",e[e.negativeZ=5]="negativeZ"}(a=t.SkyCubemapFaceId||(t.SkyCubemapFaceId={}));var l=function(){function e(t){r(this,e);var n=this.createCubemapFaceArray(t);this.m_skybox=void 0!==n?(new s.CubeTextureLoader).load(n):new s.CubeTexture}return i(e,[{key:"dispose",value:function(){this.m_skybox.dispose()}},{key:"texture",get:function(){return this.m_skybox}},{key:"updateTexture",value:function(e){var t=this.createCubemapFaceArray(e);void 0!==t&&(this.m_skybox=(new s.CubeTextureLoader).load(t))}},{key:"createCubemapFaceArray",value:function(e){for(var n=[void 0,void 0,void 0,void 0,void 0,void 0],r=0;r<t.SKY_CUBEMAP_FACE_COUNT;++r){var i=e[a[r]];if(void 0===i)return void u.error('Face "'.concat(a[r],'" was not defined.'));n[r]=i}return n}}]),e}();t.SkyCubemapTexture=l},65819:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SkyGradientTexture=t.DEFAULT_MONOMIAL_POWER=t.DEFAULT_TEXTURE_SIZE=void 0;var a=n(31201),o=n(15739),s=n(34585);t.DEFAULT_TEXTURE_SIZE=512,t.DEFAULT_MONOMIAL_POWER=1;var u=[new s.Vector3(1,0,0),new s.Vector3(-1,0,0),new s.Vector3(0,-1,0),new s.Vector3(0,1,0),new s.Vector3(0,0,1),new s.Vector3(0,0,-1)],l=[new s.Vector3(0,0,-1),new s.Vector3(0,0,1),new s.Vector3(1,0,0),new s.Vector3(1,0,0),new s.Vector3(1,0,0),new s.Vector3(-1,0,0)],c=[new s.Vector3(0,1,0),new s.Vector3(0,1,0),new s.Vector3(0,0,1),new s.Vector3(0,0,-1),new s.Vector3(0,1,0),new s.Vector3(0,1,0)],d=function(){function e(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_TEXTURE_SIZE;r(this,e),this.m_projectionType=i,this.m_height=o;var u=new s.Color(n.topColor),l=new s.Color(n.bottomColor),c=new s.Color(n.groundColor);this.m_width=this.m_projectionType===a.ProjectionType.Planar?1:this.m_height,this.m_faceCount=this.m_projectionType===a.ProjectionType.Planar?1:6,this.m_faces=[];for(var d=0;d<this.m_faceCount;++d){var h=new Uint8Array(3*this.m_width*this.m_height);this.fillTextureData(h,d,u,l,c,n.monomialPower);var f=new s.DataTexture(h,this.m_width,this.m_height,s.RGBFormat);f.needsUpdate=!0,f.unpackAlignment=1,this.m_faces.push(f)}this.m_projectionType===a.ProjectionType.Spherical?(this.m_skybox=new s.CubeTexture(this.m_faces),this.m_skybox.needsUpdate=!0):(this.m_farClipPlaneDividedVertically=new s.Line3,this.m_groundPlane=new s.Plane(new s.Vector3(0,0,1)),this.m_bottomMidFarPoint=new s.Vector3,this.m_topMidFarPoint=new s.Vector3,this.m_horizonPosition=new s.Vector3,this.m_farClipPlaneCorners=[new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3])}return i(e,[{key:"dispose",value:function(){for(var e=0;e<this.m_faceCount;++e)this.m_faces[e].dispose();this.m_projectionType===a.ProjectionType.Spherical&&this.m_skybox.dispose()}},{key:"texture",get:function(){return this.m_projectionType===a.ProjectionType.Planar?this.m_faces[0]:this.m_skybox}},{key:"update",value:function(e){this.m_projectionType===a.ProjectionType.Planar&&(this.setHorizonPosition(e),this.updateTexturePosition())}},{key:"updateTexture",value:function(e){for(var t=0;t<this.m_faceCount;++t)this.fillTextureData(this.m_faces[t].image.data,t,new s.Color(e.topColor),new s.Color(e.bottomColor),new s.Color(e.groundColor),e.monomialPower),this.m_faces[t].needsUpdate=!0;this.m_projectionType===a.ProjectionType.Spherical&&(this.m_skybox.needsUpdate=!0)}},{key:"fillTextureData",value:function(e,n,r,i,d,h){for(var f=new s.Color,p=new s.Vector3,m=new s.Vector3,v=new s.Vector3,g=new s.Vector3(0,0,1),y=0;y<this.m_height;++y)for(var x=0;x<this.m_width;++x){if(this.m_projectionType===a.ProjectionType.Spherical){var _=m.copy(l[n]).multiplyScalar((x+.5)/this.m_width*2-1),b=v.copy(c[n]).multiplyScalar((y+.5)/this.m_height*2-1);p.copy(u[n]).add(_).add(b).normalize();var w=Math.max(g.dot(p),0);f.copy(d).lerp(i,Math.min(100*w,1)).lerp(r,Math.pow(w,o.getOptionValue(h,t.DEFAULT_MONOMIAL_POWER))).multiplyScalar(255)}else{var S=y/this.m_height;0===y?f.copy(d).multiplyScalar(255):f.copy(i).lerp(r,Math.pow(S,o.getOptionValue(h,t.DEFAULT_MONOMIAL_POWER))).multiplyScalar(255)}e[y*this.m_width*3+3*x]=f.r,e[y*this.m_width*3+3*x+1]=f.g,e[y*this.m_width*3+3*x+2]=f.b}}},{key:"setHorizonPosition",value:function(e){this.m_farClipPlaneCorners[0].set(-1,-1,1).unproject(e),this.m_farClipPlaneCorners[1].set(1,-1,1).unproject(e),this.m_farClipPlaneCorners[2].set(-1,1,1).unproject(e),this.m_farClipPlaneCorners[3].set(1,1,1).unproject(e),this.m_bottomMidFarPoint.copy(this.m_farClipPlaneCorners[0]).add(this.m_farClipPlaneCorners[1]).multiplyScalar(.5),this.m_topMidFarPoint.copy(this.m_farClipPlaneCorners[2]).add(this.m_farClipPlaneCorners[3]).multiplyScalar(.5),this.m_farClipPlaneDividedVertically.set(this.m_bottomMidFarPoint,this.m_topMidFarPoint),this.m_groundPlane.intersectLine(this.m_farClipPlaneDividedVertically,this.m_horizonPosition)||this.m_horizonPosition.set(0,0,0)}},{key:"updateTexturePosition",value:function(){var e=this.m_bottomMidFarPoint.distanceTo(this.m_horizonPosition)/this.m_farClipPlaneDividedVertically.distance(),t=0===this.m_horizonPosition.length()?1:e-2/this.m_height;this.m_faces[0].offset.set(0,this.m_bottomMidFarPoint.z<=0?-t:e)}}]),e}();t.SkyGradientTexture=d},13508:function(e,t,n){"use strict";var r=n(63038).default,i=n(319).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SphereHorizon=t.previousCanvasSide=t.nextCanvasSide=t.CanvasSide=void 0;var s,u=n(31201),l=n(15739),c=n(34585),d=n(64172),h=n(61563),f=2*Math.PI;function p(e){return(e+1)%4}!function(e){e[e.Bottom=0]="Bottom",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Left=3]="Left"}(s=t.CanvasSide||(t.CanvasSide={})),t.nextCanvasSide=p,t.previousCanvasSide=function(e){return(e+3)%4};var m=function(){function e(t,n){a(this,e),this.m_camera=t,this.m_cornerIntersects=n,this.m_intersections=[],this.m_isFullyVisible=!0;var r=u.EarthConstants.EQUATORIAL_RADIUS*u.EarthConstants.EQUATORIAL_RADIUS,i=(new c.Vector3).setFromMatrixColumn(t.matrixWorld,0).normalize(),o=t.position.clone().normalize(),s=(new c.Vector3).crossVectors(o,i),l=t.position.length();this.m_normalToTangentAngle=Math.asin(u.EarthConstants.EQUATORIAL_RADIUS/l);var d=Math.sqrt(l*l-r);this.m_distanceToHorizonCenter=d*Math.cos(this.m_normalToTangentAngle);var f=l-this.m_distanceToHorizonCenter;this.m_radius=Math.sqrt(r-f*f),this.m_cameraPitch=h.MapViewUtils.extractAttitude({projection:u.sphereProjection},this.m_camera).pitch;var p=(new c.Vector3).copy(o).setLength(f);this.m_matrix=(new c.Matrix4).makeBasis(i,s,o).setPosition(p),this.computeIntersections()}return o(e,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new c.Vector3,i=t*f,a=n>=t?n*f:(n+1)*f,o=a-i,s=i+e*o;return r.set(this.m_radius*Math.cos(s),this.m_radius*Math.sin(s),0),r.applyMatrix4(this.m_matrix),r}},{key:"getDivisionPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=Math.max(Math.ceil(((n<t?1+n:n)-t)*r),1),a=0;a<i;a++)e(this.getPoint(a/i,t,n))}},{key:"isFullyVisible",get:function(){return this.m_isFullyVisible}},{key:"getSideIntersections",value:function(e){return this.m_intersections[e]}},{key:"isTangentVisible",value:function(e){switch(e){case s.Top:var t=this.m_normalToTangentAngle-this.m_cameraPitch;return d.CameraUtils.getTopFov(this.m_camera)>=Math.abs(t);case s.Bottom:var n=this.m_normalToTangentAngle+this.m_cameraPitch;return d.CameraUtils.getBottomFov(this.m_camera)>=Math.abs(n);case s.Left:var r=this.m_normalToTangentAngle;return d.CameraUtils.getLeftFov(this.m_camera)>=Math.abs(r)&&this.m_cameraPitch<=d.CameraUtils.getBottomFov(this.m_camera);case s.Right:var i=this.m_normalToTangentAngle;return d.CameraUtils.getRightFov(this.m_camera)>=Math.abs(i)&&this.m_cameraPitch<=d.CameraUtils.getBottomFov(this.m_camera)}}},{key:"getTangentOnSide",value:function(e){switch(e){case s.Bottom:return.75;case s.Right:return 0;case s.Top:return.25;case s.Left:return.5}}},{key:"computeIntersections",value:function(){for(var e,t,n=this,a=this.m_distanceToHorizonCenter*Math.tan(this.m_cameraPitch-d.CameraUtils.getBottomFov(this.m_camera)),o=function(o){if(n.isTangentVisible(o))return n.m_intersections.push([n.getTangentOnSide(o)]),"continue";var u=new Array;switch(n.m_isFullyVisible=!1,o){case s.Bottom:u.push.apply(u,i(n.computeTBIntersections(a)));break;case s.Right:var l=d.CameraUtils.getRightFov(n.m_camera),c=n.computeLRIntersections(a,l);if(c){var h=r(c,2);e=h[0],t=h[1],u.push(void 0!==t?1+t:void 0,e)}break;case s.Top:var f=n.m_distanceToHorizonCenter*Math.tan(n.m_cameraPitch+d.CameraUtils.getTopFov(n.m_camera));u.push.apply(u,i(n.computeTBIntersections(f).reverse()));break;case s.Left:var m=d.CameraUtils.getLeftFov(n.m_camera);if(m===d.CameraUtils.getRightFov(n.m_camera))u.push(void 0!==e?.5-e:void 0,void 0!==t?.5-t:void 0);else{var v=n.computeLRIntersections(a,m);v&&u.push(.5-v[0],void 0!==v[1]?.5-v[1]:void 0)}}var g=[n.m_cornerIntersects[o],n.m_cornerIntersects[p(o)]];n.m_intersections.push(u.filter((function(e,t){return void 0!==e&&!g[t]})))},u=s.Bottom;u<4;u++)o(u)}},{key:"computeTBIntersections",value:function(e){var t=this.m_radius*this.m_radius,n=Math.sqrt(t-e*e),r=Math.atan2(e,n)/f;return[.5-r,r>0?r:1+r]}},{key:"computeLRIntersections",value:function(e,t){var n=this.m_distanceToHorizonCenter/Math.cos(this.m_cameraPitch),r=this.m_distanceToHorizonCenter*Math.tan(this.m_cameraPitch),i=n*Math.tan(t),a=d.CameraUtils.getBottomFov(this.m_camera),o=i*(this.m_distanceToHorizonCenter*Math.cos(a)/Math.cos(this.m_cameraPitch-a))/n,s=l.Math2D.intersectLineAndCircle(o,e,i,r,this.m_radius);if(s){var u=s.y1;return[Math.atan2(u,s.x1)/f,-u>=e&&void 0!==s.x2?Math.atan2(s.y2,s.x2)/f:void 0]}}}]),e}();t.SphereHorizon=m},32344:function(e,t,n){"use strict";var r=n(63038).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SphereViewBounds=t.computeEdgeDivisions=void 0;var o=n(31201),s=n(15739),u=n(34585),l=n(13508),c=n(61563);function d(e,t){var n=Math.abs(t.latitude-e.latitude),r=e.minLongitudeSpanTo(t);return Math.ceil(Math.max(n/20,r/5))}t.computeEdgeDivisions=d;var h=[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],f=function(){function e(t,n){i(this,e),this.camera=t,this.projection=n,s.assert(n.type===o.ProjectionType.Spherical)}return a(e,[{key:"generate",value:function(){var e=this.findBoundsIntersections();return this.wrapAroundPoles(e),e.length>2?new o.GeoPolygon(e,!1,!0):void 0}},{key:"addSideSegmentSubdivisions",value:function(e,t,n,r,i){e.push(r);var a=d(r,i);if(!(a<=1))for(var o=new u.Vector2(n.x-t.x,n.y-t.y).multiplyScalar(1/a),s=new u.Vector2(t.x,t.y),l=0;l<a-1;l++){s.add(o);var h=c.MapViewUtils.rayCastWorldCoordinates({camera:this.camera,projection:this.projection},s.x,s.y);h&&e.push(this.projection.unprojectPoint(h))}}},{key:"addSideIntersections",value:function(e,t,n,r,i){var a=this,o=h[t],u=h[l.nextCanvasSide(t)];if(n&&r)this.addSideSegmentSubdivisions(e,o,u,n,r);else if(i){var c=i.getSideIntersections(t);if(0!==c.length){if(n){var d=i.getPoint(c[c.length-1]),f=this.projection.unprojectPoint(d);this.addSideSegmentSubdivisions(e,o,d.project(this.camera),n,f)}else{var p=l.previousCanvasSide(t),m=i.getSideIntersections(p);0===m.length&&(m=i.getSideIntersections(l.previousCanvasSide(p))),s.assert(m.length>0),i.getDivisionPoints((function(t){e.push(a.projection.unprojectPoint(t))}),m[m.length-1],c[0])}if(c.length>1){var v=i.getPoint(c[0]),g=i.getPoint(c[1]),y=this.projection.unprojectPoint(v),x=this.projection.unprojectPoint(g);this.addSideSegmentSubdivisions(e,v.project(this.camera),g.project(this.camera),y,x)}if(r){var _=i.getPoint(c[0]),b=this.projection.unprojectPoint(_);this.addSideSegmentSubdivisions(e,_.project(this.camera),u,b,r)}}}}},{key:"findBoundsIntersections",value:function(){var e=this,t=[],n=this.addCanvasCornerIntersection(),i=r(n,2),a=i[0],o=i[1],s=o<4?new l.SphereHorizon(this.camera,a.map((function(e){return void 0!==e}))):void 0;if(0===o&&s.isFullyVisible)return s.getDivisionPoints((function(n){t.push(e.projection.unprojectPoint(n))})),t;for(var u=l.CanvasSide.Bottom;u<4;u++){var c=a[u],d=a[l.nextCanvasSide(u)];this.addSideIntersections(t,u,c,d,s)}return t}},{key:"wrapAroundPoles",value:function(e){var t=new u.Vector3(0,0,o.EarthConstants.EQUATORIAL_RADIUS),n=new u.Vector3(0,0,-o.EarthConstants.EQUATORIAL_RADIUS),r=c.MapViewUtils.closeToFrustum(t,this.camera),i=c.MapViewUtils.closeToFrustum(n,this.camera);if(r||i){var a=this.projection.unprojectPoint(this.camera.position).lng,s=r?90:-90,l=r?a+180:a-180,d=new o.GeoCoordinates(s,l),h=d.normalized(),f=h.lng,p=e[e.length-1].lng,m=!1,v=e.findIndex((function(e){var t=o.isAntimeridianCrossing(p,e.lng);return Math.sign(f-e.lng)===Math.sign(f-p)===t?(m=t,!0):(p=e.lng,!1)}));if(!(v<0)){var g=r?90:-90,y=r?1e-5:-1e-5,x=new o.GeoCoordinates(s,a+g).normalized(),_=new o.GeoCoordinates(s,a).normalized(),b=new o.GeoCoordinates(s,a-g).normalized(),w=new o.GeoCoordinates(s,l+y).normalized(),S=e[(v+e.length-1)%e.length],M=e[v],E=o.GeoCoordinates.lerp(S,M,.01,m);m&&r?E.longitude-=360:E=E.normalized(),e.splice(v,0,l<-180?d:h,x,_,b,w,E)}}}},{key:"addCanvasCornerIntersection",value:function(){var e=this,t=new Array,n=0;return h.forEach((function(r){var i=c.MapViewUtils.rayCastWorldCoordinates({camera:e.camera,projection:e.projection},r.x,r.y);i?(t.push(e.projection.unprojectPoint(i)),++n):t.push(void 0)})),[t,n]}}]),e}();t.SphereViewBounds=f},91422:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(16525).default,o=n(29754).default,s=n(2205).default,u=n(99842).default,l=n(34575).default,c=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceStatistics=t.FrameStatsArray=t.FrameStats=t.Statistics=t.MultiStageTimer=t.computeArrayAverage=t.computeArrayStats=t.SampledTimer=t.SimpleTimer=t.RingBuffer=void 0;var d=n(15739),h=d.LoggerManager.instance.create("Statistics"),f=function(){function e(t){l(this,e),this.capacity=t,this.buffer=new Array(t),this.capacity=t,this.head=this.tail=this.size=0}return c(e,[{key:"clear",value:function(){this.head=this.tail=this.size=0}},{key:"enqOne",value:function(e){var t=this.head+1;t>=this.capacity&&(t=0),this.size<this.capacity&&this.size++,this.buffer[this.head]=e,this.head=t,this.size===this.capacity&&(this.tail=this.head)}},{key:"enq",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];this.enqOne(a)}}},{key:"deq",value:function(){if(0===this.size)throw new Error("Ringbuffer underrun");var e=this.buffer[this.tail],t=this.tail+1;return t>=this.capacity&&(t=0),this.size>0&&this.size--,this.tail=t,e}},{key:"top",get:function(){if(0===this.size)throw new Error("Ringbuffer underrun");return this.buffer[this.tail]}},{key:"bottom",get:function(){if(0===this.size)throw new Error("Ringbuffer underrun");var e=this.head-1;return e<0&&(e=this.capacity-1),this.buffer[e]}},{key:"iterator",value:function(){return new e.Iterator(this)}},{key:"asArray",value:function(){for(var e=new Array,t=0;t<this.size;t++)e.push(this.buffer[(this.tail+t)%this.capacity]);return e}}]),e}();t.RingBuffer=f,function(e){var t=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l(this,e),this.m_buffer=t,this.m_index=n}return c(e,[{key:"value",get:function(){return this.m_buffer.buffer[(this.m_buffer.tail+this.m_index)%this.m_buffer.capacity]}},{key:"next",value:function(){return this.m_index++,this.m_index<this.m_buffer.size}}]),e}();e.Iterator=t}(f=t.RingBuffer||(t.RingBuffer={}));var p=function(){function e(t,n){l(this,e),this.statistics=t,this.name=n,this.running=!1}return c(e,[{key:"value",get:function(){return this.m_currentValue}},{key:"setValue",value:function(e){this.m_currentValue=e}},{key:"reset",value:function(){this.m_currentValue=void 0}},{key:"start",value:function(){if(!this.statistics.enabled)return-1;if(this.running)throw new Error("Timer '"+this.name+"' is already running");return this.running=!0,this.m_currentValue=d.PerformanceTimer.now()}},{key:"stop",value:function(){var e;if(!this.statistics.enabled)return-1;if(this.running){var t=d.PerformanceTimer.now()-(null!==(e=this.m_currentValue)&&void 0!==e?e:0);return this.m_currentValue=t,this.setValue(t),this.running=!1,t}throw new Error("Timer '"+this.name+"' has not been started")}},{key:"now",value:function(){var e;if(!this.statistics.enabled)return-1;if(this.running)return d.PerformanceTimer.now()-(null!==(e=this.m_currentValue)&&void 0!==e?e:0);throw new Error("Timer '"+this.name+"' has not been started")}}]),e}();t.SimpleTimer=p;var m=function(e){s(n,e);var t=u(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).statistics=e,i.name=r,i.numResets=0,i.maxNumSamples=1e3,i.samples=new f(i.maxNumSamples),i}return c(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),this.getStats(),this.samples.clear(),this.numResets++}},{key:"setValue",value:function(e){a(o(n.prototype),"setValue",this).call(this,e),void 0!==e&&this.samples.enqOne(e)}},{key:"getStats",value:function(){return v(this.samples.asArray())}}]),n}(p);function v(e){if(0!==e.length){e.sort((function(e,t){return e-t}));var t,n,r,i,a,o,s,u=e[0],l=e[e.length-1];if(1===e.length)n=r=i=a=o=s=t=e[0];else if(2===e.length)t=.5*e[0]+.5*e[1],n=r=i=a=o=s=e[1];else{var c=Math.floor(e.length/2);t=e.length%2===0?.5*e[c-1]+.5*e[c]:e[c],n=e[Math.round(.75*e.length)-1],r=e[Math.round(.9*e.length)-1],i=e[Math.round(.95*e.length)-1],a=e[Math.round(.97*e.length)-1],o=e[Math.round(.99*e.length)-1],s=e[Math.round(.999*e.length)-1]}for(var d=0,h=0,f=e.length;h<f;h++)d+=e[h];return{min:u,max:l,avg:d/e.length,median:t,median75:n,median90:r,median95:i,median97:a,median99:o,median999:s,numSamples:e.length}}}t.SampledTimer=m,t.computeArrayStats=v,t.computeArrayAverage=function(e){if(0!==e.length){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t/e.length}};var g=function(){function e(t,n,r){if(l(this,e),this.statistics=t,this.name=n,this.stages=r,r.length<1)throw new Error("MultiStageTimer needs stages");r.forEach((function(e){if(!t.hasTimer(e))throw new Error("Unknown timer: "+e)}))}return c(e,[{key:"value",get:function(){return this.statistics.getTimer(this.stages[this.stages.length-1]).value}},{key:"reset",value:function(){var e=this;this.statistics.enabled&&this.stages.forEach((function(t){e.statistics.getTimer(t).reset()}))}},{key:"start",value:function(){var e;return this.stage=this.stages[0],null!==(e=this.statistics.getTimer(this.stages[0]).value)&&void 0!==e?e:-1}},{key:"stop",value:function(){return this.stage=void 0,void 0!==this.value?this.value:-1}},{key:"stage",get:function(){return this.currentStage},set:function(e){this.currentStage!==e&&(this.statistics.enabled&&void 0!==this.currentStage&&this.statistics.getTimer(this.currentStage).stop(),this.currentStage=e,this.statistics.enabled&&void 0!==this.currentStage&&this.statistics.getTimer(this.currentStage).start())}}]),e}();t.MultiStageTimer=g;var y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(this,e),this.name=t,this.enabled=n,this.timers=new Map,this.nullTimer=new p(this,"<null>")}return c(e,[{key:"createTimer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?new m(this,e):new p(this,e);return this.addTimer(n)}},{key:"addTimer",value:function(e){if(void 0!==this.timers.get(e.name))throw new Error("Duplicate timer name: '"+e.name+"'");return this.timers.set(e.name,e),e}},{key:"getTimer",value:function(e){if(!this.enabled)return this.nullTimer;var t=this.timers.get(e);return void 0===t?this.nullTimer:t}},{key:"hasTimer",value:function(e){return void 0!==this.timers.get(e)}},{key:"reset",value:function(){this.timers.forEach((function(e){e.reset()}))}},{key:"log",value:function(e,t){void 0===e&&void 0===this.name||h.log(void 0!==e?e:this.name);var n=0;this.timers.forEach((function(e){n=Math.max(n,e.name.length)}));var r=function(e){return void 0!==e?e.toFixed(5):"?"};this.timers.forEach((function(e){var t=e.name+": "+" ".repeat(n-e.name.length);if(t+=r(e.value),e instanceof m){var i=e.getStats();void 0!==i&&(t+="  [ min=".concat(r(i.min),", max=").concat(r(i.max),", ")+"avg=".concat(r(i.avg),", med=").concat(r(i.median),", ")+"med95=".concat(r(i.median95),", med99=").concat(r(i.median99),", ")+"N=".concat(r(i.numSamples)," ]"))}h.log(t)})),void 0!==t&&h.log(t)}}]),e}();t.Statistics=y;var x=function(){function e(){l(this,e),this.entries=new Map,this.messages=void 0}return c(e,[{key:"getValue",value:function(e){return this.entries.get(e)}},{key:"setValue",value:function(e,t){this.entries.set(e,t)}},{key:"addValue",value:function(e,t){var n=this.entries.get(e);this.entries.set(e,t+(void 0===n?0:n))}},{key:"addMessage",value:function(e){void 0===this.messages&&(this.messages=[]),this.messages.push(e)}},{key:"reset",value:function(){var e=this;this.entries.forEach((function(t,n){e.entries.set(n,0)})),this.messages=void 0}}]),e}();t.FrameStats=x;var _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l(this,e),this.capacity=t,this.frameEntries=new Map,this.messages=new f(t)}return c(e,[{key:"length",get:function(){return this.messages.size}},{key:"reset",value:function(){this.frameEntries.forEach((function(e,t){e.clear()})),this.messages.clear()}},{key:"addFrame",value:function(e){var t=this,n=this.length,r=this.frameEntries;e.entries.forEach((function(e,i){var a=r.get(i);if(void 0===a){a=new f(t.capacity);for(var o=0;o<n;o++)a.enqOne(0);t.frameEntries.set(i,a)}a.enqOne(e)})),this.messages.enq(e.messages)}},{key:"log",value:function(){var e=0;this.frameEntries.forEach((function(t,n){e=Math.max(e,n.length)}));var t=function(e){return void 0!==e?e.toFixed(5):"?"};this.frameEntries.forEach((function(n,r){var i=r+": "+" ".repeat(e-r.length),a=v(n.asArray());void 0!==a&&(i+="  [ min=".concat(t(a.min),", max=").concat(t(a.max),", ")+"avg=".concat(t(a.avg),", med=").concat(t(a.median),", ")+"med95=".concat(t(a.median95),", med99=").concat(t(a.median99),", ")+"N=".concat(t(a.numSamples)," ]")),h.log(i)}))}}]),e}();t.FrameStatsArray=_;var b=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;l(this,e),this.enabled=t,this.maxNumFrames=n,this.currentFrame=new x,this.appResults=new Map,this.configs=new Map,e.m_instance=this,this.m_frameEvents=new _(n)}return c(e,[{key:"isFull",get:function(){return this.m_frameEvents.length>=this.maxNumFrames}},{key:"frameEvents",get:function(){return this.m_frameEvents}},{key:"clear",value:function(){this.clearFrames(),this.configs.clear(),this.appResults.clear()}},{key:"clearFrames",value:function(){this.m_frameEvents.reset(),this.currentFrame.reset()}},{key:"addWebGLInfo",value:function(e){void 0!==e.render&&(this.currentFrame.setValue("gl.numCalls",null===e.render.calls?0:e.render.calls),this.currentFrame.setValue("gl.numPoints",null===e.render.points?0:e.render.points),this.currentFrame.setValue("gl.numLines",null===e.render.lines?0:e.render.lines),this.currentFrame.setValue("gl.numTriangles",null===e.render.triangles?0:e.render.triangles)),void 0!==e.memory&&(this.currentFrame.setValue("gl.numGeometries",null===e.memory.geometries?0:e.memory.geometries),this.currentFrame.setValue("gl.numTextures",null===e.memory.textures?0:e.memory.textures)),void 0!==e.programs&&this.currentFrame.setValue("gl.numPrograms",null===e.programs?0:e.programs.length)}},{key:"addMemoryInfo",value:function(){if(void 0!==window&&void 0!==window.performance){var e=window.performance.memory;void 0!==e&&(this.currentFrame.setValue("memory.totalJSHeapSize",e.totalJSHeapSize),this.currentFrame.setValue("memory.usedJSHeapSize",e.usedJSHeapSize),this.currentFrame.setValue("memory.jsHeapSizeLimit",e.jsHeapSizeLimit))}}},{key:"storeAndClearFrameInfo",value:function(){return!(this.m_frameEvents.length>=this.maxNumFrames)&&(this.m_frameEvents.addFrame(this.currentFrame),this.currentFrame.reset(),!0)}},{key:"log",value:function(e,t){h.log(void 0!==e?e:"PerformanceStatistics"),this.appResults.forEach((function(e,t){h.log(t,e)})),this.configs.forEach((function(e,t){h.log(t,e)})),this.m_frameEvents.log(),void 0!==t&&h.log(t)}},{key:"getAsPlainObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={},n={},a={},o={configs:n,appResults:t,frames:a},s=this.appResults;s.forEach((function(e,n){t[n]=e}));var u=this.configs;if(u.forEach((function(e,t){n[t]=e})),e){var l,c=i(this.m_frameEvents.frameEntries);try{for(c.s();!(l=c.n()).done;){var d=r(l.value,2),h=d[0],f=d[1];a[h]=f.bottom}}catch(x){c.e(x)}finally{c.f()}}else{var p,m=i(this.m_frameEvents.frameEntries);try{for(m.s();!(p=m.n()).done;){var v=r(p.value,2),g=v[0],y=v[1];a[g]=y.asArray()}}catch(x){m.e(x)}finally{m.f()}}return o.messages=this.m_frameEvents.messages.asArray(),o}},{key:"getLastFrameStatistics",value:function(){return this.getAsPlainObject(!0)}},{key:"getAsSimpleFrameStatistics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Map,n=new Map,a=new Map,o={configs:t,appResults:n,frames:a,messages:this.m_frameEvents.messages.asArray()},s=this.appResults;s.forEach((function(e,t){n.set(t,e)}));var u=this.configs;if(u.forEach((function(e,n){t.set(n,e)})),e){var l,c=i(this.m_frameEvents.frameEntries);try{for(c.s();!(l=c.n()).done;){var d=r(l.value,2),h=d[0],f=d[1];a.set(h,f.bottom)}}catch(x){c.e(x)}finally{c.f()}}else{var p,m=i(this.m_frameEvents.frameEntries);try{for(m.s();!(p=m.n()).done;){var v=r(p.value,2),g=v[0],y=v[1];a.set(g,y.asArray())}}catch(x){m.e(x)}finally{m.f()}}return o}}],[{key:"instance",get:function(){return void 0===e.m_instance&&(e.m_instance=new e(!1,0)),e.m_instance}}]),e}();t.PerformanceStatistics=b,b.m_instance=void 0},24856:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextureLoader=void 0;var s=n(34585),u=function(){function e(){a(this,e),this.m_textureLoader=new s.TextureLoader}return o(e,[{key:"load",value:function(){var e=i(r.mark((function e(t,n,i){var a,o,u,l,c,d=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(d.length>3&&void 0!==d[3])||d[3],void 0!==n){e.next=5;break}return e.next=4,this.loadWithThreeLoader(t);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,fetch(t,{headers:n,signal:i,mode:a?"cors":"no-cors"});case 7:return o=e.sent,e.next=10,o.blob();case 10:return u=e.sent,e.next=13,this.loadWithThreeLoader(URL.createObjectURL(u));case 13:return l=e.sent,c="image/jpeg/"===u.type||t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/),l.format=c?s.RGBFormat:s.RGBAFormat,e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadWithThreeLoader",value:function(e){var t=this;return new Promise((function(n,r){t.m_textureLoader.setCrossOrigin(""),t.m_textureLoader.load(e,(function(e){return n(e)}),void 0,(function(){return r(new Error("failed to load texture"))}))}))}}]),e}();t.TextureLoader=u},4716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLight=t.toTextureFilter=t.toWrappingMode=t.toTextureDataType=t.toPixelFormat=void 0;var r=n(34585);t.toPixelFormat=function(e){switch(e){case"Alpha":return r.AlphaFormat;case"RGB":return r.RGBFormat;case"RGBA":return r.RGBAFormat;case"Luminance":return r.LuminanceFormat;case"LuminanceAlpha":return r.LuminanceAlphaFormat;case"RGBE":return r.RGBEFormat;case"Depth":return r.DepthFormat;case"DepthStencil":return r.DepthStencilFormat;case"Red":return r.RedFormat;default:throw new Error("invalid pixel format: ".concat(e))}},t.toTextureDataType=function(e){switch(e){case"UnsignedByte":return r.UnsignedByteType;case"Byte":return r.ByteType;case"Short":return r.ShortType;case"UnsignedShort":return r.UnsignedShortType;case"Int":return r.IntType;case"UnsignedInt":return r.UnsignedIntType;case"Float":return r.FloatType;case"HalfFloat":return r.HalfFloatType;default:throw new Error("invalid texture data type: ".concat(e))}},t.toWrappingMode=function(e){switch(e){case"clamp":return r.ClampToEdgeWrapping;case"repeat":return r.RepeatWrapping;case"mirror":return r.MirroredRepeatWrapping;default:throw new Error("invalid wrapping mode: ".concat(e))}},t.toTextureFilter=function(e){switch(e){case"nearest":return r.NearestFilter;case"nearestMipMapNearest":return r.NearestMipMapNearestFilter;case"nearestMipMapLinear":return r.NearestMipMapLinearFilter;case"linear":return r.LinearFilter;case"linearMipMapNearest":return r.LinearMipMapNearestFilter;case"linearMipMapLinear":return r.LinearMipMapLinearFilter;default:throw new Error("invalid texture filter: ".concat(e))}},t.createLight=function(e){switch(e.type){case"ambient":var t=new r.AmbientLight(e.color,e.intensity);return t.name=e.name,t;case"directional":var n=new r.DirectionalLight(e.color,e.intensity);return n.name=e.name,void 0!==e.castShadow&&(n.castShadow=e.castShadow),n.castShadow&&(n.shadow.bias=1e-5,n.shadow.mapSize.width=1024,n.shadow.mapSize.height=1024),n.position.set(e.direction.x,e.direction.y,e.direction.z),n.position.normalize(),n}}},30081:function(e,t,n){"use strict";var r=n(319).default,i=n(43269).default,a=n(87757),o=n(48926).default,s=n(34575).default,u=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLoader=t.DEFAULT_MAX_THEME_INTHERITANCE_DEPTH=void 0,n(89064);var l=n(26309),c=n(6705),d=n(15739),h=n(37958);t.DEFAULT_MAX_THEME_INTHERITANCE_DEPTH=4;var f=function(){function e(){s(this,e)}return u(e,null,[{key:"load",value:function(){var t=o(a.mark((function t(n,r){var i,o,s,u,l,c;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null!==r&&void 0!==r?r:{},"string"!==typeof n){t.next=16;break}return o=r.uriResolver,s=void 0!==o?o.resolveUri(n):n,t.next=6,fetch(s,{signal:r.signal});case 6:if((u=t.sent).ok){t.next=9;break}throw new Error("ThemeLoader#load: cannot load theme: ".concat(u.statusText));case 9:return t.next=11,u.json();case 11:(n=t.sent).url=d.resolveReferenceUri(d.getAppBaseUrl(),s),n=this.resolveUrls(n,r),t.next=17;break;case 16:void 0===n.url?(n.url=d.getAppBaseUrl(),n=this.resolveUrls(n,r)):n=this.convertFlatTheme(n);case 17:if(null!==n&&void 0!==n){t.next=19;break}throw new Error("ThemeLoader#load: loaded resource is not valid JSON");case 19:return e.checkTechniqueSupport(n),l=d.getOptionValue(r.resolveDefinitions,!1),t.next=23,e.resolveBaseThemes(n,r);case 23:return n=t.sent,l&&(c=new d.ContextLogger(null!==(i=r.logger)&&void 0!==i?i:console,"when processing Theme ".concat(n.url,":")),e.resolveThemeReferences(n,c)),t.abrupt("return",n);case 26:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"isThemeLoaded",value:function(e){return void 0===e.extends&&!Array.isArray(e.styles)}},{key:"loadAsync",value:function(){var t=o(a.mark((function t(n){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"resolveUrls",value:function(t,n){var r=this;if(void 0===(t=e.convertFlatTheme(t)).url)return t;var i=d.composeUriResolvers(null===n||void 0===n?void 0:n.uriResolver,new d.RelativeUriResolver(t.url)),a=void 0===n||!(!1===n.resolveIncludeUris);return t.extends&&a&&(t.extends=(Array.isArray(t.extends)?t.extends:[t.extends]).map((function(e){return"string"===typeof e?i.resolveUri(e):void 0!==e.url?e:(e.url=t.url,r.resolveUrls(e,n))}))),e.convertFlatTheme(t)?((void 0===n||!(!1===n.resolveResourceUris))&&e.resolveResources(t,i),t):t}},{key:"checkTechniqueSupport",value:function(e){if(void 0!==e.styles)for(var t in e.styles)if(e.styles.hasOwnProperty(t)){var n,r=i(e.styles[t]);try{for(r.s();!(n=r.n()).done;){n.value.technique}}catch(a){r.e(a)}finally{r.f()}}}},{key:"resolveThemeReferences",value:function(t,n){if(void 0!==t.styles)for(var r in t.styles)t.styles.hasOwnProperty(r)&&(n.pushAttr("styles"),n.pushAttr(r),t.styles[r]=e.resolveStyleSet(t.styles[r],t.definitions,n),n.pop(),n.pop());return t}},{key:"resolveStyleSet",value:function(t,n,r){for(var i=[],a=0;a<t.length;++a){var o=t[a];r.pushIndex(a);var s=e.resolveStyle(o,n,r);void 0!==s?i.push(s):r.warn("invalid style, ignored"),r.pop()}return i}},{key:"resolveStyle",value:function(e,t,n){if(Array.isArray(e.when)){n.pushAttr("when");var r=this.resolveExpressionReferences(e.when,t,n);if(n.pop(),void 0===r)return;e.when=r}if(void 0!==e.attr){var i=e.attr;for(var a in n.pushAttr("attr"),i)if(i.hasOwnProperty(a)){var o=i[a];if(Array.isArray(o)){n.pushAttr(a);var s=this.resolveExpressionReferences(o,t,n);n.pop(),void 0!==s?i[a]=s:delete i[a]}}n.pop()}return e}},{key:"resolveExpressionReferences",value:function(e,t,n){var i=!1;var a=function e(a){if(c.isJsonExprReference(a)){var o=a[1],s=t&&t[o];return void 0===s?(n.warn("invalid reference '".concat(o,"' - not found")),void(i=!0)):l.isJsonExpr(s)?s:s.value}if(Array.isArray(a)){for(var u=r(a),d=1;d<u.length;++d)u[d]=e(u[d]);return u}return a}(e);if(!i)return a}},{key:"resolveBaseThemes",value:function(){var n=o(a.mark((function n(r,o){var s,u,l,c,h,f,p;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=null!==o&&void 0!==o?o:{},void 0!==r.extends){n.next=3;break}return n.abrupt("return",r);case 3:if(!((s=d.getOptionValue(o.maxInheritanceDepth,t.DEFAULT_MAX_THEME_INTHERITANCE_DEPTH))<=0)){n.next=6;break}throw new Error("maxInheritanceDepth reached when attempting to load base theme");case 6:u=Array.isArray(r.extends)?r.extends:[r.extends],delete r.extends,l={},c=i(u),n.prev=10,c.s();case 12:if((h=c.n()).done){n.next=20;break}return f=h.value,n.next=16,e.load(f,Object.assign(Object.assign({},o),{resolveDefinitions:!1,maxInheritanceDepth:s-1}));case 16:p=n.sent,l=e.mergeThemes(p,l);case 18:n.next=12;break;case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(10),c.e(n.t0);case 25:return n.prev=25,c.f(),n.finish(25);case 28:return n.abrupt("return",e.mergeThemes(r,l));case 29:case"end":return n.stop()}}),n,null,[[10,22,25,28]])})));return function(e,t){return n.apply(this,arguments)}}()},{key:"mergeThemes",value:function(t,n){var r,i=Object.assign(Object.assign({},n.definitions),t.definitions);if(n.styles&&t.styles){var a=Object.keys(n.styles),o=Object.keys(t.styles);r={},a.forEach((function(e){var i=o.indexOf(e);if(-1!==i){var a=n.styles[e],s=[],u=new Map;a.forEach((function(e){"string"===typeof e.id&&u.set(e.id,s.length),s.push(e)})),t.styles[e].forEach((function(e){if("string"===typeof e.extends&&u.has(e.extends)){var t=u.get(e.extends),n=s[t];return s[t]=Object.assign(Object.assign({},n),e),void(s[t].extends=void 0)}if("string"===typeof e.id&&u.has(e.id)){var r=u.get(e.id);s[r]=e}else s.push(e)})),r[e]=s,o.splice(i,1)}else r[e]=n.styles[e]})),o.forEach((function(e){r[e]=t.styles[e]}))}else n.styles?r=Object.assign({},n.styles):t.styles&&(r=Object.assign({},t.styles));return Object.assign(Object.assign(Object.assign(Object.assign({},n),t),e.mergeImageTextures(t,n)),{definitions:i,styles:r})}},{key:"mergeImageTextures",value:function(e,t){var n=Object.assign(Object.assign({},t.images),e.images),r=[];return!t.imageTextures&&e.imageTextures?r=e.imageTextures:t.imageTextures&&!e.imageTextures?r=t.imageTextures:t.imageTextures&&e.imageTextures&&(r=e.imageTextures.slice(),t.imageTextures.forEach((function(e){r.find((function(t){return t.name===e.name}))||r.push(e)}))),{images:n,imageTextures:r}}},{key:"convertFlatTheme",value:function(e){if(Array.isArray(e.styles)){var t={};e.styles.forEach((function(e){if(l.isJsonExpr(e))throw new Error("invalid usage of theme reference");var n=e.styleSet;if(void 0===n)throw new Error("missing reference to style set");t[n]||(t[n]=[]),t[n].push(e)})),e.styles=t}return e}},{key:"resolveResources",value:function(e,t){if(e.sky&&"cubemap"===e.sky.type)for(var n=0;n<h.SKY_CUBEMAP_FACE_COUNT;++n){var r=e.sky[h.SkyCubemapFaceId[n]];void 0!==r&&(e.sky[h.SkyCubemapFaceId[n]]=t.resolveUri(r))}if(e.images)for(var a=0,o=Object.keys(e.images);a<o.length;a++){var s=o[a],u=e.images[s];u.url=t.resolveUri(u.url),void 0!==u.atlas&&(u.atlas=t.resolveUri(u.atlas))}if(e.fontCatalogs){var l,c=i(e.fontCatalogs);try{for(c.s();!(l=c.n()).done;){var d=l.value;d.url=t.resolveUri(d.url)}}catch(b){c.e(b)}finally{c.f()}}if(e.poiTables){var f,p=i(e.poiTables);try{for(p.s();!(f=p.n()).done;){var m=f.value;m.url=t.resolveUri(m.url)}}catch(b){p.e(b)}finally{p.f()}}if(void 0!==e.styles)for(var v in e.styles)if(e.styles.hasOwnProperty(v)){var g,y=e.styles[v],x=i(y);try{var _=function(){var e=g.value;if(!e.attr)return"continue";["map","normalMap","displacementMap","roughnessMap"].forEach((function(n){var r=e.attr[n];r&&"string"===typeof r&&(e.attr[n]=t.resolveUri(r))}))};for(x.s();!(g=x.n()).done;)_()}catch(b){x.e(b)}finally{x.f()}}}}]),e}();t.ThemeLoader=f},67247:function(e,t,n){"use strict";var r=n(43269).default,i=n(87757),a=n(48926).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Tile=t.getFeatureDataSize=void 0;var u=n(31201),l=n(15739),c=n(34585),d=n(46273),h=n(52719),f=n(26691),p=n(44097),m=n(91422),v=n(92301),g=n(18386),y=n(52734),x=n(30240),_=l.LoggerManager.instance.create("Tile");t.getFeatureDataSize=function(e){var t=100;return void 0!==e.starts&&(t+=8*e.starts.length),void 0!==e.objInfos&&(t+=16*e.objInfos.length),t};var b=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;o(this,e),this.dataSource=t,this.tileKey=n,this.objects=[],this.dependencies=[],this.frameNumLastRequested=-1,this.frameNumVisible=-1,this.frameNumLastVisible=-1,this.numFramesVisible=0,this.visibilityCounter=-1,this.levelOffset=0,this.skipRendering=!1,this.delayRendering=!1,this.m_boundingBox=new u.OrientedBox3,this.m_disposed=!1,this.m_forceHasGeometry=void 0,this.m_textElementGroups=new y.TextElementGroupPriorityList,this.m_pathBlockingElements=[],this.m_worldCenter=new c.Vector3,this.m_visibleArea=0,this.m_elevationRange={minElevation:0,maxElevation:0},this.m_ownedTextures=new WeakSet,this.geoBox=this.dataSource.getTilingScheme().getGeoBox(this.tileKey),this.updateBoundingBox(),this.m_worldCenter.copy(this.boundingBox.position),this.m_localTangentSpace=null!==i&&void 0!==i&&i,this.m_textStyleCache=new x.TileTextStyleCache(this),this.m_offset=r,this.m_uniqueKey=u.TileKeyUtils.getKeyForTileKeyAndOffset(this.tileKey,this.offset),t.useGeometryLoader&&(this.m_tileGeometryLoader=new f.TileGeometryLoader(this,this.mapView.taskQueue),this.attachGeometryLoadedCallback())}return s(e,[{key:"isVisible",get:function(){try{return this.frameNumLastRequested>=this.dataSource.mapView.frameNumber-1}catch(e){return _.debug(e),!1}},set:function(e){this.frameNumLastRequested=e?this.dataSource.mapView.frameNumber:-1,e||!this.m_tileGeometryLoader||this.m_tileGeometryLoader.isSettled||this.m_tileGeometryLoader.cancel()}},{key:"projection",get:function(){return this.dataSource.projection}},{key:"mapView",get:function(){return this.dataSource.mapView}},{key:"localTangentSpace",get:function(){return this.m_localTangentSpace}},{key:"memoryUsage",get:function(){return void 0===this.m_resourceInfo&&this.computeResourceInfo(),this.m_resourceInfo.heapSize}},{key:"center",get:function(){return this.m_worldCenter}},{key:"uniqueKey",get:function(){return this.m_uniqueKey}},{key:"offset",get:function(){return this.m_offset},set:function(e){this.m_offset!==e&&(this.m_uniqueKey=u.TileKeyUtils.getKeyForTileKeyAndOffset(this.tileKey,e)),this.m_offset=e}},{key:"getResourceInfo",value:function(){return void 0===this.m_resourceInfo&&this.computeResourceInfo(),this.m_resourceInfo}},{key:"invalidateResourceInfo",value:function(){this.m_resourceInfo=void 0}},{key:"addOwnedTexture",value:function(e){this.m_ownedTextures.add(e)}},{key:"userTextElements",get:function(){var e=this.m_textElementGroups.groups.get(v.TextElement.HIGHEST_PRIORITY);return void 0===e&&(e=new g.TextElementGroup(v.TextElement.HIGHEST_PRIORITY),this.m_textElementGroups.groups.set(e.priority,e)),e}},{key:"addUserTextElement",value:function(e){e.priority=v.TextElement.HIGHEST_PRIORITY,this.addTextElement(e)}},{key:"removeUserTextElement",value:function(e){return e.priority=v.TextElement.HIGHEST_PRIORITY,this.removeTextElement(e)}},{key:"addTextElement",value:function(e){this.textElementGroups.add(e),!1===this.m_textElementsChanged&&(this.m_textElementGroups=this.textElementGroups.clone()),this.textElementsChanged=!0}},{key:"addBlockingElement",value:function(e){this.m_pathBlockingElements.push(e)}},{key:"removeTextElement",value:function(e){var t=this.textElementGroups;return!!t.remove(e)&&(!1===this.m_textElementsChanged&&(this.m_textElementGroups=t.clone()),this.textElementsChanged=!0,!0)}},{key:"textElementGroups",get:function(){return this.m_textElementGroups}},{key:"textElementsChanged",get:function(){var e;return null!==(e=this.m_textElementsChanged)&&void 0!==e&&e},set:function(e){this.m_textElementsChanged=e}},{key:"hasTextElements",value:function(){return this.m_textElementGroups.count()>0}},{key:"blockingElements",get:function(){return this.m_pathBlockingElements}},{key:"willRender",value:function(e){return!this.skipRendering&&!this.delayRendering}},{key:"didRender",value:function(){}},{key:"visibleArea",get:function(){return this.m_visibleArea},set:function(e){this.m_visibleArea=e,void 0!==this.tileLoader&&(this.tileLoader.priority=e)}},{key:"elevationRange",get:function(){return this.m_elevationRange},set:function(e){var t;e.minElevation===this.m_elevationRange.minElevation&&e.maxElevation===this.m_elevationRange.maxElevation&&e.calculationStatus===this.m_elevationRange.calculationStatus||(this.m_elevationRange.minElevation=e.minElevation,this.m_elevationRange.maxElevation=e.maxElevation,this.m_elevationRange.calculationStatus=e.calculationStatus,this.elevateGeoBox(),void 0===this.m_maxGeometryHeight&&void 0===this.m_minGeometryHeight||(l.assert(void 0===(null===(t=this.decodedTile)||void 0===t?void 0:t.boundingBox)),this.updateBoundingBox()))}},{key:"decodedTile",get:function(){return this.m_decodedTile},set:function(e){var t,n;if(this.m_decodedTile=e,this.invalidateResourceInfo(),void 0!==e){0===e.geometries.length&&this.forceHasGeometry(!0),this.m_maxGeometryHeight=e.boundingBox?void 0:null!==(t=e.maxGeometryHeight)&&void 0!==t?t:0,this.m_minGeometryHeight=e.boundingBox?void 0:null!==(n=e.minGeometryHeight)&&void 0!==n?n:0,this.elevateGeoBox(),this.updateBoundingBox(e.boundingBox);var r=m.PerformanceStatistics.instance;r.enabled&&void 0!==e.decodeTime&&(r.currentFrame.addValue("decode.decodingTime",e.decodeTime),r.currentFrame.addValue("decode.decodedTiles",1)),void 0!==e.copyrightHolderIds&&(this.copyrightInfo=e.copyrightHolderIds.map((function(e){return{id:e}}))),this.dataSource.requestUpdate()}}},{key:"shouldDisposeObjectGeometry",value:function(e){return!0}},{key:"shouldDisposeObjectMaterial",value:function(e){return!0}},{key:"shouldDisposeTexture",value:function(e){return this.m_ownedTextures.has(e)}},{key:"disposed",get:function(){return this.m_disposed}},{key:"allGeometryLoaded",get:function(){var e,t;return null!==(t=null===(e=this.m_tileGeometryLoader)||void 0===e?void 0:e.isFinished)&&void 0!==t?t:this.hasGeometry}},{key:"hasGeometry",get:function(){return void 0===this.m_forceHasGeometry?0!==this.objects.length:this.m_forceHasGeometry}},{key:"forceHasGeometry",value:function(e){this.m_forceHasGeometry=e}},{key:"resetVisibilityCounter",value:function(){this.visibilityCounter=-1}},{key:"tileLoader",get:function(){return this.m_tileLoader},set:function(e){this.m_tileLoader=e}},{key:"load",value:function(){var e=a(i.mark((function e(){var t,n,r=this;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.tileLoader)){e.next=5;break}return e.next=4,Promise.resolve();case 4:case 8:return e.abrupt("return",e.sent);case 5:return this.m_tileGeometryLoader&&(n=this.m_tileGeometryLoader.isSettled,this.m_tileGeometryLoader.reset(),n&&this.attachGeometryLoadedCallback()),e.next=8,t.loadAndDecode().then((function(e){var n;l.assert(e===p.TileLoaderState.Ready);var i=t.decodedTile;r.decodedTile=i,null===(n=null===i||void 0===i?void 0:i.dependencies)||void 0===n||n.forEach((function(e){r.dependencies.push(u.TileKey.fromMortonCode(e))}))})).catch((function(e){e===p.TileLoaderState.Failed?r.dispose():e!==p.TileLoaderState.Canceled&&_.error("Unknown error"+e)}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"textStyleCache",get:function(){return this.m_textStyleCache}},{key:"clear",value:function(){var e=this,t=function(t){Object.getOwnPropertyNames(t).forEach((function(n){var r=t[n];if(void 0!==r&&r instanceof c.Texture){var i=r;e.shouldDisposeTexture(i)&&i.dispose()}})),t.dispose()},n=function(n){if(e.shouldDisposeObjectGeometry(n)&&(void 0!==n.geometry&&n.geometry.dispose(),void 0!==n.geometries)){var i,a=r(n.geometries);try{for(a.s();!(i=a.n()).done;){i.value.dispose()}}catch(o){a.e(o)}finally{a.f()}}void 0!==n.material&&e.shouldDisposeObjectMaterial(n)&&(n.material instanceof Array?n.material.forEach((function(e){void 0!==e&&t(e)})):t(n.material))};this.objects.forEach((function(e){e.traverse((function(e){n(e)})),n(e)})),this.objects.length=0,this.preparedTextPaths&&(this.preparedTextPaths=[]),this.m_textStyleCache.clear(),this.clearTextElements(),this.invalidateResourceInfo()}},{key:"clearTextElements",value:function(){this.hasTextElements()&&(this.textElementsChanged=!0,this.m_pathBlockingElements.splice(0),this.textElementGroups.forEach((function(e){e.dispose()})),this.textElementGroups.clear())}},{key:"addDisposeCallback",value:function(e){this.m_disposeCallback=l.chainCallbacks(this.m_disposeCallback,e)}},{key:"dispose",value:function(){var e;this.m_disposed||(this.m_tileLoader&&(this.m_tileLoader.cancel(),this.m_tileLoader=void 0),this.clear(),this.frameNumLastRequested=0,this.m_disposed=!0,null===(e=this.m_tileGeometryLoader)||void 0===e||e.dispose(),this.m_disposeCallback&&this.m_disposeCallback(this))}},{key:"computeWorldOffsetX",value:function(){return this.projection.worldExtent(0,0).max.x*this.offset}},{key:"update",value:function(e){var t,n=r(this.objects);try{for(n.s();!(t=n.n()).done;){var i=t.value;i instanceof d.LodMesh&&i.setLevelOfDetail(e-this.tileKey.level)}}catch(a){n.e(a)}finally{n.f()}}},{key:"boundingBox",get:function(){return this.m_boundingBox}},{key:"updateGeometry",value:function(e,t,n){if(!this.m_tileGeometryLoader)return!1;if(this.m_tileGeometryLoader.isSettled)return!0;if(this.dataSource.isDetached())return this.m_tileGeometryLoader.cancel(),!0;if(this.tileLoader){if(!this.tileLoader.isFinished)return!0;if(!this.decodedTile)return this.m_tileGeometryLoader.finish(),!0}return void 0!==e&&(this.m_tileGeometryLoader.priority=e),this.m_tileGeometryLoader.update(t,n),!0}},{key:"loadedGeometryKinds",get:function(){var e;return null===(e=this.m_tileGeometryLoader)||void 0===e?void 0:e.availableGeometryKinds}},{key:"loadingFinished",value:function(){}},{key:"attachGeometryLoadedCallback",value:function(){var e=this;l.assert(void 0!==this.m_tileGeometryLoader),this.m_tileGeometryLoader.waitFinished().then((function(){e.loadingFinished(),e.removeDecodedTile()})).catch((function(){e.disposed||e.dataSource.isDetached()||e.mapView.visibleTileSet.disposeTile(e)}))}},{key:"removeDecodedTile",value:function(){this.m_decodedTile=void 0,this.invalidateResourceInfo()}},{key:"updateBoundingBox",value:function(e){e?(this.m_boundingBox.copy(e),this.m_worldCenter.copy(this.boundingBox.position)):this.projection.projectBox(this.geoBox,this.boundingBox)}},{key:"elevateGeoBox",value:function(){var e,t;this.geoBox.southWest.altitude=this.m_elevationRange.minElevation+(null!==(e=this.m_minGeometryHeight)&&void 0!==e?e:0),this.geoBox.northEast.altitude=this.m_elevationRange.maxElevation+(null!==(t=this.m_maxGeometryHeight)&&void 0!==t?t:0)}},{key:"computeResourceInfo",value:function(){var e,t=0,n=0,i=0,a={heapSize:0,gpuSize:0},o=new Map,s=r(this.objects);try{for(s.s();!(e=s.n()).done;){var u=e.value;u.visible&&n++,h.Object3DUtils.estimateSize(u,a,o)}}catch(d){s.e(d)}finally{s.f()}var l,c=r(this.textElementGroups.groups);try{for(c.s();!(l=c.n()).done;){i+=l.value[1].elements.length}}catch(d){c.e(d)}finally{c.f()}t+=312*i,void 0!==this.m_decodedTile&&void 0!==this.m_decodedTile.tileInfo&&(a.heapSize+=this.m_decodedTile.tileInfo.numBytes),this.m_resourceInfo={heapSize:a.heapSize+t,gpuSize:a.gpuSize,num3dObjects:n,numTextElements:i,numUserTextElements:0}}}]),e}();t.Tile=b},63402:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileObjectRenderer=void 0;var o=n(26309),s=n(49417),u=n(58598),l=n(87213),c=function(){function e(t,n){i(this,e),this.m_env=t,this.m_renderer=n,this.m_renderOrderStencilValues=new Map,this.m_stencilValue=1}return a(e,[{key:"render",value:function(e,t,n,i,a){var o=e.computeWorldOffsetX();if(e.willRender(t)){var s,u=r(e.objects);try{for(u.s();!(s=u.n()).done;){var c=s.value,d=l.MapObjectAdapter.get(c);this.processTileObject(e,t,n,c,d)&&(this.updateStencilRef(c),c.position.copy(e.center),void 0!==c.displacement&&c.position.add(c.displacement),c.position.x+=o,c.position.sub(i),e.localTangentSpace&&c.setRotationFromMatrix(e.boundingBox.getRotationMatrix()),c.frustumCulled=!1,a.add(c))}}catch(h){u.e(h)}finally{u.f()}e.didRender()}}},{key:"prepareRender",value:function(){this.m_stencilValue=1,this.m_renderOrderStencilValues.clear()}},{key:"setupRenderer",value:function(){var e=function(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.object.userData.tileKey&&t.object.userData.tileKey&&e.object.userData.tileKey.mortonCode()!==t.object.userData.tileKey.mortonCode()?e.object.userData.tileKey.mortonCode()-t.object.userData.tileKey.mortonCode():e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id};this.m_renderer.setOpaqueSort((function(t,n){var r,i,a,o,u=l.MapObjectAdapter.get(t.object),c=l.MapObjectAdapter.get(n.object),d=null===(r=null===u||void 0===u?void 0:u.dataSource)||void 0===r?void 0:r.dataSourceOrder,h=null===(i=null===c||void 0===c?void 0:c.dataSource)||void 0===i?void 0:i.dataSourceOrder;if(void 0!==d&&void 0!==h&&d!==h)return d-h;if(t.renderOrder===s.BackgroundDataSource.GROUND_RENDER_ORDER||n.renderOrder===s.BackgroundDataSource.GROUND_RENDER_ORDER)return e(t,n);if(void 0!==(null===u||void 0===u?void 0:u.level)&&void 0!==(null===c||void 0===c?void 0:c.level)){var f=void 0!==(null===(a=u.kind)||void 0===a?void 0:a.find((function(e){return"building"===e})))||void 0!==(null===(o=c.kind)||void 0===o?void 0:o.find((function(e){return"building"===e})));return u.level===c.level||f?e(t,n):u.level-c.level}return e(t,n)}))}},{key:"updateStencilRef",value:function(e){var t=this;if(void 0!==e.renderOrder&&e instanceof u.SolidLineMesh){var n=e.material;Array.isArray(n)?n.forEach((function(n){return n.stencilRef=t.getStencilValue(e.renderOrder)})):n.stencilRef=this.getStencilValue(e.renderOrder)}}},{key:"allocateStencilValue",value:function(e){var t=this.m_stencilValue++;return this.m_renderOrderStencilValues.set(e,t),t}},{key:"getStencilValue",value:function(e){var t;return null!==(t=this.m_renderOrderStencilValues.get(e))&&void 0!==t?t:this.allocateStencilValue(e)}},{key:"processTileObject",value:function(e,t,n,r,i){return!!r.visible&&(!!this.processTileObjectFeatures(e,t,n,r)&&!(i&&(i.ensureUpdated(e.mapView),!i.isVisible()&&i.pickability!==o.Pickability.all)))}},{key:"processTileObjectFeatures",value:function(e,t,n,r){var i,a,s=this,u=r.userData.technique,l=o.getPropertyValue(null===u||void 0===u?void 0:u.minZoomLevel,this.m_env),c=o.getPropertyValue(null===u||void 0===u?void 0:u.maxZoomLevel,this.m_env);if("number"===typeof l&&n<l)return!1;if("number"===typeof c&&n>=c)return!1;if(void 0===(null===u||void 0===u?void 0:u.enabled))return!0;var d=r.userData.feature;if(!d||!o.Expr.isExpr(u.enabled))return Boolean(o.getPropertyValue(u.enabled,this.m_env));var h=d.starts,f=d.objInfos;if(!Array.isArray(f)||!Array.isArray(h))return!0;var p=r.geometry;if(!p||!p.isBufferGeometry)return!0;var m,v=null!==(a=null===(i=p.getIndex())||void 0===i?void 0:i.count)&&void 0!==a?a:p.attributes.position.count;return p.clearGroups(),f.forEach((function(t,n){var r,i,a=o.getFeatureId(t),l=!0;if(o.Expr.isExpr(u.enabled)){var c=e.dataSource.getFeatureState(a),d=c?new o.MapEnv(c):null,f="object"===typeof t?new o.MapEnv(t,s.m_env):s.m_env,g=new o.MapEnv({$state:d},f);l=Boolean(o.getPropertyValue(u.enabled,g))}if(l){var y=null!==(r=h[n])&&void 0!==r?r:0,x=(null!==(i=h[n+1])&&void 0!==i?i:v)-y;y===m?p.groups[p.groups.length-1].count+=x:p.addGroup(y,x),m=y+x}})),p.groups.length>0}}]),e}();t.TileObjectRenderer=c},61563:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileOffsetUtils=t.MapViewUtils=void 0;var i=n(31201),a=n(19573),o=n(15739),s=n(34585),u=n(64172),l=n(52719),c=o.LoggerManager.instance.create("MapViewUtils"),d=new s.Vector3(0,0,1),h=new s.Plane(d.clone()),f=new s.Sphere(void 0,a.EarthConstants.EQUATORIAL_RADIUS),p=new s.Raycaster,m={x:new s.Vector3,y:new s.Vector3,z:new s.Vector3},v={x:new s.Vector3,y:new s.Vector3,z:new s.Vector3},g={box3:[new s.Box3],obox3:[new i.OrientedBox3],quaternions:[new s.Quaternion,new s.Quaternion],vector2:[new s.Vector2,new s.Vector2],vector3:[new s.Vector3,new s.Vector3,new s.Vector3,new s.Vector3],matrix4:[new s.Matrix4,new s.Matrix4],transforms:[{xAxis:new s.Vector3,yAxis:new s.Vector3,zAxis:new s.Vector3,position:new s.Vector3}]},y=new s.PerspectiveCamera;!function(e){function t(t,n,r,a,o,l){var d,h,f,p=u.CameraUtils.getPrincipalPoint(t.camera,g.vector2[0]),m=e.rayCastWorldCoordinates(t,p.x,p.y);if(null!==m){var v;if("number"===typeof n)v=g.vector2[1].set(n,r);else{var y=n;v=null!==(d=y.center)&&void 0!==d?d:p,a=null!==(h=y.deltaAzimuth)&&void 0!==h?h:0,o=null!==(f=y.deltaTilt)&&void 0!==f?f:0,l=y.maxTiltAngle}var x=v.x===p.x&&v.y===p.y?m:e.rayCastWorldCoordinates(t,v.x,v.y);if(null!==x){!function(e,t,n){var r=e.camera,i=e.projection.surfaceNormal(t,g.vector3[0]),a=g.quaternions[0].setFromAxisAngle(i,n);r.quaternion.premultiply(a),r.position.sub(t),r.position.applyQuaternion(a),r.position.add(t)}(t,x,-a);var _=new s.Vector3(1,0,0).applyQuaternion(t.camera.quaternion),b=function(e,t,n,r,a,o,u){var l=e.camera,c=e.projection,d=C(c,l,a,u);if(d+n<0)return-d;if(n<=0)return n;if(a.equals(o)||t<0)return i.MathUtils.clamp(n+d,0,r)-d;var h=C(c,l,o,u),f=s.MathUtils.degToRad(89);if(h>f)return 0;var p=0;if(c===i.sphereProjection){var m=c.surfaceNormal(o,g.vector3[0]).projectOnPlane(u).normalize(),v=c.surfaceNormal(a,g.vector3[1]);p=m.angleTo(v)}var y=s.MathUtils.degToRad(90),x=y+p-(2*y-(2*y-(y+p-h+(y+d)))-y-r);return i.MathUtils.clamp(n+h,0,Math.min(x,f))-h}(t,v.y-p.y,o,l,m,x,_);!function(t,n,r,i){var a=t.camera,o=a.position.clone(),s=a.quaternion.clone(),u=g.quaternions[0].setFromAxisAngle(i,r);a.quaternion.premultiply(u),a.position.sub(n),a.position.applyQuaternion(u),a.position.add(n),null===e.rayCastWorldCoordinates(t,0,0)&&(c.warn("Target got invalidated during rotation."),a.position.copy(o),a.quaternion.copy(s))}(t,x,b,_)}}}function n(e,t,n){var r=g.vector3[0].copy(e.position),o=e.getWorldDirection(g.vector3[1]);p.set(r,o),void 0!==n&&(h.constant-=n,f.radius+=n);var u=new s.Vector3,l=t.type===i.ProjectionType.Planar?p.ray.intersectPlane(h,u):p.ray.intersectSphere(f,u);return void 0!==n&&(h.constant=0,f.radius=a.EarthConstants.EQUATORIAL_RADIUS),l}function d(t,n,r){var a={target:t,distance:n},o=r.worldMaxBounds,l=r.camera,c=r.projection;if(!o)return a;var d=o.getSize(g.vector3[1]),h=r.renderer.getSize(g.vector2[0]),f=u.CameraUtils.convertScreenToWorldSize(r.focalLength,a.distance,h.height),p=f*l.aspect,m=Math.max(p/d.x,f/d.y),v=new s.Vector3(p/2,f/2,0),y={target:a.target.clone(),distance:a.distance};if(c.type===i.ProjectionType.Planar){if(m>1)y.distance/=m,l.getWorldDirection(l.position).multiplyScalar(-y.distance).add(o.getCenter(y.target));else{if(g.box3[0].copy(o).expandByVector(v.multiplyScalar(-1)).clampPoint(a.target,y.target).setZ(a.target.z),y.target.equals(a.target))return a;l.position.x+=y.target.x-a.target.x,l.position.y+=y.target.y-a.target.y}return y}if(m>1)o.getCenter(y.target),y.target.setLength(a.target.length()),y.distance/=m;else{var x=g.obox3[0];x.copy(o),x.position.setLength(a.target.length()),x.extents.sub(v);var _=x.getRotationMatrix(g.matrix4[0]),b=g.vector3[1].copy(y.target).sub(x.position).applyMatrix4(g.matrix4[1].copy(_).transpose()).setZ(0),w=g.vector3[2].copy(b).clamp(g.vector3[3].copy(x.extents).multiplyScalar(-1),x.extents);if(w.equals(b))return a;y.target.copy(w).applyMatrix4(_).add(x.position);var S=x.position.lengthSq(),M=y.target.distanceToSquared(x.position),E=Math.sqrt(S)-Math.sqrt(S-M);y.target.addScaledVector(x.zAxis,-E),y.target.setLength(a.target.length())}return e.panCameraAroundGlobe(r,g.vector3[1].copy(y.target),g.vector3[2].copy(a.target)),l.getWorldDirection(l.position).multiplyScalar(-y.distance).add(y.target),y}function x(e,t,n,r,o){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new s.Vector3,l=s.MathUtils.degToRad(r),c=Math.cos(l)*t,d=s.MathUtils.degToRad(n);o.projectPoint(e,u);var h=t*Math.sin(l);if(o.type===i.ProjectionType.Planar)u.x=u.x+Math.sin(d)*h,u.y=u.y-Math.cos(d)*h,u.z=u.z+c;else if(o.type===i.ProjectionType.Spherical){v.z.copy(u).normalize(),v.y.set(0,0,1).projectOnPlane(v.z).normalize(),g.quaternions[0].setFromAxisAngle(v.z,d-Math.PI),v.y.applyQuaternion(g.quaternions[0]),v.y.setLength(h);var f=t*Math.cos(l);u.add(v.y).add(v.z.setLength(f));var p=a.EarthConstants.EQUATORIAL_RADIUS+c,m=Math.sin(l)*t,y=Math.sqrt(p*p+m*m);u.setLength(y)}return u}function _(e,t){var n,i=t.clone().normalize(),a=r(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.angleTo(t)>Math.PI/2){var s=o.length();o.projectOnPlane(i).setLength(s)}}}catch(u){a.e(u)}finally{a.f()}}function b(e,t,n){var i,a=g.vector3[0].copy(t).sub(n.position).length(),o=u.CameraUtils.getPrincipalPoint(n),s=a,l=function(e,t){return Math.abs(e)>1?Math.abs((e-t)/(.99*Math.sign(e)-t)):1},c=r(e);try{for(c.s();!(i=c.n()).done;){var d=i.value,h=-g.vector3[0].copy(d).applyMatrix4(n.matrixWorldInverse).z,f=g.vector3[0].applyMatrix4(n.projectionMatrix),p=Math.max(l(f.x,o.x),l(f.y,o.y));if(p>1){var m=a-h,v=Math.abs(h)*p+m;s=Math.max(s,v)}}}catch(y){c.e(y)}finally{c.f()}return s}function w(e,t,n,r){var o=g.vector3[0].set(t,n,0);e.camera.updateMatrixWorld();var u=g.vector3[1].copy(e.camera.position);g.matrix4[0].extractRotation(e.camera.matrixWorld),g.matrix4[1].multiplyMatrices(g.matrix4[0],g.matrix4[1].copy(e.camera.projectionMatrix).invert());var l=o.applyMatrix4(g.matrix4[1]);p.set(u,l.normalize()),void 0!==r&&(h.constant-=r,f.radius+=r);var c=new s.Vector3,d=e.projection.type===i.ProjectionType.Planar?p.ray.intersectPlane(h,c):p.ray.intersectSphere(f,c);return void 0!==r&&(h.constant=0,f.radius=a.EarthConstants.EQUATORIAL_RADIUS),d}function S(e,t,n){e.camera.position.x+=t,e.camera.position.y+=n}function M(e,t,n){g.quaternions[0].setFromUnitVectors(t.normalize(),n.normalize()).invert(),g.matrix4[0].makeRotationFromQuaternion(g.quaternions[0]),e.camera.applyMatrix4(g.matrix4[0]),e.camera.updateMatrixWorld()}function E(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new s.Quaternion,a=g.transforms[0];return e.localTangentSpace(t,a),g.matrix4[0].makeBasis(a.xAxis,a.yAxis,a.zAxis),i.setFromRotationMatrix(g.matrix4[0]),g.quaternions[0].setFromAxisAngle(g.vector3[1].set(0,0,1),s.MathUtils.degToRad(n)),g.quaternions[1].setFromAxisAngle(g.vector3[1].set(1,0,0),s.MathUtils.degToRad(r)),i.multiply(g.quaternions[0]),i.multiply(g.quaternions[1]),i}function T(t,n){if(n.type===i.ProjectionType.Planar){var r=t.getWorldDirection(g.vector3[0]).normalize(),a=n.surfaceNormal(t.position,g.vector3[1]).negate(),u=r.dot(a);return Math.acos(s.MathUtils.clamp(u,-1,1))}o.assert(n.type===i.ProjectionType.Spherical);var l=e.getGeoTargetFromCamera(t,n);return null!==l?e.extractTiltAngleFromLocation(n,t,l):(c.warn("MapView camera is pointing in the void, using maxTilt: ",e.MAX_TILT_RAD),e.MAX_TILT_RAD)}function k(e,t){g.vector3[1].setFromMatrixPosition(t.matrixWorld),e.projection.localTangentSpace(g.vector3[1],{xAxis:v.x,yAxis:v.y,zAxis:v.z,position:g.vector3[0]}),g.matrix4[1].makeBasis(v.x,v.y,v.z),g.matrix4[0].copy(g.matrix4[1]).invert().multiply(t.matrixWorld),m.x.setFromMatrixColumn(g.matrix4[0],0),m.y.setFromMatrixColumn(g.matrix4[0],1),m.z.setFromMatrixColumn(g.matrix4[0],2);var n=0,r=0,i=0,a=m.z.dot(g.vector3[1].set(0,0,1));return a<1-Number.EPSILON?a>-1+Number.EPSILON?(n=Math.atan2(m.z.x,-m.z.y),r=Math.acos(m.z.z),i=Math.atan2(m.x.z,m.y.z)):(n=-Math.atan2(-m.y.x,m.x.x),r=180,i=0):(n=Math.atan2(-m.y.x,m.x.x),r=0,i=0),{yaw:n,pitch:r,roll:i}}function C(e,t,n,r){e.localTangentSpace(n,{xAxis:v.x,yAxis:v.y,zAxis:v.z,position:g.vector3[0]});var i=g.vector3[2].copy(t.position).sub(g.vector3[0]);r&&(i.projectOnPlane(r),v.z.projectOnPlane(r).normalize());var a=i.length();if(a<1e-5)return c.error("Can not calculate tilt for the zero length vector!"),0;i.divideScalar(a);var o=i.dot(v.z);return o>=1-Number.EPSILON?0:Math.acos(s.MathUtils.clamp(o,-1,1))}function A(e,t){var n=a.EarthConstants.EQUATORIAL_CIRCUMFERENCE/Math.pow(2,t);return e.focalLength*n/256}e.MAX_TILT_DEG=89,e.MAX_TILT_RAD=e.MAX_TILT_DEG*s.MathUtils.DEG2RAD,e.zoomOnTargetPosition=function(n,r,a,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.MAX_TILT_RAD,u=n.elevationProvider,l=n.camera,c=n.projection,h=u?u.getHeight(c.unprojectPoint(l.position),4):void 0,f=w(n,r,a,h),p=e.getTargetAndDistance(c,l,u).target,m=A(n,o);if(n.geoMaxBounds){var v=d(p,m,n);if(v.distance!==m)return o>=n.zoomLevel}if(l.getWorldDirection(l.position).multiplyScalar(-m).add(p),c.type===i.ProjectionType.Spherical){var g=T(l,c),y=g-s;y>0&&t(n,{deltaTilt:y,maxTiltAngle:s})}var x=w(n,r,a,h);return!f||!x||(c.type===i.ProjectionType.Planar?(f.sub(x),S(n,f.x,f.y)):c.type===i.ProjectionType.Spherical&&M(n,f,x),!0)},e.orbitAroundScreenPoint=t,e.getGeoTargetFromCamera=function(e,t,r){var i=n(e,t,r);return null!==i?t.unprojectPoint(i):null},e.getWorldTargetFromCamera=n,e.constrainTargetAndDistanceToViewBounds=d,e.getTargetAndDistance=function(t,r,o){var s=k({projection:t},r).pitch,u=o?o.getHeight(t.unprojectPoint(r.position),4):void 0,l=!o||void 0!==u,c=s<e.MAX_TILT_RAD?n(r,t,u):null;if(null!==c)return{target:c,distance:r.position.distanceTo(c),final:l};var d=t.groundDistance(r.position),h=Math.max(d-(null!==u&&void 0!==u?u:0),0),f=t.type===i.ProjectionType.Planar?h/Math.cos(Math.min(s,e.MAX_TILT_RAD)):Math.sqrt(Math.pow(h+a.EarthConstants.EQUATORIAL_RADIUS,2)-Math.pow(a.EarthConstants.EQUATORIAL_RADIUS,2)),p=r.getWorldDirection(g.vector3[0]);p.multiplyScalar(f);var m=g.vector3[1];return m.copy(r.position).add(p),{target:m,distance:f,final:l}},e.getCameraPositionFromTargetCoordinates=x,e.wrapGeoPointsToScreen=function(e,t){var n=0;void 0===t&&(t=i.GeoCoordinates.fromObject(e[0]),n=1);var r=t.latitude,a=t.latitude,o=i.MathUtils.normalizeLongitudeDeg(t.longitude),s=0,u=t.longitude,l=t.longitude,c=[];c.push(new i.GeoCoordinates(r,o));for(var d=n;d<e.length;d++){var h=i.GeoCoordinates.fromObject(e[d]);h.latitude>r?r=h.latitude:h.latitude<a&&(a=h.latitude);var f=i.MathUtils.normalizeLongitudeDeg(h.longitude),p=i.MathUtils.angleDistanceDeg(o,f);f=o-p,p<0&&-p>s/2?(s=(u=Math.max(u,o-p))-l,o=(u+l)/2):p>0&&p>s/2&&(s=u-(l=Math.min(l,f)),o=(u+l)/2),c.push(new i.GeoCoordinates(h.latitude,f))}return c},e.wrapWorldPointsToView=_,e.geoBoxToGeoPoints=function(e){var t=e.center;return[new i.GeoCoordinates(e.north,e.west),new i.GeoCoordinates(e.north,e.east),new i.GeoCoordinates(t.latitude,e.west),new i.GeoCoordinates(t.latitude,e.east),new i.GeoCoordinates(e.south,e.west),new i.GeoCoordinates(e.south,e.east),new i.GeoCoordinates(e.north,t.longitude),new i.GeoCoordinates(e.south,t.longitude)]},e.getFitBoundsDistance=b,e.getFitBoundsLookAtParams=function(e,t,n,r){var a=r.tilt,o=r.heading,s=r.projection,u=r.minDistance,l=r.camera.clone();return E(s,e,-o,a,l.quaternion),x(e,u,-o,a,s,l.position),l.updateMatrixWorld(!0),s.type===i.ProjectionType.Spherical&&_(n,l.position),{target:e,distance:b(n,t,l),heading:o,tilt:a}},e.getCameraCoordinatesFromTargetCoordinates=function(e,t,n,r,i){return i.projection.unprojectPoint(x(e,t,n,r,i.projection,g.vector3[1]))},e.rayCastWorldCoordinates=w,e.panCameraAboveFlatMap=S,e.panCameraAroundGlobe=M,e.rotate=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/4;if(t.camera.rotateOnWorldAxis(t.projection.type===i.ProjectionType.Spherical?g.vector3[0].copy(t.camera.position).normalize():g.vector3[0].set(0,0,1),s.MathUtils.degToRad(-n)),t.camera.updateMatrixWorld(),0!==r){var u=e.extractAttitude(t,t.camera).pitch,l=s.MathUtils.clamp(u+s.MathUtils.degToRad(r),0,o);if(t.projection.type===i.ProjectionType.Spherical){var c=Math.asin(a.EarthConstants.EQUATORIAL_RADIUS*Math.sin(Math.PI-o)/t.camera.position.length());l=Math.min(l,c)}t.camera.rotateX(l-u)}},e.getCameraRotationAtTarget=E,e.setRotation=function(e,t,n){E(e.projection,e.geoCenter,t,n,e.camera.quaternion)},e.extractCameraTilt=T,e.extractAttitude=k,e.extractSphericalCoordinatesFromLocation=function(e,t,n){e.projection.localTangentSpace(n,{xAxis:v.x,yAxis:v.y,zAxis:v.z,position:g.vector3[0]});var r=0,i=0;return g.vector3[1].copy(t.position).sub(g.vector3[0]).normalize(),g.vector3[1].dot(v.z)>1-Number.EPSILON?(i=Math.PI-k(e,t).yaw,{tilt:r=0,azimuth:i=Math.atan2(Math.sin(i),Math.cos(i))}):(r=g.vector3[1].angleTo(v.z),g.vector3[1].copy(t.position).sub(g.vector3[0]).projectOnPlane(v.z).normalize(),i=g.vector3[1].angleTo(v.y),g.vector3[1].cross(v.y).dot(v.z)<0&&(i=-i),{tilt:r,azimuth:i})},e.extractTiltAngleFromLocation=C,e.getCameraFrustumPlanes=function(e){var t=e.near,n=e.far,r=t*Math.tan(s.MathUtils.degToRad(.5*e.fov))/e.zoom,i=2*r,a=e.aspect*i,o=-.5*a,u=e.view;if(null!==u&&u.enabled){var l=u.fullWidth,c=u.fullHeight;o+=u.offsetX*a/l,r-=u.offsetY*i/c,a*=u.width/l,i*=u.height/c}return{left:o+=0!==e.filmOffset?t*e.filmOffset/e.getFilmWidth():0,right:o+a,top:r,bottom:r-i,near:t,far:n}},e.rayCastGeoCoordinates=function(e,t,n){var r=w(e,t,n);return r?e.projection.unprojectPoint(r):null},e.calculateDistanceToGroundFromZoomLevel=function(e,t){var n=k(e,e.camera).pitch,r=a.EarthConstants.EQUATORIAL_CIRCUMFERENCE/Math.pow(2,t);return e.focalLength*r/256*Math.cos(n)},e.calculateDistanceFromZoomLevel=A,e.calculateZoomLevelFromDistance=function(e,t){var n=256*t/e.focalLength;return function(e){var t=Math.ceil(e);return t-e<1e-6?t:e}(s.MathUtils.clamp(Math.log2(a.EarthConstants.EQUATORIAL_CIRCUMFERENCE/n),e.minZoomLevel,e.maxZoomLevel))},e.calculateDepthFromClipDistance=function(e,t){var n=t,r=n.far-n.near,i=e*n.far;return(1-n.near/i)*(n.far/r)},e.cameraToWorldDistance=function(e,t){return e*t.far},e.calculateVerticalFovByHorizontalFov=function(e,t){return 2*Math.atan(Math.tan(e/2)/t)},e.calculateHorizontalFovByVerticalFov=function(e,t){return y.fov=s.MathUtils.radToDeg(e),y.aspect=t,u.CameraUtils.getHorizontalFov(y)},e.calculateFocalLengthByVerticalFov=function(e,t){return u.CameraUtils.setPrincipalPoint(y,new s.Vector2),u.CameraUtils.setVerticalFov(y,e,t),u.CameraUtils.getFocalLength(y)},e.calculateFovByFocalLength=function(e,t){return u.CameraUtils.setPrincipalPoint(y,new s.Vector2),u.CameraUtils.setFocalLength(y,e,t),y.fov},e.calculateScreenSizeByFocalLength=u.CameraUtils.convertWorldToScreenSize,e.calculateWorldSizeByFocalLength=u.CameraUtils.convertScreenToWorldSize,e.estimateObject3dSize=l.Object3DUtils.estimateSize,e.mapViewIsLoading=function(e){var t,n=0,i=r(e.visibleTileSet.dataSourceTileList);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=a.numTilesLoading;var o,s=r(a.visibleTiles);try{for(s.s();!(o=s.n()).done;){o.value.allGeometryLoaded||n++}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}var u=n>0;return void 0!==e.textElementsRenderer&&(u=u||e.textElementsRenderer.loading),u=u||!e.poiTableManager.finishedLoading||!e.visibleTileSet.allVisibleTilesLoaded},e.closeToFrustum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-13,r=(new s.Vector3).copy(e).project(t);return Math.abs(r.x)-n<1&&Math.abs(r.y)-n<1&&Math.abs(r.z)-n<1},e.getBrowserLanguages=o.DOMUtils.getBrowserLanguages}(t.MapViewUtils||(t.MapViewUtils={})),function(e){e.getKeyForTileKeyAndOffset=i.TileKeyUtils.getKeyForTileKeyAndOffset,e.extractOffsetAndMortonKeyFromKey=i.TileKeyUtils.extractOffsetAndMortonKeyFromKey,e.getParentKeyFromKey=i.TileKeyUtils.getParentKeyFromKey}(t.TileOffsetUtils||(t.TileOffsetUtils={}))},3236:function(e,t,n){"use strict";var r=n(63038).default,i=n(319).default,a=n(43269).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VisibleTileSet=t.ResourceComputationType=void 0;var u,l,c=n(31201),d=n(51106),h=n(15739),f=n(34585),p=n(49417),m=n(95596),v=n(65312);!function(e){e[e.EstimationInMb=0]="EstimationInMb",e[e.NumberOfTiles=1]="NumberOfTiles"}(u=t.ResourceComputationType||(t.ResourceComputationType={})),function(e){e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.BOTH=3]="BOTH"}(l||(l={}));var g=1/1048576,y=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.EstimationInMb;o(this,e),this.m_disposedTiles=[],this.m_resourceComputationType=r,this.m_tileCache=new d.LRUCache(t,(function(e){return n.m_resourceComputationType===u.EstimationInMb?e.memoryUsage*g:1})),this.m_tileCache.evictionCallback=function(e,t){void 0!==t.tileLoader&&t.tileLoader.cancel(),n.m_disposedTiles.push(t)},this.m_tileCache.canEvict=function(e,t){return!t.isVisible}}return s(e,[{key:"resourceComputationType",get:function(){return this.m_resourceComputationType}},{key:"capacity",get:function(){return this.m_tileCache.capacity}},{key:"size",get:function(){return this.m_tileCache.size}},{key:"setCapacity",value:function(e,t){var n=this;this.m_resourceComputationType=t,this.m_tileCache.setCapacityAndMeasure(e,(function(e){return n.m_resourceComputationType===u.EstimationInMb?e.memoryUsage*g:1}))}},{key:"get",value:function(t,n,r){return this.m_tileCache.get(e.getKey(t,n,r))}},{key:"set",value:function(t,n,r,i){this.m_tileCache.set(e.getKey(t,n,r),i)}},{key:"delete",value:function(t){var n=e.getKeyForTile(t);this.deleteByKey(n)}},{key:"deleteByKey",value:function(e){this.m_tileCache.delete(e)}},{key:"disposeTiles",value:function(){this.m_disposedTiles.forEach((function(e){e.dispose()})),this.m_disposedTiles.length=0}},{key:"shrinkToCapacity",value:function(){this.m_tileCache.shrinkToCapacity()}},{key:"evictAll",value:function(){this.m_tileCache.evictAll()}},{key:"evictSelected",value:function(e){this.m_tileCache.evictSelected(e)}},{key:"forEach",value:function(e,t){this.m_tileCache.forEach((function(n,r){void 0!==t&&n.dataSource!==t||e(n,r)}))}}],[{key:"getKey",value:function(e,t,n){return"".concat(n.name,"_").concat(e,"_").concat(t)}},{key:"getKeyForTile",value:function(t){return e.getKey(t.tileKey.mortonCode(),t.offset,t.dataSource)}}]),e}(),x=function(e,t){var n=e.distance-t.distance,r=1e-6*(e.distance+t.distance);return Math.abs(n)<r?e.tileKey.mortonCode()-t.tileKey.mortonCode():n},_=function(){function e(t,n,r,i){var a;o(this,e),this.m_frustumIntersection=t,this.m_tileGeometryManager=n,this.options=r,this.m_taskQueue=i,this.dataSourceTileList=[],this.allVisibleTilesLoaded=!1,this.m_cameraOverride=new f.PerspectiveCamera,this.m_viewRange={near:.1,far:1/0,minimum:.1,maximum:1/0},this.m_coveringMap=new Map,this.m_resourceComputationType=u.EstimationInMb,this.options=r,this.options.maxTilesPerFrame=Math.floor(null!==(a=this.options.maxTilesPerFrame)&&void 0!==a?a:0),this.m_resourceComputationType=void 0===r.resourceComputationType?u.EstimationInMb:r.resourceComputationType,this.m_dataSourceCache=new y(this.options.tileCacheSize,this.m_resourceComputationType)}return s(e,[{key:"getDataSourceCacheSize",value:function(){return this.options.tileCacheSize}},{key:"setDataSourceCacheSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.EstimationInMb;this.options.tileCacheSize=e,this.resourceComputationType=t}},{key:"getNumberOfVisibleTiles",value:function(){return this.options.maxVisibleDataSourceTiles}},{key:"setNumberOfVisibleTiles",value:function(e){this.options.maxVisibleDataSourceTiles=e}},{key:"maxTilesPerFrame",get:function(){return this.options.maxTilesPerFrame},set:function(e){if(e<0)throw new Error("Invalid value, this will result in no tiles ever showing");this.options.maxTilesPerFrame=Math.floor(e)}},{key:"resourceComputationType",get:function(){return this.m_resourceComputationType},set:function(e){this.m_resourceComputationType=e,this.m_dataSourceCache.setCapacity(this.options.tileCacheSize,e)}},{key:"updateClipPlanes",value:function(e,t){void 0!==e&&(this.options.clipPlanesEvaluator.maxElevation=e),void 0!==t&&(this.options.clipPlanesEvaluator.minElevation=t);var n=this.m_frustumIntersection.mapView,r=n.camera,i=n.projection,a=n.elevationProvider;return this.m_viewRange=this.options.clipPlanesEvaluator.evaluateClipPlanes(r,i,a),this.m_viewRange}},{key:"updateRenderList",value:function(e,t,n,r,o){var s=this,u=!0,l=this.getVisibleTileKeysForDataSources(t,n,o);this.dataSourceTileList=[],this.m_coveringMap.clear();var c,d,f,p=a(l.tileKeys);try{for(p.s();!(c=p.n()).done;){var m=c.value,v=m.dataSource,g=m.visibleTileKeys;g.sort(x);var y=v.getDataZoomLevel(t),_=this.processVisibleTiles(g,v,r,{newTilesPerFrame:0},!0),b=this.processVisibleTiles(_.dependentTiles,v,r,{newTilesPerFrame:0},!1);this.m_tileGeometryManager.updateTiles(_.visibleTiles),this.m_tileGeometryManager.updateTiles(b.visibleTiles),this.dataSourceTileList.push({dataSource:v,storageLevel:e,zoomLevel:y,allVisibleTileLoaded:_.allDataSourceTilesLoaded&&b.allDataSourceTilesLoaded,numTilesLoading:_.numTilesLoading+b.numTilesLoading,visibleTiles:[].concat(i(_.visibleTiles),i(b.visibleTiles)),renderedTiles:new Map}),u=u&&_.allDataSourceTilesLoaded}}catch(T){p.e(T)}finally{p.f()}this.allVisibleTilesLoaded=u&&l.allBoundingBoxesFinal,this.populateRenderedTiles(),this.forEachCachedTile((function(e){e.isVisible||e.allGeometryLoaded||s.disposeTile(e)})),this.m_dataSourceCache.shrinkToCapacity(),this.dataSourceTileList.forEach((function(e){e.renderedTiles.forEach((function(t){t.update(e.zoomLevel),d=h.MathUtils.min2(d,t.geoBox.minAltitude),f=h.MathUtils.max2(f,t.geoBox.maxAltitude)}))})),void 0===d&&(d=0),void 0===f&&(f=0);var w,S,M=this.m_viewRange,E=this.updateClipPlanes(f,d);return{viewRanges:E,viewRangesChanged:!1===(S=M,(w=E).far===S.far&&w.maximum===S.maximum&&w.minimum===S.minimum&&w.near===S.near)}}},{key:"getTile",value:function(e,t,n,r){return this.getTileImpl(e,t,n,!1,r)}},{key:"getCachedTile",value:function(e,t,n,r){h.assert(e.cacheable);return this.getTileImpl(e,t,n,!0,r)}},{key:"getRenderedTile",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.dataSourceTileList.find((function(t){return t.dataSource===e}));if(void 0!==r)return r.renderedTiles.get(c.TileKeyUtils.getKeyForTileKeyAndOffset(t,n))}},{key:"getRenderedTileAtLocation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.dataSourceTileList.find((function(t){return t.dataSource===e}));if(void 0!==r){var i=e.getTilingScheme(),a=r.zoomLevel,o=i.getTileKey(t,a);if(o){var s=r.renderedTiles.get(c.TileKeyUtils.getKeyForTileKeyAndOffset(o,n));if(void 0!==s)return s;for(var u=this.getSearchDirection(e,a),l=u.searchLevelsUp,d=u.searchLevelsDown,h=o,f=1;f<=l;++f)if(h=h.parent(),void 0!==(s=r.renderedTiles.get(c.TileKeyUtils.getKeyForTileKeyAndOffset(h,n))))return s;for(var p=i.projection.projectPoint(t),m=1;m<=d;++m){var v=a+m,g=c.TileKeyUtils.worldCoordinatesToTileKey(i,p,v);if(g&&void 0!==(s=r.renderedTiles.get(c.TileKeyUtils.getKeyForTileKeyAndOffset(g,n))))return s}}}}},{key:"removeDataSource",value:function(e){this.clearTileCache(e),this.dataSourceTileList=this.dataSourceTileList.filter((function(t){return t.dataSource!==e}))}},{key:"clearTileCache",value:function(e,t){void 0!==e?this.m_dataSourceCache.evictSelected((function(n,r){return n.dataSource===e&&(void 0===t||t(n))})):void 0!==t?this.m_dataSourceCache.evictSelected(t):this.m_dataSourceCache.evictAll()}},{key:"markTilesDirty",value:function(e,t){var n=this;if(void 0===e)this.dataSourceTileList.forEach((function(e){n.markDataSourceTilesDirty(e,t)}));else{var r=this.dataSourceTileList.find((function(t){return t.dataSource===e}));if(void 0===r)return;this.markDataSourceTilesDirty(r,t)}}},{key:"disposePendingTiles",value:function(){this.m_dataSourceCache.disposeTiles()}},{key:"forEachVisibleTile",value:function(e){var t,n=a(this.dataSourceTileList);try{for(n.s();!(t=n.n()).done;){t.value.renderedTiles.forEach(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"forEachCachedTile",value:function(e,t){this.m_dataSourceCache.forEach((function(t,n){return e(t)}),t)}},{key:"disposeTile",value:function(e){this.m_dataSourceCache.delete(e),e.dispose()}},{key:"processVisibleTiles",value:function(e,t,n,r,i){for(var o,s=!0,u=0,l=[],c=[],d=0;d<e.length&&l.length<this.options.maxVisibleDataSourceTiles;d++){var h=e[d],f=this.getTile(t,h.tileKey,h.offset,n);if(void 0!==f&&(l.push(f),s=s&&f.allGeometryLoaded,f.allGeometryLoaded?(this.skipOverlappedTiles(t,f),this.processDelayTileRendering(f,r.newTilesPerFrame,n)&&r.newTilesPerFrame++):u++,f.visibleArea=h.area,f.elevationRange=null!==(o=h.elevationRange)&&void 0!==o?o:{minElevation:0,maxElevation:0},i)){var p,v=a(f.dependencies);try{var g=function(){var t=p.value;void 0===e.find((function(e){return e.tileKey.mortonCode()===t.mortonCode()}))&&void 0===c.find((function(e){return e.tileKey.mortonCode()===t.mortonCode()}))&&c.push(new m.TileKeyEntry(t,0))};for(v.s();!(p=v.n()).done;)g()}catch(y){v.e(y)}finally{v.f()}}}return{allDataSourceTilesLoaded:s,numTilesLoading:u,visibleTiles:l,dependentTiles:c}}},{key:"processDelayTileRendering",value:function(e,t,n){var r=!1;return 0!==this.options.maxTilesPerFrame&&t>this.options.maxTilesPerFrame&&e.frameNumLastVisible!==n-1?(e.delayRendering=!0,e.mapView.update()):(e.frameNumVisible<0&&(e.frameNumVisible=n,r=!0),e.numFramesVisible++,e.delayRendering=!1),r}},{key:"skipOverlappedTiles",value:function(e,t){if(this.options.projection.type!==c.ProjectionType.Spherical&&e.isFullyCovering()){var n=t.uniqueKey,r=this.m_coveringMap.get(n);void 0===r?(t.skipRendering=!1,this.m_coveringMap.set(n,t)):r.dataSource instanceof p.BackgroundDataSource?r.skipRendering=!0:e instanceof p.BackgroundDataSource&&(t.skipRendering=!0)}}},{key:"getSearchDirection",value:function(e,t){var n=Math.min(this.options.quadTreeSearchDistanceUp,Math.max(0,t-e.minDataLevel)),r=Math.min(this.options.quadTreeSearchDistanceDown,Math.max(0,e.maxDataLevel-t));return{searchDirection:r>0&&n>0?l.BOTH:r>0?l.DOWN:n>0?l.UP:l.NONE,searchLevelsUp:n,searchLevelsDown:r}}},{key:"populateRenderedTiles",value:function(){var e=this;this.dataSourceTileList.forEach((function(t){var n=t.renderedTiles,r=[];t.visibleTiles.forEach((function(e){e.levelOffset=0,e.hasGeometry&&!e.delayRendering?n.set(e.uniqueKey,e):r.push(e.uniqueKey)}));var i=t.dataSource;if(0!==r.length&&!1!==i.allowOverlappingTiles)for(var a=t.zoomLevel,o=e.getSearchDirection(i,a).searchDirection,s=new Map,u=0,c=r;u<c.length;u++){var d=c[u];(o!==l.BOTH&&o!==l.UP||!e.findUp(d,a,n,s,i))&&(o!==l.BOTH&&o!==l.DOWN||e.findDown(d,a,n,i))}}))}},{key:"findDown",value:function(e,t,n,r){var i,o=c.TileKeyUtils.extractOffsetAndMortonKeyFromKey(e),s=o.offset,u=o.mortonCode,l=c.TileKey.fromMortonCode(u),d=r.getTilingScheme(),h=a(d.getSubTileKeys(l));try{for(h.s();!(i=h.n()).done;){var f=i.value,p=c.TileKeyUtils.getKeyForTileKeyAndOffset(f,s),m=this.m_dataSourceCache.get(f.mortonCode(),s,r),v=Math.abs(f.level-t);void 0===m||!m.hasGeometry||m.delayRendering?v<this.options.quadTreeSearchDistanceDown&&this.findDown(p,t,n,r):(n.set(p,m),m.levelOffset=v)}}catch(g){h.e(g)}finally{h.f()}}},{key:"findUp",value:function(e,t,n,r,i){var a=c.TileKeyUtils.getParentKeyFromKey(e);if(void 0!==n.get(a))return!0;var o=r.get(a);if(void 0!==o)return o;var s=c.TileKeyUtils.extractOffsetAndMortonKeyFromKey(a),u=s.offset,l=s.mortonCode,d=this.m_dataSourceCache.get(l,u,i),h=d?d.tileKey:c.TileKey.fromMortonCode(l),f=Math.abs(t-h.level);if(void 0!==d&&d.hasGeometry&&!d.delayRendering)return r.set(a,!0),n.set(a,d),d.levelOffset=-f,!0;if(r.set(a,!1),f<this.options.quadTreeSearchDistanceUp&&0!==h.level){var p=this.findUp(a,t,n,r,i);if(r.set(a,p),p)return!0}return!1}},{key:"getTileImpl",value:function(e,t,n,r,i){function a(e){e.frameNumLastRequested=i}if(!e.cacheable&&!r){var o=e.getTile(t,!0);return void 0!==o&&(this.addToTaskQueue(o),a(o)),o}var s=this.m_dataSourceCache,u=s.get(t.mortonCode(),n,e);return void 0!==u&&u.offset===n?(a(u),u):r?void 0:(void 0!==(u=e.getTile(t,!0))&&(this.addToTaskQueue(u),u.offset=n,a(u),s.set(t.mortonCode(),n,e,u)),u)}},{key:"addToTaskQueue",value:function(e){this.m_taskQueue.add({execute:e.load.bind(e),group:v.TileTaskGroups.FETCH_AND_DECODE,getPriority:function(){var t,n;return null!==(n=null===(t=null===e||void 0===e?void 0:e.tileLoader)||void 0===t?void 0:t.priority)&&void 0!==n?n:0},isExpired:function(){return!(null===e||void 0===e?void 0:e.isVisible)},estimatedProcessTime:function(){return 1}})}},{key:"markDataSourceTilesDirty",value:function(e,t){var n=this,r=this.m_dataSourceCache,i=new Set,a=function(e){var t,r=y.getKeyForTile(e);i.has(r)||(i.add(r),null===(t=e.tileLoader)||void 0===t||t.cancel(),n.addToTaskQueue(e))};e.visibleTiles.forEach((function(e){(void 0===t||t(e))&&a(e)})),e.renderedTiles.forEach((function(e){(void 0===t||t(e))&&a(e)})),r.forEach((function(e,n){void 0!==t&&!t(e)||i.has(n)||(r.deleteByKey(n),e.dispose())}),e.dataSource)}},{key:"getVisibleTileKeysForDataSources",value:function(e,t,n){var i=Array(),o=!0;if(0===t.length)return{tileKeys:i,allBoundingBoxesFinal:o};var s=new Map;t.forEach((function(e){var t=e.getTilingScheme(),n=s.get(t);void 0===n?s.set(t,[e]):n.push(e)})),void 0!==n?(this.m_cameraOverride.copy(this.m_frustumIntersection.camera),this.m_cameraOverride.near=Math.min(this.m_cameraOverride.near,this.m_viewRange.minimum),this.m_cameraOverride.far=Math.max(this.m_cameraOverride.far,this.m_viewRange.maximum),this.m_cameraOverride.updateProjectionMatrix(),this.m_frustumIntersection.updateFrustum(this.m_cameraOverride.projectionMatrix)):this.m_frustumIntersection.updateFrustum();var u,l=a(s);try{for(l.s();!(u=l.n()).done;){var c=r(u.value,2),d=c[0],h=c[1],f=h.map((function(t){return t.getDataZoomLevel(e)})),p=this.m_frustumIntersection.compute(d,n,f,h);o=o&&p.calculationFinal;var m,v=a(h);try{for(v.s();!(m=v.n()).done;){var g,y=m.value,x=[],_=y.getDataZoomLevel(e),b=a(p.tileKeyEntries.get(_).values());try{for(b.s();!(g=b.n()).done;){var w=g.value;y.canGetTile(_,w.tileKey)&&x.push(w)}}catch(S){b.e(S)}finally{b.f()}i.push({dataSource:y,visibleTileKeys:x})}}catch(S){v.e(S)}finally{v.f()}}}catch(S){l.e(S)}finally{l.f()}return{tileKeys:i,allBoundingBoxesFinal:o}}}]),e}();t.VisibleTileSet=_},2391:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerBasedDecoder=void 0;var s=n(26309),u=0,l=function(){function e(t,n){a(this,e),this.workerSet=t,this.decoderServiceType=n,this.m_serviceCreated=!1,this.workerSet.addReference(),this.serviceId="".concat(this.decoderServiceType,"-").concat(u++)}return o(e,[{key:"dispose",value:function(){this.m_serviceCreated&&this.workerSet.broadcastRequest(s.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:s.WorkerServiceProtocol.Requests.DestroyService,targetServiceId:this.serviceId}).catch((function(){})),this.workerSet.removeReference()}},{key:"connect",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerSet.connect(s.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID);case 2:if(this.m_serviceCreated){e.next=6;break}return e.next=5,this.workerSet.broadcastRequest(s.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:s.WorkerServiceProtocol.Requests.CreateService,targetServiceType:this.decoderServiceType,targetServiceId:this.serviceId});case 5:this.m_serviceCreated=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"decodeTile",value:function(e,t,n,r){var i=t.mortonCode(),a={type:s.WorkerDecoderProtocol.Requests.DecodeTileRequest,tileKey:i,data:e,projection:s.getProjectionName(n)},o=e instanceof ArrayBuffer?[e]:void 0;return this.workerSet.invokeRequest(this.serviceId,a,o,r)}},{key:"getTileInfo",value:function(e,t,n,r){var i=t.mortonCode(),a={type:s.WorkerDecoderProtocol.Requests.TileInfoRequest,tileKey:i,data:e,projection:s.getProjectionName(n)},o=e instanceof ArrayBuffer?[e]:void 0;return this.workerSet.invokeRequest(this.serviceId,a,o,r)}},{key:"configure",value:function(e,t){var n=Object.assign(Object.assign({service:this.serviceId,type:s.WorkerDecoderProtocol.DecoderMessageName.Configuration},e),{options:t});this.workerSet.broadcastMessage(n)}},{key:"workerCount",get:function(){return this.workerSet.workerCount}}]),e}();t.WorkerBasedDecoder=l},56367:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerBasedTiler=void 0;var s=n(26309),u=0,l=function(){function e(t,n){a(this,e),this.workerSet=t,this.tilerServiceType=n,this.m_serviceCreated=!1,this.workerSet.addReference(),this.serviceId="".concat(this.tilerServiceType,"-").concat(u++)}return o(e,[{key:"dispose",value:function(){this.m_serviceCreated&&this.workerSet.broadcastRequest(s.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:s.WorkerServiceProtocol.Requests.DestroyService,targetServiceId:this.serviceId}).catch((function(){})),this.workerSet.removeReference()}},{key:"connect",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerSet.connect(s.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID);case 2:if(this.m_serviceCreated){e.next=6;break}return e.next=5,this.workerSet.broadcastRequest(s.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:s.WorkerServiceProtocol.Requests.CreateService,targetServiceType:this.tilerServiceType,targetServiceId:this.serviceId});case 5:this.m_serviceCreated=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerIndex",value:function(e,t){var n={type:s.WorkerTilerProtocol.Requests.RegisterIndex,id:e,input:t instanceof URL?t.href:t};return this.workerSet.invokeRequest(this.serviceId,n)}},{key:"updateIndex",value:function(e,t){var n={type:s.WorkerTilerProtocol.Requests.UpdateIndex,id:e,input:t instanceof URL?t.href:t};return this.workerSet.invokeRequest(this.serviceId,n)}},{key:"getTile",value:function(e,t){var n=t.mortonCode(),r={type:s.WorkerTilerProtocol.Requests.TileRequest,index:e,tileKey:n};return this.workerSet.invokeRequest(this.serviceId,r)}}]),e}();t.WorkerBasedTiler=l},2011:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LowResRenderPass=void 0;var s=n(85164),u=n(34585),l=function(e){a(n,e);var t=o(n);function n(e){var i;return r(this,n),(i=t.call(this)).lowResPixelRatio=e,i.m_renderTarget=null,i.m_localCamera=new u.OrthographicCamera(-1,1,1,-1,0,1),i.m_quadScene=new u.Scene,i.m_quadUniforms=s.CopyShader.uniforms,i.m_quadMaterial=new s.CopyMaterial(i.m_quadUniforms),i.m_quad=new u.Mesh(new u.PlaneBufferGeometry(2,2),i.m_quadMaterial),i.m_savedWidth=0,i.m_savedHeight=0,i.m_quad.frustumCulled=!1,i.m_quadScene.add(i.m_quad),i.m_pixelRatio=e,i}return i(n,[{key:"dispose",value:function(){this.m_quadMaterial.dispose(),this.m_quad.geometry.dispose(),null!==this.m_renderTarget&&(this.m_renderTarget.dispose(),this.m_renderTarget=null)}},{key:"pixelRatio",get:function(){return this.m_pixelRatio},set:function(e){this.m_pixelRatio=e,this.m_renderTarget&&void 0!==this.pixelRatio&&this.m_renderTarget.setSize(Math.floor(this.m_savedWidth*this.pixelRatio),Math.floor(this.m_savedHeight*this.pixelRatio))}},{key:"render",value:function(e,t,n,r,i){if(this.enabled&&void 0!==this.pixelRatio){null===this.m_renderTarget&&(this.m_savedWidth=i.width,this.m_savedHeight=i.height,this.m_renderTarget=new u.WebGLRenderTarget(Math.floor(this.m_savedWidth*this.pixelRatio),Math.floor(this.m_savedHeight*this.pixelRatio),{minFilter:u.LinearFilter,magFilter:u.LinearFilter,format:u.RGBAFormat,depthBuffer:!0,stencilBuffer:!0}),this.m_renderTarget.texture.name="LowResRenderPass.sample"),this.m_quadUniforms.tDiffuse.value=this.m_renderTarget.texture,this.m_quadUniforms.opacity.value=1;var a=e.getRenderTarget();e.setRenderTarget(this.m_renderTarget),e.clear(),e.render(t,n),e.setRenderTarget(this.renderToScreen?null:r),e.clear(),e.render(this.m_quadScene,this.m_localCamera),e.setRenderTarget(a)}}},{key:"setSize",value:function(e,t){this.m_savedWidth=e,this.m_savedHeight=t,this.m_renderTarget&&void 0!==this.pixelRatio&&this.m_renderTarget.setSize(Math.floor(e*this.pixelRatio),Math.floor(t*this.pixelRatio))}}]),n}(n(87585).Pass);t.LowResRenderPass=l},42773:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MSAARenderPass=t.MSAASampling=void 0;var s,u=n(85164),l=n(34585),c=n(87585);!function(e){e[e.Level_0=0]="Level_0",e[e.Level_1=1]="Level_1",e[e.Level_2=2]="Level_2",e[e.Level_3=3]="Level_3",e[e.Level_4=4]="Level_4",e[e.Level_5=5]="Level_5"}(s=t.MSAASampling||(t.MSAASampling={}));var d=function(e){a(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.call(this)).samplingLevel=s.Level_1,e.m_renderTarget=null,e.m_localCamera=new l.OrthographicCamera(-1,1,1,-1,0,1),e.m_quadScene=new l.Scene,e.m_quadUniforms=u.CopyShader.uniforms,e.m_quadMaterial=new u.MSAAMaterial(e.m_quadUniforms),e.m_quad=new l.Mesh(new l.PlaneBufferGeometry(2,2),e.m_quadMaterial),e.m_tmpColor=new l.Color,e.m_quad.frustumCulled=!1,e.m_quadScene.add(e.m_quad),e}return i(n,[{key:"dispose",value:function(){null!==this.m_renderTarget&&(this.m_renderTarget.dispose(),this.m_renderTarget=null)}},{key:"render",value:function(e,t,r,i,a){if(this.enabled){null===this.m_renderTarget&&(this.m_renderTarget=new l.WebGLRenderTarget(a.width,a.height,{minFilter:l.LinearFilter,magFilter:l.LinearFilter,format:l.RGBAFormat}),this.m_renderTarget.texture.name="MSAARenderPass.sample"),this.m_quadUniforms.tDiffuse.value=this.m_renderTarget.texture;var o=n.OffsetVectors[this.samplingLevel],s=e.getClearColor(this.m_tmpColor),u=void 0!==s?s.getHex():0,c={enabled:null!==r.view&&r.view.enabled,fullWidth:a.width,fullHeight:a.height,x:0,y:0,width:a.width,height:a.height};c.enabled&&null!==r.view&&(c.fullWidth=r.view.fullWidth,c.fullHeight=r.view.fullHeight,c.x=r.view.offsetX,c.y=r.view.offsetY,c.width=r.view.width,c.height=r.view.height);for(var d=e.getRenderTarget(),h=0;h<o.length;h++){var f=o[h];r.setViewOffset(c.fullWidth,c.fullHeight,c.x+f[0]/16,c.y+f[1]/16,c.width,c.height);var p=(h+.5)/o.length-.5,m=1/o.length+p/32;this.m_quadUniforms.opacity.value=m,e.setRenderTarget(this.m_renderTarget),e.clear(),e.render(t,r),e.setRenderTarget(this.renderToScreen?null:i),0===h&&(e.setClearColor(0),e.clear()),e.render(this.m_quadScene,this.m_localCamera),0===h&&void 0!==s&&e.setClearColor(u)}e.setRenderTarget(d),null!==r.view&&(r.view.enabled=c.enabled,r.view.offsetX=c.x,r.view.offsetY=c.y)}}},{key:"setSize",value:function(e,t){this.m_renderTarget&&this.m_renderTarget.setSize(e,t)}}]),n}(c.Pass);t.MSAARenderPass=d,d.OffsetVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]},53801:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapRenderingManager=void 0;var a=n(85164),o=n(34585),s=n(2011),u=n(42773),l=n(17011),c=n(87585),d=n(10711),h=u.MSAASampling.Level_1,f=u.MSAASampling.Level_4,p=function(){function e(t,n,i){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{msaaEnabled:!1};r(this,e),this.bloom={enabled:!1,strength:1.5,radius:.4,threshold:.85},this.outline={enabled:!1,thickness:.005,color:"#000000",ghostExtrudedPolygons:!1,needsUpdate:!1},this.vignette={enabled:!1,offset:1,darkness:1},this.sepia={enabled:!1,amount:.5},this.m_width=1,this.m_height=1,this.m_renderPass=new c.RenderPass,this.m_target1=new o.WebGLRenderTarget(1,1),this.m_target2=new o.WebGLRenderTarget(1,1),this.m_sepiaPass=new c.ShaderPass(a.SepiaShader),this.m_vignettePass=new c.ShaderPass(a.VignetteShader),this.m_readBuffer=new o.WebGLRenderTarget(t,n),this.m_msaaPass=new u.MSAARenderPass,this.m_msaaPass.enabled=void 0!==l&&!0===l.msaaEnabled,this.m_dynamicMsaaSamplingLevel=void 0===l.dynamicMsaaSamplingLevel?h:l.dynamicMsaaSamplingLevel,this.m_staticMsaaSamplingLevel=void 0===l.staticMsaaSamplingLevel?f:l.staticMsaaSamplingLevel,this.m_lowResPass=new s.LowResRenderPass(i),this.m_lowResPass.enabled=void 0!==i}return i(e,[{key:"updateOutline",value:function(e){this.outline.color=e.color,this.outline.thickness=e.thickness,this.outline.ghostExtrudedPolygons=e.ghostExtrudedPolygons,this.outline.needsUpdate=!0}},{key:"render",value:function(e,t,n,r){if(!r&&void 0!==this.m_lowResPass.pixelRatio)return this.m_lowResPass.renderToScreen=!0,void this.m_lowResPass.render(e,t,n,null,this.m_readBuffer);var i=this.bloom.enabled||this.outline.enabled||this.vignette.enabled||this.sepia.enabled,a=null;if((this.bloom.enabled||this.vignette.enabled||this.sepia.enabled)&&(e.setRenderTarget(this.m_target1),e.clearDepth()),this.m_msaaPass.enabled?(this.m_msaaPass.samplingLevel=r?this.m_staticMsaaSamplingLevel:this.m_dynamicMsaaSamplingLevel,this.m_msaaPass.renderToScreen=!i,this.m_msaaPass.render(e,t,n,null,this.m_readBuffer)):this.bloom.enabled||this.vignette.enabled||this.sepia.enabled?(a=this.m_target1,this.m_renderPass.render(e,t,n,this.m_target1,null)):(!this.outline.enabled||this.outline.enabled&&!this.bloom.enabled)&&e.render(t,n),this.outline.enabled){void 0===this.m_outlineEffect&&(this.m_outlineEffect=new l.OutlineEffect(e)),this.outline.needsUpdate&&(this.m_outlineEffect.color=this.outline.color,this.m_outlineEffect.thickness=this.outline.thickness,this.m_outlineEffect.ghostExtrudedPolygons=this.outline.ghostExtrudedPolygons,this.outline.needsUpdate=!1);var s=this.bloom.enabled||this.vignette.enabled||this.sepia.enabled;s&&(a=this.m_target1),e.setRenderTarget(s?a:null),this.m_outlineEffect.render(t,n)}if(this.bloom.enabled){void 0===this.m_bloomPass&&(this.m_bloomPass=new d.BloomPass(new o.Vector2(this.m_width,this.m_height),this.bloom.strength,this.bloom.radius,this.bloom.threshold));var u=this.vignette.enabled||this.sepia.enabled;this.m_bloomPass.renderToScreen=!u,this.m_bloomPass.radius=this.bloom.radius,this.m_bloomPass.strength=this.bloom.strength,this.m_bloomPass.threshold=this.bloom.threshold,this.m_bloomPass.render(e,t,n,null,a)}else void 0!==this.m_bloomPass&&(this.m_bloomPass.dispose(),this.m_bloomPass=void 0);if(this.vignette.enabled){var c=a,h=this.sepia.enabled;this.m_vignettePass.uniforms.offset.value=this.vignette.offset,this.m_vignettePass.uniforms.darkness.value=this.vignette.darkness,this.m_vignettePass.renderToScreen=!h,h&&(a=a===this.m_target1?this.m_target2:this.m_target1),this.m_vignettePass.render(e,t,n,a,c)}this.sepia.enabled&&(this.m_sepiaPass.renderToScreen=!0,this.m_sepiaPass.uniforms.amount.value=this.sepia.amount,this.m_sepiaPass.render(e,t,n,null,a))}},{key:"setSize",value:function(e,t){this.m_readBuffer.setSize(e,t),this.m_msaaPass.setSize(e,t),void 0!==this.m_bloomPass&&this.m_bloomPass.setSize(e,t),this.m_lowResPass.setSize(e,t),this.m_target1.setSize(e,t),this.m_target2.setSize(e,t),this.m_width=e,this.m_height=t}},{key:"lowResPixelRatio",get:function(){return this.m_lowResPass.pixelRatio},set:function(e){this.m_lowResPass.pixelRatio=e,this.m_lowResPass.enabled=void 0!==e}},{key:"dynamicMsaaSamplingLevel",get:function(){return this.m_dynamicMsaaSamplingLevel},set:function(e){this.m_dynamicMsaaSamplingLevel=e}},{key:"msaaEnabled",get:function(){return this.m_msaaPass.enabled},set:function(e){this.m_msaaPass.enabled=e}},{key:"staticMsaaSamplingLevel",get:function(){return this.m_staticMsaaSamplingLevel},set:function(e){this.m_staticMsaaSamplingLevel=e}}]),e}();t.MapRenderingManager=p},17011:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineEffect=void 0;var o=n(85164),s=n(15739),u=n(34585),l=function(){function e(t){i(this,e),this.m_renderer=t,this.enabled=!0,this.m_defaultThickness=.02,this.m_defaultColor=new u.Color(0,0,0),this.m_defaultAlpha=1,this.m_defaultKeepAlive=!1,this.m_ghostExtrudedPolygons=!1,this.m_cache={},this.m_removeThresholdCount=60,this.m_originalMaterials={},this.m_originalOnBeforeRenders={},this.m_shaderIDs={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"},this.m_uniformsChunk={outlineThickness:{value:this.m_defaultThickness},outlineColor:{value:this.m_defaultColor},outlineAlpha:{value:this.m_defaultAlpha}},this.autoClear=t.autoClear,this.domElement=t.domElement,this.shadowMap=t.shadowMap}return a(e,[{key:"thickness",set:function(e){this.m_defaultThickness=e,this.m_uniformsChunk.outlineThickness.value=e,this.m_cache={}}},{key:"color",set:function(e){this.m_defaultColor.set(e),this.m_cache={}}},{key:"ghostExtrudedPolygons",set:function(e){this.m_ghostExtrudedPolygons=e}},{key:"clear",value:function(e,t,n){this.m_renderer.clear(e,t,n)}},{key:"getPixelRatio",value:function(){return this.m_renderer.getPixelRatio()}},{key:"setPixelRatio",value:function(e){this.m_renderer.setPixelRatio(e)}},{key:"getSize",value:function(e){return this.m_renderer.getSize(e)}},{key:"setSize",value:function(e,t,n){this.m_renderer.setSize(e,t,n)}},{key:"setViewport",value:function(e,t,n,r){this.m_renderer.setViewport(e,t,n,r)}},{key:"setScissor",value:function(e,t,n,r){this.m_renderer.setScissor(e,t,n,r)}},{key:"setScissorTest",value:function(e){this.m_renderer.setScissorTest(e)}},{key:"setRenderTarget",value:function(e){this.m_renderer.setRenderTarget(e)}},{key:"render",value:function(e,t){if(this.m_ghostExtrudedPolygons){if(!this.enabled)return void this.m_renderer.render(e,t);var n=this.m_renderer.autoClear;this.m_renderer.autoClear=this.autoClear,this.m_renderer.render(e,t),this.m_renderer.autoClear=n}this.renderOutline(e,t)}},{key:"renderOutline",value:function(e,t){var n=this.m_renderer.autoClear,r=e.autoUpdate,i=e.background,a=this.m_renderer.shadowMap.enabled;e.autoUpdate=!1,e.background=null,this.m_renderer.autoClear=!1,this.m_renderer.shadowMap.enabled=!1,e.traverse(this.setOutlineMaterial.bind(this)),this.m_renderer.render(e,t),e.traverse(this.restoreOriginalMaterial.bind(this)),this.cleanupCache(),e.autoUpdate=r,e.background=i,this.m_renderer.autoClear=n,this.m_renderer.shadowMap.enabled=a}},{key:"createInvisibleMaterial",value:function(){return new u.ShaderMaterial({name:"invisible",visible:!1})}},{key:"createMaterial",value:function(e){if(e instanceof o.EdgeMaterial||!0===e.isDepthPrepassMaterial)return this.createInvisibleMaterial();var t,n=this.m_shaderIDs[e.type],r=void 0!==e.shaderUniforms?e.shaderUniforms:e.uniforms;if(void 0!==n){var i=u.ShaderLib[n];r=i.uniforms,t=i.vertexShader}else if(!0===e.isRawShaderMaterial){if(t=e.vertexShader,!/attribute\s+vec3\s+position\s*;/.test(t)||!/attribute\s+vec3\s+normal\s*;/.test(t))return this.createInvisibleMaterial()}else{if(!0!==e.isShaderMaterial)return this.createInvisibleMaterial();t=e.vertexShader}var a=void 0!==e.shaderUniforms&&void 0!==e.shaderUniforms.extrusionRatio,s=o.FadingFeature.isDefined(e),l=Object.assign(Object.assign({},r),this.m_uniformsChunk),c=t.replace(/void\s+main\s*\(\s*\)/,"\n#ifdef USE_EXTRUSION\n  #ifndef HAS_EXTRUSION_PARS_VERTEX\n    #include <extrusion_pars_vertex>\n  #endif\n#endif\n\n#ifdef USE_FADING\n  #include <fading_pars_vertex>\n#endif\n\nuniform float outlineThickness;\n\nvec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {\n    float thickness = outlineThickness;\n    const float ratio = 1.0;\n    vec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );\n    vec4 norm = normalize( pos - pos2 );\n    return pos + norm * thickness * pos.w * ratio;\n}\nvoid main()").replace(/\}\s*$/,"\n#if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( STANDARD )\n    #ifndef USE_ENVMAP\n        vec3 objectNormal = normalize( normal );\n    #endif\n#endif\n\n#ifdef FLIP_SIDED\n    objectNormal = -objectNormal;\n#endif\n\n#ifdef DECLARE_TRANSFORMED\n    vec3 transformed = vec3( position );\n#endif\n\n#ifdef USE_EXTRUSION\n #ifndef HAS_EXTRUSION_VERTEX\n  #include <extrusion_vertex>\n #endif\n#endif\n\n#ifdef USE_FADING\n  #include <fading_vertex>\n#endif\n\n#ifdef USE_EXTRUSION\n  gl_Position = calculateOutline( projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 ),\n      objectNormal, vec4( transformed, 1.0 ) );\n#else\n  gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );\n#endif\n\n#include <fog_vertex>\n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),d={};return/vec3\s+transformed\s*=/.test(t)||/#include\s+<begin_vertex>/.test(t)||(d.DECLARE_TRANSFORMED=!0),a&&(l.extrusionRatio={value:o.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN},d.USE_EXTRUSION=1),s&&(l.fadeNear={value:void 0!==r.fadeNear?r.fadeNear.value:o.FadingFeature.DEFAULT_FADE_NEAR},l.fadeFar={value:void 0!==r.fadeFar?r.fadeFar.value:o.FadingFeature.DEFAULT_FADE_FAR},d.USE_FADING=1),new u.ShaderMaterial({defines:d,uniforms:l,vertexShader:c,fragmentShader:"\n#include <common>\n#include <fog_pars_fragment>\n\n#ifdef USE_EXTRUSION\n  #include <extrusion_pars_fragment>\n#endif\n\n#ifdef USE_FADING\n  #include <fading_pars_fragment>\n#endif\n\nuniform vec3 outlineColor;\nuniform float outlineAlpha;\n\nvoid main() {\n\n    gl_FragColor = vec4( outlineColor, outlineAlpha );\n\n    #include <fog_fragment>\n\n    #ifdef USE_EXTRUSION\n      #include <extrusion_fragment>\n    #endif\n\n    #ifdef USE_FADING\n      #include <fading_fragment>\n    #endif\n}",side:u.BackSide,morphTargets:!1,morphNormals:!1,fog:!1,blending:u.CustomBlending,blendSrc:u.SrcAlphaFactor,blendDst:u.OneMinusSrcAlphaFactor,blendSrcAlpha:u.OneFactor,blendDstAlpha:u.OneMinusSrcAlphaFactor,transparent:!0,polygonOffset:!0,polygonOffsetFactor:10,polygonOffsetUnits:30})}},{key:"getOutlineMaterialFromCache",value:function(e){var t=this.m_cache[e.uuid];return void 0===t&&(t={material:this.createMaterial(e),used:!0,keepAlive:this.m_defaultKeepAlive,count:0},this.m_cache[e.uuid]=t),t.used=!0,t.material}},{key:"getOutlineMaterial",value:function(e){var t=this.getOutlineMaterialFromCache(e);return this.m_originalMaterials[t.uuid]=e,this.updateOutlineMaterial(t,e),t}},{key:"setOutlineMaterial",value:function(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=this.getOutlineMaterial(e.material[t]);else e.material=this.getOutlineMaterial(e.material);this.m_originalOnBeforeRenders[e.uuid]=e.onBeforeRender,e.onBeforeRender=s.chainCallbacks(e.onBeforeRender,this.onBeforeRender.bind(this))}}},{key:"restoreOriginalMaterial",value:function(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=this.m_originalMaterials[e.material[t].uuid];else e.material=this.m_originalMaterials[e.material.uuid];e.onBeforeRender=this.m_originalOnBeforeRenders[e.uuid]}}},{key:"onBeforeRender",value:function(e,t,n,r,i,a){var o=this.m_originalMaterials[i.uuid];void 0!==o&&this.updateUniforms(i,o)}},{key:"updateUniforms",value:function(e,t){var n,r=t.userData.outlineParameters,i=e.uniforms;i.outlineAlpha.value=t.opacity;var a=void 0!==t.shaderUniforms?t.shaderUniforms:t.uniforms;if(void 0!==r&&(void 0!==r.thickness&&(i.outlineThickness.value=r.thickness),void 0!==r.color&&i.outlineColor.value.fromArray(r.color),void 0!==r.alpha&&(i.outlineAlpha.value=r.alpha)),void 0!==a&&void 0!==a.extrusionRatio){var s=t.shaderUniforms.extrusionRatio.value;e.extrusionRatio=s,e.uniforms.extrusionRatio.value=void 0!==s?s:o.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN}void 0!==(null===(n=e.defines)||void 0===n?void 0:n.USE_FADING)&&void 0!==a.fadeNear&&void 0!==a.fadeFar&&a.fadeFar.value>=0&&(i.fadeNear.value=a.fadeNear.value,i.fadeFar.value=a.fadeFar.value)}},{key:"updateOutlineMaterial",value:function(e,t){if("invisible"!==e.name){var n=t.userData.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==n?(e.visible=!1!==t.visible&&(void 0===n.visible||n.visible),void 0!==n.keepAlive&&(this.m_cache[t.uuid].keepAlive=n.keepAlive)):e.visible=t.visible,!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1)}}},{key:"cleanupCache",value:function(){for(var e,t=0,n=(e=Object.keys(this.m_originalMaterials)).length;t<n;t++)this.m_originalMaterials[e[t]]=void 0;for(var i=0,a=(e=Object.keys(this.m_originalOnBeforeRenders)).length;i<a;i++)this.m_originalOnBeforeRenders[e[i]]=void 0;e=Object.keys(this.m_cache);var o,s=r(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;!1===this.m_cache[u].used?(this.m_cache[u].count++,!1===this.m_cache[u].keepAlive&&this.m_cache[u].count>this.m_removeThresholdCount&&delete this.m_cache[u]):(this.m_cache[u].used=!1,this.m_cache[u].count=0)}}catch(l){s.e(l)}finally{s.f()}}}]),e}();t.OutlineEffect=l},87585:function(e,t,n){"use strict";var r=n(2205).default,i=n(99842).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderPass=t.RenderPass=t.Pass=void 0;var s=n(34585),u=function(){function e(){a(this,e),this.enabled=!1,this.renderToScreen=!1}return o(e,[{key:"setSize",value:function(e,t){}},{key:"render",value:function(e,t,n,r,i,a){}}]),e}();t.Pass=u;var l=function(e){r(n,e);var t=i(n);function n(){return a(this,n),t.call(this)}return o(n,[{key:"render",value:function(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:r),e.render(t,n)}}]),n}(u);t.RenderPass=l;var c=function(e){r(n,e);var t=i(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tDiffuse";return a(this,n),(r=t.call(this)).textureID=i,e instanceof s.ShaderMaterial?(r.uniforms=e.uniforms,r.material=e):(r.uniforms=s.UniformsUtils.clone(e.uniforms),r.material=new s.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:r.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),r.fsQuad=new d(r.material),r}return o(n,[{key:"render",value:function(e,t,n,r,i,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,e.setRenderTarget(this.renderToScreen?null:r),this.fsQuad.render(e)}}]),n}(u);t.ShaderPass=c;var d=function(){function e(t){a(this,e),this.m_camera=new s.OrthographicCamera(-1,1,1,-1,0,1);var n=new s.PlaneBufferGeometry(2,2);this.m_mesh=new s.Mesh(n,t)}return o(e,[{key:"material",get:function(){return this.m_mesh.material},set:function(e){this.m_mesh.material=e}},{key:"render",value:function(e){e.render(this.m_mesh,this.m_camera)}}]),e}()},10711:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default,o=n(2205).default,s=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BloomPass=void 0;var u=n(85164),l=n(34585),c=n(87585),d=new l.Vector2(1,0),h=new l.Vector2(0,1),f=function(e){o(n,e);var t=s(n);function n(e,r,a,o){var s;i(this,n),(s=t.call(this)).resolution=new l.Vector2(256,256),s.m_renderTargetsHorizontal=[],s.m_renderTargetsVertical=[],s.m_nMips=5,s.m_separableBlurMaterials=[],s.m_camera=new l.OrthographicCamera(-1,1,1,-1,0,1),s.m_scene=new l.Scene,s.m_basic=new l.MeshBasicMaterial,s.m_quad=new l.Mesh(new l.PlaneBufferGeometry(2,2)),s.m_bloomTintColors=[new l.Vector3(1,1,1),new l.Vector3(1,1,1),new l.Vector3(1,1,1),new l.Vector3(1,1,1),new l.Vector3(1,1,1)],s.strength=r,s.radius=a,s.threshold=o,s.resolution=e,s.m_quad.frustumCulled=!1,s.m_scene.add(s.m_quad);var c={minFilter:l.LinearFilter,magFilter:l.LinearFilter,format:l.RGBAFormat},d=Math.round(s.resolution.x/2),h=Math.round(s.resolution.y/2);s.m_renderTargetBright=new l.WebGLRenderTarget(d,h,c),s.m_renderTargetBright.texture.name="UnrealBloomPass.bright",s.m_renderTargetBright.texture.generateMipmaps=!1;for(var f=0;f<s.m_nMips;f++){var p=new l.WebGLRenderTarget(d,h,c);p.texture.name="UnrealBloomPass.h"+f,p.texture.generateMipmaps=!1,s.m_renderTargetsHorizontal.push(p);var m=new l.WebGLRenderTarget(d,h,c);m.texture.name="UnrealBloomPass.v"+f,m.texture.generateMipmaps=!1,s.m_renderTargetsVertical.push(m),d=Math.round(d/2),h=Math.round(h/2)}s.m_highPassUniforms=l.UniformsUtils.clone(u.LuminosityHighPassShader.uniforms),s.m_highPassUniforms.luminosityThreshold.value=o,s.m_highPassUniforms.smoothWidth.value=.01,s.m_materialHighPassFilter=new l.ShaderMaterial({uniforms:s.m_highPassUniforms,vertexShader:u.LuminosityHighPassShader.vertexShader,fragmentShader:u.LuminosityHighPassShader.fragmentShader,defines:{}});var v=[3,5,7,9,11];d=Math.round(s.resolution.x/2),h=Math.round(s.resolution.y/2);for(var g=0;g<s.m_nMips;g++)s.m_separableBlurMaterials.push(s.getSeperableBlurMaterial(v[g])),s.m_separableBlurMaterials[g].uniforms.texSize.value=new l.Vector2(d,h),d=Math.round(d/2),h=Math.round(h/2);s.m_compositeMaterial=s.getCompositeMaterial(s.m_nMips),s.m_compositeMaterial.uniforms.blurTexture1.value=s.m_renderTargetsVertical[0].texture,s.m_compositeMaterial.uniforms.blurTexture2.value=s.m_renderTargetsVertical[1].texture,s.m_compositeMaterial.uniforms.blurTexture3.value=s.m_renderTargetsVertical[2].texture,s.m_compositeMaterial.uniforms.blurTexture4.value=s.m_renderTargetsVertical[3].texture,s.m_compositeMaterial.uniforms.blurTexture5.value=s.m_renderTargetsVertical[4].texture,s.m_compositeMaterial.uniforms.bloomStrength.value=r,s.m_compositeMaterial.uniforms.bloomRadius.value=.1,s.m_compositeMaterial.needsUpdate=!0;return s.m_compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],s.m_compositeMaterial.uniforms.bloomTintColors.value=s.m_bloomTintColors,s.m_copyUniforms=l.UniformsUtils.clone(u.CopyShader.uniforms),s.m_copyUniforms.opacity.value=1,s.m_materialCopy=new l.ShaderMaterial({uniforms:s.m_copyUniforms,vertexShader:u.CopyShader.vertexShader,fragmentShader:u.CopyShader.fragmentShader,blending:l.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),s}return a(n,[{key:"dispose",value:function(){var e,t=r(this.m_renderTargetsHorizontal);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(a){t.e(a)}finally{t.f()}var n,i=r(this.m_renderTargetsVertical);try{for(i.s();!(n=i.n()).done;){n.value.dispose()}}catch(a){i.e(a)}finally{i.f()}this.m_renderTargetBright.dispose()}},{key:"setSize",value:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.m_renderTargetBright.setSize(n,r);for(var i=0;i<this.m_nMips;i++)this.m_renderTargetsHorizontal[i].setSize(n,r),this.m_renderTargetsVertical[i].setSize(n,r),this.m_separableBlurMaterials[i].uniforms.texSize.value=new l.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)}},{key:"render",value:function(e,t,n,r,i){this.renderToScreen&&(this.m_quad.material=this.m_basic,this.m_basic.map=i.texture,e.setRenderTarget(null),e.clear(),e.render(this.m_scene,this.m_camera)),this.m_highPassUniforms.tDiffuse.value=i.texture,this.m_highPassUniforms.luminosityThreshold.value=this.threshold,this.m_quad.material=this.m_materialHighPassFilter,e.setRenderTarget(this.m_renderTargetBright),e.clear(),e.render(this.m_scene,this.m_camera);for(var a=this.m_renderTargetBright,o=0;o<this.m_nMips;o++)this.m_quad.material=this.m_separableBlurMaterials[o],this.m_separableBlurMaterials[o].uniforms.colorTexture.value=a.texture,this.m_separableBlurMaterials[o].uniforms.direction.value=d,e.setRenderTarget(this.m_renderTargetsHorizontal[o]),e.clear(),e.render(this.m_scene,this.m_camera),this.m_separableBlurMaterials[o].uniforms.colorTexture.value=this.m_renderTargetsHorizontal[o].texture,this.m_separableBlurMaterials[o].uniforms.direction.value=h,e.setRenderTarget(this.m_renderTargetsVertical[o]),e.clear(),e.render(this.m_scene,this.m_camera),a=this.m_renderTargetsVertical[o];this.m_quad.material=this.m_compositeMaterial,this.m_compositeMaterial.uniforms.bloomStrength.value=this.strength,this.m_compositeMaterial.uniforms.bloomRadius.value=this.radius,this.m_compositeMaterial.uniforms.bloomTintColors.value=this.m_bloomTintColors,e.setRenderTarget(this.m_renderTargetsHorizontal[0]),e.clear(),e.render(this.m_scene,this.m_camera),this.m_quad.material=this.m_materialCopy,this.m_copyUniforms.tDiffuse.value=this.m_renderTargetsHorizontal[0].texture,this.renderToScreen?(e.setRenderTarget(null),e.render(this.m_scene,this.m_camera)):(e.setRenderTarget(i),e.render(this.m_scene,this.m_camera))}},{key:"getSeperableBlurMaterial",value:function(e){return new l.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new l.Vector2(.5,.5)},direction:{value:new l.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }",fragmentShader:"#include <common>\n            varying vec2 vUv;\n            uniform sampler2D colorTexture;\n            uniform vec2 texSize;\n            uniform vec2 direction;\n\n            float gaussianPdf(in float x, in float sigma) {\n                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n            }\n            void main() {\n                vec2 invSize = 1.0 / texSize;\n                float fSigma = float(SIGMA);\n                float weightSum = gaussianPdf(0.0, fSigma);\n                vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n                for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n                    float x = float(i);\n                    float w = gaussianPdf(x, fSigma);\n                    vec2 uvOffset = direction * invSize * x;\n                    vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n                    vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n                    diffuseSum += (sample1 + sample2) * w;\n                    weightSum += 2.0 * w;\n                }\n                gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n            }"})}},{key:"getCompositeMaterial",value:function(e){return new l.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"varying vec2 vUv;\n                uniform sampler2D blurTexture1;\n                uniform sampler2D blurTexture2;\n                uniform sampler2D blurTexture3;\n                uniform sampler2D blurTexture4;\n                uniform sampler2D blurTexture5;\n                uniform sampler2D dirtTexture;\n                uniform float bloomStrength;\n                uniform float bloomRadius;\n                uniform float bloomFactors[NUM_MIPS];\n                uniform vec3 bloomTintColors[NUM_MIPS];\n\n                float lerpBloomFactor(const in float factor) {\n                    float mirrorFactor = 1.2 - factor;\n                    return mix(factor, mirrorFactor, bloomRadius);\n                }\n\n                void main() {\n                    gl_FragColor = bloomStrength * (\nlerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\nlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\nlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\nlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\nlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n                }"})}}]),n}(c.Pass);t.BloomPass=f},86550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSAASampling=t.MSAARenderPass=t.Pass=t.MapRenderingManager=void 0;var r=n(53801);Object.defineProperty(t,"MapRenderingManager",{enumerable:!0,get:function(){return r.MapRenderingManager}});var i=n(87585);Object.defineProperty(t,"Pass",{enumerable:!0,get:function(){return i.Pass}});var a=n(42773);Object.defineProperty(t,"MSAARenderPass",{enumerable:!0,get:function(){return a.MSAARenderPass}}),Object.defineProperty(t,"MSAASampling",{enumerable:!0,get:function(){return a.MSAASampling}})},8140:function(e,t,n){"use strict";var r=n(63038).default,i=n(87757),a=n(43269).default,o=n(48926).default,s=n(34575).default,u=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightCoverageProvider=void 0;var l=n(15739),c=n(15950),d=function(){function e(){s(this,e),this.logger=l.LoggerManager.instance.create("CopyrightCoverageProvider")}return u(e,[{key:"getTree",value:function(){var e=this;return void 0!==this.m_cachedTreePromise||(this.m_cachedTreePromise=this.getCopyrightCoverageData().then((function(t){return e.initRBush(t)})).catch((function(t){return e.logger.error(t),new c}))),this.m_cachedTreePromise}},{key:"getCopyrights",value:function(){var e=o(i.mark((function e(t,n){var r,o,s,u,c,d;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTree();case 2:r=e.sent,o=[],s=r.search({minX:t.west,minY:t.south,maxX:t.east,maxY:t.north}),u=a(s);try{for(d=function(){var e=c.value,t=l.getOptionValue(e.minLevel,0),r=l.getOptionValue(e.maxLevel,1/0);n>=t&&n<=r&&void 0===o.find((function(t){return t.id===e.label}))&&o.push({id:e.label})},u.s();!(c=u.n()).done;)d()}catch(i){u.e(i)}finally{u.f()}return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initRBush",value:function(e){var t=new c;if(!e)return this.logger.warn("No copyright coverage data provided"),t;var n,i=a(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.minLevel,u=o.maxLevel,l=o.label,d=o.alt;if(o.boxes){var h,f=a(o.boxes);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=r(p,4),v=m[0],g=m[1],y=m[2],x=m[3];t.insert({minX:g,minY:v,maxX:x,maxY:y,minLevel:s,maxLevel:u,label:l,alt:d})}}catch(_){f.e(_)}finally{f.f()}}else t.insert({minX:-180,minY:-90,maxX:180,maxY:180,minLevel:s,maxLevel:u,label:l,alt:d})}}catch(_){i.e(_)}finally{i.f()}return t}}]),e}();t.CopyrightCoverageProvider=d},56951:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightElementHandler=void 0;var o=n(15739),s=n(65312),u=n(52210),l=function(){function e(t,n){var a=this;if(i(this,e),this.m_defaults=new Map,this.m_mapViews=[],this.update=function(){var e,t=a.m_mapViews.map((function(e){return e.copyrightInfo})).reduce(u.CopyrightInfo.mergeArrays,null!==(e=a.staticInfo)&&void 0!==e?e:[]);if(0!==t.length){if(a.m_element.style.display="block",0!==a.m_defaults.size){var n,i=r(t);try{for(i.s();!(n=i.n()).done;){var s=n.value,l=a.m_defaults.get(s.id);void 0!==l&&(s.year=o.getOptionValue(s.year,l.year),s.label=o.getOptionValue(s.label,l.label),s.link=o.getOptionValue(s.link,l.link))}}catch(d){i.e(d)}finally{i.f()}}var c=u.CopyrightInfo.mergeArrays(t);a.m_element.innerHTML=u.CopyrightInfo.formatAsHtml(c)}else a.m_element.style.display="none"},"string"===typeof t){var s=document.getElementById(t);if(!s)throw new Error("CopyrightElementHandler: unable to find DOM element #".concat(t));this.m_element=s}else this.m_element=t;void 0!==n&&this.attach(n)}return a(e,[{key:"destroy",value:function(){var e,t=r(this.m_mapViews);try{for(t.s();!(e=t.n()).done;){e.value.removeEventListener(s.MapViewEventNames.CopyrightChanged,this.update)}}catch(n){t.e(n)}finally{t.f()}}},{key:"attach",value:function(e){return this.m_mapViews.push(e),e.addEventListener(s.MapViewEventNames.CopyrightChanged,this.update),this.update(),this}},{key:"detach",value:function(e){return e.removeEventListener(s.MapViewEventNames.CopyrightChanged,this.update),this.m_mapViews=this.m_mapViews.filter((function(t){return t!==e})),this.update(),this}},{key:"setDefaults",value:function(e){if(this.m_defaults.clear(),void 0!==e){var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.m_defaults.set(i.id,i)}}catch(a){n.e(a)}finally{n.f()}}return this}},{key:"setStaticCopyightInfo",value:function(e){return this.staticInfo=e,this}}],[{key:"install",value:function(t,n){return new e(t,n)}}]),e}();t.CopyrightElementHandler=l},52210:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightInfo=void 0;var i=n(15739);!function(e){e.mergeArrays=function(e,t){for(var n=[],a=0,o=[e,t];a<o.length;a++){var s=o[a];if(void 0!==s){var u,l=r(s);try{var c=function(){var e=u.value,t=n.find((function(t){return t.id===e.id||void 0!==t.label&&t.label===e.label}));void 0===t?n.push(Object.assign({},e)):(t.year=i.MathUtils.max2(e.year,t.year),t.label=i.getOptionValue(e.label,t.label),t.link=i.getOptionValue(e.link,t.link))};for(l.s();!(u=l.n()).done;)c()}catch(d){l.e(d)}finally{l.f()}}}return n},e.formatAsHtml=function(e){if(0===e.length)return"";var t=e.filter((function(e){return""!==e.label}));return 0===t.length?"":"\xa9 "+t.map((function(e){var t,n=null!==(t=e.label)&&void 0!==t?t:e.id,r=void 0!==e.year?"".concat(e.year," ").concat(n):n,i=e.link;return i?'<a href="'.concat(i,'" target="_blank" rel="noreferrer noopener">').concat(r,"</a>"):"".concat(r)})).join(", ")}}(t.CopyrightInfo||(t.CopyrightInfo={}))},34495:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53509:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UrlCopyrightProvider=void 0;var s=n(99383),u=function(e){a(n,e);var t=o(n);function n(e,i,a){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TransferManager.instance();return r(this,n),(o=t.call(this)).m_fetchURL=e,o.m_baseScheme=i,o.m_requestHeaders=a,o.m_transferManager=u,o}return i(n,[{key:"setRequestHeaders",value:function(e){this.m_requestHeaders=e}},{key:"getCopyrightCoverageData",value:function(e){var t=this;return void 0!==this.m_cachedCopyrightResponse||(this.m_cachedCopyrightResponse=this.m_transferManager.downloadJson(this.m_fetchURL,{headers:this.m_requestHeaders,signal:e}).then((function(e){return e[t.m_baseScheme]})).catch((function(e){return t.logger.error(e),[]}))),this.m_cachedCopyrightResponse}}]),n}(n(8140).CopyrightCoverageProvider);t.UrlCopyrightProvider=u},23350:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.addGroundPlane=void 0;var i=n(26309),a=n(44317),o=n(80684),s=n(31201),u=n(85164),l=n(34585),c=n(46273),d=n(76904),h=n(48052),f=new l.Vector3;function p(e,t,n,i,h,f){var p=e.dataSource,v=e.projection,g=p.getTilingScheme().projection,y=v.type===s.ProjectionType.Spherical,x=!y,_="number"===typeof i?function(e,t,n,r){return t?new u.MapMeshStandardMaterial({color:e,visible:!0,depthWrite:n,removeDiffuseLight:!0,opacity:r}):new u.MapMeshBasicMaterial({color:e,visible:!0,depthWrite:n,opacity:r})}(new l.Color(i),n,v.type===s.ProjectionType.Spherical,f):i,b=function(e,t,n,i){var a=e.dataSource,o=e.projection,s=a.getTilingScheme().projection,u=new l.Vector3,c=new l.BufferGeometry,h=d.projectTilePlaneCorners(e,s),f=[h.sw,h.se,h.nw,h.ne];if(t){var p,m=r(f);try{for(m.s();!(p=m.n()).done;){var v=p.value;o.reprojectPoint(s,v,v).sub(e.center)}}catch(b){m.e(b)}finally{m.f()}}var g=t?new Float32Array(12):new Float64Array(12),y=new l.BufferAttribute(g,3).copyVector3sArray(f);if(c.setAttribute("position",y),i){s.surfaceNormal(h.sw,u).negate();var x=new l.BufferAttribute(new Float32Array(12),3).copyVector3sArray(Array(4).fill(u));c.setAttribute("normal",x)}if(c.setIndex(new l.BufferAttribute(new Uint16Array([0,1,2,2,1,3]),1)),n){var _=new l.BufferAttribute(new Float32Array([0,0,1,0,0,1,1,1]),2);c.setAttribute("uv",_)}return c}(e,x,t,n);if(!y)return new l.Mesh(b,_);var w=[],S=new o.SphericalGeometrySubdivisionModifier(l.MathUtils.degToRad(10),g);if(!h)return S.modify(b),m(b,g,e),new l.Mesh(b,_);for(var M=0;M<4;++M){var E=Math.pow(2,M),T=b.clone();if(E>1)new a.EdgeLengthGeometrySubdivisionModifier(E,e.geoBox,a.SubdivisionMode.All,g).modify(T);S.modify(T),m(T,g,e),w.push(T)}return new c.LodMesh(w,_)}function m(e,t,n){for(var r=e.getAttribute("position"),i=r.array,a=new Float32Array(i.length),o=0;o<r.array.length;o+=1)f.fromBufferAttribute(r,o),n.projection.reprojectPoint(t,f,f).sub(n.center),f.toArray(a,3*o);r.array=a,r.needsUpdate=!0}t.addGroundPlane=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.mapView.clearColor,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.mapView.shadowsEnabled,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:!1!==e.mapView.enableMixedLod,u=p(e,a,o,n,s,r);return u.receiveShadow=o,u.renderOrder=t,h.registerTileObject(e,u,i.GeometryKind.Background,{pickability:i.Pickability.transient}),e.objects.push(u),u}},87270:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DisplacedBufferAttribute=void 0;var s=n(15739),u=n(34585),l=n(91400),c=function(e){a(n,e);var t=o(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e.array,e.itemSize,e.normalized)).originalAttribute=e,s.m_normals=i,s.m_uvs=a,s.m_textureWidth=0,s.m_textureHeight=0,s.m_cache=new l.VertexCache(n.MAX_CACHE_SIZE),s.m_lastPos=new u.Vector3,s.m_tmpNormal=new u.Vector3,s.resetTexture(o),s}return i(n,[{key:"reset",value:function(e,t,n,r){this.array=e.array,this.itemSize=e.itemSize,this.count=this.array.length/this.itemSize,this.normalized=e.normalized,this.originalAttribute=e,this.m_normals=t,this.m_uvs=n,this.m_cache.clear(),this.m_lastBufferIndex=void 0,this.resetTexture(r)}},{key:"getX",value:function(e){return this.getDisplacedCoordinate(e).x}},{key:"getY",value:function(e){return this.getDisplacedCoordinate(e).y}},{key:"getZ",value:function(e){return this.getDisplacedCoordinate(e).z}},{key:"resetTexture",value:function(e){this.m_texture=new Float32Array(e.image.data.buffer),this.m_textureWidth=e.image.width,this.m_textureHeight=e.image.height}},{key:"getDisplacedCoordinate",value:function(e){return e===this.m_lastBufferIndex?this.m_lastPos:(this.m_lastBufferIndex=e,this.m_cache.get(e,this.m_lastPos)||(this.displacePosition(e),this.m_cache.set(e,this.m_lastPos)),this.m_lastPos)}},{key:"displacePosition",value:function(e){this.m_lastPos.fromBufferAttribute(this.originalAttribute,e);var t=this.m_normals;this.m_tmpNormal.fromBufferAttribute(t,e);var n=this.m_uvs,r=u.MathUtils.clamp(n.getX(e),0,1),i=u.MathUtils.clamp(n.getY(e),0,1),a=s.sampleBilinear(this.m_texture,this.m_textureWidth,this.m_textureHeight,r,i);this.m_lastPos.add(this.m_tmpNormal.multiplyScalar(a))}}]),n}(u.BufferAttribute);t.DisplacedBufferAttribute=c,c.MAX_CACHE_SIZE=6},16178:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DisplacedBufferGeometry=t.displaceBox=void 0;var s=n(34585),u=n(87270),l=new s.Vector3,c=new s.Vector3,d=new s.Box3;function h(e,t,n){d.copy(e);var r=l.copy(n),i=c.copy(r);return e.translate(r.multiplyScalar(t.min)).union(d.translate(i.multiplyScalar(t.max))),e}t.displaceBox=h;var f=function(e){a(n,e);var t=o(n);function n(e,i,a,o){var l;return r(this,n),(l=t.call(this)).originalGeometry=e,l.displacementRange=a,l.m_originalBoundingBox=new s.Box3,l.m_displacedPositions=o||new u.DisplacedBufferAttribute(e.attributes.position,e.attributes.normal,e.attributes.uv,i),l.resetAttributes(),l}return i(n,[{key:"reset",value:function(e,t,n){this.originalGeometry=e;var r=e.attributes.position,i=e.attributes.normal,a=e.attributes.uv;this.m_displacedPositions.reset(r,i,a,t);var o=this.displacementRange.min!==n.min||this.displacementRange.max!==n.max;this.displacementRange=n,this.resetAttributes(),this.resetBoundingVolumes(o)}},{key:"computeBoundingBox",value:function(){null===this.originalGeometry.boundingBox&&this.originalGeometry.computeBoundingBox();var e=this.m_originalBoundingBox.copy(this.originalGeometry.boundingBox);null===this.boundingBox?this.boundingBox=e.clone():this.boundingBox.copy(e),h(this.boundingBox,this.displacementRange,l.fromBufferAttribute(this.attributes.normal,0))}},{key:"computeBoundingSphere",value:function(){null===this.boundingBox&&this.computeBoundingBox(),null===this.boundingSphere&&(this.boundingSphere=new s.Sphere),this.boundingBox.getBoundingSphere(this.boundingSphere)}},{key:"needsBoundingBoxUpdate",value:function(e){return e||null!==this.boundingBox&&(!this.originalGeometry.boundingBox||!this.m_originalBoundingBox.equals(this.originalGeometry.boundingBox))}},{key:"resetBoundingVolumes",value:function(e){this.needsBoundingBoxUpdate(e)&&(this.computeBoundingBox(),this.boundingSphere&&this.computeBoundingSphere())}},{key:"resetAttributes",value:function(){this.index=this.originalGeometry.index,this.groups=this.originalGeometry.groups,this.drawRange=this.originalGeometry.drawRange,this.attributes=Object.assign({},this.originalGeometry.attributes),this.attributes.position=this.m_displacedPositions}}]),n}(s.BufferGeometry);t.DisplacedBufferGeometry=f},73224:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2911).default,o=n(16525).default,s=n(29754).default,u=n(2205).default,l=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DisplacedMesh=void 0;var c=n(85164),d=n(15739),h=n(34585),f=n(87270),p=n(16178);var m=function(e){u(n,e);var t=l(n);function n(e,i,a,o){var s;return r(this,n),(s=t.call(this,e,i)).m_getDisplacementRange=a,s.m_raycastStrategy=o,s}return i(n,[{key:"raycast",value:function(e,t){var r=this.firstMaterial;if(function(e){var t=c.hasDisplacementFeature(e);return d.assert(t,"Material does not support displacement maps."),t}(r)&&function(e){if(!e)return!1;var t=e instanceof h.DataTexture;return d.assert(t,"Material does not support displacement maps."),t}(r.displacementMap)){var i=r.displacementMap,u=Object.assign({},this.m_getDisplacementRange());d.assert(this.geometry instanceof h.BufferGeometry,"Unsupported geometry type.");var l=this.geometry;this.displacedGeometry?this.displacedGeometry.reset(l,i,u):this.displacedGeometry=new p.DisplacedBufferGeometry(l,i,u,n.getDisplacedPositionAttribute(l,i)),this.geometry=this.displacedGeometry,this.m_raycastStrategy?this.m_raycastStrategy(this,e,t):o(s(n.prototype),"raycast",this).call(this,e,t),a(s(n.prototype),"geometry",this.displacedGeometry.originalGeometry,this,!0)}else o(s(n.prototype),"raycast",this).call(this,e,t)}},{key:"firstMaterial",get:function(){return Array.isArray(this.material)?this.material[0]:this.material}}],[{key:"getDisplacedPositionAttribute",value:function(e,t){return n.displacedPositions?n.displacedPositions.reset(e.attributes.position,e.attributes.normal,e.attributes.uv,t):n.displacedPositions=new f.DisplacedBufferAttribute(e.attributes.position,e.attributes.normal,e.attributes.uv,t),n.displacedPositions}}]),n}(h.Mesh);t.DisplacedMesh=m},46273:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default,o=n(2205).default,s=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LodMesh=void 0;var u=n(34585),l=function(e){o(n,e);var t=s(n);function n(e,r){var a;return i(this,n),(a=t.call(this,void 0,r)).geometries=e,a}return a(n,[{key:"geometries",get:function(){return this.m_geometries},set:function(e){this.m_geometries!==e&&this.disposeGeometries(),this.m_geometries=e,this.geometries&&this.m_geometries.length>0&&(this.geometry=this.m_geometries[0])}},{key:"setLevelOfDetail",value:function(e){this.m_geometries&&0!==this.m_geometries.length&&(e=u.MathUtils.clamp(e,0,this.m_geometries.length-1),this.geometry=this.m_geometries[e])}},{key:"disposeGeometries",value:function(){if(this.m_geometries){var e,t=r(this.m_geometries);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}}this.geometry.dispose()}}]),n}(u.Mesh);t.LodMesh=l},52719:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Object3DUtils=void 0;var i=n(85164),a=n(15739),o=n(34585),s=n(67247),u=a.LoggerManager.instance.create("Object3DUtils");!function(e){function t(e,t,n){if(null!==e&&void 0!==e&&void 0!==e.image&&null!==e.image&&(void 0===e.uuid||!0!==n.get(e.uuid))){n.set(e.uuid,!0);var r=e.image,i=4*r.width*r.height;t.heapSize+=i,t.gpuSize+=i}}function n(e,n,r){if(void 0===e.uuid||!0!==r.get(e.uuid))if(r.set(e.uuid,!0),e instanceof o.RawShaderMaterial||e instanceof o.ShaderMaterial){var a=e;for(var s in a.uniforms)if(void 0!==a.uniforms[s]){var l=a.uniforms[s];l instanceof o.Texture&&t(l,n,r)}}else if(e instanceof o.MeshBasicMaterial||e instanceof i.MapMeshBasicMaterial){var c=e;t(c.map,n,r),t(c.aoMap,n,r),t(c.specularMap,n,r),t(c.alphaMap,n,r),t(c.envMap,n,r)}else if(e instanceof i.MapMeshStandardMaterial){var d=e;t(d.map,n,r),t(d.lightMap,n,r),t(d.aoMap,n,r),t(d.emissiveMap,n,r),t(d.bumpMap,n,r),t(d.normalMap,n,r),t(d.displacementMap,n,r),t(d.roughnessMap,n,r),t(d.metalnessMap,n,r),t(d.alphaMap,n,r),t(d.envMap,n,r)}else e instanceof o.LineBasicMaterial||e instanceof o.LineDashedMaterial||e instanceof o.PointsMaterial||u.warn("estimateMeshSize: unidentified material: ",e)}function a(e,t,n,r){if(void 0===e.uuid&&(e.uuid=o.MathUtils.generateUUID()),!0!==r.get(e.uuid)){r.set(e.uuid,!0);var i=0,a=4;void 0!==e.array.BYTES_PER_ELEMENT&&(a=e.array.BYTES_PER_ELEMENT),e instanceof o.InterleavedBufferAttribute||e instanceof o.BufferAttribute?i=a*e.count*e.itemSize:u.warn("estimateMeshSize: unidentified attribute: ",t),n.heapSize+=i+56,n.gpuSize+=i}}function l(e,t,n){if((void 0===e.uuid||!0!==n.get(e.uuid))&&(n.set(e.uuid,!0),void 0!==e)){var r=e.attributes;if(void 0!==r){for(var i in r)void 0!==r[i]&&a(r[i],i,t,n);null!==e.index&&a(e.index,"index",t,n)}else u.warn("estimateGeometrySize: unidentified geometry: ",e)}}e.estimateSize=function e(t,i,a){var c=void 0!==i?i:{heapSize:0,gpuSize:0};if(void 0===a&&(a=new Map),function(e,t,i){if(e.isObject3D&&!(e instanceof o.Scene)&&(void 0===e.uuid||!0!==i.get(e.uuid)))if(i.set(e.uuid,!0),e.isMesh||e.isLine||e.isPoints){var a=1e3,c=e;if(void 0!==c.material)if(Array.isArray(c.material)){var d,h=c.material,f=r(h);try{for(f.s();!(d=f.n()).done;)n(d.value,t,i)}catch(g){f.e(g)}finally{f.f()}}else n(c.material,t,i);if(void 0!==c.geometries){var p,m=r(c.geometries);try{for(m.s();!(p=m.n()).done;)l(p.value,t,i)}catch(g){m.e(g)}finally{m.f()}}else void 0!==c.geometry&&l(c.geometry,t,i);var v=void 0!==e.userData?e.userData.feature:void 0;void 0!==v&&(a+=s.getFeatureDataSize(v)),t.heapSize+=a,t.gpuSize+=0}else u.warn("estimateMeshSize: unidentified object",e)}(t,c,a),t.children.length>0){var d,h=r(t.children);try{for(h.s();!(d=h.n()).done;){e(d.value,c,a)}}catch(f){h.e(f)}finally{h.f()}}return c}}(t.Object3DUtils||(t.Object3DUtils={}))},76904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectTilePlaneCorners=void 0;var r=n(31201),i=n(34585);t.projectTilePlaneCorners=function(e,t){var n=e.geoBox,a=n.east,o=n.west,s=n.north,u=n.south;return{sw:t.projectPoint(new r.GeoCoordinates(u,o),new i.Vector3),se:t.projectPoint(new r.GeoCoordinates(u,a),new i.Vector3),nw:t.projectPoint(new r.GeoCoordinates(s,o),new i.Vector3),ne:t.projectPoint(new r.GeoCoordinates(s,a),new i.Vector3)}}},48052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTileObject=void 0;var r=n(87213);t.registerTileObject=function(e,t,n,i){var a=n instanceof Set?Array.from(n.values()):Array.isArray(n)?n:[n];r.MapObjectAdapter.create(t,Object.assign({dataSource:e.dataSource,kind:a,level:e.tileKey.level},i)),void 0===t.userData&&(t.userData={});var o=t.userData;o.tileKey=e.tileKey,o.dataSource=e.dataSource.name,o.kind=a,e.resetVisibilityCounter()}},58598:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default,o=n(2205).default,s=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SolidLineMesh=void 0;var u=n(31201),l=n(85164),c=n(15739),d=n(34585),h=n(16178),f=new d.Sphere,p=new d.Matrix4,m=new d.Ray,v=new d.Line3,g=new d.Box3,y=new u.OrientedBox3,x=new d.Plane,_=new d.Vector3,b=new d.Vector3,w=new d.Vector3,S=new d.Vector3;function M(e,t,n){var r;e instanceof h.DisplacedBufferGeometry&&(r=e.displacementRange,e=e.originalGeometry);for(var i=e.attributes.position,a=e.index.array,o=new d.Sphere,s=g.makeEmpty(),u=_,l=t;l<n;l+=6)s.expandByPoint(u.fromBufferAttribute(i,a[l])),s.expandByPoint(u.fromBufferAttribute(i,a[l+2]));if(r){var c=b;return c.fromBufferAttribute(e.attributes.normal,0),h.displaceBox(s,r,c).getBoundingSphere(o)}return s.getBoundingSphere(o)}function E(e,t,n,r,i,a,o,s){if(o.equals(e.origin)&&0===e.direction.dot(a.normal)){var u=function(e,t,n,r,i){var a,o=y;return t.getCenter(o.position),t.delta(o.xAxis).normalize(),o.yAxis.copy(n),o.zAxis.copy(r),o.extents.set(t.distance()/2,i,i),o.contains(e.origin)?0:null!==(a=o.intersectsRay(e))&&void 0!==a?a:1/0}(e,t,n,a.normal,r),l=function(e,t,n){var r=new d.Sphere(t.start,n),i=r.containsPoint(e.origin)?0:e.intersectSphere(r,S)?S.sub(e.origin).length():1/0;r.center.copy(t.end);var a=r.containsPoint(e.origin)?0:e.intersectSphere(r,S)?S.sub(e.origin).length():1/0;return Math.min(i,a)}(e,t,r),c=Math.min(u,l);return c!==1/0&&(e.at(c,s),!0)}return!(o.distanceToSquared(t.closestPointToPoint(o,!0,S))>i)&&(s.copy(o),!0)}function T(e,t,n,r,i,a,o,s,u,l){var c=_,d=x,h=b,p=v,m=e.geometry,g=m.attributes,y=g.position,S=g.bitangent,M=m.index.array;if(f.copy(u),f.applyMatrix4(e.matrixWorld),f.radius+=r,t.ray.intersectsSphere(f))for(var T=o;T<s;T+=6){var k=M[T],C=M[T+2];if(p.start.fromBufferAttribute(y,k),p.end.fromBufferAttribute(y,C),c.set(S.getX(k),S.getY(k),S.getZ(k)).normalize(),d.setFromCoplanarPoints(p.start,w.copy(p.start).add(c),p.end),0!==d.normal.manhattanLength()&&n.intersectPlane(d,h)){var A=w;if(E(n,p,c,i,a,d,h,A)){var P=A.applyMatrix4(e.matrixWorld),O=t.ray.origin.distanceTo(P);O<t.near||O>t.far||l.push({distance:O,point:P.clone(),index:T,object:e})}}}}var k=[0],C=.01;function A(e,t,n,r,i,a,o){var s,u=e.userData.feature.boundingVolumes;c.assert(e.geometry instanceof d.BufferGeometry,"Unsupported geometry type.");var h=e.geometry;c.assert(function(e){return Array.isArray(e)?e.every((function(e){return e instanceof l.SolidLineMaterial})):e instanceof l.SolidLineMaterial}(t),"Unsupported material type");var f=t,p=(f.lineWidth+f.outlineWidth)/2;c.assert(Math.abs(1-e.scale.x/e.scale.y)<C),c.assert(Math.abs(1-e.scale.x/e.scale.z)<C),c.assert(Math.abs(1-e.scale.y/e.scale.z)<C);for(var m=p/((e.scale.x+e.scale.y+e.scale.z)/3),v=m*m,g=null!==(s=e.userData.feature.starts)&&void 0!==s?s:k,y=i,x=g[y],_=g.length-1;x<a;){var b=y,w=y<_?g[++y]:a;b>=u.length&&u.push(M(h,x,w)),T(e,n,r,p,m,v,x,w,u[b],o),x=w}return y}var P=function(e){o(n,e);var t=s(n);function n(e,r){return i(this,n),t.call(this,e,r)}return a(n,[{key:"raycast",value:function(e,t){n.raycast(this,e,t)}}],[{key:"raycast",value:function(e,t,n){c.assert(e.geometry instanceof d.BufferGeometry,"Unsupported geometry type");var i=e.geometry;c.assert(null!==i.index,"Geometry does not have indices");var a=e.matrixWorld;p.copy(a).invert();var o=m.copy(t.ray).applyMatrix4(p);void 0===e.userData.feature&&(e.userData.feature={});var s=i.attributes.position,u=e.userData.feature.attributeInfo;(void 0===u||void 0===e.userData.feature.boundingVolumes||function(e,t){var n=!0===e.isBufferAttribute?e:e.data;return void 0===t||t.data!==n||e.isBufferAttribute&&t.version!==n.version}(s,u))&&(e.userData.feature.boundingVolumes=[],e.userData.feature.attributeInfo=function(e){var t=!0===e.isBufferAttribute?e:e.data;return{data:t,version:t.version}}(s));var l=i.index.array;if(Array.isArray(e.material)){var h,f=0,v=r(i.groups);try{for(v.s();!(h=v.n()).done;){var g=h.value;f=A(e,e.material[g.materialIndex],t,o,f,g.start+g.count,n)}}catch(y){v.e(y)}finally{v.f()}}else A(e,e.material,t,o,0,l.length,n)}}]),n}(d.Mesh);t.SolidLineMesh=P},56300:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileDataAccessor=void 0;var o=n(26309),s=n(15739),u=n(27555),l=s.LoggerManager.instance.create("TileDataAccessor"),c=function(){function e(t,n,r){i(this,e),this.tile=t,this.visitor=n;var a=!0===r.wantsAll;this.m_wantsPoints=a||!(!1===r.wantsPoints),this.m_wantsLines=a||!(!1===r.wantsLines),this.m_wantsAreas=a||!(!1===r.wantsAreas),this.m_wantsObject3D=a||!(!1===r.wantsObject3D)}return a(e,[{key:"visitAll",value:function(){var e,t=this.tile.objects,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.visitObject(i)}}catch(a){n.e(a)}finally{n.f()}}},{key:"visitObject",value:function(e){var t=void 0!==e.userData?e.userData.feature:void 0;if(void 0!==t&&(void 0===t.objInfos||1!==t.objInfos.length||this.visitor.wantsFeature(o.getFeatureId(t.objInfos[0])))){var n=t.geometryType;if(void 0!==n){switch(s.assert(void 0!==t.objInfos,"featureData.ids missing"),s.assert(void 0!==t.starts,"featureData.starts missing"),s.assert(Array.isArray(t.starts),"featureData.starts is not an array"),void 0!==t.objInfos&&void 0!==t.starts&&s.assert(t.objInfos.length===t.starts.length,"featureData.ids and featureData.starts have unequal length"),n){case o.GeometryType.Point:case o.GeometryType.Text:if(!this.m_wantsPoints)return;break;case o.GeometryType.SolidLine:case o.GeometryType.ExtrudedLine:case o.GeometryType.TextPath:if(!this.m_wantsLines)return;break;case o.GeometryType.Polygon:case o.GeometryType.ExtrudedPolygon:if(!this.m_wantsAreas)return;break;case o.GeometryType.Object3D:if(!this.m_wantsObject3D)return;break;default:l.warn("#visitObject: invalid geometryType")}if("Mesh"===e.type){var r=e;this.visitMesh(r,t)}else l.warn("#visitObject: visiting object failed, not of type 'Mesh'",e)}else l.warn("#visitObject: visiting object failed, no geometryType",e)}}},{key:"getBufferGeometry",value:function(e){var t=e.geometry;if("BufferGeometry"===t.type){var n=t;if(n.getAttribute("position"))return n;l.warn("#visitLines: BufferGeometry has no position attribute")}else l.warn("#visitObject: object does not have BufferGeometry")}},{key:"getGeometryAccessor",value:function(e,t,n){switch(e){case o.GeometryType.Point:case o.GeometryType.Text:return;case o.GeometryType.SolidLine:case o.GeometryType.ExtrudedLine:case o.GeometryType.TextPath:return new u.BufferedGeometryLineAccessor(t,e,n);case o.GeometryType.Polygon:case o.GeometryType.ExtrudedPolygon:return;case o.GeometryType.Object3D:return new u.BufferedGeometryObject3dAccessor(t,e,n);default:l.warn("#getGeometryAccessor: invalid geometryType")}}},{key:"getIndexedGeometryAccessor",value:function(e,t,n){switch(e){case o.GeometryType.Point:case o.GeometryType.Text:return;case o.GeometryType.SolidLine:case o.GeometryType.ExtrudedLine:case o.GeometryType.TextPath:return new u.IndexedBufferedGeometryLineAccessor(t,e,n);case o.GeometryType.Polygon:case o.GeometryType.ExtrudedPolygon:case o.GeometryType.Object3D:return;default:l.warn("#getIndexedGeometryAccessor: invalid geometryType")}}},{key:"visitMesh",value:function(e,t){var n=t.objInfos,r=t.starts,i=t.geometryType;if(void 0!==n&&void 0!==r&&void 0!==i)for(var a,c=0;c<n.length;c++){var d=o.getFeatureId(n[c]);if(this.visitor.wantsFeature(d)){var h,f=r[c];if(void 0===a){var p=this.getBufferGeometry(e);if(void 0===p)continue;if(void 0===(a=null!==p.index?this.getIndexedGeometryAccessor(i,e,p):this.getGeometryAccessor(i,e,p))){l.warn("#visitObject: no accessor geometryType",i);continue}}switch(h=c<r.length-1?r[c+1]:a.getCount(),a.setRange(f,h),i){case o.GeometryType.Point:case o.GeometryType.Text:this.visitor.visitPoint(d);break;case o.GeometryType.SolidLine:case o.GeometryType.ExtrudedLine:case o.GeometryType.TextPath:s.assert(u.isLineAccessor(a)),this.visitor.visitLine(d,a);break;case o.GeometryType.Polygon:case o.GeometryType.ExtrudedPolygon:this.visitor.visitArea(d);break;case o.GeometryType.Object3D:s.assert(u.isObject3dAccessor(a)),this.visitor.visitObject3D(d,a);break;default:l.warn("#visitObject: invalid geometryType")}}}}}]),e}();t.TileDataAccessor=c},27555:function(e,t,n){"use strict";var r=n(16525).default,i=n(29754).default,a=n(2205).default,o=n(99842).default,s=n(43269).default,u=n(34575).default,l=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedBufferedGeometryLineAccessor=t.IndexedBufferedGeometryAccessor=t.BufferedGeometryObject3dAccessor=t.BufferedGeometryLineAccessor=t.BufferedGeometryAccessor=t.BufferedGeometryAccessorBase=t.isObject3dAccessor=t.isLineAccessor=void 0;var c=n(26309),d=n(63266),h=n(15739),f=h.LoggerManager.instance.create("TileGeometry");t.isLineAccessor=function(e){return"function"===typeof e.isLineAccessor&&!0===e.isLineAccessor()},t.isObject3dAccessor=function(e){return"function"===typeof e.isObject3dAccessor&&!0===e.isObject3dAccessor()};var p=function(){function e(t,n,r){u(this,e),this.object=t,this.geometryType=n,this.bufferGeometry=r,this.start=-1,this.end=-1,this.startCapSize=0,this.endCapSize=0,h.assert(!!t),"BufferGeometry"!==r.type&&f.error("IndexedBufferedGeometryAccessor#constructor: BufferGeometry has wrong type"),h.assert("BufferGeometry"===r.type,"IndexedBufferedGeometryAccessor#constructor: BufferGeometry has wrong type"),this.position=this.bufferGeometry.getAttribute("position"),this.itemSize=this.position.itemSize,this.position||f.warn("BufferedGeometryAccessor#constructor: BufferGeometry has no position attribute"),this.position.array.constructor!==Float32Array&&f.warn("BufferedGeometryAccessor#constructor: BufferGeometry.position: unsupported ArrayBuffer")}return l(e,[{key:"getCount",value:function(){return this.position.count}},{key:"renderOrder",get:function(){return this.object.renderOrder}},{key:"setRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h.assert(e>=0),h.assert(t>=0),h.assert(e<=t),this.start=e,this.end=t,this.startCapSize=n,this.endCapSize=r}},{key:"color",get:function(){var e=function(e){var t=e;if("MeshBasicMaterial"===t.type||"MeshStandardMaterial"===t.type)return t.color;if("RawShaderMaterial"===t.type){var n=e;if("SolidLineMaterial"===n.name)return n.uniforms.diffuse.value;f.warn("BufferedGeometryAccessor#color: unknown shader material name",n.name)}else f.warn("BufferedGeometryAccessor#color: unknown material type",t.type)};if(Array.isArray(this.object.material)){var t,n=new Array,r=this.object.material,i=s(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(e(a))}}catch(o){i.e(o)}finally{i.f()}return n}return e(this.object.material)}}]),e}();t.BufferedGeometryAccessorBase=p;var m=function(e){a(n,e);var t=o(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this,e,r,i)).object=e,o.geometryType=r,o.bufferGeometry=i,o.stride=a,o}return l(n,[{key:"clear",value:function(){h.assert(this.checkSetUp(),"BufferedGeometryAccessor not setup");for(var e=this.position.array,t=this.start*this.itemSize,n=this.end*this.itemSize,r=t;r<n;r++)e[r]=0;this.position.needsUpdate=!0}},{key:"getVertices",value:function(){h.assert(this.checkSetUp(),"BufferedGeometryAccessor not setup");var e=this.start,t=this.end;return this.position.array.subarray(e*this.itemSize,t*this.itemSize)}},{key:"checkSetUp",value:function(){return void 0!==this.position&&void 0!==this.start&&void 0!==this.end&&this.start>=0&&this.end<=this.position.count&&this.start<=this.end}}]),n}(p);t.BufferedGeometryAccessor=m;var v=function(e){a(n,e);var t=o(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,i,3)).object=e,a.geometryType=r,a.bufferGeometry=i,a}return l(n,[{key:"isLineAccessor",value:function(){return!0}},{key:"width",get:function(){h.assert(this.checkSetUp(),"RoBufferedGeometryLineAccessor not setup")}}]),n}(m);t.BufferedGeometryLineAccessor=v;var g=function(e){a(n,e);var t=o(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,i,1)).object=e,a.geometryType=r,a.bufferGeometry=i,a}return l(n,[{key:"isObject3dAccessor",value:function(){return!0}},{key:"getVertices",value:function(){return r(i(n.prototype),"getVertices",this).call(this)}}]),n}(m);t.BufferedGeometryObject3dAccessor=g;var y=function(e){a(n,e);var t=o(n);function n(e,r,i,a,o){var s;return u(this,n),(s=t.call(this,e,r,i)).object=e,s.geometryType=r,s.bufferGeometry=i,s.indices=null!==s.bufferGeometry.index?s.bufferGeometry.index.array:void 0,s.indices?s.indices instanceof Uint32Array||(f.warn("IndexedBufferedGeometryAccessor#constructor: BufferGeometry index has wrong type"),h.assert(s.indices instanceof Uint32Array)):(f.warn("IndexedBufferedGeometryAccessor#constructor: BufferGeometry has no index"),h.assert(!!s.indices)),s}return l(n,[{key:"getCount",value:function(){return this.indices.length}},{key:"checkSetUp",value:function(){return!!this.indices&&void 0!==this.start&&void 0!==this.end&&this.start>=0&&this.end<=this.indices.length&&this.start<=this.end}}]),n}(p);t.IndexedBufferedGeometryAccessor=y;var x=function(e){a(n,e);var t=o(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,i,3)).object=e,a.geometryType=r,a.bufferGeometry=i,a}return l(n,[{key:"isLineAccessor",value:function(){return!0}},{key:"width",get:function(){if(h.assert(this.checkSetUp(),"RoIndexedBufferedGeometryLineAccessor not setup"),this.geometryType===c.GeometryType.ExtrudedLine){var e=this.start+this.startCapSize,t=this.position.array;return d.reconstructLineWidth(t,e)}}},{key:"clear",value:function(){h.assert(this.checkSetUp(),"RoIndexedBufferedGeometryLineAccessor not setup");for(var e=this.start,t=this.end,n=e;n<t;n++)this.indices[n]=0;null!==this.bufferGeometry.index&&(this.bufferGeometry.index.needsUpdate=!0)}},{key:"getVertices",value:function(){h.assert(this.checkSetUp(),"RoIndexedBufferedGeometryLineAccessor not setup");var e=this.itemSize,t=this.start,n=this.end,r=new Float32Array((n-t)*e),i=this.position.array;if(2===e)for(var a=t,o=0;a<n;a++,o+=e){var s=this.indices[a];r[o+0]=i[s*e+0],r[o+1]=i[s*e+1]}if(3===e)for(var u=t,l=0;u<n;u++,l+=e){var c=this.indices[u];r[l+0]=i[c*e+0],r[l+1]=i[c*e+1],r[l+2]=i[c*e+2]}else for(var d=t,f=0;d<n;d++,f++)for(var p=this.indices[d],m=0;m<e;m++)r[f*e+m]=i[p*e+m];return r}}]),n}(y);t.IndexedBufferedGeometryLineAccessor=x},15663:function(e,t,n){"use strict";var r=n(87757),i=n(43269).default,a=n(319).default,o=n(81506).default,s=n(2205).default,u=n(99842).default,l=n(93913).default,c=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileGeometryCreator=void 0;var d=n(26309),h=n(31201),f=n(85164),p=n(15739),m=n(34585),v=n(47857),g=n(17682),y=n(46246),x=n(60179),_=n(21910),b=n(23350),w=n(48052),S=p.LoggerManager.instance.create("TileGeometryCreator"),M=new m.Vector3,E=new m.Vector2,T=l((function e(){c(this,e),this.bufferAttributes=new Map,this.interleavedAttributes=new Map})),k=function(e){s(n,e);var t=u(n);function n(e){var r;return c(this,n),(r=t.call(this,"memo",[e])).m_cachedProperties=[],r.m_deps=Array.from(e.dependencies().properties),r.descriptor=o(r),r}return l(n,[{key:"call",value:function(e){var t=this,n=!1;return this.m_deps.forEach((function(r,i){var a=e.env.lookup(r);n||a===t.m_cachedProperties[i]||(n=!0),n&&(t.m_cachedProperties[i]=a)})),(n||void 0===this.m_cachedValue)&&(this.m_cachedValue=e.evaluate(this.args[0])),this.m_cachedValue}}]),n}(d.CallExpr),C=function(){function e(t,n,r){c(this,e),this.geometry=t,this.info=n,this.cache=r}return l(e,[{key:"getBufferAttribute",value:function(e){if(this.cache.bufferAttributes.has(e))return this.cache.bufferAttributes.get(e);var t=v.getBufferAttribute(e);return this.cache.bufferAttributes.set(e,t),t}},{key:"getInterleavedBufferAttributes",value:function(e){var t=this.cache.interleavedAttributes.get(e);if(t)return t;var n=new(d.getArrayConstructor(e.type))(e.buffer),r=new m.InterleavedBuffer(n,e.stride),i=e.attributes.map((function(e){var t=new m.InterleavedBufferAttribute(r,e.itemSize,e.offset,!1);return{name:e.name,attribute:t}}));return this.cache.interleavedAttributes.set(e,i),i}}]),e}();function A(e,t){if(Array.isArray(e)){var n=e;t.push.apply(t,a(n))}else t.push(e)}var P=function(){function e(){c(this,e)}return l(e,[{key:"initDecodedTile",value:function(e,t,n){var r,a=i(e.techniques);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.kind;void 0===s||s instanceof Set&&0===s.size?o._kindState=!0:o._kindState=!(void 0!==n&&n.hasOrIntersects(s))||void 0!==t&&t.hasOrIntersects(s)}}catch(f){a.e(f)}finally{a.f()}var u,l=i(e.geometries);try{for(l.s();!(u=l.n()).done;){var c,d=u.value,h=i(d.groups);try{for(h.s();!(c=h.n()).done;){c.value.createdOffsets=[]}}catch(f){h.e(f)}finally{h.f()}}}catch(f){l.e(f)}finally{l.f()}}},{key:"createAllGeometries",value:function(e,t){var n=function(e){return!1!==e._kindState},r=Promise.resolve();this.createObjects(e,t,(function(t){r=Promise.all([r,t.then((function(t){return e.addOwnedTexture(t),t.image?new Promise((function(n){t.onUpdate=function(){t.onUpdate=null,n()},e.mapView.renderer.initTexture(t)})):Promise.resolve()})).catch((function(){}))])}),n),this.preparePois(e,t);return this.createTextElements(e,t,(function(e){return!!(d.isPoiTechnique(e)||d.isLineMarkerTechnique(e)||d.isTextTechnique(e))&&n(e)})),this.createLabelRejectionElements(e,t),e.dataSource.addGroundPlane&&e.projection.type===h.ProjectionType.Planar&&b.addGroundPlane(e,-1),r}},{key:"createLabelRejectionElements",value:function(e,t){if(void 0!==t.pathGeometries){var n,r=i(t.pathGeometries);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.addBlockingElement(new x.PathBlockingElement(a.path))}}catch(o){r.e(o)}finally{r.f()}}}},{key:"processTechniques",value:function(e,t,n){var r=e.decodedTile;if(void 0!==r){this.initDecodedTile(r,t,n);var i=e.dataSource.exprPool;r.techniques.forEach((function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(d.isJsonExpr(n)&&"kind"!==t)try{var r=d.Expr.fromJSON(n);!0!==r.dependencies().volatile&&(r=new k(d.Expr.fromJSON(n))),e[t]=r.intern(i)}catch(a){S.error("Failed to compile expression:",a)}}}))}}},{key:"prepareTextPaths",value:function(e,t,n){for(var r=new Array,i=e.slice();i.length>0;){var a=i.pop();if(void 0===a)break;var o=t.techniques[a.technique];d.isTextTechnique(o)&&(void 0===n||n(o))&&r.push(a)}return r}},{key:"createTextElements",value:function(e,t,n){var r,a=e.mapView,o=e.computeWorldOffsetX(),s=Math.floor(a.zoomLevel),u=new d.MapEnv({$zoom:s},a.env),l=new _.TextElementBuilder(u,e.textStyleCache,e.dataSource.dataSourceOrder);if(void 0!==t.textPathGeometries){var c,h=this.prepareTextPaths(t.textPathGeometries,t,n),f=i(h);try{for(f.s();!(c=f.n()).done;){var p=c.value,v=t.techniques[p.technique];if(!1!==v._kindState&&d.isTextTechnique(v)&&(void 0===n||n(v))){for(var g=[],y=0;y<p.path.length;y+=3)g.push(new m.Vector3(p.path[y]+o,p.path[y+1],p.path[y+2]));var x=l.withTechnique(v).build(p.text,g,e.offset,e.dataSource.name,e.dataSource.dataSourceOrder,p.objInfos,p.pathLengthSqr);e.addTextElement(x)}}}catch(I){f.e(I)}finally{f.f()}}if(void 0!==t.textGeometries){var b,w=i(t.textGeometries);try{for(w.s();!(b=w.n()).done;){var S=b.value;if(void 0!==S.technique&&void 0!==S.stringCatalog){var M=t.techniques[S.technique];if(!1!==M._kindState&&d.isTextTechnique(M)&&(void 0===n||n(M))){var E=new m.BufferAttribute(new Float64Array(S.positions.buffer),S.positions.itemCount),T=E.count;if(!(T<1)){l.withTechnique(M);for(var k=0;k<T;++k){var C=E.getX(k)+o,A=E.getY(k),P=E.getZ(k),O=S.stringCatalog[S.texts[k]];if(void 0!==O){var L=null===(r=S.objInfos)||void 0===r?void 0:r[k],R=new m.Vector3(C,A,P),D=l.build(O,R,e.offset,e.dataSource.name,e.dataSource.dataSourceOrder,L);e.addTextElement(D)}}}}}}}catch(I){w.e(I)}finally{w.f()}}}},{key:"createObjects",value:function(e,t,n,r){var a,o,s,u,l,c,x,_=this,b=e.mapView,S=[],T=[],k=b.animatedExtrusionHandler,C=Math.floor(b.zoomLevel),P=new d.MapEnv({$zoom:C},b.env),O=e.objects,L=b.viewRanges,R=void 0!==b.elevationProvider,D=i(this.getAttachments(t));try{var I=function(){for(var i=x.value,C=i.geometry,D=i.info.groups,I=D.length,F=function(x){var F=D[x++],j=F.start,z=F.technique,U=t.techniques[z];if(void 0===F.createdOffsets&&(F.createdOffsets=[]),F.createdOffsets.includes(e.offset)||!1===U._kindState||void 0!==r&&!r(U))return N=x,"continue";var B=F.count;for(F.createdOffsets.push(e.offset);x<I&&D[x].technique===z&&j+B===D[x].start;++x)B+=D[x].count,D[x].createdOffsets.push(e.offset);if(!v.usesObject3D(U))return N=x,"continue";var V=null!==(a=null===k||void 0===k?void 0:k.setAnimationProperties(U,P))&&void 0!==a&&a,G=S[z];if(void 0===G){if(void 0===(G=v.createMaterial(b.renderer.capabilities,{technique:U,env:b.env,fog:null!==b.scene.fog,shadowsEnabled:b.shadowsEnabled},n)))return N=x,"continue";V&&f.hasExtrusionFeature(G)&&A(G,T),S[z]=G}var H=U.kind;d.isTerrainTechnique(U)&&_.setupTerrainMaterial(U,G,e.mapView.clearColor);var Z=new m.BufferGeometry;null===(o=C.vertexAttributes)||void 0===o||o.forEach((function(e){var t=i.getBufferAttribute(e);Z.setAttribute(e.name,t)})),null===(s=C.interleavedVertexAttributes)||void 0===s||s.forEach((function(e){i.getInterleavedBufferAttributes(e).forEach((function(e){var t=e.name,n=e.attribute;return Z.setAttribute(t,n)}))}));var W=null!==(u=i.info.index)&&void 0!==u?u:C.index;if(W&&Z.setIndex(i.getBufferAttribute(W)),!Z.getAttribute("normal")&&d.needsVertexNormals(U)&&Z.computeVertexNormals(),Z.addGroup(j,B),d.isSolidLineTechnique(U)){p.assert(!f.isHighPrecisionLineMaterial(G));var q=G;!0===U.clipping&&e.projection.type===h.ProjectionType.Planar&&(e.boundingBox.getSize(M),E.set(M.x,M.y),q.clipTileSize=E),Z.getAttribute("color")&&f.setShaderMaterialDefine(q,"USE_COLOR",!0)}var X=d.isSolidLineTechnique(U)&&void 0!==U.secondaryWidth,K=d.Expr.isExpr(U.enabled)&&C.featureStarts&&C.featureStarts.length>0,Y=v.buildObject(U,Z,K?[G]:G,e,R);if(Y.renderOrder=d.getPropertyValue(U.renderOrder,b.env),void 0!==i.info.uuid&&(Y.uuid=i.info.uuid,Y.userData.geometryId=i.info.uuid),(d.isCirclesTechnique(U)||d.isSquaresTechnique(U))&&void 0!==U.enablePicking&&(Y.enableRayTesting=U.enablePicking),d.isLineTechnique(U)||d.isSegmentsTechnique(U)){var Q=_.getFadingParams(P,U);f.FadingFeature.addRenderHelper(Y,L,Q.fadeNear,Q.fadeFar,!1)}if(d.isSolidLineTechnique(U)){var $=_.getFadingParams(P,U);f.FadingFeature.addRenderHelper(Y,L,$.fadeNear,$.fadeFar,!1)}if(d.isExtrudedLineTechnique(U)&&void 0!==U.fadeFar){var J=_.getFadingParams(b.env,U);f.FadingFeature.addRenderHelper(Y,L,J.fadeNear,J.fadeFar,!0)}if(_.addUserData(e,C,U,Y),d.isExtrudedPolygonTechnique(U)?(Y.castShadow=b.shadowsEnabled,Y.receiveShadow=b.shadowsEnabled):(d.isStandardTechnique(U)||d.isFillTechnique(U))&&(Y.receiveShadow=b.shadowsEnabled),(d.isExtrudedPolygonTechnique(U)||d.isStandardTechnique(U)||d.isFillTechnique(U))&&void 0!==U.fadeFar){var ee=_.getFadingParams(P,U);f.FadingFeature.addRenderHelper(Y,L,ee.fadeNear,ee.fadeFar,!0)}if(d.isExtrudedPolygonTechnique(U)&&g.isRenderDepthPrePassEnabled(U,P)){var te=g.createDepthPrePassMesh(Y);_.addUserData(e,C,U,te),w.registerTileObject(e,te,H,{technique:U,pickability:d.Pickability.transient}),O.push(te),V&&A(te.material,T),g.setDepthPrePassStencil(te,Y)}var ne=d.transientToPickability(d.getPropertyValue(U.transient,b.env));if(w.registerTileObject(e,Y,H,{technique:U,pickability:X?d.Pickability.transient:ne}),O.push(Y),d.isExtrudedPolygonTechnique(U)&&void 0!==i.info.edgeIndex){var re=d.Expr.isExpr(U.enabled)&&C.edgeFeatureStarts&&C.edgeFeatureStarts.length>0,ie=U,ae=new m.BufferGeometry;ae.setAttribute("position",Z.getAttribute("position"));var oe=Z.getAttribute("color");void 0!==oe&&ae.setAttribute("color",oe);var se=Z.getAttribute("extrusionAxis");void 0!==se&&ae.setAttribute("extrusionAxis",se);var ue=Z.getAttribute("normal");void 0!==ue&&ae.setAttribute("normal",ue);var le=Z.getAttribute("uv");void 0!==le&&ae.setAttribute("uv",le),ae.setIndex(i.getBufferAttribute(i.info.edgeIndex));var ce=U,de=_.getPolygonFadingParams(P,ce),he={color:de.color,colorMix:de.colorMix,fadeNear:de.lineFadeNear,fadeFar:de.lineFadeFar,extrusionRatio:V?0:void 0,vertexColors:!!Z.getAttribute("color"),rendererCapabilities:b.renderer.capabilities},fe=new f.EdgeMaterial(he),pe=new m.LineSegments(ae,re?[fe]:fe);_.addUserData(e,C,U,pe),pe.renderOrder=Y.renderOrder+.1,f.FadingFeature.addRenderHelper(pe,L,de.lineFadeNear,de.lineFadeFar,!1),V&&A(pe.material,T),w.registerTileObject(e,pe,H,{technique:U,pickability:d.Pickability.transient}),y.MapMaterialAdapter.create(fe,{color:ie.lineColor,objectColor:ie.color,opacity:ie.opacity,lineWidth:function(e){var t=d.getPropertyValue(ie.lineWidth,e.env);return"number"===typeof t?(N=x,m.MathUtils.clamp(t,0,1)):(N=x,0)}}),O.push(pe)}if(d.isExtrudedPolygonTechnique(U)&&V&&(Y.customDepthMaterial=new f.MapMeshDepthMaterial({depthPacking:m.RGBADepthPacking}),A(Y.customDepthMaterial,T)),d.isFillTechnique(U)&&i.info.edgeIndex){var me=d.Expr.isExpr(U.enabled)&&C.edgeFeatureStarts&&C.edgeFeatureStarts.length>0,ve=new m.BufferGeometry;ve.setAttribute("position",Z.getAttribute("position")),ve.setIndex(i.getBufferAttribute(i.info.edgeIndex));var ge=U,ye=_.getPolygonFadingParams(b.env,ge),xe={color:ye.color,colorMix:ye.colorMix,fadeNear:ye.lineFadeNear,fadeFar:ye.lineFadeFar,vertexColors:!!Z.getAttribute("color"),rendererCapabilities:b.renderer.capabilities},_e=new f.EdgeMaterial(xe),be=new m.LineSegments(ve,me?[_e]:_e);be.renderOrder=Y.renderOrder+.1,f.FadingFeature.addRenderHelper(be,L,ye.lineFadeNear,ye.lineFadeFar,!1),_.addUserData(e,C,U,be),w.registerTileObject(e,be,H,{technique:U,pickability:ne}),y.MapMaterialAdapter.create(_e,{color:ge.lineColor,objectColor:ge.color,opacity:ge.opacity}),O.push(be)}if(X){var we=U,Se=G.clone();v.applyBaseColorToMaterial(Se,Se.color,we,null!==(l=we.secondaryColor)&&void 0!==l?l:0,P),void 0!==we.secondaryCaps&&(Se.caps=d.getPropertyValue(we.secondaryCaps,b.env));var Me=v.buildObject(U,Z,Se,e,R);Me.renderOrder=(null!==(c=d.getPropertyValue(we.secondaryRenderOrder,b.env))&&void 0!==c?c:0)-1e-7,_.addUserData(e,C,U,Me);var Ee=_.getFadingParams(P,U);f.FadingFeature.addRenderHelper(Me,L,Ee.fadeNear,Ee.fadeFar,!1);var Te=v.buildMetricValueEvaluator(we.secondaryWidth,we.metricUnit);w.registerTileObject(e,Me,H,{technique:U});var ke=y.MapMaterialAdapter.get(G),Ce=y.MapMaterialAdapter.create(Se,{color:we.secondaryColor,opacity:we.opacity,caps:we.secondaryCaps,lineWidth:function(e){if(ke){ke.ensureUpdated(e);var t=ke.currentStyledProperties.lineWidth,n=d.getPropertyValue(Te,b.env),r=Ce.currentStyledProperties.opacity;return"number"===typeof t&&"number"===typeof n?n<=t&&(null===r||void 0===r||1===r)?(N=x,0):(N=x,n):(N=x,0)}N=x}});O.push(Me)}N=x},N=0;N<I;)F(N)};for(D.s();!(x=D.n()).done;)I()}catch(F){D.e(F)}finally{D.f()}T.length>0&&b.animatedExtrusionHandler.add(e,T)}},{key:"preparePois",value:function(e,t){void 0!==t.poiGeometries&&e.mapView.poiManager.addPois(e,t)}},{key:"getAttachments",value:r.mark((function e(t){var n,a,o,s,u,l,c,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new T,a=i(t.geometries),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=29;break}return s=o.value,u={index:s.index,edgeIndex:s.edgeIndex,uuid:s.uuid,groups:s.groups},e.next=9,new C(s,u,n);case 9:if(!s.attachments){e.next=27;break}l=i(s.attachments),e.prev=11,l.s();case 13:if((c=l.n()).done){e.next=19;break}return d=c.value,e.next=17,new C(s,d,n);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:e.next=4;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(2),a.e(e.t1);case 34:return e.prev=34,a.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[2,31,34,37],[11,21,24,27]])}))},{key:"setupTerrainMaterial",value:function(e,t,n){if(!e.map||!e.displacementMap){var r=t;return r.color.set(n),void f.setDisplacementMapToMaterial(null,r)}t.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n    uniform sampler2D displacementMap;\n    uniform float displacementScale;\n    uniform float displacementBias;"),e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>","#ifdef USE_MAP\n    float minElevation = ".concat(h.EarthConstants.MIN_ELEVATION.toFixed(1),";\n    float maxElevation = ").concat(h.EarthConstants.MAX_ELEVATION.toFixed(1),";\n    float elevationRange = maxElevation - minElevation;\n\n    float disp = texture2D( displacementMap, vUv ).x * displacementScale + displacementBias;\n    vec4 texelColor = texture2D( map, vec2((disp - minElevation) / elevationRange, 0.0) );\n    texelColor = mapTexelToLinear( texelColor );\n    diffuseColor *= texelColor;\n#endif")),e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","")},t.displacementMap.needsUpdate=!0}},{key:"addUserData",value:function(e,t,n,r){if(d.isTerrainTechnique(n)){p.assert(0===Object.keys(r.userData).length,"Unexpected user data in terrain object"),p.assert("object"===typeof t.objInfos[0],"Wrong attribute map type for terrain geometry");var i=t.objInfos[0],a={tileKey:e.tileKey,texture:new m.DataTexture(i.buffer,i.xCountVertices,i.yCountVertices,m.LuminanceFormat,m.FloatType),displacementMap:i,geoBox:e.geoBox};r.userData=a}else{var o="LineSegments"===r.type&&(d.isExtrudedPolygonTechnique(n)||d.isFillTechnique(n)),s={geometryType:t.type,starts:o?t.edgeFeatureStarts:t.featureStarts,objInfos:t.objInfos};r.userData.feature=s,r.userData.technique=n}}},{key:"getFadingParams",value:function(e,t){return{fadeNear:void 0!==t.fadeNear?d.getPropertyValue(t.fadeNear,e):f.FadingFeature.DEFAULT_FADE_NEAR,fadeFar:void 0!==t.fadeFar?d.getPropertyValue(t.fadeFar,e):f.FadingFeature.DEFAULT_FADE_FAR}}},{key:"getPolygonFadingParams",value:function(e,t){var n,r=f.EdgeMaterial.DEFAULT_COLOR_MIX;if(void 0!==t.lineColor&&(n=d.getPropertyValue(t.lineColor,e),d.isExtrudedPolygonTechnique(t))){var i=t;r=void 0!==i.lineColorMix?i.lineColorMix:f.EdgeMaterial.DEFAULT_COLOR_MIX}var a=void 0!==t.fadeNear?d.getPropertyValue(t.fadeNear,e):f.FadingFeature.DEFAULT_FADE_NEAR,o=void 0!==t.fadeFar?d.getPropertyValue(t.fadeFar,e):f.FadingFeature.DEFAULT_FADE_FAR,s=void 0!==t.lineFadeNear?d.getPropertyValue(t.lineFadeNear,e):a,u=void 0!==t.lineFadeFar?d.getPropertyValue(t.lineFadeFar,e):o;return void 0===n&&(n=f.EdgeMaterial.DEFAULT_COLOR),{color:n,colorMix:r,fadeNear:a,fadeFar:o,lineFadeNear:s,lineFadeFar:u}}}],[{key:"instance",get:function(){return this.m_instance||(this.m_instance=new e)}}]),e}();t.TileGeometryCreator=P},26691:function(e,t,n){"use strict";var r=n(43269).default,i=n(87757),a=n(48926).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileGeometryLoader=t.TileGeometryLoaderState=void 0;var u,l=n(26309),c=n(15739),d=n(65312),h=n(91422),f=n(15663);function p(e){var t=h.PerformanceStatistics.instance;if(t.enabled){var n=e.dataSource.name,r=e.tileKey.level,i=e.tileKey.column,a=e.tileKey.row,o=e.disposed?"disposed":"invisible";t.currentFrame.addMessage("Decoded tile: ".concat(n," # lvl=").concat(r," col=").concat(i," row=").concat(a," DISCARDED - ").concat(o))}}!function(e){e[e.Initialized=0]="Initialized",e[e.CreationQueued=1]="CreationQueued",e[e.CreatingGeometry=2]="CreatingGeometry",e[e.Finished=3]="Finished",e[e.Canceled=4]="Canceled",e[e.Disposed=5]="Disposed"}(u=t.TileGeometryLoaderState||(t.TileGeometryLoaderState={}));var m=function(){function e(t,n){var r=this;o(this,e),this.m_tile=t,this.m_taskQueue=n,this.m_priority=0,this.m_state=u.Initialized,this.m_finishedPromise=new Promise((function(e,t){r.m_resolveFinishedPromise=e,r.m_rejectFinishedPromise=t}))}return s(e,[{key:"priority",set:function(e){this.m_priority=e}},{key:"getPriority",value:function(){return this.m_priority}},{key:"tile",get:function(){return this.m_tile}},{key:"hasDecodedTile",get:function(){return void 0!==this.m_decodedTile}},{key:"isFinished",get:function(){return this.m_state===u.Finished}},{key:"isSettled",get:function(){return this.isFinished||this.isCanceled||this.isDisposed}},{key:"waitFinished",value:function(){return this.m_finishedPromise}},{key:"setDecodedTile",value:function(t){return this.m_decodedTile=t,this.hasDecodedTile&&(this.m_availableGeometryKinds=e.prepareAvailableGeometryKinds(this.m_decodedTile)),this.m_decodedTile}},{key:"availableGeometryKinds",get:function(){return this.m_availableGeometryKinds}},{key:"update",value:function(e,t){var n=this.tile;this.tile.hasGeometry&&!this.compareGeometryKinds(e,t)&&this.reset(),this.m_state!==u.Initialized&&this.m_state!==u.Canceled||void 0===n.decodedTile||(this.m_state===u.Initialized&&(f.TileGeometryCreator.instance.processTechniques(n,e,t),this.setGeometryKinds(e,t),this.setDecodedTile(n.decodedTile)),this.queueGeometryCreation(e,t))}},{key:"cancel",value:function(){var e;p(this.tile),this.m_state=u.Canceled,null===(e=this.m_rejectFinishedPromise)||void 0===e||e.call(this)}},{key:"dispose",value:function(){var e;p(this.tile),this.clear(),this.m_state=u.Disposed,null===(e=this.m_rejectFinishedPromise)||void 0===e||e.call(this)}},{key:"reset",value:function(){var e=this;this.clear(),this.isSettled&&(this.m_finishedPromise=new Promise((function(t,n){e.m_resolveFinishedPromise=t,e.m_rejectFinishedPromise=n}))),this.m_state=u.Initialized}},{key:"finish",value:function(){var e;this.m_decodedTile=void 0,this.m_state=u.Finished,null===(e=this.m_resolveFinishedPromise)||void 0===e||e.call(this)}},{key:"clear",value:function(){var e,t,n;null===(e=this.m_availableGeometryKinds)||void 0===e||e.clear(),null===(t=this.m_enabledKinds)||void 0===t||t.clear(),null===(n=this.m_disabledKinds)||void 0===n||n.clear(),this.m_decodedTile=void 0}},{key:"queueGeometryCreation",value:function(e,t){var n=this;this.m_state!==u.CreationQueued&&(this.m_taskQueue.add({execute:this.createGeometry.bind(this,e,t),group:d.TileTaskGroups.CREATE,getPriority:this.getPriority.bind(this),isExpired:function(){return n.m_state!==u.CreationQueued},estimatedProcessTime:function(){var e,t;return(null!==(t=null===(e=n.tile.decodedTile)||void 0===e?void 0:e.decodeTime)&&void 0!==t?t:30)/6}}),this.m_state=u.CreationQueued)}},{key:"createGeometry",value:function(){var e=a(i.mark((function e(t,n){var r,a,o,s,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.m_state!==u.CreatingGeometry){e.next=2;break}return e.abrupt("return");case 2:if(this.m_state=u.CreatingGeometry,r=this.tile,void 0!==(a=this.m_decodedTile)){e.next=8;break}return this.finish(),e.abrupt("return");case 8:return o=h.PerformanceStatistics.instance,s=0,o.enabled&&(s=c.PerformanceTimer.now()),l=f.TileGeometryCreator.instance,r.clear(),l.initDecodedTile(a,t,n),e.next=16,l.createAllGeometries(r,a);case 16:o.enabled&&this.addStats(o,s),this.finish(),r.dataSource.requestUpdate();case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addStats",value:function(e,t){var n=this.tile,r=this.m_decodedTile;if(void 0!==r){var i=c.PerformanceTimer.now()-t,a=e.currentFrame;a.addValue("render.fullFrameTime",i),a.addValue("render.geometryCreationTime",i),a.addValue("geometry.geometryCreationTime",i),a.addValue("geometryCount.numGeometries",r.geometries.length),a.addValue("geometryCount.numTechniques",r.techniques.length),a.addValue("geometryCount.numPoiGeometries",void 0!==r.poiGeometries?r.poiGeometries.length:0),a.addValue("geometryCount.numTextGeometries",void 0!==r.textGeometries?r.textGeometries.length:0),a.addValue("geometryCount.numTextPathGeometries",void 0!==r.textPathGeometries?r.textPathGeometries.length:0),a.addValue("geometryCount.numPathGeometries",void 0!==r.pathGeometries?r.pathGeometries.length:0),a.addMessage("Decoded tile: ".concat(n.dataSource.name," # lvl=").concat(n.tileKey.level," col=").concat(n.tileKey.column," row=").concat(n.tileKey.row))}}},{key:"setGeometryKinds",value:function(e,t){var n,r;void 0!==e&&(this.m_enabledKinds=Object.assign(null!==(n=this.m_enabledKinds)&&void 0!==n?n:new l.GeometryKindSet,e)),void 0!==t&&(this.m_disabledKinds=Object.assign(null!==(r=this.m_disabledKinds)&&void 0!==r?r:new l.GeometryKindSet,t))}},{key:"compareGeometryKinds",value:function(e,t){var n=this.m_enabledKinds===e,r=this.m_disabledKinds===t;if(n&&r)return!0;var i=(void 0===this.m_enabledKinds||0===this.m_enabledKinds.size)&&(void 0===e||0===e.size),a=(void 0===this.m_disabledKinds||0===this.m_disabledKinds.size)&&(void 0===t||0===t.size);if(i&&a||n&&a||r&&i)return!0;if(!i){if(void 0===e||void 0===this.m_enabledKinds)return!1;if(!e.has(this.m_enabledKinds))return!1}if(!a){if(void 0===t||void 0===this.m_disabledKinds)return!1;if(!t.has(this.m_disabledKinds))return!1}return!0}},{key:"isCanceled",get:function(){return this.m_state===u.Canceled}},{key:"isDisposed",get:function(){return this.m_state===u.Disposed}}],[{key:"prepareAvailableGeometryKinds",value:function(t){var n,i=new l.GeometryKindSet,a=r(t.techniques);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=e.compileGeometryKind(o);if(s instanceof Set){var u,c=r(s);try{for(c.s();!(u=c.n()).done;){var d=u.value;i.add(d)}}catch(h){c.e(h)}finally{c.f()}}else i.add(s)}}catch(h){a.e(h)}finally{a.f()}return i}},{key:"compileGeometryKind",value:function(e){var t=e.kind;return void 0===t?(t=l.isFillTechnique(e)?l.GeometryKind.Area:l.isLineTechnique(e)||l.isSolidLineTechnique(e)||l.isSegmentsTechnique(e)||l.isExtrudedLineTechnique(e)?l.GeometryKind.Line:l.isExtrudedPolygonTechnique(e)?l.GeometryKind.Building:l.isPoiTechnique(e)||l.isLineMarkerTechnique(e)||l.isTextTechnique(e)?l.GeometryKind.Label:l.GeometryKind.All,e.kind=t):Array.isArray(t)&&(t=e.kind=new l.GeometryKindSet(t)),t}}]),e}();t.TileGeometryLoader=m},47021:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileGeometryManager=void 0;var o=n(26309),s=n(87213),u=function(){function e(t){i(this,e),this.mapView=t,this.enableFilterByKind=!0,this.enabledKinds=new o.GeometryKindSet,this.disabledKinds=new o.GeometryKindSet,this.hiddenKinds=new o.GeometryKindSet,this.m_visibilityCounter=1}return a(e,[{key:"enabledGeometryKinds",get:function(){return this.enabledKinds},set:function(e){this.enabledKinds=e}},{key:"disabledGeometryKinds",get:function(){return this.disabledKinds},set:function(e){this.disabledKinds=e}},{key:"hiddenGeometryKinds",get:function(){return this.hiddenKinds},set:function(e){this.hiddenKinds=e,this.incrementVisibilityCounter()}},{key:"visibilityCounter",get:function(){return this.m_visibilityCounter}},{key:"updateTiles",value:function(e){var t,n=0,i=r(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=n++;a.updateGeometry(o,this.enableFilterByKind?this.enabledGeometryKinds:void 0,this.enableFilterByKind?this.disabledGeometryKinds:void 0)&&this.m_tileUpdateCallback&&this.m_tileUpdateCallback(a)}}catch(s){i.e(s)}finally{i.f()}this.updateTileObjectVisibility(e)&&this.mapView.update()}},{key:"clear",value:function(){this.enabledKinds.clear(),this.disabledKinds.clear(),this.hiddenKinds.clear()}},{key:"enableKind",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enableDisableKinds(this.enabledKinds,e,t)}},{key:"disableKind",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enableDisableKinds(this.disabledKinds,e,t)}},{key:"hideKind",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1;if(Array.isArray(e)||e instanceof Set){var i,a=r(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=this.addRemove(this.hiddenKinds,o,t);n=n||s}}catch(u){a.e(u)}finally{a.f()}}else n=this.addRemove(this.hiddenKinds,e,t);n&&this.incrementVisibilityCounter()}},{key:"getAvailableKinds",value:function(e){var t,n=new o.GeometryKindSet,i=r(e);try{for(i.s();!(t=i.n()).done;){var a=t.value.loadedGeometryKinds;if(void 0!==a){var s,u=r(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;n.add(l)}}catch(c){u.e(c)}finally{u.f()}}}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"updateTileObjectVisibility",value:function(e){var t,n=this,i=!1,a=r(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(0!==o.objects.length&&o.visibilityCounter!==this.visibilityCounter){o.visibilityCounter=this.visibilityCounter;var u,l=r(o.objects);try{for(l.s();!(u=l.n()).done;){var c=u.value,d=s.MapObjectAdapter.get(c),h=null===d||void 0===d?void 0:d.kind;if(void 0!==h){var f=!h.some((function(e){return n.hiddenKinds.has(e)}));i=i||c.visible!==f,c.visible=f}}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){a.e(p)}finally{a.f()}return i}},{key:"setTileUpdateCallback",value:function(e){this.m_tileUpdateCallback=e}},{key:"incrementVisibilityCounter",value:function(){return++this.m_visibilityCounter}},{key:"enableDisableKinds",value:function(e,t,n){if(Array.isArray(t)){var i,a=r(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.addRemove(e,o,n)}}catch(c){a.e(c)}finally{a.f()}}else if(t instanceof Set){var s,u=r(t);try{for(u.s();!(s=u.n()).done;){var l=s.value;this.addRemove(e,l,n)}}catch(c){u.e(c)}finally{u.f()}}else void 0!==t&&this.addRemove(e,t,n)}},{key:"addRemove",value:function(e,t,n){if(n){if(!e.has(t))return e.add(t),!0}else if(e.has(t))return e.delete(t),!0;return!1}}]),e}();t.TileGeometryManager=u},91400:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VertexCache=void 0;var a,o=n(15739);!function(e){e[e.VertexId=0]="VertexId",e[e.OlderIdx=1]="OlderIdx",e[e.NewerIdx=2]="NewerIdx",e[e.X=3]="X",e[e.Y=4]="Y",e[e.Z=5]="Z",e[e.Count=6]="Count"}(a||(a={}));var s=-1,u=function(){function e(t){r(this,e),this.maxVertexCount=t,this.m_cache=[],this.m_vertexCount=0,this.m_oldestIdx=0,this.m_newestIdx=0,this.m_cache.length=this.maxVertexCount*a.Count,this.clear()}return i(e,[{key:"clear",value:function(){this.m_cache.fill(s),this.m_vertexCount=0}},{key:"get",value:function(e,t){var n=this.find(e);return void 0!==n&&(this.promoteEntry(n),this.getVertex(n,t),!0)}},{key:"set",value:function(e,t){var n=s;this.m_vertexCount<this.maxVertexCount?(n=this.m_vertexCount*a.Count,this.m_vertexCount++):n=this.m_oldestIdx,1===this.m_vertexCount?this.m_oldestIdx=this.m_newestIdx=n:this.promoteEntry(n),this.setVertex(n,e,t)}},{key:"find",value:function(e){for(var t=this.m_cache.length,n=0;n<t;n+=a.Count)if(this.m_cache[n]===e)return n}},{key:"promoteEntry",value:function(e){if(e!==this.m_newestIdx){var t=this.getNewerIdx(e),n=this.getOlderIdx(e);t!==s&&(o.assert(this.getOlderIdx(t)===e),this.setOlderIdx(t,n)),n!==s&&(o.assert(this.getNewerIdx(n)===e),this.setNewerIdx(n,t)),e===this.m_oldestIdx&&(this.m_oldestIdx=t),this.setNewerIdx(e,s),this.setOlderIdx(e,this.m_newestIdx),o.assert(this.m_newestIdx!==s),o.assert(this.getNewerIdx(this.m_newestIdx)===s),this.setNewerIdx(this.m_newestIdx,e),this.m_newestIdx=e}}},{key:"getOlderIdx",value:function(e){return this.m_cache[e+a.OlderIdx]}},{key:"setOlderIdx",value:function(e,t){this.m_cache[e+a.OlderIdx]=t}},{key:"getNewerIdx",value:function(e){return this.m_cache[e+a.NewerIdx]}},{key:"setNewerIdx",value:function(e,t){this.m_cache[e+a.NewerIdx]=t}},{key:"getVertex",value:function(e,t){t.x=this.m_cache[e+a.X],t.y=this.m_cache[e+a.Y],t.z=this.m_cache[e+a.Z]}},{key:"setVertex",value:function(e,t,n){this.m_cache[e]=t,this.m_cache[e+a.X]=n.x,this.m_cache[e+a.Y]=n.y,this.m_cache[e+a.Z]=n.z}}]),e}();t.VertexCache=u},91649:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.overlayOnElevation=t.overlayTextElement=void 0;var i=n(26309),a=n(85164),o=n(15739);function s(e,t){if("material"in e){var n=a.setDisplacementMapToMaterial.bind(null,t),r=e.material;Array.isArray(r)?r.forEach(n):r&&n(r)}}function u(e,t,n,r){var i=r.unprojectPoint(e);if(n.geoBox.contains(i))i.altitude=t.sampleHeight(i,n);else if(i.altitude=t.getHeight(i,n.tileKey.level),void 0===i.altitude)return!1;return r.projectPoint(i,e),!0}t.overlayTextElement=function(e,t,n,i){o.assert(!e.elevated),n&&(e.elevated=e.path?function(e,t,n,i){var a,o=r(e);try{for(o.s();!(a=o.n()).done;)if(!u(a.value,t,n,i))return!1}catch(s){o.e(s)}finally{o.f()}return!0}(e.path,t,n,i):u(e.position,t,n,i))},t.overlayOnElevation=function(e){var t=e.mapView.elevationProvider;if(void 0!==t&&0!==e.objects.length){var n=e.objects[0];if(n.userData&&n.userData.kind&&n.userData.kind.find((function(e){return e!==i.GeometryKind.All&&e!==i.GeometryKind.Terrain}))){var a=t.getDisplacementMap(e.tileKey);if(void 0!==a){var o,u=r(e.objects);try{for(u.s();!(o=u.n()).done;){s(o.value,a.texture)}}catch(l){u.e(l)}finally{u.f()}}}}}},21317:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ImageItem=void 0;var a=n(15739),o=n(34585),s=n(1870),u=a.LoggerManager.instance.create("loadImage"),l=new s.MipMapGenerator,c=function(){function e(t,n){r(this,e),this.url=t,this.image=n}return i(e,[{key:"loaded",get:function(){return void 0!==this.image&&void 0!==this.mipMaps}},{key:"loading",get:function(){return void 0!==this.loadingPromise}},{key:"loadImage",value:function(){var e=this;return this.loaded?Promise.resolve(this):(this.loading||(this.loadingPromise=new Promise((function(t,n){if(e.image){var r=e.image;r instanceof HTMLImageElement&&!r.complete?(r.addEventListener("load",e.finalizeImage.bind(e,r,t)),r.addEventListener("error",n)):e.finalizeImage(e.image,t)}else u.debug("Loading image: ".concat(e.url)),!0===e.cancelled?(u.debug("Cancelled loading image: ".concat(e.url)),t(void 0)):(new o.ImageLoader).load(e.url,(function(n){if(!0===e.cancelled)return u.debug("Cancelled loading image: ".concat(e.url)),void t(void 0);e.finalizeImage(n,t)}),void 0,(function(t){u.error("... loading image failed: ".concat(e.url," : ").concat(t)),e.loadingPromise=void 0,n("... loading image failed: ".concat(e.url," : ").concat(t))}))}))),this.loadingPromise)}},{key:"finalizeImage",value:function(e,t){this.image=e,this.mipMaps=l.generateTextureAtlasMipMap(this),this.loadingPromise=void 0,t(this)}}]),e}();t.ImageItem=c},89849:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ImageCache=void 0;var a=n(21317),o=function(){function e(){i(this,e),this.m_images=new Map}return r(e,[{key:"registerImage",value:function(e,t,n){var r=this.findImageCacheItem(t);return r?(void 0===e||r.owners.includes(e)||r.owners.push(e),r.imageItem):(r={imageItem:new a.ImageItem(t,n),owners:[e]},this.m_images.set(t,r),r.imageItem)}},{key:"removeImage",value:function(e,t){var n=this.m_images.get(e);return void 0!==n&&(this.unlinkCacheItem(n,t),!0)}},{key:"findImage",value:function(e){var t=this.m_images.get(e);if(void 0!==t)return t.imageItem}},{key:"clear",value:function(e){var t=this;this.m_images.forEach((function(n){t.unlinkCacheItem(n,e)}))}},{key:"size",get:function(){return this.m_images.size}},{key:"findImageCacheItem",value:function(e){return this.m_images.get(e)}},{key:"cancelLoading",value:function(e){e.loading&&(e.cancelled=!0)}},{key:"unlinkCacheItem",value:function(e,t){var n=e.owners.indexOf(t);n>=0&&e.owners.splice(n,1),0===e.owners.length&&(this.m_images.delete(e.imageItem.url),this.cancelLoading(e.imageItem))}}],[{key:"instance",get:function(){return void 0===e.m_instance&&(e.m_instance=new e),e.m_instance}},{key:"dispose",value:function(){e.m_instance=void 0}}]),e}();t.ImageCache=o},10018:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewImageCache=void 0;var a=n(15739),o=n(89849),s=function(){function e(){r(this,e),this.m_name2Url=new Map,this.m_urlNameCount=new Map}return i(e,[{key:"addImage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("string"===typeof t){var r=t,i=this.registerImage(e,r);return n?i.loadImage():i}var a=t;return this.registerImage(e,void 0,a)}},{key:"removeImage",value:function(e){var t=this.m_name2Url.get(e);if(void 0!==t){this.m_name2Url.delete(e);var n=1;if(e!==t){var r=this.m_urlNameCount.get(t);a.assert(void 0!==r),n=r,a.assert(n>0)}return n>1?this.m_urlNameCount.set(t,n-1):(this.m_urlNameCount.delete(t),o.ImageCache.instance.removeImage(t,this)),!0}return!1}},{key:"findImageByName",value:function(e){var t=this.m_name2Url.get(e);if(void 0!==t)return o.ImageCache.instance.findImage(t)}},{key:"clear",value:function(){o.ImageCache.instance.clear(this),this.m_name2Url.clear(),this.m_urlNameCount.clear()}},{key:"registerImage",value:function(e,t,n){var r;if(this.hasName(e))throw new Error("duplicate name in cache");if(void 0===t&&(a.assert(void 0!==n),t=e),t!==e){var i=null!==(r=this.m_urlNameCount.get(t))&&void 0!==r?r:0;this.m_urlNameCount.set(t,i+1)}return this.m_name2Url.set(e,t),o.ImageCache.instance.registerImage(this,t,n)}},{key:"hasName",value:function(e){return void 0!==this.m_name2Url.get(e)}}]),e}();t.MapViewImageCache=s},1870:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MipMapGenerator=void 0;var a=n(34585),o="undefined"===typeof window,s=function(){function e(){r(this,e),o||(this.m_paddingCanvas=document.createElement("canvas"),this.m_paddingContext=this.m_paddingCanvas.getContext("2d"),this.m_resizeCanvas=document.createElement("canvas"),this.m_resizeContext=this.m_resizeCanvas.getContext("2d"))}return i(e,[{key:"generateTextureAtlasMipMap",value:function(t){if(o)throw new Error("MipMapGenerator only works in browser.");if(void 0===t.image)throw new Error("Can not generate mip maps. Image data not loaded!");var n=t.image,r=[],i=e.getPaddedSize(n.width,n.height),a=i.width,s=i.height;this.copyImageWithPadding(n,a,s),r.push(this.m_paddingContext.getImageData(0,0,a,s));for(var u=.5*a,l=.5*s;u>=1||l>=1;){var c=r[r.length-1];r.push(this.resizeImage(c,Math.max(u,1),Math.max(l,1))),u*=.5,l*=.5}return r}},{key:"copyImageWithPadding",value:function(e,t,n){return this.m_paddingCanvas.width=t,this.m_paddingCanvas.height=n,this.m_paddingContext.clearRect(0,0,t,n),e instanceof ImageData?this.m_paddingContext.putImageData(e,0,0):this.m_paddingContext.drawImage(e,0,0),e.width!==t&&this.m_paddingContext.drawImage(this.m_paddingCanvas,e.width-1,0,1,e.height,e.width,0,t-e.width,e.height),e.height!==n&&this.m_paddingContext.drawImage(this.m_paddingCanvas,0,e.height-1,t,1,0,e.height,t,n-e.height),this.m_paddingCanvas}},{key:"resizeImage",value:function(e,t,n){var r=this.copyImageWithPadding(e,e.width,e.height);return this.m_resizeCanvas.width=t,this.m_resizeCanvas.height=n,this.m_resizeContext.clearRect(0,0,t,n),this.m_resizeContext.drawImage(r,0,0,t,n),this.m_resizeContext.getImageData(0,0,t,n)}}],[{key:"getPaddedSize",value:function(e,t){return{width:a.MathUtils.ceilPowerOfTwo(e),height:a.MathUtils.ceilPowerOfTwo(t)}}}]),e}();t.MipMapGenerator=s},87094:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BoxBuffer=t.BoxBufferMesh=void 0;var s=n(15739),u=n(34585),l=n(2159),c=function(e){a(n,e);var t=o(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e,i)).type="BoxBufferMesh",a}return i(n,[{key:"isEmpty",get:function(){if(void 0===this.geometry)return!0;var e=this.geometry;return null===e.index||0===e.index.count}}]),n}(u.Mesh);t.BoxBufferMesh=c;var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32768;r(this,e),this.m_material=t,this.m_renderOrder=n,this.m_maxElementCount=a,this.m_size=0,this.resizeBuffer(i),this.m_pickInfos=new Array}return i(e,[{key:"clone",value:function(){return new e(this.m_material,this.m_renderOrder)}},{key:"dispose",value:function(){void 0!==this.m_geometry&&(this.m_geometry.dispose(),this.m_geometry=void 0),this.m_mesh=void 0}},{key:"size",get:function(){return this.m_size}},{key:"reset",value:function(){void 0!==this.m_positionAttribute&&(this.m_positionAttribute.count=0,this.m_colorAttribute.count=0,this.m_uvAttribute.count=0,this.m_indexAttribute.count=0,this.m_pickInfos.length=0)}},{key:"canAddElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.m_indexAttribute;if(t.count+6*e>=t.array.length){if(t.array.length>=6*this.m_maxElementCount)return!1;var n=Math.min(this.m_maxElementCount,0===this.size?256:2*this.size);this.resize(n)}return!0}},{key:"saveState",value:function(){return{positionAttributeCount:this.m_positionAttribute.count,colorAttributeCount:this.m_colorAttribute.count,uvAttributeCount:this.m_uvAttribute.count,indexAttributeCount:this.m_indexAttribute.count,pickInfoCount:this.m_pickInfos.length}}},{key:"restoreState",value:function(e){this.m_positionAttribute.count=e.positionAttributeCount,this.m_colorAttribute.count=e.colorAttributeCount,this.m_uvAttribute.count=e.uvAttributeCount,this.m_indexAttribute.count=e.indexAttributeCount,this.m_pickInfos.length=e.pickInfoCount}},{key:"addBox",value:function(e,t,n,r,i,a){if(!this.canAddElements())return!1;var o=t.s0,s=t.t0,u=t.s1,l=t.t1,c=e.x,d=e.y,h=e.w,f=e.h,p=Math.round(n.r*r*255),m=Math.round(n.g*r*255),v=Math.round(n.b*r*255),g=Math.round(255*r),y=this.m_positionAttribute,x=this.m_colorAttribute,_=this.m_uvAttribute,b=this.m_indexAttribute,w=y.count,S=b.count;return y.setXYZ(w,c,d,i),y.setXYZ(w+1,c+h,d,i),y.setXYZ(w+2,c,d+f,i),y.setXYZ(w+3,c+h,d+f,i),x.setXYZW(w,p,m,v,g),x.setXYZW(w+1,p,m,v,g),x.setXYZW(w+2,p,m,v,g),x.setXYZW(w+3,p,m,v,g),_.setXY(w,o,s),_.setXY(w+1,u,s),_.setXY(w+2,o,l),_.setXY(w+3,u,l),b.setX(S,w),b.setX(S+1,w+1),b.setX(S+2,w+2),b.setX(S+3,w+2),b.setX(S+4,w+1),b.setX(S+5,w+3),y.count+=4,x.count+=4,_.count+=4,b.count+=6,this.m_pickInfos.push(a),!0}},{key:"updateBufferGeometry",value:function(){var e=this.m_positionAttribute,t=this.m_colorAttribute,n=this.m_uvAttribute,r=this.m_indexAttribute;e.count>0&&(e.needsUpdate=!0,e.updateRange.offset=0,e.updateRange.count=4*e.count),t.count>0&&(t.needsUpdate=!0,t.updateRange.offset=0,t.updateRange.count=4*t.count),n.count>0&&(n.needsUpdate=!0,n.updateRange.offset=0,n.updateRange.count=4*n.count),r.count>0&&(r.needsUpdate=!0,r.updateRange.offset=0,r.updateRange.count=r.count),void 0!==this.m_geometry&&(this.m_geometry.clearGroups(),this.m_geometry.addGroup(0,this.m_indexAttribute.count))}},{key:"cleanUp",value:function(){0===this.m_indexAttribute.count&&this.size>0&&this.clearAttributes()}},{key:"isEmpty",get:function(){return this.m_mesh.isEmpty}},{key:"mesh",get:function(){return void 0===this.m_mesh&&this.resize(),this.m_mesh}},{key:"pickBoxes",value:function(e,t,n){for(var r=this.m_pickInfos.length,i=this.m_pickInfos,a=this.m_positionAttribute,o=e.x,u=e.y,l=0;l<r;l++){var c=4*l,d=a.getX(c);if(!(o<d)){var h=a.getX(c+1);if(!(o>h)){var f=a.getY(c);if(!(u<f)){var p=a.getY(c+2);if(!(u>p)){var m=new s.Math2D.Box(d,f,h-d,p-f);void 0!==n&&void 0!==i[l].poiInfo&&void 0!==i[l].poiInfo.uvBox&&this.isPixelTransparent(n,o,u,m,i[l].poiInfo.uvBox,document.createElement("canvas"))||void 0!==i[l]&&t(i[l])}}}}}}},{key:"resize",value:function(e,t){return void 0!==this.m_geometry&&this.m_geometry.dispose(),this.m_geometry=new u.BufferGeometry,void 0!==e&&(!0===t||e>this.size)&&this.resizeBuffer(e),this.m_geometry.setAttribute("position",this.m_positionAttribute),this.m_geometry.setAttribute("color",this.m_colorAttribute),this.m_geometry.setAttribute("uv",this.m_uvAttribute),this.m_geometry.setIndex(this.m_indexAttribute),this.m_geometry.addGroup(0,this.m_indexAttribute.count),void 0===this.m_mesh?(this.m_mesh=new c(this.m_geometry,this.m_material),this.m_mesh.renderOrder=this.m_renderOrder):this.m_mesh.geometry=this.m_geometry,this.m_mesh}},{key:"updateMemoryUsage",value:function(e){var t=3*this.m_positionAttribute.count*4+4*this.m_colorAttribute.count+4*this.m_uvAttribute.count*4+4*this.m_indexAttribute.count;e.heapSize+=t,e.gpuSize+=t}},{key:"isPixelTransparent",value:function(e,t,n,r,i,a){var o=l.screenToUvCoordinates(t,n,r,i),s=o.u,u=o.v,c=e instanceof SVGImageElement?e.getBBox():e,d=c.width*s,h=c.height*u,f=l.getPixelFromImage(d,h,e,a);return void 0!==f&&0===f[3]}},{key:"clearAttributes",value:function(){this.m_positionAttribute=void 0,this.m_colorAttribute=void 0,this.m_uvAttribute=void 0,this.m_indexAttribute=void 0,this.resize(0,!0)}},{key:"resizeBuffer",value:function(e){var t=new Float32Array(4*e*3);if(void 0!==this.m_positionAttribute&&this.m_positionAttribute.array.length>0){var n=this.m_positionAttribute.count;t.set(this.m_positionAttribute.array),this.m_positionAttribute.array=t,this.m_positionAttribute.count=n}else this.m_positionAttribute=new u.BufferAttribute(t,3),this.m_positionAttribute.count=0,this.m_positionAttribute.setUsage(u.DynamicDrawUsage);var r=new Uint8Array(4*e*4);if(void 0!==this.m_colorAttribute){var i=this.m_colorAttribute.count;r.set(this.m_colorAttribute.array),this.m_colorAttribute.array=r,this.m_colorAttribute.count=i}else this.m_colorAttribute=new u.BufferAttribute(r,4,!0),this.m_colorAttribute.count=0,this.m_colorAttribute.setUsage(u.DynamicDrawUsage);var a=new Float32Array(4*e*4);if(void 0!==this.m_uvAttribute){var o=this.m_uvAttribute.count;a.set(this.m_uvAttribute.array),this.m_uvAttribute.array=a,this.m_uvAttribute.count=o}else this.m_uvAttribute=new u.BufferAttribute(a,4),this.m_uvAttribute.count=0,this.m_uvAttribute.setUsage(u.DynamicDrawUsage);var s=6*e*1,l=s>65535?new Uint32Array(s):new Uint16Array(s);if(void 0!==this.m_indexAttribute){var c=this.m_indexAttribute.count;l.set(this.m_indexAttribute.array),this.m_indexAttribute.array=l,this.m_indexAttribute.count=c}else this.m_indexAttribute=new u.BufferAttribute(l,1),this.m_indexAttribute.count=0,this.m_indexAttribute.setUsage(u.DynamicDrawUsage);this.m_size=e}}]),e}();t.BoxBuffer=d},2159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPixelFromImageData=t.getPixelFromCanvasImageSource=t.screenToUvCoordinates=t.getPixelFromImage=void 0;var r=n(15739);function i(e,t,n,r){var i=e instanceof SVGImageElement?e.getBBox():e,a=i.width,o=i.height;if(!(t>a||t<0||n>o||n<0)){var s;r.width=a,r.height=o;var u=r.getContext("2d");return null!==u&&(u.drawImage(e,0,0),s=u.getImageData(t,n,1,1).data),s}}function a(e,t,n,r){if(!(t>e.width||t<0||n>e.height||n<0))return function(e,t,n){for(var r=t*n,i=e.data,a=new Uint8ClampedArray(n),o=0;o<n;o++)a[0]=i[r+o];return a}(e,n*e.width+t,r)}t.getPixelFromImage=function(e,t,n,r){return n instanceof ImageData?a(n,e,t,n.data.length/(n.height*n.width)):(r||(r=document.createElement("canvas")),i(n,e,t,r))},t.screenToUvCoordinates=function(e,t,n,i){var a=n.x,o=n.x+n.w,s=n.y,u=n.y+n.h;return{u:r.MathUtils.map(e,a,o,i.s0,i.s1),v:r.MathUtils.map(t,s,u,i.t0,i.t1)}},t.getPixelFromCanvasImageSource=i,t.getPixelFromImageData=a},79977:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PoiBuilder=void 0;var a=n(26309),o=n(15739),s=n(37119),u=o.LoggerManager.instance.create("PoiBuilder");var l=function(){function e(t){r(this,e),this.m_env=t}return i(e,[{key:"withTechnique",value:function(e){var t,n,r,i,o,s,u,l;return this.m_imageTextureName=function(e,t){return void 0!==e.imageTexture?a.composeTechniqueTextureName(a.getPropertyValue(e.imageTexture,t),e):void 0}(e,this.m_env),this.m_iconMinZoomLevel=null!==(n=a.getPropertyValue(null!==(t=e.iconMinZoomLevel)&&void 0!==t?t:e.minZoomLevel,this.m_env))&&void 0!==n?n:void 0,this.m_iconMaxZoomLevel=null!==(i=a.getPropertyValue(null!==(r=e.iconMaxZoomLevel)&&void 0!==r?r:e.maxZoomLevel,this.m_env))&&void 0!==i?i:void 0,this.m_textMinZoomLevel=null!==(s=a.getPropertyValue(null!==(o=e.textMinZoomLevel)&&void 0!==o?o:e.minZoomLevel,this.m_env))&&void 0!==s?s:void 0,this.m_textMaxZoomLevel=null!==(l=a.getPropertyValue(null!==(u=e.textMaxZoomLevel)&&void 0!==u?u:e.maxZoomLevel,this.m_env))&&void 0!==l?l:void 0,this.m_technique=e,this}},{key:"withIcon",value:function(e,t){return void 0!==e&&(this.m_imageTextureName=e),this.m_shieldGroupIndex=t,this}},{key:"build",value:function(e){var t,n,r,i,l;o.assert(void 0!==this.m_technique);var c=this.m_technique,d=this.m_env,h=this.m_imageTextureName,f=void 0!==c.poiTable?null!==(t=c.poiName)&&void 0!==t?t:h:void 0;if(void 0!==h&&void 0!==f&&u.warn("Possible duplicate POI icon definition via imageTextureName and poiTable!"),void 0===h&&void 0===f)return e.minZoomLevel=null!==(n=e.minZoomLevel)&&void 0!==n?n:this.m_textMinZoomLevel,void(e.maxZoomLevel=null!==(r=e.maxZoomLevel)&&void 0!==r?r:this.m_textMaxZoomLevel);var p=!0===c.textIsOptional,m=!0===c.iconIsOptional,v=!(!1===c.renderTextDuringMovements),g=null!==(i=c.iconMayOverlap)&&void 0!==i?i:c.textMayOverlap,y=null!==(l=c.iconReserveSpace)&&void 0!==l?l:c.textReserveSpace,x=a.getPropertyValue(c.iconColor,d),_=null!==x?s.ColorCache.instance.getColor(x):void 0;return{technique:c,imageTextureName:h,poiTableName:c.poiTable,poiName:f,shieldGroupIndex:this.m_shieldGroupIndex,textElement:e,textIsOptional:p,iconIsOptional:m,renderTextDuringMovements:v,mayOverlap:g,reserveSpace:y,iconBrightness:c.iconBrightness,iconColor:_,iconMinZoomLevel:this.m_iconMinZoomLevel,iconMaxZoomLevel:this.m_iconMaxZoomLevel,textMinZoomLevel:this.m_textMinZoomLevel,textMaxZoomLevel:this.m_textMaxZoomLevel}}}]),e}();t.PoiBuilder=l},61086:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(43269).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PoiManager=void 0;var u=n(26309),l=n(15739),c=n(34585),d=n(21910),h=l.LoggerManager.instance.create("PoiManager");function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.imageTextures){var n=e.imageTextures[t];if(n>=0)return l.assert(e.imageTextures.length>t),e.stringCatalog[n]}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.objInfos?e.objInfos[t]:void 0}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(new c.Vector3).fromBufferAttribute(e,n);return r.x+=t,r}function v(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l.assert(e.texts.length>n);var r=e.texts[n];return l.assert(e.stringCatalog.length>r),null!==(t=e.stringCatalog[r])&&void 0!==t?t:""}var g=function(){function e(t){o(this,e),this.mapView=t,this.m_imageTextures=new Map,this.m_poiShieldGroups=new Map}return s(e,[{key:"addPois",value:function(e,t){var n,r=l.assertExists(t.poiGeometries),i=e.computeWorldOffsetX(),o=e.mapView,s=Math.floor(o.zoomLevel),h=new u.MapEnv({$zoom:s},o.env),f=new d.TextElementBuilder(h,e.textStyleCache,e.dataSource.dataSourceOrder),p=a(r);try{for(p.s();!(n=p.n()).done;){var m=n.value;l.assert(void 0!==m.technique);var v=l.assertExists(m.technique),g=t.techniques[v];if(!1!==g._kindState&&(u.isLineMarkerTechnique(g)||u.isPoiTechnique(g))&&!1!==g.showOnMap){var y=new c.BufferAttribute(new Float64Array(m.positions.buffer),m.positions.itemCount);f.withTechnique(g),u.isLineMarkerTechnique(g)&&y.count>0?this.addLineMarker(f,e,m,y,i):u.isPoiTechnique(g)&&this.addPoi(f,e,m,y,i)}}}catch(x){p.e(x)}finally{p.f()}}},{key:"addTextureAtlas",value:function(){var e=i(r.mark((function e(t,n,i){var o,s,u,l,c,d,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{signal:i});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("addTextureAtlas: Cannot load textureAtlas: ".concat(o.statusText));case 5:return e.prev=5,e.next=8,o.json();case 8:if(void 0!==(s=e.sent)){e.next=12;break}return h.info("addTextureAtlas: TextureAtlas empty: ".concat(n)),e.abrupt("return");case 12:h.debug("addTextureAtlas: Loading textureAtlas '".concat(n,"' for image '").concat(t,"'")),u=a(Object.getOwnPropertyNames(s));try{for(u.s();!(l=u.n()).done;)c=l.value,d=s[c],f={name:c,image:t,xOffset:d.x,yOffset:d.y,width:d.width,height:d.height},this.addImageTexture(f)}catch(r){u.e(r)}finally{u.f()}this.mapView.update(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),h.error("addTextureAtlas: Failed to load textureAtlas '".concat(n,"' : ").concat(e.t0));case 21:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"addImageTexture",value:function(e){void 0!==e.name?(void 0!==this.m_imageTextures.get(e.name)&&h.warn("addImageTexture: Name already used: ".concat(e.name)+" (overriding it)"),this.m_imageTextures.set(e.name,e)):h.error("addImageTexture: Name required",e)}},{key:"getImageTexture",value:function(e){return this.m_imageTextures.get(e)}},{key:"updatePoiFromPoiTable",value:function(t){var n,r,i,a,o,s,l=t.poiInfo;if(!l||void 0===l.poiTableName||void 0===l.poiName)return!0;var c=l.poiTableName,h=this.mapView.poiTableManager.getPoiTable(c);if(h&&h.isLoading)return!1;if(l.poiTableName=void 0,!h||!h.loadedOk)return e.notifyMissingPoiTable(c,h),!0;var f=l.poiName,p=h.getEntry(f);return p?(void 0!==p.iconName&&p.iconName.length>0&&(l.imageTextureName=u.composeTechniqueTextureName(p.iconName,l.technique)),t.visible=null!==(n=p.visible)&&void 0!==n?n:t.visible,t.priority=null!==(r=p.priority)&&void 0!==r?r:t.priority,l.iconMinZoomLevel=null!==(i=p.iconMinLevel)&&void 0!==i?i:l.iconMinZoomLevel,l.iconMaxZoomLevel=null!==(a=p.iconMaxLevel)&&void 0!==a?a:l.iconMaxZoomLevel,l.textMinZoomLevel=null!==(o=p.textMinLevel)&&void 0!==o?o:l.textMinZoomLevel,l.textMaxZoomLevel=null!==(s=p.textMaxLevel)&&void 0!==s?s:l.textMaxZoomLevel,d.TextElementBuilder.alignZoomLevelRanges(t),!0):(e.notifyMissingPoi(f,c),!0)}},{key:"clear",value:function(){this.m_imageTextures.clear(),this.m_poiShieldGroups.clear()}},{key:"addLineMarker",value:function(e,t,n,r,i){var a=v(n),o=f(n),s=o+"-"+a,u=this.m_poiShieldGroups.get(s);void 0===u&&(u=this.m_poiShieldGroups.size,this.m_poiShieldGroups.set(s,u));for(var l=[],c=0;c<r.count;c+=3)l.push(m(r,i,c));var d=e.withIcon(o,u).build(a,l,t.offset,t.dataSource.name,t.dataSource.dataSourceOrder,p(n));t.addTextElement(d)}},{key:"addPoi",value:function(e,t,n,r,i){for(var a,o,s=0;s<r.count;++s){var u=null!==(o=null===(a=n.offsetDirections)||void 0===a?void 0:a[s])&&void 0!==o?o:0,l=e.withIcon(f(n,s)).build(v(n,s),m(r,i,s),t.offset,t.dataSource.name,t.dataSource.dataSourceOrder,p(n,s),void 0,u);t.addTextElement(l)}}}],[{key:"notifyMissingPoiTable",value:function(t,n){void 0===t&&(t="undefined"),void 0===e.m_missingPoiTableName.get(t)&&(e.m_missingPoiTableName.set(t,!0),void 0===n||n.loadedOk?h.error("updatePoiFromPoiTable: No POI table with name '".concat(t,"' found!")):h.error("updatePoiFromPoiTable: Could not load POI table '".concat(t,"'!")))}},{key:"notifyMissingPoi",value:function(t,n){void 0===t&&(t="undefined");var r="".concat(n,"[").concat(t,"]");void 0===e.m_missingPoiName.get(r)&&(e.m_missingPoiName.set(r,!0),h.warn("updatePoiFromPoiTable: "+"Cannot find POI info for '".concat(t,"' in table '").concat(n,"'.")))}}]),e}();t.PoiManager=g,g.m_missingPoiTableName=new Map,g.m_missingPoiName=new Map},1830:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PoiRenderer=t.PoiBatchRegistry=t.PoiBuffer=void 0;var o=n(26309),s=n(85164),u=n(15739),l=n(34585),c=n(1870),d=n(87094),h=u.LoggerManager.instance.create("PoiRenderer"),f=new l.Color(1,1,1),p=new l.Color,m=function(){function e(t,n,r){i(this,e),this.buffer=t,this.layer=n,this.m_onDispose=r,this.m_refCount=0}return a(e,[{key:"increaseRefCount",value:function(){return++this.m_refCount,this}},{key:"decreaseRefCount",value:function(){return u.assert(this.m_refCount>0),0===--this.m_refCount&&this.dispose(),this}},{key:"dispose",value:function(){this.layer.scene.remove(this.buffer.mesh),this.buffer.dispose(),this.m_onDispose()}}]),e}();t.PoiBuffer=m;var v=function(){function e(t,n,r){i(this,e),this.m_rendererCapabilities=t,this.imageItem=n,this.m_onDispose=r;var a=new l.Texture(this.imageItem.image,l.UVMapping,void 0,void 0,(e.trilinear,l.LinearFilter),e.trilinear?l.LinearMipMapLinearFilter:l.LinearFilter,l.RGBAFormat);e.trilinear&&this.imageItem.mipMaps&&(a.mipmaps=this.imageItem.mipMaps,a.image=a.mipmaps[0]),a.flipY=!1,a.premultiplyAlpha=!0,a.needsUpdate=!0,this.m_material=new s.IconMaterial({rendererCapabilities:this.m_rendererCapabilities,map:a}),this.m_poiBuffers=new Map}return a(e,[{key:"getBuffer",value:function(e){var t=this,n=this.m_poiBuffers.get(e.id);if(n)return n.increaseRefCount();var r=new d.BoxBuffer(this.m_material,e.id),i=r.mesh;return i.frustumCulled=!1,e.scene.add(i),n=new m(r,e,(function(){t.disposeBuffer(e.id)})),this.m_poiBuffers.set(e.id,n),n.increaseRefCount()}},{key:"reset",value:function(){var e,t=r(this.m_poiBuffers.values());try{for(t.s();!(e=t.n()).done;){e.value.buffer.reset()}}catch(n){t.e(n)}finally{t.f()}}},{key:"update",value:function(){var e,t=r(this.m_poiBuffers.values());try{for(t.s();!(e=t.n()).done;){e.value.buffer.updateBufferGeometry()}}catch(n){t.e(n)}finally{t.f()}}},{key:"pickBoxes",value:function(e,t,n){var i,a=r(this.m_poiBuffers.values());try{for(a.s();!(i=a.n()).done;){i.value.buffer.pickBoxes(e,t,n)}}catch(o){a.e(o)}finally{a.f()}}},{key:"updateMemoryUsage",value:function(e){if(void 0!==this.imageItem.image){var t=this.imageItem.image.width*this.imageItem.image.height*4;e.heapSize+=t,e.gpuSize+=t}var n,i=r(this.m_poiBuffers.values());try{for(i.s();!(n=i.n()).done;){n.value.buffer.updateMemoryUsage(e)}}catch(a){i.e(a)}finally{i.f()}}},{key:"dispose",value:function(){this.m_poiBuffers.clear(),this.m_material.map.dispose(),this.m_material.dispose(),this.m_onDispose()}},{key:"disposeBuffer",value:function(e){u.assert(this.m_poiBuffers.size>0),this.m_poiBuffers.delete(e),0===this.m_poiBuffers.size&&this.dispose()}}]),e}();v.trilinear=!0;var g=function(){function e(t){i(this,e),this.m_rendererCapabilities=t,this.m_batchMap=new Map}return a(e,[{key:"registerPoi",value:function(e,t){var n,r=this,i=e.imageItem,a=e.imageTexture;if(i){u.assert(void 0!==e.imageTextureName);var o=null!==(n=null===a||void 0===a?void 0:a.image)&&void 0!==n?n:e.imageTextureName,s=this.m_batchMap.get(o);return void 0===s&&(s=new v(this.m_rendererCapabilities,i,(function(){r.deleteBatch(o)})),this.m_batchMap.set(o,s)),s.getBuffer(t)}}},{key:"addPoi",value:function(e,t,n,r){var i;!1!==e.isValid&&e.buffer?(u.assert(void 0!==e.uvBox),void 0!==e.iconBrightness?(i=p.setScalar(e.iconBrightness),void 0!==e.iconColor&&(i=p.multiply(e.iconColor))):i=void 0!==e.iconColor?e.iconColor:f,e.buffer.buffer.addBox(t,e.uvBox,i,r,n,e.textElement)):h.warn("PoiBatchRegistry: trying to add poiInfo without buffer prepared: ",e.poiName)}},{key:"reset",value:function(){var e,t=r(this.m_batchMap.values());try{for(t.s();!(e=t.n()).done;){e.value.reset()}}catch(n){t.e(n)}finally{t.f()}}},{key:"update",value:function(){var e,t=r(this.m_batchMap.values());try{for(t.s();!(e=t.n()).done;){e.value.update()}}catch(n){t.e(n)}finally{t.f()}}},{key:"pickTextElements",value:function(e,t){var n,i=r(this.m_batchMap.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;a.pickBoxes(e,t,a.imageItem.image)}}catch(o){i.e(o)}finally{i.f()}}},{key:"updateMemoryUsage",value:function(e){var t,n=r(this.m_batchMap.values());try{for(n.s();!(t=n.n()).done;){t.value.updateMemoryUsage(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"deleteBatch",value:function(e){this.m_batchMap.delete(e)}}]),e}();t.PoiBatchRegistry=g;var y=new Map;var x=function(){function e(t,n,r){i(this,e),this.m_renderer=t,this.m_poiManager=n,this.m_imageCaches=r,this.m_tempScreenBox=new u.Math2D.Box,this.m_layers=[],this.m_poiBatchRegistry=new g(this.renderer.capabilities)}return a(e,[{key:"renderer",get:function(){return this.m_renderer}},{key:"prepareRender",value:function(e,t){var n=e.poiInfo;return void 0!==n&&(void 0===n.buffer&&this.preparePoi(e,t),void 0!==n.buffer)}},{key:"reset",value:function(){this.m_poiBatchRegistry.reset()}},{key:"addPoi",value:function(t,n,r,i,a,o,s,l){u.assert(void 0!==t.buffer),e.computeIconScreenBox(t,n,a,l,this.m_tempScreenBox),o&&r.allocate(this.m_tempScreenBox),s>0&&(t.buffer||this.preparePoi(t.textElement,l),this.m_poiBatchRegistry.addPoi(t,this.m_tempScreenBox,i,s))}},{key:"update",value:function(){this.m_poiBatchRegistry.update()}},{key:"addLayer",value:function(e){var t=this.getLayer(e);return void 0===t&&(t={id:e,scene:new l.Scene},this.m_layers.push(t),this.m_layers.sort((function(e,t){return e.id-t.id}))),t}},{key:"getLayer",value:function(e){return this.m_layers.find((function(t){return t.id===e}))}},{key:"layers",get:function(){return this.m_layers}},{key:"render",value:function(e,t){this.m_renderer.render(t.scene,e)}},{key:"pickTextElements",value:function(e,t){this.m_poiBatchRegistry.pickTextElements(e,t)}},{key:"getMemoryUsage",value:function(e){this.m_poiBatchRegistry.updateMemoryUsage(e)}},{key:"preparePoi",value:function(e,t){var n=this,i=e.poiInfo;if(i&&e.visible&&void 0===i.buffer&&!1!==i.isValid){if(void 0!==i.poiTableName){if(!this.m_poiManager.updatePoiFromPoiTable(e))return;if(!e.visible)return}var a=i.imageTextureName;if(void 0!==a){var o=this.m_poiManager.getImageTexture(a),s=function(e,t,n){var i;u.assert(void 0!==e.imageTextureName);var a,o=n?n.image:e.imageTextureName,s=r(t);try{for(s.s();!(a=s.n()).done;){var l=a.value.findImageByName(o);if(l)return y.delete(o),l}}catch(d){s.e(d)}finally{s.f()}var c=y.get(o);y.set(o,c?c+1:0),5===y.get(o)&&h.error("PoiRenderer::findImageItem: No imageItem found with name:\n            '".concat(null!==(i=null===n||void 0===n?void 0:n.image)&&void 0!==i?i:o,"'\n            after ").concat(5," attempts."))}(i,this.m_imageCaches,o);s&&(s.loaded?this.setupPoiInfo(i,s,t,o):s.loading||s.loadImage().then((function(e){(null===e||void 0===e?void 0:e.image)&&n.setupPoiInfo(i,e,t,o)})).catch((function(e){h.error("preparePoi: Failed to load imageItem: '".concat(s.url),e),i.isValid=!1})))}else i.isValid=!1}}},{key:"setupPoiInfo",value:function(e,t,n,r){if(u.assert(void 0===e.uvBox),!t.image)return h.error("setupPoiInfo: No imageItem/imageData found"),void(e.isValid=!1);var i=e.technique,a=t.image.width,s=t.image.height,l=c.MipMapGenerator.getPaddedSize(a,s),d=v.trilinear&&t.mipMaps,f=d?l.width:a,p=d?l.height:s,m=void 0!==(null===r||void 0===r?void 0:r.width)?r.width:a,g=void 0!==(null===r||void 0===r?void 0:r.height)?r.height:s,y=void 0!==(null===r||void 0===r?void 0:r.width)?r.width:a,x=void 0!==(null===r||void 0===r?void 0:r.height)?r.height:s,_=void 0!==(null===r||void 0===r?void 0:r.xOffset)?r.xOffset:0,b=void 0!==(null===r||void 0===r?void 0:r.yOffset)?r.yOffset:0,w=_/f,S=(_+y)/f,M=b/p,E=(b+x)/p,T=void 0!==i.iconScale?i.iconScale:1,k=void 0!==i.iconScale?i.iconScale:1,C=o.getPropertyValue(i.screenWidth,n);void 0!==C&&null!==C&&(k=T=C/m);var A=o.getPropertyValue(i.screenHeight,n);void 0!==A&&null!==A&&(k=A/g,void 0!==C&&(T=k)),e.computedWidth=m*T,e.computedHeight=g*k,e.uvBox={s0:w,t0:E,s1:S,t1:M},e.imageItem=t,e.imageTexture=r,e.buffer=this.m_poiBatchRegistry.registerPoi(e,this.addLayer(e.renderOrder)),e.isValid=!0}}],[{key:"computeIconScreenBox",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new u.Math2D.Box;u.assert(void 0!==e.buffer);var a=e.computedWidth*n,s=e.computedHeight*n,l=e.technique,c=o.getPropertyValue(l.iconXOffset,r),d=o.getPropertyValue(l.iconYOffset,r),h=t.x+("number"===typeof c?c:0)*n,f=t.y+("number"===typeof d?d:0)*n;return i.x=h-a/2,i.y=f-s/2,i.w=a,i.h=s,i}}]),e}();t.PoiRenderer=x},6549:function(e,t,n){"use strict";var r=n(87757),i=n(43269).default,a=n(48926).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PoiTableManager=t.PoiTable=void 0;var u=n(26309),l=n(15739).LoggerManager.instance.create("PoiTable"),c=function(){function e(){o(this,e)}return s(e,[{key:"setup",value:function(e){switch(this.name=e.name,this.altNames=e.altNames,this.iconName=e.iconName,this.visible=e.visible,this.priority=e.priority,this.iconMinLevel=e.iconMinLevel,this.iconMaxLevel=e.iconMaxLevel,this.textMinLevel=e.textMinLevel,this.textMaxLevel=e.textMaxLevel,e.stackMode){case"yes":this.stackMode=u.PoiStackMode.Show;break;case"no":this.stackMode=u.PoiStackMode.Hide;break;case"parent":this.stackMode=u.PoiStackMode.ShowParent}}}],[{key:"verifyJSON",value:function(e){var t="string"===typeof e.name&&e.name.length>0&&(void 0===e.altNames||Array.isArray(e.altNames))&&(void 0===e.stackMode||"yes"===e.stackMode||"no"===e.stackMode||"parent"===e.stackMode)&&(void 0===e.visible||"boolean"===typeof e.visible)&&(void 0===e.priority||"number"===typeof e.priority)&&(void 0===e.iconMinLevel||"number"===typeof e.iconMinLevel)&&(void 0===e.iconMaxLevel||"number"===typeof e.iconMaxLevel)&&(void 0===e.textMinLevel||"number"===typeof e.textMinLevel)&&(void 0===e.textMaxLevel||"number"===typeof e.textMaxLevel);if(t&&void 0!==e.altNames){var n=e.altNames;for(var r in n)if("string"!==typeof r){t=!1;break}}return t}}]),e}(),d=function(){function e(t,n){o(this,e),this.name=t,this.useAltNamesForKey=n,this.poiList=new Array,this.poiDict=new Map,this.m_isLoading=!1,this.m_loadedOk=void 0}return s(e,[{key:"isLoading",get:function(){return this.m_isLoading}},{key:"loadedOk",get:function(){return!0===this.m_loadedOk}},{key:"getEntry",value:function(e){var t=this.poiDict.get(e);if(void 0!==t){if(t<this.poiList.length)return this.poiList[t];throw new Error("Poi table entry index out of stored list!")}}},{key:"load",value:function(){var e=a(r.mark((function e(t,n){var a,o,s,u,d,h,f,p,m,v;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.m_loadedOk){e.next=2;break}return e.abrupt("return",!0);case 2:return this.m_loadedOk=!1,e.next=5,fetch(t,{signal:n});case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("load: Cannot load POI table at ".concat(t,":")+" ".concat(a.statusText));case 8:return e.next=10,a.json();case 10:if(void 0!==(o=e.sent)){e.next=14;break}return l.info("load: TextureAtlas empty: ".concat(t)),e.abrupt("return",!0);case 14:if(this.startLoading(),e.prev=15,l.debug("load: Loading POI table '".concat(t,"' for table '").concat(this.name,"'")),void 0!==o.poiList&&Array.isArray(o.poiList)){s=i(o.poiList);try{for(s.s();!(u=s.n()).done;)if(d=u.value,c.verifyJSON(d))if((h=new c).setup(d),f=this.poiList.push(h)-1,this.useAltNamesForKey)if(void 0!==h.altNames&&h.altNames.length>0){p=i(h.altNames);try{for(p.s();!(m=p.n()).done;)v=m.value,this.poiDict.set(v,f)}catch(r){p.e(r)}finally{p.f()}}else l.debug("load: Invalid entry in POI table '".concat(t,"' : ")+"No alternative names set in entry: ".concat(JSON.stringify(d),"."));else void 0===h.name?l.warn("load: Invalid entry in POI table '".concat(t,"' : ")+". No name set in entry: ".concat(d,".")):this.poiDict.set(h.name,f);else l.warn("load: Invalid entry in POI table '".concat(t,"' : ").concat(JSON.stringify(d)))}catch(r){s.e(r)}finally{s.f()}}this.m_loadedOk=!0,this.finishedLoading(),e.next=28;break;case 22:return e.prev=22,e.t0=e.catch(15),l.error("load: Failed to load POI table "+"'".concat(t,"' : ").concat(e.t0)),this.m_loadedOk=!1,this.finishedLoading(),e.abrupt("return",!1);case 28:return e.abrupt("return",!0);case 29:case"end":return e.stop()}}),e,this,[[15,22]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"startLoading",value:function(){this.m_isLoading=!0}},{key:"finishedLoading",value:function(){this.m_isLoading=!1}}]),e}();t.PoiTable=d;var h=function(){function e(t){o(this,e),this.mapView=t,this.m_isLoading=!1,this.m_poiTables=new Map,this.m_abortControllers=new Map}return s(e,[{key:"loadPoiTables",value:function(){var e=a(r.mark((function e(t){var n,i=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e){if(i.clear(),void 0!==t){i.startLoading();var n=new Array;t.forEach((function(e){var t;if(void 0!==e&&void 0!==e.name&&"string"===typeof e.name){var r=new d(e.name,!1!==e.useAltNamesForKey);void 0!==e.url&&"string"===typeof e.url?(i.addTable(r),i.m_abortControllers.set(e.name,new AbortController),n.push(r.load(e.url,null===(t=i.m_abortControllers.get(e.name))||void 0===t?void 0:t.signal))):l.error("POI table definition has no valid url: ".concat(e))}else l.error("POI table definition has no valid name: ".concat(e))})),n.length>0?Promise.all(n).finally((function(){i.finishLoading(),e()})):(i.finishLoading(),e())}else i.finishLoading(),e()})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=this;this.m_poiTables=new Map,this.m_abortControllers.forEach((function(t,n){t.abort(),e.m_abortControllers.delete(n)}))}},{key:"poiTables",get:function(){return this.m_poiTables}},{key:"addTable",value:function(e){this.m_poiTables.set(e.name,e)}},{key:"getPoiTable",value:function(e){return void 0===e?void 0:this.m_poiTables.get(e)}},{key:"finishedLoading",get:function(){return!this.m_isLoading}},{key:"startLoading",value:function(){this.m_isLoading=!0}},{key:"finishLoading",value:function(){this.m_isLoading=!1}}]),e}();t.PoiTableManager=h},3757:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default;Object.defineProperty(t,"__esModule",{value:!0}),t.loadFontCatalog=void 0;var a=n(21690),o=n(15739).LoggerManager.instance.create("FontCatalogLoader");function s(){return(s=i(r.mark((function e(t,n,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.FontCatalog.load(t.url,1024).then(n.bind(void 0,t.name)).catch((function(e){o.error("Failed to load FontCatalog: ",t.name,e),i&&i(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.loadFontCatalog=function(e,t,n){return s.apply(this,arguments)}},3422:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutState=void 0;var a=n(21690),o=function(){function e(t){r(this,e),this.m_hAlign=a.DefaultTextStyle.DEFAULT_HORIZONTAL_ALIGNMENT,this.m_vAlign=a.DefaultTextStyle.DEFAULT_VERTICAL_ALIGNMENT,this.textPlacement=t}return i(e,[{key:"textPlacement",get:function(){return{h:a.hPlacementFromAlignment(this.m_hAlign),v:a.vPlacementFromAlignment(this.m_vAlign)}},set:function(e){this.m_hAlign=a.hAlignFromPlacement(e.h),this.m_vAlign=a.vAlignFromPlacement(e.v)}},{key:"reset",value:function(e){this.m_hAlign=e.horizontalAlignment,this.m_vAlign=e.verticalAlignment}},{key:"horizontalAlignment",get:function(){return this.m_hAlign}},{key:"verticalAlignment",get:function(){return this.m_vAlign}}]),e}();t.LayoutState=o},91088:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewState=void 0;var a=n(34585),o=function(){function e(t,n){r(this,e),this.m_mapView=t,this.m_renderedTilesChangeCheck=n,this.m_lookAtVector=new a.Vector3}return i(e,[{key:"worldCenter",get:function(){return this.m_mapView.worldCenter}},{key:"cameraIsMoving",get:function(){return this.m_mapView.cameraIsMoving}},{key:"maxVisibilityDist",get:function(){return this.m_mapView.viewRanges.maximum}},{key:"zoomLevel",get:function(){return this.m_mapView.zoomLevel}},{key:"env",get:function(){return this.m_mapView.env}},{key:"frameNumber",get:function(){return this.m_mapView.frameNumber}},{key:"lookAtVector",get:function(){return this.m_mapView.camera.getWorldDirection(this.m_lookAtVector)}},{key:"lookAtDistance",get:function(){return this.m_mapView.targetDistance}},{key:"isDynamic",get:function(){return this.m_mapView.isDynamicFrame}},{key:"hiddenGeometryKinds",get:function(){return void 0===this.m_mapView.tileGeometryManager?void 0:this.m_mapView.tileGeometryManager.hiddenGeometryKinds}},{key:"renderedTilesChanged",get:function(){return this.m_renderedTilesChangeCheck()}},{key:"projection",get:function(){return this.m_mapView.projection}},{key:"elevationProvider",get:function(){return this.m_mapView.elevationProvider}}]),e}();t.MapViewState=o},30202:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getWorldPosition=t.isPathLabelTooSmall=t.placePathLabel=t.placePointLabel=t.placeIcon=t.PlacementResult=t.newPointLabelTextMarginPercent=t.persistentPointLabelTextMargin=t.checkReadyForPlacement=t.PrePlacementResult=t.getMaxViewDistance=t.pointToPlaneDistance=t.computeViewDistance=void 0;var i,a=n(26309),o=n(31201),s=n(21690),u=n(15739),l=n(34585),c=n(1830),d=n(59456),h=n(92301),f=n(25557),p=new l.Vector3(0,0,0),m=new l.Vector3(0,0,0),v=new l.Vector3(0,0,0);function g(e,t,n,r){var i,a=e.path;if(a&&a.length>1)if(void 0!==t&&a&&a.length>t)i=y(a[t],n,r);else{var o=y(a[0],n,r),s=y(a[a.length-1],n,r);i=Math.min(o,s)}else i=y(e.position,n,r);return i}function y(e,t,n){return v.copy(e).sub(t).dot(n)}t.computeViewDistance=g,t.pointToPlaneDistance=y,t.getMaxViewDistance=function(e,t){return e.maxVisibilityDist*t},function(e){e[e.Ok=0]="Ok",e[e.NotReady=1]="NotReady",e[e.Invisible=2]="Invisible",e[e.TooFar=3]="TooFar",e[e.Duplicate=4]="Duplicate",e[e.Count=5]="Count"}(i=t.PrePlacementResult||(t.PrePlacementResult={}));var x=new l.Vector3;t.checkReadyForPlacement=function(e,t,n,r,a){var s;return e.visible?r.updatePoiFromPoiTable(e)?e.visible&&n.zoomLevel!==e.maxZoomLevel&&u.MathUtils.isClamped(n.zoomLevel,e.minZoomLevel,e.maxZoomLevel)?(s=void 0===a?g(e,t,n.worldCenter,n.lookAtVector):function(e,t,n,r,i,a){var s=g(e,t,n,r);return i!==o.ProjectionType.Spherical?s<=a?s:void 0:(p.copy(e.position).normalize(),m.copy(n).normalize(),p.dot(m)>.5877852522924731&&s<=a?s:void 0)}(e,t,n.worldCenter,n.lookAtVector,n.projection.type,a),void 0===s?{result:i.TooFar,viewDistance:s}:{result:i.Ok,viewDistance:s}):{result:i.Invisible,viewDistance:s}:{result:i.NotReady,viewDistance:s}:{result:i.Invisible,viewDistance:s}};var _,b=new l.Box2,w=new l.Box2,S=[],M={},E=[],T=new d.CollisionBox,k=new l.Vector2,C=new l.Vector2,A=new u.Math2D.Box,P=new l.Vector2,O=new l.Vector2;function L(e,t,n,r,i,a,o){u.assert(void 0!==e.element.layoutStyle);var s=e.element,l=e.visible,c=e.textPlacement,d=s.layoutStyle.placements,h=d.length,f=d.findIndex((function(e){return e.h===c.h&&e.v===c.v}));u.assert(f>=0);for(var p=!0,m=f;m<h+f;++m){var v=m===f&&l,g=D(e,t,d[m%h],n,r,i,a,!v,x);if(g===_.Ok)return o.copy(x),_.Ok;v&&o.copy(x),p=p&&g===_.Invisible}return p?_.Invisible:_.Rejected}function R(e,t,n,r,i,a,o){return u.assert(void 0!==e.element.layoutStyle),D(e,t,e.textPlacement,n,r,i,a,!e.visible,o)}function D(e,n,r,i,o,c,d,p,m){var v=e.element;u.assert(void 0!==v.glyphs),u.assert(void 0!==v.layoutStyle);var g=!v.bounds||p,y=g?w:v.bounds;g&&(I(o,r),M.outputCharacterBounds=void 0,M.path=void 0,M.pathOverflow=!1,M.letterCaseArray=v.glyphCaseArray,o.measureText(v.glyphs,y,M));var x=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new l.Vector2;switch(u.assert(e.type===f.TextElementType.PoiLabel||e.type===f.TextElementType.LineMarker),u.assert(void 0!==e.layoutStyle),o.x=e.xOffset,o.y=e.yOffset,n.h){case s.HorizontalPlacement.Left:o.x-=t.max.x;break;case s.HorizontalPlacement.Right:o.x-=t.min.x}switch(n.v){case s.VerticalPlacement.Top:o.y-=t.min.y;break;case s.VerticalPlacement.Center:o.y-=.5*(t.max.y+t.min.y);break;case s.VerticalPlacement.Bottom:o.y-=t.max.y}if(void 0!==e.poiInfo&&h.poiIsRenderable(e.poiInfo)){u.assert(void 0!==e.poiInfo.computedWidth),u.assert(void 0!==e.poiInfo.computedHeight),o.x+=e.poiInfo.computedWidth*(.5+n.h),o.y+=e.poiInfo.computedHeight*(.5+n.v);var c=s.hPlacementFromAlignment(e.layoutStyle.horizontalAlignment),d=s.vPlacementFromAlignment(e.layoutStyle.verticalAlignment);if(c!==n.h||d!==n.v){var p=e.poiInfo.technique,m=a.getPropertyValue(p.iconXOffset,i),v=a.getPropertyValue(p.iconYOffset,i);m="number"===typeof m?m:0,v="number"===typeof v?v:0;var g=c-n.h,y=d-n.v,x=m-e.xOffset,_=v-e.yOffset;c===s.HorizontalPlacement.Center||d===s.VerticalPlacement.Center?(o.x+=2*Math.abs(g)*x,o.y-=2*y*Math.abs(x),o.y+=2*Math.abs(y)*_,o.x-=2*g*Math.abs(_)):(o.x+=2*Math.min(Math.abs(g),.5)*x,o.y-=2*Math.sign(y)*Math.min(Math.abs(y),.5)*Math.abs(x),o.y+=2*Math.min(Math.abs(y),.5)*_,o.x-=2*Math.sign(g)*Math.min(Math.abs(g),.5)*Math.abs(_))}}return o.multiplyScalar(r),o}(v,y,r,i,c,C).add(n);return m.set(x.x,x.y,e.renderDistance),b.copy(y).expandByVector(t.persistentPointLabelTextMargin).translate(x),b.getCenter(P),b.getSize(O),O.multiplyScalar(i),A.set(P.x-O.x/2,P.y-O.y/2,O.x,O.y),d.isVisible(A)?(g&&(b.getSize(O),O.multiplyScalar(i*(1+t.newPointLabelTextMarginPercent)),A.set(P.x-O.x/2,P.y-O.y/2,O.x,O.y)),!v.textMayOverlap&&d.isAllocated(A)?_.Rejected:(v.textReservesSpace&&d.allocate(A),g?(v.textBufferObject=void 0,v.bounds=v.bounds?v.bounds.copy(y):y.clone()):I(o,r),e.textPlacement=r,_.Ok)):_.Invisible}function I(e,t){e.textLayoutStyle.horizontalAlignment=s.hAlignFromPlacement(t.h),e.textLayoutStyle.verticalAlignment=s.vAlignFromPlacement(t.v)}t.persistentPointLabelTextMargin=new l.Vector2(2,2),t.newPointLabelTextMarginPercent=.1,function(e){e[e.Ok=0]="Ok",e[e.Rejected=1]="Rejected",e[e.Invisible=2]="Invisible"}(_=t.PlacementResult||(t.PlacementResult={})),t.placeIcon=function(e,t,n,r,i,a){return c.PoiRenderer.computeIconScreenBox(t,n,r,i,A),a.isVisible(A)?!0===t.mayOverlap||!a.isAllocated(A)?_.Ok:_.Rejected:_.Invisible},t.placePointLabel=function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];u.assert(void 0!==e.element.layoutStyle);var l=e.element.layoutStyle;return(s=s&&void 0!==l.placements&&l.placements.length>1)?L(e,t,n,r,i,a,o):R(e,t,n,r,i,a,o)},t.placePathLabel=function(e,t,n,r,i){if(M.path=t,M.outputCharacterBounds=S,M.letterCaseArray=e.element.glyphCaseArray,!r.measureText(e.element.glyphs,b,M))return _.Rejected;if(T.copy(b.translate(n)),!i.isVisible(T))return _.Invisible;var a,o=!1;e.element.textMayOverlap||(o=(a=i.search(T)).length>0),E.length=S.length;for(var s=0;s<S.length;++s){var u=S[s].translate(n),l=E[s];if(void 0===l?(l=new d.CollisionBox(u),E[s]=l):l.copy(u),o&&i.intersectsDetails(l,a))return _.Rejected}if(e.element.textReservesSpace){var c=new d.DetailedCollisionBox(T,E.slice());E.length=0,i.allocate(c)}return _.Ok},t.isPathLabelTooSmall=function(e,t,n){u.assert(e.type===f.TextElementType.PathLabel),n.length=0;var i,a=!1,o=r(e.points);try{for(o.s();!(i=o.n()).done;){var s=i.value;void 0!==(a?t.project(s,k):t.projectToScreen(s,k))&&(a=!0,n.push(k.clone()))}}catch(c){o.e(c)}finally{o.f()}if(!a)return!0;var l=5*e.text.length;return b.setFromPoints(n),b.max.sub(b.min).lengthSq()<l*l&&(e.dbgPathTooSmall=!0,!0)};var F=new o.OrientedBox3;t.getWorldPosition=function(e,t,n,r){var i,o,s=a.getPropertyValue(null===(o=null===(i=e.poiInfo)||void 0===i?void 0:i.technique)||void 0===o?void 0:o.worldOffset,n);if(null===r||void 0===r||r.copy(e.position),null!==s&&void 0!==s&&void 0!==e.offsetDirection){t.localTangentSpace(e.position,F);var u=F.yAxis,c=l.MathUtils.degToRad(e.offsetDirection);u.applyAxisAngle(F.zAxis.negate(),c),r.addScaledVector(F.yAxis,s)}return r}},60294:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PlacementStats=void 0;var a=function(){function e(t){r(this,e),this.m_logger=t,this.totalGroups=0,this.resortedGroups=0,this.total=0,this.uninitialized=0,this.tooFar=0,this.numNotVisible=0,this.numPathTooSmall=0,this.numCannotAdd=0,this.numRenderedPoiIcons=0,this.numRenderedPoiTexts=0,this.numPoiTextsInvisible=0,this.numRenderedTextElements=0}return i(e,[{key:"clear",value:function(){this.totalGroups=0,this.resortedGroups=0,this.total=0,this.uninitialized=0,this.tooFar=0,this.numNotVisible=0,this.numPathTooSmall=0,this.numCannotAdd=0,this.numRenderedPoiIcons=0,this.numRenderedPoiTexts=0,this.numPoiTextsInvisible=0,this.numRenderedTextElements=0}},{key:"log",value:function(){var e=this.uninitialized+this.numPoiTextsInvisible+this.tooFar+this.numNotVisible+this.numCannotAdd;this.m_logger.debug("Total groups",this.totalGroups),this.m_logger.debug("Resorted groups",this.resortedGroups),this.m_logger.debug("Total labels",this.total),this.m_logger.debug("Rendered labels",this.numRenderedTextElements),this.m_logger.debug("Rejected labels",e),this.m_logger.debug("Unitialized labels",this.uninitialized),this.m_logger.debug("Rendered poi icons",this.numRenderedPoiIcons),this.m_logger.debug("Rendered poi texts",this.numRenderedPoiTexts),this.m_logger.debug("Poi text invisible",this.numPoiTextsInvisible),this.m_logger.debug("Too far",this.tooFar),this.m_logger.debug("Not visible",this.numNotVisible),this.m_logger.debug("Path too small",this.numPathTooSmall),this.m_logger.debug("Rejected, max glyphs reached",this.numCannotAdd)}}]),e}();t.PlacementStats=a},60923:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RenderState=t.DEFAULT_FADE_TIME=t.FadingState=void 0;var a,o=n(15739),s=n(34585);!function(e){e[e.Undefined=0]="Undefined",e[e.FadingIn=1]="FadingIn",e[e.FadedIn=2]="FadedIn",e[e.FadingOut=-1]="FadingOut",e[e.FadedOut=-2]="FadedOut"}(a=t.FadingState||(t.FadingState={})),t.DEFAULT_FADE_TIME=800;var u=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_FADE_TIME;r(this,e),this.fadeTime=n,this.value=0,this.startTime=0,this.opacity=0,this.m_state=a.Undefined}return i(e,[{key:"reset",value:function(){this.m_state=a.Undefined,this.value=0,this.startTime=0,this.opacity=0}},{key:"isUndefined",value:function(){return this.m_state===a.Undefined}},{key:"isFading",value:function(){return this.m_state===a.FadingIn||this.m_state===a.FadingOut}},{key:"isFadingIn",value:function(){return this.m_state===a.FadingIn}},{key:"isFadingOut",value:function(){return this.m_state===a.FadingOut}},{key:"isFadedIn",value:function(){return this.m_state===a.FadedIn}},{key:"isFadedOut",value:function(){return this.m_state===a.FadedOut}},{key:"isVisible",value:function(){return this.m_state!==a.FadedOut&&this.m_state!==a.Undefined&&this.opacity>0}},{key:"startFadeIn",value:function(e,t){if(this.m_state!==a.FadingIn&&this.m_state!==a.FadedIn){if(!0===t)return this.value=1,this.opacity=1,this.m_state=a.FadedIn,void(this.startTime=e);this.m_state===a.FadingOut?(this.value=1-this.value,this.startTime=e-this.value*this.fadeTime):(this.startTime=e,this.value=0,this.opacity=0),this.m_state=a.FadingIn}}},{key:"startFadeOut",value:function(e){this.m_state!==a.FadingOut&&this.m_state!==a.FadedOut&&this.m_state!==a.Undefined&&(this.m_state===a.FadingIn?(this.startTime=e-this.value*this.fadeTime,this.value=1-this.value):(this.startTime=e,this.value=0,this.opacity=1),this.m_state=a.FadingOut)}},{key:"updateFading",value:function(e,t){if(this.m_state===a.FadingIn||this.m_state===a.FadingOut){0===this.startTime&&(this.startTime=e);var n=e-this.startTime,r=this.m_state===a.FadingIn?0:1,i=this.m_state===a.FadingIn?1:0;t||n>=this.fadeTime?(this.value=1,this.opacity=i,this.m_state=this.m_state===a.FadingIn?a.FadedIn:a.FadedOut):(this.value=n/this.fadeTime,this.opacity=s.MathUtils.clamp(o.MathUtils.smootherStep(r,i,this.value),0,1),o.assert(this.isFading()))}}}]),e}();t.RenderState=u},47095:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SimplePath=t.PathParam=t.SimpleLineCurve=void 0;var s=n(34585),u=function(e){a(n,e);var t=o(n);function n(e,i){return r(this,n),t.call(this,e,i)}return i(n,[{key:"getLengths",value:function(){return void 0===this.m_lengths&&(this.m_lengths=[0,this.v2.distanceTo(this.v1)]),this.m_lengths}}]),n}(s.LineCurve);t.SimpleLineCurve=u;var l=function(){function e(t,n,i){r(this,e),this.path=t,this.index=n,this.t=i}return i(e,[{key:"curve",get:function(){return this.path.curves[this.index]}},{key:"point",get:function(){return void 0===this.m_point&&(this.m_point=this.curve.getPoint(this.t)),this.m_point}}]),e}();t.PathParam=l;var c=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.call(this)}return i(n,[{key:"getLengths",value:function(){if(this.m_cache)return this.m_cache;var e=0,t=new Array;return t.push(0),this.curves.forEach((function(n){var r=n;e+=r.v1.distanceTo(r.v2),t.push(e)})),this.m_cache=t,t}},{key:"getParamAt",value:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;++r)if(!(n[r]<t)){var i=n[r]-t,a=this.curves[r].getLength();return new l(this,r,0===a?0:1-i/a)}return null}}]),n}(s.Path);t.SimplePath=c},67711:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextCanvasFactory=void 0;var a=n(21690),o=n(15739),s=function(){function e(t){r(this,e),this.m_renderer=t,this.m_minGlyphCount=0,this.m_maxGlyphCount=0}return i(e,[{key:"setGlyphCountLimits",value:function(e,t){this.m_minGlyphCount=e,this.m_maxGlyphCount=t}},{key:"createTextCanvas",value:function(e,t){return o.assert(this.m_maxGlyphCount>0),new a.TextCanvas({renderer:this.m_renderer,fontCatalog:e,minGlyphCount:this.m_minGlyphCount,maxGlyphCount:this.m_maxGlyphCount,name:t})}}]),e}();t.TextCanvasFactory=s},92301:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElement=t.LoadingState=t.poiIsRenderable=void 0;var a=n(21690),o=n(34585),s=n(25557);t.poiIsRenderable=function(e){return void 0!==e.buffer},function(e){e[e.Requested=0]="Requested",e[e.Loaded=1]="Loaded",e[e.Initialized=2]="Initialized"}(t.LoadingState||(t.LoadingState={}));var u=function(){function e(t,n,i,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,m=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0,g=arguments.length>12?arguments[12]:void 0,y=arguments.length>13?arguments[13]:void 0,x=arguments.length>14?arguments[14]:void 0;r(this,e),this.text=t,this.points=n,this.renderParams=i,this.layoutParams=u,this.priority=l,this.xOffset=c,this.yOffset=d,this.featureId=h,this.style=f,this.fadeNear=p,this.fadeFar=m,this.tileOffset=v,this.offsetDirection=g,this.dataSourceName=y,this.dataSourceOrder=x,this.visible=!0,this.distanceScale=.5,this.renderOrder=0,this.elevated=!1,i instanceof a.TextRenderStyle&&(this.renderStyle=i),u instanceof a.TextLayoutStyle&&(this.layoutStyle=u),this.type=n instanceof o.Vector3?s.TextElementType.PoiLabel:s.TextElementType.PathLabel}return i(e,[{key:"position",get:function(){return this.points instanceof Array?this.points[0]:this.points}},{key:"path",get:function(){if(this.points instanceof Array)return this.points}},{key:"textMayOverlap",get:function(){return!0===this.mayOverlap},set:function(e){this.mayOverlap=e}},{key:"textReservesSpace",get:function(){return!1!==this.reserveSpace},set:function(e){this.reserveSpace=e}},{key:"poiInfo",get:function(){return this.m_poiInfo},set:function(e){if(this.m_poiInfo=e,void 0!==e){void 0!==this.path&&(this.type=s.TextElementType.LineMarker);var t=void 0!==this.renderOrder?this.renderOrder:0;e.renderOrder=t}}},{key:"renderStyle",get:function(){return this.m_renderStyle},set:function(e){this.m_renderStyle=e}},{key:"layoutStyle",get:function(){return this.m_layoutStyle},set:function(e){this.m_layoutStyle=e}},{key:"hasFeatureId",value:function(){return void 0!==this.featureId&&("number"===typeof this.featureId?0!==this.featureId:this.featureId.length>0)}},{key:"dispose",value:function(){var e,t=null===(e=this.poiInfo)||void 0===e?void 0:e.buffer;t&&t.decreaseRefCount()}}]),e}();t.TextElement=u,u.HIGHEST_PRIORITY=Number.MAX_SAFE_INTEGER},21910:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementBuilder=void 0;var a=n(26309),o=n(21690),s=n(15739),u=n(79977),l=n(92301),c=n(40449),d=s.LoggerManager.instance.create("TextElementBuilder"),h=function(){function e(t,n,i){if(r(this,e),this.m_env=t,this.m_styleCache=n,this.m_baseRenderOrder=i,this.m_distanceScale=c.DEFAULT_TEXT_DISTANCE_SCALE,this.m_renderOrder=i,Number.isInteger(i))this.renderOrderUpBound=e.RENDER_ORDER_UP_BOUND;else{var a=Math.abs(i);this.renderOrderUpBound=(a-Math.floor(a))*e.RENDER_ORDER_UP_BOUND}this.isValidRenderOrder(i)||d.warn("Large base render order (".concat(i,") might cause precision issues."))}return i(e,[{key:"withTechnique",value:function(t){var n,r,i,o,u,l,h;this.m_technique=t,this.m_priority=null!==(n=a.getPropertyValue(t.priority,this.m_env))&&void 0!==n?n:0,this.m_fadeNear=null!==(r=a.getPropertyValue(t.fadeNear,this.m_env))&&void 0!==r?r:void 0,this.m_fadeFar=null!==(i=a.getPropertyValue(t.fadeFar,this.m_env))&&void 0!==i?i:void 0,this.m_minZoomLevel=null!==(o=a.getPropertyValue(t.minZoomLevel,this.m_env))&&void 0!==o?o:void 0,this.m_maxZoomLevel=null!==(u=a.getPropertyValue(t.maxZoomLevel,this.m_env))&&void 0!==u?u:void 0,this.m_distanceScale=null!==(l=t.distanceScale)&&void 0!==l?l:c.DEFAULT_TEXT_DISTANCE_SCALE,this.m_renderStyle=this.m_styleCache.getRenderStyle(t),this.m_layoutStype=this.m_styleCache.getLayoutStyle(t),this.m_xOffset=a.getPropertyValue(t.xOffset,this.m_env),this.m_yOffset=a.getPropertyValue(t.yOffset,this.m_env);var f=null!==(h=a.getPropertyValue(t.renderOrder,this.m_env))&&void 0!==h?h:0;if(!this.isValidRenderOrder(f)){var p="Unsupported large render order (".concat(f,")");d.error(p),s.assert(!1,p)}return this.m_renderOrder=e.composeRenderOrder(this.m_baseRenderOrder,f),a.isTextTechnique(t)?this.withTextTechnique(t):this.withPoiTechnique(t),this}},{key:"withIcon",value:function(e,t){return s.assert(void 0!==this.m_poiBuilder),this.m_poiBuilder.withIcon(e,t),this}},{key:"build",value:function(t,n,r,i,u,c,d,h){var f,p=a.getFeatureId(c);s.assert(void 0!==this.m_technique),s.assert(void 0!==this.m_renderStyle),s.assert(void 0!==this.m_layoutStype);var m=this.m_technique,v=this.m_renderStyle,g=this.m_layoutStype,y=new l.TextElement(o.ContextualArabicConverter.instance.convert(t),n,v,g,this.m_priority,this.m_xOffset,this.m_yOffset,p,m.style,this.m_fadeNear,this.m_fadeFar,r,h,i,u);return y.minZoomLevel=this.m_minZoomLevel,y.maxZoomLevel=this.m_maxZoomLevel,y.distanceScale=this.m_distanceScale,y.mayOverlap=this.m_mayOverlap,y.reserveSpace=this.m_reserveSpace,y.kind=m.kind,y.userData=c,y.textFadeTime=void 0!==m.textFadeTime?1e3*m.textFadeTime:void 0,y.pathLengthSqr=d,y.alwaysOnTop=this.m_alwaysOnTop,y.renderOrder=this.m_renderOrder,y.poiInfo=null===(f=this.m_poiBuilder)||void 0===f?void 0:f.build(y),e.alignZoomLevelRanges(y),y}},{key:"withTextTechnique",value:function(e){this.m_mayOverlap=!0===e.mayOverlap,this.m_reserveSpace=!1!==e.reserveSpace,this.m_poiBuilder=void 0}},{key:"withPoiTechnique",value:function(e){this.m_mayOverlap=!0===e.textMayOverlap,this.m_reserveSpace=!1!==e.textReserveSpace,this.m_alwaysOnTop=!0===e.alwaysOnTop,this.m_poiBuilder||(this.m_poiBuilder=new u.PoiBuilder(this.m_env)),this.m_poiBuilder.withTechnique(e)}},{key:"isValidRenderOrder",value:function(e){return Math.abs(e)<this.renderOrderUpBound}}],[{key:"alignZoomLevelRanges",value:function(e){var t,n;if(e.poiInfo){var r=e.poiInfo;e.minZoomLevel=null!==(t=e.minZoomLevel)&&void 0!==t?t:s.MathUtils.min2(r.iconMinZoomLevel,r.textMinZoomLevel),e.maxZoomLevel=null!==(n=e.maxZoomLevel)&&void 0!==n?n:s.MathUtils.max2(r.iconMaxZoomLevel,r.textMaxZoomLevel)}}},{key:"composeRenderOrder",value:function(t,n){return t*e.RENDER_ORDER_UP_BOUND+n}}]),e}();t.TextElementBuilder=h,h.RENDER_ORDER_UP_BOUND=1e7},18386:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementGroup=void 0;var s=function(e){a(n,e);var t=o(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(n(15739).PriorityListGroup);t.TextElementGroup=s},52734:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementGroupPriorityList=void 0;var s=function(e){a(n,e);var t=o(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(n(15739).GroupedPriorityList);t.TextElementGroupPriorityList=s},68051:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementGroupState=void 0;var o=n(15739),s=n(98559),u=n(25557),l=function(){function e(t,n,r){i(this,e),this.group=t,this.tileKey=n,this.m_visited=!1,o.assert(t.elements.length>0);var a=t.elements.length;this.m_textElementStates=[],this.m_visited=!0;for(var l=0;l<a;++l){var c=t.elements[l];if(c.type===u.TextElementType.LineMarker&&void 0!==c.path)for(var d=c.path.length,h=0;h<d;h++){var f=new s.TextElementState(c,h),p=r(f);f.update(p),this.m_textElementStates.push(f)}else{var m=new s.TextElementState(c),v=r(m);m.update(v),this.m_textElementStates.push(m)}}}return a(e,[{key:"visited",get:function(){return this.m_visited},set:function(e){this.m_visited=e}},{key:"priority",get:function(){return this.group.priority}},{key:"updateFading",value:function(e,t){var n,i=r(this.m_textElementStates);try{for(i.s();!(n=i.n()).done;){var a=n.value;void 0!==a&&a.updateFading(e,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"traverseVisibleElements",value:function(e){var t,n=r(this.m_textElementStates);try{for(n.s();!(t=n.n()).done;){var i=t.value;void 0!==i&&i.visible&&e(i)}}catch(a){n.e(a)}finally{n.f()}}},{key:"updateElements",value:function(e){var t,n=r(this.m_textElementStates);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=e(i);i.update(a)}}catch(o){n.e(o)}finally{n.f()}}},{key:"size",get:function(){return this.m_textElementStates.length}},{key:"textElementStates",get:function(){return this.m_textElementStates}}]),e}();t.TextElementGroupState=l},98559:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.isLineMarkerElementState=t.TextElementState=void 0;var a=n(21690),o=n(15739),s=n(3422),u=n(60923),l=n(25557),c=function(){function e(t,n){r(this,e),this.element=t,this.m_lineMarkerIndex=n}return i(e,[{key:"initialized",get:function(){return void 0!==this.m_textRenderState||void 0!==this.m_iconRenderState}},{key:"visible",get:function(){if(void 0!==this.m_textRenderState&&this.m_textRenderState.isVisible())return!0;var e=this.iconRenderState;return!(void 0===e||!e.isVisible())}},{key:"textPlacement",get:function(){var e=this.element.layoutStyle,t=this.m_textLayoutState;return void 0!==t?t.textPlacement:{h:a.hPlacementFromAlignment(e.horizontalAlignment),v:a.vPlacementFromAlignment(e.verticalAlignment)}},set:function(e){void 0===this.m_textLayoutState&&!0===this.isBaseTextPlacement(e)||(void 0===this.m_textLayoutState?this.m_textLayoutState=new s.LayoutState(e):this.m_textLayoutState.textPlacement=e)}},{key:"isBaseTextPlacement",value:function(e){var t=this.element.layoutStyle;if(void 0!==t)return a.hAlignFromPlacement(e.h)===t.horizontalAlignment&&a.vAlignFromPlacement(e.v)===t.verticalAlignment}},{key:"reset",value:function(){void 0!==this.m_textRenderState&&this.m_textRenderState.reset(),void 0!==this.m_textLayoutState&&(void 0!==this.element.layoutStyle?this.m_textLayoutState.reset(this.element.layoutStyle):this.m_textLayoutState=void 0),this.iconRenderState&&this.m_iconRenderState.reset(),this.m_viewDistance=void 0,this.element.textBufferObject=void 0,this.element.bounds=void 0}},{key:"replace",value:function(e){this.m_textRenderState=e.m_textRenderState,this.m_textLayoutState=e.m_textLayoutState,this.m_iconRenderState=e.m_iconRenderState,e.m_textRenderState=void 0,e.m_textLayoutState=void 0,e.m_iconRenderState=void 0,void 0===this.element.glyphs&&(this.element.glyphs=e.element.glyphs,this.element.glyphCaseArray=e.element.glyphCaseArray),this.element.bounds=void 0,this.element.textBufferObject=void 0}},{key:"viewDistance",get:function(){return this.m_viewDistance}},{key:"update",value:function(e){this.initialized||void 0===e||this.initializeRenderStates(),this.setViewDistance(e)}},{key:"setViewDistance",value:function(e){this.m_viewDistance=e}},{key:"renderDistance",get:function(){return!0===this.element.alwaysOnTop?0:void 0!==this.m_viewDistance?-this.m_viewDistance:0}},{key:"textRenderState",get:function(){return this.m_textRenderState}},{key:"iconRenderState",get:function(){return this.m_iconRenderState}},{key:"lineMarkerIndex",get:function(){return this.m_lineMarkerIndex}},{key:"position",get:function(){return void 0!==this.element.path&&void 0!==this.m_lineMarkerIndex?this.element.path[this.m_lineMarkerIndex]:this.element.position}},{key:"updateFading",value:function(e,t){void 0!==this.m_textRenderState&&this.m_textRenderState.updateFading(e,t),void 0!==this.iconRenderState&&this.iconRenderState.updateFading(e,t)}},{key:"initializeRenderStates",value:function(){var e;o.assert(void 0===this.m_textRenderState),o.assert(void 0===this.m_textLayoutState),o.assert(void 0===this.m_iconRenderState);var t=this.element.textFadeTime;if(this.m_textRenderState=new u.RenderState(t),this.element.type===l.TextElementType.PoiLabel||this.element.type===l.TextElementType.LineMarker){var n=null===(e=this.element.poiInfo)||void 0===e?void 0:e.technique.iconFadeTime,r=void 0!==n?1e3*n:t;this.m_iconRenderState=new u.RenderState(r)}}}]),e}();t.TextElementState=c,t.isLineMarkerElementState=function(e){return void 0!==e.m_lineMarkerIndex}},85616:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementStateCache=void 0;var s=n(15739),u=n(68051),l=n(98559),c=n(25557),d=s.LoggerManager.instance.create("TextElementsStateCache",{level:s.LogLevel.Log});var h={entries:[],index:-1};function f(e){return e.hasFeatureId()?e.featureId:e.text}function p(e,t,n,r){return void 0!==e.pathLengthSqr&&(void 0!==n.pathLengthSqr&&e.pathLengthSqr>n.pathLengthSqr)}function m(e,t,n,r){return t<r}function v(e,t,n){for(var r,i=e.element,a=function(e){return 100<<(Math.min(4,13-Math.min(13,Math.floor(e)))<<2)}(n),o=t.length,s=e.position,u=e.visible,d=l.isLineMarkerElementState(e),h=-1,f=1/0,v=i.type===c.TextElementType.PathLabel?p:m,g=0;g<o;++g){var y=t[g],x=y.element,_=i.type!==x.type||d!==l.isLineMarkerElementState(y),b=u&&y.visible;if(!_&&!b){var w=s.distanceToSquared(x.position);w>a||(void 0===r||v(x,w,r,f))&&(h=g,r=x,f=w)}}return h}var g=function(){function e(){a(this,e),this.m_referenceMap=new Map,this.m_textMap=new Map}return o(e,[{key:"getOrSet",value:function(e,t,n){var r=this.get(e);return void 0!==r?(r.updateElements(n),[r,!0]):(r=new u.TextElementGroupState(e,t,n),this.set(e,r),[r,!1])}},{key:"size",get:function(){return this.m_referenceMap.size}},{key:"cacheSize",get:function(){return this.m_textMap.size}},{key:"sortedGroupStates",get:function(){return void 0===this.m_sortedGroupStates&&(this.m_sortedGroupStates=Array.from(this.m_referenceMap.values()),this.m_sortedGroupStates.sort((function(e,t){return t.group.priority-e.group.priority}))),s.assert(this.m_referenceMap.size===this.m_sortedGroupStates.length),this.m_sortedGroupStates}},{key:"update",value:function(e,t,n,a){var o,s=n?this.replaceElement.bind(this,a):void 0,u=!1,l=i(this.m_referenceMap.entries());try{for(l.s();!(o=l.n()).done;){var c=r(o.value,2),d=c[0],h=c[1];h.visited?h.updateFading(e,t):(n&&h.traverseVisibleElements(s),this.m_referenceMap.delete(d),this.m_sortedGroupStates=void 0,u=!0)}}catch(f){l.e(f)}finally{l.f()}return u}},{key:"clearVisited",value:function(){var e,t=i(this.m_referenceMap.values());try{for(t.s();!(e=t.n()).done;){e.value.visited=!1}}catch(n){t.e(n)}finally{t.f()}}},{key:"clearTextCache",value:function(){this.m_textMap.clear()}},{key:"clear",value:function(){this.m_referenceMap.clear(),this.m_sortedGroupStates=void 0,this.m_textMap.clear()}},{key:"deduplicateElement",value:function(e,t){var n=this.findDuplicate(t,e);if(void 0===n)return this.m_textMap.set(f(t.element),[t]),!0;if(-1===n.index)return n.entries.push(t),!0;var r=n.entries[n.index];return!(r.visible||!t.visible)&&(n.entries[n.index]=t,r.reset(),!0)}},{key:"replaceElement",value:function(e,t){s.assert(t.visible);var n=this.findDuplicate(t,e);if(void 0===n||-1===n.index)return!1;var r=n.entries[n.index];return s.assert(!r.visible),r.replace(t),!0}},{key:"get",value:function(e){var t=this.m_referenceMap.get(e);return void 0!==t&&(t.visited=!0),t}},{key:"set",value:function(e,t){s.assert(e.elements.length>0),this.m_referenceMap.set(e,t),this.m_sortedGroupStates=void 0}},{key:"findDuplicate",value:function(e,t){var n=e.element,r=this.m_textMap.get(f(n));if(void 0!==r){h.entries=r;var i=n.hasFeatureId()?function(e,t){var n=e.element,r=t.findIndex((function(e){return e.element.tileOffset===n.tileOffset}));if(-1===r)return-1;var i=t[r].element;if(s.assert(n.featureId===i.featureId),i.text===n.text)return r;d.debug("Text feature id ".concat(n.featureId,' collision between "').concat(n.text," and              ").concat(i.text))}(e,r):v(e,r,t);return void 0===i?(n.featureId=void 0,this.findDuplicate(e,t)):(h.index=i,h)}}}]),e}();t.TextElementStateCache=g},25557:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementType=void 0,function(e){e[e.PoiLabel=0]="PoiLabel",e[e.PathLabel=1]="PathLabel",e[e.LineMarker=2]="LineMarker"}(t.TextElementType||(t.TextElementType={}))},40449:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(63038).default,o=n(43269).default,s=n(93913).default,u=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementsRenderer=t.DEFAULT_TEXT_DISTANCE_SCALE=t.DEFAULT_FONT_CATALOG_NAME=void 0;var l,c=n(21690),d=n(15739),h=n(34585),f=n(60396),p=n(91649),m=n(92980),v=n(1830),g=n(59456),y=n(3757),x=n(30202),_=(n(60294),n(47095)),b=n(67711),w=n(92301),S=n(94814),M=n(85616),E=n(25557),T=n(4509);n(4520);!function(e){e[e.PersistentLabels=0]="PersistentLabels",e[e.NewLabels=1]="NewLabels"}(l||(l={})),t.DEFAULT_FONT_CATALOG_NAME="default",t.DEFAULT_TEXT_DISTANCE_SCALE=.5;var k=d.LoggerManager.instance.create("TextElementsRenderer",{level:d.LogLevel.Log}),C=void 0,A=void 0,P=new h.Vector3,O=new h.Vector2,L=[],R=new h.Vector2,D={},I={},F={},N={vector2:[new h.Vector2]},j=s((function e(t,n){u(this,e),this.tile=t,this.group=n})),z=function(){function e(t){u(this,e),this.lists=t}return s(e,[{key:"priority",get:function(){return d.assert(this.lists.length>0),this.lists[0].group.priority}},{key:"count",value:function(){var e,t=0,n=o(this.lists);try{for(n.s();!(e=n.n()).done;){t+=e.value.group.elements.length}}catch(r){n.e(r)}finally{n.f()}return t}}]),e}();function U(e,t,n,r,i){I.path=r,I.pathOverflow=i,I.layer=e.renderOrder,I.letterCaseArray=e.glyphCaseArray,I.pickingData=e.userData?e:void 0,t.addText(e.glyphs,n,I)}function B(e){return void 0!==e&&(d.PerformanceTimer.now()-e>10&&(k.debug("Placement time limit exceeded."),!0))}var V=function(){function e(t,n,r,i,a,o,s,l,c,d){u(this,e),this.m_viewState=t,this.m_viewUpdateCallback=n,this.m_screenProjector=r,this.m_poiManager=i,this.m_renderer=a,this.m_imageCaches=o,this.m_loadPromisesCount=0,this.m_textCanvases=new Map,this.m_tmpVector=new h.Vector2,this.m_tmpVector3=new h.Vector3,this.m_cameraLookAt=new h.Vector3,this.m_overloaded=!1,this.m_cacheInvalidated=!1,this.m_forceNewLabelsPass=!1,this.m_addNewLabels=!0,this.m_textElementStateCache=new M.TextElementStateCache,this.m_camera=new h.OrthographicCamera(-1,1,1,-1),this.m_textStyleCache=new T.TextStyleCache,this.m_screenCollisions=new g.ScreenCollisions,this.m_options=Object.assign({},s),S.initializeDefaultOptions(this.m_options),d?this.m_screenCollisions=d:void 0!==this.m_options.collisionDebugCanvas&&null!==this.m_options.collisionDebugCanvas&&(this.m_screenCollisions=new g.ScreenCollisionsDebug(this.m_options.collisionDebugCanvas)),this.m_textCanvasFactory=null!==l&&void 0!==l?l:new b.TextCanvasFactory(this.m_renderer),this.m_textCanvasFactory.setGlyphCountLimits(this.m_options.minNumGlyphs,this.m_options.maxNumGlyphs),this.m_poiRenderer=null!==c&&void 0!==c?c:new v.PoiRenderer(this.m_renderer,this.m_poiManager,this.m_imageCaches),this.initializeCamera(),this.initializeDefaultFontCatalog(),this.m_textStyleCache.updateTextCanvases(this.m_textCanvases)}return s(e,[{key:"disableFading",get:function(){return!0===this.m_options.disableFading},set:function(e){this.m_options.disableFading=e}},{key:"styleCache",get:function(){return this.m_textStyleCache}},{key:"delayLabelsUntilMovementFinished",get:function(){return!0===this.m_options.delayLabelsUntilMovementFinished},set:function(e){this.m_options.delayLabelsUntilMovementFinished=e}},{key:"showReplacementGlyphs",get:function(){return!0===this.m_options.showReplacementGlyphs},set:function(e){this.m_options.showReplacementGlyphs=e,this.m_textCanvases.forEach((function(t){(null===t||void 0===t?void 0:t.fontCatalog)&&(t.fontCatalog.showReplacementGlyphs=e)}))}},{key:"restoreRenderers",value:function(e){this.m_renderer=e,this.m_poiRenderer=new v.PoiRenderer(this.m_renderer,this.m_poiManager,this.m_imageCaches)}},{key:"updateFontCatalogs",value:function(){var e=i(r.mark((function e(n){var i,s,u,l,c,d,h=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.m_defaultFontCatalogConfig&&(n&&-1!==n.findIndex((function(e){return e.name===t.DEFAULT_FONT_CATALOG_NAME}))?this.m_textCanvases.has(t.DEFAULT_FONT_CATALOG_NAME)&&this.m_textCanvases.delete(t.DEFAULT_FONT_CATALOG_NAME):(n||(n=[]),n.unshift(this.m_defaultFontCatalogConfig))),!(n&&n.length>0)){e.next=23;break}i=o(this.m_textCanvases);try{for(u=function(){var e=a(s.value,1)[0];n.findIndex((function(t){return t.name===e}))<0&&h.m_textCanvases.delete(e)},i.s();!(s=i.n()).done;)u()}catch(r){i.e(r)}finally{i.f()}l=o(n),e.prev=5,l.s();case 7:if((c=l.n()).done){e.next=13;break}return d=c.value,e.next=11,this.addTextCanvas(d);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),l.e(e.t0);case 18:return e.prev=18,l.f(),e.finish(18);case 21:e.next=24;break;case 23:this.m_textCanvases.clear();case 24:this.m_textStyleCache.updateTextCanvases(this.m_textCanvases);case 25:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTextStyles",value:function(){var e=i(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.m_textStyleCache.updateTextStyles(t,n),e.next=3,this.waitLoaded();case 3:this.m_textStyleCache.updateTextCanvases(this.m_textCanvases);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"renderText",value:function(e){var t;this.m_camera.far=e,this.updateGlyphDebugMesh(),this.m_poiRenderer.update();var n,r=o(this.m_poiRenderer.layers);try{for(r.s();!(n=r.n()).done;){var i,s=n.value,u=o(this.m_textCanvases);try{for(u.s();!(i=u.n()).done;){var l=a(i.value,2)[1];null===l||void 0===l||l.render(this.m_camera,null===t||void 0===t?void 0:t.id,s.id,void 0,!1)}}catch(f){u.e(f)}finally{u.f()}this.m_poiRenderer.render(this.m_camera,s),t=s}}catch(f){r.e(f)}finally{r.f()}var c,d=o(this.m_textCanvases);try{for(d.s();!(c=d.n()).done;){var h=a(c.value,2)[1];null===h||void 0===h||h.render(this.m_camera,null===t||void 0===t?void 0:t.id,void 0,void 0,!1)}}catch(f){d.e(f)}finally{d.f()}}},{key:"invalidateCache",value:function(){this.m_cacheInvalidated=!0}},{key:"movementStarted",value:function(){this.delayLabelsUntilMovementFinished&&(this.m_addNewLabels=!1)}},{key:"movementFinished",value:function(){this.invalidateCache(),this.delayLabelsUntilMovementFinished&&(this.m_addNewLabels=!0)}},{key:"overloaded",get:function(){return this.m_overloaded}},{key:"placeText",value:function(e,t){var n=function(e){var t=!1;return e.forEach((function(e){e.renderedTiles.forEach((function(e){e.textElementsChanged&&(e.textElementsChanged=!1,t=!0)}))})),t}(e),r=this.hasOverlayText()||n||function(e){for(var t=0;t<e.length;t++){var n,r=o(e[t].renderedTiles);try{for(r.s();!(n=r.n()).done;){var i=a(n.value,2);if(i[0],i[1].hasTextElements())return!0}}catch(s){r.e(s)}finally{r.f()}}return!1}(e);if(r||this.m_cacheInvalidated||this.m_viewState.renderedTilesChanged){var i=this.m_cacheInvalidated||n||this.m_viewState.renderedTilesChanged,s=i&&this.m_addNewLabels;s&&(this.m_textElementStateCache.clearVisited(),this.updateTextElements(e));var u=this.m_textElementStateCache.update(t,this.m_options.disableFading,s,this.m_viewState.zoomLevel);this.reset(),this.m_addNewLabels&&this.prepopulateScreenWithBlockingElements(e);var l=(i||u)&&this.m_addNewLabels;this.placeTextElements(t,l),this.placeOverlayTextElements()}}},{key:"addOverlayText",value:function(e){0!==e.length&&(this.m_overlayTextElements=void 0===this.m_overlayTextElements?e.slice():this.m_overlayTextElements.concat(e))}},{key:"clearOverlayText",value:function(){this.m_overlayTextElements=[]}},{key:"hasOverlayText",value:function(){return void 0!==this.m_overlayTextElements&&this.m_overlayTextElements.length>0}},{key:"overlayText",get:function(){return this.m_overlayTextElements}},{key:"pickTextElements",value:function(e,t){var n,r=function(n,r){if(void 0!==n){var i=n,a={type:r,point:e,distance:0,renderOrder:i.renderOrder,featureId:i.featureId,userData:i.userData,dataSourceName:i.dataSourceName,dataSourceOrder:i.dataSourceOrder,text:i.text};t.addResult(a)}},i=o(this.m_textCanvases);try{for(i.s();!(n=i.n()).done;){var s=a(n.value,2)[1];null===s||void 0===s||s.pickText(e,(function(e){r(e,m.PickObjectType.Text)}))}}catch(u){i.e(u)}finally{i.f()}this.m_poiRenderer.pickTextElements(e,(function(e){r(e,m.PickObjectType.Icon)}))}},{key:"loading",get:function(){return this.m_loadPromisesCount>0}},{key:"waitLoaded",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.m_loadPromise){e.next=4;break}return e.next=3,this.m_loadPromise;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearRenderStates",value:function(){this.m_textElementStateCache.clear()}},{key:"getMemoryUsage",value:function(){var e,t={heapSize:0,gpuSize:0},n=o(this.m_textCanvases);try{for(n.s();!(e=n.n()).done;){var r=a(e.value,2)[1];null===r||void 0===r||r.getMemoryUsage(t)}}catch(i){n.e(i)}finally{n.f()}return this.m_poiRenderer.getMemoryUsage(t),t}},{key:"addDefaultTextCanvas",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.m_textCanvases.has(t.DEFAULT_FONT_CATALOG_NAME)&&this.m_defaultFontCatalogConfig){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.addTextCanvas(this.m_defaultFontCatalogConfig);case 4:this.m_textStyleCache.updateTextCanvases(this.m_textCanvases);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.m_cameraLookAt.copy(this.m_viewState.lookAtVector),this.m_screenCollisions.reset();var e,t=o(this.m_textCanvases);try{for(t.s();!(e=t.n()).done;){var n=a(e.value,2)[1];null===n||void 0===n||n.clear()}}catch(r){t.e(r)}finally{t.f()}this.m_poiRenderer.reset()}},{key:"prepopulateScreenWithBlockingElements",value:function(e){var t=this,n=[];e.forEach((function(e){var r,i=new h.Vector3,a=new h.Vector3,s=o(e.renderedTiles.values());try{for(s.s();!(r=s.n()).done;){var u,l=r.value,c=o(l.blockingElements);try{for(c.s();!(u=c.n()).done;){var d=u.value;if(!(d.points.length<2)){t.m_screenProjector.project3(d.points[0],i);for(var f=1;f<d.points.length;f++){t.m_screenProjector.project3(d.points[f],a);var p=d.screenSpaceLines[f-1];p.start.copy(i),p.end.copy(a);var m={minX:Math.min(i.x,a.x),maxX:Math.max(i.x,a.x),minY:Math.min(i.y,a.y),maxY:Math.max(i.y,a.y),line:p};n.push(m),i.copy(a)}}}}catch(v){c.e(v)}finally{c.f()}}}catch(v){s.e(v)}finally{s.f()}})),this.m_screenCollisions.allocateIBoxes(n)}},{key:"placeTextElementGroup",value:function(e,t,n,r){var i;d.assert(e.visited);var a,s=[],u=this.m_viewState.hiddenGeometryKinds,h=this.m_viewState.projection,f=this.m_viewState.elevationProvider,m=null===f||void 0===f?void 0:f.getDisplacementMap(e.tileKey),v=o(e.textElementStates);try{for(v.s();!(a=v.n()).done;){var g=a.value;if(r===l.PersistentLabels)A&&++A.total;else if(void 0!==n&&t.numRenderedTextElements>=n)return k.debug("Placement label limit exceeded."),!1;if(g.initialized)if(void 0===g.viewDistance||g.viewDistance<0)A&&++A.tooFar;else{var y=g.visible;if(!(r===l.PersistentLabels&&!y||r===l.NewLabels&&y)){var _=g.element,b=this.m_textStyleCache.getTextElementStyle(_.style),w=b.textCanvas;if(void 0===u||void 0===_.kind||!u.hasOrIntersects(_.kind)){if(void 0!==f&&!_.elevated){if(!m){this.m_viewUpdateCallback(),this.m_forceNewLabelsPass=!0;continue}p.overlayTextElement(_,f,m,h)}var S=_.type;if(S===E.TextElementType.PathLabel&&x.isPathLabelTooSmall(_,this.m_screenProjector,L))A&&A.numNotVisible++,!0===_.dbgPathTooSmall&&A&&A.numPathTooSmall++,g.reset();else{if(w){if(!this.initializeGlyphs(_,b,!0))continue;var M=w.getLayer(null!==(i=_.renderOrder)&&void 0!==i?i:c.DEFAULT_TEXT_CANVAS_LAYER);if(void 0!==M&&M.storage.drawCount+_.glyphs.length>M.storage.capacity){A&&++A.numCannotAdd,k.warn("layer glyph storage capacity exceeded.");continue}w.textRenderStyle=_.renderStyle,w.textLayoutStyle=_.layoutStyle}switch(S){case E.TextElementType.PoiLabel:this.addPoiLabel(g,w,t);break;case E.TextElementType.LineMarker:this.addLineMarkerLabel(g,s,w,t);break;case E.TextElementType.PathLabel:w&&this.addPathLabel(g,L,w,t)}}}}}else A&&++A.uninitialized}}catch(T){v.e(T)}finally{v.f()}return!0}},{key:"initializeGlyphs",value:function(e,t,n){var r=this;if(e.loadingState===w.LoadingState.Initialized)return void 0!==e.glyphs;d.assert(void 0!==t.textCanvas);var i=t.textCanvas;if(void 0===e.loadingState)if(e.loadingState=w.LoadingState.Requested,void 0===e.renderStyle&&(e.renderStyle=new c.TextRenderStyle(Object.assign(Object.assign({},t.renderParams),e.renderParams))),void 0===e.layoutStyle&&(e.layoutStyle=new c.TextLayoutStyle(Object.assign(Object.assign({},t.layoutParams),e.layoutParams))),""===e.text)e.loadingState=w.LoadingState.Loaded;else{var a=i.fontCatalog.loadCharset(e.text,e.renderStyle).then((function(){--r.m_loadPromisesCount,e.loadingState=w.LoadingState.Loaded,r.m_forceNewLabelsPass=r.m_forceNewLabelsPass||n,r.m_viewUpdateCallback()}));0===this.m_loadPromisesCount&&(this.m_loadPromise=void 0),++this.m_loadPromisesCount,this.m_loadPromise=void 0===this.m_loadPromise?a:Promise.all([this.m_loadPromise,a])}return e.loadingState===w.LoadingState.Loaded&&(i.textRenderStyle=e.renderStyle,i.textLayoutStyle=e.layoutStyle,e.glyphCaseArray=[],e.bounds=void 0,e.glyphs=i.fontCatalog.getGlyphs(e.text,i.textRenderStyle,e.glyphCaseArray),e.loadingState=w.LoadingState.Initialized),void 0!==e.glyphs}},{key:"initializeCamera",value:function(){this.m_camera.position.z=1,this.m_camera.near=0}},{key:"updateCamera",value:function(){var e=this.m_renderer.getSize(N.vector2[0]),t=e.width,n=e.height;this.m_camera.left=t/-2,this.m_camera.right=t/2,this.m_camera.bottom=n/-2,this.m_camera.top=n/2,this.m_camera.updateProjectionMatrix(),this.m_camera.updateMatrixWorld(!1),this.m_screenCollisions.update(t,n)}},{key:"initializeDefaultFontCatalog",value:function(){var e;this.m_options.fontCatalog&&(this.m_defaultFontCatalogConfig=(e=this.m_options.fontCatalog,{name:t.DEFAULT_FONT_CATALOG_NAME,url:e}),this.addDefaultTextCanvas())}},{key:"addTextCanvas",value:function(){var e=i(r.mark((function e(t){var n,i,a,o=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e,t){if(o.m_textCanvases.has(e)){var n=o.m_textCanvasFactory.createTextCanvas(t,e);t.showReplacementGlyphs=o.showReplacementGlyphs,o.m_textCanvases.set(e,n)}},i=function(){o.m_textCanvases.delete(t.name)},!this.m_textCanvases.has(t.name)){e.next=6;break}return e.abrupt("return",Promise.resolve());case 6:return this.m_textCanvases.set(t.name,void 0),a=y.loadFontCatalog(t,n,i).then((function(){--o.m_loadPromisesCount,o.m_viewUpdateCallback()})).catch((function(e){k.info("rendering without font catalog, only icons possible",e),--o.m_loadPromisesCount})),0===this.m_loadPromisesCount&&(this.m_loadPromise=void 0),++this.m_loadPromisesCount,this.m_loadPromise=void 0===this.m_loadPromise?a:Promise.all([this.m_loadPromise,a]),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGlyphDebugMesh",value:function(){var e=f.debugContext.getValue("DEBUG_GLYPHS");void 0!==e&&(e&&void 0===this.m_debugGlyphTextureCacheMesh&&this.initializeGlyphDebugMesh(),d.assert(void 0!==this.m_debugGlyphTextureCacheMesh),d.assert(void 0!==this.m_debugGlyphTextureCacheWireMesh),this.m_debugGlyphTextureCacheMesh.visible=e,this.m_debugGlyphTextureCacheWireMesh.visible=e)}},{key:"initializeGlyphDebugMesh",value:function(){if(0!==this.m_textCanvases.size){var e=this.m_textCanvases.values().next().value,t=e.fontCatalog,n=new h.PlaneGeometry(t.textureSize.width/2.5,t.textureSize.height/2.5,t.textureSize.width/t.maxWidth,t.textureSize.height/t.maxHeight),r=new h.MeshBasicMaterial({transparent:!0,depthWrite:!1,depthTest:!1,map:t.texture});this.m_debugGlyphTextureCacheMesh=new h.Mesh(n,r),this.m_debugGlyphTextureCacheMesh.renderOrder=1e4,this.m_debugGlyphTextureCacheMesh.visible=!1,this.m_debugGlyphTextureCacheMesh.name="glyphDebug";var i=new h.WireframeGeometry(n),a=new h.LineBasicMaterial({transparent:!0,color:10066329,depthWrite:!1,depthTest:!1});this.m_debugGlyphTextureCacheWireMesh=new h.LineSegments(i,a),this.m_debugGlyphTextureCacheWireMesh.renderOrder=9999,this.m_debugGlyphTextureCacheWireMesh.visible=!1,this.m_debugGlyphTextureCacheWireMesh.name="glyphDebug",e.getLayer(c.DEFAULT_TEXT_CANVAS_LAYER).storage.scene.add(this.m_debugGlyphTextureCacheMesh,this.m_debugGlyphTextureCacheWireMesh)}}},{key:"updateTextElements",value:function(e){var t=this;C&&C.clear(),this.m_textElementStateCache.clearTextCache(),this.m_cacheInvalidated=!1,this.checkIfOverloaded(e);var n=this.overloaded&&this.m_viewState.isDynamic?d.PerformanceTimer.now():void 0;e.forEach((function(e){t.updateTextElementsFromSource(e.dataSource,e.storageLevel,Array.from(e.renderedTiles.values()),n)})),C&&C.log()}},{key:"updateTextElementsFromSource",value:function(e,t,n,r){C&&(C.tiles+=n.length);var i=n;i.sort((function(e,t){return e.tileKey.mortonCode()-t.tileKey.mortonCode()}));var a=[];this.createSortedGroupsForSorting(e,t,i,a);for(var o=0,s=0,u=a;s<u.length;s++){var l=u[s];if(this.selectTextElementsToUpdateByDistance(l),void 0!==r){if(d.PerformanceTimer.now()-r>5){k.debug("Update time limit exceeded.");break}if((o+=l.count())>=100){k.debug("Update label limit exceeded.");break}}}}},{key:"prepareTextElementGroup",value:function(e,t,n){var r=this;if(0!==e.elements.length){var i=this.m_textElementStateCache.getOrSet(e,t,(function(e){var t=x.checkReadyForPlacement(e.element,e.element.type===E.TextElementType.LineMarker?e.lineMarkerIndex:void 0,r.m_viewState,r.m_poiManager,n),i=t.result,a=t.viewDistance;return i!==x.PrePlacementResult.Ok||r.m_textElementStateCache.deduplicateElement(r.m_viewState.zoomLevel,e)||(i=x.PrePlacementResult.Duplicate,a=void 0),C&&(C.totalLabels++,C.results[i]++),a})),o=a(i,2)[1];C&&(++C.totalGroups,o||++C.newGroups)}}},{key:"createSortedGroupsForSorting",value:function(e,t,n,r){if(0!==n.length){var i,a=[],s=o(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;e.shouldRenderText(t,u.tileKey)&&a.push(u)}}catch(_){s.e(_)}finally{s.f()}for(var l=new Map,c=0,d=a;c<d.length;c++){var h,f=d[c],p=o(f.textElementGroups.groups.values());try{for(p.s();!(h=p.n()).done;){var m=h.value;if(0!==m.elements.length){var v=l.get(m.priority);void 0===v?l.set(m.priority,new z([new j(f,m)])):v.lists.push(new j(f,m))}}}catch(_){p.e(_)}finally{p.f()}}if(0!==l.size){var g,y=o(l);try{for(y.s();!(g=y.n()).done;){var x=g.value[1];r.push(x)}}catch(_){y.e(_)}finally{y.f()}r.sort((function(e,t){return t.priority-e.priority}))}}}},{key:"selectTextElementsToUpdateByDistance",value:function(e){var t,n=Math.max(this.m_options.maxDistanceRatioForTextLabels,this.m_options.maxDistanceRatioForPoiLabels),r=x.getMaxViewDistance(this.m_viewState,n),i=o(e.lists);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.prepareTextElementGroup(a.group,a.tile.tileKey,r)}}catch(s){i.e(s)}finally{i.f()}}},{key:"placeTextElements",value:function(e,t){var n={numRenderedTextElements:0,fadeAnimationRunning:!1,time:e},r=this.overloaded&&this.m_viewState.isDynamic?d.PerformanceTimer.now():void 0;if(A&&A.clear(),0!==this.m_textElementStateCache.size){var i=this.m_forceNewLabelsPass||t;this.m_forceNewLabelsPass&&(this.m_forceNewLabelsPass=!1);for(var a=this.m_options.maxNumVisibleLabels,o=this.m_textElementStateCache.sortedGroupStates,s=o[0].priority,u=0,c=0;c<o.length;++c){var h=o[c];A&&++A.totalGroups;var f=h.priority;if(i&&s!==f){if(this.placeNewTextElements(u,c,n),B(r))break;s=f,u=c}if(!this.placeTextElementGroup(h,n,a,l.PersistentLabels))break;if(B(r))break}i&&this.placeNewTextElements(u,o.length,n),A&&(A.numRenderedTextElements=n.numRenderedTextElements,A.log()),n.fadeAnimationRunning&&this.m_viewUpdateCallback()}else k.debug("Text element cache empty.")}},{key:"placeNewTextElements",value:function(e,t,n){for(var r=this.m_textElementStateCache.sortedGroupStates,i=e;i<t&&this.placeTextElementGroup(r[i],n,this.m_options.maxNumVisibleLabels,l.NewLabels);++i);}},{key:"placeOverlayTextElements",value:function(){var e;if(void 0!==this.m_overlayTextElements&&0!==this.m_overlayTextElements.length){var t,n=this.m_tmpVector.set(this.m_screenProjector.width,this.m_screenProjector.height),r=-n.width/2,i=n.height/2,a=o(this.m_overlayTextElements);try{for(a.s();!(t=a.n()).done;){var s=t.value,u=this.m_textStyleCache.getTextElementStyle(s.style),l=u.textCanvas;if(void 0!==l){if(this.initializeGlyphs(s,u,!1),s.loadingState===w.LoadingState.Initialized){var d=l.getLayer(null!==(e=s.renderOrder)&&void 0!==e?e:c.DEFAULT_TEXT_CANVAS_LAYER);if(!(void 0!==d&&d.storage.drawCount+s.glyphs.length>d.storage.capacity)){l.textRenderStyle=s.renderStyle,l.textLayoutStyle=s.layoutStyle;var f=void 0;if(s.type!==E.TextElementType.PathLabel)O.x=r+s.position.x*n.width,O.y=i-s.position.y*n.height,void 0!==s.xOffset&&(O.x+=s.xOffset),void 0!==s.yOffset&&(O.y-=s.yOffset),P.x=O.x,P.y=O.y,P.z=0,U(s,l,P);else{O.x=r,O.y=i,void 0!==s.xOffset&&(O.x+=s.xOffset),void 0!==s.yOffset&&(O.y-=s.yOffset);var p,m=[],v=o(s.path);try{for(v.s();!(p=v.n()).done;){var g=p.value,y=O.x+g.x*n.width,x=O.y-g.y*n.height;m.push(new h.Vector2(y,x))}}catch(S){v.e(S)}finally{v.f()}f=new _.SimplePath;for(var b=0;b<m.length-1;++b)f.add(new h.LineCurve(m[b],m[b+1]));U(s,l,P,f,!0)}}}}}}catch(S){a.e(S)}finally{a.f()}}}},{key:"getDistanceScalingFactor",value:function(e,t,n){var r=n/t;return r=1+(r-1)*e.distanceScale,r=Math.max(r,this.m_options.labelDistanceScaleMin),r=Math.min(r,this.m_options.labelDistanceScaleMax)}},{key:"getDistanceFadingFactor",value:function(e,t,n){var r=1,i=t.viewDistance;if(void 0!==i&&void 0!==e.fadeFar&&e.fadeFar>0){var a=void 0===e.fadeNear?0:e.fadeNear,o=e.fadeFar;o>a&&(r=1-h.MathUtils.clamp((i/n-a)/(o-a),0,1))}return r}},{key:"addPointLabel",value:function(e,t,n,r,i){var a,o=e.element,s=e.textRenderState,u=o.type===E.TextElementType.LineMarker,l=e.iconRenderState;d.assert(void 0!==l),O.x=R.x=n.x,O.y=R.y=n.y;var c=x.pointToPlaneDistance(t,this.m_viewState.worldCenter,this.m_cameraLookAt);if(void 0!==o.fadeFar&&(o.fadeFar<=0||o.fadeFar*this.m_viewState.maxVisibilityDist<c))return A&&++A.tooFar,!1;e.setViewDistance(c);var h=o.poiInfo,f=!1,p=void 0!==h&&d.MathUtils.isClamped(this.m_viewState.zoomLevel,h.iconMinZoomLevel,h.iconMaxZoomLevel)&&!1!==h.isValid,m=this.getDistanceScalingFactor(o,c,this.m_viewState.lookAtDistance),v=p&&this.m_poiRenderer.prepareRender(o,this.m_viewState.env),g=!1;if(v){var y=x.placeIcon(l,h,R,m,this.m_viewState.env,this.m_screenCollisions);g=y===x.PlacementResult.Invisible,f=y===x.PlacementResult.Rejected,g&&l.reset()}else p&&!1!==h.isValid&&(this.m_forceNewLabelsPass=!0,this.m_viewUpdateCallback());var _=this.getDistanceFadingFactor(o,e,this.m_viewState.maxVisibilityDist);if(r&&function(e,t,n){var r=e.textRenderState,i=e.element,a=i.poiInfo;if(d.assert(i.type!==E.TextElementType.PathLabel),void 0===r||""===i.text)return!1;if(void 0!==a&&!d.MathUtils.isClamped(t.zoomLevel,a.textMinZoomLevel,a.textMaxZoomLevel))return!1;var o=x.getMaxViewDistance(t,n.maxDistanceRatioForPoiLabels);return!!(!0===i.ignoreDistance||void 0===e.viewDistance||e.viewDistance<o&&e.viewDistance>0)&&(!a||!0===a.isValid||!0===a.iconIsOptional)}(e,this.m_viewState,this.m_options)){var b=!e.visible,w=f&&b?x.PlacementResult.Rejected:x.placePointLabel(e,O,m,r,this.m_viewState.env,this.m_screenCollisions,P,!u),S=w===x.PlacementResult.Invisible;if(S){if(A&&A.numPoiTextsInvisible++,!p||g)return e.reset(),!1;s.reset()}var M=!0===(null===h||void 0===h?void 0:h.iconIsOptional),T=f&&v&&!M||w===x.PlacementResult.Rejected;if(!f&&!g){var k=!0===(null===(a=o.poiInfo)||void 0===a?void 0:a.textIsOptional);f=T&&!k}T&&s.startFadeOut(i.time);var C=!S&&(!T&&function(e,t){var n=e.element.poiInfo;return!t.cameraIsMoving||void 0===n||!0===n.renderTextDuringMovements}(e,this.m_viewState)||s.isFading());C&&(T||s.startFadeIn(i.time,this.m_options.disableFading),i.fadeAnimationRunning=i.fadeAnimationRunning||s.isFading(),function(e,t,n,r,i){var a=e.element,o=e.textRenderState.opacity*r*a.renderStyle.opacity;if(0===o)return!1;D.letterCaseArray=a.glyphCaseArray,void 0===a.textBufferObject&&(a.textBufferObject=t.createTextBufferObject(a.glyphs,D));var s=a.renderStyle.backgroundOpacity>0&&t.textRenderStyle.fontSize.backgroundSize>0;return F.layer=a.renderOrder,F.position=n,F.scale=i,F.opacity=o,F.backgroundOpacity=s?F.opacity*a.renderStyle.backgroundOpacity:0,F.pickingData=a.userData?a:void 0,t.addTextBufferObject(a.textBufferObject,F),!0}(e,r,P,_,m)&&A&&A.numRenderedPoiTexts++)}if(v&&!g){f?l.startFadeOut(i.time):l.startFadeIn(i.time,this.m_options.disableFading),i.fadeAnimationRunning=i.fadeAnimationRunning||l.isFading();var L=l.opacity*_;if(L>0){var I=!1!==h.reserveSpace&&!f;this.m_poiRenderer.addPoi(h,R,this.m_screenCollisions,e.renderDistance,m,I,L,this.m_viewState.env),A&&A.numRenderedPoiIcons++}}return i.numRenderedTextElements++,!0}},{key:"addPoiLabel",value:function(e,t,n){var r=x.getWorldPosition(e.element,this.m_viewState.projection,this.m_viewState.env,this.m_tmpVector3);return!!this.labelPotentiallyVisible(r,O)&&this.addPointLabel(e,r,O,t,n)}},{key:"addLineMarkerLabel",value:function(e,t,n,r){var i,a=e.element,o=a.poiInfo;if(null===(i=this.m_poiRenderer)||void 0===i?void 0:i.prepareRender(a,this.m_viewState.env)){var s;void 0!==o.shieldGroupIndex&&void 0===(s=t[o.shieldGroupIndex])&&(s=[],t[o.shieldGroupIndex]=s);var u=o.technique,l=void 0!==u.minDistance?u.minDistance*u.minDistance:0;if(l>0&&void 0!==s){var c=0,h=e.position;if(this.labelPotentiallyVisible(h,O)){for(var f=!1,p=0;p<s.length;p+=2){if(f=d.Math2D.distSquared(s[p],s[p+1],O.x,O.y)<l)break}f||this.addPointLabel(e,h,O,n,r)&&(s.push(O.x,O.y),c++)}0===c&&e.reset()}else{var m=e.position;this.labelPotentiallyVisible(m,O)&&this.addPointLabel(e,m,O,n,r)}}}},{key:"addPathLabel",value:function(e,t,n,r){var i=x.getMaxViewDistance(this.m_viewState,this.m_options.maxDistanceRatioForTextLabels),a=e.element;if(!(!0===a.ignoreDistance||void 0===e.viewDistance||e.viewDistance<i))return A&&++A.tooFar,e.textRenderState.reset(),!1;if(void 0!==a.fadeFar&&(a.fadeFar<=0||a.fadeFar*this.m_viewState.maxVisibilityDist<e.renderDistance))return A&&++A.tooFar,e.textRenderState.reset(),!1;var o=new h.Path;O.copy(t[0]);for(var s=0;s<t.length-1;++s)o.add(new _.SimpleLineCurve(t[s],t[s+1]));if(o.getPoint(.5).x-o.getPoint(.51).x>0){O.copy(t[t.length-1]),o=new h.Path;for(var u=t.length-1;u>0;--u)o.add(new _.SimpleLineCurve(t[u],t[u-1]))}e.setViewDistance(x.computeViewDistance(a,void 0,this.m_viewState.worldCenter,this.m_cameraLookAt));var l=-e.renderDistance,c=this.getDistanceScalingFactor(a,l,this.m_viewState.lookAtDistance),d=n.textRenderStyle.fontSize.size;if(n.textRenderStyle.fontSize.size*=c,x.placePathLabel(e,o,O,n,this.m_screenCollisions)!==x.PlacementResult.Ok)return n.textRenderStyle.fontSize.size=d,A&&++A.numNotVisible,e.textRenderState.reset(),!1;e.textRenderState.startFadeIn(r.time,this.m_options.disableFading);var f=a.renderStyle.opacity;if(e.textRenderState.isFading()&&(f*=e.textRenderState.opacity,r.fadeAnimationRunning=!0),0===e.textRenderState.opacity)return n.textRenderStyle.fontSize.size=d,!1;var p=n.textRenderStyle.opacity,m=n.textRenderStyle.backgroundOpacity,v=this.getDistanceFadingFactor(a,e,this.m_viewState.maxVisibilityDist);return n.textRenderStyle.opacity=f*v,n.textRenderStyle.backgroundOpacity=n.textRenderStyle.opacity*a.renderStyle.backgroundOpacity,P.z=e.renderDistance,U(a,n,P,o),r.numRenderedTextElements++,n.textRenderStyle.fontSize.size=d,n.textRenderStyle.opacity=p,n.textRenderStyle.backgroundOpacity=m,!0}},{key:"checkIfOverloaded",value:function(e){var t=0;e.forEach((function(e){var n,r=o(e.renderedTiles.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;t+=i.textElementGroups.count()}}catch(a){r.e(a)}finally{r.f()}}));var n=t>2e4;return n&&!this.m_overloaded&&k.debug("Overloaded Mode enabled."),this.m_overloaded=n,this.m_overloaded}},{key:"labelPotentiallyVisible",value:function(e,t){var n,r=h.MathUtils.clamp(null!==(n=this.m_options.maxPoiDistanceToBorder)&&void 0!==n?n:0,0,1);return void 0!==this.m_screenProjector.projectAreaToScreen(e,r,r,t)}}]),e}();t.TextElementsRenderer=V},94814:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeDefaultOptions=void 0;t.initializeDefaultOptions=function(e){void 0===e.minNumGlyphs&&(e.minNumGlyphs=1024),void 0===e.maxNumGlyphs&&(e.maxNumGlyphs=32768),void 0===e.labelDistanceScaleMin&&(e.labelDistanceScaleMin=.7),void 0===e.labelDistanceScaleMax&&(e.labelDistanceScaleMax=1.5),void 0===e.maxDistanceRatioForTextLabels&&(e.maxDistanceRatioForTextLabels=.99),void 0===e.maxDistanceRatioForPoiLabels&&(e.maxDistanceRatioForPoiLabels=.99),void 0===e.disableFading&&(e.disableFading=!1),void 0===e.delayLabelsUntilMovementFinished&&(e.delayLabelsUntilMovementFinished=!0),void 0===e.showReplacementGlyphs&&(e.showReplacementGlyphs=!1),void 0===e.maxPoiDistanceToBorder&&(e.maxPoiDistanceToBorder=.2)}},4509:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextStyleCache=void 0;var s=n(26309),u=n(21690),l=n(15739),c=n(37119),d=n(47857),h=n(40449),f=l.LoggerManager.instance.create("TextStyleCache"),p=new u.TextRenderStyle({fontSize:{unit:u.FontUnit.Pixel,size:32,backgroundSize:8},color:c.ColorCache.instance.getColor("#6d7477"),opacity:1,backgroundColor:c.ColorCache.instance.getColor("#f7fbfd"),backgroundOpacity:.5}),m=new u.TextLayoutStyle({verticalAlignment:u.VerticalAlignment.Center,horizontalAlignment:u.HorizontalAlignment.Center,placements:[]}),v="default",g=function(){function e(){a(this,e),this.m_textStyles=new Map,this.m_defaultStyle={name:v,fontCatalog:void 0,renderParams:p.params,layoutParams:m.params},this.updateDefaultTextStyle()}return o(e,[{key:"updateTextStyles",value:function(e,t){var n=this;this.m_textStyles.clear(),null===e||void 0===e||e.forEach((function(e){n.m_textStyles.set(e.name,n.createTextElementStyle(e,e.name))})),this.updateDefaultTextStyle(t,e)}},{key:"updateTextCanvases",value:function(e){this.initializeTextCanvas(this.m_defaultStyle,e);var t,n=i(this.m_textStyles);try{for(n.s();!(t=n.n()).done;){var a=r(t.value,2)[1];this.initializeTextCanvas(a,e)}}catch(o){n.e(o)}finally{n.f()}}},{key:"getTextElementStyle",value:function(e){var t;return(void 0===e||void 0===(t=this.m_textStyles.get(e)))&&(t=this.m_defaultStyle),t}},{key:"createRenderStyle",value:function(e,t){var n,r=e.mapView,i=r.zoomLevel,a=Math.floor(i),o=new s.MapEnv({$zoom:a},r.env),h=this.m_defaultStyle.renderParams,f=l.getOptionValue(h.opacity,1),p=s.getPropertyValue(l.getOptionValue(t.opacity,f),o);if(void 0!==t.color){var m=d.evaluateColorProperty(t.color,o);if(void 0!==m){if(s.ColorUtils.hasAlphaInHex(m))p*=s.ColorUtils.getAlphaFromHex(m),m=s.ColorUtils.removeAlphaFromHex(m);n=c.ColorCache.instance.getColor(m)}}var v,g=l.getOptionValue(h.fontSize.backgroundSize,0),y=s.getPropertyValue(l.getOptionValue(t.backgroundSize,g),o),x=void 0!==t.backgroundColor&&void 0!==t.backgroundSize&&y>0,_=l.getOptionValue(h.backgroundOpacity,0),b=s.getPropertyValue(l.getOptionValue(t.backgroundOpacity,x?1:_),o);if(void 0!==t.backgroundColor){var w=d.evaluateColorProperty(t.backgroundColor,o);if(void 0!==w){if(s.ColorUtils.hasAlphaInHex(w))b*=s.ColorUtils.getAlphaFromHex(w),w=s.ColorUtils.removeAlphaFromHex(w);v=c.ColorCache.instance.getColor(w)}}var S={fontName:l.getOptionValue(t.fontName,h.fontName),fontSize:{unit:u.FontUnit.Pixel,size:s.getPropertyValue(l.getOptionValue(t.size,h.fontSize.size),o),backgroundSize:y},fontStyle:"Regular"===t.fontStyle||"Bold"===t.fontStyle||"Italic"===t.fontStyle||"BoldItalic"===t.fontStyle?u.FontStyle[t.fontStyle]:h.fontStyle,fontVariant:"Regular"===t.fontVariant||"AllCaps"===t.fontVariant||"SmallCaps"===t.fontVariant?u.FontVariant[t.fontVariant]:h.fontVariant,rotation:l.getOptionValue(t.rotation,h.rotation),color:l.getOptionValue(n,l.getOptionValue(h.color,u.DefaultTextStyle.DEFAULT_COLOR)),backgroundColor:l.getOptionValue(v,l.getOptionValue(h.backgroundColor,u.DefaultTextStyle.DEFAULT_BACKGROUND_COLOR)),opacity:p,backgroundOpacity:b},M=this.getTextElementStyle(t.style).renderParams;return new u.TextRenderStyle(Object.assign(Object.assign({},M),S))}},{key:"createLayoutStyle",value:function(e,t){var n,r,i,a,o,l,c=e.mapView,d=Math.floor(e.mapView.zoomLevel),h=new s.MapEnv({$zoom:d},c.env),f=this.m_defaultStyle.layoutParams,p=y(s.getPropertyValue(t.hAlignment,h),s.getPropertyValue(t.vAlignment,h),s.isPoiTechnique(t)?s.getPropertyValue(t.placements,h):null),m=p.horizontalAlignment,v=p.verticalAlignment,g=p.placements,x=s.getPropertyValue(t.wrappingMode,h),_="None"===x||"Character"===x||"Word"===x?u.WrappingMode[x]:f.wrappingMode,b={tracking:null!==(n=s.getPropertyValue(t.tracking,h))&&void 0!==n?n:f.tracking,leading:null!==(r=s.getPropertyValue(t.leading,h))&&void 0!==r?r:f.leading,maxLines:null!==(i=s.getPropertyValue(t.maxLines,h))&&void 0!==i?i:f.maxLines,lineWidth:null!==(a=s.getPropertyValue(t.lineWidth,h))&&void 0!==a?a:f.lineWidth,canvasRotation:null!==(o=s.getPropertyValue(t.canvasRotation,h))&&void 0!==o?o:f.canvasRotation,lineRotation:null!==(l=s.getPropertyValue(t.lineRotation,h))&&void 0!==l?l:f.lineRotation,wrappingMode:_,horizontalAlignment:m,verticalAlignment:v,placements:g},w=this.getTextElementStyle(t.style);return new u.TextLayoutStyle(Object.assign(Object.assign({},w),b))}},{key:"updateDefaultTextStyle",value:function(e,t){var n,r;this.m_defaultStyle.fontCatalog=void 0;var i=null!==(r=null!==(n=null===t||void 0===t?void 0:t.find((function(e){return e.name===v})))&&void 0!==n?n:e)&&void 0!==r?r:null===t||void 0===t?void 0:t[0];i&&(this.m_defaultStyle=this.createTextElementStyle(i,v)),this.m_defaultStyle.textCanvas=void 0}},{key:"initializeTextCanvas",value:function(e,t){var n;if(!e.textCanvas){if(void 0!==e.fontCatalog){var a=t.get(e.fontCatalog);if(e.textCanvas=a,t.has(e.fontCatalog)&&!a)return void f.info("fontCatalog(".concat(e.fontCatalog,"), not yet loaded"))}if(void 0===e.textCanvas){void 0!==e.fontCatalog&&e.fontCatalog!==h.DEFAULT_FONT_CATALOG_NAME&&f.warn("FontCatalog '".concat(e.fontCatalog,"' set in TextStyle\n                     '").concat(e.name,"' not found"));var o=t.get(h.DEFAULT_FONT_CATALOG_NAME);if(!o&&t.size>0){var s,u=i(t);try{for(u.s();!(s=u.n()).done;){var l=r(s.value,2)[1];if(l){o=l;break}}}catch(c){u.e(c)}finally{u.f()}}o&&(e.textCanvas=o,void 0!==e.fontCatalog&&f.info("fontCatalog: '".concat(e.fontCatalog,"' not found,\n                      using default fontCatalog(").concat(null===(n=e.textCanvas)||void 0===n?void 0:n.name,").")))}}}},{key:"createTextElementStyle",value:function(e,t){var n,r=y(e.hAlignment,e.vAlignment,e.placements),i=r.horizontalAlignment,a=r.verticalAlignment,o=r.placements;return{name:t,fontCatalog:l.getOptionValue(e.fontCatalogName,this.m_defaultStyle.fontCatalog),renderParams:{fontName:e.fontName,fontSize:{unit:u.FontUnit.Pixel,size:32,backgroundSize:null!==(n=e.backgroundSize)&&void 0!==n?n:8},fontStyle:"Regular"===e.fontStyle||"Bold"===e.fontStyle||"Italic"===e.fontStyle||"BoldItalic"===e.fontStyle?u.FontStyle[e.fontStyle]:void 0,fontVariant:"Regular"===e.fontVariant||"AllCaps"===e.fontVariant||"SmallCaps"===e.fontVariant?u.FontVariant[e.fontVariant]:void 0,rotation:e.rotation,color:void 0!==e.color?c.ColorCache.instance.getColor(e.color):void 0,backgroundColor:void 0!==e.backgroundColor?c.ColorCache.instance.getColor(e.backgroundColor):void 0,opacity:e.opacity,backgroundOpacity:e.backgroundOpacity},layoutParams:{tracking:e.tracking,leading:e.leading,maxLines:e.maxLines,lineWidth:e.lineWidth,canvasRotation:e.canvasRotation,lineRotation:e.lineRotation,wrappingMode:"None"===e.wrappingMode||"Character"===e.wrappingMode||"Word"===e.wrappingMode?u.WrappingMode[e.wrappingMode]:u.WrappingMode.Word,verticalAlignment:a,horizontalAlignment:i,placements:o}}}}]),e}();function y(e,t,n){var r=n?function(e){var t=[];return(e?e.toUpperCase().replace(" ","").split(","):[]).forEach((function(e){var n=function(e){if(e.length<1||e.length>2)return;var t={h:u.HorizontalPlacement.Center,v:u.VerticalPlacement.Center},n=e.charAt(0),r=!0;switch(n){case s.PlacementToken.Top:case s.PlacementToken.North:t.v=u.VerticalPlacement.Top;break;case s.PlacementToken.Bottom:case s.PlacementToken.South:t.v=u.VerticalPlacement.Bottom;break;default:if(r=!1,2===e.length)return}if(r&&1===e.length)return t;switch(n=1===e.length?e.charAt(0):e.charAt(1)){case s.PlacementToken.Right:case s.PlacementToken.East:t.h=u.HorizontalPlacement.Right;break;case s.PlacementToken.Left:case s.PlacementToken.West:t.h=u.HorizontalPlacement.Left;break;default:return}return t}(e);void 0!==n&&t.push(n)})),t}(n):void 0;return u.resolvePlacementAndAlignment(function(e){return"Left"===e||"Center"===e||"Right"===e?u.HorizontalAlignment[e]:m.horizontalAlignment}(e),function(e){return"Above"===e||"Center"===e||"Below"===e?u.VerticalAlignment[e]:m.verticalAlignment}(t),r)}t.TextStyleCache=g},30240:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TileTextStyleCache=void 0;var a=function(){function e(t){r(this,e),this.textRenderStyles=[],this.textLayoutStyles=[],this.tile=t}return i(e,[{key:"clear",value:function(){this.textRenderStyles.length=0,this.textLayoutStyles.length=0}},{key:"getRenderStyle",value:function(e){var t=this.textRenderStyles[e._index];return void 0===t&&(t=this.textRenderStyles[e._index]=this.tile.mapView.textElementsRenderer.styleCache.createRenderStyle(this.tile,e)),t}},{key:"getLayoutStyle",value:function(e){var t=this.textLayoutStyles[e._index];return void 0===t&&(t=this.textLayoutStyles[e._index]=this.tile.mapView.textElementsRenderer.styleCache.createLayoutStyle(this.tile,e)),t}}]),e}();t.TileTextStyleCache=a},4520:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateStats=void 0;var a=n(30202),o=function(){function e(t){r(this,e),this.m_logger=t,this.tiles=0,this.totalGroups=0,this.newGroups=0,this.totalLabels=0,this.results=new Array(a.PrePlacementResult.Count),this.results.fill(0)}return i(e,[{key:"clear",value:function(){this.tiles=0,this.totalGroups=0,this.newGroups=0,this.totalLabels=0,this.results.fill(0)}},{key:"log",value:function(){this.m_logger.debug("Tiles",this.tiles),this.m_logger.debug("Total groups",this.totalGroups),this.m_logger.debug("New groups",this.newGroups),this.m_logger.debug("Total labels",this.totalLabels),this.m_logger.debug("Placed labels",this.results[a.PrePlacementResult.Ok]),this.m_logger.debug("Invisible",this.results[a.PrePlacementResult.Invisible]),this.m_logger.debug("Poi not ready",this.results[a.PrePlacementResult.NotReady]),this.m_logger.debug("Too far",this.results[a.PrePlacementResult.TooFar]),this.m_logger.debug("Duplicate",this.results[a.PrePlacementResult.Duplicate])}}]),e}();t.UpdateStats=o},14194:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWorkerBootstrapResponse=t.isWorkerBootstrapRequest=void 0,t.isWorkerBootstrapRequest=function(e){return e&&"worker-bootstrap-request"===e.type&&Array.isArray(e.dependencies)},t.isWorkerBootstrapResponse=function(e){return e&&"worker-bootstrap-response"===e.type&&Array.isArray(e.resolvedDependencies)}},53687:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerLoader=void 0,n(89064);var o=n(15739),s=n(14194),u=o.LoggerManager.instance.create("WorkerLoader"),l=function(){function e(){i(this,e)}return a(e,null,[{key:"startWorker",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return t.startsWith("blob:")?this.startWorkerImmediately(t,r):this.directlyFallbackToBlobBasedLoading?this.startWorkerBlob(t,r):this.startWorkerImmediately(t,r).catch((function(i){if("undefined"!==typeof window){var a=window.location.href,s=new URL(t,a).href;if(o.getUrlOrigin(s)===o.getUrlOrigin(a))throw i;return u.log("#startWorker: cross-origin worker construction failed, trying load with blob"),n.directlyFallbackToBlobBasedLoading=!0,e.startWorkerBlob(t,r)}throw i}))}},{key:"startWorkerImmediately",value:function(e,t){try{var n=new Worker(e);return this.waitWorkerInitialized(n,t)}catch(r){return Promise.reject(r)}}},{key:"startWorkerBlob",value:function(e,t){var n=this;return this.fetchScriptSourceToBlobUrl(e).then((function(e){return n.startWorkerImmediately(e,t)}))}},{key:"fetchScriptSourceToBlobUrl",value:function(e){var t=this,n=this.sourceLoaderCache.get(e);return void 0!==n||(n=fetch(e).then((function(e){return e.text()})).catch((function(e){throw new Error("WorkerLoader#fetchScriptSourceToBlob: failed to load worker script: ".concat(e))})).then((function(n){t.sourceLoaderCache.delete(e);var r=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(r)})),this.sourceLoaderCache.set(e,n)),n}},{key:"waitWorkerInitialized",value:function(e,t){var n=this;return new Promise((function(i,a){var o=function(t){var o=t.data;if(s.isWorkerBootstrapRequest(o)){var u,c=o.dependencies,d=[],h=r(c);try{for(h.s();!(u=h.n()).done;){var f=u.value,p=n.dependencyUrlMapping[f];if(!p)return l(),void a(new Error("#waitWorkerInitialized: Unable to resolve '".concat(f,"'")+" as needed by worker script."));d.push(p)}}catch(v){h.e(v)}finally{h.f()}var m={type:"worker-bootstrap-response",resolvedDependencies:d};e.postMessage(m)}else l(),i(e),setTimeout((function(){e.dispatchEvent(t)}),0)},u=function(e){l();var t="Error during worker initialization";e.message&&(t+=": ".concat(e.message)),"string"===typeof e.filename&&"number"===typeof e.lineno&&(t+=" in ".concat(e.filename,":").concat(e.lineno)),a(new Error(t))},l=function(){clearTimeout(c),e.removeEventListener("message",o),e.removeEventListener("error",u)};e.addEventListener("error",u),e.addEventListener("message",o);var c=setTimeout((function(){l(),a(new Error("Timeout exceeded when waiting for first message from worker."))}),t)}))}}]),e}();t.WorkerLoader=l,l.directlyFallbackToBlobBasedLoading=!1,l.sourceLoaderCache=new Map,l.dependencyUrlMapping={}},85164:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(72686),t),i(n(35531),t),i(n(6798),t),i(n(82058),t),i(n(83982),t),i(n(62170),t),i(n(82067),t),i(n(76161),t),i(n(57506),t),i(n(32116),t),i(n(67129),t),i(n(14969),t),i(n(50470),t),i(n(84047),t),i(n(10657),t),i(n(59702),t),i(n(85070),t),i(n(3879),t)},72686:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(81506).default,o=n(2205).default,s=n(99842).default,u=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.CirclePointsMaterial=void 0;var l=n(34585),c=n(50470),d=n(85070),h=function(e){o(n,e);var t=s(n);function n(e){var i;r(this,n);var o,s,c,h,f=new l.Color;if(e){var p=e.size,m=e.color,v=e.opacity,g=u(e,["size","color","opacity"]);o=p,s=m,c=v,g.name="CirclePointsMaterial",g.vertexShader="\nuniform float size;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec3 position;\n\nvoid main() {\n    vec3 transformed = vec3(position);\n    vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\n    gl_Position = projectionMatrix * mvPosition;\n    gl_PointSize = size;\n}\n",g.fragmentShader="\nprecision highp float;\nprecision highp int;\n\nuniform vec3 diffuse;\nuniform float opacity;\n\nvoid main() {\n    float alpha = opacity;\n\n    float radius = 0.5;\n    vec2 coords = gl_PointCoord.xy - vec2(0.5);\n    float len = length(coords);\n    float falloff = fwidth(len);\n    float threshold = 1.0 - smoothstep(radius - falloff, radius, len);\n    alpha *= threshold;\n\n    gl_FragColor = vec4(diffuse, alpha);\n}",g.uniforms=l.UniformsUtils.merge([{size:new l.Uniform(n.DEFAULT_CIRCLE_SIZE),diffuse:new l.Uniform(f),opacity:new l.Uniform(1)},l.UniformsLib.fog]),g.depthTest=!1,g.extensions=Object.assign(Object.assign({},g.extensions),{derivatives:!0}),h=g}return i=t.call(this,h),d.enforceBlending(a(i)),i.type="CirclePointsMaterial",i.setOpacity(1),void 0!==o&&(i.size=o),void 0!==s&&(i.color=s),void 0!==c&&i.setOpacity(c),i}return i(n,[{key:"size",get:function(){return this.uniforms.size.value},set:function(e){this.uniforms.size.value=e}},{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value.copy(e)}}]),n}(c.RawShaderMaterial);t.CirclePointsMaterial=h,h.DEFAULT_CIRCLE_SIZE=1},35531:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CopyMaterial=t.CopyShader=void 0;var s=n(34585);t.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform float opacity;\n    uniform sampler2D tDiffuse;\n    varying vec2 vUv;\n    void main() {\n        vec4 texel = texture2D( tDiffuse, vUv );\n        gl_FragColor = opacity * texel;\n    }"};var u=function(e){a(u,e);var n=o(u);function u(e){return i(this,u),n.call(this,{name:"CopyMaterial",uniforms:e,vertexShader:t.CopyShader.vertexShader,fragmentShader:t.CopyShader.fragmentShader,premultipliedAlpha:!0,transparent:!1,blending:s.NoBlending,depthTest:!1,depthWrite:!1})}return r(u)}(s.ShaderMaterial);t.CopyMaterial=u},6798:function(e,t){"use strict";function n(e){return"displacementMap"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.setDisplacementMapToMaterial=t.hasDisplacementFeature=void 0,t.hasDisplacementFeature=n,t.setDisplacementMapToMaterial=function(e,t){n(t)&&t.displacementMap!==e&&(t.displacementMap=e,t.needsUpdate=!0,null!==t.displacementMap&&(t.displacementMap.needsUpdate=!0))}},82058:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(81506).default,o=n(2205).default,s=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeMaterial=void 0;var u=n(34585),l=n(67129),c=n(32116),d=n(50470),h=n(85070),f=function(e){o(n,e);var t=s(n);function n(e){var i,o,s;if(r(this,n),e){var d={},f=void 0!==e.extrusionRatio&&e.extrusionRatio>=c.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN&&e.extrusionRatio<c.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX;e.displacementMap&&h.setShaderDefine(d,"USE_DISPLACEMENTMAP",!0),f&&h.setShaderDefine(d,"USE_EXTRUSION",!0),!0===e.vertexColors&&h.setShaderDefine(d,"USE_COLOR",!0),s={name:"EdgeMaterial",vertexShader:"\n#define EDGE_DEPTH_OFFSET 0.0001\n\n#ifdef USE_COLOR\nattribute vec4 color;\n#else\nuniform vec3 color;\n#endif\n\n// SHADER_NAME may be defined by THREE.JS own shaders in which case these attributes & uniforms are\n// already defined\n#ifndef SHADER_NAME\nattribute vec3 position;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\n#endif\n\nuniform vec3 edgeColor;\nuniform float edgeColorMix;\n\n#ifdef USE_DISPLACEMENTMAP\nattribute vec3 normal;\nattribute vec2 uv;\nuniform sampler2D displacementMap;\n#endif\n\nvarying vec3 vColor;\n\n#ifdef USE_EXTRUSION\n#include <extrusion_pars_vertex>\n#endif\n\n#ifdef USE_FADING\n#include <fading_pars_vertex>\n#endif\n\nvoid main() {\n\n    vColor = mix(edgeColor.rgb, color.rgb, edgeColorMix);\n\n    vec3 transformed = vec3( position );\n\n    #ifdef USE_EXTRUSION\n    #include <extrusion_vertex>\n    #endif\n\n    #ifdef USE_DISPLACEMENTMAP\n    transformed += normalize( normal ) * texture2D( displacementMap, uv ).x;\n    #endif\n\n    vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n    gl_Position = projectionMatrix * mvPosition;\n    // After projection gl_Position contains clip space coordinates of each vertex\n    // before perspective division (1 / w), thus only vertexes with -w < z < w should\n    // be displayed and offset. We offset only those edges which z coordinate in NDC\n    // space is between: -inf < z < 1\n    float depthOffset = step(-1.0, -gl_Position.z / gl_Position.w) * EDGE_DEPTH_OFFSET;\n    gl_Position.z -= depthOffset;\n\n    #ifdef USE_FADING\n    #include <fading_vertex>\n    #endif\n}",fragmentShader:"\nprecision highp float;\nprecision highp int;\n\nvarying vec3 vColor;\n\n#ifdef USE_EXTRUSION\n#include <extrusion_pars_fragment>\n#endif\n\n#ifdef USE_FADING\n#include <fading_pars_fragment>\n#endif\n\nvoid main() {\n    float alphaValue = 1.0;\n    gl_FragColor = vec4(vColor, alphaValue);\n\n    #ifdef USE_EXTRUSION\n    #include <extrusion_fragment>\n    #endif\n\n    #ifdef USE_FADING\n    #include <fading_fragment>\n    #endif\n}",uniforms:{color:new u.Uniform(new u.Color(n.DEFAULT_COLOR)),edgeColor:new u.Uniform(new u.Color(n.DEFAULT_COLOR)),edgeColorMix:new u.Uniform(n.DEFAULT_COLOR_MIX),fadeNear:new u.Uniform(l.FadingFeature.DEFAULT_FADE_NEAR),fadeFar:new u.Uniform(l.FadingFeature.DEFAULT_FADE_FAR),extrusionRatio:new u.Uniform(c.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX),displacementMap:new u.Uniform(null!==(o=e.displacementMap)&&void 0!==o?o:new u.Texture)},depthWrite:!1,defines:d,rendererCapabilities:e.rendererCapabilities}}return i=t.call(this,s),h.enforceBlending(a(i)),l.FadingFeature.patchGlobalShaderChunks(),l.ExtrusionFeature.patchGlobalShaderChunks(),void 0!==e&&(void 0!==e.color&&i.color.set(e.color),void 0!==e.colorMix&&(i.colorMix=e.colorMix),void 0!==e.fadeNear&&(i.fadeNear=e.fadeNear),void 0!==e.fadeFar&&(i.fadeFar=e.fadeFar),void 0!==e.displacementMap&&(i.displacementMap=e.displacementMap),void 0!==e.extrusionRatio&&(i.extrusionRatio=e.extrusionRatio)),i}return i(n,[{key:"objectColor",get:function(){return this.uniforms.color.value},set:function(e){this.uniforms.color.value.copy(e)}},{key:"color",get:function(){return this.uniforms.edgeColor.value},set:function(e){this.uniforms.edgeColor.value.copy(e)}},{key:"lineWidth",get:function(){return this.linewidth},set:function(e){this.linewidth=e,this.linewidth<=0?this.visible=!1:this.visible=!0}},{key:"colorMix",get:function(){return this.uniforms.edgeColorMix.value},set:function(e){this.uniforms.edgeColorMix.value!==e&&(this.uniforms.edgeColorMix.value=e)}},{key:"fadeNear",get:function(){return this.uniforms.fadeNear.value},set:function(e){this.uniforms.fadeNear.value=e}},{key:"fadeFar",get:function(){return this.uniforms.fadeFar.value},set:function(e){this.uniforms.fadeFar.value!==e&&(this.uniforms.fadeFar.value=e,h.setShaderMaterialDefine(this,"USE_FADING",e>0))}},{key:"extrusionRatio",get:function(){return this.uniforms.extrusionRatio.value},set:function(e){if(this.uniforms.extrusionRatio.value!==e){this.uniforms.extrusionRatio.value=e;var t=e>=c.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN;h.setShaderMaterialDefine(this,"USE_EXTRUSION",t)}}},{key:"displacementMap",get:function(){return this.uniforms.displacementMap.value},set:function(e){if(this.uniforms.displacementMap.value!==e){this.uniforms.displacementMap.value=e;var t=null!==e;t&&(this.uniforms.displacementMap.value.needsUpdate=!0),h.setShaderMaterialDefine(this,"USE_DISPLACEMENTMAP",t)}}}]),n}(d.RawShaderMaterial);t.EdgeMaterial=f,f.DEFAULT_COLOR=0,f.DEFAULT_COLOR_MIX=0},83982:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GroundAtmosphereMaterial=t.GroundAtmosphereShader=void 0;var s=n(34585),u=n(50470),l=n(7893),c=n(85070);t.GroundAtmosphereShader={uniforms:{u_eyePositionWorld:new s.Uniform(new s.Vector3),u_lightDirectionWorld:new s.Uniform(new s.Vector3(0,1,0)),u_modelViewProjection:new s.Uniform(new s.Matrix4),u_atmosphereEnv:new s.Uniform(new s.Vector3(6384515.136999999,6537590.425,0)),u_hsvCorrection:new s.Uniform(new s.Vector3(0,0,0)),topColor:new s.Uniform(new s.Color(30719)),bottomColor:new s.Uniform(new s.Color(16777215)),offset:new s.Uniform(33),exponent:new s.Uniform(.6),fogColor:new s.Uniform(new s.Color(30719)),fogNear:new s.Uniform(new s.Color(30719)),fogFar:new s.Uniform(new s.Color(16777215))},vertexShader:"\n\n    #define IMPROVE_INTERSECT_PRECISION 1\n    #define IMPROVE_DOT_PRECISION 1\n\n    precision highp float;\n    precision highp int;\n\n    attribute vec4 position;\n\n    // Base mandatory uniforms\n    uniform mat4 u_modelViewProjection;\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_hsvCorrection;\n\n    const float Pi = 3.141592653589793;\n    const float Kr = 0.0025;\n    const float Km = 0.0015;\n    const float Kr4PI = Kr * 4.0 * Pi;\n    const float Km4PI = Km * 4.0 * Pi;\n    const float ESun = 25.0; // should be 15.0\n    const float KmESun = Km * ESun;\n    const float KrESun = Kr * ESun;\n    const vec3 InvWavelength = vec3(\n        1.0 / pow(0.650, 4.0), // Red\n        1.0 / pow(0.570, 4.0), // Green\n        1.0 / pow(0.475, 4.0)); // Blue\n\n    const int nSamples = 2;\n    const float fSamples = 2.0;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n    varying vec3 v_vertToOrigin;\n\n    ".concat(l.default.atmosphere_vertex_utils,"\n\n    //\n    // Computes rayleight and mia atmosphere factors for ground.\n    //\n    // Code based on GPU Gems article.\n    //\n    // Author: Sean O'Neil\n    //\n    // Copyright (c) 2004 Sean O'Neil\n    //\n    // https://developer.nvidia.com/gpugems/gpugems2/part-ii-shading-lighting-and-shadows/chapter-16-accurate-atmospheric-scattering\n    //\n    // Further modifications by HERE.\n    //\n    AtmosphereColor computeGroundAtmosphere(vec3 v3Pos, vec3 vLightDir)\n    {\n        // Retrieve environment variables\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        // All that may be moved to const or define(s) at further optimizations:\n        float fScale = 1.0 / (fOuterRadius - fInnerRadius);\n        float fScaleOverScaleDepth = fScale / RayleighScaleDepth;\n        float fCameraHeight2 = fCameraHeight * fCameraHeight;\n        float fOuterRadius2 = fOuterRadius * fOuterRadius;\n\n        // Get the ray from the camera to the vertex and its length (which is the far point of the ray passing through the atmosphere)\n        vec3 v3Ray = v3Pos - u_eyePositionWorld;\n        float fFar = length(v3Ray);\n        v3Ray /= fFar;\n\n#if !defined(IMPROVE_DOT_PRECISION)\n        vec3 v3Dir = normalize(v3Pos);\n#endif\n\n#ifdef CAMERA_IN_SPACE\n\n        // Calculate first point of camera ray and sphere intersection.\n        float fNear = getNearSphereIntersect(u_eyePositionWorld, v3Ray, fCameraHeight2, fOuterRadius2);\n        // Make far relative to first atmosphere intersection, setting it to\n        // the length of ray passed through atmosphere\n        fFar -= fNear;\n\n        // Compute the ray's starting position within the atmosphere, then\n        // calculate its scattering offset\n        vec3 v3Start = u_eyePositionWorld + v3Ray * fNear;\n        float fDepth = exp((fInnerRadius - fOuterRadius) / RayleighScaleDepth);\n\n#else // CAMERA_IN_ATMOSPHERE\n\n        // The ray starts already in atmosphere\n        vec3 v3Start = u_eyePositionWorld;\n        // Virtually fNear is just at eye position, so ray passing through atmosphere does not shorten\n        // fFar -= 0.0;\n        float fDepth = exp((fInnerRadius - fCameraHeight) / RayleighScaleDepth);\n#endif\n\n#if defined(IMPROVE_DOT_PRECISION)\n        float fCameraAngle = dot(-v3Ray, v3Pos) / length(v3Pos);\n#else\n        float fCameraAngle = dot(-v3Ray, v3Dir);\n#endif\n        float fCameraScale = scale(fCameraAngle);\n\n#ifdef DYNAMIC_LIGHT\n        // When we want the atmosphere to be uniform over the globe so it is set to 1.0.\n        #if defined(IMPROVE_DOT_PRECISION)\n            // The light angle for given light source may be calculated as:\n            // angle = dot(vLightDir, v3Dir) / length(v3Dir);\n            // where v3Dir holds normalized vertex position, but for precision issues we v3Pos (un-normalized)\n            float fLightAngle = dot(vLightDir, v3Pos) / length(v3Pos);\n        #else\n            float fLightAngle = dot(vLightDir, v3Dir);\n        #endif\n#else\n        float fLightAngle = 1.0;\n#endif\n        float fLightScale = scale(fLightAngle);\n\n        float fCameraOffset = fDepth * fCameraScale;\n        float fTemp = (fLightScale + fCameraScale);\n\n        // Initialize the scattering loop variables\n        float fSampleLength = fFar / fSamples;\n        float fScaledLength = fSampleLength * fScale;\n        vec3 v3SampleRay = v3Ray * fSampleLength;\n        vec3 v3SamplePoint = v3Start + v3SampleRay * 0.5;\n\n        // Now loop through the sample rays\n        vec3 v3BaseColor = vec3(0.0);\n        vec3 v3Attenuate = vec3(0.0);\n        for(int i = 0; i < nSamples; i++)\n        {\n            float fHeight = length(v3SamplePoint);\n            float fDepth = exp(fScaleOverScaleDepth * (fInnerRadius - fHeight));\n            float fScatter = fDepth * fTemp - fCameraOffset;\n            // Compute color factors\n            v3Attenuate = exp(-fScatter * (InvWavelength * Kr4PI + Km4PI));\n            v3BaseColor += v3Attenuate * (fDepth * fScaledLength);\n            // Move to the next point\n            v3SamplePoint += v3SampleRay;\n        }\n\n        AtmosphereColor color;\n        color.mie = v3BaseColor * (InvWavelength * KrESun + KmESun);\n        // Calculate the attenuation factor for the ground\n        color.rayleigh = v3Attenuate;\n\n        return color;\n    }\n\n    void main(void)\n    {\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        AtmosphereColor atmColor = computeGroundAtmosphere(position.xyz, vLightDir);\n        v_mieColor = atmColor.mie;\n        v_rayleighColor = atmColor.rayleigh;\n        v_vertToCamera = u_eyePositionWorld - position.xyz;\n        v_vertToOrigin = normalize(position.xyz);\n\n        gl_Position = u_modelViewProjection * position;\n    }\n    "),fragmentShader:"\n\n    // Exposure correction gives more subtle gradients on the ground.\n    #define CORRECT_EXPOSURE 1\n    #define FADE_DEPTH 1\n    #define NIGHT_LOCAL 1\n\n    precision highp float;\n    precision highp int;\n\n    #ifdef CORRECT_COLOR\n    uniform vec3 u_hsvCorrection; // Hue, saturation, brightness\n    #endif\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    const float g = -0.95;\n    const float g2 = g * g;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n    varying vec3 v_vertToOrigin;\n\n    ".concat(l.default.atmosphere_fragment_utils,"\n\n    void main(void)\n    {\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        // GPU gems mix of ground solution, with custom alpha settings\n        vec3 cRgb = v_mieColor + 0.25 * v_rayleighColor;\n\n        // Not needed for HDR frame buffer\n    #if !defined(HDR_FRAME_BUFFER) && defined(CORRECT_EXPOSURE)\n        // Interesting results with exposure factor: 2.0, 3.5, 4.0\n        cRgb = correctExposure(cRgb, 3.0);\n    #endif\n\n    #ifdef CORRECT_COLOR\n        cRgb = correctColor(cRgb, u_hsvCorrection);\n    #endif\n\n        // Base atmosphere opacity\n        float fAtmosphereAlpha = 1.0;\n\n        // Factor based on the distance of camera atmosphere and ground, results are:\n        // 0.0 = camera on the ground surface,\n        // 1.0 = at the outer edge of the atmosphere.\n        float fDepthFactor = clamp((fCameraHeight - fInnerRadius) /\n            (fOuterRadius - fInnerRadius), 0.0, 1.0);\n    #ifdef FADE_DEPTH\n        // Fade alpha based on the distance of camera between atmosphere layers\n        #ifdef FADE_DEPTH_LINEAR\n            fAtmosphereAlpha *= fDepthFactor;\n        #else\n            fAtmosphereAlpha *= pow(fDepthFactor, 1.5);\n        #endif\n    #endif\n\n#if defined(FADE_NIGHT) || defined(DARKEN_NIGHT)\n    #ifdef DYNAMIC_LIGHT\n        // Adjust factor based on time of day, results are:\n        // 0.0 = night,\n        // 1.0 = day.\n        #ifdef NIGHT_GLOBAL\n            // Global night fade based on camera and light orientation\n            float fNightFactor = clamp(dot(normalize(u_eyePositionWorld), vLightDir), 0.0, 1.0);\n            fNightFactor = pow(fNightFactor, 0.5);\n        #else // NIGHT_LOCAL\n            float fNightFactor =\n                clamp(dot(v_vertToOrigin, vLightDir) / length(v_vertToOrigin), 0.0, 1.0);\n            fNightFactor = pow(fNightFactor, 0.8);\n        #endif\n    #else\n        float fNightFactor = 1.0;\n    #endif\n#endif\n\n    #ifdef FADE_NIGHT\n        // Adjust alpha for night side of the globe\n        fAtmosphereAlpha *= fNightFactor;\n    #endif\n\n    #ifdef DARKEN_NIGHT\n        // Change the brightness depending on night / day side.\n        // NOTE: Darkening should be rather applied in HSV space, without loss on saturation,\n        // but it is much more GPU consuming.\n        const float minBrightness = 0.5;\n        float fDarkenFactor = clamp(fNightFactor, minBrightness, 1.0);\n        cRgb *= fDarkenFactor;\n    #endif\n\n    #ifdef EXPOSURE_DEPTH\n        // Control exposure depending from ground distance\n        float exposureBoost = 3.0 - fDepthFactor;\n        cRgb = correctExposure(cRgb, exposureBoost);\n    #endif\n\n        // Experimental fading out of focus point - similar to fresnel effect in top view.\n        // This fade is handy to better expose cartographic/map features in screen center.\n        float fFocusFactor = 1.0 - clamp(dot(normalize(v_vertToCamera), v_vertToOrigin), 0.0, 1.0) + 0.1;\n        fFocusFactor = pow(fFocusFactor, 2.5);\n        fAtmosphereAlpha *= fFocusFactor;\n\n        // Integrate all features\n        gl_FragColor = vec4(cRgb, fAtmosphereAlpha);\n    }\n    ")};var d=function(e){a(u,e);var n=o(u);function u(e){var i;if(r(this,u),e){i={name:"GroundAtmosphereMaterial",vertexShader:t.GroundAtmosphereShader.vertexShader,fragmentShader:t.GroundAtmosphereShader.fragmentShader,uniforms:t.GroundAtmosphereShader.uniforms,transparent:!0,depthTest:!1,depthWrite:!1,side:s.FrontSide,blending:s.NormalBlending,fog:!1,rendererCapabilities:e.rendererCapabilities}}return n.call(this,i)}return i(u,[{key:"setDynamicLighting",value:function(e){c.setShaderMaterialDefine(this,"DYNAMIC_LIGHT",e)}},{key:"outerRadius",get:function(){return this.uniforms.u_atmosphereEnv.value.y},set:function(e){this.uniforms.u_atmosphereEnv.value.y=e}},{key:"innerRadius",get:function(){return this.uniforms.u_atmosphereEnv.value.x},set:function(e){this.uniforms.u_atmosphereEnv.value.x=e}},{key:"updateUniforms",value:function(e,t,n,r){var i=this.getCameraInfo(t,n);if(void 0===e||!e.isMaterial)throw Error("Wrong object used, only Material objects are supported");if(!(e.uniforms&&e.uniforms.u_atmosphereEnv&&e.uniforms.u_hsvCorrection&&e.uniforms.u_eyePositionWorld&&e.uniforms.u_modelViewProjection&&e.uniforms.u_lightDirectionWorld))throw Error("Atmosphere material has missing uniforms");var a=i.eyePos,o=i.modelViewProjection,s=i.eyeHeight;e.uniforms.u_eyePositionWorld.value.copy(a),e.uniforms.u_modelViewProjection.value.copy(o),e.uniforms.u_atmosphereEnv.value.z=s,e.uniforms.u_lightDirectionWorld.value=r.clone();var u=s>this.outerRadius,l=c.setShaderDefine(e.defines,"CAMERA_IN_SPACE",u),d=c.setShaderDefine(e.defines,"CAMERA_IN_ATMOSPHERE",!u);e.needsUpdate=e.needsUpdate||l||d}},{key:"getCameraInfo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var r=(new s.Matrix4).identity(),i=(new s.Matrix4).copy(e.matrixWorld).invert().transpose(),a=t.projectionMatrix,o=new s.Matrix4;o.multiplyMatrices(i,r),o.multiplyMatrices(a,o);var u=new s.Vector3;e.getWorldPosition(u);var l=new s.Vector3;t.getWorldPosition(l);var c=l.distanceTo(u);return{modelViewProjection:o,eyePos:u,eyeHeight:c}}var d=e.matrixWorld,h=t.matrixWorldInverse,f=t.projectionMatrix,p=new s.Matrix4;p.multiplyMatrices(h,d),p.multiplyMatrices(f,p);var m=new s.Vector3;t.getWorldPosition(m);var v=new s.Vector3;e.getWorldPosition(v);var g=v.distanceTo(m);return m.sub(v),{modelViewProjection:p,eyePos:m,eyeHeight:g}}}]),u}(u.RawShaderMaterial);t.GroundAtmosphereMaterial=d},62170:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.isHighPrecisionLineMaterial=t.HighPrecisionLineMaterial=void 0;var s=n(34585),u=n(50470),l=n(43937),c=function(e){a(n,e);var t=o(n);function n(e){var i;r(this,n),Object.assign(s.ShaderChunk,l.default);var a=e?{name:"HighPrecisionLineMaterial",vertexShader:"\n#ifdef USE_COLOR\nattribute vec4 color;\nvarying vec3 vColor;\n#endif\n\n// uniforms to implement double-precision\nuniform mat4 u_mvp;             // combined modelView and projection matrix\nuniform vec3 u_eyepos;          // eye position major\nuniform vec3 u_eyepos_lowpart;  // eye position minor ((double) eyepos - (float) eyepos)\n\n// vertex attributes\nattribute vec3 position;        // high part\nattribute vec3 positionLow;     // low part\n\n#include <high_precision_vert_func>\n\nvoid main() {\n    #ifdef USE_COLOR\n    vColor = color.rgb;\n    #endif\n\n    vec3 pos = subtractDblEyePos(position);\n    gl_Position = u_mvp * vec4(pos, 1.0);\n}",fragmentShader:"\nprecision highp float;\nprecision highp int;\n\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifdef USE_COLOR\nvarying vec3 color;\n#endif\n\nvoid main() {\n    #ifdef USE_COLOR\n    gl_FragColor = vec4( diffuse * vColor, opacity );\n    #else\n    gl_FragColor = vec4( diffuse, opacity );\n    #endif\n}",uniforms:{diffuse:new s.Uniform(new s.Color(n.DEFAULT_COLOR)),opacity:new s.Uniform(n.DEFAULT_OPACITY),u_mvp:new s.Uniform(new s.Matrix4),u_eyepos:new s.Uniform(new s.Vector3),u_eyepos_lowpart:new s.Uniform(new s.Vector3)},rendererCapabilities:e.rendererCapabilities}:void 0;return Object.assign(a,e),(i=t.call(this,a)).type="HighPrecisionLineMaterial",i.isHighPrecisionLineMaterial=!0,e&&(void 0!==e.color&&i.color.set(e.color),void 0!==e.opacity&&(i.opacity=e.opacity)),i.updateTransparencyFeature(),i}return i(n,[{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value.copy(e)}},{key:"updateTransparencyFeature",value:function(){this.transparent=this.opacity<1}}]),n}(u.RawShaderMaterial);t.HighPrecisionLineMaterial=c,c.DEFAULT_COLOR=80,c.DEFAULT_OPACITY=1,t.isHighPrecisionLineMaterial=function(e){return void 0!==e&&!0===e.isHighPrecisionLineMaterial}},82067:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.isHighPrecisionPointMaterial=t.HighPrecisionPointMaterial=void 0;var s=n(34585),u=n(43937),l=function(e){a(n,e);var t=o(n);function n(e){var i;r(this,n),Object.assign(s.ShaderChunk,u.default);var a=e;return(i=t.call(this,a)).type="HighPrecisionPointMaterial",i.vertexShader="\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n\nuniform float size;\n\n// uniforms to implement double-precision\nuniform mat4 u_mvp;             // combined modelView and projection matrix\nuniform vec3 u_eyepos;          // eye position major\nuniform vec3 u_eyepos_lowpart;  // eye position minor ((double) eyepos - (float) eyepos)\n\n// vertex attributes\nattribute vec3 positionLow;     // low part\n\n#include <high_precision_vert_func>\n\nvoid main() {\n    #ifdef USE_COLOR\n    vColor = color.rgb;\n    #endif\n\n    vec3 pos = subtractDblEyePos(position);\n    gl_Position = u_mvp * vec4(pos, 1.0);\n\n    // ignore sizeAttenuation for now!\n    gl_PointSize = size;\n}",i.fragmentShader=s.ShaderChunk.points_frag,i.fog=!1,i.uniforms={diffuse:new s.Uniform(new s.Color(n.DEFAULT_COLOR)),opacity:new s.Uniform(n.DEFAULT_OPACITY),size:new s.Uniform(n.DEFAULT_SIZE),scale:new s.Uniform(n.DEFAULT_SCALE),map:new s.Uniform(new s.Texture),uvTransform:new s.Uniform(new s.Matrix3),u_mvp:new s.Uniform(new s.Matrix4),u_eyepos:new s.Uniform(new s.Vector3),u_eyepos_lowpart:new s.Uniform(new s.Vector3)},i.isHighPrecisionPointMaterial=!0,void 0!==e&&(void 0!==e.color&&i.color.set(e.color),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.size&&(i.size=e.size),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.uvTransform&&(i.uvTransform=e.uvTransform),void 0!==e.map&&(i.map=e.map)),i}return i(n,[{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"uvTransform",get:function(){return this.uniforms.uvTransform.value},set:function(e){this.uniforms.uvTransform.value=e}}]),n}(s.PointsMaterial);t.HighPrecisionPointMaterial=l,l.DEFAULT_COLOR=80,l.DEFAULT_OPACITY=1,l.DEFAULT_SIZE=1,l.DEFAULT_SCALE=1,t.isHighPrecisionPointMaterial=function(e){return void 0!==e&&!0===e.isHighPrecisionPointMaterial}},76161:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.IconMaterial=void 0;var s=n(34585),u=n(50470),l=function(e){a(n,e);var t=o(n);function n(e){r(this,n);var i=e?{name:"IconMaterial",vertexShader:"\nattribute vec4 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec4 vColor;\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    vColor = color;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xyz, 1.0);\n}",fragmentShader:"\nprecision highp float;\nprecision highp int;\n\nuniform sampler2D map;\n\nvarying vec4 vColor;\nvarying vec2 vUv;\n\nvoid main() {\n\n    vec4 color = texture2D(map, vUv.xy);\n    color *= vColor;\n    if (color.a < 0.05) {\n        discard;\n    }\n    gl_FragColor = color;\n}",uniforms:{map:new s.Uniform(e.map)},depthTest:!1,depthWrite:!1,transparent:!0,vertexColors:!0,premultipliedAlpha:!0,rendererCapabilities:e.rendererCapabilities}:void 0;return t.call(this,i)}return i(n,[{key:"map",get:function(){return this.uniforms.map.value}}]),n}(u.RawShaderMaterial);t.IconMaterial=l},57506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LuminosityHighPassShader=void 0;var r=n(34585);t.LuminosityHighPassShader={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new r.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform vec3 defaultColor;\n    uniform float defaultOpacity;\n    uniform float luminosityThreshold;\n    uniform float smoothWidth;\n    varying vec2 vUv;\n    void main() {\n        vec4 texel = texture2D( tDiffuse, vUv );\n        vec3 luma = vec3( 0.299, 0.587, 0.114 );\n        float v = dot( texel.xyz, luma );\n        vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n        float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n        gl_FragColor = mix( outputColor, texel, alpha );\n    }"}},14969:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MSAAMaterial=void 0;var s=n(34585),u=n(35531),l=function(e){a(n,e);var t=o(n);function n(e){return i(this,n),t.call(this,{uniforms:e,vertexShader:u.CopyShader.vertexShader,fragmentShader:u.CopyShader.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:s.AdditiveBlending,depthTest:!1,depthWrite:!1})}return r(n)}(s.ShaderMaterial);t.MSAAMaterial=l},67129:function(e,t,n){"use strict";var r=n(16525).default,i=n(29754).default,a=n(2205).default,o=n(99842).default,s=n(34575).default,u=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MapMeshStandardMaterial=t.MapMeshDepthMaterial=t.MapMeshBasicMaterial=t.ExtrusionFeatureMixin=t.ExtrusionFeature=t.FadingFeatureMixin=t.FadingFeature=t.DisplacementFeatureMixin=t.hasExtrusionFeature=void 0;var l,c=n(15739),d=n(34585),h=n(32116),f=n(99918),p=n(6599),m=n(35234),v=n(85070),g=new d.Texture;function y(e,t){return e*t.maximum}function x(e,t){void 0===t.defines&&(t.defines={}),e.shaderDefines=t.defines,void 0===e.shaderUniforms&&(e.shaderUniforms={})}function _(e,t){Object.assign(t.uniforms,e.shaderUniforms),e.shaderUniforms=t.uniforms}t.hasExtrusionFeature=function(e){return"extrusionRatio"in e},function(e){function t(e){return null!==e.displacementMap}e.isEnabled=t,e.updateDisplacementFeature=function(e){c.assert(void 0!==e.shaderDefines),c.assert(void 0!==e.shaderUniforms);var n=t(e),r=v.setShaderDefine(e.shaderDefines,"USE_DISPLACEMENTMAP",n);if(e.needsUpdate=r,n){var i=e.displacementMap;i.needsUpdate=!0,e.shaderUniforms.displacementMap.value=i}else r&&(e.shaderUniforms.displacementMap.value=g)},e.onBeforeCompile=function(e,n){t(e)&&(c.assert(void 0!==e.shaderUniforms),_(e,n),n.vertexShader=n.vertexShader.replace("#include <skinbase_vertex>","#include <skinbase_vertex>\n#ifndef USE_ENVMAP\n    vec3 objectNormal = vec3( normal );\n#endif"),n.vertexShader=v.insertShaderInclude(n.vertexShader,"uv2_pars_vertex","displacementmap_pars_vertex"),n.vertexShader=v.insertShaderInclude(n.vertexShader,"skinning_vertex","displacementmap_vertex",!0))}}(l||(l={}));var b,w=function(){function e(){s(this,e),this.m_displacementMap=null}return u(e,[{key:"displacementMap",get:function(){return this.m_displacementMap},set:function(e){this.setDisplacementMap(e)}},{key:"getDisplacementMap",value:function(){return this.m_displacementMap}},{key:"setDisplacementMap",value:function(e){e!==this.m_displacementMap&&(this.m_displacementMap=e,l.updateDisplacementFeature(this))}},{key:"addDisplacementProperties",value:function(){var e=this;Object.defineProperty(this,"displacementMap",{get:function(){return e.getDisplacementMap()},set:function(t){e.setDisplacementMap(t)}})}},{key:"applyDisplacementParameters",value:function(e){var t=this;x(this,this),c.assert(void 0!==this.shaderDefines),c.assert(void 0!==this.shaderUniforms);var n=this.shaderUniforms;n.displacementMap=new d.Uniform(g),n.displacementScale=new d.Uniform(1),n.displacementBias=new d.Uniform(0),void 0!==e&&void 0!==e.displacementMap&&this.setDisplacementMap(e.displacementMap),this.onBeforeCompile=c.chainCallbacks(this.onBeforeCompile,(function(e){l.onBeforeCompile(t,e)})),this.needsUpdate=l.isEnabled(this)}},{key:"copyDisplacementParameters",value:function(e){return this.setDisplacementMap(e.displacementMap),this}}]),e}();t.DisplacementFeatureMixin=w,function(e){function t(e){return void 0!==e.fadeNear&&void 0!==e.fadeFar&&e.fadeFar>0}e.DEFAULT_FADE_NEAR=-1,e.DEFAULT_FADE_FAR=-1,e.isEnabled=t,e.isDefined=function(e){return void 0!==e.fadeNear&&void 0!==e.fadeFar},e.patchGlobalShaderChunks=function(){void 0===d.ShaderChunk.fading_pars_vertex&&Object.assign(d.ShaderChunk,p.default)},e.updateFadingFeature=function(n){c.assert(void 0!==n.shaderDefines),c.assert(void 0!==n.shaderUniforms);var r=t(n),i=v.setShaderDefine(n.shaderDefines,"FADING_MATERIAL",r);n.needsUpdate=i,c.assert(void 0!==n.shaderUniforms.fadeNear&&void 0!==n.shaderUniforms.fadeFar),r?(n.shaderUniforms.fadeNear.value=n.fadeNear,n.shaderUniforms.fadeFar.value=n.fadeFar,i&&v.enableBlending(n)):i&&(n.shaderUniforms.fadeNear.value=e.DEFAULT_FADE_NEAR,n.shaderUniforms.fadeFar.value=e.DEFAULT_FADE_FAR,v.disableBlending(n))},e.onBeforeCompile=function(e,n){t(e)&&(c.assert(void 0!==e.shaderUniforms),_(e,n),n.vertexShader=v.insertShaderInclude(n.vertexShader,"fog_pars_vertex","fading_pars_vertex"),n.vertexShader=v.insertShaderInclude(n.vertexShader,"fog_vertex","fading_vertex",!0),n.fragmentShader=v.insertShaderInclude(n.fragmentShader,"fog_pars_fragment","fading_pars_fragment"),n.fragmentShader=v.insertShaderInclude(n.fragmentShader,"fog_fragment","fading_fragment",!0))},e.addRenderHelper=function(t,n,r,i,a,o){t.onBeforeRender=c.chainCallbacks(t.onBeforeRender,(function(t,a,s,u,l,c){var d=l;d.fadeNear=void 0===r||r===e.DEFAULT_FADE_NEAR?e.DEFAULT_FADE_NEAR:y(r,n),d.fadeFar=void 0===i||i===e.DEFAULT_FADE_FAR?e.DEFAULT_FADE_FAR:y(i,n),void 0!==o&&o(t,l)}))}}(b=t.FadingFeature||(t.FadingFeature={}));var S,M=function(){function e(){s(this,e),this.m_fadeNear=b.DEFAULT_FADE_NEAR,this.m_fadeFar=b.DEFAULT_FADE_FAR}return u(e,[{key:"getFadeNear",value:function(){return this.m_fadeNear}},{key:"setFadeNear",value:function(e){e!==this.m_fadeNear&&(this.m_fadeNear=e,b.updateFadingFeature(this))}},{key:"getFadeFar",value:function(){return this.m_fadeFar}},{key:"setFadeFar",value:function(e){e!==this.m_fadeFar&&(this.m_fadeFar=e,b.updateFadingFeature(this))}},{key:"addFadingProperties",value:function(){var e=this;Object.defineProperty(this,"fadeNear",{get:function(){return e.getFadeNear()},set:function(t){e.setFadeNear(t)}}),Object.defineProperty(this,"fadeFar",{get:function(){return e.getFadeFar()},set:function(t){e.setFadeFar(t)}})}},{key:"applyFadingParameters",value:function(e){var t=this;x(this,this),c.assert(void 0!==this.shaderDefines),c.assert(void 0!==this.shaderUniforms),this.shaderUniforms.fadeNear=new d.Uniform(b.DEFAULT_FADE_NEAR),this.shaderUniforms.fadeFar=new d.Uniform(b.DEFAULT_FADE_FAR),void 0!==e&&(void 0!==e.fadeNear&&this.setFadeNear(e.fadeNear),void 0!==e.fadeFar&&this.setFadeFar(e.fadeFar)),this.onBeforeCompile=c.chainCallbacks(this.onBeforeCompile,(function(e){b.onBeforeCompile(t,e)})),this.needsUpdate=b.isEnabled(this)}},{key:"copyFadingParameters",value:function(e){return this.setFadeNear(void 0===e.fadeNear?b.DEFAULT_FADE_NEAR:e.fadeNear),this.setFadeFar(void 0===e.fadeFar?b.DEFAULT_FADE_FAR:e.fadeFar),this}}]),e}();t.FadingFeatureMixin=M,function(e){function t(e){return void 0!==e.extrusionRatio&&e.extrusionRatio>=h.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN}e.isEnabled=t,e.patchGlobalShaderChunks=function(){void 0===d.ShaderChunk.extrusion_pars_vertex&&Object.assign(d.ShaderChunk,f.default)},e.updateExtrusionFeature=function(e){c.assert(void 0!==e.shaderDefines),c.assert(void 0!==e.shaderUniforms);var n=t(e),r=v.setShaderDefine(e.shaderDefines,"EXTRUSION_MATERIAL",n);e.needsUpdate=r,n?e.shaderUniforms.extrusionRatio.value=e.extrusionRatio:r&&(e.shaderUniforms.extrusionRatio.value=h.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX)},e.onBeforeCompile=function(e,n){t(e)&&(c.assert(void 0!==e.shaderUniforms),_(e,n),n.vertexShader=v.insertShaderInclude(n.vertexShader,"common","extrusion_pars_vertex"),n.vertexShader=v.insertShaderInclude(n.vertexShader,"begin_vertex","extrusion_vertex",!0),n.fragmentShader=v.insertShaderInclude(n.fragmentShader,"fog_pars_fragment","extrusion_pars_fragment"),n.fragmentShader=n.fragmentShader.replace("#include <normal_fragment_begin>","#include <extrusion_normal_fragment_begin>"),n.fragmentShader=v.insertShaderInclude(n.fragmentShader,"fog_fragment","extrusion_fragment",!0))}}(S=t.ExtrusionFeature||(t.ExtrusionFeature={}));var E=function(){function e(){s(this,e),this.m_extrusion=h.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX}return u(e,[{key:"getExtrusionRatio",value:function(){return this.m_extrusion}},{key:"setExtrusionRatio",value:function(e){e!==this.m_extrusion&&(this.m_extrusion=e,S.updateExtrusionFeature(this))}},{key:"addExtrusionProperties",value:function(){var e=this;Object.defineProperty(this,"extrusionRatio",{get:function(){return e.getExtrusionRatio()},set:function(t){e.setExtrusionRatio(t)}})}},{key:"applyExtrusionParameters",value:function(e){var t=this;x(this,this),c.assert(void 0!==this.shaderDefines),c.assert(void 0!==this.shaderUniforms),e&&!0===e.zFightingWorkaround&&(this.shaderDefines.ZFIGHTING_WORKAROUND=""),this.shaderUniforms.extrusionRatio=new d.Uniform(h.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX),void 0!==e&&void 0!==e.extrusionRatio&&this.setExtrusionRatio(e.extrusionRatio),this.onBeforeCompile=c.chainCallbacks(this.onBeforeCompile,(function(e){S.onBeforeCompile(t,e)})),this.needsUpdate=S.isEnabled(this)}},{key:"copyExtrusionParameters",value:function(e){return void 0!==e.extrusionRatio&&this.setExtrusionRatio(e.extrusionRatio),this}}]),e}();t.ExtrusionFeatureMixin=E;var T=function(e){a(n,e);var t=o(n);function n(e){var r;return s(this,n),r=t.call(this,e),b.patchGlobalShaderChunks(),r.addFadingProperties(),r.applyFadingParameters(e),S.patchGlobalShaderChunks(),r.addExtrusionProperties(),r.applyExtrusionParameters(Object.assign(Object.assign({},e),{zFightingWorkaround:!0})),r.addDisplacementProperties(),r.applyDisplacementParameters(e),r}return u(n,[{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){return r(i(n.prototype),"copy",this).call(this,e),this.copyFadingParameters(e),this.copyExtrusionParameters(e),this.copyDisplacementParameters(e),this}},{key:"fadeNear",get:function(){return b.DEFAULT_FADE_NEAR},set:function(e){}},{key:"fadeFar",get:function(){return b.DEFAULT_FADE_FAR},set:function(e){}},{key:"extrusionRatio",get:function(){return h.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX},set:function(e){}},{key:"displacementMap",get:function(){return null},set:function(e){}},{key:"setDisplacementMap",value:function(e){}},{key:"addFadingProperties",value:function(){}},{key:"applyFadingParameters",value:function(e){}},{key:"copyFadingParameters",value:function(e){}},{key:"addExtrusionProperties",value:function(){}},{key:"applyExtrusionParameters",value:function(e){}},{key:"copyExtrusionParameters",value:function(e){}},{key:"addDisplacementProperties",value:function(){}},{key:"applyDisplacementParameters",value:function(e){}},{key:"copyDisplacementParameters",value:function(e){}}]),n}(d.MeshBasicMaterial);t.MapMeshBasicMaterial=T;var k=function(e){a(n,e);var t=o(n);function n(e){var r;return s(this,n),r=t.call(this,e),S.patchGlobalShaderChunks(),r.addExtrusionProperties(),r.applyExtrusionParameters(Object.assign(Object.assign({},e),{zFightingWorkaround:!1})),r}return u(n,[{key:"extrusionRatio",get:function(){return h.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX},set:function(e){}},{key:"addExtrusionProperties",value:function(){}},{key:"applyExtrusionParameters",value:function(e){}},{key:"copyExtrusionParameters",value:function(e){}}]),n}(d.MeshDepthMaterial);t.MapMeshDepthMaterial=k;var C=function(e){a(n,e);var t=o(n);function n(e){var r;return s(this,n),r=t.call(this,e),b.patchGlobalShaderChunks(),r.addFadingProperties(),r.applyFadingParameters(e),S.patchGlobalShaderChunks(),r.addExtrusionProperties(),r.applyExtrusionParameters(Object.assign(Object.assign({},e),{zFightingWorkaround:!0})),!0===(null===e||void 0===e?void 0:e.removeDiffuseLight)&&(r.onBeforeCompile=c.chainCallbacks(r.onBeforeCompile,(function(e){e.fragmentShader=d.ShaderChunk.meshphysical_frag.replace("#include <lights_physical_pars_fragment>",m.simpleLightingShadowChunk)}))),r}return u(n,[{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){return r(i(n.prototype),"copy",this).call(this,e),this.copyFadingParameters(e),this.copyExtrusionParameters(e),this}},{key:"fadeNear",get:function(){return b.DEFAULT_FADE_NEAR},set:function(e){}},{key:"fadeFar",get:function(){return b.DEFAULT_FADE_FAR},set:function(e){}},{key:"extrusionRatio",get:function(){return h.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX},set:function(e){}},{key:"removeDiffuseLight",get:function(){return!1},set:function(e){}},{key:"addFadingProperties",value:function(){}},{key:"applyFadingParameters",value:function(e){}},{key:"copyFadingParameters",value:function(e){}},{key:"addExtrusionProperties",value:function(){}},{key:"applyExtrusionParameters",value:function(e){}},{key:"copyExtrusionParameters",value:function(e){}}]),n}(d.MeshStandardMaterial);t.MapMeshStandardMaterial=C,c.applyMixinsWithoutProperties(T,[M]),c.applyMixinsWithoutProperties(C,[M]),c.applyMixinsWithoutProperties(T,[E]),c.applyMixinsWithoutProperties(C,[E]),c.applyMixinsWithoutProperties(k,[E]),c.applyMixinsWithoutProperties(T,[w])},32116:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrusionFeatureDefs=void 0,function(e){e.DEFAULT_RATIO_MIN=0,e.DEFAULT_RATIO_MAX=1,e.MIN_BUILDING_HEIGHT=.1}(t.ExtrusionFeatureDefs||(t.ExtrusionFeatureDefs={}))},50470:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RawShaderMaterial=void 0;var s=n(15739),u=n(34585),l=n(85070),c=function(e){a(n,e);var t=o(n);function n(e){var i;r(this,n);var a=!0===(null===e||void 0===e?void 0:e.rendererCapabilities.isWebGL2),o=e?Object.assign(Object.assign({},e),{glslVersion:a?u.GLSL3:u.GLSL1,vertexShader:a&&e.vertexShader?s.convertVertexShaderToWebGL2(e.vertexShader):e.vertexShader,fragmentShader:a&&e.fragmentShader?s.convertFragmentShaderToWebGL2(e.fragmentShader):e.fragmentShader}):void 0;return o&&delete o.rendererCapabilities,(i=t.call(this,o)).invalidateFog(),i.setOpacity(null===o||void 0===o?void 0:o.opacity),i}return i(n,[{key:"invalidateFog",value:function(){void 0!==this.defines&&this.fog!==l.getShaderMaterialDefine(this,"USE_FOG")&&l.setShaderMaterialDefine(this,"USE_FOG",this.fog)}},{key:"setOpacity",value:function(e){var t;void 0!==e&&(this.opacity=e,(null===(t=this.uniforms)||void 0===t?void 0:t.opacity)&&(this.uniforms.opacity.value=e))}}]),n}(u.RawShaderMaterial);t.RawShaderMaterial=c},84047:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SepiaShader=void 0,t.SepiaShader={uniforms:{tDiffuse:{value:null},amount:{value:1}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }",fragmentShader:"\n        uniform float amount;\n        uniform sampler2D tDiffuse;\n        varying vec2 vUv;\n        void main() {\n            vec4 color = texture2D( tDiffuse, vUv );\n            vec3 c = color.rgb;\n            color.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );\n            color.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );\n            color.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );\n            gl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );\n        }"}},7893:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={atmosphere_vertex_utils:"\n\n    const float RayleighScaleDepth = 0.25;\n\n    struct AtmosphereColor\n    {\n        vec3 mie;\n        vec3 rayleigh;\n    };\n\n    float scale(float cosAngle)\n    {\n        float x = 1.0 - cosAngle;\n        return RayleighScaleDepth  * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n    }\n\n    float getNearSphereIntersect(vec3 v3Pos, vec3 v3Ray, float fCameraHeight2, float fOuterRadius2) {\n        // Solve simple square equation for the x0 (first point of intersection).\n#if defined(IMPROVE_INTERSECT_PRECISION)\n        // To improve precision instead of simple projection: b = 2.0 * dot(vPos, v3Ray),\n        // we change the equation that gives better results especially around the poles.\n        float fB = 2.0 * length(v3Pos) * dot(normalize(v3Pos), v3Ray);\n#else\n        float fB = 2.0 * dot(v3Pos, v3Ray);\n#endif\n        float fC = fCameraHeight2 - fOuterRadius2;\n        // det = b^2 - 4*a*c, where a = 1\n        float fDet = max(0.0, fB * fB - 4.0 * fC);\n        // Intersection points distances are defined as follows:\n        // x0 = (-b - sqrt(det)) / 2*a ^ x1 = (-b + sqrt(det)) / 2*a\n        // we search for x0:\n        return 0.5 * (-fB - sqrt(fDet));\n    }\n\n    float getFarSphereIntersect(vec3 v3Pos, vec3 v3Ray, float fCameraHeight2, float fOuterRadius2) {\n        // Solve simple square equation for the x1 (second point of intersection).\n#if defined(IMPROVE_INTERSECT_PRECISION)\n        float fB = 2.0 * length(v3Pos) * dot(normalize(v3Pos), v3Ray);\n#else\n        float fB = 2.0 * dot(v3Pos, v3Ray);\n#endif\n        float fC = fCameraHeight2 - fOuterRadius2;\n        // det = b^2 - 4*a*c, where a = 1\n        float fDet = max(0.0, fB * fB - 4.0 * fC);\n        // Compute second intersection distance:\n        // x1 = (-b + sqrt(det)) / 2*a\n        return 0.5 * (-fB + sqrt(fDet));\n    }\n    ",atmosphere_fragment_utils:"\n\n    // Branch free RGB to HSV conversion.\n    // Based on article:\n    // http://lolengine.net/blog/2013/01/13/fast-rgb-to-hsv\n    // and optimized OpenGL SL algorithm\n    // http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\n    vec3 rgb2Hsv(vec3 c)\n    {\n        const vec4 RGB_HSV_CONV = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n        // Ternary operator may be used explicitly if compiler can use fast conditional move.\n        // vec4 p = c.g < c.b ? vec4(c.bg, RGB_HSV_CONV.wz) : vec4(c.gb, RGB_HSV_CONV.xy);\n        vec4 p = mix(vec4(c.bg, RGB_HSV_CONV.wz), vec4(c.gb, RGB_HSV_CONV.xy), step(c.b, c.g));\n        // vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n        vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n        float d = q.x - min(q.w, q.y);\n        float e = 1.0e-10;\n        return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n    }\n\n    // Branch free HSV to RGB conversion\n    vec3 hsv2Rgb(vec3 c)\n    {\n        const vec4 HSV_RGB_CONV = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + HSV_RGB_CONV.xyz) * 6.0 - HSV_RGB_CONV.www);\n        return c.z * mix(HSV_RGB_CONV.xxx, clamp(p - HSV_RGB_CONV.xxx, 0.0, 1.0), c.y);\n    }\n\n    vec3 correctExposure(vec3 rgb, float exposure)\n    {\n        const vec3 fullColor = vec3(1.0);\n        return fullColor - exp(-exposure * rgb);\n    }\n\n    vec3 correctColor(vec3 rgb, vec3 hsvShift)\n    {\n        const float e = 0.0000001;\n        // Convert rgb color to hsv\n        vec3 hsv = rgb2Hsv(rgb);\n        // Shift hue value with angle wrapping\n        hsv.x = mod(hsv.x + hsvShift.x, 1.0);\n        // Shift and clamp saturation\n        hsv.y = clamp(hsv.y + hsvShift.y, 0.0, 1.0);\n        // Change value if it is significant (greater then epsilon)\n        hsv.z = hsv.z > e ? clamp(hsv.z + hsvShift.z, 0.0, 1.0) : 0.0;\n        // Convert shifted hsv back to rgb\n        return hsv2Rgb(hsv);\n    }\n    "}},99918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32116),i=r.ExtrusionFeatureDefs.MIN_BUILDING_HEIGHT*r.ExtrusionFeatureDefs.MIN_BUILDING_HEIGHT;t.default={extrusion_pars_vertex:"\n// Add define so we can check for it in the outline effect (see Outline.ts).\n#define HAS_EXTRUSION_PARS_VERTEX\n// Extrusion axis (xyz: vector, w: factor).\nattribute vec4 extrusionAxis;\nuniform float extrusionRatio;\n#ifdef FLAT_SHADED\nvarying vec4 vExtrusionAxis;\n#endif\n#ifdef ZFIGHTING_WORKAROUND\nvarying float vExtrusionRatio;\n#endif\n",extrusion_vertex:"\n#define HAS_EXTRUSION_VERTEX\n#ifdef ZFIGHTING_WORKAROUND\n// Cancel extrusionRatio (meaning, force to 1) if extrusionAxisLen < MIN_BUILDING_HEIGHT.\nconst float MIN_BUILDING_HEIGHT_SQUARED = ".concat(i,";\nfloat extrusionAxisLenSquared = dot(extrusionAxis.xyz, extrusionAxis.xyz);\nvExtrusionRatio = (extrusionAxisLenSquared < MIN_BUILDING_HEIGHT_SQUARED) ? 1.0 : extrusionRatio;\n#else\nfloat vExtrusionRatio = extrusionRatio;\n#endif\ntransformed = transformed + extrusionAxis.xyz * (vExtrusionRatio - 1.0);\n#ifdef FLAT_SHADED\nvExtrusionAxis = vec4(normalMatrix * extrusionAxis.xyz, extrusionAxis.w);\n#endif\n"),extrusion_normal_fragment_begin:"\n#ifdef FLAT_SHADED\n    // Flattened this divergent path to prevent undefined behaviour in the following derivatives\n    // functions. For more info:\n    // http://www.aclockworkberry.com/shader-derivative-functions/#Derivatives_and_branches\n\n    // Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n    vec3 fdx = vec3(dFdx(vViewPosition.x), dFdx(vViewPosition.y), dFdx(vViewPosition.z));\n    vec3 fdy = vec3(dFdy(vViewPosition.x), dFdy(vViewPosition.y), dFdy(vViewPosition.z));\n    vec3 normal = cross( fdx, fdy );\n    if (vExtrusionAxis.w > 0.999999) {\n        normal = vExtrusionAxis.xyz;\n    }\n    normal = normalize(normal);\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t\t\tbitangent = bitangent * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t\t#endif\n\t#endif\n#endif\n// non perturbed normal for clearcoat among others\nvec3 geometryNormal = normal;\n",extrusion_pars_fragment:"\n#ifdef ZFIGHTING_WORKAROUND\nvarying float vExtrusionRatio;\n#else\nuniform float extrusionRatio;\n#endif\nvarying vec4 vExtrusionAxis;\n",extrusion_fragment:"\n#ifndef ZFIGHTING_WORKAROUND\nfloat vExtrusionRatio = extrusionRatio;\n#endif\ngl_FragColor.a *= smoothstep( 0.0, 0.25, vExtrusionRatio );\n"}},6599:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fading_pars_vertex:"\nvarying float fadingDepth;\n",fading_vertex:"\nfadingDepth = -mvPosition.z;\n",fading_pars_fragment:"\nvarying float fadingDepth;\nuniform float fadeNear;\nuniform float fadeFar;\n",fading_fragment:'\n\n// lerp with "hard" edges\n//float fadingFactor = 1.0 - clamp((fadingDepth - fadeNear) / (fadeFar - fadeNear), 0.0, 1.0);\n\n// smooth transitions\nfloat fadingFactor = smoothstep( fadeNear, fadeFar, fadingDepth );\n\ngl_FragColor.a *= 1.0 - fadingFactor;\n\n// debugging color:\n// gl_FragColor = vec4(1., fadingFactor, fadingFactor, 1.0);\n'}},43937:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LineCapsModes=void 0,function(e){e[e.CAPS_NONE=0]="CAPS_NONE",e[e.CAPS_SQUARE=1]="CAPS_SQUARE",e[e.CAPS_ROUND=2]="CAPS_ROUND",e[e.CAPS_TRIANGLE_IN=3]="CAPS_TRIANGLE_IN",e[e.CAPS_TRIANGLE_OUT=4]="CAPS_TRIANGLE_OUT"}(n=t.LineCapsModes||(t.LineCapsModes={})),t.default={extrude_line_vert_func:"\nvec3 extrudeLine(\n        in vec3 vertexPosition,\n        in float linePosition,\n        in float extrusionWidth,\n        in vec4 bitangent,\n        in vec3 tangent,\n        in float tanHalfAngle,\n        inout vec2 uv\n    ) {\n    vec3 result = vertexPosition;\n    // Retrieve the angle between this segment and the previous one (stored in the bitangent w\n    // component).\n    float angle = bitangent.w;\n    // Extrude according to the angle between segments to properly render narrow joints...\n    if (angle != 0.0) {\n        result += uv.y * extrusionWidth * bitangent.xyz / cos(angle / 2.0);\n        uv.x = linePosition + uv.x * extrusionWidth * uv.y * tanHalfAngle;\n    }\n    // ... or extrude in a simple manner for segments that keep the same direction.\n    else {\n        result += uv.y * extrusionWidth * bitangent.xyz + uv.x * extrusionWidth * tangent;\n        uv.x = linePosition + uv.x * extrusionWidth;\n    }\n    uv.y *= extrusionWidth;\n    return result;\n}\n",round_edges_and_add_caps:"\n#define CAPS_NONE ".concat(n.CAPS_NONE,"\n#define CAPS_SQUARE ").concat(n.CAPS_SQUARE,"\n#define CAPS_ROUND ").concat(n.CAPS_ROUND,"\n#define CAPS_TRIANGLE_IN ").concat(n.CAPS_TRIANGLE_IN,"\n#define CAPS_TRIANGLE_OUT ").concat(n.CAPS_TRIANGLE_OUT,"\n\nfloat roundEdgesAndAddCaps(in vec4 coords, in vec3 range) {\n    // Compute the line's width to length ratio.\n    float widthRatio = range.y / range.x;\n\n    // Compute the inner segment distance (same for all cap mode).\n    float dist = abs(coords.y);\n    float segmentBeginMask = clamp(ceil(coords.z - coords.x), 0.0, 1.0);\n    float segmentEndMask = clamp(ceil(coords.x - coords.w), 0.0, 1.0);\n    dist = max(dist, segmentBeginMask * length(vec2((coords.x - coords.z) / widthRatio, coords.y)));\n    dist = max(dist, segmentEndMask * length(vec2((coords.x - coords.w) / widthRatio, coords.y)));\n\n    #if CAPS_MODE != CAPS_ROUND\n    // Compute the caps mask.\n    float capRangeMask = clamp(1.0 - ceil(range.z - drawRange.y), 0.0, 1.0);\n    float beginCapMask = clamp(ceil(drawRange.x - coords.x), 0.0, 1.0);\n    float endCapMask = clamp(ceil(coords.x - drawRange.y), 0.0, 1.0);\n    float capMask = capRangeMask * max(beginCapMask, endCapMask);\n\n    // Compute the outer segment distance (specific for each cap mode).\n    float capDist = max(coords.x - drawRange.y, drawRange.x - coords.x) / widthRatio;\n    #if CAPS_MODE == CAPS_NONE\n    dist = mix(dist, max(abs(coords.y), (capDist + 0.1) / 0.1), capMask);\n    #elif CAPS_MODE == CAPS_SQUARE\n    dist = mix(dist, max(abs(coords.y), capDist), capMask);\n    #elif CAPS_MODE == CAPS_TRIANGLE_OUT\n    dist = mix(dist, abs(coords.y) + capDist, capMask);\n    #elif CAPS_MODE == CAPS_TRIANGLE_IN\n    dist = mix(dist, max(abs(coords.y), (capDist - abs(coords.y)) + capDist), capMask);\n    #endif\n    #endif // CAPS_MODE != CAPS_ROUND\n\n    return dist;\n}\n"),tile_clip_func:"\nvoid tileClip(vec2 tilePos, vec2 tileSize) {\n    if (tileSize.x > 0.0 && (tilePos.x < -tileSize.x / 2.0 || tilePos.x > tileSize.x / 2.0))\n        discard;\n    if (tileSize.y > 0.0 && (tilePos.y < -tileSize.y / 2.0 || tilePos.y > tileSize.y / 2.0))\n        discard;\n}\n",high_precision_vert_func:"\nvec3 subtractDblEyePos( const in vec3 pos ) {\n    vec3 t1 = positionLow - u_eyepos_lowpart;\n    vec3 e = t1 - positionLow;\n    vec3 t2 = ((-u_eyepos_lowpart - e) + (positionLow - (t1 - e))) + pos - u_eyepos;\n    vec3 high_delta = t1 + t2;\n    vec3 low_delta = t2 - (high_delta - t1);\n    return (high_delta + low_delta);\n}\n"}},35234:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleLightingShadowChunk=void 0,t.simpleLightingShadowChunk="\n    struct PhysicalMaterial {\n        vec3\tdiffuseColor;\n        float\tspecularRoughness;\n        vec3\tspecularColor;\n    };\n\n    #define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n    void RE_Direct_Physical( const in IncidentLight directLight,\n        const in GeometricContext geometry,\n        const in PhysicalMaterial material,\n        inout ReflectedLight reflectedLight ) {\n        // directLight.color is the light color * shadow, internally three.js uses a step function, so\n        // this value is either the light color or black. in order to lighten up the shadows, we\n        // take add 50% of the color to grey (to give us either pure white or grey) and multiply this to\n        // the material's diffuse color.\n        #if defined(USE_SHADOWMAP)\n            reflectedLight.directDiffuse = (0.5 * directLight.color +\n                vec3(0.5,0.5,0.5)) * material.diffuseColor;\n        #else\n            reflectedLight.directDiffuse = material.diffuseColor;\n        #endif\n    }\n\n    void RE_IndirectDiffuse_Physical( const in vec3 irradiance,\n        const in GeometricContext geometry,\n        const in PhysicalMaterial material,\n        inout ReflectedLight reflectedLight ) {\n            // Disable influence of indirect light (it is handled in the RE_Direct_Physical function)\n    }\n\n    void RE_IndirectSpecular_Physical( const in vec3 radiance,\n        const in vec3 irradiance,\n        const in vec3 clearcoatRadiance,\n        const in GeometricContext geometry,\n        const in PhysicalMaterial material,\n        inout ReflectedLight reflectedLight) {\n            // Disable specular reflection of light.\n    }\n\n    #define RE_Direct               RE_Direct_Physical\n    #define RE_IndirectDiffuse      RE_IndirectDiffuse_Physical\n    #define RE_IndirectSpecular     RE_IndirectSpecular_Physical\n"},10657:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SkyAtmosphereMaterial=t.SkyAtmosphereShader=void 0;var s=n(34585),u=n(50470),l=n(7893),c=n(85070),d=6378137;t.SkyAtmosphereShader={uniforms:{u_eyePositionWorld:new s.Uniform(new s.Vector3),u_lightDirectionWorld:new s.Uniform(new s.Vector3(0,1,0)),u_modelViewProjection:new s.Uniform(new s.Matrix4),u_atmosphereEnv:new s.Uniform(new s.Vector3(d,6537590.425,0)),u_hsvCorrection:new s.Uniform(new s.Vector3(0,0,0)),topColor:new s.Uniform(new s.Color(30719)),bottomColor:new s.Uniform(new s.Color(16777215)),offset:new s.Uniform(33),exponent:new s.Uniform(.6),fogColor:new s.Uniform(new s.Color(30719)),fogNear:new s.Uniform(new s.Color(30719)),fogFar:new s.Uniform(new s.Color(16777215))},vertexShader:"\n    precision highp float;\n    precision highp int;\n\n    attribute vec4 position;\n\n    uniform mat4 u_modelViewProjection;\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_hsvCorrection;\n\n    const float Pi = 3.141592653589793;\n    const float Kr = 0.0025;\n    const float Kr4PI = Kr * 4.0 * Pi;\n    const float Km = 0.0015;\n    const float Km4PI = Km * 4.0 * Pi;\n    const float ESun = 15.0; // should be 15.0\n    const float KmESun = Km * ESun;\n    const float KrESun = Kr * ESun;\n    const vec3 InvWavelength = vec3(\n        5.60204474633241,  // Red = 1.0 / Math.pow(0.650, 4.0)\n        9.473284437923038, // Green = 1.0 / Math.pow(0.570, 4.0)\n        19.643802610477206); // Blue = 1.0 / Math.pow(0.475, 4.0)\n\n    const int nSamples = 2;\n    const float fSamples = 2.0;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n\n    ".concat(l.default.atmosphere_vertex_utils,"\n\n    //\n    // Computes rayleight and mia atmosphere factors for sky.\n    //\n    // Code based on GPU Gems article.\n    //\n    // Author: Sean O'Neil\n    //\n    // Copyright (c) 2004 Sean O'Neil\n    //\n    // https://developer.nvidia.com/gpugems/gpugems2/part-ii-shading-lighting-and-shadows/chapter-16-accurate-atmospheric-scattering\n    //\n    // Further modifications by HERE\n    //\n    AtmosphereColor computeSkyAtmosphere(vec3 v3Pos, vec3 vLightDir)\n    {\n        // Unpack attributes\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        // All that may be const or define(s) at further optimization:\n        float fScale = 1.0 / (fOuterRadius - fInnerRadius);\n        float fScaleOverScaleDepth = (fScale / RayleighScaleDepth);\n        float fCameraHeight2 = fCameraHeight * fCameraHeight;\n        float fOuterRadius2 = fOuterRadius * fOuterRadius;\n\n        // Get the ray from the camera to the vertex and its length (which is the far point of the ray passing through the atmosphere)\n        vec3 v3Ray = v3Pos - u_eyePositionWorld;\n        float fFar = length(v3Ray);\n        v3Ray /= fFar;\n\n    #ifdef CAMERA_IN_SPACE\n\n        // Calculate the closest intersection of the ray with the outer\n        // atmosphere, this is the first point of the ray passing through the atmosphere dome.\n        float fNear = getNearSphereIntersect(u_eyePositionWorld, v3Ray, fCameraHeight2, fOuterRadius2);\n        // Make far relative to first atmosphere intersection\n        fFar -= fNear;\n\n        // Compute the ray's starting position within the atmosphere, then\n        // calculate its scattering offset\n        vec3 v3Start = u_eyePositionWorld + v3Ray * fNear;\n\n        float fStartAngle = dot(v3Ray, v3Start) / fOuterRadius;\n        float fStartDepth = exp(-1.0 / RayleighScaleDepth );\n        float fStartOffset = fStartDepth * scale(fStartAngle);\n\n    #else // CAMERA_IN_ATMOSPHERE\n\n        // The ray starts already in atmosphere\n        vec3 v3Start = u_eyePositionWorld;\n        float height = length(v3Start);\n        float depth = exp(fScaleOverScaleDepth * (fInnerRadius - fCameraHeight));\n        float fStartAngle = dot(v3Ray, v3Start) / height;\n        float fStartOffset = depth * scale(fStartAngle);\n\n    #endif\n\n        // Initialize the scattering loop variables\n        float fSampleLength = fFar / fSamples;\n        float fScaledLength = fSampleLength * fScale;\n        vec3 v3SampleRay = v3Ray * fSampleLength;\n        vec3 v3SamplePoint = v3Start + v3SampleRay * 0.5;\n\n        // Now loop through the sample rays\n        vec3 v3BaseColor = vec3(0.0);\n        vec3 v3Attenuate = vec3(0.0);\n        for(int i=0; i < nSamples; i++)\n        {\n            float height = length(v3SamplePoint);\n            float depth = exp(fScaleOverScaleDepth * (fInnerRadius - height));\n            float fLightAngle = dot(vLightDir, v3SamplePoint) / height;\n            float fCameraAngle = dot(v3Ray, v3SamplePoint) / height;\n            float fScatter = (fStartOffset + depth * (scale(fLightAngle) - scale(fCameraAngle)));\n            v3Attenuate = exp(-fScatter * (InvWavelength * Kr4PI + Km4PI));\n            v3BaseColor += v3Attenuate * (depth * fScaledLength);\n            v3SamplePoint += v3SampleRay;\n        }\n\n        // Scale the Mie and Rayleigh colors and set up output of the function\n        AtmosphereColor color;\n        color.mie = v3BaseColor * KmESun;\n        color.rayleigh = v3BaseColor * (InvWavelength * KrESun);\n        return color;\n    }\n\n    void main(void)\n    {\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        AtmosphereColor atmColor = computeSkyAtmosphere(position.xyz, vLightDir);\n        v_mieColor = atmColor.mie;\n        v_rayleighColor = atmColor.rayleigh;\n        v_vertToCamera = u_eyePositionWorld - position.xyz;\n\n        gl_Position = u_modelViewProjection * position;\n    }\n    "),fragmentShader:"\n    // Because of harsh light distribution the exposure correction is always enabled for the sky.\n    #define CORRECT_EXPOSURE 1\n\n    precision highp float;\n    precision highp int;\n\n    #ifdef CORRECT_COLOR\n    uniform vec3 u_hsvCorrection; // Hue, saturation, brightness\n    #endif\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    const float g = -0.95;\n    const float g2 = g * g;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n\n    ".concat(l.default.atmosphere_fragment_utils,"\n\n    void main(void)\n    {\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n            // Alter alpha based on time of day (0.0 = night , 1.0 = day)\n            float fNightAlpha = clamp(dot(normalize(u_eyePositionWorld), vLightDir), 0.0, 1.0);\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n            float fNightAlpha = 1.0;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        // NOTE:\n        // For better precision normalization may be added on fragment (for mobile devices)\n        // while in vertex shader may be left un-normalized\n        // dot(vLightDir, normalize(v_vertToCamera)) / length(v_vertToCamera);\n        float fCosAngle = dot(vLightDir, v_vertToCamera) / length(v_vertToCamera);\n        float fRayleighPhase = 0.75 * (1.0 + fCosAngle * fCosAngle);\n        float fMiePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + fCosAngle * fCosAngle) / pow(1.0 + g2 - 2.0 * g * fCosAngle, 1.5);\n\n        vec3 cRgb = fRayleighPhase * v_rayleighColor + fMiePhase * v_mieColor;\n\n        // Sky produces very harsh lighting effect so exposure correction is always enabled.\n    #if !defined(HDR_FRAME_BUFFER) && defined(CORRECT_EXPOSURE)\n        // Exposure factor may be exposed to uniform variable.\n        cRgb = correctExposure(cRgb, 2.0);\n    #endif\n\n    #ifdef CORRECT_COLOR\n        cRgb = correctColor(cRgb, u_hsvCorrection);\n    #endif\n\n        // Alter alpha based on how close the viewer is to the ground (1.0 = on ground, 0.0 = at edge of atmosphere)\n        float fAtmosphereAlpha = clamp((fOuterRadius - fCameraHeight) /\n            (fOuterRadius - fInnerRadius), 0.0, 1.0);\n        fAtmosphereAlpha *= pow(fNightAlpha, 0.5);\n\n        gl_FragColor = vec4(cRgb, mix(cRgb.b, 1.0, fAtmosphereAlpha));\n    }\n    ")};var h=function(e){a(u,e);var n=o(u);function u(e){var i;if(r(this,u),e){i={name:"SkyAtmosphereMaterial",vertexShader:t.SkyAtmosphereShader.vertexShader,fragmentShader:t.SkyAtmosphereShader.fragmentShader,uniforms:t.SkyAtmosphereShader.uniforms,transparent:!0,depthTest:!0,depthWrite:!1,side:s.BackSide,blending:s.NormalBlending,fog:!1,rendererCapabilities:e.rendererCapabilities}}return n.call(this,i)}return i(u,[{key:"setDynamicLighting",value:function(e){c.setShaderMaterialDefine(this,"DYNAMIC_LIGHT",e)}},{key:"outerRadius",get:function(){return this.uniforms.u_atmosphereEnv.value.y},set:function(e){this.uniforms.u_atmosphereEnv.value.y=e}},{key:"innerRadius",get:function(){return this.uniforms.u_atmosphereEnv.value.x},set:function(e){this.uniforms.u_atmosphereEnv.value.x=e}},{key:"updateUniforms",value:function(e,t,n,r){var i=this.getCameraInfo(t,n);if(void 0===e||!e.isMaterial)throw Error("Wrong object used, only Material objects are supported");if(!(e.uniforms&&e.uniforms.u_atmosphereEnv&&e.uniforms.u_hsvCorrection&&e.uniforms.u_eyePositionWorld&&e.uniforms.u_modelViewProjection&&e.uniforms.u_lightDirectionWorld))throw Error("Atmosphere material has missing uniforms");var a=i.eyePos,o=i.modelViewProjection,s=i.eyeHeight;e.uniforms.u_eyePositionWorld.value.copy(a),e.uniforms.u_modelViewProjection.value.copy(o),e.uniforms.u_atmosphereEnv.value.z=s,e.uniforms.u_lightDirectionWorld.value=r.clone();var u=s>this.outerRadius,l=c.setShaderDefine(e.defines,"CAMERA_IN_SPACE",u),d=c.setShaderDefine(e.defines,"CAMERA_IN_ATMOSPHERE",!u);e.needsUpdate=e.needsUpdate||l||d}},{key:"getCameraInfo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var r=(new s.Matrix4).identity(),i=(new s.Matrix4).copy(e.matrixWorld).invert().transpose(),a=t.projectionMatrix,o=new s.Matrix4;o.multiplyMatrices(i,r),o.multiplyMatrices(a,o);var u=new s.Vector3;e.getWorldPosition(u);var l=new s.Vector3;t.getWorldPosition(l);var c=l.distanceTo(u);return{modelViewProjection:o,eyePos:u,eyeHeight:c}}var d=e.matrixWorld,h=t.matrixWorldInverse,f=t.projectionMatrix,p=new s.Matrix4;p.multiplyMatrices(h,d),p.multiplyMatrices(f,p);var m=new s.Vector3;t.getWorldPosition(m);var v=new s.Vector3;e.getWorldPosition(v);var g=v.distanceTo(m);return m.sub(v),{modelViewProjection:p,eyePos:m,eyeHeight:g}}}]),u}(u.RawShaderMaterial);t.SkyAtmosphereMaterial=h},59702:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default,a=n(81506).default,o=n(16525).default,s=n(29754).default,u=n(2205).default,l=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SolidLineMaterial=t.LineDashesModes=void 0;var c,d=n(34585),h=n(67129),f=n(50470),p=n(43937),m=n(85070),v={None:p.LineCapsModes.CAPS_NONE,Square:p.LineCapsModes.CAPS_SQUARE,Round:p.LineCapsModes.CAPS_ROUND,TriangleIn:p.LineCapsModes.CAPS_TRIANGLE_IN,TriangleOut:p.LineCapsModes.CAPS_TRIANGLE_OUT},g=Object.keys(v).reduce((function(e,t){var n=t;return e[v[n]]=n,e}),{});!function(e){e[e.DASHES_SQUARE=0]="DASHES_SQUARE",e[e.DASHES_ROUND=1]="DASHES_ROUND",e[e.DASHES_DIAMOND=2]="DASHES_DIAMOND"}(c=t.LineDashesModes||(t.LineDashesModes={}));var y={Square:c.DASHES_SQUARE,Round:c.DASHES_ROUND,Diamond:c.DASHES_DIAMOND},x=Object.keys(y).reduce((function(e,t){var n=t;return e[y[n]]=n,e}),{}),_=new d.Color,b="\nprecision highp float;\nprecision highp int;\n\nuniform vec3 diffuse;\nuniform vec3 outlineColor;\nuniform float opacity;\nuniform float extrusionWidth;\nuniform float outlineWidth;\nuniform vec2 tileSize;\nuniform vec2 drawRange;\n\n#ifdef USE_DASHED_LINE\nuniform float dashSize;\nuniform float gapSize;\nuniform vec3 dashColor;\n\n#define DASHES_SQUARE ".concat(c.DASHES_SQUARE,"\n#define DASHES_ROUND ").concat(c.DASHES_ROUND,"\n#define DASHES_DIAMOND ").concat(c.DASHES_DIAMOND,"\n#endif\n\n#ifdef USE_TILE_CLIP\nvarying vec3 vPosition;\n#endif\n\nvarying vec3 vRange;\nvarying vec4 vCoords;\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n\n#include <round_edges_and_add_caps>\n#include <tile_clip_func>\n\n#ifdef USE_FADING\n#include <fading_pars_fragment>\n#endif\n\n#include <fog_pars_fragment>\n\nvoid main() {\n    float alpha = opacity;\n    vec3 outputDiffuse = diffuse;\n\n    #ifdef USE_TILE_CLIP\n    tileClip(vPosition.xy, tileSize);\n    #endif\n\n    // Calculate distance to center (0.0: lineCenter, 1.0: lineEdge).\n    float distToCenter = roundEdgesAndAddCaps(vCoords, vRange);\n    // Calculate distance to edge (-1.0: lineCenter, 0.0: lineEdge).\n    float distToEdge = distToCenter - (extrusionWidth + outlineWidth) / extrusionWidth;\n\n    // Decrease the line opacity by the distToEdge, making the transition steeper when the slope\n    // of distToChange increases (i.e. the line is further away).\n    float width = fwidth(distToEdge);\n\n    float s = opacity < 0.98\n        ? clamp((distToEdge + width) / (2.0 * width), 0.0, 1.0) // prefer a boxstep\n        : smoothstep(-width, width, distToEdge);\n\n    if (opacity < 0.98 && 1.0 - s < opacity) {\n        // drop the fragment when the line is using opacity.\n        discard;\n    }\n\n    alpha *= 1.0 - s;\n\n    #ifdef USE_DASHED_LINE\n    // Compute the distance to the dash origin (0.0: dashOrigin, 1.0: dashEnd, (d+g)/d: gapEnd).\n    float d = dashSize / vRange.x;\n    float g = gapSize / vRange.x;\n    float distToDashOrigin = mod(vCoords.x, d + g) / d;\n\n    // Compute distance to dash edge (0.5: dashCenter, 0.0: dashEdge) and compute the\n    // dashBlendFactor similarly on how we did it for the line opacity.\n    float distToDashEdge = 0.5 - distance(distToDashOrigin, (d + g) / d * 0.5);\n    #if DASHES_MODE == DASHES_ROUND\n    distToDashEdge = 0.5 - distance(vec2(distToCenter * 0.5, distToDashEdge), vec2(0.0, 0.5));\n    #elif DASHES_MODE == DASHES_DIAMOND\n    distToDashEdge -= distToCenter * 0.5;\n    #endif\n    float dashWidth = fwidth(distToDashEdge);\n    float dashBlendFactor = 1.0 - smoothstep(-dashWidth, dashWidth, distToDashEdge);\n\n    #ifdef USE_DASH_COLOR\n    outputDiffuse = mix(diffuse, dashColor, dashBlendFactor);\n    #endif\n    #endif\n\n    #ifdef USE_OUTLINE\n    // Calculate distance to outline (0.0: lineEdge, outlineWidth/lineWidth: outlineEdge) and\n    // compute the outlineBlendFactor (used to mix line and outline colors).\n    float distToOutline = distToCenter - 1.0;\n    float outlineWidth = fwidth(distToOutline);\n    float outlineBlendFactor = smoothstep(-outlineWidth, outlineWidth, distToOutline);\n\n    // Mix the colors using the different computed factors.\n    #if defined(USE_DASHED_LINE) && !defined(USE_DASH_COLOR)\n    float colorBlendFactor = smoothstep(-1.0, 1.0, dashBlendFactor - outlineBlendFactor);\n    outputDiffuse = mix(\n      mix(\n        mix(outlineColor, diffuse, colorBlendFactor),\n        outputDiffuse,\n        dashBlendFactor\n      ),\n      outlineColor,\n      outlineBlendFactor\n    );\n    #else\n    outputDiffuse = mix(outputDiffuse, outlineColor, outlineBlendFactor);\n    #endif\n    #endif\n\n    #if defined(USE_DASHED_LINE) && !defined(USE_DASH_COLOR)\n    // Multiply the alpha by the dashBlendFactor.\n    #if defined(USE_OUTLINE)\n    alpha *= clamp(dashBlendFactor + outlineBlendFactor, 0.0, 1.0);\n    #else\n    alpha *= 1.0 - dashBlendFactor;\n    #endif\n    #endif\n\n    #ifdef USE_COLOR\n    gl_FragColor = vec4( outputDiffuse * vColor, alpha );\n    #else\n    gl_FragColor = vec4( outputDiffuse, alpha );\n    #endif\n\n    #include <fog_fragment>\n\n    #ifdef USE_FADING\n    #include <fading_fragment>\n    #endif\n}"),w=function(e){u(n,e);var t=l(n);function n(e){var i,o;r(this,n),Object.assign(d.ShaderChunk,p.default),h.FadingFeature.patchGlobalShaderChunks();var s,u,l={CAPS_MODE:p.LineCapsModes.CAPS_ROUND,DASHES_MODE:c.DASHES_SQUARE},f=!0,v=1;e&&((f=!0===e.fog)&&m.setShaderDefine(l,"USE_FOG",!0),v=void 0!==e.opacity?e.opacity:v,void 0!==(s=e.displacementMap)&&m.setShaderDefine(l,"USE_DISPLACEMENTMAP",!0),void 0!==e.outlineWidth&&e.outlineWidth>0&&m.setShaderDefine(l,"USE_OUTLINE",!0),u={name:"SolidLineMaterial",vertexShader:"\n#define SEGMENT_OFFSET 0.1\n\nattribute vec3 extrusionCoord;\nattribute vec3 position;\nattribute vec4 bitangent;\nattribute vec3 tangent;\nattribute vec2 uv;\nattribute vec3 normal;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float extrusionWidth;\nuniform float outlineWidth;\nuniform float offset;\nuniform vec2 drawRange;\n\n#ifdef USE_DISPLACEMENTMAP\nuniform sampler2D displacementMap;\n#endif\n\n#ifdef USE_TILE_CLIP\nvarying vec3 vPosition;\n#endif\nvarying vec3 vRange;\nvarying vec4 vCoords;\n#ifdef USE_COLOR\nattribute vec3 color;\nvarying vec3 vColor;\n#endif\n\n#ifdef USE_FADING\n#include <fading_pars_vertex>\n#endif\n\n#include <fog_pars_vertex>\n\n#include <extrude_line_vert_func>\n\nvoid main() {\n    // Calculate the segment.\n    vec2 segment = abs(extrusionCoord.xy) - SEGMENT_OFFSET;\n    float segmentPos = sign(extrusionCoord.x) / 2.0 + 0.5;\n\n    // Calculate the vertex position inside the line (segment) and extrusion direction and factor.\n    float linePos = mix(segment.x, segment.y, segmentPos);\n    vec2 extrusionDir = sign(extrusionCoord.xy);\n    // Precompute to avoid computing multiple times\n    float tanHalfAngle = tan(bitangent.w / 2.0);\n    float extrusionFactor = extrusionDir.y * tanHalfAngle;\n\n    // Calculate the extruded vertex position (and scale the extrusion direction).\n    vec3 pos = extrudeLine(\n        position, linePos, extrusionWidth + outlineWidth, bitangent, tangent, tanHalfAngle,\n        extrusionDir);\n\n    // Store the normalized extrusion coordinates in vCoords (with their ranges in vRange).\n    vRange = vec3(extrusionCoord.z, extrusionWidth, extrusionFactor);\n    vCoords = vec4(extrusionDir / vRange.xy, segment / vRange.x);\n\n    // Adjust the segment to fit the drawRange.\n    float capDist = (extrusionWidth + outlineWidth) / extrusionCoord.z;\n    if ((vCoords.w + capDist) < drawRange.x || (vCoords.z - capDist) > drawRange.y) {\n        vCoords.zw += 1.0;\n    }\n    if (vCoords.z < drawRange.x) {\n        vCoords.zw += vec2(drawRange.x - vCoords.z, 0.0);\n    }\n    if (vCoords.w > drawRange.y) {\n        vCoords.zw -= vec2(0.0, vCoords.w - drawRange.y);\n    }\n\n    // Transform position.\n    #ifdef USE_DISPLACEMENTMAP\n    pos += normalize( normal ) * texture2D( displacementMap, uv ).x;\n    #endif\n\n    // Shift the line based on the offset, where the bitangent is the cross product of the average\n    // of the two direction vectors (the previous and next segment directions) and the normal of\n    // the line (facing into the sky). The w component is the angle between the two segments.\n    // Note, we need to take the angle into consideration, so we use trigonometry to calculate how\n    // much we need to extend the offset. Note, orthough this looks complicated we are doing this\n    // in the vertex shader, so it should not cause a performance issue.\n    pos += bitangent.xyz * offset * sqrt(1.0 + pow(abs(tanHalfAngle), 2.0));\n\n    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n\n    // Pass extruded position to fragment shader.\n    #ifdef USE_TILE_CLIP\n    vPosition = pos;\n    #endif\n\n    #ifdef USE_COLOR\n    // Pass vertex color to fragment shader.\n    vColor = color;\n    #endif\n\n    #ifdef USE_FADING\n    #include <fading_vertex>\n    #endif\n\n    #include <fog_vertex>\n}",fragmentShader:b,uniforms:d.UniformsUtils.merge([{diffuse:new d.Uniform(new d.Color(n.DEFAULT_COLOR)),dashColor:new d.Uniform(new d.Color(n.DEFAULT_COLOR)),outlineColor:new d.Uniform(new d.Color(n.DEFAULT_COLOR)),extrusionWidth:new d.Uniform(n.DEFAULT_WIDTH),outlineWidth:new d.Uniform(n.DEFAULT_OUTLINE_WIDTH),offset:new d.Uniform(n.DEFAULT_OFFSET),opacity:new d.Uniform(n.DEFAULT_OPACITY),tileSize:new d.Uniform(new d.Vector2),fadeNear:new d.Uniform(h.FadingFeature.DEFAULT_FADE_NEAR),fadeFar:new d.Uniform(h.FadingFeature.DEFAULT_FADE_FAR),displacementMap:new d.Uniform(void 0!==s?s:new d.Texture),drawRange:new d.Uniform(new d.Vector2(n.DEFAULT_DRAW_RANGE_START,n.DEFAULT_DRAW_RANGE_END)),dashSize:new d.Uniform(n.DEFAULT_DASH_SIZE),gapSize:new d.Uniform(n.DEFAULT_GAP_SIZE)},d.UniformsLib.fog]),defines:l,fog:f,opacity:v,rendererCapabilities:e.rendererCapabilities});return(i=t.call(this,u)).fog=f,i.setOpacity(v),i.stencilFunc=d.NotEqualStencilFunc,i.stencilZPass=d.ReplaceStencilOp,i.stencilRef=1,i.stencilWrite=!1,m.enforceBlending(a(i)),i.extensions.derivatives=!0,e&&(void 0!==e.color&&(_.set(e.color),i.color=_),void 0!==e.outlineColor&&(_.set(e.outlineColor),i.outlineColor=_),void 0!==e.lineWidth&&(i.lineWidth=e.lineWidth),void 0!==e.outlineWidth&&(i.outlineWidth=e.outlineWidth),void 0!==e.opacity&&i.setOpacity(e.opacity),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.fadeNear&&(i.fadeNear=e.fadeNear),void 0!==e.fadeFar&&(i.fadeFar=e.fadeFar),void 0!==e.displacementMap&&(i.displacementMap=e.displacementMap),void 0!==e.caps&&(i.caps=e.caps),void 0!==e.drawRangeStart&&(i.drawRangeStart=e.drawRangeStart),void 0!==e.drawRangeEnd&&(i.drawRangeEnd=e.drawRangeEnd),void 0!==e.dashes&&(i.dashes=e.dashes),void 0!==e.dashColor&&(_.set(e.dashColor),i.dashColor=_),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.fog&&(i.fog=e.fog,i.invalidateFog()),i.offset=null!==(o=e.offset)&&void 0!==o?o:0),i}return i(n,[{key:"offset",get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}},{key:"outline",get:function(){return!0===m.getShaderMaterialDefine(this,"USE_OUTLINE")},set:function(e){m.setShaderMaterialDefine(this,"USE_OUTLINE",e)}},{key:"setOpacity",value:function(e){o(s(n.prototype),"setOpacity",this).call(this,e),void 0!==e&&(this.stencilWrite=e<.98)}},{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value.copy(e)}},{key:"outlineColor",get:function(){return this.uniforms.outlineColor.value},set:function(e){this.uniforms.outlineColor.value.copy(e)}},{key:"dashColor",get:function(){return this.uniforms.dashColor.value},set:function(e){this.uniforms.dashColor.value.copy(e),m.setShaderMaterialDefine(this,"USE_DASH_COLOR",!0)}},{key:"lineWidth",get:function(){return 2*this.uniforms.extrusionWidth.value},set:function(e){this.uniforms.extrusionWidth.value=e/2}},{key:"outlineWidth",get:function(){return this.uniforms.outlineWidth.value},set:function(e){this.uniforms.outlineWidth.value=e,this.outline=e>0}},{key:"dashSize",get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},{key:"gapSize",get:function(){return this.uniforms.gapSize.value},set:function(e){var t,n;this.uniforms.gapSize.value=e,m.setShaderMaterialDefine(this,"USE_DASHED_LINE",e>0),0===(null===(n=null===(t=this.uniforms)||void 0===t?void 0:t.gapSize)||void 0===n?void 0:n.value)&&(this.stencilWrite=this.opacity<.98)}},{key:"caps",get:function(){var e="Round",t=m.getShaderMaterialDefine(this,"CAPS_MODE");return"number"===typeof t&&g.hasOwnProperty(t)&&(e=g[t]),e},set:function(e){v.hasOwnProperty(e)&&m.setShaderMaterialDefine(this,"CAPS_MODE",v[e])}},{key:"dashes",get:function(){var e="Square",t=m.getShaderMaterialDefine(this,"DASHES_MODE");return"number"===typeof t&&x.hasOwnProperty(t)&&(e=x[t]),e},set:function(e){y.hasOwnProperty(e)&&m.setShaderMaterialDefine(this,"DASHES_MODE",y[e])}},{key:"fadeNear",get:function(){return this.uniforms.fadeNear.value},set:function(e){this.uniforms.fadeNear.value=e}},{key:"fadeFar",get:function(){return this.uniforms.fadeFar.value},set:function(e){this.uniforms.fadeFar.value=e,m.setShaderMaterialDefine(this,"USE_FADING",e>0)}},{key:"displacementMap",get:function(){return this.uniforms.displacementMap.value},set:function(e){if(this.uniforms.displacementMap.value!==e){this.uniforms.displacementMap.value=e;var t=null!==e;t&&(this.uniforms.displacementMap.value.needsUpdate=!0),m.setShaderMaterialDefine(this,"USE_DISPLACEMENTMAP",t)}}},{key:"drawRangeStart",get:function(){return this.uniforms.drawRange.value.x},set:function(e){this.uniforms.drawRange.value.x=e}},{key:"drawRangeEnd",get:function(){return this.uniforms.drawRange.value.y},set:function(e){this.uniforms.drawRange.value.y=e}},{key:"clipTileSize",get:function(){return this.uniforms.tileSize.value},set:function(e){this.uniforms.tileSize.value.copy(e);var t=e.x>0&&e.y>0;m.setShaderMaterialDefine(this,"USE_TILE_CLIP",t)}},{key:"copy",value:function(e){return o(s(n.prototype),"copy",this).call(this,e),this.invalidateFog(),this.setOpacity(e.opacity),this}}]),n}(f.RawShaderMaterial);t.SolidLineMaterial=w,w.DEFAULT_COLOR=16711680,w.DEFAULT_WIDTH=1,w.DEFAULT_OUTLINE_WIDTH=0,w.DEFAULT_OPACITY=1,w.DEFAULT_DRAW_RANGE_START=0,w.DEFAULT_DRAW_RANGE_END=1,w.DEFAULT_DASH_SIZE=1,w.DEFAULT_GAP_SIZE=1,w.DEFAULT_OFFSET=0},85070:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShaderDefine=t.setShaderDefine=t.getShaderMaterialDefine=t.setShaderMaterialDefine=t.disableBlending=t.enableBlending=t.enforceBlending=t.insertShaderInclude=t.DEFINE_BOOL_FALSE=t.DEFINE_BOOL_TRUE=void 0;var r=n(15739),i=n(34585);function a(e){!0!==e.transparent&&!0!==e.forcedBlending&&(e.blending=i.CustomBlending,!0===e.premultipliedAlpha?(e.blendSrc=i.OneFactor,e.blendDst=i.OneMinusSrcAlphaFactor,e.blendSrcAlpha=i.OneFactor,e.blendDstAlpha=i.OneMinusSrcAlphaFactor):(e.blendSrc=i.SrcAlphaFactor,e.blendDst=i.OneMinusSrcAlphaFactor,e.blendSrcAlpha=i.OneFactor,e.blendDstAlpha=i.OneMinusSrcAlphaFactor))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0===e.defines?n:u(e.defines,t)}function s(e,n,r){var i=!1;return"number"===typeof r?(i=e[n]!==r,e[n]=r):!0===r?(i=e[n]!==t.DEFINE_BOOL_TRUE,e[n]=t.DEFINE_BOOL_TRUE):!1===r&&void 0!==e[n]&&(delete e[n],i=!0),i}function u(e,n){var r=e[n];return r!==t.DEFINE_BOOL_FALSE&&(r===t.DEFINE_BOOL_TRUE||r)}t.DEFINE_BOOL_TRUE="",t.DEFINE_BOOL_FALSE=void 0,t.insertShaderInclude=function(e,t,n,r){var i=!0===r?"\t":"";return e.replace("#include <".concat(t,">"),"#include <".concat(t,">\n").concat(i,"#include <").concat(n,">"))},t.enforceBlending=function(e){e.transparent||(a(e),e.forcedBlending=!0)},t.enableBlending=a,t.disableBlending=function(e){!0!==e.transparent&&!0!==e.forcedBlending&&(e.blending=i.NormalBlending)},t.setShaderMaterialDefine=function(e,t,n){r.assert(void 0!==e.defines,"Do not use this function in ShaderMaterial derived c-tor.");var i=n!==o(e,t);return!!i&&(s(e.defines,t,n),e.needsUpdate=i,!0)},t.getShaderMaterialDefine=o,t.setShaderDefine=s,t.getShaderDefine=u},3879:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VignetteShader=void 0,t.VignetteShader={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }",fragmentShader:"\n        uniform float offset;\n        uniform float darkness;\n        uniform sampler2D tDiffuse;\n        varying vec2 vUv;\n        void main() {\n            vec4 texel = texture2D( tDiffuse, vUv );\n            vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\n            gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );\n        }"}},21690:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(43869),t),i(n(45709),t),i(n(80549),t),i(n(68275),t),i(n(18067),t),i(n(59616),t),i(n(11153),t),i(n(76729),t),i(n(67747),t)},18067:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextCanvas=t.DEFAULT_TEXT_CANVAS_LAYER=void 0;var o=n(34585),s=n(68275),u=n(30903),l=n(80549),c=n(95529),d=n(64584),h=n(11153),f=new o.Vector3,p={array:[new o.Box2],offset:0},m=new Float32Array;t.DEFAULT_TEXT_CANVAS_LAYER=0;var v=function(){function e(n){i(this,e),this.m_renderer=n.renderer,this.m_fontCatalog=n.fontCatalog,this.minGlyphCount=n.minGlyphCount,this.maxGlyphCount=n.maxGlyphCount,this.name=n.name,void 0===n.material?(this.m_ownsMaterial=!0,this.m_material=h.createSdfTextMaterial({fontCatalog:n.fontCatalog,rendererCapabilities:this.m_renderer.capabilities})):(this.m_ownsMaterial=!1,this.m_material=n.material),void 0===n.backgroundMaterial?(this.m_ownsBgMaterial=!0,this.m_bgMaterial=h.createSdfTextMaterial({fontCatalog:n.fontCatalog,isBackground:!0,rendererCapabilities:this.m_renderer.capabilities})):(this.m_ownsBgMaterial=!1,this.m_bgMaterial=n.backgroundMaterial),this.m_defaultLayer={id:t.DEFAULT_TEXT_CANVAS_LAYER,storage:new u.TextGeometry(new o.Scene,this.m_material,this.m_bgMaterial,this.minGlyphCount,this.maxGlyphCount)},this.m_layers=[this.m_defaultLayer],this.m_currentTextRenderStyle=(new l.TextRenderStyle).copy(e.defaultTextRenderStyle),this.m_currentTextLayoutStyle=(new l.TextLayoutStyle).copy(e.defaultTextLayoutStyle),this.m_lineTypesetter=new c.LineTypesetter,this.m_pathTypesetter=new d.PathTypesetter}return a(e,[{key:"fontCatalog",get:function(){return this.m_fontCatalog},set:function(e){this.m_fontCatalog=e;var t=this.m_material;t.uniforms.sdfTexture.value=this.m_fontCatalog.texture,t.uniforms.sdfParams.value=new o.Vector4(this.m_fontCatalog.textureSize.x,this.m_fontCatalog.textureSize.y,this.m_fontCatalog.size,this.m_fontCatalog.distanceRange),t.defines.MSDF="msdf"===this.m_fontCatalog.type?1:0;var n=this.m_bgMaterial;n.uniforms.sdfTexture.value=this.m_fontCatalog.texture,n.uniforms.sdfParams.value=new o.Vector4(this.m_fontCatalog.textureSize.x,this.m_fontCatalog.textureSize.y,this.m_fontCatalog.size,this.m_fontCatalog.distanceRange),n.defines.MSDF="msdf"===this.m_fontCatalog.type?1:0}},{key:"material",get:function(){return this.m_material},set:function(e){this.m_ownsMaterial&&(this.m_material.dispose(),this.m_ownsMaterial=!1),this.m_material=e;var t,n=r(this.m_layers);try{for(n.s();!(t=n.n()).done;){t.value.storage.mesh.material=this.m_material}}catch(i){n.e(i)}finally{n.f()}}},{key:"backgroundMaterial",get:function(){return this.m_bgMaterial},set:function(e){this.m_ownsBgMaterial&&(this.m_bgMaterial.dispose(),this.m_ownsBgMaterial=!1),this.m_bgMaterial=e;var t,n=r(this.m_layers);try{for(n.s();!(t=n.n()).done;){t.value.storage.backgroundMesh.material=this.m_bgMaterial}}catch(i){n.e(i)}finally{n.f()}}},{key:"textRenderStyle",get:function(){return this.m_currentTextRenderStyle},set:function(e){this.m_currentTextRenderStyle.copy(e)}},{key:"textLayoutStyle",get:function(){return this.m_currentTextLayoutStyle},set:function(e){this.m_currentTextLayoutStyle.copy(e)}},{key:"clear",value:function(){var t,n=r(this.m_layers);try{for(n.s();!(t=n.n()).done;){t.value.storage.clear()}}catch(i){n.e(i)}finally{n.f()}this.m_currentTextRenderStyle.copy(e.defaultTextRenderStyle),this.m_currentTextLayoutStyle.copy(e.defaultTextLayoutStyle)}},{key:"render",value:function(e,t,n,r,i){this.m_fontCatalog.update(this.m_renderer);var a=null;void 0!==r&&(a=this.m_renderer.getRenderTarget(),this.m_renderer.setRenderTarget(r)),!0===i&&this.m_renderer.clear(!0);for(var o=0;o<this.m_layers.length;o++){var s=this.m_layers[o];if(s.id>=(null!==t&&void 0!==t?t:0)){if(!(void 0===n||s.id<n))break;s.storage.update(),this.m_renderer.render(s.storage.scene,e)}}void 0!==r&&this.m_renderer.setRenderTarget(a)}},{key:"addLayer",value:function(e){var t=this.getLayer(e);return void 0===t&&(t={id:e,storage:new u.TextGeometry(new o.Scene,this.m_material,this.m_bgMaterial,this.minGlyphCount,this.maxGlyphCount)},this.m_layers.push(t),this.m_layers.sort((function(e,t){return e.id-t.id}))),t}},{key:"getLayer",value:function(e){return this.m_layers.find((function(t){return t.id===e}))}},{key:"getAllLayers",value:function(){return this.m_layers}},{key:"measureText",value:function(e,t,n){var r,i,a,o;if(f.set(0,0,0),void 0!==n){if(r=n.path,i=n.pathOverflow,o=n.outputCharacterBounds,void 0!==n.path){var s=n.path.getPoint(0);if(null===s)return!1;f.set(s.x,s.y,0)}n.letterCaseArray&&(a=n.letterCaseArray)}return this.placeText({input:e,layer:this.m_defaultLayer,textPath:r,textPathOverflow:i,bounds:t,individualBounds:o,letterCaseArray:a})}},{key:"addText",value:function(e,t,n){var r,i,a;f.copy(t);var o=this.m_defaultLayer;if(void 0!==n){if(r=n.path,i=n.pathOverflow,void 0!==n.layer){var s=this.getLayer(n.layer);void 0===s&&(s=this.addLayer(n.layer)),o=s}void 0!==n.path&&f.set(0,0,f.z),n.letterCaseArray&&(a=n.letterCaseArray)}var u=o.storage.drawCount,l=this.placeText({input:e,textPath:r,textPathOverflow:i,layer:o,letterCaseArray:a});return l&&void 0!==n?(!0===n.updatePosition&&t.copy(f),void 0!==n.pickingData&&o.storage.addPickingData(u,o.storage.drawCount,n.pickingData)):l||(o.storage.m_drawCount=u),l}},{key:"createTextBufferObject",value:function(e,t){var n,r;f.set(0,0,0);var i,a,u,c,d,h,p=this.m_currentTextRenderStyle.fontVariant===l.FontVariant.SmallCaps;if("string"!==typeof e)n=e,void 0!==t&&t.letterCaseArray&&(r=t.letterCaseArray);else if(r=[],void 0===(n=this.m_fontCatalog.getGlyphs(e,this.m_currentTextRenderStyle,p?r:void 0)))return;return void 0!==t&&(i=t.path,a=t.pathOverflow,!0===t.outputBounds&&(u=new o.Box2),!0===t.outputCharacterBounds&&(c=[]),!0===t.storeStyles&&(d=this.m_currentTextRenderStyle.clone(),h=this.m_currentTextLayoutStyle.clone())),this.placeText({input:e,layer:this.m_defaultLayer,computeTextBuffer:!0,textPath:i,textPathOverflow:a,bounds:u,individualBounds:c,letterCaseArray:r}),new s.TextBufferObject(n,new Float32Array(m),u,c,d,h)}},{key:"addTextBufferObject",value:function(e,t){var n,r,i,a,o,s,u,l,c=this.m_defaultLayer;if(void 0!==t){if(void 0!==t.layer){var d=this.getLayer(t.layer);void 0===d&&(d=this.addLayer(t.layer)),c=d}r=null===(n=t.position)||void 0===n?void 0:n.clone(),i=t.scale,a=t.rotation,o=t.color,s=t.opacity,u=t.backgroundColor,l=t.backgroundOpacity}var h=c.storage.drawCount,f=c.storage.addTextBufferObject(e,r,i,a,o,s,u,l);return f&&void 0!==t?void 0!==t.pickingData&&c.storage.addPickingData(h,c.storage.drawCount,t.pickingData):f||(c.storage.m_drawCount=h),f}},{key:"pickText",value:function(e,t){var n,i=r(this.m_layers);try{for(i.s();!(n=i.n()).done;){n.value.storage.pick(e,t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"getMemoryUsage",value:function(e){this.m_fontCatalog.updateMemoryUsage(e);var t,n=r(this.m_layers);try{for(n.s();!(t=n.n()).done;){t.value.storage.updateMemoryUsage(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"placeText",value:function(e){if(0===e.input.length||0===this.m_currentTextLayoutStyle.maxLines)return void 0!==e.bounds&&(e.bounds.min.set(0,0),e.bounds.max.set(0,0)),void 0!==e.individualBounds&&(e.individualBounds.length=0),!0;var t,n,r,i=this.m_currentTextRenderStyle.fontVariant===l.FontVariant.SmallCaps;if("string"!==typeof e.input)t=e.input,e.letterCaseArray&&(n=e.letterCaseArray);else if(n=[],void 0===(t=this.m_fontCatalog.getGlyphs(e.input,this.m_currentTextRenderStyle,i?n:void 0)))return!1;void 0!==e.individualBounds&&(p.array=e.individualBounds,p.offset=0,r=p),void 0!==e.bounds&&(e.bounds.min.set(1/0,1/0),e.bounds.max.set(-1/0,-1/0)),!0===e.computeTextBuffer&&(m=new Float32Array(t.length*u.QUAD_VERTEX_MEMORY_FOOTPRINT));var a=void 0!==e.textPath,o={glyphs:t,fontCatalog:this.m_fontCatalog,textRenderStyle:this.m_currentTextRenderStyle,textLayoutStyle:this.m_currentTextLayoutStyle,position:f,geometry:e.layer.storage,smallCapsArray:i?n:void 0,globalBounds:e.bounds,individualBounds:r,vertexBuffer:!0===e.computeTextBuffer?m:void 0},s=!0;return a?(Object.assign(o,{path:e.textPath,pathOverflow:!0===e.textPathOverflow}),s=this.m_pathTypesetter.arrangeGlyphs(o)):s=this.m_lineTypesetter.arrangeGlyphs(o),void 0!==r&&(r.array.length=r.offset),s}}]),e}();t.TextCanvas=v,v.defaultTextRenderStyle=new l.TextRenderStyle,v.defaultTextLayoutStyle=new l.TextLayoutStyle},43869:function(e,t,n){"use strict";var r=n(87757),i=n(43269).default,a=n(48926).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FontCatalog=void 0;var u=n(34585),l=n(67747),c=n(45709),d=n(85329),h=n(80549),f="_BoldAssets/",p="_ItalicAssets/",m=function(){function e(t,n,r,i,a,s,u,l,c,h,f){o(this,e),this.url=t,this.name=n,this.type=r,this.size=i,this.maxWidth=a,this.maxHeight=s,this.distanceRange=u,this.fonts=l,this.unicodeBlocks=c,this.maxCodePointCount=h,this.m_replacementGlyph=f,this.showReplacementGlyphs=!1,this.m_glyphTextureCache=new d.GlyphTextureCache(h,this.maxWidth+1,this.maxHeight+1),this.m_loadingJson=new Map,this.m_loadingPages=new Map,this.m_loadingGlyphs=new Map,this.m_loadedJson=new Map,this.m_loadedPages=new Map,this.m_loadedGlyphs=new Map}return s(e,[{key:"dispose",value:function(){this.fonts.length=0,this.unicodeBlocks.length=0,this.m_glyphTextureCache.dispose(),this.m_loadingJson.clear(),this.m_loadingPages.clear(),this.m_loadingGlyphs.clear(),this.m_loadedJson.clear(),this.m_loadedPages.clear(),this.m_loadedGlyphs.clear()}},{key:"clear",value:function(){this.m_glyphTextureCache.clear(),this.m_loadingJson.clear(),this.m_loadingPages.clear(),this.m_loadingGlyphs.clear(),this.m_loadedJson.clear(),this.m_loadedPages.clear(),this.m_loadedGlyphs.clear()}},{key:"update",value:function(e){this.m_glyphTextureCache.update(e)}},{key:"texture",get:function(){return this.m_glyphTextureCache.texture}},{key:"textureSize",get:function(){return this.m_glyphTextureCache.textureSize}},{key:"isLoading",get:function(){return this.m_loadingJson.size>0||this.m_loadingPages.size>0||this.m_loadingGlyphs.size>0}},{key:"loadBlock",value:function(){var t=a(r.mark((function t(n,a,o,s){var u,l,c,d,h,f,p,m;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=this.getAssetsPath(o,a),l="".concat(u,"/").concat(n.name.replace(/ /g,"_"),".json"),void 0!==(c=this.m_loadedJson.get(l))){t.next=25;break}if(void 0!==(d=this.m_loadingJson.get(l))){t.next=22;break}return t.prev=6,d=e.loadJSON(l),this.m_loadingJson.set(l,d),t.next=11,d;case 11:c=t.sent,this.m_loadingJson.delete(l),this.m_loadedJson.set(l,c),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(6),console.error(t.t0),this.m_loadingJson.delete(l);case 20:t.next=25;break;case 22:return t.next=24,d;case 24:c=t.sent;case 25:if(h=[],!0===s){f=i(c.pages);try{for(f.s();!(p=f.n()).done;)m=p.value,h.push(this.loadPage("".concat(u,"/").concat(m)))}catch(r){f.e(r)}finally{f.f()}}return t.next=29,Promise.all(h);case 29:return t.abrupt("return",c);case 30:case"end":return t.stop()}}),t,this,[[6,16]])})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"removeBlock",value:function(e,t,n){var r=this.getAssetsPath(n,t),a="".concat(r,"/").concat(e.name.replace(/ /g,"_"),".json"),o=this.m_loadedJson.get(a);if(void 0!==o){var s,u=i(o.pages);try{for(u.s();!(s=u.n()).done;){var l=s.value,c="".concat(r,"/").concat(l);this.m_loadingPages.delete(c),this.m_loadedPages.delete(c)}}catch(d){u.e(d)}finally{u.f()}this.m_loadingJson.delete(a),this.m_loadedJson.delete(a)}}},{key:"loadCharset",value:function(){var e=a(r.mark((function e(t,n){var a,o,s,u,l,c,d,f,p=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.fontName,o=n.fontStyle,s=n.fontVariant===h.FontVariant.AllCaps||n.fontVariant===h.FontVariant.SmallCaps,u=(s?t.toUpperCase():t).replace(/[\s\S](?=([\s\S]+))/g,(function(e,t){return t.indexOf(e)+1?"":e})),l=[],c=i(u),e.prev=6,f=function(){var e=d.value,t=e.codePointAt(0),n=p.getFont(t,a),r="".concat(n.name,"_").concat(o),s="".concat(r,"_").concat(t),u=p.m_loadedGlyphs.get(r);void 0===u&&(u=new Map,p.m_loadedGlyphs.set(r,u));var c=u.get(t);if(void 0===c){var h=p.m_loadingGlyphs.get(s);if(void 0===h){if(!n.charset.includes(String.fromCodePoint(t))){var f=p.createReplacementGlyph(t,e,n);return u.set(t,f),p.m_glyphTextureCache.add(s,f),"continue"}var m,v,g=i(p.unicodeBlocks);try{for(g.s();!(v=g.n()).done;){var y=v.value;if(t>=y.min&&t<=y.max){m=y;break}}}catch(x){g.e(x)}finally{g.f()}h=p.loadAssets(t,o,m,n),p.m_loadingGlyphs.set(s,h),h.then((function(e){p.m_loadingGlyphs.delete(s),u.set(t,e),p.m_glyphTextureCache.add(s,e)}))}l.push(h)}else p.m_glyphTextureCache.has(s)||(l.push(Promise.resolve(c)),p.m_glyphTextureCache.add(s,c))},c.s();case 9:if((d=c.n()).done){e.next=15;break}if("continue"!==f()){e.next=13;break}return e.abrupt("continue",13);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:return e.abrupt("return",Promise.all(l));case 24:case"end":return e.stop()}}),e,null,[[6,17,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getGlyph",value:function(e,t,n){var r=this.m_loadedGlyphs.get("".concat(t.name,"_").concat(n));if(void 0!==r)return r.get(e)}},{key:"getGlyphs",value:function(e,t,n){var r,a=[],o=t.fontName,s=t.fontStyle,u=t.fontVariant,l=u===h.FontVariant.AllCaps||u===h.FontVariant.SmallCaps,c=i(e);try{for(c.s();!(r=c.n()).done;){var d,f=r.value,p=l?f.toUpperCase():f,m=i(p);try{for(m.s();!(d=m.n()).done;){var v=d.value,g=v.codePointAt(0),y=this.getFont(g,o),x=this.getGlyph(g,y,s);if(void 0===x||x.isReplacement&&!this.showReplacementGlyphs)return;a.push(x),void 0!==n&&n.push(v!==f)}}catch(_){m.e(_)}finally{m.f()}}}catch(_){c.e(_)}finally{c.f()}return a}},{key:"getFont",value:function(e,t){var n,r=this.fonts[0].name,a=i(this.unicodeBlocks);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(e>=o.min&&e<=o.max){r=void 0!==t&&void 0!==o.fonts.find((function(e){return e===t}))?t:o.fonts[0];break}}}catch(s){a.e(s)}finally{a.f()}return this.fonts.find((function(e){return e.name===r}))}},{key:"updateMemoryUsage",value:function(e){var t,n=0,r=i(this.unicodeBlocks);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=2*(a.max-a.min)}}catch(l){r.e(l)}finally{r.f()}var o=this.m_glyphTextureCache.textureSize.x*this.m_glyphTextureCache.textureSize.y*4;for(var s in this.m_loadedPages.entries)if(void 0!==this.m_loadedPages.get(s)){var u=this.m_loadedPages.get(s);void 0!==u&&(o+=u.image.width*u.image.height*4)}e.heapSize+=n+o,e.gpuSize+=o}},{key:"createReplacementGlyph",value:function(e,t,n){var r=this.m_replacementGlyph.clone();return r.codePoint=e,r.character=t,r.font=n,r.isReplacement=l.UnicodeUtils.isPrintable(e),r}},{key:"loadAssets",value:function(){var e=a(r.mark((function e(t,n,i,a){var o,s,u,l,d,h;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBlock(i,a,n);case 2:if(void 0!==(o=e.sent)){e.next=5;break}return e.abrupt("return",this.m_replacementGlyph);case 5:return s=o.chars.find((function(e){return e.id===t})),u=this.getAssetsPath(n,a),l="".concat(u,"/").concat(o.pages[s.page]),e.next=10,this.loadPage(l);case 10:return d=e.sent,h=new c.GlyphData(s.id,i.name,s.width,s.height,s.xadvance,s.xoffset,s.yoffset,s.x/d.image.width,1-(s.y+s.height)/d.image.height,(s.x+s.width)/d.image.width,1-s.y/d.image.height,d,a),e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"loadPage",value:function(){var t=a(r.mark((function t(n){var i,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(i=this.m_loadedPages.get(n))){t.next=20;break}if(void 0!==(a=this.m_loadingPages.get(n))){t.next=17;break}return a=e.loadTexture(n),this.m_loadingPages.set(n,a),t.next=8,a;case 8:(i=t.sent).wrapS=u.ClampToEdgeWrapping,i.wrapT=u.ClampToEdgeWrapping,i.minFilter=u.NearestFilter,i.needsUpdate=!0,this.m_loadingPages.delete(n)&&this.m_loadedPages.set(n,i),this.m_loadingPages.delete(n),t.next=20;break;case 17:return t.next=19,a;case 19:i=t.sent;case 20:return t.abrupt("return",i);case 21:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAssetsPath",value:function(e,t){var n="_Assets/";switch(e){case h.FontStyle.Bold:void 0!==t.bold&&(n=f);break;case h.FontStyle.Italic:void 0!==t.italic&&(n=p);break;case h.FontStyle.BoldItalic:void 0!==t.boldItalic?n="_BoldItalicAssets/":void 0!==t.italic?n=p:void 0!==t.bold&&(n=f)}return"".concat(this.url,"/").concat(this.name).concat(n).concat(t.name)}}],[{key:"load",value:function(){var t=a(r.mark((function t(n,i){var a,o,s,l,d,h,f,p;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new URL(n,window.location.href),t.next=3,e.loadJSON(a.href);case 3:return o=t.sent,s=new URL("".concat(o.name).concat("_Assets/Extra/"),a),t.next=7,e.loadJSON(s.href+"Specials.json");case 7:return l=t.sent,t.next=10,e.loadTexture(s.href+"Specials.png");case 10:return(d=t.sent).wrapS=u.ClampToEdgeWrapping,d.wrapT=u.ClampToEdgeWrapping,d.minFilter=u.NearestFilter,d.needsUpdate=!0,h=o.fonts.find((function(e){return"Extra"===e.name})),f=new c.GlyphData(65533,"Specials",l.chars[0].width,l.chars[0].height,l.chars[0].xadvance,l.chars[0].xoffset,l.chars[0].yoffset,0,0,1,1,d,h,!0),p=new e(a.href.substr(0,a.href.lastIndexOf("/")),o.name,o.type,o.size,o.maxWidth,o.maxHeight,o.distanceRange,o.fonts,o.supportedBlocks,i,f),t.abrupt("return",p);case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadTexture",value:function(){var e=a(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){(new u.TextureLoader).load(t,e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadJSON",value:function(){var e=a(r.mark((function e(t){var n,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(t," Status Text:  ").concat(n.statusText));case 5:return e.next=7,n.text();case 7:return i=e.sent,e.abrupt("return",JSON.parse(i));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.FontCatalog=m},45709:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphData=void 0;var a=n(34585),o=n(67747),s=function(){function e(t,n,i,s,u,l,c,d,h,f,p,m,v){var g=arguments.length>13&&void 0!==arguments[13]&&arguments[13];r(this,e),this.codePoint=t,this.block=n,this.width=i,this.height=s,this.advanceX=u,this.offsetX=l,this.offsetY=c,this.texture=m,this.font=v,this.isReplacement=g,this.positions=[],this.sourceTextureCoordinates=[],this.dynamicTextureCoordinates=[],this.copyIndex=0,this.isInCache=!1,this.character=String.fromCodePoint(t),this.direction=o.UnicodeUtils.getDirection(t,n);var y=this.offsetX,x=y+this.width,_=v.metrics.lineHeight-this.offsetY,b=_-this.height;this.positions.push(new a.Vector3(y,b,1),new a.Vector3(x,b,1),new a.Vector3(y,_,1),new a.Vector3(x,_,1)),this.sourceTextureCoordinates.push(new a.Vector2(d,h),new a.Vector2(f,h),new a.Vector2(d,p),new a.Vector2(f,p)),this.dynamicTextureCoordinates.push(new a.Vector2(0,0),new a.Vector2(1,0),new a.Vector2(0,1),new a.Vector2(1,1))}return i(e,[{key:"clone",value:function(){return new e(this.codePoint,this.block,this.width,this.height,this.advanceX,this.offsetX,this.offsetY,this.sourceTextureCoordinates[0].x,this.sourceTextureCoordinates[0].y,this.sourceTextureCoordinates[3].x,this.sourceTextureCoordinates[3].y,this.texture,this.font,this.isReplacement)}}]),e}();t.GlyphData=s},85329:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphTextureCache=void 0;var o=n(51106),s=n(34585),u=n(45709),l=n(9499),c=4096,d=function(){function e(t,n,r){i(this,e),this.capacity=t,this.entryWidth=n,this.entryHeight=r;var a=Math.floor(Math.sqrt(t));this.m_cacheHeight=a*a<t?a+1:a,this.m_cacheWidth=a*this.m_cacheHeight<t?a+1:a,this.m_textureSize=new s.Vector2(this.m_cacheWidth*n,this.m_cacheHeight*r),(this.m_textureSize.y>c||this.m_textureSize.x>c)&&console.warn("GlyphTextureCache texture size ("+this.m_textureSize.x+", "+this.m_textureSize.y+") exceeds WebGL's widely supported MAX_TEXTURE_SIZE ("+"4096).\nThis could result in rendering errors on some devices.\nPlease consider reducing its capacity or input assets size."),this.m_entryCache=new o.LRUCache(t),this.initCacheEntries(),this.m_scene=new s.Scene,this.m_camera=new s.OrthographicCamera(0,this.m_textureSize.x,this.m_textureSize.y,0),this.m_camera.position.z=1,this.m_camera.updateMatrixWorld(!1),this.m_rt=new s.WebGLRenderTarget(this.m_textureSize.x,this.m_textureSize.y,{wrapS:s.ClampToEdgeWrapping,wrapT:s.ClampToEdgeWrapping,depthBuffer:!1,stencilBuffer:!1}),this.m_copyTextureSet=new Set,this.m_copyTransform=new s.Matrix3,this.m_copyPositions=[],this.m_copyPositions.push(new s.Vector2,new s.Vector2,new s.Vector2,new s.Vector2),this.m_copyVertexBuffer=new s.InterleavedBuffer(new Float32Array(20*t),5),this.m_copyVertexBuffer.setUsage(s.DynamicDrawUsage),this.m_copyPositionAttribute=new s.InterleavedBufferAttribute(this.m_copyVertexBuffer,3,0),this.m_copyUVAttribute=new s.InterleavedBufferAttribute(this.m_copyVertexBuffer,2,3),this.m_copyGeometry=new s.BufferGeometry,this.m_copyGeometry.setAttribute("position",this.m_copyPositionAttribute),this.m_copyGeometry.setAttribute("uv",this.m_copyUVAttribute);var u=new s.BufferAttribute(new Uint32Array(6*t),1);u.setUsage(s.DynamicDrawUsage),this.m_copyGeometry.setIndex(u),this.m_copyMesh=new s.Mesh(this.m_copyGeometry),this.m_copyMesh.frustumCulled=!1,this.m_copyGeometryDrawCount=0,this.m_clearPositionAttribute=new s.BufferAttribute(new Float32Array(8*t),2),this.m_clearPositionAttribute.setUsage(s.DynamicDrawUsage),this.m_clearGeometry=new s.BufferGeometry,this.m_clearGeometry.setAttribute("position",this.m_clearPositionAttribute);var l=new s.BufferAttribute(new Uint32Array(6*t),1);l.setUsage(s.DynamicDrawUsage),this.m_clearGeometry.setIndex(l),this.m_clearMesh=new s.Mesh(this.m_clearGeometry),this.m_clearMesh.frustumCulled=!1,this.m_clearGeometryDrawCount=0,this.m_scene.add(this.m_clearMesh,this.m_copyMesh)}return a(e,[{key:"dispose",value:function(){var e,t;this.m_entryCache.clear(),this.m_scene.remove(this.m_clearMesh,this.m_copyMesh),this.m_rt.dispose(),null===(e=this.m_clearMaterial)||void 0===e||e.dispose(),null===(t=this.m_copyMaterial)||void 0===t||t.dispose(),this.m_copyTextureSet.clear(),this.m_clearGeometry.dispose(),this.m_copyGeometry.dispose()}},{key:"texture",get:function(){return this.m_rt.texture}},{key:"textureSize",get:function(){return this.m_textureSize}},{key:"add",value:function(e,t){if(void 0===this.m_entryCache.get(e)){var n=this.m_entryCache.oldest;if(null===n)throw new Error("GlyphTextureCache is uninitialized!");this.clearCacheEntry(n.value),this.copyGlyphToCache(e,t,n.value.location)}}},{key:"has",value:function(e){return this.m_entryCache.has(e)}},{key:"get",value:function(e){return this.m_entryCache.get(e)}},{key:"clear",value:function(){this.m_copyGeometryDrawCount=0,this.m_clearGeometryDrawCount=0,this.m_entryCache.clear(),this.m_copyTextureSet.clear(),this.initCacheEntries()}},{key:"update",value:function(e){var t=null,n=this.m_clearGeometryDrawCount>0,r=this.m_copyGeometryDrawCount>0;if((n||r)&&(t=e.getRenderTarget(),e.setRenderTarget(this.m_rt)),n){if(this.m_clearMaterial||(this.m_clearMaterial=new l.GlyphClearMaterial({rendererCapabilities:e.capabilities}),this.m_clearMesh.material=this.m_clearMaterial),null===this.m_clearGeometry.index)throw new Error("GlyphTextureCache clear geometry index is uninitialized!");this.m_clearPositionAttribute.needsUpdate=!0,this.m_clearPositionAttribute.updateRange.offset=0,this.m_clearPositionAttribute.updateRange.count=8*this.m_clearGeometryDrawCount,this.m_clearGeometry.index.needsUpdate=!0,this.m_clearGeometry.index.updateRange.offset=0,this.m_clearGeometry.index.updateRange.count=6*this.m_clearGeometryDrawCount,this.m_clearGeometry.setDrawRange(0,6*this.m_clearGeometryDrawCount),this.m_clearMesh.visible=!0,this.m_copyMesh.visible=!1,e.render(this.m_scene,this.m_camera),this.m_clearGeometryDrawCount=0,this.m_clearMesh.visible=!1}if(r){if(this.m_copyMaterial||(this.m_copyMaterial=new l.GlyphCopyMaterial({rendererCapabilities:e.capabilities}),this.m_copyMesh.material=this.m_copyMaterial),null===this.m_copyGeometry.index)throw new Error("GlyphTextureCache copy geometry index is uninitialized!");this.m_copyVertexBuffer.needsUpdate=!0,this.m_copyVertexBuffer.updateRange.offset=0,this.m_copyVertexBuffer.updateRange.count=20*this.m_copyGeometryDrawCount,this.m_copyGeometry.index.needsUpdate=!0,this.m_copyGeometry.index.updateRange.offset=0,this.m_copyGeometry.index.updateRange.count=6*this.m_copyGeometryDrawCount,this.m_copyGeometry.setDrawRange(0,6*this.m_copyGeometryDrawCount),this.m_copyMesh.visible=!0;for(var i=Array.from(this.m_copyTextureSet),a=Math.ceil(this.m_copyTextureSet.size/8),o=0;o<a;o++){var s=8*o;this.m_copyMaterial.uniforms.pageOffset.value=s;for(var u=0;u<8;u++){var c=s+u;c<this.m_copyTextureSet.size&&(this.m_copyMaterial.uniforms["page"+u].value=i[c])}e.render(this.m_scene,this.m_camera)}this.m_copyTextureSet.clear(),this.m_copyGeometryDrawCount=0}(n||r)&&e.setRenderTarget(t)}},{key:"initCacheEntries",value:function(){for(var e={name:"",metrics:{size:0,distanceRange:0,base:0,lineHeight:0,lineGap:0,capHeight:0,xHeight:0},charset:""},t=new u.GlyphData(0,"",0,0,0,0,0,0,0,0,0,s.Texture.DEFAULT_IMAGE,e),n=0;n<this.m_cacheHeight;n++)for(var r=0;r<this.m_cacheWidth;r++){var i={glyphData:t,location:new s.Vector2(r,n)};this.m_entryCache.set("Dummy_".concat(n*this.m_cacheHeight+r),i)}}},{key:"copyGlyphToCache",value:function(e,t,n){this.m_copyTextureSet.add(t.texture);var i,a=0,o=r(this.m_copyTextureSet.values());try{for(o.s();!(i=o.n()).done;){if(i.value===t.texture)break;a++}}catch(m){o.e(m)}finally{o.f()}t.copyIndex=a,this.m_copyTransform.set(1,0,n.x*this.entryWidth-t.offsetX,0,1,n.y*this.entryHeight-t.positions[0].y,0,0,0);for(var s=0;s<4;++s)this.m_copyPositions[s].set(t.positions[s].x,t.positions[s].y),this.m_copyPositions[s].applyMatrix3(this.m_copyTransform);if(!(this.m_copyGeometryDrawCount>=this.capacity)){for(var u=4*this.m_copyGeometryDrawCount,l=6*this.m_copyGeometryDrawCount,c=0;c<4;++c)this.m_copyPositionAttribute.setXYZ(u+c,this.m_copyPositions[c].x,this.m_copyPositions[c].y,t.copyIndex),this.m_copyUVAttribute.setXY(u+c,t.sourceTextureCoordinates[c].x,t.sourceTextureCoordinates[c].y);if(null===this.m_copyGeometry.index)throw new Error("GlyphTextureCache copy geometry index is uninitialized!");this.m_copyGeometry.index.setX(l,u),this.m_copyGeometry.index.setX(l+1,u+1),this.m_copyGeometry.index.setX(l+2,u+2),this.m_copyGeometry.index.setX(l+3,u+2),this.m_copyGeometry.index.setX(l+4,u+1),this.m_copyGeometry.index.setX(l+5,u+3),++this.m_copyGeometryDrawCount;var d=this.m_copyPositions[0].x/this.m_textureSize.x,h=this.m_copyPositions[0].y/this.m_textureSize.y,f=this.m_copyPositions[3].x/this.m_textureSize.x,p=this.m_copyPositions[3].y/this.m_textureSize.y;t.dynamicTextureCoordinates[0].set(d,h),t.dynamicTextureCoordinates[1].set(f,h),t.dynamicTextureCoordinates[2].set(d,p),t.dynamicTextureCoordinates[3].set(f,p),t.isInCache=!0,this.m_entryCache.set(e,{glyphData:t,location:n})}}},{key:"clearCacheEntry",value:function(e){if(e.glyphData.isInCache=!1,this.m_copyPositions[0].set(e.location.x*this.entryWidth,e.location.y*this.entryHeight),this.m_copyPositions[1].set((e.location.x+1)*this.entryWidth,e.location.y*this.entryHeight),this.m_copyPositions[2].set(e.location.x*this.entryWidth,(e.location.y+1)*this.entryHeight),this.m_copyPositions[3].set((e.location.x+1)*this.entryWidth,(e.location.y+1)*this.entryHeight),!(this.m_clearGeometryDrawCount>=this.capacity)){for(var t=4*this.m_clearGeometryDrawCount,n=6*this.m_clearGeometryDrawCount,r=0;r<4;++r)this.m_clearPositionAttribute.setXY(t+r,this.m_copyPositions[r].x,this.m_copyPositions[r].y);if(null===this.m_clearGeometry.index)throw new Error("GlyphTextureCache clear geometry index is uninitialized!");this.m_clearGeometry.index.setX(n,t),this.m_clearGeometry.index.setX(n+1,t+1),this.m_clearGeometry.index.setX(n+2,t+2),this.m_clearGeometry.index.setX(n+3,t+2),this.m_clearGeometry.index.setX(n+4,t+1),this.m_clearGeometry.index.setX(n+5,t+3),++this.m_clearGeometryDrawCount}}}]),e}();t.GlyphTextureCache=d},68275:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextBufferObject=void 0;var a=r((function e(t,n,r,a,o,s){i(this,e),this.glyphs=t,this.buffer=n,this.bounds=r,this.characterBounds=a,this.textRenderStyle=o,this.textLayoutStyle=s}));t.TextBufferObject=a},30903:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TextGeometry=t.QUAD_INDEX_MEMORY_FOOTPRINT=t.QUAD_VERTEX_MEMORY_FOOTPRINT=t.INDICES_PER_QUAD=t.VERTICES_PER_QUAD=t.INDEX_BUFFER_STRIDE=t.VERTEX_BUFFER_STRIDE=t.MAX_CAPACITY=void 0;var o=n(34585);t.MAX_CAPACITY=65536,t.VERTEX_BUFFER_STRIDE=16,t.INDEX_BUFFER_STRIDE=1,t.VERTICES_PER_QUAD=4,t.INDICES_PER_QUAD=6,t.QUAD_VERTEX_MEMORY_FOOTPRINT=t.VERTICES_PER_QUAD*t.VERTEX_BUFFER_STRIDE,t.QUAD_INDEX_MEMORY_FOOTPRINT=t.INDICES_PER_QUAD*t.INDEX_BUFFER_STRIDE;var s=function(){function e(n,r,a,s,u){i(this,e),this.scene=n,this.m_pickingDataArray=[],this.capacity=Math.min(u,t.MAX_CAPACITY),this.m_currentCapacity=Math.min(s,u),this.m_drawCount=0,this.m_updateOffset=0,this.m_vertexBuffer=new o.InterleavedBuffer(new Float32Array(this.m_currentCapacity*t.QUAD_VERTEX_MEMORY_FOOTPRINT),t.VERTEX_BUFFER_STRIDE),this.m_vertexBuffer.setUsage(o.DynamicDrawUsage),this.m_positionAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,0),this.m_uvAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,4),this.m_colorAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,8),this.m_bgColorAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,12),this.m_indexBuffer=new o.BufferAttribute(new Uint32Array(this.m_currentCapacity*t.QUAD_INDEX_MEMORY_FOOTPRINT),t.INDEX_BUFFER_STRIDE),this.m_indexBuffer.setUsage(o.DynamicDrawUsage),this.m_geometry=new o.BufferGeometry,this.m_geometry.setAttribute("position",this.m_positionAttribute),this.m_geometry.setAttribute("uv",this.m_uvAttribute),this.m_geometry.setAttribute("color",this.m_colorAttribute),this.m_geometry.setAttribute("bgColor",this.m_bgColorAttribute),this.m_geometry.setIndex(this.m_indexBuffer),this.m_mesh=new o.Mesh(this.m_geometry,r),this.m_bgMesh=new o.Mesh(this.m_geometry,a),this.m_mesh.renderOrder=Number.MAX_SAFE_INTEGER,this.m_bgMesh.renderOrder=Number.MAX_SAFE_INTEGER-1,this.m_mesh.frustumCulled=!1,this.m_bgMesh.frustumCulled=!1,this.scene.add(this.m_bgMesh,this.m_mesh)}return a(e,[{key:"drawCount",get:function(){return this.m_drawCount}},{key:"mesh",get:function(){return this.m_mesh}},{key:"backgroundMesh",get:function(){return this.m_bgMesh}},{key:"dispose",value:function(){this.scene.remove(this.m_bgMesh,this.m_mesh),this.m_geometry.dispose()}},{key:"clear",value:function(){this.m_drawCount=0,this.m_updateOffset=0,this.m_pickingDataArray.length=0}},{key:"update",value:function(){this.drawCount>this.m_updateOffset&&(this.m_vertexBuffer.needsUpdate=!0,this.m_vertexBuffer.updateRange.offset=this.m_updateOffset*t.QUAD_VERTEX_MEMORY_FOOTPRINT,this.m_vertexBuffer.updateRange.count=(this.m_drawCount-this.m_updateOffset)*t.QUAD_VERTEX_MEMORY_FOOTPRINT,this.m_indexBuffer.needsUpdate=!0,this.m_indexBuffer.updateRange.offset=this.m_updateOffset*t.QUAD_INDEX_MEMORY_FOOTPRINT,this.m_indexBuffer.updateRange.count=(this.m_drawCount-this.m_updateOffset)*t.QUAD_INDEX_MEMORY_FOOTPRINT),this.m_updateOffset=this.m_drawCount,this.m_geometry.setDrawRange(0,this.m_drawCount*t.INDICES_PER_QUAD)}},{key:"add",value:function(e,n,r,i,a,o){if(this.m_drawCount>=this.capacity)return!1;if(this.m_drawCount>=this.m_currentCapacity){var s=Math.min(2*this.m_currentCapacity,this.capacity);this.resizeBuffers(s)}for(var u=this.m_drawCount*t.VERTICES_PER_QUAD,l=this.m_drawCount*t.INDICES_PER_QUAD,c=0;c<t.VERTICES_PER_QUAD;++c){this.m_positionAttribute.setXYZW(u+c,n[c].x,n[c].y,n[c].z,(a?-1:1)*o.rotation);var d=a?(c+1)%2+2*Math.floor(c/2):c;this.m_uvAttribute.setXYZW(u+c,e.dynamicTextureCoordinates[d].x,e.dynamicTextureCoordinates[d].y,r,i),this.m_colorAttribute.setXYZW(u+c,o.color.r,o.color.g,o.color.b,o.opacity),this.m_bgColorAttribute.setXYZW(u+c,o.backgroundColor.r,o.backgroundColor.g,o.backgroundColor.b,o.backgroundOpacity)}return this.m_indexBuffer.setX(l,u),this.m_indexBuffer.setX(l+1,u+1),this.m_indexBuffer.setX(l+2,u+2),this.m_indexBuffer.setX(l+3,u+2),this.m_indexBuffer.setX(l+4,u+1),this.m_indexBuffer.setX(l+5,u+3),++this.m_drawCount,!0}},{key:"addToBuffer",value:function(e,n,r,i,a,o,s,u){for(var l=0;l<t.VERTICES_PER_QUAD;++l){var c=n+t.VERTEX_BUFFER_STRIDE*l;e[c]=i[l].x,e[c+1]=i[l].y,e[c+2]=i[l].z,e[c+3]=(s?-1:1)*u.rotation;var d=s?(l+1)%2+2*Math.floor(l/2):l;e[c+4]=r.dynamicTextureCoordinates[d].x,e[c+5]=r.dynamicTextureCoordinates[d].y,e[c+6]=a,e[c+7]=o,e[c+8]=u.color.r,e[c+9]=u.color.g,e[c+10]=u.color.b,e[c+11]=u.opacity,e[c+12]=u.backgroundColor.r,e[c+13]=u.backgroundColor.g,e[c+14]=u.backgroundColor.b,e[c+15]=u.backgroundOpacity}}},{key:"addTextBufferObject",value:function(e,n,r,i,a,o,s,u){if(this.m_drawCount+e.glyphs.length>=this.capacity)return!1;if(this.m_drawCount+e.glyphs.length>=this.m_currentCapacity){var l=Math.min(2*this.m_currentCapacity,this.capacity);this.resizeBuffers(l)}for(var c=null!==r&&void 0!==r?r:1,d=null!==i&&void 0!==i?i:0,h=Math.cos(d),f=Math.sin(d),p=void 0!==n?n.x:0,m=void 0!==n?n.y:0,v=e.buffer,g=v[3]<0?-1:1,y=void 0!==a?a.r:v[8],x=void 0!==a?a.g:v[9],_=void 0!==a?a.b:v[10],b=void 0!==o?o:v[11],w=void 0!==s?s.r:v[12],S=void 0!==s?s.g:v[13],M=void 0!==s?s.b:v[14],E=void 0!==u?u:v[15],T=this.m_drawCount*t.VERTICES_PER_QUAD,k=0;k<e.glyphs.length;++k){var C=k*t.QUAD_VERTEX_MEMORY_FOOTPRINT,A=e.glyphs[k];if(!A.isInCache)return!1;for(var P=v[C+4]>v[C+t.VERTEX_BUFFER_STRIDE+4],O=v[C+6],L=v[C+7],R=0;R<t.VERTICES_PER_QUAD;++R){var D=v[C+R*t.VERTEX_BUFFER_STRIDE],I=v[C+R*t.VERTEX_BUFFER_STRIDE+1];this.m_positionAttribute.setXYZW(T+k*t.VERTICES_PER_QUAD+R,D*c*h+I*c*-f+p,D*c*f+I*c*h+m,v[C+R*t.VERTEX_BUFFER_STRIDE+2]+0,v[C+R*t.VERTEX_BUFFER_STRIDE+3]+g*d);var F=P?(R+1)%2+2*Math.floor(R/2):R;this.m_uvAttribute.setXYZW(T+k*t.VERTICES_PER_QUAD+R,A.dynamicTextureCoordinates[F].x,A.dynamicTextureCoordinates[F].y,O,(L-O)/c+O),this.m_colorAttribute.setXYZW(T+k*t.VERTICES_PER_QUAD+R,y,x,_,b),this.m_bgColorAttribute.setXYZW(T+k*t.VERTICES_PER_QUAD+R,w,S,M,E)}this.m_indexBuffer.setX((this.m_drawCount+k)*t.INDICES_PER_QUAD,(this.m_drawCount+k)*t.VERTICES_PER_QUAD),this.m_indexBuffer.setX((this.m_drawCount+k)*t.INDICES_PER_QUAD+1,(this.m_drawCount+k)*t.VERTICES_PER_QUAD+1),this.m_indexBuffer.setX((this.m_drawCount+k)*t.INDICES_PER_QUAD+2,(this.m_drawCount+k)*t.VERTICES_PER_QUAD+2),this.m_indexBuffer.setX((this.m_drawCount+k)*t.INDICES_PER_QUAD+3,(this.m_drawCount+k)*t.VERTICES_PER_QUAD+2),this.m_indexBuffer.setX((this.m_drawCount+k)*t.INDICES_PER_QUAD+4,(this.m_drawCount+k)*t.VERTICES_PER_QUAD+1),this.m_indexBuffer.setX((this.m_drawCount+k)*t.INDICES_PER_QUAD+5,(this.m_drawCount+k)*t.VERTICES_PER_QUAD+3)}return this.m_drawCount+=e.glyphs.length,!0}},{key:"addPickingData",value:function(e,t,n){return!(this.m_pickingDataArray.length>=this.m_currentCapacity)&&(this.m_pickingDataArray.push({start:Math.min(e,this.capacity),end:Math.min(t,this.capacity),data:n}),!0)}},{key:"pick",value:function(e,n){var i,a=r(this.m_pickingDataArray);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(void 0===o)return;for(var s=o.start;s<o.end;++s){var u=s*t.VERTICES_PER_QUAD,l=Math.min(this.m_positionAttribute.getX(u+2),this.m_positionAttribute.getX(u+1));if(!(e.x<l)){var c=Math.max(this.m_positionAttribute.getX(u+2),this.m_positionAttribute.getX(u+1));if(!(e.x>c)){var d=Math.min(this.m_positionAttribute.getY(u+2),this.m_positionAttribute.getY(u+1));if(!(e.y<d)){var h=Math.max(this.m_positionAttribute.getY(u+2),this.m_positionAttribute.getY(u+1));if(!(e.y>h)){n(o.data);break}}}}}}}catch(f){a.e(f)}finally{a.f()}}},{key:"updateMemoryUsage",value:function(e){var t=4*this.m_vertexBuffer.count+4*this.m_indexBuffer.count;e.heapSize+=t,e.gpuSize+=t}},{key:"resizeBuffers",value:function(e){this.m_currentCapacity=e;var n=new Float32Array(e*t.QUAD_VERTEX_MEMORY_FOOTPRINT);n.set(this.m_vertexBuffer.array),this.m_vertexBuffer=new o.InterleavedBuffer(n,t.VERTEX_BUFFER_STRIDE),this.m_vertexBuffer.setUsage(o.DynamicDrawUsage),this.m_positionAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,0),this.m_uvAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,4),this.m_colorAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,8),this.m_bgColorAttribute=new o.InterleavedBufferAttribute(this.m_vertexBuffer,4,12);var r=new Uint32Array(e*t.QUAD_INDEX_MEMORY_FOOTPRINT);r.set(this.m_indexBuffer.array),this.m_indexBuffer=new o.BufferAttribute(r,t.INDEX_BUFFER_STRIDE),this.m_indexBuffer.setUsage(o.DynamicDrawUsage),this.m_geometry.dispose(),this.m_geometry=new o.BufferGeometry,this.m_geometry.setAttribute("position",this.m_positionAttribute),this.m_geometry.setAttribute("uv",this.m_uvAttribute),this.m_geometry.setAttribute("color",this.m_colorAttribute),this.m_geometry.setAttribute("bgColor",this.m_bgColorAttribute),this.m_geometry.setIndex(this.m_indexBuffer),this.m_pickingDataArray.length=this.m_currentCapacity,this.scene.remove(this.m_bgMesh,this.m_mesh),this.m_mesh=new o.Mesh(this.m_geometry,this.m_mesh.material),this.m_bgMesh=new o.Mesh(this.m_geometry,this.m_bgMesh.material),this.m_mesh.renderOrder=Number.MAX_SAFE_INTEGER,this.m_bgMesh.renderOrder=Number.MAX_SAFE_INTEGER-1,this.m_mesh.frustumCulled=!1,this.m_bgMesh.frustumCulled=!1,this.scene.add(this.m_bgMesh,this.m_mesh)}}]),e}();t.TextGeometry=s},9499:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default,a=n(2205).default,o=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SdfTextMaterial=t.GlyphCopyMaterial=t.GlyphClearMaterial=void 0;var s=n(15739),u=n(34585);Object.assign(u.ShaderChunk,{sdf_attributes:"\n        attribute vec4 position;\n        attribute vec4 uv;\n        attribute vec4 color;\n        attribute vec4 bgColor;\n        ",sdf_varying:"\n        varying vec4 vColor;\n        varying float vWeight;\n        varying vec2 vUv;\n        varying float vRotation;\n        ",sdf_varying_computation:"\n        #if BG_TEXT\n        vColor = bgColor;\n        vWeight = uv.w;\n        #else\n        vColor = color;\n        vWeight = uv.z;\n        #endif\n        vUv = vec2(uv.xy);\n        vRotation = position.w;\n        ",sdf_frag_uniforms:"\n        uniform sampler2D sdfTexture;\n        uniform vec4 sdfParams;\n        ",sdf_sampling_functions:"\n        float median(float r, float g, float b) {\n            return max(min(r, g), min(max(r, g), b));\n        }\n\n        float getDistance(vec2 uvOffset) {\n            vec3 texSample = texture2D(sdfTexture, vUv.xy + uvOffset).rgb;\n            #if MSDF\n            return median(texSample.r, texSample.g, texSample.b);\n            #else\n            return texSample.r;\n            #endif\n        }\n\n        float getOpacity(vec2 uvOffset, float weight) {\n            vec2 uv = vUv + uvOffset;\n            vec2 rotatedUVs = abs(vec2(\n                cos(vRotation) * uv.x - sin(vRotation) * uv.y,\n                sin(vRotation) * uv.x + cos(vRotation) * uv.y));\n\n            float dx = dFdx(rotatedUVs.x) * sdfParams.x;\n            float dy = dFdy(rotatedUVs.y) * sdfParams.y;\n            float toPixels = sdfParams.w * inversesqrt( dx * dx + dy * dy );\n\n            float dist = getDistance(uvOffset) + min(weight, 0.5 - 1.0 / sdfParams.w) - 0.5;\n            return clamp(dist * toPixels + 0.5, 0.0, 1.0);\n        }\n        "});var l=function(e){a(n,e);var t=o(n);function n(e){i(this,n);var r=!0===(null===e||void 0===e?void 0:e.rendererCapabilities.isWebGL2),a=e?Object.assign(Object.assign({},e),{glslVersion:r?u.GLSL3:u.GLSL1,vertexShader:r&&e.vertexShader?s.convertVertexShaderToWebGL2(e.vertexShader):e.vertexShader,fragmentShader:r&&e.fragmentShader?s.convertFragmentShaderToWebGL2(e.fragmentShader):e.fragmentShader}):void 0;return a&&delete a.rendererCapabilities,t.call(this,a)}return r(n)}(u.RawShaderMaterial),c=function(e){a(n,e);var t=o(n);function n(e){i(this,n);var r=e?{name:"GlyphClearMaterial",vertexShader:"\n    attribute vec2 position;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    void main() {\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xy, 0.0, 1.0);\n    }",fragmentShader:"\n    precision highp float;\n    precision highp int;\n\n    void main() {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }",uniforms:{},depthTest:!1,depthWrite:!1,rendererCapabilities:e.rendererCapabilities}:void 0;return t.call(this,r)}return r(n)}(l);t.GlyphClearMaterial=c;var d=function(e){a(n,e);var t=o(n);function n(e){i(this,n);var r=e?{name:"GlyphCopyMaterial",vertexShader:"\n    attribute vec3 position;\n    attribute vec2 uv;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    varying vec3 vUv;\n\n    void main() {\n        vUv = vec3(uv.xy, position.z);\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xy, 0.0, 1.0);\n    }",fragmentShader:"\n    precision highp float;\n    precision highp int;\n\n    uniform float pageOffset;\n    uniform sampler2D page0;\n    uniform sampler2D page1;\n    uniform sampler2D page2;\n    uniform sampler2D page3;\n    uniform sampler2D page4;\n    uniform sampler2D page5;\n    uniform sampler2D page6;\n    uniform sampler2D page7;\n\n    varying vec3 vUv;\n\n    void main() {\n        vec4 texSample = vec4(0.0);\n        if (vUv.z < pageOffset || vUv.z > (pageOffset + 7.0)) discard;\n        else if (vUv.z < pageOffset + 1.0) texSample = texture2D(page0, vUv.xy);\n        else if (vUv.z < pageOffset + 2.0) texSample = texture2D(page1, vUv.xy);\n        else if (vUv.z < pageOffset + 3.0) texSample = texture2D(page2, vUv.xy);\n        else if (vUv.z < pageOffset + 4.0) texSample = texture2D(page3, vUv.xy);\n        else if (vUv.z < pageOffset + 5.0) texSample = texture2D(page4, vUv.xy);\n        else if (vUv.z < pageOffset + 6.0) texSample = texture2D(page5, vUv.xy);\n        else if (vUv.z < pageOffset + 7.0) texSample = texture2D(page6, vUv.xy);\n        else texSample = texture2D(page7, vUv.xy);\n\n        gl_FragColor = texSample;\n    }",uniforms:{pageOffset:new u.Uniform(0),page0:new u.Uniform(u.Texture.DEFAULT_IMAGE),page1:new u.Uniform(u.Texture.DEFAULT_IMAGE),page2:new u.Uniform(u.Texture.DEFAULT_IMAGE),page3:new u.Uniform(u.Texture.DEFAULT_IMAGE),page4:new u.Uniform(u.Texture.DEFAULT_IMAGE),page5:new u.Uniform(u.Texture.DEFAULT_IMAGE),page6:new u.Uniform(u.Texture.DEFAULT_IMAGE),page7:new u.Uniform(u.Texture.DEFAULT_IMAGE)},depthTest:!1,depthWrite:!1,rendererCapabilities:e.rendererCapabilities}:void 0;return t.call(this,r)}return r(n)}(l);t.GlyphCopyMaterial=d;var h=function(e){a(n,e);var t=o(n);function n(e){var r;i(this,n);var a=e?{name:"SdfTextMaterial",vertexShader:void 0!==e.vertexSource?e.vertexSource:"\n    #include <sdf_attributes>\n    #include <sdf_varying>\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    void main() {\n        #include <sdf_varying_computation>\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xyz, 1.0);\n    }",fragmentShader:void 0!==e.fragmentSource?e.fragmentSource:"\n    precision highp float;\n    precision highp int;\n\n    #include <sdf_varying>\n    #include <sdf_frag_uniforms>\n    #include <sdf_sampling_functions>\n\n    void main() {\n        vec4 color = vColor;\n        color.a *= getOpacity(vec2(0.0), vWeight);\n        if (color.a < 0.05) {\n            discard;\n        }\n        gl_FragColor = color;\n    }",uniforms:{sdfTexture:new u.Uniform(e.texture),sdfParams:new u.Uniform(new u.Vector4(e.textureSize.x,e.textureSize.y,e.size,e.distanceRange))},defines:{MSDF:e.isMsdf?1:0,BG_TEXT:e.isBackground?1:0},depthTest:!0,depthWrite:!1,side:u.DoubleSide,transparent:!0,rendererCapabilities:e.rendererCapabilities}:void 0;return(r=t.call(this,a)).extensions.derivatives=!0,r}return r(n)}(l);t.SdfTextMaterial=h},80549:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePlacementAndAlignment=t.TextLayoutStyle=t.TextRenderStyle=t.DefaultTextStyle=t.vPlacementFromAlignment=t.hPlacementFromAlignment=t.vAlignFromPlacement=t.hAlignFromPlacement=t.WrappingMode=t.HorizontalPlacement=t.VerticalPlacement=t.HorizontalAlignment=t.VerticalAlignment=t.FontVariant=t.FontStyle=t.FontUnit=void 0;var a,o,s,u,l,c,d,h=n(34585);function f(e){return e}function p(e){return e}!function(e){e[e.Em=0]="Em",e[e.Pixel=1]="Pixel",e[e.Point=2]="Point",e[e.Percent=3]="Percent"}(a=t.FontUnit||(t.FontUnit={})),function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.BoldItalic=3]="BoldItalic"}(o=t.FontStyle||(t.FontStyle={})),function(e){e[e.Regular=0]="Regular",e[e.AllCaps=1]="AllCaps",e[e.SmallCaps=2]="SmallCaps"}(s=t.FontVariant||(t.FontVariant={})),function(e){e[e.Above=0]="Above",e[e.Center=-.5]="Center",e[e.Below=-1]="Below"}(u=t.VerticalAlignment||(t.VerticalAlignment={})),function(e){e[e.Left=0]="Left",e[e.Center=-.5]="Center",e[e.Right=-1]="Right"}(l=t.HorizontalAlignment||(t.HorizontalAlignment={})),function(e){e[e.Top=0]="Top",e[e.Center=-.5]="Center",e[e.Bottom=-1]="Bottom"}(t.VerticalPlacement||(t.VerticalPlacement={})),function(e){e[e.Left=-1]="Left",e[e.Center=-.5]="Center",e[e.Right=0]="Right"}(t.HorizontalPlacement||(t.HorizontalPlacement={})),function(e){e[e.None=0]="None",e[e.Character=1]="Character",e[e.Word=2]="Word"}(c=t.WrappingMode||(t.WrappingMode={})),t.hAlignFromPlacement=f,t.vAlignFromPlacement=p,t.hPlacementFromAlignment=function(e){return e},t.vPlacementFromAlignment=function(e){return e},function(e){e.DEFAULT_FONT_NAME="",e.DEFAULT_FONT_SIZE={unit:Object.freeze(a.Pixel),size:Object.freeze(16),backgroundSize:Object.freeze(0)},e.DEFAULT_FONT_STYLE=o.Regular,e.DEFAULT_FONT_VARIANT=s.Regular,e.DEFAULT_ROTATION=0,e.DEFAULT_COLOR=new h.Color(0),e.DEFAULT_OPACITY=1,e.DEFAULT_BACKGROUND_COLOR=new h.Color(0),e.DEFAULT_BACKGROUND_OPACITY=0,e.DEFAULT_TRACKING=0,e.DEFAULT_LEADING=0,e.DEFAULT_MAX_LINES=1/0,e.DEFAULT_LINE_WIDTH=1/0,e.DEFAULT_CANVAS_ROTATION=0,e.DEFAULT_LINE_ROTATION=0,e.DEFAULT_WRAPPING_MODE=c.Word,e.DEFAULT_VERTICAL_ALIGNMENT=u.Above,e.DEFAULT_HORIZONTAL_ALIGNMENT=l.Left,e.DEFAULT_PLACEMENTS=[]}(d=t.DefaultTextStyle||(t.DefaultTextStyle={}));var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.m_params={fontName:void 0!==t.fontName?t.fontName:d.DEFAULT_FONT_NAME,fontSize:void 0!==t.fontSize?Object.assign({},t.fontSize):{unit:d.DEFAULT_FONT_SIZE.unit,size:d.DEFAULT_FONT_SIZE.size,backgroundSize:d.DEFAULT_FONT_SIZE.backgroundSize},fontStyle:void 0!==t.fontStyle?t.fontStyle:d.DEFAULT_FONT_STYLE,fontVariant:void 0!==t.fontVariant?t.fontVariant:d.DEFAULT_FONT_VARIANT,rotation:void 0!==t.rotation?t.rotation:d.DEFAULT_ROTATION,color:void 0!==t.color?t.color.clone():d.DEFAULT_COLOR.clone(),opacity:void 0!==t.opacity?t.opacity:d.DEFAULT_OPACITY,backgroundColor:void 0!==t.backgroundColor?t.backgroundColor.clone():d.DEFAULT_BACKGROUND_COLOR.clone(),backgroundOpacity:void 0!==t.backgroundOpacity?t.backgroundOpacity:d.DEFAULT_BACKGROUND_OPACITY}}return i(e,[{key:"params",get:function(){return this.m_params},set:function(e){this.m_params=Object.assign(Object.assign({},this.m_params),e)}},{key:"fontName",get:function(){return this.m_params.fontName},set:function(e){this.m_params.fontName=e}},{key:"fontSize",get:function(){return this.m_params.fontSize},set:function(e){this.m_params.fontSize=Object.assign({},e)}},{key:"fontStyle",get:function(){return this.m_params.fontStyle},set:function(e){this.m_params.fontStyle=e}},{key:"fontVariant",get:function(){return this.m_params.fontVariant},set:function(e){this.m_params.fontVariant=e}},{key:"rotation",get:function(){return this.m_params.rotation},set:function(e){this.m_params.rotation=e}},{key:"color",get:function(){return this.m_params.color},set:function(e){this.m_params.color.copy(e)}},{key:"backgroundColor",get:function(){return this.m_params.backgroundColor},set:function(e){this.m_params.backgroundColor.copy(e)}},{key:"opacity",get:function(){return this.m_params.opacity},set:function(e){this.m_params.opacity=e}},{key:"backgroundOpacity",get:function(){return this.m_params.backgroundOpacity},set:function(e){this.m_params.backgroundOpacity=e}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(Object.assign(Object.assign({},this.m_params),t))}},{key:"copy",value:function(e){return this.m_params.fontName=e.fontName,this.m_params.fontSize=Object.assign({},e.fontSize),this.m_params.fontStyle=e.fontStyle,this.m_params.fontVariant=e.fontVariant,this.m_params.rotation=e.rotation,this.m_params.color.copy(e.color),this.m_params.backgroundColor.copy(e.backgroundColor),this.m_params.opacity=e.opacity,this.m_params.backgroundOpacity=e.backgroundOpacity,this}}]),e}();t.TextRenderStyle=m;var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=g(t.horizontalAlignment,t.verticalAlignment,t.placements),i=n.horizontalAlignment,a=n.verticalAlignment,o=n.placements;this.m_params={tracking:void 0!==t.tracking?t.tracking:d.DEFAULT_TRACKING,leading:void 0!==t.leading?t.leading:d.DEFAULT_LEADING,maxLines:void 0!==t.maxLines?t.maxLines:d.DEFAULT_MAX_LINES,lineWidth:void 0!==t.lineWidth?t.lineWidth:d.DEFAULT_LINE_WIDTH,canvasRotation:void 0!==t.canvasRotation?t.canvasRotation:d.DEFAULT_CANVAS_ROTATION,lineRotation:void 0!==t.lineRotation?t.lineRotation:d.DEFAULT_LINE_ROTATION,wrappingMode:void 0!==t.wrappingMode?t.wrappingMode:d.DEFAULT_WRAPPING_MODE,verticalAlignment:a,horizontalAlignment:i,placements:o}}return i(e,[{key:"params",get:function(){return this.m_params},set:function(e){this.m_params=Object.assign(Object.assign({},this.m_params),e)}},{key:"tracking",get:function(){return this.m_params.tracking},set:function(e){this.m_params.tracking=e}},{key:"leading",get:function(){return this.m_params.leading},set:function(e){this.m_params.leading=e}},{key:"maxLines",get:function(){return this.m_params.maxLines},set:function(e){this.m_params.maxLines=e}},{key:"lineWidth",get:function(){return this.m_params.lineWidth},set:function(e){this.m_params.lineWidth=e}},{key:"canvasRotation",get:function(){return this.m_params.canvasRotation},set:function(e){this.m_params.canvasRotation=e}},{key:"lineRotation",get:function(){return this.m_params.lineRotation},set:function(e){this.m_params.lineRotation=e}},{key:"wrappingMode",get:function(){return this.m_params.wrappingMode},set:function(e){this.m_params.wrappingMode=e}},{key:"verticalAlignment",get:function(){return this.m_params.verticalAlignment},set:function(e){this.m_params.verticalAlignment=e}},{key:"horizontalAlignment",get:function(){return this.m_params.horizontalAlignment},set:function(e){this.m_params.horizontalAlignment=e}},{key:"placements",get:function(){return this.m_params.placements},set:function(e){var t=g(this.horizontalAlignment,this.verticalAlignment,e),n=t.horizontalAlignment,r=t.verticalAlignment,i=t.placements;this.m_params.horizontalAlignment=n,this.m_params.verticalAlignment=r,this.m_params.placements=i}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(Object.assign(Object.assign({},this.m_params),t))}},{key:"copy",value:function(e){return this.params=Object.assign({},e.params),this}}]),e}();function g(e,t,n){var r,i=null!==(r=null===n||void 0===n?void 0:n.map((function(e){return Object.assign({},e)})))&&void 0!==r?r:d.DEFAULT_PLACEMENTS.map((function(e){return Object.assign({},e)}));return{horizontalAlignment:i.length>0?i[0].h:null!==e&&void 0!==e?e:d.DEFAULT_HORIZONTAL_ALIGNMENT,verticalAlignment:i.length>0?i[0].v:null!==t&&void 0!==t?t:d.DEFAULT_VERTICAL_ALIGNMENT,placements:i}}t.TextLayoutStyle=v,t.resolvePlacementAndAlignment=g},95529:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LineTypesetter=void 0;var a=n(34585),o=n(30903),s=n(80549),u=n(76729),l=n(67747),c=function(){function e(){r(this,e),this.m_tempTransform=new a.Matrix3,this.m_tempCorners=[new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3],this.m_tempLineDirection=l.UnicodeUtils.Direction.LTR,this.m_tempRunDirection=l.UnicodeUtils.Direction.LTR,this.m_tempPixelSize=1,this.m_tempPixelBgSize=1,this.m_tempScale=1,this.m_tempSmallCaps=!1}return i(e,[{key:"arrangeGlyphs",value:function(e){this.m_currentParams=e,this.m_tempLineDirection=u.TypesettingUtils.getDirection(this.m_currentParams.glyphs,0),this.m_tempRunDirection=this.m_tempLineDirection,this.m_tempPixelSize=u.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.size,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_tempScale=this.m_tempPixelSize/this.m_currentParams.fontCatalog.size,this.m_tempPixelBgSize=Math.min(u.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.backgroundSize,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_currentParams.fontCatalog.distanceRange*this.m_tempScale),this.m_tempSmallCaps=void 0!==this.m_currentParams.smallCapsArray,this.m_currentParams.position.y+=this.m_currentParams.textLayoutStyle.verticalAlignment*this.m_currentParams.glyphs[0].font.metrics.capHeight*this.m_tempScale;for(var t=void 0!==this.m_currentParams.globalBounds&&void 0===this.m_currentParams.vertexBuffer,n=this.m_currentParams.position.x,r=this.m_currentParams.glyphs[0].font.metrics.lineHeight+this.m_currentParams.textLayoutStyle.leading,i=0,a=0,o=0,c=0,d=0,h=0,f=0,p=0,m=!1,v=0;v<this.m_currentParams.glyphs.length&&!(p>this.m_currentParams.textLayoutStyle.maxLines-1);++v){var g=this.m_currentParams.glyphs[v];if(!g.isInCache&&!t)return!1;var y=l.UnicodeUtils.isNewLine(g.codePoint),x=l.UnicodeUtils.isWhiteSpace(g.codePoint);if(m||g.direction!==-this.m_tempLineDirection||(m=!0),l.UnicodeUtils.isPrintable(g.codePoint)&&(d+=(g.advanceX+this.m_currentParams.textLayoutStyle.tracking)*this.m_tempScale*(this.m_tempSmallCaps?u.TypesettingUtils.getSmallCapsScale(this.m_currentParams.glyphs,this.m_currentParams.smallCapsArray,v,this.m_currentParams.textRenderStyle.fontVariant):1)),v===i&&(c=d,h=d,f=d),y||this.m_currentParams.textLayoutStyle.wrappingMode===s.WrappingMode.Character&&d>this.m_currentParams.textLayoutStyle.lineWidth||this.m_currentParams.textLayoutStyle.wrappingMode===s.WrappingMode.Word&&d>this.m_currentParams.textLayoutStyle.lineWidth&&f!==c){if(this.m_currentParams.textLayoutStyle.wrappingMode!==s.WrappingMode.None){var _=a,b=h;this.m_currentParams.textLayoutStyle.wrappingMode===s.WrappingMode.Word&&f!==c&&(_=o,b=f),d=b,v=Math.min(y?i===v?_:v:_,this.m_currentParams.glyphs.length-1)}var w=this.m_tempLineDirection===l.UnicodeUtils.Direction.RTL&&m?1+this.m_currentParams.textLayoutStyle.horizontalAlignment:this.m_currentParams.textLayoutStyle.horizontalAlignment;if(this.m_currentParams.position.x=this.m_currentParams.position.x+d*w,!this.placeLine(i,v,this.m_tempLineDirection,m))return!1;for(this.m_currentParams.position.y-=r*this.m_tempScale,this.m_currentParams.position.x=n;v!==i&&v+1<this.m_currentParams.glyphs.length&&l.UnicodeUtils.isWhiteSpace(this.m_currentParams.glyphs[v+1].codePoint);)++v;if((i=v+1)===this.m_currentParams.glyphs.length)break;y&&(this.m_tempLineDirection=u.TypesettingUtils.getDirection(this.m_currentParams.glyphs,i),this.m_tempRunDirection=this.m_tempLineDirection),c=0,d=0,a=i,h=0,o=i,f=0,m=!1,p++}else this.m_currentParams.textLayoutStyle.wrappingMode===s.WrappingMode.None||x||(a=v,h=d,this.m_currentParams.textLayoutStyle.wrappingMode===s.WrappingMode.Word&&v+1<this.m_currentParams.glyphs.length&&(l.UnicodeUtils.isWhiteSpace(this.m_currentParams.glyphs[v+1].codePoint)||l.UnicodeUtils.isNewLine(this.m_currentParams.glyphs[v+1].codePoint))&&(o=v,f=d))}if(p<=this.m_currentParams.textLayoutStyle.maxLines-1&&i<=this.m_currentParams.glyphs.length-1){var S=this.m_tempLineDirection===l.UnicodeUtils.Direction.RTL&&m?1+this.m_currentParams.textLayoutStyle.horizontalAlignment:this.m_currentParams.textLayoutStyle.horizontalAlignment;if(this.m_currentParams.position.setX(this.m_currentParams.position.x+d*S),!this.placeLine(i,this.m_currentParams.glyphs.length-1,this.m_tempLineDirection,m))return!1}return!0}},{key:"placeLine",value:function(e,t,n,r){if(!r)return this.placeRun(e,t,n);for(var i=this.m_currentParams.glyphs,a=this.m_currentParams.smallCapsArray,o=this.m_currentParams.textRenderStyle,s=this.m_currentParams.textLayoutStyle,c=this.m_currentParams.position,d=n===l.UnicodeUtils.Direction.RTL,h=c.x,f=0,p=e,m=e;m<=t;++m){var v=i[m];if(v.direction===-this.m_tempRunDirection){if(d&&(c.x=h+f),!this.placeRun(p,m-1,this.m_tempRunDirection))return!1;d||(c.x=h+f),p=m,this.m_tempRunDirection*=-1}else if(v.direction===l.UnicodeUtils.Direction.Neutral&&this.m_tempRunDirection===-n){for(var g=m;g+1<i.length&&1!==Math.abs(i[g].direction);)++g;if(i[g].direction!==this.m_tempRunDirection){if(d&&(c.x=h+f),!this.placeRun(p,m-1,this.m_tempRunDirection))return!1;d||(c.x=h+f),p=m,this.m_tempRunDirection*=-1}}f+=(v.advanceX+s.tracking)*this.m_tempScale*(this.m_tempSmallCaps?u.TypesettingUtils.getSmallCapsScale(i,a,m,o.fontVariant):1)*n}if(p<=t){if(d&&(c.x=h+f),!this.placeRun(p,t,this.m_tempRunDirection))return!1;d||(c.x=h+f)}return!0}},{key:"placeRun",value:function(e,t,n){for(var r=this.m_currentParams.glyphs,i=this.m_currentParams.smallCapsArray,a=this.m_currentParams.fontCatalog,c=this.m_currentParams.textRenderStyle,d=this.m_currentParams.textLayoutStyle,h=this.m_currentParams.position,f=this.m_currentParams.geometry,p=this.m_currentParams.globalBounds,m=this.m_currentParams.individualBounds,v=this.m_currentParams.vertexBuffer,g=n===l.UnicodeUtils.Direction.LTR?e:t,y=n===l.UnicodeUtils.Direction.LTR?t:e,x=g;n===l.UnicodeUtils.Direction.RTL?x>=y:x<=y;x+=n){var _=r[x];if(l.UnicodeUtils.isPrintable(_.codePoint))if(e===t||0===x||n!==l.UnicodeUtils.Direction.RTL||_.direction!==l.UnicodeUtils.Direction.Weak){var b=_.font,w=b.metrics,S=c.fontStyle,M=S===s.FontStyle.Bold&&void 0===b.bold||S===s.FontStyle.BoldItalic&&void 0===b.bold&&void 0===b.boldItalic,E=S===s.FontStyle.Italic&&void 0===b.italic||S===s.FontStyle.BoldItalic&&void 0===b.italic&&void 0===b.boldItalic,T=!!this.m_tempSmallCaps&&(i[x]&&c.fontVariant===s.FontVariant.SmallCaps),k=T?w.xHeight/w.capHeight:1,C=this.m_tempScale*k,A=((M?.02:0)+(T?.01:0))*(a.size/a.distanceRange),P=.5*this.m_tempPixelBgSize/(a.distanceRange*Math.max(C,1)),O=l.UnicodeUtils.isRtlMirrored(_.codePoint)&&n===l.UnicodeUtils.Direction.RTL,L=w.lineHeight-w.base-.5*w.distanceRange;u.TypesettingUtils.computeGlyphTransform(this.m_tempTransform,h,C,d.canvasRotation,c.rotation);for(var R=0;R<4;++R){var D=_.positions[R],I=E&&R>1?u.TypesettingUtils.OBLIQUE_OFFSET*w.size:0;this.m_tempCorners[R].set(D.x+I,D.y-L,D.z),this.m_tempCorners[R].applyMatrix3(this.m_tempTransform)}if(void 0===p&&void 0===v){if(!f.add(_,this.m_tempCorners,A,A+P,O,c))return!1}else void 0!==p&&u.TypesettingUtils.updateBounds(this.m_tempCorners,p,m),void 0!==v&&f.addToBuffer(v,x*o.QUAD_VERTEX_MEMORY_FOOTPRINT,_,this.m_tempCorners,A,A+P,O,c);h.set(h.x+(_.advanceX+d.tracking)*C*Math.cos(d.lineRotation),h.y+(_.advanceX+d.tracking)*C*Math.sin(d.lineRotation),h.z)}else{for(var F=x,N=r[F-1];F!==e&&(N.direction===l.UnicodeUtils.Direction.Weak||N.direction===l.UnicodeUtils.Direction.Neutral&&!l.UnicodeUtils.isWhiteSpace(N.codePoint));)N=r[--F-1];this.placeRun(Math.max(F,e),x,l.UnicodeUtils.Direction.LTR),x=F}}return!0}}]),e}();t.LineTypesetter=c},64584:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PathTypesetter=void 0;var a=n(34585),o=n(30903),s=n(80549),u=n(76729),l=n(67747),c=function(){function e(){r(this,e),this.m_tempTransform=new a.Matrix3,this.m_tempCorners=[new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3],this.m_tempLineDirection=l.UnicodeUtils.Direction.LTR,this.m_tempRunDirection=l.UnicodeUtils.Direction.LTR,this.m_tempPixelSize=1,this.m_tempPixelBgSize=1,this.m_tempScale=1,this.m_tempSmallCaps=!1,this.m_tempPathPosition=new a.Vector3,this.m_tempPathLength=0,this.m_tempPathOffset=0}return i(e,[{key:"arrangeGlyphs",value:function(e){this.m_currentParams=e,this.m_tempLineDirection=u.TypesettingUtils.getDirection(this.m_currentParams.glyphs,0),this.m_tempRunDirection=this.m_tempLineDirection,this.m_tempPixelSize=u.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.size,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_tempScale=this.m_tempPixelSize/this.m_currentParams.fontCatalog.size,this.m_tempPixelBgSize=Math.min(u.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.backgroundSize,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_currentParams.fontCatalog.distanceRange*this.m_tempScale),this.m_tempSmallCaps=void 0!==this.m_currentParams.smallCapsArray,this.m_tempPathLength=this.m_currentParams.path.getLength(),this.m_tempPathOffset=0;for(var t=void 0!==this.m_currentParams.globalBounds&&void 0===this.m_currentParams.vertexBuffer,n=!1,r=0,i=0;i<this.m_currentParams.glyphs.length;++i){var a=this.m_currentParams.glyphs[i];if(!a.isInCache&&!t)return!1;l.UnicodeUtils.isPrintable(a.codePoint)&&(n||a.direction!==-this.m_tempLineDirection||(n=!0),r+=(a.advanceX+this.m_currentParams.textLayoutStyle.tracking)*this.m_tempScale*(this.m_tempSmallCaps?u.TypesettingUtils.getSmallCapsScale(this.m_currentParams.glyphs,this.m_currentParams.smallCapsArray,i,this.m_currentParams.textRenderStyle.fontVariant):1))}return this.m_tempPathOffset=Math.min(Math.max(-this.m_currentParams.textLayoutStyle.horizontalAlignment+this.m_currentParams.textLayoutStyle.horizontalAlignment*r/this.m_tempPathLength,0),1),this.placeLine(this.m_tempLineDirection,n)}},{key:"placeLine",value:function(e,t){if(!t)return this.placeRun(0,this.m_currentParams.glyphs.length-1,e);for(var n=this.m_currentParams.glyphs,r=0,i=r;i<n.length;++i){var a=n[i];if(a.direction===-this.m_tempRunDirection){if(!this.placeRun(r,i-1,this.m_tempRunDirection))return!1;r=i,this.m_tempRunDirection*=-1}else if(a.direction===l.UnicodeUtils.Direction.Neutral&&this.m_tempRunDirection===-e){for(var o=i;o+1<n.length&&1!==Math.abs(n[o].direction);)++o;if(n[o].direction!==this.m_tempRunDirection){if(!this.placeRun(r,i-1,this.m_tempRunDirection))return!1;r=i,this.m_tempRunDirection*=-1}}}return!(r<n.length&&!this.placeRun(r,n.length-1,this.m_tempRunDirection))}},{key:"placeRun",value:function(e,t,n){for(var r=this.m_currentParams.glyphs,i=this.m_currentParams.smallCapsArray,c=this.m_currentParams.fontCatalog,d=this.m_currentParams.textRenderStyle,h=this.m_currentParams.textLayoutStyle,f=this.m_currentParams.position,p=this.m_currentParams.geometry,m=this.m_currentParams.globalBounds,v=this.m_currentParams.individualBounds,g=this.m_currentParams.vertexBuffer,y=this.m_currentParams.path,x=d.rotation,_=h.verticalAlignment*r[0].font.metrics.capHeight*this.m_tempScale,b=n===l.UnicodeUtils.Direction.LTR?e:t,w=n===l.UnicodeUtils.Direction.LTR?t:e,S=b;n===l.UnicodeUtils.Direction.RTL?S>=w:S<=w;S+=n){var M=r[S];if(l.UnicodeUtils.isPrintable(M.codePoint))if(e===t||0===S||n!==l.UnicodeUtils.Direction.RTL||M.direction!==l.UnicodeUtils.Direction.Weak){var E=M.font,T=E.metrics,k=d.fontStyle,C=k===s.FontStyle.Bold&&void 0===E.bold||k===s.FontStyle.BoldItalic&&void 0===E.bold&&void 0===E.boldItalic,A=k===s.FontStyle.Italic&&void 0===E.italic||k===s.FontStyle.BoldItalic&&void 0===E.italic&&void 0===E.boldItalic,P=!!this.m_tempSmallCaps&&(i[S]&&d.fontVariant===s.FontVariant.SmallCaps),O=P?T.xHeight/T.capHeight:1,L=this.m_tempScale*O,R=((C?.02:0)+(P?.01:0))*(c.size/c.distanceRange),D=.5*this.m_tempPixelBgSize/(c.distanceRange*Math.max(L,1)),I=l.UnicodeUtils.isRtlMirrored(M.codePoint)&&n===l.UnicodeUtils.Direction.RTL,F=T.lineHeight-T.base-.5*T.distanceRange,N=y.getPoint(this.m_tempPathOffset);if(null===N)return this.m_currentParams.pathOverflow;var j=y.getTangent(this.m_tempPathOffset),z=new a.Vector2(-j.y,j.x).multiplyScalar(_),U=Math.atan2(j.y,j.x);this.m_tempPathPosition.set(z.x+N.x,z.y+N.y,f.z),d.rotation=x+U,u.TypesettingUtils.computeGlyphTransform(this.m_tempTransform,this.m_tempPathPosition,L,0,d.rotation);for(var B=0;B<4;++B){var V=M.positions[B],G=A&&B>1?u.TypesettingUtils.OBLIQUE_OFFSET*T.size:0;this.m_tempCorners[B].set(V.x+G,V.y-F,V.z),this.m_tempCorners[B].applyMatrix3(this.m_tempTransform),this.m_tempCorners[B].x-=f.x,this.m_tempCorners[B].y-=f.y}if(void 0===m&&void 0===g){if(!p.add(M,this.m_tempCorners,R,R+D,I,d))return!1}else void 0!==m&&u.TypesettingUtils.updateBounds(this.m_tempCorners,m,v),void 0!==g&&p.addToBuffer(g,S*o.QUAD_VERTEX_MEMORY_FOOTPRINT,M,this.m_tempCorners,R,R+D,I,d);d.rotation=x,this.m_tempPathOffset+=(M.advanceX+h.tracking)*L/this.m_tempPathLength}else{for(var H=S,Z=r[H-1];H!==e&&(Z.direction===l.UnicodeUtils.Direction.Weak||Z.direction===l.UnicodeUtils.Direction.Neutral&&!l.UnicodeUtils.isWhiteSpace(Z.codePoint));)Z=r[--H-1];this.placeRun(Math.max(H,e),S,l.UnicodeUtils.Direction.LTR),S=H}}return!0}}]),e}();t.PathTypesetter=c},59616:function(e,t,n){"use strict";var r,i,a=n(43269).default,o=n(34575).default,s=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ContextualArabicConverter=void 0,function(e){e[e.Initial=0]="Initial",e[e.Medial=1]="Medial",e[e.Final=2]="Final"}(r||(r={})),function(e){e[e.Isolated=0]="Isolated",e[e.Connected=1]="Connected"}(i||(i={}));var u=function(){function e(){o(this,e),this.m_singleCharactersMap=new Map,this.m_combinedCharactersMap=new Map,this.m_singleCharactersMap.set(1569,[void 0,void 0,void 0]),this.m_singleCharactersMap.set(1570,[void 0,void 0,65154]),this.m_singleCharactersMap.set(1571,[void 0,void 0,65156]),this.m_singleCharactersMap.set(1572,[void 0,void 0,65158]),this.m_singleCharactersMap.set(1573,[void 0,void 0,65160]),this.m_singleCharactersMap.set(1574,[65163,65164,65162]),this.m_singleCharactersMap.set(1575,[void 0,void 0,65166]),this.m_singleCharactersMap.set(1576,[65169,65170,65168]),this.m_singleCharactersMap.set(1577,[void 0,void 0,65172]),this.m_singleCharactersMap.set(1578,[65175,65176,65174]),this.m_singleCharactersMap.set(1579,[65179,65180,65178]),this.m_singleCharactersMap.set(1580,[65183,65184,65182]),this.m_singleCharactersMap.set(1581,[65187,65188,65186]),this.m_singleCharactersMap.set(1582,[65191,65192,65190]),this.m_singleCharactersMap.set(1583,[void 0,void 0,65194]),this.m_singleCharactersMap.set(1584,[void 0,void 0,65196]),this.m_singleCharactersMap.set(1585,[void 0,void 0,65198]),this.m_singleCharactersMap.set(1586,[void 0,void 0,65200]),this.m_singleCharactersMap.set(1587,[65203,65204,65202]),this.m_singleCharactersMap.set(1588,[65207,65208,65206]),this.m_singleCharactersMap.set(1589,[65211,65212,65210]),this.m_singleCharactersMap.set(1590,[65215,65216,65214]),this.m_singleCharactersMap.set(1591,[65219,65220,65218]),this.m_singleCharactersMap.set(1592,[65223,65224,65222]),this.m_singleCharactersMap.set(1593,[65227,65228,65226]),this.m_singleCharactersMap.set(1594,[65231,65232,65230]),this.m_singleCharactersMap.set(1600,[1600,1600,1600]),this.m_singleCharactersMap.set(1601,[65235,65236,65234]),this.m_singleCharactersMap.set(1602,[65239,65240,65238]),this.m_singleCharactersMap.set(1603,[65243,65244,65242]),this.m_singleCharactersMap.set(1604,[65247,65248,65246]),this.m_singleCharactersMap.set(1605,[65251,65252,65250]),this.m_singleCharactersMap.set(1606,[65255,65256,65254]),this.m_singleCharactersMap.set(1607,[65259,65260,65258]),this.m_singleCharactersMap.set(1608,[void 0,void 0,65262]),this.m_singleCharactersMap.set(1609,[void 0,void 0,65264]),this.m_singleCharactersMap.set(1610,[65267,65268,65266]),this.m_singleCharactersMap.set(1662,[64344,64345,64343]),this.m_singleCharactersMap.set(1740,[64510,64511,64509]),this.m_singleCharactersMap.set(1670,[64380,64381,64379]),this.m_singleCharactersMap.set(1705,[64400,64401,64399]),this.m_singleCharactersMap.set(1711,[64404,64405,64403]),this.m_singleCharactersMap.set(1688,[void 0,void 0,64395]),this.m_combinedCharactersMap.set(1604,new Map),this.m_combinedCharactersMap.get(1604).set(1570,[65269,65270]),this.m_combinedCharactersMap.get(1604).set(1571,[65271,65272]),this.m_combinedCharactersMap.get(1604).set(1573,[65273,65274]),this.m_combinedCharactersMap.get(1604).set(1575,[65275,65276]),this.m_neutralCharacters=[1552,1554,1555,1556,1557,1611,1612,1613,1614,1615,1616,1617,1618,1619,1620,1621,1622,1623,1624,1648,1750,1751,1752,1753,1754,1755,1756,1759,1760,1761,1762,1763,1764,1767,1768,1770,1771,1772,1773]}return s(e,[{key:"convert",value:function(e){for(var t="",n=0;n<e.length;++n){var a=e.charCodeAt(n);if(this.isArabicCharacter(a)){for(var o=n-1;o>=0&&this.isNeutral(e.charCodeAt(o));--o);var s=o>=0?e.charCodeAt(o):void 0;if(void 0!==s){var u=this.getCharacterMap(s);(void 0===u||void 0===u[r.Initial]&&void 0===u[r.Medial])&&(s=void 0)}for(var l=n+1;l<e.length&&this.isNeutral(e.charCodeAt(l));++l);var c=l<e.length?e.charCodeAt(l):void 0;if(void 0!==c){var d=this.getCharacterMap(c);(void 0===d||void 0===d[r.Medial]&&void 0===d[r.Final])&&(c=void 0)}if(1604===a&&void 0!==c&&(1570===c||1571===c||1573===c||1575===c)){var h=this.getCombinedCharacterMap(a,c);t+=void 0!==s?String.fromCharCode(h[i.Connected]):String.fromCharCode(h[i.Isolated]),++n;continue}var f=this.getCharacterMap(a);void 0!==s&&void 0!==c&&void 0!==f[r.Medial]?t+=String.fromCharCode(f[r.Medial]):void 0!==s&&void 0!==f[r.Final]?t+=String.fromCharCode(f[r.Final]):void 0!==c&&void 0!==f[r.Initial]?t+=String.fromCharCode(f[r.Initial]):t+=String.fromCharCode(a)}else t+=String.fromCharCode(a)}return t}},{key:"isArabicCharacter",value:function(e){return this.m_singleCharactersMap.has(e)}},{key:"getCharacterMap",value:function(e){return this.m_singleCharactersMap.get(e)}},{key:"getCombinedCharacterMap",value:function(e,t){var n=this.m_combinedCharactersMap.get(e);if(void 0!==n)return n.get(t)}},{key:"isNeutral",value:function(e){var t,n=a(this.m_neutralCharacters);try{for(n.s();!(t=n.n()).done;){if(t.value===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}}],[{key:"instance",get:function(){return void 0===this.m_instance&&(this.m_instance=new e),this.m_instance}}]),e}();t.ContextualArabicConverter=u},11153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSdfTextMaterial=void 0;var r=n(9499);t.createSdfTextMaterial=function(e){return new r.SdfTextMaterial({texture:e.fontCatalog.texture,textureSize:e.fontCatalog.textureSize,size:e.fontCatalog.size,distanceRange:e.fontCatalog.distanceRange,isMsdf:"msdf"===e.fontCatalog.type,isBackground:!0===e.isBackground,vertexSource:e.vertexSource,fragmentSource:e.fragmentSource,rendererCapabilities:e.rendererCapabilities})}},76729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypesettingUtils=void 0;var r=n(34585),i=n(80549),a=n(67747);!function(e){e.EM_TO_PX=16,e.PT_TO_PX=1.25,e.OBLIQUE_ANGLE=.174533,e.OBLIQUE_OFFSET=Math.tan(e.OBLIQUE_ANGLE),e.getPixelSize=function(t,n,r){var a=t;switch(n){case i.FontUnit.Em:a*=e.EM_TO_PX;break;case i.FontUnit.Point:a*=e.PT_TO_PX;break;case i.FontUnit.Percent:a*=.01*r}return a},e.getSmallCapsScale=function(e,t,n,r){return t[n]&&r===i.FontVariant.SmallCaps?e[n].font.metrics.xHeight/e[n].font.metrics.capHeight:1},e.getDirection=function(e,t){for(var n=a.UnicodeUtils.Direction.LTR,r=t;e[r].direction!==a.UnicodeUtils.Direction.LTR&&e[r].direction!==a.UnicodeUtils.Direction.RTL&&r<e.length-1;)++r;return 1===Math.abs(e[r].direction)&&(n=e[r].direction),n},e.computeGlyphTransform=function(e,t,n,r,i){var a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),u=Math.sin(i);e.set(n*s,n*-u,a*t.x-o*t.y,n*u,n*s,o*t.x+a*t.y,0,0,1)},e.updateBounds=function(e,t,n){var i=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),a=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),o=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),s=Math.max(e[0].y,e[1].y,e[2].y,e[3].y);void 0!==n&&(void 0!==n.array[n.offset]?(n.array[n.offset].min.set(i,o),n.array[n.offset].max.set(a,s)):n.array.push(new r.Box2(new r.Vector2(i,o),new r.Vector2(a,s))),++n.offset),t.min.set(Math.min(t.min.x,i),Math.min(t.min.y,o)),t.max.set(Math.max(t.max.x,a),Math.max(t.max.y,s))}}(t.TypesettingUtils||(t.TypesettingUtils={}))},67747:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeUtils=void 0,function(e){var t;e.whiteSpaceRanges=[[9,9],[32,32],[5760,5760],[8192,8198],[8200,8202],[8287,12288],[6158,6158],[8203,8205]],e.isWhiteSpace=function(t){var n,i=r(e.whiteSpaceRanges);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t>=a[0]&&t<=a[1])return!0}}catch(o){i.e(o)}finally{i.f()}return!1},e.newLineRanges=[[10,13],[133,133],[8232,8233]],e.isNewLine=function(t){var n,i=r(e.newLineRanges);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t>=a[0]&&t<=a[1])return!0}}catch(o){i.e(o)}finally{i.f()}return!1},e.nonPrintableRanges=[[0,31],[127,159]],e.isPrintable=function(t){var n,i=r(e.nonPrintableRanges);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t>=a[0]&&t<=a[1])return!1}}catch(o){i.e(o)}finally{i.f()}return!0},function(e){e[e.Neutral=0]="Neutral",e[e.Weak=.5]="Weak",e[e.LTR=1]="LTR",e[e.RTL=-1]="RTL"}(t=e.Direction||(e.Direction={})),e.rtlBlocks=["Hebrew","Alphabetic Presentation Forms","Arabic","Arabic Supplement","Arabic Extended-A","Arabic Presentation Forms-A","Arabic Presentation Forms-B","Arabic Mathematical Alphabetic Symbols","Indic Siyaq Numbers","Rumi Numeral Symbols","Syriac","Syriac Supplement","Samaritan","Mandaic","Thaana","Mende Kikakui","NKo","Adlam","Hanifi Rohingya"],e.neutralBidirectionalRanges=[[32,47],[58,64],[91,96],[123,126]],e.weakBidirectionalRanges=[[48,57],[1632,1641],[1776,1785]],e.getDirection=function(n,i){var a,o=r(e.weakBidirectionalRanges);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(n>=s[0]&&n<=s[1])return t.Weak}}catch(d){o.e(d)}finally{o.f()}var u,l=r(e.neutralBidirectionalRanges);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(n>=c[0]&&n<=c[1])return t.Neutral}}catch(d){l.e(d)}finally{l.f()}return void 0!==e.rtlBlocks.find((function(e){return e===i}))?t.RTL:t.LTR},e.rtlMirroredCodePoints=[40,41,60,62,91,93,123,125],e.isRtlMirrored=function(t){return void 0!==e.rtlMirroredCodePoints.find((function(e){return e===t}))}}(t.UnicodeUtils||(t.UnicodeUtils={}))},99383:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67014),t)},8237:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=void 0;var a=function(){function e(t){var n=this;r(this,e),this.executor=t,this.promise=new Promise((function(e,t){n.resolveFunc=e,n.rejectFunc=t}))}return i(e,[{key:"exec",value:function(){var e=this;this.executor().then((function(t){return e.resolveFunc(t)})).catch((function(t){return e.rejectFunc(t)}))}}]),e}();t.DeferredPromise=a},67014:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TransferManager=void 0,n(89064);var s=n(8237),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fetch,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;a(this,e),this.fetchFunction=t,this.maxRetries=n,this.activeDownloadCount=0,this.downloadQueue=new Array,this.activeDownloads=new Map}return o(e,[{key:"downloadJson",value:function(e,t){return this.downloadAs((function(e){return e.json()}),e,t)}},{key:"downloadArrayBuffer",value:function(e,t){return this.download(e,t).then((function(e){return e.arrayBuffer()}))}},{key:"download",value:function(t,n){var r=this;if(this.activeDownloadCount>=e.maxParallelDownloads){var i=new s.DeferredPromise((function(){return r.doDownload(t,n)}));return this.downloadQueue.push(i),i.promise}return this.doDownload(t,n)}},{key:"doDownload",value:function(){var t=i(r.mark((function t(n,i){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,++this.activeDownloadCount,t.next=4,e.fetchRepeatedly(this.fetchFunction,0,this.maxRetries,n,i);case 4:return a=t.sent,this.onDownloadDone(),t.abrupt("return",a);case 9:throw t.prev=9,t.t0=t.catch(0),this.onDownloadDone(),t.t0;case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"onDownloadDone",value:function(){--this.activeDownloadCount,this.execDeferredDownload()}},{key:"execDeferredDownload",value:function(){var e=this.downloadQueue.pop();void 0!==e&&e.exec()}},{key:"downloadAs",value:function(e,t,n){var r=this,i=t,a=this.activeDownloads.get(i);if(void 0!==a)return Promise.resolve(a);var o=this.download(t,n).then((function(t){if(r.activeDownloads.delete(i),t.ok)return e(t);throw new Error(JSON.stringify(t))})).catch((function(e){throw r.activeDownloads.delete(i),e}));return this.activeDownloads.set(i,o),o}}],[{key:"instance",value:function(){return e.defaultInstance}},{key:"fetchRepeatedly",value:function(){var t=i(r.mark((function t(n,i,a,o,s){var u,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(i<a)){t.next=17;break}return t.next=4,n(o,s);case 4:if(200!==(u=t.sent).status&&204!==u.status){t.next=9;break}return t.abrupt("return",u);case 9:if(!(u.status>=400&&u.status<500)){t.next=15;break}return i=a,t.next=13,u.text();case 13:throw l=t.sent,new Error(l);case 15:t.next=18;break;case 17:throw new Error("Max number of retries reached");case 18:t.next=24;break;case 20:if(t.prev=20,t.t0=t.catch(0),!(t.t0.hasOwnProperty("isCancelled")||"AbortError"===t.t0.name||i>=a)){t.next=24;break}throw t.t0;case 24:return t.next=26,e.waitFor(e.retryTimeout*i).then((function(){return e.fetchRepeatedly(n,i+1,a,o,s)}));case 26:return t.abrupt("return",t.sent);case 27:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e,n,r,i,a){return t.apply(this,arguments)}}()},{key:"waitFor",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),e}();t.TransferManager=u,u.retryTimeout=500,u.maxParallelDownloads=16,u.defaultInstance=new u},90087:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67705),t),i(n(31101),t),i(n(85004),t),i(n(69087),t),i(n(64085),t),i(n(48524),t),i(n(28972),t),i(n(45606),t),i(n(31062),t),i(n(21180),t),i(n(83204),t),i(n(7522),t),i(n(26295),t),i(n(2001),t),i(n(78326),t),i(n(84551),t),i(n(81413),t),i(n(85737),t),i(n(82869),t)},15739:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90087),t),i(n(25131),t)},85737:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45606:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},31062:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ContextLogger=void 0;var a=function(){function e(t,n){r(this,e),this.m_logger=t,this.headerMessage=n,this.context=[],this.m_headerLogged=!1,this.warn=this.createLogMethod("warn"),this.info=this.createLogMethod("info"),this.error=this.createLogMethod("error")}return i(e,[{key:"pushAttr",value:function(e){this.context.push("".concat(this.context.length>0?".":"").concat(e))}},{key:"pushIndex",value:function(e){this.context.push("[".concat(e,"]"))}},{key:"pop",value:function(){this.context.pop()}},{key:"createLogMethod",value:function(e){var t=this;return function(n){var r;t.m_headerLogged||(t.m_logger.info(t.headerMessage),t.m_headerLogged=!0);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(r=t.m_logger)[e].apply(r,["".concat(t.context.join(""),": ").concat(n)].concat(a))}}}]),e}();t.ContextLogger=a},67705:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DOMUtils=void 0,function(e){function t(e){return e.substring(0,2)}e.getBrowserLanguages=function(){if(void 0!==navigator.languages&&navigator.languages.length>0){var e,n=[],i=r(navigator.languages);try{for(i.s();!(e=i.n()).done;){var a=e.value;n.push(t(a))}}catch(o){i.e(o)}finally{i.f()}return n}if(void 0!==navigator.language)return[t(navigator.language)]}}(t.DOMUtils||(t.DOMUtils={}))},84551:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainCallbacks=void 0,t.chainCallbacks=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e&&e.apply(this,r),t.apply(this,r)}}},82869:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFragmentShaderToWebGL2=t.convertVertexShaderToWebGL2=void 0,t.convertVertexShaderToWebGL2=function(e){return["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+e},t.convertFragmentShaderToWebGL2=function(e){return["#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+e}},31101:function(e,t,n){"use strict";var r=n(63038).default,i=n(43269).default,a=n(34575).default,o=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GroupedPriorityList=t.PriorityListGroup=void 0;var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array;a(this,e),this.priority=t,this.elements=n}return o(e,[{key:"clone",value:function(){return new e(this.priority,this.elements.slice())}},{key:"remove",value:function(e){var t=this.elements.indexOf(e);return-1!==t&&(this.elements.splice(t,1),!0)}}]),e}();t.PriorityListGroup=s;var u=function(){function e(){a(this,e),this.groups=new Map}return o(e,[{key:"add",value:function(e){this.getGroup(e.priority).elements.push(e)}},{key:"remove",value:function(e){var t=this.findGroup(e.priority);return!(void 0===t||!t.remove(e))&&(0===t.elements.length&&this.groups.delete(t.priority),!0)}},{key:"clear",value:function(){this.groups.clear()}},{key:"merge",value:function(e){var t,n=i(e.groups);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=this.findGroup(r[1].priority);void 0!==a?a.elements=a.elements.concat(r[1].elements):this.groups.set(Math.floor(r[1].priority),r[1].clone())}}catch(o){n.e(o)}finally{n.f()}return this}},{key:"clone",value:function(){var t,n=new e,a=i(this.groups);try{for(a.s();!(t=a.n()).done;){var o=r(t.value,2),s=o[0],u=o[1];n.groups.set(s,u.clone())}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"forEach",value:function(e){var t,n=i(this.groups);try{for(n.s();!(t=n.n()).done;){t.value[1].elements.forEach(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"count",value:function(){var e,t=0,n=i(this.groups);try{for(n.s();!(e=n.n()).done;){t+=e.value[1].elements.length}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"findGroup",value:function(e){var t=Math.floor(e);return this.groups.get(t)}},{key:"getGroup",value:function(e){var t=this.findGroup(e);if(void 0===t){var n=Math.floor(e);t=new s(n),this.groups.set(t.priority,t)}return t}}]),e}();t.GroupedPriorityList=u},27738:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleChannel=void 0;var a=function(){function e(){r(this,e)}return i(e,[{key:"error",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,[e].concat(r))}},{key:"debug",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).debug.apply(t,[e].concat(r))}},{key:"info",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).info.apply(t,[e].concat(r))}},{key:"log",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).log.apply(t,[e].concat(r))}},{key:"trace",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).trace.apply(t,[e].concat(r))}},{key:"warn",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,[e].concat(r))}}]),e}();t.ConsoleChannel=a},2302:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6312:function(e,t,n){"use strict";var r=n(93913).default,i=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerOptions=t.LogLevel=void 0,function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Log=2]="Log",e[e.Info=3]="Info",e[e.Warn=4]="Warn",e[e.Error=5]="Error",e[e.None=6]="None"}(t.LogLevel||(t.LogLevel={}));var a=r((function e(){i(this,e)}));t.LoggerOptions=a},22612:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var a=n(6312),o=function(){function e(t,n,i){r(this,e),this.name=t,this.m_channel=n,this.enabled=!0,this.level=a.LogLevel.Trace,void 0!==i&&this.update(i)}return i(e,[{key:"error",value:function(e){if(this.enabled&&this.level<=a.LogLevel.Error){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.m_channel).error.apply(t,[this.prefix,e].concat(r))}}},{key:"debug",value:function(e){if(this.enabled&&this.level<=a.LogLevel.Debug){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.m_channel).debug.apply(t,[this.prefix,e].concat(r))}}},{key:"info",value:function(e){if(this.enabled&&this.level<=a.LogLevel.Info){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.m_channel).info.apply(t,[this.prefix,e].concat(r))}}},{key:"log",value:function(e){if(this.enabled&&this.level<=a.LogLevel.Log){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.m_channel).log.apply(t,[this.prefix,e].concat(r))}}},{key:"trace",value:function(e){if(this.enabled&&this.level<=a.LogLevel.Trace){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.m_channel).trace.apply(t,[this.prefix,e].concat(r))}}},{key:"warn",value:function(e){if(this.enabled&&this.level<=a.LogLevel.Warn){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.m_channel).warn.apply(t,[this.prefix,e].concat(r))}}},{key:"update",value:function(e){this.enabled=void 0===e.enabled?this.enabled:e.enabled,this.level=void 0===e.level?this.level:e.level}},{key:"prefix",get:function(){return this.name+":"}}]),e}();t.Logger=o},10623:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerManager=void 0;var a=n(51563),o=function(){function e(){r(this,e)}return i(e,null,[{key:"instance",get:function(){return this.m_instance||(this.m_instance=new a.LoggerManagerImpl)}}]),e}();t.LoggerManager=o},51563:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerManagerImpl=void 0;var o=n(27738),s=n(22612),u=n(19153),l=function(){function e(){i(this,e),this.m_loggers=[],this.channel="undefined"===typeof self||"undefined"!==typeof self.document?new o.ConsoleChannel:new u.WorkerChannel}return a(e,[{key:"getLoggerNames",value:function(){return this.m_loggers.map((function(e){return e.name}))}},{key:"getLogger",value:function(e){return this.m_loggers.find((function(t){return t.name===e}))}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0!==this.m_levelSetForAll&&(void 0===t.level||t.level<this.m_levelSetForAll)&&(t.level=this.m_levelSetForAll);var n=new s.Logger(e,this.channel,t);return this.m_loggers.push(n),n}},{key:"dispose",value:function(e){var t=this.m_loggers.indexOf(e);if(t<0)throw new Error('Cannot unregister "'.concat(e,'" : no such logger registered.'));this.m_loggers.splice(t,1)}},{key:"updateAll",value:function(e){var t,n=r(this.m_loggers);try{for(n.s();!(t=n.n()).done;){t.value.update(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"update",value:function(e,t){var n,i=r(this.m_loggers);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.name===e&&a.update(t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"enableAll",value:function(e){var t,n=r(this.m_loggers);try{for(n.s();!(t=n.n()).done;){t.value.enabled=e}}catch(i){n.e(i)}finally{n.f()}}},{key:"enable",value:function(e,t){this.update(e,{enabled:t})}},{key:"setLogLevelForAll",value:function(e){this.m_levelSetForAll=e;var t,n=r(this.m_loggers);try{for(n.s();!(t=n.n()).done;){t.value.level=e}}catch(i){n.e(i)}finally{n.f()}}},{key:"setLogLevel",value:function(e,t){this.update(e,{level:t})}},{key:"setChannel",value:function(e){this.channel=e}}]),e}();t.LoggerManagerImpl=l},24945:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MultiChannel=void 0;var o=function(){function e(){i(this,e),this.channels=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.channels=n}return a(e,[{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a,o=r(this.channels);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.error.apply(s,[e].concat(n))}}catch(u){o.e(u)}finally{o.f()}}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a,o=r(this.channels);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.debug.apply(s,[e].concat(n))}}catch(u){o.e(u)}finally{o.f()}}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a,o=r(this.channels);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.info.apply(s,[e].concat(n))}}catch(u){o.e(u)}finally{o.f()}}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a,o=r(this.channels);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.log.apply(s,[e].concat(n))}}catch(u){o.e(u)}finally{o.f()}}},{key:"trace",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a,o=r(this.channels);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.trace.apply(s,[e].concat(n))}}catch(u){o.e(u)}finally{o.f()}}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a,o=r(this.channels);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.warn.apply(s,[e].concat(n))}}catch(u){o.e(u)}finally{o.f()}}}]),e}();t.MultiChannel=o},19153:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerChannel=t.WORKERCHANNEL_MSG_TYPE=void 0;var a=n(6312);t.WORKERCHANNEL_MSG_TYPE="worker-channel-message";var o=function(){function e(){r(this,e)}return i(e,[{key:"error",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o={message:[e].concat(r),type:t.WORKERCHANNEL_MSG_TYPE,level:a.LogLevel.Error};self.postMessage(o)}},{key:"debug",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o={message:[e].concat(r),type:t.WORKERCHANNEL_MSG_TYPE,level:a.LogLevel.Debug};self.postMessage(o)}},{key:"info",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o={message:[e].concat(r),type:t.WORKERCHANNEL_MSG_TYPE,level:a.LogLevel.Info};self.postMessage(o)}},{key:"log",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o={message:[e].concat(r),type:t.WORKERCHANNEL_MSG_TYPE,level:a.LogLevel.Log};self.postMessage(o)}},{key:"trace",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o={message:[e].concat(r),type:t.WORKERCHANNEL_MSG_TYPE,level:a.LogLevel.Trace};self.postMessage(o)}},{key:"warn",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o={message:[e].concat(r),type:t.WORKERCHANNEL_MSG_TYPE,level:a.LogLevel.Warn};self.postMessage(o)}}]),e}();t.WorkerChannel=o},85004:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(27738),t),i(n(2302),t),i(n(6312),t),i(n(22612),t),i(n(10623),t),i(n(24945),t),i(n(19153),t)},69087:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Math2D=void 0,function(e){var t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,e),this.x=t,this.y=n,this.w=i,this.h=a}return i(e,[{key:"set",value:function(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}},{key:"copy",value:function(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}},{key:"contains",value:function(e,t){return this.x<=e&&this.x+this.w>=e&&this.y<=t&&this.y+this.h>=t}},{key:"containsBox",value:function(e){var t=e.x+e.w,n=e.y+e.h;return this.contains(e.x,e.y)&&this.contains(t,e.y)&&this.contains(e.x,n)&&this.contains(t,n)}},{key:"intersects",value:function(e){return this.x<=e.x+e.w&&this.x+this.w>=e.x&&this.y<=e.y+e.h&&this.y+this.h>=e.y}}]),e}();function n(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)}e.Box=t,e.distSquared=n,e.computeSquaredLineLength=function(e){for(var t=0,n=e.length-4,r=0;r<n;r+=3){var i=e[r+3]-e[r],a=e[r+4]-e[r+1];t+=i*i+a*a}return t},e.distToSegmentSquared=function(e,t,r,i,a,o){var s=n(r,i,a,o);if(0===s)return n(e,t,r,i);var u=((e-r)*(a-r)+(t-i)*(o-i))/s;return n(e,t,r+(u=Math.max(0,Math.min(1,u)))*(a-r),i+u*(o-i))},e.intersectLineAndCircle=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=1e-10,u=n-e,l=r-t,c=u*u+l*l,d=i*i,h=e*r-n*t,f=h-l*a+u*o,p=d*c-f*f;if(!(p<-s)){var m=f*l,v=-f*u;if(p<s)return{x1:a+m/c,y1:o+v/c};var g=Math.sqrt(p),y=l<0?-1:1,x=Math.abs(l),_=y*u*g,b=x*g;return{x1:a+(m+_)/c,y1:o+(v+b)/c,x2:a+(m-_)/c,y2:o+(v-b)/c}}},e.intersectLines=function(e,t,n,r,i,a,o,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{x:0,y:0},l=(e-n)*(a-s)-(t-r)*(i-o);if(0!==l){var c=((e*r-t*n)*(i-o)-(e-n)*(i*s-a*o))/l,d=((e*r-t*n)*(a-s)-(t-r)*(i*s-a*o))/l;return u.x=c,u.y=d,u}}}(t.Math2D||(t.Math2D={}))},64085:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0,function(e){function t(e,t,n){return e<t?t:e>n?n:e}e.clamp=t,e.smoothStep=function(e,n,r){return(r=t((r-e)/(n-e),0,1))*r*(3-2*r)},e.smootherStep=function(e,n,r){return(r=t((r-e)/(n-e),0,1))*r*r*(r*(6*r-15)+10)},e.map=function(e,t,n,r,i){return(e-t)*(i-r)/(n-t)+r},e.min2=function(e,t){var n;return void 0!==e&&(n=e),void 0!==t&&(n=void 0===n?t:Math.min(n,t)),n},e.max2=function(e,t){var n;return void 0!==e&&(n=e),void 0!==t&&(n=void 0===n?t:Math.max(n,t)),n},e.isClamped=function(e,t,n){return!(void 0!==t&&e<t)&&!(void 0!==n&&e>n)},e.easeInOutCubic=function(e,t,n){return e+(t-e)*(n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1)}}(t.MathUtils||(t.MathUtils={}))},48524:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixinsWithoutProperties=t.applyMixins=void 0,t.applyMixins=function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){e.prototype[n]=t.prototype[n]}))}))},t.applyMixinsWithoutProperties=function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t.prototype,n);void 0!==r&&void 0===r.get&&"constructor"!==n&&(e.prototype[n]=t.prototype[n])}))}))}},83204:function(e,t,n){"use strict";var r=n(43269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.pick=t.cloneDeep=void 0,t.cloneDeep=function(e){var t=new Map,n=function e(n){if(null===n)return null;if("object"===typeof n){var r=t.get(n);if(void 0!==r)return r;if(Array.isArray(n)){var i=[];t.set(n,i),i.length=n.length;for(var a=0;a<i.length;++a)i[a]=e(n[a]);return i}if(n instanceof Date){var o=new Date(n.getTime());return t.set(n,o),o}if(n instanceof RegExp){var s=new RegExp(n.source,n.flags);return t.set(n,s),s}if(n.constructor!==Object)throw new Error("cloneDeep doesn't support objects with custom prototypes");var u={};for(var l in t.set(n,u),n)n.hasOwnProperty(l)&&(u[l]=e(n[l]));return u}return n}(e);return t.clear(),n},t.pick=function(e,t){var n,i={},a=r(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;e.hasOwnProperty(o)&&(i[o]=e[o])}}catch(s){a.e(s)}finally{a.f()}return i}},7522:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOptionValue=void 0,t.getOptionValue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];if(void 0!==a&&null!==a)return a}}},21180:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceTimer=void 0;var a=function(){function e(){r(this,e)}return i(e,null,[{key:"now",value:function(){return e.nowFunc()}},{key:"getNowFunc",value:function(){return"undefined"!==typeof performance&&"undefined"!==typeof performance.now?function(){return performance.now()}:function(){return(new Date).getTime()}}}]),e}();t.PerformanceTimer=a,a.instance=new a,a.nowFunc=a.getNowFunc()},81413:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleBilinear=void 0,t.sampleBilinear=function(e,t,n,r,i){var a=t-1,o=n-1,s=r*a,u=Math.floor(s),l=i*o,c=Math.floor(l),d=c*t+u,h=u<a?d+1:d,f=c<o?d+t:d,p=u<a?f+1:f,m=e[d],v=e[h],g=e[f],y=e[p],x=Number.isInteger(s)?0:s-u,_=1-x,b=Number.isInteger(l)?0:l-c,w=1-b;return m*_*w+v*x*w+g*_*b+y*x*b}},26295:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TaskQueue=void 0;var a=function(){function e(t){var n,i=this;r(this,e),this.m_options=t,this.m_taskLists=new Map,null===(n=this.m_options.groups)||void 0===n||n.forEach((function(e){i.m_taskLists.set(e,[])})),this.m_options.prioSortFn&&(this.sort=this.m_options.prioSortFn)}return i(e,[{key:"update",value:function(e){var t=this;if(void 0===e)this.m_taskLists.forEach((function(e){t.updateTaskList(e)}));else{var n=this.getTaskList(e);n&&this.updateTaskList(n)}}},{key:"add",value:function(e){var t;if(this.m_taskLists.has(e.group)){var n=this.m_taskLists.get(e.group);if(!(null===n||void 0===n?void 0:n.includes(e)))return null===(t=this.m_taskLists.get(e.group))||void 0===t||t.push(e),!0}return!1}},{key:"remove",value:function(e){var t,n;if(this.m_taskLists.has(e.group)){var r=null===(t=this.m_taskLists.get(e.group))||void 0===t?void 0:t.indexOf(e);if(-1!==r)return null===(n=this.m_taskLists.get(e.group))||void 0===n||n.splice(r,1),!0}return!1}},{key:"numItemsLeft",value:function(e){var t,n,r=0;return void 0===e?this.m_taskLists.forEach((function(e){r+=e.length})):r+=null!==(n=null===(t=this.getTaskList(e))||void 0===t?void 0:t.length)&&void 0!==n?n:0,r}},{key:"processNext",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!this.getTaskList(e)||this.numItemsLeft(e)<=0)return!1;for(var r=0;r<n&&this.numItemsLeft(e)>0;r++){var i=this.pull(e,!0);void 0!==i&&(!t||(null===t||void 0===t?void 0:t(i))?i.execute():this.add(i))}return!0}},{key:"clear",value:function(){this.m_taskLists.clear()}},{key:"pull",value:function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getTaskList(e);return a&&(r=null===(t=this.getTaskList(e))||void 0===t?void 0:t.pop(),i&&r&&(null===(n=r.isExpired)||void 0===n?void 0:n.call(r)))?this.pull(e,i):r}},{key:"sort",value:function(e,t){return t.getPriority()-e.getPriority()}},{key:"getTaskList",value:function(e){return this.m_taskLists.get(e)}},{key:"updateTaskList",value:function(e){for(var t,n=0;n<e.length;n++){var r=e[n];(null===(t=null===r||void 0===r?void 0:r.isExpired)||void 0===t?void 0:t.call(r))&&(e.splice(n,1),n--)}e.sort(this.sort)}}]),e}();t.TaskQueue=a},2001:function(e,t,n){"use strict";var r=n(34575).default,i=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.composeUriResolvers=t.RelativeUriResolver=t.PrefixMapUriResolver=void 0;var a=n(78326),o=function(){function e(t){r(this,e),this.definitions=t}return i(e,[{key:"resolveUri",value:function(e){var t=this;return Object.keys(this.definitions).reduce((function(e,n){return n.endsWith("/")&&e.startsWith(n)?t.definitions[n]+e.substr(n.length):e===n?t.definitions[n]:e}),e)}}]),e}();t.PrefixMapUriResolver=o;var s=function(){function e(t){r(this,e),this.parentUri=t}return i(e,[{key:"resolveUri",value:function(e){return a.resolveReferenceUri(this.parentUri,e)}}]),e}();t.RelativeUriResolver=s,t.composeUriResolvers=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{resolveUri:function(e){return t.reduce((function(e,t){return void 0!==t?t.resolveUri(e):e}),e)}}}},25131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppBaseUrl=void 0;var r=n(78326);t.getAppBaseUrl=function(){return"undefined"===typeof window?"file://".concat(process.cwd(),"/"):r.baseUrl(window.location.href)}},78326:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlHostAndProtocol=t.getUrlOrigin=t.baseUrl=t.resolveReferenceUri=void 0,t.resolveReferenceUri=function(e,t){return n.test(t)?t:t.startsWith("/")?i(e)+t:(t.startsWith("./")&&(t=t.substr(2)),r(e)+t)};var n=new RegExp("^(((?:[a-z]+:)?//)|(file:/)|(data:))","i");function r(e){if(void 0===e)return"./";var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),-1!==(t=e.indexOf("?"))&&(e=e.slice(0,t)),-1===(t=e.lastIndexOf("/"))?"./":e.substring(0,t+1)}function i(e){if(void 0===e)return"";var t=a(e);return"file:"===t.protocol?"file://":t.host&&t.protocol?t.protocol+"//"+t.host:t.host?"//"+t.host:t.protocol?t.protocol+"//":""}function a(e){var t=new RegExp(/^(?:([a-z]+:))?\/\/([^\/]*)/,"i"),n=e.match(t);if(!n)throw new Error("getUrlHostAndProtocol: unable to parse URL '".concat(e,"'"));return{protocol:n[1],host:n[2]}}t.baseUrl=r,t.getUrlOrigin=i,t.getUrlHostAndProtocol=a},28972:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertExists=t.assert=void 0;t.assert=function(e,t){0},t.assertExists=function(e,t){return e}},91490:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(72766),t),i(n(42138),t),i(n(11586),t),i(n(3290),t),i(n(79717),t),i(n(59483),t)},59483:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GeoJsonDataProvider=void 0,n(89064);var l=n(26309),c=n(48991),d=n(36676),h=n(15739),f=n(11586),p=h.LoggerManager.instance.create("GeoJsonDataProvider"),m="invalidated",v=!1,g=function(e){s(n,e);var t=u(n);function n(e,r,i){var o,s;return a(this,n),(o=t.call(this)).name=e,o.input=r,o.m_registered=!1,o.m_tiler=null!==(s=null===i||void 0===i?void 0:i.tiler)&&void 0!==s?s:c.ConcurrentTilerFacade.getTiler(f.GEOJSON_TILER_SERVICE_TYPE,null===i||void 0===i?void 0:i.workerTilerUrl,null===i||void 0===i?void 0:i.workerConnectionTimeout),o}return o(n,[{key:"connect",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.m_tiler.connect();case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),l.WorkerServiceProtocol.isUnknownServiceError(e.t0)&&!v&&(p.info("Unable to start GeoJson tiler service in worker. Use  'OmvTilerService.start();' in decoder script."),v=!0),e.t0;case 9:return e.next=11,this.m_tiler.registerIndex(this.name,this.input);case 11:this.m_registered=!0;case 12:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateInput",value:function(e){this.input=e,this.m_tiler.updateIndex(this.name,this.input),this.dispatchEvent({type:m})}},{key:"ready",value:function(){return this.m_registered}},{key:"getTile",value:function(){var e=i(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.m_tiler.getTile(this.name,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDidInvalidate",value:function(e){var t=this;return this.addEventListener(m,e),function(){return t.removeEventListener(m,e)}}},{key:"dispose",value:function(){this.m_tiler.dispose()}}]),n}(d.DataProvider);t.GeoJsonDataProvider=g},72766:function(e,t,n){"use strict";var r=n(43269).default,i=n(34575).default,a=n(93913).default;Object.defineProperty(t,"__esModule",{value:!0}),t.OmvGenericFeatureModifier=t.ComposedDataFilter=t.OmvGenericFeatureFilter=t.OmvFeatureFilterDescriptionBuilder=void 0;var o=n(26309),s=n(11586),u=function(){function e(t){i(this,e),this.m_processLayersDefault=!0,this.m_processPointsDefault=!0,this.m_processLinesDefault=!0,this.m_processPolygonsDefault=!0,this.m_layersToProcess=new Array,this.m_layersToIgnore=new Array,this.m_pointsToProcess=new Array,this.m_ignoredPoints=new Array,this.m_linesToProcess=new Array,this.m_linesToIgnore=new Array,this.m_polygonsToProcess=new Array,this.m_polygonsToIgnore=new Array,this.m_kindsToProcess=[],this.m_kindsToIgnore=[],t&&(this.m_processLayersDefault=void 0===t.processLayersDefault||t.processLayersDefault,this.m_processPointsDefault=void 0===t.processPointsDefault||t.processPointsDefault,this.m_processLinesDefault=void 0===t.processLinesDefault||t.processLinesDefault,this.m_processPolygonsDefault=void 0===t.processPolygonsDefault||t.processPolygonsDefault)}return a(e,[{key:"processLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.OmvFilterString.StringMatch.Match,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.m_layersToProcess.push({name:{value:e,match:t},minLevel:n,maxLevel:r})}},{key:"ignoreLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.OmvFilterString.StringMatch.Match,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.m_layersToIgnore.push({name:{value:e,match:t},minLevel:n,maxLevel:r})}},{key:"processPoint",value:function(e){this.addItem(this.m_pointsToProcess,e)}},{key:"processPoints",value:function(e){this.addItems(this.m_pointsToProcess,e)}},{key:"ignorePoint",value:function(e){this.addItem(this.m_ignoredPoints,e)}},{key:"ignorePoints",value:function(e){this.addItems(this.m_ignoredPoints,e)}},{key:"processLine",value:function(e){this.addItem(this.m_linesToProcess,e)}},{key:"processLines",value:function(e){this.addItems(this.m_linesToProcess,e)}},{key:"ignoreLine",value:function(e){this.addItem(this.m_linesToIgnore,e)}},{key:"ignoreLines",value:function(e){this.addItems(this.m_linesToIgnore,e)}},{key:"processPolygon",value:function(e){this.addItem(this.m_polygonsToProcess,e)}},{key:"processPolygons",value:function(e){this.addItems(this.m_polygonsToProcess,e)}},{key:"ignorePolygon",value:function(e){this.addItem(this.m_polygonsToIgnore,e)}},{key:"ignorePolygons",value:function(e){this.addItems(this.m_polygonsToIgnore,e)}},{key:"processKinds",value:function(e){this.m_kindsToProcess=this.m_kindsToProcess.concat(e)}},{key:"ignoreKinds",value:function(e){this.m_kindsToIgnore=this.m_kindsToIgnore.concat(e)}},{key:"createDescription",value:function(){return{processLayersDefault:this.m_processLayersDefault,processPointsDefault:this.m_processPointsDefault,processLinesDefault:this.m_processLinesDefault,processPolygonsDefault:this.m_processPolygonsDefault,layersToProcess:this.m_layersToProcess,layersToIgnore:this.m_layersToIgnore,pointsToProcess:this.m_pointsToProcess,pointsToIgnore:this.m_ignoredPoints,linesToProcess:this.m_linesToProcess,linesToIgnore:this.m_linesToIgnore,polygonsToProcess:this.m_polygonsToProcess,polygonsToIgnore:this.m_polygonsToIgnore,kindsToProcess:this.m_kindsToProcess,kindsToIgnore:this.m_kindsToIgnore}}},{key:"addItem",value:function(e,t){(void 0===t.minLevel||isNaN(t.minLevel))&&(t.minLevel=0),(void 0===t.maxLevel||isNaN(t.maxLevel))&&(t.maxLevel=1/0);var n={layerName:{value:t.layer,match:void 0===t.matchLayer?s.OmvFilterString.StringMatch.Match:t.matchLayer},geometryTypes:void 0!==t.geomType?Array.isArray(t.geomType)?t.geomType:[t.geomType]:void 0,classes:[{value:t.featureClass,match:void 0===t.matchClass?s.OmvFilterString.StringMatch.Match:t.matchClass}],minLevel:t.minLevel,maxLevel:t.maxLevel,featureAttribute:t.featureAttribute};e.push(n)}},{key:"addItems",value:function(e,t){(void 0===t.minLevel||isNaN(t.minLevel))&&(t.minLevel=0),(void 0===t.maxLevel||isNaN(t.maxLevel))&&(t.maxLevel=1/0);var n={layerName:{value:t.layer,match:void 0===t.matchLayer?s.OmvFilterString.StringMatch.Match:t.matchLayer},geometryTypes:void 0!==t.geomTypes?Array.isArray(t.geomTypes)?t.geomTypes:[t.geomTypes]:void 0,classes:t.featureClasses,minLevel:t.minLevel,maxLevel:t.maxLevel,featureAttribute:t.featureAttribute};e.push(n)}}]),e}();t.OmvFeatureFilterDescriptionBuilder=u;var l=function(){function e(t){i(this,e),this.description=t,this.description.kindsToProcess.length>0&&(this.enabledKinds=new o.GeometryKindSet(this.description.kindsToProcess)),this.description.kindsToIgnore.length>0&&(this.disabledKinds=new o.GeometryKindSet(this.description.kindsToIgnore))}return a(e,[{key:"wantsLayer",value:function(t,n){return!!e.matchLayer(t,this.description.layersToProcess,n)||!e.matchLayer(t,this.description.layersToIgnore,n)&&this.description.processLayersDefault}},{key:"wantsPointFeature",value:function(e,t,n){return this.wantsFeature(this.description.pointsToProcess,this.description.pointsToIgnore,e,t,n,this.description.processPointsDefault)}},{key:"wantsLineFeature",value:function(e,t,n){return this.wantsFeature(this.description.linesToProcess,this.description.linesToIgnore,e,t,n,this.description.processLinesDefault)}},{key:"wantsPolygonFeature",value:function(e,t,n){return this.wantsFeature(this.description.polygonsToProcess,this.description.polygonsToIgnore,e,t,n,this.description.processPolygonsDefault)}},{key:"wantsKind",value:function(e){return void 0===e||(!(void 0!==this.disabledKinds&&this.disabledKinds.hasOrIntersects(e))||void 0!==this.enabledKinds&&this.enabledKinds.hasOrIntersects(e))}},{key:"hasKindFilter",get:function(){return void 0!==this.enabledKinds||void 0!==this.disabledKinds}},{key:"wantsFeature",value:function(e,t,n,i,a,o){var u,l=r(e);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(!(a<c.minLevel||a>c.maxLevel)&&(s.OmvFilterString.matchString(n,c.layerName)&&void 0!==c.geometryTypes&&c.geometryTypes.includes(i)))return!0}}catch(p){l.e(p)}finally{l.f()}var d,h=r(t);try{for(h.s();!(d=h.n()).done;){var f=d.value;if(s.OmvFilterString.matchString(n,f.layerName)&&(void 0!==f.geometryTypes&&f.geometryTypes.includes(i)))return!1}}catch(p){h.e(p)}finally{h.f()}return o}}],[{key:"matchLayer",value:function(e,t,n){var i,a=r(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!(n<o.minLevel||n>o.maxLevel)&&s.OmvFilterString.matchString(e,o.name))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}}]),e}();t.OmvGenericFeatureFilter=l;var c=function(){function e(t){i(this,e),this.filters=t}return a(e,[{key:"hasKindFilter",get:function(){return this.filters.reduce((function(e,t){return e||t.hasKindFilter}),!0)}},{key:"wantsLayer",value:function(e,t){return this.filters.reduce((function(n,r){return n&&r.wantsLayer(e,t)}),!0)}},{key:"wantsPointFeature",value:function(e,t,n){return this.filters.reduce((function(r,i){return r&&i.wantsPointFeature(e,t,n)}),!0)}},{key:"wantsLineFeature",value:function(e,t,n){return this.filters.reduce((function(r,i){return r&&i.wantsLineFeature(e,t,n)}),!0)}},{key:"wantsPolygonFeature",value:function(e,t,n){return this.filters.reduce((function(r,i){return r&&i.wantsPolygonFeature(e,t,n)}),!0)}},{key:"wantsKind",value:function(e){return this.filters.reduce((function(t,n){return t&&n.wantsKind(e)}),!0)}}]),e}();t.ComposedDataFilter=c;var d=function(){function e(t){i(this,e),this.description=t}return a(e,[{key:"doProcessPointFeature",value:function(e,t){return this.doProcessFeature(this.description.pointsToProcess,this.description.pointsToIgnore,e,t,this.description.processPointsDefault)}},{key:"doProcessLineFeature",value:function(e,t){return this.doProcessFeature(this.description.linesToProcess,this.description.linesToIgnore,e,t,this.description.processLinesDefault)}},{key:"doProcessPolygonFeature",value:function(e,t){return this.doProcessFeature(this.description.polygonsToProcess,this.description.polygonsToIgnore,e,t,this.description.processPolygonsDefault)}},{key:"doProcessFeature",value:function(t,n,r,i,a){if(void 0===r||0===t.length&&0===n.length)return a;var o,s=i.lookup("class");return void 0!==s&&null!==s&&(o=s.toString()),!(!o||!e.matchItems(r,o,t))||(!o||!e.matchItems(r,o,n))&&(!!e.matchAttribute(r,i,t)||!e.matchAttribute(r,i,n)&&a)}}],[{key:"matchItems",value:function(e,t,n){var i,a=r(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(void 0!==o.classes){if(!s.OmvFilterString.matchString(e,o.layerName))continue;var u,l=r(o.classes);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(s.OmvFilterString.matchString(t,c))return!0}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){a.e(d)}finally{a.f()}return!1}},{key:"matchAttribute",value:function(e,t,n){var i,a=r(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(void 0!==o.featureAttribute&&s.OmvFilterString.matchString(e,o.layerName)&&t.lookup(o.featureAttribute.key)===o.featureAttribute.value)return!0}}catch(u){a.e(u)}finally{a.f()}return!1}}]),e}();t.OmvGenericFeatureModifier=d},3290:function(e,t,n){"use strict";var r=n(43269).default,i=n(2205).default,a=n(99842).default,o=n(93913).default,s=n(34575).default;Object.defineProperty(t,"__esModule",{value:!0}),t.OmvDebugLabelsTile=void 0;var u=n(26309),l=n(48991),c=n(60396),d=n(15663),h=n(25557),f=n(21690),p=n(34585),m=new p.LineBasicMaterial({color:0,linewidth:1,depthTest:!1,depthFunc:p.NeverDepth}),v=new p.MeshBasicMaterial({color:16711680,depthTest:!1,depthFunc:p.NeverDepth});new p.MeshBasicMaterial({color:16711680,depthTest:!1,depthFunc:p.NeverDepth}).wireframe=!0,new p.MeshBasicMaterial({color:8421631,depthTest:!1,depthFunc:p.NeverDepth}).wireframe=!0;var g=new p.MeshBasicMaterial({color:0,depthTest:!1,depthFunc:p.NeverDepth}),y=new p.MeshBasicMaterial({color:255,depthTest:!1,depthFunc:p.NeverDepth,opacity:.75,transparent:!0}),x=new p.MeshBasicMaterial({color:10514432,depthTest:!1,depthFunc:p.NeverDepth,opacity:.75,transparent:!0}),_=new f.TextRenderStyle,b=new f.TextLayoutStyle;_.fontSize={unit:f.FontUnit.Point,size:9,backgroundSize:0},_.opacity=.75,_.backgroundOpacity=.75,_.color=new p.Color(.8,.2,.2);var w=Number.MAX_SAFE_INTEGER,S=o((function e(){s(this,e),this.geometry=new p.BufferGeometry,this.indices=new Array,this.positions=new Array}));function M(e,t,n,r,i){i.positions.push(e,t-r,n),i.positions.push(e+r,t,n),i.positions.push(e,t+r,n),i.positions.push(e-r,t,n);var a=i.positions.length/3;i.indices.push(a-4),i.indices.push(a-3),i.indices.push(a-2),i.indices.push(a-4),i.indices.push(a-2),i.indices.push(a-1)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(t.indices.length>0){t.geometry.addGroup(0,t.indices.length,0),t.geometry.setAttribute("position",new p.BufferAttribute(new Float32Array(t.positions),3)),t.geometry.setIndex(new p.BufferAttribute(new Uint32Array(t.indices),1));var i=r(t.geometry);i.renderOrder=w-n,e.push(i)}}var T=function(e){i(n,e);var t=a(n);function n(e,r){return s(this,n),t.call(this,e,r)}return o(n,[{key:"loadingFinished",value:function(){var e,t,n,i=c.debugContext.getValue("DEBUG_TEXT_PATHS"),a=c.debugContext.getValue("DEBUG_TEXT_PATHS_FULL"),o=c.debugContext.getValue("DEBUG_TEXT_POIS_FULL"),s=c.debugContext.getValue("DEBUG_TEXT_LINE_MARKER");if((i||a||s)&&void 0!==this.decodedTile){var T=d.TileGeometryCreator.instance,k=this.decodedTile,C=new Map,A=c.debugContext.getValue("DEBUG_TEXT_PATHS.FILTER.TEXT"),P=c.debugContext.getValue("DEBUG_TEXT_PATHS.FILTER.INDEX"),O=this.mapView.env;void 0!==k.textPathGeometries&&(this.preparedTextPaths=T.prepareTextPaths(k.textPathGeometries,k));var L=this.center.x,R=this.center.y,D=this.center.z,I=this.mapView.pixelToWorld,F=this.computeWorldOffsetX(),N=0;if(this.textElementGroups.count()>0){var j=new S,z=new S,U=[];this.textElementGroups.forEach((function(e){if(e.type===h.TextElementType.LineMarker||e.type===h.TextElementType.PoiLabel){var t=e.type===h.TextElementType.LineMarker?z:j,n=5*I,r=function(r,i,a){if(M(r,i,a,n,t),o||s){var u=.5*n,c="".concat(e.text," [").concat(N,"]"),d=new l.TextElement(f.ContextualArabicConverter.instance.convert(c),new p.Vector3(r+F+L+u,i+R+u,a+D),_,b,w,0,0);d.minZoomLevel=0,d.mayOverlap=!0,d.reserveSpace=!1,d.alwaysOnTop=!0,d.ignoreDistance=!0,d.priority=l.TextElement.HIGHEST_PRIORITY,d._isDebug=!0,U.push(d)}N++};if(void 0!==e.path&&Array.isArray(e.path))for(var i=0;i<e.path.length;i++){var a=e.path[i];r(a.x-L,a.y-R,10+a.z+5*i-D)}else if(o){r(e.position.x-L,e.position.y-R,5-D)}}}));for(var B=0,V=U;B<V.length;B++){var G=V[B];this.addTextElement(G)}E(this.objects,j,0,(function(e){return new p.Mesh(e,y)})),E(this.objects,z,0,(function(e){return new p.Mesh(e,x)}))}if(void 0!==this.preparedTextPaths){var H,Z=new S,W=new S,q=new S,X=0,K=r(this.preparedTextPaths);try{for(K.s();!(H=K.n()).done;){var Y=H.value,Q=k.techniques[Y.technique];if(u.isTextTechnique(Q)&&void 0===Y._isDebug){void 0!==Q.color&&C.set(Y.technique,new p.Color(u.getPropertyValue(Q.color,O))),X=Z.positions.length/3;var $=Y.text,J=this.preparedTextPaths.indexOf(Y);if((!A||$&&$.includes(A))&&(void 0===P||P===J)){for(var ee=0;ee<Y.path.length;ee+=3){var te=ee/3,ne=Y.path[ee]-L,re=Y.path[ee+1]-R,ie=10+Y.path[ee+2]+ee/3-D;i&&Z.positions.push(ne,re,ie);var ae=0===ee&&i;if(a||ae)if(M(ne,re,ie,I*(ae?6:4),ae?W:q),a){var oe=null!==(e=Q.xOffset)&&void 0!==e?e:0,se=null!==(t=Q.yOffset)&&void 0!==t?t:0,ue=Q.minZoomLevel,le=te%5===0?$+":"+te:Number(te).toString(),ce=new l.TextElement(f.ContextualArabicConverter.instance.convert(le),new p.Vector3(ne+F+L,re+R,ie+D),_,b,u.getPropertyValue(null!==(n=Q.priority)&&void 0!==n?n:0,O),oe,se);ce.minZoomLevel=u.getPropertyValue(ue,O),ce.mayOverlap=!0,ce.reserveSpace=!1,ce.alwaysOnTop=!0,ce.ignoreDistance=!0,ce.priority=l.TextElement.HIGHEST_PRIORITY,this.addTextElement(ce)}}for(var de=Y.path.length/3,he=0;he<de;++he)he>0&&Z.indices.push(X+he),he+1<de&&Z.indices.push(X+he)}}}}catch(fe){K.e(fe)}finally{K.f()}E(this.objects,Z,-2,(function(e){return new p.LineSegments(e,m)})),E(this.objects,W,0,(function(e){return new p.Mesh(e,v)})),E(this.objects,q,-1,(function(e){return new p.Mesh(e,g)}))}}}}]),n}(l.Tile);t.OmvDebugLabelsTile=T},11586:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GEOJSON_TILER_SERVICE_TYPE=t.VECTOR_TILE_DECODER_SERVICE_TYPE=t.OmvGeometryType=t.OmvFilterString=t.FeatureModifierId=void 0,function(e){e[e.default=0]="default"}(t.FeatureModifierId||(t.FeatureModifierId={})),function(e){!function(e){e[e.Any=0]="Any",e[e.Match=1]="Match",e[e.StartsWith=2]="StartsWith",e[e.Contains=3]="Contains",e[e.EndsWith=4]="EndsWith"}(e.StringMatch||(e.StringMatch={})),e.matchString=function(t,n){switch(n.match){case e.StringMatch.Any:return!0;case e.StringMatch.Match:return t===n.value;case e.StringMatch.StartsWith:return n.value.startsWith(t);case e.StringMatch.EndsWith:return n.value.endsWith(t);default:return t.includes(n.value)}}}(t.OmvFilterString||(t.OmvFilterString={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.POINT=1]="POINT",e[e.LINESTRING=2]="LINESTRING",e[e.POLYGON=3]="POLYGON"}(t.OmvGeometryType||(t.OmvGeometryType={})),t.VECTOR_TILE_DECODER_SERVICE_TYPE="vector-tile-decoder",t.GEOJSON_TILER_SERVICE_TYPE="geojson-tiler"},79717:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default,s=n(2205).default,u=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.OmvRestClient=t.AuthenticationTypeAccessToken=t.AuthenticationTypeTomTomV1=t.AuthenticationTypeBearer=t.AuthenticationMethod=t.APIFormat=void 0,n(89064);var l,c,d=n(36676),h=n(99383),f=n(15739).LoggerManager.instance.create("OmvRestClient");!function(e){e[e.HereV1=0]="HereV1",e[e.MapboxV4=1]="MapboxV4",e[e.XYZMVT=2]="XYZMVT",e[e.XYZJson=3]="XYZJson",e[e.XYZOMV=4]="XYZOMV",e[e.TomtomV1=5]="TomtomV1",e[e.XYZSpace=6]="XYZSpace"}(l=t.APIFormat||(t.APIFormat={})),function(e){e[e.QueryString=0]="QueryString",e[e.AuthorizationHeader=1]="AuthorizationHeader"}(c=t.AuthenticationMethod||(t.AuthenticationMethod={})),t.AuthenticationTypeBearer={method:c.AuthorizationHeader,name:"Bearer"},t.AuthenticationTypeTomTomV1={method:c.QueryString,name:"key"},t.AuthenticationTypeAccessToken={method:c.QueryString,name:"access_token"};var p=function(e){s(d,e);var n=u(d);function d(e){var t;return a(this,d),(t=n.call(this)).params=e,t.downloadManager=void 0===e.downloadManager?h.TransferManager.instance():e.downloadManager,t.urlParams=void 0===e.urlParams?{}:e.urlParams,t}return o(d,[{key:"connect",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"ready",value:function(){return!0}},{key:"getTile",value:function(){var e=i(r.mark((function e(t,n){var i,a,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={signal:n},a=this.dataUrl(t),e.next=4,this.getActualAuthenticationCode();case 4:if(o=e.sent,a=this.applyAuthCode(a,i,o),a=this.addQueryParams(a,this.urlParams),this.params.apiFormat!==l.XYZJson){e.next=11;break}return e.next=10,this.downloadManager.downloadJson(a,i);case 10:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,this.downloadManager.downloadArrayBuffer(a,i);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){}},{key:"getActualAuthenticationCode",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof this.params.authenticationCode){e.next=4;break}return e.abrupt("return",this.params.authenticationCode);case 4:if(void 0===this.params.authenticationCode){e.next=10;break}return e.next=7,this.params.authenticationCode();case 7:case 13:return e.abrupt("return",e.sent);case 10:if(void 0===this.params.getBearerToken){e.next=16;break}return e.next=13,this.params.getBearerToken();case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultAuthMethod",value:function(){if(void 0!==this.params.getBearerToken)return t.AuthenticationTypeBearer;switch(this.params.apiFormat){case l.HereV1:return t.AuthenticationTypeBearer;case l.MapboxV4:case l.XYZOMV:case l.XYZMVT:case l.XYZSpace:case l.XYZJson:return t.AuthenticationTypeAccessToken;case l.TomtomV1:return t.AuthenticationTypeTomTomV1;default:return void f.warn("#getDefaultAuthMethod: Not supported API format: ".concat(this.params.apiFormat))}}},{key:"applyAuthCode",value:function(e,t,n){var r,i,a;if(void 0===n)return e;var o=null!==(r=this.params.authenticationMethod)&&void 0!==r?r:this.getDefaultAuthMethod();if(void 0===o)return e;if(o.method===c.AuthorizationHeader){void 0===t.headers&&(t.headers=new Headers);var s=null!==(i=o.name)&&void 0!==i?i:"Bearer";t.headers.append("Authorization","".concat(s," ").concat(n))}else if(o.method===c.QueryString){var u={};u[null!==(a=o.name)&&void 0!==a?a:"access_token"]=n,e=this.addQueryParams(e,u)}return e}},{key:"dataUrl",value:function(e){if(void 0!==this.params.url)return this.params.url.replace("{x}",String(e.column)).replace("{y}",String(e.row)).replace("{z}",String(e.level));var t=["/".concat(e.level),e.column,e.row].join(this.params.apiFormat===l.XYZSpace||this.params.apiFormat===l.XYZJson?"_":"/");switch(this.params.apiFormat){case l.HereV1:case l.XYZOMV:t+="/omv";break;case l.MapboxV4:case l.XYZMVT:t+=".mvt";break;case l.XYZJson:break;case l.XYZSpace:t+=".mvt";break;case l.TomtomV1:t+=".pbf";break;default:f.warn("Not supported API format: ".concat(this.params.apiFormat))}return this.params.baseUrl+t}},{key:"addQueryParams",value:function(e,t){var n="",r=e.includes("?")?"&":"?";for(var i in t)t.hasOwnProperty(i)&&(n+="".concat(r).concat(encodeURIComponent(i),"=").concat(encodeURIComponent(t[i])),"?"===r&&(r="&"));return e+n}}]),d}(d.DataProvider);t.OmvRestClient=p},42138:function(e,t,n){"use strict";var r=n(87757),i=n(48926).default,a=n(34575).default,o=n(93913).default,s=n(2911).default,u=n(16525).default,l=n(29754).default,c=n(2205).default,d=n(99842).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTileDataSource=void 0;var h=n(26309),f=n(31201),p=n(48991),m=n(36676),v=n(15739),g=n(11586),y=n(79717),x=v.LoggerManager.instance.create("VectorTileDataSource");function _(e){var t;if(e.dataProvider)return e.dataProvider;if(null!==(t=e.baseUrl)&&void 0!==t?t:e.url)return new y.OmvRestClient(e);throw new Error("OmvDataSource: missing url, baseUrl or dataProvider params")}var b=!1,w="https://vector.hereapi.com/v2/vectortiles/base/mc",S={baseUrl:w,apiFormat:y.APIFormat.XYZOMV,styleSetName:"tilezen",authenticationMethod:{method:y.AuthenticationMethod.QueryString,name:"apikey"},copyrightInfo:[{id:"here.com",year:(new Date).getFullYear(),label:"HERE",link:"https://legal.here.com/terms"}]},M=new Map([[w,S]]);var E=function(e){c(n,e);var t=d(n);function n(e){var r,i,o,s,u,l,c,d,h;a(this,n),(r=t.call(this,null!==(i=e.tileFactory)&&void 0!==i?i:new m.TileFactory(p.Tile),Object.assign({styleSetName:null!==(o=e.styleSetName)&&void 0!==o?o:"omv",concurrentDecoderServiceName:null!==(s=e.concurrentDecoderServiceName)&&void 0!==s?s:g.VECTOR_TILE_DECODER_SERVICE_TYPE,minDataLevel:null!==(u=e.minDataLevel)&&void 0!==u?u:1,maxDataLevel:null!==(l=e.maxDataLevel)&&void 0!==l?l:17,storageLevelOffset:null!==(c=e.storageLevelOffset)&&void 0!==c?c:-1},function(e){var t;if(void 0===e.dataProvider&&void 0===e.url){var n=null!==(t=e.baseUrl)&&void 0!==t?t:w,r=Object.assign(Object.assign({},M.get(n)),e);return Object.assign(Object.assign({},r),{tilingScheme:f.webMercatorTilingScheme,dataProvider:new y.OmvRestClient(r)})}return Object.assign(Object.assign({},e),{tilingScheme:f.webMercatorTilingScheme,dataProvider:_(e)})}(e)))).m_params=e,r.cacheable=!0,r.addGroundPlane=void 0===e.addGroundPlane||!0===e.addGroundPlane;var x=e.roundUpCoordinatesIfNeeded;return void 0===x&&(null===(d=e)||void 0===d?void 0:d.baseUrl)===w&&(x=!0),r.m_decoderOptions={showMissingTechniques:!0===r.m_params.showMissingTechniques,filterDescription:r.m_params.filterDescr,gatherFeatureAttributes:!0===r.m_params.gatherFeatureAttributes,featureModifiers:r.m_params.featureModifierId?[r.m_params.featureModifierId]:void 0,politicalView:r.m_params.politicalView,skipShortLabels:r.m_params.skipShortLabels,storageLevelOffset:null!==(h=e.storageLevelOffset)&&void 0!==h?h:-1,enableElevationOverlay:!0===r.m_params.enableElevationOverlay,roundUpCoordinatesIfNeeded:x},r.maxGeometryHeight=v.getOptionValue(e.maxGeometryHeight,f.EarthConstants.MAX_BUILDING_HEIGHT),r.minGeometryHeight=v.getOptionValue(e.minGeometryHeight,0),r}return o(n,[{key:"connect",value:function(){var e=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(l(n.prototype),"connect",this).call(this);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0.message&&h.WorkerServiceProtocol.isUnknownServiceError(e.t0)&&!b&&(x.info("Unable to create decoder service in worker. Use  'OmvTileDecoderService.start();' in decoder script."),b=!0),"string"===typeof e.t0?new Error(e.t0):e.t0;case 9:this.configureDecoder(void 0,this.m_decoderOptions);case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"removeDataFilter",value:function(){this.configureDecoder(void 0,{filterDescription:null})}},{key:"setDataFilter",value:function(e){this.m_decoderOptions.filterDescription=null!==e?e:void 0,this.configureDecoder(void 0,{filterDescription:e,featureModifiers:this.m_decoderOptions.featureModifiers,politicalView:this.m_decoderOptions.politicalView})}},{key:"shouldPreloadTiles",value:function(){return!0}},{key:"setPoliticalView",value:function(e){e=null===e||void 0===e?void 0:e.toLowerCase(),this.m_decoderOptions.politicalView!==e&&(this.m_decoderOptions.politicalView=e,this.configureDecoder(void 0,{filterDescription:this.m_decoderOptions.filterDescription,featureModifiers:this.m_decoderOptions.featureModifiers,politicalView:void 0!==e?e:""}))}},{key:"storageLevelOffset",get:function(){return u(l(n.prototype),"storageLevelOffset",this)},set:function(e){s(l(n.prototype),"storageLevelOffset",e,this,!0),this.m_decoderOptions.storageLevelOffset=this.storageLevelOffset,this.configureDecoder(void 0,{storageLevelOffset:this.storageLevelOffset})}},{key:"setEnableElevationOverlay",value:function(e){this.m_decoderOptions.enableElevationOverlay!==e&&(this.m_decoderOptions.enableElevationOverlay=e,this.configureDecoder(void 0,{enableElevationOverlay:e}))}},{key:"configureDecoder",value:function(e,t){this.clearCache(),this.decoder.configure(e,t),this.mapView.markTilesDirty(this)}}]),n}(m.TileDataSource);t.VectorTileDataSource=E},90767:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},87125:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},95159:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(87125),i={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function a(e,t){return i[t]||"".concat(r.Z.generate(e),"-").concat(t)}},30208:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(95159);function i(e,t){var n={};return t.forEach((function(t){n[t]=(0,r.Z)(e,t)})),n}},77907:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),a=n(80184),o=(0,i.default)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");t.Z=o},98937:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),a=n(80184),o=(0,i.default)((0,a.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");t.Z=o},14642:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),a=n(80184),o=(0,i.default)((0,a.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");t.Z=o},59737:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),a=n(80184),o=(0,i.default)((0,a.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");t.Z=o},8529:function(e,t,n){"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),a=n(80184),o=(0,i.default)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}),"ZoomOut");t.Z=o},45649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(54421)},81314:function(e,t,n){"use strict";n.d(t,{x9:function(){return s},ZP:function(){return c}});var r=n(63366),i=n(87462),a=["duration","easing","delay"],o={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function u(e){return"".concat(Math.round(e),"ms")}function l(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function c(e){var t=(0,i.Z)({},o,e.easing),n=(0,i.Z)({},s,e.duration);return(0,i.Z)({getAutoHeightDuration:l,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.duration,s=void 0===o?n.standard:o,l=i.easing,c=void 0===l?t.easeInOut:l,d=i.delay,h=void 0===d?0:d;(0,r.Z)(i,a);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:u(s)," ").concat(c," ").concat("string"===typeof h?h:u(h))})).join(",")}},e,{easing:t,duration:n})}},99691:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(87462),i=n(63366),a=n(82466),o=n(85080),s=n(4942);function u(e,t,n){var i;return(0,r.Z)({toolbar:(i={minHeight:56},(0,s.Z)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,s.Z)(i,e.up("sm"),{minHeight:64}),i)},n)}var l=n(46189),c=n(12065),d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},f={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},x=["mode","contrastThreshold","tonalOffset"],_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,i):"dark"===t&&(e.dark=(0,c._j)(e.main,a)))}function S(e){var t=e.mode,n=void 0===t?"light":t,o=e.contrastThreshold,s=void 0===o?3:o,u=e.tonalOffset,S=void 0===u?.2:u,M=(0,i.Z)(e,x),E=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[200],light:v[50],dark:v[400]}:{main:v[700],light:v[400],dark:v[800]}}(n),T=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[200],light:f[50],dark:f[400]}:{main:f[500],light:f[300],dark:f[700]}}(n),k=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(n),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[700],light:g[500],dark:g[900]}}(n),A=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(n),P=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(n);function O(e){return(0,c.mi)(e,b.text.primary)>=s?b.text.primary:_.text.primary}var L=function(e){var t=e.color,n=e.name,i=e.mainShade,a=void 0===i?500:i,o=e.lightShade,s=void 0===o?300:o,u=e.darkShade,c=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error((0,l.Z)(11,n?" (".concat(n,")"):"",a));if("string"!==typeof t.main)throw new Error((0,l.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return w(t,"light",s,S),w(t,"dark",c,S),t.contrastText||(t.contrastText=O(t.main)),t},R={dark:b,light:_};return(0,a.Z)((0,r.Z)({common:d,mode:n,primary:L({color:E,name:"primary"}),secondary:L({color:T,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:L({color:k,name:"error"}),warning:L({color:P,name:"warning"}),info:L({color:C,name:"info"}),success:L({color:A,name:"success"}),grey:h,contrastThreshold:s,getContrastText:O,augmentColor:L,tonalOffset:S},R[n]),M)}var M=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var E={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function k(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,s=void 0===o?T:o,u=n.fontSize,l=void 0===u?14:u,c=n.fontWeightLight,d=void 0===c?300:c,h=n.fontWeightRegular,f=void 0===h?400:h,p=n.fontWeightMedium,m=void 0===p?500:p,v=n.fontWeightBold,g=void 0===v?700:v,y=n.htmlFontSize,x=void 0===y?16:y,_=n.allVariants,b=n.pxToRem,w=(0,i.Z)(n,M);var S=l/14,k=b||function(e){return"".concat(e/x*S,"rem")},C=function(e,t,n,i,a){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:k(t),lineHeight:n},s===T?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},a,_);var o},A={h1:C(d,96,1.167,-1.5),h2:C(d,60,1.2,-.5),h3:C(f,48,1.167,0),h4:C(f,34,1.235,.25),h5:C(f,24,1.334,0),h6:C(m,20,1.6,.15),subtitle1:C(f,16,1.75,.15),subtitle2:C(m,14,1.57,.1),body1:C(f,16,1.5,.15),body2:C(f,14,1.43,.15),button:C(m,14,1.75,.4,E),caption:C(f,12,1.66,.4),overline:C(f,12,2.66,1,E)};return(0,a.Z)((0,r.Z)({htmlFontSize:x,pxToRem:k,fontFamily:s,fontSize:l,fontWeightLight:d,fontWeightRegular:f,fontWeightMedium:m,fontWeightBold:g},A),w,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var A=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],P=n(81314),O={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},L=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,s=e.palette,l=void 0===s?{}:s,c=e.transitions,d=void 0===c?{}:c,h=e.typography,f=void 0===h?{}:h,p=(0,i.Z)(e,L),m=S(l),v=(0,o.Z)(e),g=(0,a.Z)(v,{mixins:u(v.breakpoints,v.spacing,n),palette:m,shadows:A.slice(),typography:k(m,f),transitions:(0,P.ZP)(d),zIndex:(0,r.Z)({},O)});g=(0,a.Z)(g,p);for(var y=arguments.length,x=new Array(y>1?y-1:0),_=1;_<y;_++)x[_-1]=arguments[_];return g=x.reduce((function(e,t){return(0,a.Z)(e,t)}),g)}var D=R()},86481:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Fe},FO:function(){return Re},Dz:function(){return De}});var r=n(42982),i=n(87462),a=n(63366),o=n(72791),s=n(50620),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l=(0,s.Z)((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),c=n(91672),d=n(95438),h=n(84804),f=l,p=function(e){return"theme"!==e},m=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?f:p},v=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(){return null},y=function e(t,n){var r,a,s=t.__emotion_real===t,u=s&&t.__emotion_base||t;void 0!==n&&(r=n.label,a=n.target);var l=v(t,n,s),f=l||m(u),p=!f("as");return function(){var y=arguments,x=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&x.push("label:"+r+";"),null==y[0]||void 0===y[0].raw)x.push.apply(x,y);else{0,x.push(y[0][0]);for(var _=y.length,b=1;b<_;b++)x.push(y[b],y[0][b])}var w=(0,c.w)((function(e,t,n){var r=p&&e.as||u,i="",s=[],v=e;if(null==e.theme){for(var y in v={},e)v[y]=e[y];v.theme=(0,o.useContext)(c.T)}"string"===typeof e.className?i=(0,d.f)(t.registered,s,e.className):null!=e.className&&(i=e.className+" ");var _=(0,h.O)(x.concat(s),t.registered,v);(0,d.M)(t,_,"string"===typeof r);i+=t.key+"-"+_.name,void 0!==a&&(i+=" "+a);var b=p&&void 0===l?m(r):f,w={};for(var S in e)p&&"as"===S||b(S)&&(w[S]=e[S]);w.className=i,w.ref=n;var M=(0,o.createElement)(r,w),E=(0,o.createElement)(g,null);return(0,o.createElement)(o.Fragment,null,E,M)}));return w.displayName=void 0!==r?r:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=u,w.__emotion_styles=x,w.__emotion_forwardProp=l,Object.defineProperty(w,"toString",{value:function(){return"."+a}}),w.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:v(w,r,!0)})).apply(void 0,x)},w}},x=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){x[e]=x(e)}));var _=x;function b(e,t){return _(e,t)}var w=n(85080),S=n(4942),M=n(98247),E=n(18529);var T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,M.Z)(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},k=n(45682),C=n(51184);function A(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var P=(0,E.Z)({prop:"border",themeKey:"borders",transform:A}),O=(0,E.Z)({prop:"borderTop",themeKey:"borders",transform:A}),L=(0,E.Z)({prop:"borderRight",themeKey:"borders",transform:A}),R=(0,E.Z)({prop:"borderBottom",themeKey:"borders",transform:A}),D=(0,E.Z)({prop:"borderLeft",themeKey:"borders",transform:A}),I=(0,E.Z)({prop:"borderColor",themeKey:"palette"}),F=(0,E.Z)({prop:"borderTopColor",themeKey:"palette"}),N=(0,E.Z)({prop:"borderRightColor",themeKey:"palette"}),j=(0,E.Z)({prop:"borderBottomColor",themeKey:"palette"}),z=(0,E.Z)({prop:"borderLeftColor",themeKey:"palette"}),U=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,k.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,C.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,k.NA)(t,e)}}))}return null};U.propTypes={},U.filterProps=["borderRadius"];var B=T(P,O,L,R,D,I,F,N,j,z,U),V=T((0,E.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,E.Z)({prop:"display"}),(0,E.Z)({prop:"overflow"}),(0,E.Z)({prop:"textOverflow"}),(0,E.Z)({prop:"visibility"}),(0,E.Z)({prop:"whiteSpace"})),G=T((0,E.Z)({prop:"flexBasis"}),(0,E.Z)({prop:"flexDirection"}),(0,E.Z)({prop:"flexWrap"}),(0,E.Z)({prop:"justifyContent"}),(0,E.Z)({prop:"alignItems"}),(0,E.Z)({prop:"alignContent"}),(0,E.Z)({prop:"order"}),(0,E.Z)({prop:"flex"}),(0,E.Z)({prop:"flexGrow"}),(0,E.Z)({prop:"flexShrink"}),(0,E.Z)({prop:"alignSelf"}),(0,E.Z)({prop:"justifyItems"}),(0,E.Z)({prop:"justifySelf"})),H=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,k.eI)(e.theme,"spacing",8,"gap");return(0,C.k9)(e,e.gap,(function(e){return{gap:(0,k.NA)(t,e)}}))}return null};H.propTypes={},H.filterProps=["gap"];var Z=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,k.eI)(e.theme,"spacing",8,"columnGap");return(0,C.k9)(e,e.columnGap,(function(e){return{columnGap:(0,k.NA)(t,e)}}))}return null};Z.propTypes={},Z.filterProps=["columnGap"];var W=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,k.eI)(e.theme,"spacing",8,"rowGap");return(0,C.k9)(e,e.rowGap,(function(e){return{rowGap:(0,k.NA)(t,e)}}))}return null};W.propTypes={},W.filterProps=["rowGap"];var q=T(H,Z,W,(0,E.Z)({prop:"gridColumn"}),(0,E.Z)({prop:"gridRow"}),(0,E.Z)({prop:"gridAutoFlow"}),(0,E.Z)({prop:"gridAutoColumns"}),(0,E.Z)({prop:"gridAutoRows"}),(0,E.Z)({prop:"gridTemplateColumns"}),(0,E.Z)({prop:"gridTemplateRows"}),(0,E.Z)({prop:"gridTemplateAreas"}),(0,E.Z)({prop:"gridArea"})),X=T((0,E.Z)({prop:"position"}),(0,E.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,E.Z)({prop:"top"}),(0,E.Z)({prop:"right"}),(0,E.Z)({prop:"bottom"}),(0,E.Z)({prop:"left"})),K=T((0,E.Z)({prop:"color",themeKey:"palette"}),(0,E.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,E.Z)({prop:"backgroundColor",themeKey:"palette"})),Y=(0,E.Z)({prop:"boxShadow",themeKey:"shadows"});function Q(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var $=(0,E.Z)({prop:"width",transform:Q}),J=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,C.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||C.VO[t]||Q(t)}}))}return null};J.filterProps=["maxWidth"];var ee=(0,E.Z)({prop:"minWidth",transform:Q}),te=(0,E.Z)({prop:"height",transform:Q}),ne=(0,E.Z)({prop:"maxHeight",transform:Q}),re=(0,E.Z)({prop:"minHeight",transform:Q}),ie=((0,E.Z)({prop:"size",cssProperty:"width",transform:Q}),(0,E.Z)({prop:"size",cssProperty:"height",transform:Q}),T($,J,ee,te,ne,re,(0,E.Z)({prop:"boxSizing"}))),ae=(0,E.Z)({prop:"fontFamily",themeKey:"typography"}),oe=(0,E.Z)({prop:"fontSize",themeKey:"typography"}),se=(0,E.Z)({prop:"fontStyle",themeKey:"typography"}),ue=(0,E.Z)({prop:"fontWeight",themeKey:"typography"}),le=(0,E.Z)({prop:"letterSpacing"}),ce=(0,E.Z)({prop:"lineHeight"}),de=(0,E.Z)({prop:"textAlign"}),he=T((0,E.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),ae,oe,se,ue,le,ce,de),fe={borders:B.filterProps,display:V.filterProps,flexbox:G.filterProps,grid:q.filterProps,positions:X.filterProps,palette:K.filterProps,shadows:Y.filterProps,sizing:ie.filterProps,spacing:k.ZP.filterProps,typography:he.filterProps},pe={borders:B,display:V,flexbox:G,grid:q,positions:X,palette:K,shadows:Y,sizing:ie,spacing:k.ZP,typography:he},me=Object.keys(fe).reduce((function(e,t){return fe[t].forEach((function(n){e[n]=pe[t]})),e}),{});var ve=function(e,t,n){var r,i=(r={},(0,S.Z)(r,e,t),(0,S.Z)(r,"theme",n),r),a=me[e];return a?a(i):(0,S.Z)({},e,t)};function ge(e){var t=e||{},n=t.sx,r=t.theme,i=void 0===r?{}:r;if(!n)return null;function a(e){var t=e;if("function"===typeof e)t=e(i);else if("object"!==typeof e)return e;var n=(0,C.W8)(i.breakpoints),r=Object.keys(n),a=n;return Object.keys(t).forEach((function(e){var n,r,o=(n=t[e],r=i,"function"===typeof n?n(r):n);if(null!==o&&void 0!==o)if("object"===typeof o)if(me[e])a=(0,M.Z)(a,ve(e,o,i));else{var s=(0,C.k9)({theme:i},o,(function(t){return(0,S.Z)({},e,t)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(s,o)?a=(0,M.Z)(a,s):a[e]=ge({sx:o,theme:i})}else a=(0,M.Z)(a,ve(e,o,i))})),(0,C.L7)(r,a)}return Array.isArray(n)?n.map(a):a(n)}ge.filterProps=["sx"];var ye=ge,xe=n(27312),_e=["variant"];function be(e){return 0===e.length}function we(e){var t=e.variant,n=(0,a.Z)(e,_e),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?be(r)?e[t]:(0,xe.Z)(e[t]):"".concat(be(r)?t:(0,xe.Z)(t)).concat((0,xe.Z)(e[t].toString()))})),r}var Se=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Me=["theme"],Ee=["theme"];function Te(e){return 0===Object.keys(e).length}var ke=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},Ce=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=we(e.props);r[t]=e.style})),r},Ae=function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],l=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return l&&l.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[we(n.props)])})),u};function Pe(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var Oe=(0,w.Z)();var Le=n(99691),Re=function(e){return Pe(e)&&"classes"!==e},De=Pe,Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?Oe:t,o=e.rootShouldForwardProp,s=void 0===o?Pe:o,u=e.slotShouldForwardProp,l=void 0===u?Pe:u;return function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.name,c=o.slot,d=o.skipVariantsResolver,h=o.skipSx,f=o.overridesResolver,p=(0,a.Z)(o,Se),m=void 0!==d?d:c&&"Root"!==c||!1,v=h||!1;var g=Pe;"Root"===c?g=s:c&&(g=l);var y=b(e,(0,i.Z)({shouldForwardProp:g,label:t},p)),x=function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];var l=o?o.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,o=(0,a.Z)(t,Me);return e((0,i.Z)({theme:Te(r)?n:r},o))}:e})):[],c=e;u&&f&&l.push((function(e){var t=Te(e.theme)?n:e.theme,r=ke(u,t);return r?f(e,r):null})),u&&!m&&l.push((function(e){var t=Te(e.theme)?n:e.theme;return Ae(e,Ce(u,t),t,u)})),v||l.push((function(e){var t=Te(e.theme)?n:e.theme;return ye((0,i.Z)({},e,{theme:t}))}));var d=l.length-o.length;if(Array.isArray(e)&&d>0){var h=new Array(d).fill("");(c=[].concat((0,r.Z)(e),(0,r.Z)(h))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(h))}else"function"===typeof e&&(c=function(t){var r=t.theme,o=(0,a.Z)(t,Ee);return e((0,i.Z)({theme:Te(r)?n:r},o))});var p=y.apply(void 0,[c].concat((0,r.Z)(l)));return p};return x}}({defaultTheme:Le.Z,rootShouldForwardProp:Re}),Fe=Ie},10551:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(87462);function i(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,i):i}var a=n(30418);var o=n(99691);function s(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return i({theme:(0,a.Z)(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:o.Z})}},14036:function(e,t,n){"use strict";var r=n(27312);t.Z=r.Z},76189:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(87462),i=n(72791),a=n(63366),o=(n(52007),n(28182)),s=n(90767),u=n(14036),l=n(10551),c=n(86481),d=n(95159);function h(e){return(0,d.Z)("MuiSvgIcon",e)}(0,n(30208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(80184),p=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,u.Z)(n.color))],t["fontSize".concat((0,u.Z)(n.fontSize))]]}})((function(e){var t,n,r=e.theme,i=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:r.transitions.create("fill",{duration:r.transitions.duration.shorter}),fontSize:{inherit:"inherit",small:r.typography.pxToRem(20),medium:r.typography.pxToRem(24),large:r.typography.pxToRem(35)}[i.fontSize],color:null!=(t=null==(n=r.palette[i.color])?void 0:n.main)?t:{action:r.palette.action.active,disabled:r.palette.action.disabled,inherit:void 0}[i.color]}})),v=i.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiSvgIcon"}),i=n.children,c=n.className,d=n.color,v=void 0===d?"inherit":d,g=n.component,y=void 0===g?"svg":g,x=n.fontSize,_=void 0===x?"medium":x,b=n.htmlColor,w=n.inheritViewBox,S=void 0!==w&&w,M=n.titleAccess,E=n.viewBox,T=void 0===E?"0 0 24 24":E,k=(0,a.Z)(n,p),C=(0,r.Z)({},n,{color:v,component:y,fontSize:_,inheritViewBox:S,viewBox:T}),A={};S||(A.viewBox=T);var P=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(n))]};return(0,s.Z)(i,h,r)}(C);return(0,f.jsxs)(m,(0,r.Z)({as:y,className:(0,o.Z)(P.root,c),ownerState:C,focusable:"false",color:b,"aria-hidden":!M||void 0,role:M?"img":void 0,ref:t},A,k,{children:[i,M?(0,f.jsx)("title",{children:M}):null]}))}));v.muiName="SvgIcon";var g=v;function y(e,t){var n=function(n,i){return(0,f.jsx)(g,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))};return n.muiName=g.muiName,i.memo(i.forwardRef(n))}},83199:function(e,t,n){"use strict";var r=n(93981);t.Z=r.Z},54421:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return a.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return u.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return d},setRef:function(){return h},unstable_ClassNameGenerator:function(){return _.Z},unstable_useEnhancedEffect:function(){return f.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return m},useControlled:function(){return v.Z},useEventCallback:function(){return g.Z},useForkRef:function(){return y.Z},useIsFocusVisible:function(){return x.Z}});var r=n(14036),i=n(78949).Z,a=n(76189),o=n(83199);var s=function(e,t){return function(){return null}},u=n(19103),l=n(98301),c=n(17602);n(87462);var d=function(e,t){return function(){return null}},h=n(62971).Z,f=n(40162),p=n(67384);var m=function(e,t,n,r,i){return null},v=n(98278),g=n(89683),y=n(42071),x=n(23031),_=n(87125)},19103:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(72791);var i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},98301:function(e,t,n){"use strict";var r=n(99723);t.Z=r.Z},17602:function(e,t,n){"use strict";var r=n(27979);t.Z=r.Z},98278:function(e,t,n){"use strict";var r=n(58959);t.Z=r.Z},40162:function(e,t,n){"use strict";var r=n(75721);t.Z=r.Z},89683:function(e,t,n){"use strict";var r=n(58956);t.Z=r.Z},42071:function(e,t,n){"use strict";var r=n(47563);t.Z=r.Z},67384:function(e,t,n){"use strict";var r=n(96248);t.Z=r.Z},23031:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r,i=n(72791),a=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function l(){a=!1}function c(){"hidden"===this.visibilityState&&o&&(a=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var h=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("touchstart",l,!0),t.addEventListener("visibilitychange",c,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},51184:function(e,t,n){"use strict";n.d(t,{VO:function(){return r},k9:function(){return a},W8:function(){return o},L7:function(){return s}});n(52007);var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function a(e,t,n){var a=e.theme||{};if(Array.isArray(t)){var o=a.breakpoints||i;return t.reduce((function(e,r,i){return e[o.up(o.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var s=a.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(s.values||r).indexOf(i)){e[s.up(i)]=n(t[i],i)}else{var a=i;e[a]=t[a]}return e}),{})}return n(t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},12065:function(e,t,n){"use strict";n.d(t,{mi:function(){return u},Fq:function(){return l},_j:function(){return c},$n:function(){return d}});var r=n(46189);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,o=e.substring(t+1,e.length-1);if("color"===n){if(i=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else o=o.split(",");return{type:n,values:o=o.map((function(e){return parseFloat(e)})),colorSpace:i}}function o(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},l="rgb",c=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(l+="a",c.push(t[3])),o({type:l,values:c})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,o(e)}function c(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function d(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return o(e)}},85080:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(87462),i=n(63366),a=n(82466),o=["values","unit","step"];function s(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,a=e.unit,s=void 0===a?"px":a,u=e.step,l=void 0===u?5:u,c=(0,i.Z)(e,o),d=Object.keys(n);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(s,")")}function p(e,t){var r=d.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[d[r]]?n[d[r]]:t)-l/100).concat(s,")")}return(0,r.Z)({keys:d,values:n,up:h,down:f,between:p,only:function(e){return d.indexOf(e)+1<d.length?p(e,d[d.indexOf(e)+1]):h(e)},not:function(e){var t=d.indexOf(e);return 0===t?h(d[1]):t===d.length-1?f(d[t]):p(e,d[d.indexOf(e)+1]).replace("@media","@media not all and")},unit:s},c)}var u={borderRadius:4},l=n(45682);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var d=["breakpoints","palette","spacing","shape"];var h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.palette,l=void 0===o?{}:o,h=e.spacing,f=e.shape,p=void 0===f?{}:f,m=(0,i.Z)(e,d),v=s(n),g=c(h),y=(0,a.Z)({breakpoints:v,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},l),spacing:g,shape:(0,r.Z)({},u,p)},m),x=arguments.length,_=new Array(x>1?x-1:0),b=1;b<x;b++)_[b-1]=arguments[b];return y=_.reduce((function(e,t){return(0,a.Z)(e,t)}),y)}},98247:function(e,t,n){"use strict";var r=n(82466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},45682:function(e,t,n){"use strict";n.d(t,{hB:function(){return m},eI:function(){return p},ZP:function(){return w},NA:function(){return v}});var r=n(70885),i=n(51184),a=n(18529),o=n(98247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],a=n[1],o=s[i],c=u[a]||"";return Array.isArray(c)?c.map((function(e){return o+e})):[o+c]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],f=[].concat(d,h);function p(e,t,n,r){var i=(0,a.D)(e,t)||n;return"number"===typeof i?function(e){return"string"===typeof e?e:i*e}:Array.isArray(i)?function(e){return"string"===typeof e?e:i[e]}:"function"===typeof i?i:function(){}}function m(e){return p(e,"spacing",8)}function v(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,r){if(-1===t.indexOf(n))return null;var a=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=v(t,n),e}),{})}}(c(n),r),o=e[n];return(0,i.k9)(e,o,a)}function y(e,t){var n=m(e.theme);return Object.keys(e).map((function(r){return g(e,t,r,n)})).reduce(o.Z,{})}function x(e){return y(e,d)}function _(e){return y(e,h)}function b(e){return y(e,f)}x.propTypes={},x.filterProps=d,_.propTypes={},_.filterProps=h,b.propTypes={},b.filterProps=f;var w=b},18529:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(4942),i=n(27312),a=n(51184);function o(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}function s(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,l=e.themeKey,c=e.transform,d=function(e){if(null==e[t])return null;var n=e[t],d=o(e.theme,l)||{};return(0,a.k9)(e,n,(function(e){var n=s(d,c,e);return e===n&&"string"===typeof e&&(n=s(d,c,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return d.propTypes={},d.filterProps=[t],d}},30418:function(e,t,n){"use strict";var r=n(85080),i=n(27301),a=(0,r.Z)();t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return(0,i.Z)(e)}},27301:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(72791);var i=r.createContext(null);function a(){return r.useContext(i)}function o(e){return 0===Object.keys(e).length}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=a();return!t||o(t)?e:t}},27312:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(46189);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},78949:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},93981:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){e.apply(r,a)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},82466:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(87462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?o[r]=a(e[r],t[r],n):o[r]=t[r])})),o}},46189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},99723:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},27979:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(99723);function i(e){return(0,r.Z)(e).defaultView||window}},62971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},58959:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(70885),i=n(72791);function a(e){var t=e.controlled,n=e.default,a=(e.name,e.state,i.useRef(void 0!==t).current),o=i.useState(n),s=(0,r.Z)(o,2),u=s[0],l=s[1];return[a?t:u,i.useCallback((function(e){a||l(e)}),[])]}},75721:function(e,t,n){"use strict";var r=n(72791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},58956:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(72791),i=n(75721);function a(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},47563:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(72791),i=n(62971);function a(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,i.Z)(e,n),(0,i.Z)(t,n)}}),[e,t])}},96248:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(70885),i=n(72791),a=0;function o(e){var t=i.useState(e),n=(0,r.Z)(t,2),o=n[0],s=n[1],u=e||o;return i.useEffect((function(){null==o&&s("mui-".concat(a+=1))}),[o]),u}},88926:function(e,t,n){"use strict";n.r(t),n.d(t,{Easing:function(){return r},Group:function(){return a},Interpolation:function(){return o},Sequence:function(){return s},Tween:function(){return l},VERSION:function(){return c},add:function(){return m},getAll:function(){return f},nextId:function(){return d},now:function(){return i},remove:function(){return v},removeAll:function(){return p},update:function(){return g}});var r={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-r.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*r.Bounce.In(2*e):.5*r.Bounce.Out(2*e-1)+.5}}},i="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},a=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=i()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var a=this._tweens[n[r]],o=!t;a&&!1===a.update(e,o)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=o.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*a(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var a=.5*(n-e),o=.5*(r-t),s=i*i;return(2*t-2*n+a+o)*(i*s)+(-3*t+3*n-2*a-o)*s+a*i+t}}},s=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),u=new a,l=function(){function e(e,t){void 0===t&&(t=u),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=r.Linear.None,this._interpolationFunction=o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=s.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?i()+parseFloat(e):e:i(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var a=e[i],o=Array.isArray(a),s=o?"array":typeof a,u=!o&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(u){var l=n[i];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,a)),n[i]=[a].concat(l)}if("object"!==s&&!o||!a||u)"undefined"===typeof t[i]&&(t[i]=a),o||(t[i]*=1),r[i]=u?n[i].slice().reverse():t[i]||0;else{for(var c in t[i]=o?[]:{},a)t[i][c]=a[c];r[i]=o?[]:{},this._setupProperties(a,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=i()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=i()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=i()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>a)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,u=this._chainedTweens.length;s<u;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var a=t[i]||0,o=n[i],s=Array.isArray(e[i]),u=Array.isArray(o);!s&&u?e[i]=this._interpolationFunction(o,r):"object"===typeof o&&o?this._updateProperties(e[i],a,o,r):"number"===typeof(o=this._handleRelativeValue(a,o))&&(e[i]=a+(o-a)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),c="18.6.4",d=s.nextId,h=u,f=h.getAll.bind(h),p=h.removeAll.bind(h),m=h.add.bind(h),v=h.remove.bind(h),g=h.update.bind(h),y={Easing:r,Group:a,Interpolation:o,now:i,Sequence:s,nextId:d,Tween:l,VERSION:c,getAll:f,removeAll:p,add:m,remove:v,update:g};t.default=y},81694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},28182:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})},74890:function(e){var t={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:2*Math.PI},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}};e.exports=function(e,n,r,i){if(!t.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!t[r].hasOwnProperty(n))throw new Error("Cannot convert from "+n+" to "+r);var a=t[r][n]*e;return!1!==i?(i=Math.pow(10,parseInt(i)||5),Math.round(a*i)/i):a}},10173:function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function a(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function o(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),d=i.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==d.length)return null;h=o(d.pop());case"rgb":return 3!==d.length?null:[a(d[0]),a(d[1]),a(d[2]),h];case"hsla":if(4!==d.length)return null;h=o(d.pop());case"hsl":if(3!==d.length)return null;var f=(parseFloat(d[0])%360+360)%360/360,p=o(d[1]),m=o(d[2]),v=m<=.5?m*(p+1):m+p-m*p,g=2*m-v;return[r(255*s(g,v,f+1/3)),r(255*s(g,v,f)),r(255*s(g,v,f-1/3)),h];default:return null}}return null}}catch(u){}},4234:function(e,t,n){var r;!function(i){"use strict";var a,o=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},u=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",h=Math.floor,f=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,v=9007199254740991,g=h(1286742750677284.5),y={};function x(e,t){var n,r,i,a,o,s,l,c,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),u?A(t,h):t;if(l=e.d,c=t.d,o=e.e,i=t.e,l=l.slice(),a=o-i){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),a>(s=(o=Math.ceil(h/7))>s?o+1:s+1)&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for((s=l.length)-(a=c.length)<0&&(a=s,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/m|0,l[a]%=m;for(n&&(l.unshift(n),++i),s=l.length;0==l[--s];)l.pop();return t.d=l,t.e=i,u?A(t,h):t}function _(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=T(n)),a+=r;(n=7-(r=(o=e[t])+"").length)&&(a+=T(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return a+o}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,n=(r=a.d.length)<(i=e.d.length)?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return A(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return M(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(a)?new r(0):(u=!1,t=w(k(n,o),k(e,o),o),u=!0,A(t,i))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?P(t,e):x(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(u=!1,t=w(n,e,0,1).times(e),u=!0,n.minus(t)):A(new r(n),i)},y.naturalExponential=y.exp=function(){return S(this)},y.naturalLogarithm=y.ln=function(){return k(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x(t,e):P(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=M(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,a,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(l+"NaN")}for(e=M(s),u=!1,0==(i=Math.sqrt(+s))||i==1/0?(((t=b(s.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),r=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new c(i.toString()),i=o=(n=c.precision)+3;;)if(r=(a=r).plus(w(s,a,o+2)).times(.5),b(a.d).slice(0,o)===(t=b(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&"4999"==t){if(A(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if("9999"!=t)break;o+=4}return u=!0,A(r,n)},y.times=y.mul=function(e){var t,n,r,i,a,o,s,l,c,d=this,h=d.constructor,f=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(l=f.length)<(c=p.length)&&(a=f,f=p,p=a,o=l,l=c,c=o),a=[],r=o=l+c;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=l+r;i>r;)s=a[i]+p[r]*f[i-r-1]+t,a[i--]=s%m|0,t=s/m|0;a[i]=(a[i]+t)%m|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,u?A(e,h.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(_(e,0,o),void 0===t?t=r.rounding:_(t,0,8),A(n,e+M(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=O(r,!0):(_(e,0,o),void 0===t?t=i.rounding:_(t,0,8),n=O(r=A(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?O(i):(_(e,0,o),void 0===t?t=a.rounding:_(t,0,8),n=O((r=A(new a(i),e+M(i)+1,t)).abs(),!1,e+M(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return A(new t(e),M(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,i,o,s,c=this,d=c.constructor,f=+(e=new d(e));if(!e.s)return new d(a);if(!(c=new d(c)).s){if(e.s<1)throw Error(l+"Infinity");return c}if(c.eq(a))return c;if(r=d.precision,e.eq(a))return A(c,r);if(s=(t=e.e)>=(n=e.d.length-1),o=c.s,s){if((n=f<0?-f:f)<=v){for(i=new d(a),t=Math.ceil(r/7+4),u=!1;n%2&&L((i=i.times(c)).d,t),0!==(n=h(n/2));)L((c=c.times(c)).d,t);return u=!0,e.s<0?new d(a).div(i):A(i,r)}}else if(o<0)throw Error(l+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,c.s=1,u=!1,i=e.times(k(c,r+12)),u=!0,(i=S(i)).s=o,i},y.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=O(i,(n=M(i))<=a.toExpNeg||n>=a.toExpPos):(_(e,1,o),void 0===t?t=a.rounding:_(t,0,8),r=O(i=A(new a(i),e,t),e<=(n=M(i))||n<=a.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(_(e,1,o),void 0===t?t=n.rounding:_(t,0,8)),A(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=M(e),n=e.constructor;return O(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%m|0,r=n/m|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*m+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o){var s,u,c,d,h,f,p,v,g,y,x,_,b,w,S,E,T,k,C=r.constructor,P=r.s==i.s?1:-1,O=r.d,L=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(l+"Division by zero");for(u=r.e-i.e,T=L.length,S=O.length,v=(p=new C(P)).d=[],c=0;L[c]==(O[c]||0);)++c;if(L[c]>(O[c]||0)&&--u,(_=null==a?a=C.precision:o?a+(M(r)-M(i))+1:a)<0)return new C(0);if(_=_/7+2|0,c=0,1==T)for(d=0,L=L[0],_++;(c<S||d)&&_--;c++)b=d*m+(O[c]||0),v[c]=b/L|0,d=b%L|0;else{for((d=m/(L[0]+1)|0)>1&&(L=e(L,d),O=e(O,d),T=L.length,S=O.length),w=T,y=(g=O.slice(0,T)).length;y<T;)g[y++]=0;(k=L.slice()).unshift(0),E=L[0],L[1]>=m/2&&++E;do{d=0,(s=t(L,g,T,y))<0?(x=g[0],T!=y&&(x=x*m+(g[1]||0)),(d=x/E|0)>1?(d>=m&&(d=m-1),1==(s=t(h=e(L,d),g,f=h.length,y=g.length))&&(d--,n(h,T<f?k:L,f))):(0==d&&(s=d=1),h=L.slice()),(f=h.length)<y&&h.unshift(0),n(g,h,y),-1==s&&(s=t(L,g,T,y=g.length))<1&&(d++,n(g,T<y?k:L,y)),y=g.length):0===s&&(d++,g=[0]),v[c++]=d,s&&g[0]?g[y++]=O[w]||0:(g=[O[w]],y=1)}while((w++<S||void 0!==g[0])&&_--)}return v[0]||v.shift(),p.e=u,A(p,o?a+M(p)+1:a)}}();function S(e,t){var n,r,i,o,s,l=0,c=0,h=e.constructor,p=h.precision;if(M(e)>16)throw Error(d+M(e));if(!e.s)return new h(a);for(null==t?(u=!1,s=p):s=t,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(s+=Math.log(f(2,c))/Math.LN10*2+5|0,n=r=i=new h(a),h.precision=s;;){if(r=A(r.times(e),s),n=n.times(++l),b((o=i.plus(w(r,n,s))).d).slice(0,s)===b(i.d).slice(0,s)){for(;c--;)i=A(i.times(i),s);return h.precision=p,null==t?(u=!0,A(i,p)):i}i=o}}function M(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw u=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return A(new e(e.LN10),t)}function T(e){for(var t="";e--;)t+="0";return t}function k(e,t){var n,r,i,o,s,c,d,h,f,p=1,m=e,v=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(a))return new g(0);if(null==t?(u=!1,h=y):h=t,m.eq(10))return null==t&&(u=!0),E(g,h);if(h+=10,g.precision=h,r=(n=b(v)).charAt(0),o=M(m),!(Math.abs(o)<15e14))return d=E(g,h+2,y).times(o+""),m=k(new g(r+"."+n.slice(1)),h-10).plus(d),g.precision=y,null==t?(u=!0,A(m,y)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((m=m.times(e)).d)).charAt(0),p++;for(o=M(m),r>1?(m=new g("0."+n),o++):m=new g(r+"."+n.slice(1)),c=s=m=w(m.minus(a),m.plus(a),h),f=A(m.times(m),h),i=3;;){if(s=A(s.times(f),h),b((d=c.plus(w(s,new g(i),h))).d).slice(0,h)===b(c.d).slice(0,h))return c=c.times(2),0!==o&&(c=c.plus(E(g,h+2,y).times(o+""))),c=w(c,new g(p),h),g.precision=y,null==t?(u=!0,A(c,y)):c;c=d,i+=2}}function C(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=h(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),u&&(e.e>g||e.e<-g))throw Error(d+n)}else e.s=0,e.e=0,e.d=[0];return e}function A(e,t,n){var r,i,a,o,s,l,c,p,v=e.d;for(o=1,a=v[0];a>=10;a/=10)o++;if((r=t-o)<0)r+=7,i=t,c=v[p=0];else{if((p=Math.ceil((r+1)/7))>=(a=v.length))return e;for(c=a=v[p],o=1;a>=10;a/=10)o++;i=(r%=7)-7+o}if(void 0!==n&&(s=c/(a=f(10,o-i-1))%10|0,l=t<0||void 0!==v[p+1]||c%a,l=n<4?(s||l)&&(0==n||n==(e.s<0?3:2)):s>5||5==s&&(4==n||l||6==n&&(r>0?i>0?c/f(10,o-i):0:v[p-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return l?(a=M(e),v.length=1,t=t-a-1,v[0]=f(10,(7-t%7)%7),e.e=h(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==r?(v.length=p,a=1,p--):(v.length=p+1,a=f(10,7-r),v[p]=i>0?(c/f(10,o-i)%f(10,i)|0)*a:0),l)for(;;){if(0==p){(v[0]+=a)==m&&(v[0]=1,++e.e);break}if(v[p]+=a,v[p]!=m)break;v[p--]=0,a=1}for(r=v.length;0===v[--r];)v.pop();if(u&&(e.e>g||e.e<-g))throw Error(d+M(e));return e}function P(e,t){var n,r,i,a,o,s,l,c,d,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),u?A(t,p):t;if(l=e.d,h=t.d,r=t.e,c=e.e,l=l.slice(),o=c-r){for((d=o<0)?(n=l,o=-o,s=h.length):(n=h,r=c,s=l.length),o>(i=Math.max(Math.ceil(p/7),s)+2)&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for((d=(i=l.length)<(s=h.length))&&(s=i),i=0;i<s;i++)if(l[i]!=h[i]){d=l[i]<h[i];break}o=0}for(d&&(n=l,l=h,h=n,t.s=-t.s),s=l.length,i=h.length-s;i>0;--i)l[s++]=0;for(i=h.length;i>o;){if(l[--i]<h[i]){for(a=i;a&&0===l[--a];)l[a]=m-1;--l[a],l[i]+=m}l[i]-=h[i]}for(;0===l[--s];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=r,u?A(t,p):t):new f(0)}function O(e,t,n){var r,i=M(e),a=b(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+T(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+T(-i-1)+a,n&&(r=n-o)>0&&(a+=T(r))):i>=o?(a+=T(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+T(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=T(r))),e.s<0?"-"+a:a}function L(e,t){if(e.length>t)return e.length=t,!0}function R(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(h(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}s=function e(t){var n,r,i;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);C(t,e)}if(a.prototype=y,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=R,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(s),s.default=s.Decimal=s,a=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},97143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,a),!0;case 6:return c.fn.call(c.context,t,r,i,a,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(h=1,u=new Array(d-1);h<d;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},25244:function(e,t){!function(e){"use strict";var t="function"===typeof WeakSet,n=Object.keys;function r(e,t){return e===t||e!==e&&t!==t}function i(e){return e.constructor===Object||null==e.constructor}function a(e){return!!e&&"function"===typeof e.then}function o(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var u=t?function(){return new WeakSet}:s;function l(e){return function(t){var n=e||t;return function(e,t,r){void 0===r&&(r=u());var i=!!e&&"object"===typeof e,a=!!t&&"object"===typeof t;if(i||a){var o=i&&r.has(e),s=a&&r.has(t);if(o||s)return o&&s;i&&r.add(e),a&&r.add(t)}return n(e,t,r)}}}function c(e,t,n,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n(e[i],t[i],r))return!1;return!0}function d(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var a={};e.forEach((function(e,o){if(i){var s=!1,u=0;t.forEach((function(t,i){s||a[u]||(s=n(o,i,r)&&n(e,t,r))&&(a[u]=!0),u++})),i=s}}))}return i}var h="_owner",f=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function p(e,t,r,i){var a=n(e),s=a.length;if(n(t).length!==s)return!1;if(s)for(var u=void 0;s-- >0;){if((u=a[s])===h){var l=o(e),c=o(t);if((l||c)&&l!==c)return!1}if(!f(t,u)||!r(e[u],t[u],i))return!1}return!0}function m(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}function v(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var a={};e.forEach((function(e){if(i){var o=!1,s=0;t.forEach((function(t){o||a[s]||(o=n(e,t,r))&&(a[s]=!0),s++})),i=o}}))}return i}var g="function"===typeof Map,y="function"===typeof Set;function x(e){var t="function"===typeof e?e(n):n;function n(e,n,o){if(e===n)return!0;if(e&&n&&"object"===typeof e&&"object"===typeof n){if(i(e)&&i(n))return p(e,n,t,o);var s=Array.isArray(e),u=Array.isArray(n);return s||u?s===u&&c(e,n,t,o):(s=e instanceof Date,u=n instanceof Date,s||u?s===u&&r(e.getTime(),n.getTime()):(s=e instanceof RegExp,u=n instanceof RegExp,s||u?s===u&&m(e,n):a(e)||a(n)?e===n:g&&(s=e instanceof Map,u=n instanceof Map,s||u)?s===u&&d(e,n,t,o):y&&(s=e instanceof Set,u=n instanceof Set,s||u)?s===u&&v(e,n,t,o):p(e,n,t,o)))}return e!==e&&n!==n}return n}var _=x(),b=x((function(){return r})),w=x(l()),S=x(l(r));e.circularDeepEqual=w,e.circularShallowEqual=S,e.createCustomEqual=x,e.deepEqual=_,e.sameValueZeroEqual=r,e.shallowEqual=b,Object.defineProperty(e,"__esModule",{value:!0})}(t)},62110:function(e,t,n){"use strict";var r=n(48309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=u(t),m=u(n),v=0;v<o.length;++v){var g=o[v];if(!a[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=h(n,g);try{l(t,g,y)}catch(x){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case h:case v:case m:case u:return e;default:return t}}case i:return t}}}function w(e){return b(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||b(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===x||e.$$typeof===_||e.$$typeof===g)},t.typeOf=b},48309:function(e,t,n){"use strict";e.exports=n(746)},50908:function(e,t,n){var r=n(68136)(n(97009),"DataView");e.exports=r},29676:function(e,t,n){var r=n(85403),i=n(62747),a=n(16037),o=n(94154),s=n(77728);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},38384:function(e,t,n){var r=n(43894),i=n(8699),a=n(64957),o=n(87184),s=n(87109);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},95797:function(e,t,n){var r=n(68136)(n(97009),"Map");e.exports=r},78059:function(e,t,n){var r=n(34086),i=n(9255),a=n(29186),o=n(13423),s=n(73739);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},78319:function(e,t,n){var r=n(68136)(n(97009),"Promise");e.exports=r},23924:function(e,t,n){var r=n(68136)(n(97009),"Set");e.exports=r},20692:function(e,t,n){var r=n(78059),i=n(35774),a=n(41596);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},22854:function(e,t,n){var r=n(38384),i=n(20511),a=n(50835),o=n(90707),s=n(18832),u=n(35077);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,e.exports=l},87197:function(e,t,n){var r=n(97009).Symbol;e.exports=r},46219:function(e,t,n){var r=n(97009).Uint8Array;e.exports=r},7091:function(e,t,n){var r=n(68136)(n(97009),"WeakMap");e.exports=r},13665:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},18573:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},84903:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},59055:function(e,t,n){var r=n(24842);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},32683:function(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},47538:function(e,t,n){var r=n(86478),i=n(34963),a=n(93629),o=n(5174),s=n(26800),u=n(19102),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),c=!n&&i(e),d=!n&&!c&&o(e),h=!n&&!c&&!d&&u(e),f=n||c||d||h,p=f?r(e.length,String):[],m=p.length;for(var v in e)!t&&!l.call(e,v)||f&&("length"==v||d&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||p.push(v);return p}},68950:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},41705:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},47897:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},54622:function(e){e.exports=function(e){return e.split("")}},27112:function(e,t,n){var r=n(29231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},32526:function(e,t,n){var r=n(48528);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},87927:function(e,t,n){var r=n(15358),i=n(67056)(r);e.exports=i},39863:function(e,t,n){var r=n(87927);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},43079:function(e,t,n){var r=n(70152);e.exports=function(e,t,n){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(null!=s&&(void 0===u?s===s&&!r(s):n(s,u)))var u=s,l=o}return l}},2045:function(e){e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},55182:function(e,t,n){var r=n(41705),i=n(73529);e.exports=function e(t,n,a,o,s){var u=-1,l=t.length;for(a||(a=i),s||(s=[]);++u<l;){var c=t[u];n>0&&a(c)?n>1?e(c,n-1,a,o,s):r(s,c):o||(s[s.length]=c)}return s}},85099:function(e,t,n){var r=n(30372)();e.exports=r},15358:function(e,t,n){var r=n(85099),i=n(12742);e.exports=function(e,t){return e&&r(e,t,i)}},98667:function(e,t,n){var r=n(43082),i=n(69793);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},61986:function(e,t,n){var r=n(41705),i=n(93629);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},39066:function(e,t,n){var r=n(87197),i=n(81587),a=n(43581),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},81954:function(e){e.exports=function(e,t){return e>t}},90529:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},24842:function(e,t,n){var r=n(2045),i=n(50505),a=n(77167);e.exports=function(e,t,n){return t===t?a(e,t,n):r(e,i,n)}},4906:function(e,t,n){var r=n(39066),i=n(43141);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},71848:function(e,t,n){var r=n(93355),i=n(43141);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,o,e,s))}},93355:function(e,t,n){var r=n(22854),i=n(15305),a=n(92206),o=n(88078),s=n(88383),u=n(93629),l=n(5174),c=n(19102),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,v,g){var y=u(e),x=u(t),_=y?h:s(e),b=x?h:s(t),w=(_=_==d?f:_)==f,S=(b=b==d?f:b)==f,M=_==b;if(M&&l(e)){if(!l(t))return!1;y=!0,w=!1}if(M&&!w)return g||(g=new r),y||c(e)?i(e,t,n,m,v,g):a(e,t,_,n,m,v,g);if(!(1&n)){var E=w&&p.call(e,"__wrapped__"),T=S&&p.call(t,"__wrapped__");if(E||T){var k=E?e.value():e,C=T?t.value():t;return g||(g=new r),v(k,C,n,m,g)}}return!!M&&(g||(g=new r),o(e,t,n,m,v,g))}},8856:function(e,t,n){var r=n(22854),i=n(71848);e.exports=function(e,t,n,a){var o=n.length,s=o,u=!a;if(null==e)return!s;for(e=Object(e);o--;){var l=n[o];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var c=(l=n[o])[0],d=e[c],h=l[1];if(u&&l[2]){if(void 0===d&&!(c in e))return!1}else{var f=new r;if(a)var p=a(d,h,c,e,t,f);if(!(void 0===p?i(h,d,3,a,f):p))return!1}}return!0}},50505:function(e){e.exports=function(e){return e!==e}},26703:function(e,t,n){var r=n(74786),i=n(257),a=n(8092),o=n(27907),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,d=l.hasOwnProperty,h=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:s).test(o(e))}},68150:function(e,t,n){var r=n(39066),i=n(24635),a=n(43141),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},56025:function(e,t,n){var r=n(97080),i=n(24322),a=n(2100),o=n(93629),s=n(10038);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},43654:function(e,t,n){var r=n(62936),i=n(75964),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},92580:function(e){e.exports=function(e,t){return e<t}},53849:function(e,t,n){var r=n(87927),i=n(21473);e.exports=function(e,t){var n=-1,a=i(e)?Array(e.length):[];return r(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}},97080:function(e,t,n){var r=n(8856),i=n(79091),a=n(50284);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},24322:function(e,t,n){var r=n(71848),i=n(26181),a=n(75658),o=n(25823),s=n(25072),u=n(50284),l=n(69793);e.exports=function(e,t){return o(e)&&s(t)?u(l(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},93226:function(e,t,n){var r=n(68950),i=n(98667),a=n(56025),o=n(53849),s=n(19179),u=n(16194),l=n(94480),c=n(2100),d=n(93629);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var h=-1;t=r(t,u(a));var f=o(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return s(f,(function(e,t){return l(e,t,n)}))}},9586:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4084:function(e,t,n){var r=n(98667);e.exports=function(e){return function(t){return r(t,e)}}},7255:function(e){var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,a){for(var o=-1,s=n(t((r-e)/(i||1)),0),u=Array(s);s--;)u[a?s:++o]=e,e+=i;return u}},58794:function(e,t,n){var r=n(2100),i=n(64262),a=n(79156);e.exports=function(e,t){return a(i(e,t,r),e+"")}},7532:function(e,t,n){var r=n(71547),i=n(48528),a=n(2100),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},2646:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},59204:function(e,t,n){var r=n(87927);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},19179:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},86478:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2446:function(e,t,n){var r=n(87197),i=n(68950),a=n(93629),o=n(70152),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},20821:function(e,t,n){var r=n(26050),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},16194:function(e){e.exports=function(e){return function(t){return e(t)}}},39602:function(e,t,n){var r=n(20692),i=n(59055),a=n(32683),o=n(60075),s=n(77730),u=n(22230);e.exports=function(e,t,n){var l=-1,c=i,d=e.length,h=!0,f=[],p=f;if(n)h=!1,c=a;else if(d>=200){var m=t?null:s(e);if(m)return u(m);h=!1,c=o,p=new r}else p=t?[]:f;e:for(;++l<d;){var v=e[l],g=t?t(v):v;if(v=n||0!==v?v:0,h&&g===g){for(var y=p.length;y--;)if(p[y]===g)continue e;t&&p.push(g),f.push(v)}else c(p,g,n)||(p!==f&&p.push(g),f.push(v))}return f}},60075:function(e){e.exports=function(e,t){return e.has(t)}},43082:function(e,t,n){var r=n(93629),i=n(25823),a=n(10170),o=n(63518);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},69813:function(e,t,n){var r=n(2646);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},88558:function(e,t,n){var r=n(70152);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,a=e===e,o=r(e),s=void 0!==t,u=null===t,l=t===t,c=r(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!a)return 1;if(!i&&!o&&!c&&e<t||c&&n&&a&&!i&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}},94480:function(e,t,n){var r=n(88558);e.exports=function(e,t,n){for(var i=-1,a=e.criteria,o=t.criteria,s=a.length,u=n.length;++i<s;){var l=r(a[i],o[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}},65525:function(e,t,n){var r=n(97009)["__core-js_shared__"];e.exports=r},67056:function(e,t,n){var r=n(21473);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},30372:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}},10322:function(e,t,n){var r=n(69813),i=n(47302),a=n(27580),o=n(63518);e.exports=function(e){return function(t){t=o(t);var n=i(t)?a(t):void 0,s=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return s[e]()+u}}},95481:function(e,t,n){var r=n(56025),i=n(21473),a=n(12742);e.exports=function(e){return function(t,n,o){var s=Object(t);if(!i(t)){var u=r(n,3);t=a(t),n=function(e){return u(s[e],e,s)}}var l=e(t,n,o);return l>-1?s[u?t[l]:l]:void 0}}},56381:function(e,t,n){var r=n(7255),i=n(3195),a=n(91495);e.exports=function(e){return function(t,n,o){return o&&"number"!=typeof o&&i(t,n,o)&&(n=o=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),o=void 0===o?t<n?1:-1:a(o),r(t,n,o,e)}}},77730:function(e,t,n){var r=n(23924),i=n(19694),a=n(22230),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},48528:function(e,t,n){var r=n(68136),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},15305:function(e,t,n){var r=n(20692),i=n(47897),a=n(60075);e.exports=function(e,t,n,o,s,u){var l=1&n,c=e.length,d=t.length;if(c!=d&&!(l&&d>c))return!1;var h=u.get(e),f=u.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,v=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<c;){var g=e[p],y=t[p];if(o)var x=l?o(y,g,p,t,e,u):o(g,y,p,e,t,u);if(void 0!==x){if(x)continue;m=!1;break}if(v){if(!i(t,(function(e,t){if(!a(v,t)&&(g===e||s(g,e,n,o,u)))return v.push(t)}))){m=!1;break}}else if(g!==y&&!s(g,y,n,o,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},92206:function(e,t,n){var r=n(87197),i=n(46219),a=n(29231),o=n(15305),s=n(90234),u=n(22230),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=u),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var v=o(f(e),f(t),r,l,d,h);return h.delete(e),v;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},88078:function(e,t,n){var r=n(38248),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var u=1&n,l=r(e),c=l.length;if(c!=r(t).length&&!u)return!1;for(var d=c;d--;){var h=l[d];if(!(u?h in t:i.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var v=u;++d<c;){var g=e[h=l[d]],y=t[h];if(a)var x=u?a(y,g,h,t,e,s):a(g,y,h,e,t,s);if(!(void 0===x?g===y||o(g,y,n,a,s):x)){m=!1;break}v||(v="constructor"==h)}if(m&&!v){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(m=!1)}return s.delete(e),s.delete(t),m}},31032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},38248:function(e,t,n){var r=n(61986),i=n(65918),a=n(12742);e.exports=function(e){return r(e,a,i)}},32799:function(e,t,n){var r=n(55964);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},79091:function(e,t,n){var r=n(25072),i=n(12742);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},68136:function(e,t,n){var r=n(26703),i=n(30040);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},81587:function(e,t,n){var r=n(87197),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},65918:function(e,t,n){var r=n(84903),i=n(68174),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},88383:function(e,t,n){var r=n(50908),i=n(95797),a=n(78319),o=n(23924),s=n(7091),u=n(39066),l=n(27907),c="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=l(r),v=l(i),g=l(a),y=l(o),x=l(s),_=u;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=c||a&&_(a.resolve())!=d||o&&_(new o)!=h||s&&_(new s)!=f)&&(_=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case m:return p;case v:return c;case g:return d;case y:return h;case x:return f}return t}),e.exports=_},30040:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},86417:function(e,t,n){var r=n(43082),i=n(34963),a=n(93629),o=n(26800),s=n(24635),u=n(69793);e.exports=function(e,t,n){for(var l=-1,c=(t=r(t,e)).length,d=!1;++l<c;){var h=u(t[l]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++l!=c?d:!!(c=null==e?0:e.length)&&s(c)&&o(h,c)&&(a(e)||i(e))}},47302:function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},85403:function(e,t,n){var r=n(49620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},62747:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},16037:function(e,t,n){var r=n(49620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},94154:function(e,t,n){var r=n(49620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},77728:function(e,t,n){var r=n(49620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},73529:function(e,t,n){var r=n(87197),i=n(34963),a=n(93629),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},26800:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},3195:function(e,t,n){var r=n(29231),i=n(21473),a=n(26800),o=n(8092);e.exports=function(e,t,n){if(!o(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&a(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},25823:function(e,t,n){var r=n(93629),i=n(70152),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=t&&e in Object(t))}},55964:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:function(e,t,n){var r=n(65525),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},62936:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},25072:function(e,t,n){var r=n(8092);e.exports=function(e){return e===e&&!r(e)}},43894:function(e){e.exports=function(){this.__data__=[],this.size=0}},8699:function(e,t,n){var r=n(27112),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},64957:function(e,t,n){var r=n(27112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},87184:function(e,t,n){var r=n(27112);e.exports=function(e){return r(this.__data__,e)>-1}},87109:function(e,t,n){var r=n(27112);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},34086:function(e,t,n){var r=n(29676),i=n(38384),a=n(95797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},9255:function(e,t,n){var r=n(32799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},29186:function(e,t,n){var r=n(32799);e.exports=function(e){return r(this,e).get(e)}},13423:function(e,t,n){var r=n(32799);e.exports=function(e){return r(this,e).has(e)}},73739:function(e,t,n){var r=n(32799);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},90234:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},50284:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},14634:function(e,t,n){var r=n(49151);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},49620:function(e,t,n){var r=n(68136)(Object,"create");e.exports=r},75964:function(e,t,n){var r=n(12709)(Object.keys,Object);e.exports=r},49494:function(e,t,n){e=n.nmd(e);var r=n(31032),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},43581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},12709:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},64262:function(e,t,n){var r=n(13665),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),u=Array(s);++o<s;)u[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=n(u),r(e,this,l)}}},97009:function(e,t,n){var r=n(31032),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},35774:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},41596:function(e){e.exports=function(e){return this.__data__.has(e)}},22230:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},79156:function(e,t,n){var r=n(7532),i=n(83197)(r);e.exports=i},83197:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},20511:function(e,t,n){var r=n(38384);e.exports=function(){this.__data__=new r,this.size=0}},50835:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},90707:function(e){e.exports=function(e){return this.__data__.get(e)}},18832:function(e){e.exports=function(e){return this.__data__.has(e)}},35077:function(e,t,n){var r=n(38384),i=n(95797),a=n(78059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},77167:function(e){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},27580:function(e,t,n){var r=n(54622),i=n(47302),a=n(42110);e.exports=function(e){return i(e)?a(e):r(e)}},10170:function(e,t,n){var r=n(14634),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},69793:function(e,t,n){var r=n(70152);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},27907:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},42110:function(e){var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+r+")"+"?",u="[\\ufe0e\\ufe0f]?",l=u+s+("(?:\\u200d(?:"+[i,a,o].join("|")+")"+u+s+")*"),c="(?:"+[i+n+"?",n,a,o,t].join("|")+")",d=RegExp(r+"(?="+r+")|"+c+l,"g");e.exports=function(e){return e.match(d)||[]}},71547:function(e){e.exports=function(e){return function(){return e}}},48573:function(e,t,n){var r=n(8092),i=n(50072),a=n(42582),o=Math.max,s=Math.min;e.exports=function(e,t,n){var u,l,c,d,h,f,p=0,m=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=u,r=l;return u=l=void 0,p=t,d=e.apply(r,n)}function x(e){return p=e,h=setTimeout(b,t),m?y(e):d}function _(e){var n=e-f;return void 0===f||n>=t||n<0||v&&e-p>=c}function b(){var e=i();if(_(e))return w(e);h=setTimeout(b,function(e){var n=t-(e-f);return v?s(n,c-(e-p)):n}(e))}function w(e){return h=void 0,g&&u?y(e):(u=l=void 0,d)}function S(){var e=i(),n=_(e);if(u=arguments,l=this,f=e,n){if(void 0===h)return x(f);if(v)return clearTimeout(h),h=setTimeout(b,t),y(f)}return void 0===h&&(h=setTimeout(b,t)),d}return t=a(t)||0,r(n)&&(m=!!n.leading,c=(v="maxWait"in n)?o(a(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g),S.cancel=function(){void 0!==h&&clearTimeout(h),p=0,u=f=l=h=void 0},S.flush=function(){return void 0===h?d:w(i())},S}},29231:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},82730:function(e,t,n){var r=n(18573),i=n(39863),a=n(56025),o=n(93629),s=n(3195);e.exports=function(e,t,n){var u=o(e)?r:i;return n&&s(e,t,n)&&(t=void 0),u(e,a(t,3))}},61211:function(e,t,n){var r=n(95481)(n(51475));e.exports=r},51475:function(e,t,n){var r=n(2045),i=n(56025),a=n(39753),o=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var u=null==n?0:a(n);return u<0&&(u=o(s+u,0)),r(e,i(t,3),u)}},5008:function(e,t,n){var r=n(55182),i=n(72034);e.exports=function(e,t){return r(i(e,t),1)}},26181:function(e,t,n){var r=n(98667);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},75658:function(e,t,n){var r=n(90529),i=n(86417);e.exports=function(e,t){return null!=e&&i(e,t,r)}},2100:function(e){e.exports=function(e){return e}},34963:function(e,t,n){var r=n(4906),i=n(43141),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},93629:function(e){var t=Array.isArray;e.exports=t},21473:function(e,t,n){var r=n(74786),i=n(24635);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},65127:function(e,t,n){var r=n(39066),i=n(43141);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},5174:function(e,t,n){e=n.nmd(e);var r=n(97009),i=n(49488),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u},18111:function(e,t,n){var r=n(71848);e.exports=function(e,t){return r(e,t)}},74786:function(e,t,n){var r=n(39066),i=n(8092);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},24635:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},82066:function(e,t,n){var r=n(30298);e.exports=function(e){return r(e)&&e!=+e}},42854:function(e){e.exports=function(e){return null==e}},30298:function(e,t,n){var r=n(39066),i=n(43141);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},43141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},26769:function(e,t,n){var r=n(39066),i=n(93629),a=n(43141);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==r(e)}},70152:function(e,t,n){var r=n(39066),i=n(43141);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},19102:function(e,t,n){var r=n(68150),i=n(16194),a=n(49494),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},12742:function(e,t,n){var r=n(47538),i=n(43654),a=n(21473);e.exports=function(e){return a(e)?r(e):i(e)}},15727:function(e){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},72034:function(e,t,n){var r=n(68950),i=n(56025),a=n(53849),o=n(93629);e.exports=function(e,t){return(o(e)?r:a)(e,i(t,3))}},37702:function(e,t,n){var r=n(32526),i=n(15358),a=n(56025);e.exports=function(e,t){var n={};return t=a(t,3),i(e,(function(e,i,a){r(n,i,t(e,i,a))})),n}},29627:function(e,t,n){var r=n(43079),i=n(81954),a=n(2100);e.exports=function(e){return e&&e.length?r(e,a,i):void 0}},49151:function(e,t,n){var r=n(78059);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},66452:function(e,t,n){var r=n(43079),i=n(92580),a=n(2100);e.exports=function(e){return e&&e.length?r(e,a,i):void 0}},19694:function(e){e.exports=function(){}},50072:function(e,t,n){var r=n(97009);e.exports=function(){return r.Date.now()}},10038:function(e,t,n){var r=n(9586),i=n(4084),a=n(25823),o=n(69793);e.exports=function(e){return a(e)?r(o(e)):i(e)}},66222:function(e,t,n){var r=n(56381)();e.exports=r},14064:function(e,t,n){var r=n(47897),i=n(56025),a=n(59204),o=n(93629),s=n(3195);e.exports=function(e,t,n){var u=o(e)?r:a;return n&&s(e,t,n)&&(t=void 0),u(e,i(t,3))}},64286:function(e,t,n){var r=n(55182),i=n(93226),a=n(58794),o=n(3195),s=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},68174:function(e){e.exports=function(){return[]}},49488:function(e){e.exports=function(){return!1}},33038:function(e,t,n){var r=n(48573),i=n(8092);e.exports=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:a,maxWait:t,trailing:o})}},91495:function(e,t,n){var r=n(42582),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},39753:function(e,t,n){var r=n(91495);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},42582:function(e,t,n){var r=n(20821),i=n(8092),a=n(70152),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}},63518:function(e,t,n){var r=n(2446);e.exports=function(e){return null==e?"":r(e)}},66339:function(e,t,n){var r=n(56025),i=n(39602);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},52085:function(e,t,n){var r=n(10322)("toUpperCase");e.exports=r},31725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var d=0;d<s.length;d++)r.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},48872:function(e){(function(){var t,n,r,i,a,o;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-a)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),o=1e9*process.uptime(),a=i-o):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},80888:function(e,t,n){"use strict";var r=n(79047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},52007:function(e,t,n){e.exports=n(80888)()},79047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},55475:function(e,t,n){for(var r=n(48872),i="undefined"===typeof window?n.g:window,a=["moz","webkit"],o="AnimationFrame",s=i["request"+o],u=i["cancel"+o]||i["cancelRequest"+o],l=0;!s&&l<a.length;l++)s=i[a[l]+"Request"+o],u=i[a[l]+"Cancel"+o]||i[a[l]+"CancelRequest"+o];if(!s||!u){var c=0,d=0,h=[];s=function(e){if(0===h.length){var t=r(),n=Math.max(0,16.666666666666668-(t-c));c=n+t,setTimeout((function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return h.push({handle:++d,callback:e,cancelled:!1}),d},u=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}},15950:function(e){e.exports=function(){"use strict";function e(e,r,i,a,o){!function e(n,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-u*c/s+d)),Math.min(a,Math.floor(r+(s-u)*c/s+d)),o)}var h=n[r],f=i,p=a;for(t(n,i,r),o(n[a],h)>0&&t(n,i,a);f<p;){for(t(n,f,p),f++,p--;o(n[f],h)<0;)f++;for(;o(n[p],h)>0;)p--}0===o(n[i],h)?t(n,i,p):t(n,++p,a),p<=r&&(i=p+1),r<=p&&(a=p-1)}}(e,r,i||0,a||e.length-1,o||n)}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}var r=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function a(e,t){o(e,0,e.children.length,t,e)}function o(e,t,n,r,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=t;a<n;a++){var o=e.children[a];s(i,e.leaf?r(o):o)}return i}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function l(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function p(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;e(t,s,n,r,a),o.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(e){var t=this.data,n=[];if(!f(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var a=0;a<t.children.length;a++){var o=t.children[a],s=t.leaf?r(o):o;f(e,s)&&(t.leaf?n.push(o):h(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n},r.prototype.collides=function(e){var t=this.data;if(!f(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],a=t.leaf?this.toBBox(i):i;if(f(e,a)){if(t.leaf||h(e,a))return!0;n.push(i)}}t=n.pop()}return!1},r.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(e,t){if(!e)return this;for(var n,r,a,o=this.data,s=this.toBBox(e),u=[],l=[];o||u.length;){if(o||(o=u.pop(),r=u[u.length-1],n=l.pop(),a=!0),o.leaf){var c=i(e,o.children,t);if(-1!==c)return o.children.splice(c,1),u.push(o),this._condense(u),this}a||o.leaf||!h(o,s)?r?(n++,o=r.children[n],a=!1):o=null:(u.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(e){return e},r.prototype.compareMinX=function(e,t){return e.minX-t.minX},r.prototype.compareMinY=function(e,t){return e.minY-t.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(e){return this.data=e,this},r.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},r.prototype._build=function(e,t,n,r){var i,o=n-t+1,s=this._maxEntries;if(o<=s)return a(i=p(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=p([])).leaf=!1,i.height=r;var u=Math.ceil(o/s),l=u*Math.ceil(Math.sqrt(s));m(e,t,n,l,this.compareMinX);for(var c=t;c<=n;c+=l){var d=Math.min(c+l-1,n);m(e,c,d,u,this.compareMinY);for(var h=c;h<=d;h+=u){var f=Math.min(h+u-1,d);i.children.push(this._build(e,h,f,r-1))}}return a(i,this.toBBox),i},r.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<t.children.length;s++){var u=t.children[s],l=c(u),d=(h=e,f=u,(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-l);d<a?(a=d,i=l<i?l:i,o=u):d===a&&l<i&&(i=l,o=u)}t=o||t.children[0]}var h,f;return t},r.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),s(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},r.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=p(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(e,t){this.data=p([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(e,t,n){for(var r,i,a,s,u,l,d,h=1/0,f=1/0,p=t;p<=n-t;p++){var m=o(e,0,p,this.toBBox),v=o(e,p,n,this.toBBox),g=(i=m,a=v,s=void 0,u=void 0,l=void 0,d=void 0,s=Math.max(i.minX,a.minX),u=Math.max(i.minY,a.minY),l=Math.min(i.maxX,a.maxX),d=Math.min(i.maxY,a.maxY),Math.max(0,l-s)*Math.max(0,d-u)),y=c(m)+c(v);g<h?(h=g,r=p,f=y<f?y:f):g===h&&y<f&&(f=y,r=p)}return r||n-t},r.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:u,i=e.leaf?this.compareMinY:l;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},r.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,a=o(e,0,t,i),u=o(e,n-t,n,i),l=d(a)+d(u),c=t;c<n-t;c++){var h=e.children[c];s(a,e.leaf?i(h):h),l+=d(a)}for(var f=n-t-1;f>=t;f--){var p=e.children[f];s(u,e.leaf?i(p):p),l+=d(u)}return l},r.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},r.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():a(e[t],this.toBBox)},r}()},34463:function(e,t,n){"use strict";var r=n(72791),i=n(31725),a=n(45296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,M=60107,E=60108,T=60114,k=60109,C=60110,A=60112,P=60113,O=60120,L=60115,R=60116,D=60121,I=60128,F=60129,N=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),S=z("react.portal"),M=z("react.fragment"),E=z("react.strict_mode"),T=z("react.profiler"),k=z("react.provider"),C=z("react.context"),A=z("react.forward_ref"),P=z("react.suspense"),O=z("react.suspense_list"),L=z("react.memo"),R=z("react.lazy"),D=z("react.block"),z("react.scope"),I=z("react.opaque.id"),F=z("react.debug_trace_mode"),N=z("react.offscreen"),j=z("react.legacy_hidden")}var U,B="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function G(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var H=!1;function Z(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G(e):""}function W(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1);case 11:return e=Z(e.type.render,!1);case 22:return e=Z(e.type._render,!1);case 1:return e=Z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case M:return"Fragment";case S:return"Portal";case T:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return q(e.type);case D:return q(e._render);case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function le(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ve,ge=(ve=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||xe.hasOwnProperty(e)&&xe[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(xe).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xe[t]=xe[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Ae=null;function Pe(e){if(e=ri(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),ke(e.stateNode,e.type,t))}}function Oe(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Le(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Ie(){}var Fe=Re,Ne=!1,je=!1;function ze(){null===Ce&&null===Ae||(Ie(),Le())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(d)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ve){Be=!1}function Ge(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var He=!1,Ze=null,We=!1,qe=null,Xe={onError:function(e){He=!0,Ze=e}};function Ke(e,t,n,r,i,a,o,s,u){He=!1,Ze=null,Ge.apply(Xe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,lt=null,ct=new Map,dt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function vt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function xt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==lt&&yt(lt)&&(lt=null),ct.forEach(xt),dt.forEach(xt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function wt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&bt(st,e),null!==ut&&bt(ut,e),null!==lt&&bt(lt,e),ct.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Et={},Tt={};function kt(e){if(Et[e])return Et[e];if(!Mt[e])return e;var t,n=Mt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}d&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Mt.animationend.animation,delete Mt.animationiteration.animation,delete Mt.animationstart.animation),"TransitionEvent"in window||delete Mt.transitionend.transition);var Ct=kt("animationend"),At=kt("animationiteration"),Pt=kt("animationstart"),Ot=kt("transitionend"),Lt=new Map,Rt=new Map,Dt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function It(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Lt.set(r,i),l(i,[r])}}(0,a.unstable_now)();var Ft=8;function Nt(e){if(0!==(1&e))return Ft=15,1;if(0!==(2&e))return Ft=14,2;if(0!==(4&e))return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):0!==(32&e)?(Ft=11,32):0!==(t=192&e)?(Ft=10,t):0!==(256&e)?(Ft=9,256):0!==(t=3584&e)?(Ft=8,t):0!==(4096&e)?(Ft=7,4096):0!==(t=4186112&e)?(Ft=6,t):0!==(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):0!==(134217728&e)?(Ft=3,134217728):0!==(t=805306368&e)?(Ft=2,t):0!==(1073741824&e)?(Ft=1,1073741824):(Ft=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Ft=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Nt(u),i=Ft):0!==(s&=a)&&(r=Nt(s),i=Ft)}else 0!==(a=n&~o)?(r=Nt(a),i=Ft):0!==s&&(r=Nt(s),i=Ft);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Nt(t),i<=Ft)return t;Ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Bt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Zt(e)/Wt|0)|0},Zt=Math.log,Wt=Math.LN2;var qt=a.unstable_UserBlockingPriority,Xt=a.unstable_runWithPriority,Kt=!0;function Yt(e,t,n,r){Ne||Ie();var i=$t,a=Ne;Ne=!0;try{De(i,e,t,n,r)}finally{(Ne=a)||ze()}}function Qt(e,t,n,r){Xt(qt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Kt)if((i=0===(4&t))&&0<ot.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Jt(e,t,n,r);if(null===a)i&&mt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=vt(st,e,t,n,r,i),!0;case"dragenter":return ut=vt(ut,e,t,n,r,i),!0;case"mouseover":return lt=vt(lt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,vt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,dt.set(a,vt(dt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;mt(e,r)}Ir(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Qe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Ir(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,cn,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=un(hn),pn=i({},hn,{view:0,detail:0}),mn=un(pn),vn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(ln=e.screenX-dn.screenX,cn=e.screenY-dn.screenY):cn=ln=0,dn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=un(vn),yn=un(i({},vn,{dataTransfer:0})),xn=un(i({},pn,{relatedTarget:0})),_n=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(bn),Sn=un(i({},hn,{data:0})),Mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return kn}var An=i({},pn,{key:function(e){if(e.key){var t=Mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=un(An),On=un(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=un(Dn),Fn=[9,13,27,32],Nn=d&&"CompositionEvent"in window,jn=null;d&&"documentMode"in document&&(jn=document.documentMode);var zn=d&&"TextEvent"in window&&!jn,Un=d&&(!Nn||jn&&8<jn&&11>=jn),Bn=String.fromCharCode(32),Vn=!1;function Gn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Xn(e,t,n,r){Oe(r),0<(t=Nr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Qn(e){Ar(e,0)}function $n(e){if(Q(ii(e)))return e}function Jn(e,t){if("change"===e)return t}var er=!1;if(d){var tr;if(d){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Kn&&(Kn.detachEvent("onpropertychange",ar),Yn=Kn=null)}function ar(e){if("value"===e.propertyName&&$n(Yn)){var t=[];if(Xn(t,Yn,e,Te(e)),e=Qn,Ne)e(t);else{Ne=!0;try{Re(e,t)}finally{Ne=!1,ze()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,(Kn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ur(e,t){if("click"===e)return $n(t)}function lr(e,t){if("input"===e||"change"===e)return $n(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},dr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=d&&"documentMode"in document&&11>=document.documentMode,xr=null,_r=null,br=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==xr||xr!==$(r)||("selectionStart"in(r=xr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Nr(_r,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xr)))}It("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),It("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),It(Dt,2);for(var Mr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Mr.length;Er++)Rt.set(Mr[Er],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(Ke.apply(this,arguments),He){if(!He)throw Error(o(198));var c=Ze;He=!1,Ze=null,We||(We=!0,qe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,l),a=u}}}if(We)throw e=qe,We=!1,qe=null,e}function Pr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){e[Or]||(e[Or]=!0,s.forEach((function(t){kr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&kr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Qt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ir(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Fe(e,t,n)}finally{je=!1,ze()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Lt.get(e);if(void 0!==s){var u=fn,l=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=xn;break;case"focusout":l="blur",u=xn;break;case"beforeblur":case"afterblur":u=xn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Ln;break;case Ct:case At:case Pt:u=_n;break;case Ot:u=Rn;break;case"scroll":u=mn;break;case"wheel":u=In;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=On}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ue(p,h))&&c.push(Fr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ni(l)&&!l[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ni(l):null)&&(l!==(d=Ye(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=gn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=On,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==u?s:ii(u),f=null==l?s:ii(l),(s=new c(m,p+"leave",u,n,i)).target=d,s.relatedTarget=f,m=null,ni(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=f,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(h=l,p=0,f=c=u;f;f=jr(f))p++;for(f=0,m=h;m;m=jr(m))f++;for(;0<p-f;)c=jr(c),p--;for(;0<f-p;)h=jr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=jr(c),h=jr(h)}c=null}else c=null;null!==u&&zr(o,s,u,c,!1),null!==l&&null!==d&&zr(o,d,l,c,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Jn;else if(qn(s))if(er)v=lr;else{v=sr;var g=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ur);switch(v&&(v=v(e,r))?Xn(o,v,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ii(r):window,e){case"focusin":(qn(g)||"true"===g.contentEditable)&&(xr=g,_r=r,br=null);break;case"focusout":br=_r=xr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(o,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Zn?Gn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Un&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Zn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Zn=!0)),0<(g=Nr(r,x)).length&&(x=new Sn(x,e,null,n,i),o.push({event:x,listeners:g}),y?x.data=y:null!==(y=Hn(n))&&(x.data=y))),(y=zn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!Nn&&Gn(e,t)?(e=rn(),nn=tn=en=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Nr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ar(o,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ue(e,n))&&r.unshift(Fr(e,a,i)),null!=(a=Ue(e,t))&&r.push(Fr(e,a,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ue(n,a))&&o.unshift(Fr(n,u,s)):i||null!=(u=Ue(n,a))&&o.push(Fr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Br=null,Vr=null;function Gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function qr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Xr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Qr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Qr,Jr="__reactProps$"+Qr,ei="__reactContainer$"+Qr,ti="__reactEvents$"+Qr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[$r])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Jr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function li(e){return{current:e}}function ci(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function di(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},fi=li(hi),pi=li(!1),mi=hi;function vi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(pi),ci(fi)}function xi(e,t,n){if(fi.current!==hi)throw Error(o(168));di(fi,t),di(pi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,q(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,mi=fi.current,di(fi,e),di(pi,pi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ci(pi),ci(fi),di(fi,e)):ci(pi),di(pi,n)}var Si=null,Mi=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,ki=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Pi=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Li=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Ii=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,Ni={},ji=void 0!==Ai?Ai:function(){},zi=null,Ui=null,Bi=!1,Vi=Pi(),Gi=1e4>Vi?Pi:function(){return Pi()-Vi};function Hi(){switch(Oi()){case Li:return 99;case Ri:return 98;case Di:return 97;case Ii:return 96;case Fi:return 95;default:throw Error(o(332))}}function Zi(e){switch(e){case 99:return Li;case 98:return Ri;case 97:return Di;case 96:return Ii;case 95:return Fi;default:throw Error(o(332))}}function Wi(e,t){return e=Zi(e),Ei(e,t)}function qi(e,t,n){return e=Zi(e),Ti(e,t,n)}function Xi(){if(null!==Ui){var e=Ui;Ui=null,ki(e)}Ki()}function Ki(){if(!Bi&&null!==zi){Bi=!0;var e=0;try{var t=zi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zi=null}catch(n){throw null!==zi&&(zi=zi.slice(e+1)),Ti(Li,Xi),n}finally{Bi=!1}}}var Yi=b.ReactCurrentBatchConfig;function Qi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=li(null),Ji=null,ea=null,ta=null;function na(){ta=ea=Ji=null}function ra(e){var t=$i.current;ci($i),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Ji=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(No=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Ji)throw Error(o(308));ea=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function da(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fa(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==s&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=l)}}if(null!==o){for(h=a.baseState,s=0,d=c=l=null;;){u=o.lane;var f=o.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(u=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=m.payload)?p.call(f,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else f={eventTime:f,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=f,l=h):d=d.next=f,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===d&&(l=h),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,Bs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ma=(new r.Component).refs;function va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=fu(e),a=ca(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),da(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=fu(e),a=ca(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),da(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=fu(e),i=ca(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),da(e,i),pu(e,r,n)}};function ya(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function xa(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=gi(t)?mi:fi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ma,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=gi(t)?mi:fi.current,i.context=vi(e,a)),fa(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function Sa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ma&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ma(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Yu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Sa(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=Sa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Xu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=Sa(e,null,t),n.return=e,n;case S:return(t=Qu(t,e.mode,n)).return=e,t}if(wa(t)||V(t))return(t=Xu(t,e.mode,n,null)).return=e,t;Ma(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===M?d(e,t,n.props.children,r,i):l(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null}if(wa(n)||V(n))return null!==i?null:d(e,t,n,r,null);Ma(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===M?d(t,e,r.props.children,i,r.key):l(t,e,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wa(r)||V(r))return d(t,e=e.get(n)||null,r,i,null);Ma(t,r)}return null}function m(i,o,s,u){for(var l=null,c=null,d=o,m=o=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(i,d,s[m],u);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(i,d),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g,d=v}if(m===s.length)return n(i,d),l;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],u))&&(o=a(d,o,m),null===c?l=d:c.sibling=d,c=d);return l}for(d=r(i,d);m<s.length;m++)null!==(v=p(d,i,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(i,e)})),l}function v(i,s,u,l){var c=V(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var x=f(i,m,y.value,l);if(null===x){null===m&&(m=g);break}e&&m&&null===x.alternate&&t(i,m),s=a(x,s,v),null===d?c=x:d.sibling=x,d=x,m=g}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=h(i,y.value,l))&&(s=a(y,s,v),null===d?c=y:d.sibling=y,d=y);return c}for(m=r(i,m);!y.done;v++,y=u.next())null!==(y=p(m,i,v,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=a(y,s,v),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,a,u){var l="object"===typeof a&&null!==a&&a.type===M&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case w:e:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(a.type===M){n(e,l.sibling),(r=i(l,a.props.children)).return=e,e=r;break e}}else if(l.elementType===a.type){n(e,l.sibling),(r=i(l,a.props)).ref=Sa(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===M?((r=Xu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=qu(a.type,a.key,a.props,null,e.mode,u)).ref=Sa(e,r,a),u.return=e,e=u)}return s(e);case S:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Qu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Yu(a,e.mode,u)).return=e,e=r),s(e);if(wa(a))return m(e,r,a,u);if(V(a))return v(e,r,a,u);if(c&&Ma(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),ka=Ea(!1),Ca={},Aa=li(Ca),Pa=li(Ca),Oa=li(Ca);function La(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(di(Oa,t),di(Pa,e),di(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Aa),di(Aa,t)}function Da(){ci(Aa),ci(Pa),ci(Oa)}function Ia(e){La(Oa.current);var t=La(Aa.current),n=pe(t,e.type);t!==n&&(di(Pa,e),di(Aa,n))}function Fa(e){Pa.current===e&&(ci(Aa),ci(Pa))}var Na=li(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=null,Ua=null,Ba=!1;function Va(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ga(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ha(e){if(Ba){var t=Ua;if(t){var n=t;if(!Ga(e,t)){if(!(t=Xr(n.nextSibling))||!Ga(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(za=e);Va(za,n)}za=e,Ua=Xr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,za=e}}function Za(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;za=e}function Wa(e){if(e!==za)return!1;if(!Ba)return Za(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Ua;t;)Va(e,t),t=Xr(t.nextSibling);if(Za(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ua=Xr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ua=null}}else Ua=za?Xr(e.stateNode.nextSibling):null;return!0}function qa(){Ua=za=null,Ba=!1}var Xa=[];function Ka(){for(var e=0;e<Xa.length;e++)Xa[e]._workInProgressVersionPrimary=null;Xa.length=0}var Ya=b.ReactCurrentDispatcher,Qa=b.ReactCurrentBatchConfig,$a=0,Ja=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if($a=a,Ja=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Io,e=n(r,i)}while(ro)}if(Ya.current=Lo,t=null!==eo&&null!==eo.next,$a=0,to=eo=Ja=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Ja.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Ja.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Ja.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Ja.memoizedState=to=e:to=to.next=e}return to}function lo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,l=i;do{var c=l.lane;if(($a&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var d={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=d,a=r):u=u.next=d,Ja.lanes|=c,Bs|=c}l=l.next}while(null!==l&&l!==i);null===u?a=r:u.next=s,cr(r,t.memoizedState)||(No=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);cr(a,t.memoizedState)||(No=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Xa.push(t))),e)return n(t._source);throw Xa.push(t),Error(o(350))}function po(e,t,n,r){var i=Rs;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ya.current,l=u.useState((function(){return fo(i,t,n)})),c=l[1],d=l[0];l=to;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var v=Ja;return e.memoizedState={refs:f,source:t,subscribe:r},u.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=a(t._source);if(!cr(s,e)){e=n(t._source),cr(d,e)||(c(e),e=fu(v),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Ht(o),l=1<<u;r[u]|=e,o&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fu(v);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(p,n)&&cr(m,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:d}).dispatch=c=Oo.bind(null,Ja,e),l.queue=e,l.baseQueue=null,d=fo(i,t,n),l.memoizedState=l.baseState=d),d}function mo(e,t,n){return po(uo(),e,t,n)}function vo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Oo.bind(null,Ja,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ja.updateQueue)?(t={lastEffect:null},Ja.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function xo(){return uo().memoizedState}function _o(e,t,n,r){var i=so();Ja.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void go(t,n,a,r)}Ja.flags|=e,i.memoizedState=go(1|t,n,a,r)}function wo(e,t){return _o(516,4,e,t)}function So(e,t){return bo(516,4,e,t)}function Mo(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function ko(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=Hi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Qa.transition;Qa.transition=1;try{e(!1),t()}finally{Qa.transition=n}}))}function Oo(e,t,n){var r=hu(),i=fu(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ja||null!==o&&o===Ja)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,cr(u,s))return}catch(l){}pu(e,i,r)}}var Lo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,Ja,e),[r.memoizedState,e]},useRef:yo,useState:vo,useDebugValue:ko,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return wo((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return yo(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&Ja.mode)&&(Ja.flags|=516,go(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return vo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:So,useImperativeHandle:To,useLayoutEffect:Mo,useMemo:Ao,useReducer:co,useRef:xo,useState:function(){return co(lo)},useDebugValue:ko,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return So((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[xo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Io={readContext:oa,useCallback:Co,useContext:oa,useEffect:So,useImperativeHandle:To,useLayoutEffect:Mo,useMemo:Ao,useReducer:ho,useRef:xo,useState:function(){return ho(lo)},useDebugValue:ko,useDeferredValue:function(e){var t=ho(lo),n=t[0],r=t[1];return So((function(){var t=Qa.transition;Qa.transition=1;try{r(e)}finally{Qa.transition=t}}),[e]),n},useTransition:function(){var e=ho(lo)[0];return[xo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return ho(lo)[0]},unstable_isNewReconciler:!1},Fo=b.ReactCurrentOwner,No=!1;function jo(e,t,n,r){t.child=null===e?ka(t,null,n,r):Ta(t,e.child,n,r)}function zo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||No?(t.flags|=1,jo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Uo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Zu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Wu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(No=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(No=!0)}return Ho(e,t,n,r,a)}function Vo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return jo(e,t,i,n),t.child}function Go(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,i){var a=gi(n)?mi:fi.current;return a=vi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||No?(t.flags|=1,jo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Zo(e,t,n,r,i){if(gi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),xa(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=oa(l):l=vi(t,l=gi(n)?mi:fi.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&_a(t,o,r,l),sa=!1;var h=t.memoizedState;o.state=h,fa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof c&&(va(t,n,c,r),u=t.memoizedState),(s=sa||ya(t,n,s,r,h,u,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,la(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Qi(t.type,s),o.props=l,d=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=vi(t,u=gi(n)?mi:fi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==u)&&_a(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,fa(t,r,o,i);var p=t.memoizedState;s!==d||h!==p||pi.current||sa?("function"===typeof f&&(va(t,n,f,r),p=t.memoizedState),(l=sa||ya(t,n,l,r,h,p,u))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){Go(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&wi(t,n,!1),as(e,t,a);r=t.stateNode,Fo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):jo(e,t,s,a),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?xi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xi(0,t.context,!1),Ra(e,t.containerInfo)}var Xo,Ko,Yo,Qo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=Na.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),di(Na,1&a),null===e?(void 0!==i.fallback&&Ha(t),e=i.children,a=i.fallback,o?(e=Jo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Jo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qo,t.lanes=33554432,e):((n=Ku({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Qo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Jo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ku(t,i,0,null),n=Xu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Wu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wu(o,s),null!==e?r=Wu(e,r):(r=Xu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=Na.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(Na,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Wu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Da(),ci(pi),ci(fi),Ka(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Fa(t);var a=La(Oa.current);if(n=t.type,null!==e&&null!=t.stateNode)Ko(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=La(Aa.current),Wa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$r]=t,r[Jr]=s,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Pr(Tr[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ue(r,s),Pr("invalid",r)}for(var l in Me(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&Pr("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===de&&(e=fe(n)),e===de?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[$r]=t,e[Jr]=r,Xo(e,t),t.stateNode=e,l=Ee(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),a=r;break;case"iframe":case"object":case"embed":Pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Pr(Tr[a],e);a=r;break;case"source":Pr("error",e),a=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=r;break;case"details":Pr("toggle",e),a=r;break;case"input":ee(e,r),a=J(e,r),Pr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Pr("invalid",e);break;default:a=r}Me(n,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ge(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ye(e,d):"number"===typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Pr("scroll",e):null!=d&&_(e,s,d,l))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Ur)}Gr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=La(Oa.current),La(Aa.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return ci(Na),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Na.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Rs||0===(134217727&Bs)&&0===(134217727&Vs)||yu(Rs,Is))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Lr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(ci(Na),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(l=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=ja(e))){for(t.flags|=64,os(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return di(Na,1&Na.current|2),t.child}e=e.sibling}null!==r.tail&&Gi()>Ws&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ja(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,t=Na.current,di(Na,s?1&t|2:1&t),n):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),ci(pi),ci(fi),Ka(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Fa(e),null;case 13:return ci(Na),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Na),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return Su(),null;default:return null}}function ls(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Xo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,La(Aa.current);var o,s=null;switch(n){case"input":a=J(e,a),r=J(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(d in Me(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Pr("scroll",e),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===I?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Qs=r),cs(0,t)},n}function fs(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return cs(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$s?$s=new Set([this]):$s.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Uu(e,n)}else t.current=null}function vs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nu(n,e),Fu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Gr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function xs(e,t){if(Mi&&"function"===typeof Mi.onCommitFiberUnmount)try{Mi.onCommitFiberUnmount(Si,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Nu(t,n);else{r=t;try{i()}catch(a){Uu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Uu(t,a)}break;case 5:ms(t);break;case 4:Es(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bs(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(bs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):Ms(e,n,t)}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Ms(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ms(e,t,n),e=e.sibling;null!==e;)Ms(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(xs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(xs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Zs=Gi(),ys(t.child,!0)),void ks(t);case 19:return void ks(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Vu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var As=Math.ceil,Ps=b.ReactCurrentDispatcher,Os=b.ReactCurrentOwner,Ls=0,Rs=null,Ds=null,Is=0,Fs=0,Ns=li(0),js=0,zs=null,Us=0,Bs=0,Vs=0,Gs=0,Hs=null,Zs=0,Ws=1/0;function qs(){Ws=Gi()+500}var Xs,Ks=null,Ys=!1,Qs=null,$s=null,Js=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,lu=0,cu=null,du=!1;function hu(){return 0!==(48&Ls)?Gi():-1!==su?su:su=Gi()}function fu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===uu&&(uu=Us),0!==Yi.transition){0!==lu&&(lu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~lu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Ls)&&98===e?e=Ut(12,uu):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=mu(e,t)))return null;Gt(e,t,n),e===Rs&&(Vs|=t,4===js&&yu(e,Is));var r=Hi();1===t?0!==(8&Ls)&&0===(48&Ls)?xu(e):(vu(e,n),0===Ls&&(qs(),Xi())):(0===(4&Ls)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),vu(e,n)),Hs=e}function mu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function vu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),l=1<<u,c=a[u];if(-1===c){if(0===(l&r)||0!==(l&i)){c=t,Nt(l);var d=Ft;a[u]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=jt(e,e===Rs?Is:0),t=Ft,0===r)null!==n&&(n!==Ni&&ki(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ni&&ki(n)}15===t?(n=xu.bind(null,e),null===zi?(zi=[n],Ui=Ti(Li,Ki)):zi.push(n),n=Ni):14===t?n=qi(99,xu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=qi(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,lu=uu=0,0!==(48&Ls))throw Error(o(327));var t=e.callbackNode;if(Iu()&&e.callbackNode!==t)return null;var n=jt(e,e===Rs?Is:0);if(0===n)return null;var r=n,i=Ls;Ls|=16;var a=Tu();for(Rs===e&&Is===r||(qs(),Mu(e,r));;)try{Au();break}catch(u){Eu(e,u)}if(na(),Ps.current=a,Ls=i,null!==Ds?r=0:(Rs=null,Is=0,r=js),0!==(Us&Vs))Mu(e,0);else if(0!==r){if(2===r&&(Ls|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=zt(e))&&(r=ku(e,n))),1===r)throw t=zs,Mu(e,0),yu(e,n),vu(e,Gi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Lu(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Zs+500-Gi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Zr(Lu.bind(null,e),r);break}Lu(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Gi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*As(n/1960))-n)){e.timeoutHandle=Zr(Lu.bind(null,e),n);break}Lu(e);break;default:throw Error(o(329))}}return vu(e,Gi()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Gs,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function xu(e){if(0!==(48&Ls))throw Error(o(327));if(Iu(),e===Rs&&0!==(e.expiredLanes&Is)){var t=Is,n=ku(e,t);0!==(Us&Vs)&&(n=ku(e,t=jt(e,t)))}else n=ku(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Ls|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=zt(e))&&(n=ku(e,t))),1===n)throw n=zs,Mu(e,0),yu(e,t),vu(e,Gi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lu(e),vu(e,Gi()),null}function _u(e,t){var n=Ls;Ls|=1;try{return e(t)}finally{0===(Ls=n)&&(qs(),Xi())}}function bu(e,t){var n=Ls;Ls&=-2,Ls|=8;try{return e(t)}finally{0===(Ls=n)&&(qs(),Xi())}}function wu(e,t){di(Ns,Fs),Fs|=t,Us|=t}function Su(){Fs=Ns.current,ci(Ns)}function Mu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Da(),ci(pi),ci(fi),Ka();break;case 5:Fa(r);break;case 4:Da();break;case 13:case 19:ci(Na);break;case 10:ra(r);break;case 23:case 24:Su()}n=n.return}Rs=e,Ds=Wu(e.current,null),Is=Fs=Us=t,js=0,zs=null,Gs=Vs=Bs=0}function Eu(e,t){for(;;){var n=Ds;try{if(na(),Ya.current=Lo,no){for(var r=Ja.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($a=0,to=eo=Ja=null,ro=!1,Os.current=null,null===n||null===n.return){js=1,zs=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Is,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Na.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var v=h.updateQueue;if(null===v){var g=new Set;g.add(l),h.updateQueue=g}else v.add(l);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ca(-1,1);y.tag=2,da(s,y)}s.lanes|=1;break e}u=void 0,s=t;var x=a.pingCache;if(null===x?(x=a.pingCache=new ds,u=new Set,x.set(l,u)):void 0===(u=x.get(l))&&(u=new Set,x.set(l,u)),!u.has(s)){u.add(s);var _=Bu.bind(null,a,l,s);l.then(_,_)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=ls(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var b=h.type,w=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===$s||!$s.has(w)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,fs(h,a,t));break e}}h=h.return}while(null!==h)}Ou(n)}catch(S){t=S,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Tu(){var e=Ps.current;return Ps.current=Lo,null===e?Lo:e}function ku(e,t){var n=Ls;Ls|=16;var r=Tu();for(Rs===e&&Is===t||Mu(e,t);;)try{Cu();break}catch(i){Eu(e,i)}if(na(),Ls=n,Ps.current=r,null!==Ds)throw Error(o(261));return Rs=null,Is=0,js}function Cu(){for(;null!==Ds;)Pu(Ds)}function Au(){for(;null!==Ds&&!Ci();)Pu(Ds)}function Pu(e){var t=Xs(e.alternate,e,Fs);e.memoizedProps=e.pendingProps,null===t?Ou(e):Ds=t,Os.current=null}function Ou(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Fs)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Fs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===js&&(js=5)}function Lu(e){var t=Hi();return Wi(99,Ru.bind(null,e,t)),null}function Ru(e,t){do{Iu()}while(null!==eu);if(0!==(48&Ls))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var l=31-Ht(a),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Rs&&(Ds=Rs=null,Is=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ls,Ls|=32,Os.current=null,Br=Kt,gr(s=vr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(T){u=null;break e}var d=0,h=-1,f=-1,p=0,m=0,v=s,g=null;t:for(;;){for(var y;v!==u||0!==a&&3!==v.nodeType||(h=d+a),v!==l||0!==c&&3!==v.nodeType||(f=d+c),3===v.nodeType&&(d+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===s)break t;if(g===u&&++p===a&&(h=d),g===l&&++m===c&&(f=d),null!==(y=v.nextSibling))break;g=(v=g).parentNode}v=y}u=-1===h||-1===f?null:{start:h,end:f}}else u=null;u=u||{start:0,end:0}}else u=null;Vr={focusedElem:s,selectionRange:u},Kt=!1,cu=null,du=!1,Ks=r;do{try{Du()}catch(T){if(null===Ks)throw Error(o(330));Uu(Ks,T),Ks=Ks.nextEffect}}while(null!==Ks);cu=null,Ks=r;do{try{for(s=e;null!==Ks;){var x=Ks.flags;if(16&x&&ye(Ks.stateNode,""),128&x){var _=Ks.alternate;if(null!==_){var b=_.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&x){case 2:ws(Ks),Ks.flags&=-3;break;case 6:ws(Ks),Ks.flags&=-3,Ts(Ks.alternate,Ks);break;case 1024:Ks.flags&=-1025;break;case 1028:Ks.flags&=-1025,Ts(Ks.alternate,Ks);break;case 4:Ts(Ks.alternate,Ks);break;case 8:Es(s,u=Ks);var w=u.alternate;_s(u),null!==w&&_s(w)}Ks=Ks.nextEffect}}catch(T){if(null===Ks)throw Error(o(330));Uu(Ks,T),Ks=Ks.nextEffect}}while(null!==Ks);if(b=Vr,_=vr(),x=b.focusedElem,s=b.selectionRange,_!==x&&x&&x.ownerDocument&&mr(x.ownerDocument.documentElement,x)){null!==s&&gr(x)&&(_=s.start,void 0===(b=s.end)&&(b=_),"selectionStart"in x?(x.selectionStart=_,x.selectionEnd=Math.min(b,x.value.length)):(b=(_=x.ownerDocument||document)&&_.defaultView||window).getSelection&&(b=b.getSelection(),u=x.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!b.extend&&w>s&&(u=s,s=w,w=u),u=pr(x,w),a=pr(x,s),u&&a&&(1!==b.rangeCount||b.anchorNode!==u.node||b.anchorOffset!==u.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((_=_.createRange()).setStart(u.node,u.offset),b.removeAllRanges(),w>s?(b.addRange(_),b.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),b.addRange(_))))),_=[];for(b=x;b=b.parentNode;)1===b.nodeType&&_.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof x.focus&&x.focus(),x=0;x<_.length;x++)(b=_[x]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Kt=!!Br,Vr=Br=null,e.current=n,Ks=r;do{try{for(x=e;null!==Ks;){var S=Ks.flags;if(36&S&&gs(x,Ks.alternate,Ks),128&S){_=void 0;var M=Ks.ref;if(null!==M){var E=Ks.stateNode;Ks.tag,_=E,"function"===typeof M?M(_):M.current=_}}Ks=Ks.nextEffect}}catch(T){if(null===Ks)throw Error(o(330));Uu(Ks,T),Ks=Ks.nextEffect}}while(null!==Ks);Ks=null,ji(),Ls=i}else e.current=n;if(Js)Js=!1,eu=e,tu=t;else for(Ks=r;null!==Ks;)t=Ks.nextEffect,Ks.nextEffect=null,8&Ks.flags&&((S=Ks).sibling=null,S.stateNode=null),Ks=t;if(0===(r=e.pendingLanes)&&($s=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Mi&&"function"===typeof Mi.onCommitFiberRoot)try{Mi.onCommitFiberRoot(Si,n,void 0,64===(64&n.current.flags))}catch(T){}if(vu(e,Gi()),Ys)throw Ys=!1,e=Qs,Qs=null,e;return 0!==(8&Ls)||Xi(),null}function Du(){for(;null!==Ks;){var e=Ks.alternate;du||null===cu||(0!==(8&Ks.flags)?et(Ks,cu)&&(du=!0):13===Ks.tag&&Cs(e,Ks)&&et(Ks,cu)&&(du=!0));var t=Ks.flags;0!==(256&t)&&vs(e,Ks),0===(512&t)||Js||(Js=!0,qi(97,(function(){return Iu(),null}))),Ks=Ks.nextEffect}}function Iu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,ju)}return!1}function Fu(e,t){nu.push(t,e),Js||(Js=!0,qi(97,(function(){return Iu(),null})))}function Nu(e,t){ru.push(t,e),Js||(Js=!0,qi(97,(function(){return Iu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ls))throw Error(o(331));var t=Ls;Ls|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===a)throw Error(o(330));Uu(a,l)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(l){if(null===a)throw Error(o(330));Uu(a,l)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ls=t,Xi(),!0}function zu(e,t,n){da(e,t=hs(0,t=ls(n,t),1)),t=hu(),null!==(e=mu(e,1))&&(Gt(e,1,t),vu(e,t))}function Uu(e,t){if(3===e.tag)zu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){zu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r))){var i=fs(n,e=ls(t,e),1);if(da(n,i),i=hu(),null!==(n=mu(n,1)))Gt(n,1,i),vu(n,i);else if("function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Is&n)===n&&(4===js||3===js&&(62914560&Is)===Is&&500>Gi()-Zs?Mu(e,0):Gs|=n),vu(e,t)}function Vu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===uu&&(uu=Us),0===(t=Bt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=mu(e,t))&&(Gt(e,t,n),vu(e,n))}function Gu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new Gu(e,t,n,r)}function Zu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wu(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Zu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case M:return Xu(n.children,i,a,t);case F:s=8,i|=16;break;case E:s=8,i|=1;break;case T:return(e=Hu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case P:return(e=Hu(13,n,t,i)).type=P,e.elementType=P,e.lanes=a,e;case O:return(e=Hu(19,n,t,i)).elementType=O,e.lanes=a,e;case N:return Ku(n,i,a,t);case j:return(e=Hu(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case C:s=9;break e;case A:s=11;break e;case L:s=14;break e;case R:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Xu(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function Ku(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=N,e.lanes=n,e}function Yu(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function Qu(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Ju(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function el(e,t,n,r){var i=t.current,a=hu(),s=fu(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=_i(n,l,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),da(i,t),pu(i,s,a),s}function tl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rl(e,t){nl(e,t),(e=e.alternate)&&nl(e,t)}function il(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $u(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Lr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function al(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ol(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tl(o);s.call(e)}}el(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new il(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tl(o);u.call(e)}}bu((function(){el(t,o,e,i)}))}return tl(o)}function sl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!al(t))throw Error(o(200));return Ju(e,t,null,n)}Xs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)No=!0;else{if(0===(n&r)){switch(No=!1,t.tag){case 3:qo(t),qa();break;case 5:Ia(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;di($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(di(Na,1&Na.current),null!==(t=as(e,t,n))?t.sibling:null);di(Na,1&Na.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),di(Na,Na.current),r)break;return null;case 23:case 24:return t.lanes=0,Vo(e,t,n)}return as(e,t,n)}No=0!==(16384&e.flags)}else No=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,fi.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&va(t,r,s,e),i.updater=ga,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,jo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Zu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===L)return 14}return 2}(i),e=Qi(i,e),a){case 0:t=Ho(null,t,i,e,n);break e;case 1:t=Zo(null,t,i,e,n);break e;case 11:t=zo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Qi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Zo(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 3:if(qo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,la(e,t),fa(t,r,null,n),(r=t.memoizedState.element)===i)qa(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ua=Xr(t.stateNode.containerInfo.firstChild),za=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Xa.push(a);for(n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),qa();t=t.child}return t;case 5:return Ia(t),null===e&&Ha(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==a&&Hr(r,a)&&(t.flags|=16),Go(e,t),jo(e,t,s,n),t.child;case 6:return null===e&&Ha(t),null;case 13:return $o(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(di($i,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=cr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===u.tag&&((c=ca(-1,n&-n)).tag=2,da(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),ia(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}jo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return a=Qi(i=t.type,t.pendingProps),Uo(e,t,i,a=Qi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,aa(t,n),xa(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Vo(e,t,n)}throw Error(o(156,t.tag))},il.prototype.render=function(e){el(e,this._internalRoot,null,null)},il.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;el(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rl(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rl(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=fu(e);pu(e,n,t),rl(e,n)}},it=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));Q(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=_u,De=function(e,t,n,r,i){var a=Ls;Ls|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ls=a)&&(qs(),Xi())}},Ie=function(){0===(49&Ls)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,vu(e,Gi())}))}Xi()}(),Iu())},Fe=function(e,t){var n=Ls;Ls|=2;try{return e(t)}finally{0===(Ls=n)&&(qs(),Xi())}};var ul={Events:[ri,ii,ai,Oe,Le,Iu,{current:!1}]},ll={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cl={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Si=dl.inject(cl),Mi=dl}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ul,t.createPortal=sl,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ls;if(0!==(48&n))return e(t);Ls|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ls=n,Xi()}},t.hydrate=function(e,t,n){if(!al(t))throw Error(o(200));return ol(null,e,t,!0,n)},t.render=function(e,t,n){if(!al(t))throw Error(o(200));return ol(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!al(e))throw Error(o(40));return!!e._reactRootContainer&&(bu((function(){ol(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return sl(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!al(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ol(e,t,n,!1,r)},t.version="17.0.2"},54164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(34463)},11372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,u=60110,l=60112,c=60113,d=60120,h=60115,f=60116,p=60121,m=60122,v=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var x=Symbol.for;n=x("react.element"),r=x("react.portal"),i=x("react.fragment"),a=x("react.strict_mode"),o=x("react.profiler"),s=x("react.provider"),u=x("react.context"),l=x("react.forward_ref"),c=x("react.suspense"),d=x("react.suspense_list"),h=x("react.memo"),f=x("react.lazy"),p=x("react.block"),m=x("react.server.block"),v=x("react.fundamental"),g=x("react.debug_trace_mode"),y=x("react.legacy_hidden")}function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case c:case d:return e;default:switch(e=e&&e.$$typeof){case u:case l:case f:case h:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===g||e===a||e===c||e===d||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===h||e.$$typeof===s||e.$$typeof===u||e.$$typeof===l||e.$$typeof===v||e.$$typeof===p||e[0]===m)},t.typeOf=_},57441:function(e,t,n){"use strict";e.exports=n(11372)},23688:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function a(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==s){var u=e.displayName||e.name,l="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=a;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:function(){return o}}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},17719:function(e,t,n){"use strict";var r=n(90474),i=n(72791),a=n(54164);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var u=o(r),l=s(i),c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)};function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)};function f(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var p="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};var m=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},v="object"==typeof p&&p&&p.Object===Object&&p,g="object"==typeof self&&self&&self.Object===Object&&self,y=v||g||Function("return this")(),x=y,_=function(){return x.Date.now()},b=/\s/;var w=function(e){for(var t=e.length;t--&&b.test(e.charAt(t)););return t},S=/^\s+/;var M=function(e){return e?e.slice(0,w(e)+1).replace(S,""):e},E=y.Symbol,T=E,k=Object.prototype,C=k.hasOwnProperty,A=k.toString,P=T?T.toStringTag:void 0;var O=function(e){var t=C.call(e,P),n=e[P];try{e[P]=void 0;var r=!0}catch(a){}var i=A.call(e);return r&&(t?e[P]=n:delete e[P]),i},L=Object.prototype.toString;var R=O,D=function(e){return L.call(e)},I=E?E.toStringTag:void 0;var F=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?R(e):D(e)},N=function(e){return null!=e&&"object"==typeof e};var j=M,z=m,U=function(e){return"symbol"==typeof e||N(e)&&"[object Symbol]"==F(e)},B=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,G=/^0o[0-7]+$/i,H=parseInt;var Z=m,W=_,q=function(e){if("number"==typeof e)return e;if(U(e))return NaN;if(z(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=z(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=j(e);var n=V.test(e);return n||G.test(e)?H(e.slice(2),n?2:8):B.test(e)?NaN:+e},X=Math.max,K=Math.min;var Y=function(e,t,n){var r,i,a,o,s,u,l=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n)}function p(e){return l=e,s=setTimeout(v,t),c?f(e):o}function m(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-l>=a}function v(){var e=W();if(m(e))return g(e);s=setTimeout(v,function(e){var n=t-(e-u);return d?K(n,a-(e-l)):n}(e))}function g(e){return s=void 0,h&&r?f(e):(r=i=void 0,o)}function y(){var e=W(),n=m(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return p(u);if(d)return clearTimeout(s),s=setTimeout(v,t),f(u)}return void 0===s&&(s=setTimeout(v,t)),o}return t=q(t)||0,Z(n)&&(c=!!n.leading,a=(d="maxWait"in n)?X(q(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?o:g(W())},y},Q=Y,$=m;var J=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return $(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Q(e,t,{leading:r,maxWait:t,trailing:i})},ee=function(e,t,n,r){switch(t){case"debounce":return Y(e,n,r);case"throttle":return J(e,n,r);default:return e}},te=function(e){return"function"===typeof e},ne=function(){return"undefined"===typeof window},re=function(e){return e instanceof Element||e instanceof HTMLDocument},ie=function(e,t,n,r){return function(i){var a=i.width,o=i.height;t((function(t){return t.width===a&&t.height===o||t.width===a&&!r||t.height===o&&!n?t:(e&&te(e)&&e(a,o),{width:a,height:o})}))}},ae=function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!ne()){t&&t.current&&(n.targetRef.current=t.current);var i=n.getElement();i&&(n.observableElement&&n.observableElement===i||(n.observableElement=i,n.resizeObserver.observe(i,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(ne())return null;if(t)return document.querySelector(t);if(r&&re(r))return r;if(n.targetRef&&re(n.targetRef.current))return n.targetRef.current;var i=a.findDOMNode(n);if(!i)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return i;default:return i.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,i=void 0===r||r,a=t.handleHeight,o=void 0===a||a,s=t.onResize;if(i||o){var u=ie(s,n.setState.bind(n),i,o);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,i=t.height;!n.skipOnMount&&!ne()&&u({width:r,height:i}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,r=e.children;return te(t)?"renderProp":te(r)?"childFunction":i.isValidElement(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,o=t.refreshMode,s=t.refreshRate,l=void 0===s?1e3:s,c=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=r,n.targetRef=i.createRef(),n.observableElement=null,ne()||(n.resizeHandler=ee(n.createResizeHandler,o,l,c),n.resizeObserver=new u.default(n.resizeHandler)),n}return d(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){ne()||(this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,n=t.render,r=t.children,a=t.nodeType,o=void 0===a?"div":a,s=this.state,u={width:s.width,height:s.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return n&&n(u);case"childFunction":return(e=r)(u);case"child":if((e=r).type&&"string"===typeof e.type){var c=f(u,["targetRef"]);return i.cloneElement(e,c)}return i.cloneElement(e,u);case"childArray":return(e=r).map((function(e){return!!e&&i.cloneElement(e,u)}));default:return l.createElement(o,null)}},t}(i.PureComponent);var oe=ne()?i.useEffect:i.useLayoutEffect;t.ZP=ae},62690:function(e,t,n){"use strict";var r=n(95318);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(80019));e.exports=t.default},80019:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},60891:function(e){"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"===typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},59745:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(52007));var r=s(n(62690)),i=s(n(60891)),a=s(n(72791)),o=s(n(55580));n(74987);function s(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))},d=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),l(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,a=n?r+" "+i:i;t.removeClasses(e,n?"appear":"enter"),l(e,a),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),l(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),l(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{className:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,i=n.activeClassName,a=n.doneClassName;r&&c(e,r),i&&c(e,i),a&&c(e,a)},i.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,l(e,t))},i.render=function(){var e=u({},this.props);return delete e.classNames,a.default.createElement(o.default,u({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(a.default.Component);d.defaultProps={classNames:""},d.propTypes={};var h=d;t.default=h,e.exports=t.default},66492:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;o(n(52007));var r=o(n(72791)),i=n(54164),a=o(n(42584));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=o.prototype;return s.handleLifecycle=function(e,t,n){var a,o=this.props.children,s=r.default.Children.toArray(o)[t];s.props[e]&&(a=s.props)[e].apply(a,n),this.props[e]&&this.props[e]((0,i.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","in"]),o=r.default.Children.toArray(t),s=o[0],u=o[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(a.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(u,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},o}(r.default.Component);s.propTypes={};var u=s;t.default=u,e.exports=t.default},55580:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(52007)),i=s(n(72791)),a=s(n(54164)),o=n(23688);n(74987);function s(e){return e&&e.__esModule?e:{default:e}}var u="unmounted";t.UNMOUNTED=u;var l="exited";t.EXITED=l;var c="entering";t.ENTERING=c;var d="entered";t.ENTERED=d;var h="exiting";t.EXITING=h;var f=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,a=n.transitionGroup,o=a&&!a.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=l,r.appearStatus=c):i=d:i=t.unmountOnExit||t.mountOnEnter?u:l,r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:l}:null},o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==d&&(t=c):n!==c&&n!==d||(t=h)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=a.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===l&&this.setState({status:u})},o.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,a=this.getTimeouts(),o=i?a.appear:a.enter;t||r?(this.props.onEnter(e,i),this.safeSetState({status:c},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,o,(function(){n.safeSetState({status:d},(function(){n.props.onEntered(e,i)}))}))}))):this.safeSetState({status:d},(function(){n.props.onEntered(e)}))},o.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:h},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:l},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:l},(function(){t.props.onExited(e)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var a=i.default.Children.only(n);return i.default.cloneElement(a,r)},r}(i.default.Component);function p(){}f.contextTypes={transitionGroup:r.object},f.childContextTypes={transitionGroup:function(){}},f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},f.UNMOUNTED=0,f.EXITED=1,f.ENTERING=2,f.ENTERED=3,f.EXITING=4;var m=(0,o.polyfill)(f);t.default=m},42584:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(52007)),i=s(n(72791)),a=n(23688),o=n(46970);function s(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},d=function(e){var t,n;function r(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(l(l(r)));return r.state={handleExited:i,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},a.componentDidMount=function(){this.appeared=!0,this.mounted=!0},a.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,o.getInitialChildMapping)(e,r):(0,o.getNextChildMapping)(e,n,r),firstRender:!1}},a.handleExited=function(e,t){var n=(0,o.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=u({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","childFactory"]),a=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?a:i.default.createElement(t,r,a)},r}(i.default.Component);d.childContextTypes={transitionGroup:r.default.object.isRequired},d.propTypes={},d.defaultProps={component:"div",childFactory:function(e){return e}};var h=(0,a.polyfill)(d);t.default=h,e.exports=t.default},25937:function(e,t,n){"use strict";var r=s(n(59745)),i=s(n(66492)),a=s(n(42584)),o=s(n(55580));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:o.default,TransitionGroup:a.default,ReplaceTransition:i.default,CSSTransition:r.default}},46970:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=a,t.getInitialChildMapping=function(e,t){return i(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:o(n,"appear",e),enter:o(n,"enter",e),exit:o(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=i(e.children),u=a(t,s);return Object.keys(u).forEach((function(i){var a=u[i];if((0,r.isValidElement)(a)){var l=i in t,c=i in s,d=t[i],h=(0,r.isValidElement)(d)&&!d.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,r.isValidElement)(d)&&(u[i]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:d.props.in,exit:o(a,"exit",e),enter:o(a,"enter",e)})):u[i]=(0,r.cloneElement)(a,{in:!1}):u[i]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:o(a,"exit",e),enter:o(a,"enter",e)})}})),u};var r=n(72791);function i(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function a(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}function o(e,t,n){return null!=n[t]?n[t]:e.props[t]}},74987:function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(52007))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},66374:function(e,t,n){"use strict";n(31725);var r=n(72791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},59117:function(e,t,n){"use strict";var r=n(31725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),l=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var x=y.prototype=new g;x.constructor=y,r(x,v.prototype),x.isPureReactComponent=!0;var _={current:null},b=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!w.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),k(o,t,n,"",(function(e){return e}))):null!=o&&(M(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+T(s=e[l],l);u+=k(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=k(s=s.value,t,n,c=r+T(s,l++),o);else if("object"===s)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function O(){var e=P.current;if(null===e)throw Error(f(321));return e}var L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error(f(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)b.call(t,c)&&!w.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},72791:function(e,t,n){"use strict";e.exports=n(59117)},80184:function(e,t,n){"use strict";e.exports=n(66374)},89609:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case h:case v:case m:case u:return e;default:return t}}case i:return t}}}function w(e){return b(e)===d}t.isFragment=function(e){return b(e)===a}},8493:function(e,t,n){"use strict";e.exports=n(89609)},72692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(40082)),i=n(7905),a=s(n(34849)),o=s(n(94170));function s(e){return e&&e.__esModule?e:{default:e}}var u=/((?:\-[a-z]+\-)?calc)/;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(0,r.default)(e).walk((function(e){if("function"===e.type&&u.test(e.value)){var n=r.default.stringify(e.nodes);if(!(n.indexOf("constant")>=0||n.indexOf("env")>=0)){var s=i.parser.parse(n),l=(0,a.default)(s,t);e.type="word",e.value=(0,o.default)(e.value,l,t)}}}),!0).toString()},e.exports=t.default},78334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(74890),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){switch(e.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return function(e,t,n){t.type===e.type&&(t={type:e.type,value:(0,a.default)(t.value,t.unit,e.unit,n),unit:e.unit});return{left:e,right:t}}(e,t,n);default:return{left:e,right:t}}},e.exports=t.default},34849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flip=l;var r,i=n(78334),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){return"MathExpression"===e.type?function(e,t){switch(e=function(e,t){var n=(0,a.default)(e.left,e.right,t),r=o(n.left,t),i=o(n.right,t);"MathExpression"===r.type&&"MathExpression"===i.type&&("/"===r.operator&&"*"===i.operator||"-"===r.operator&&"+"===i.operator||"*"===r.operator&&"/"===i.operator||"+"===r.operator&&"-"===i.operator)&&(s(r.right,i.right)?n=(0,a.default)(r.left,i.left,t):s(r.right,i.left)&&(n=(0,a.default)(r.left,i.right,t)),r=o(n.left,t),i=o(n.right,t));return e.left=r,e.right=i,e}(e,t),e.operator){case"+":case"-":return function(e,t){var n=e,r=n.left,i=n.right,a=n.operator;if("CssVariable"===r.type||"CssVariable"===i.type)return e;if(0===i.value)return r;if(0===r.value&&"+"===a)return i;if(0===r.value&&"-"===a)return c(i);r.type===i.type&&u(r.type)&&((e=Object.assign({},r)).value="+"===a?r.value+i.value:r.value-i.value);if(u(r.type)&&("+"===i.operator||"-"===i.operator)&&"MathExpression"===i.type){if(r.type===i.left.type)return(e=Object.assign({},e)).left=o({type:"MathExpression",operator:a,left:r,right:i.left},t),e.right=i.right,e.operator="-"===a?l(i.operator):i.operator,o(e,t);if(r.type===i.right.type)return(e=Object.assign({},e)).left=o({type:"MathExpression",operator:"-"===a?l(i.operator):i.operator,left:r,right:i.right},t),e.right=i.left,o(e,t)}if("MathExpression"===r.type&&("+"===r.operator||"-"===r.operator)&&u(i.type)){if(i.type===r.left.type)return(e=Object.assign({},r)).left=o({type:"MathExpression",operator:a,left:r.left,right:i},t),o(e,t);if(i.type===r.right.type)return e=Object.assign({},r),"-"===r.operator?(e.right=o({type:"MathExpression",operator:"-"===a?"+":"-",left:i,right:r.right},t),e.operator="-"===a?"-":"+"):e.right=o({type:"MathExpression",operator:a,left:r.right,right:i},t),e.right.value<0&&(e.right.value*=-1,e.operator="-"===e.operator?"+":"-"),o(e,t)}return e}(e,t);case"/":return function(e,t){if(!u(e.right.type))return e;if("Value"!==e.right.type)throw new Error('Cannot divide by "'+e.right.unit+'", number expected');if(0===e.right.value)throw new Error("Cannot divide by zero");if("MathExpression"===e.left.type)return u(e.left.left.type)&&u(e.left.right.type)?(e.left.left.value/=e.right.value,e.left.right.value/=e.right.value,o(e.left,t)):e;if(u(e.left.type))return e.left.value/=e.right.value,e.left;return e}(e,t);case"*":return function(e){if("MathExpression"===e.left.type&&"Value"===e.right.type){if(u(e.left.left.type)&&u(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(u(e.left.type)&&"Value"===e.right.type)return e.left.value*=e.right.value,e.left;if("Value"===e.left.type&&"MathExpression"===e.right.type){if(u(e.right.left.type)&&u(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if("Value"===e.left.type&&u(e.right.type))return e.right.value*=e.left.value,e.right}return e}(e)}return e}(e,t):"Calc"===e.type?o(e.value,t):e}function s(e,t){return e.type===t.type&&e.value===t.value}function u(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function l(e){return"+"===e?"-":"+"}function c(e){return u(e.type)?e.value=-e.value:"MathExpression"==e.type&&(e.left=c(e.left),e.right=c(e.right)),e}t.default=o},94170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=o(t,n);return"MathExpression"===t.type&&(r=e+"("+r+")"),r};var r=n(34849),i={"*":0,"/":0,"+":1,"-":1};function a(e,t){if(!1!==t){var n=Math.pow(10,t);return Math.round(e*n)/n}return e}function o(e,t){switch(e.type){case"MathExpression":var n=e.left,s=e.right,u=e.operator,l="";return"MathExpression"===n.type&&i[u]<i[n.operator]?l+="("+o(n,t)+")":l+=o(n,t),l+=" "+e.operator+" ","MathExpression"===s.type&&i[u]<i[s.operator]?l+="("+o(s,t)+")":"MathExpression"===s.type&&"-"===u&&["+","-"].includes(s.operator)?(s.operator=(0,r.flip)(s.operator),l+=o(s,t)):l+=o(s,t),l;case"Value":return a(e.value,t);case"CssVariable":return e.fallback?"var("+e.value+", "+o(e.fallback,t)+")":"var("+e.value+")";case"Calc":return e.prefix?"-"+e.prefix+"-calc("+o(e.value,t)+")":"calc("+o(e.value,t)+")";default:return a(e.value,t)+e.unit}}e.exports=t.default},7905:function(e,t){var n=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}function t(e,t,n){n=n||0;for(var r=0;r<t;r++)this.push(e),e+=n}function n(e,t){for(t+=e=this.length-e;e<t;e++)this.push(this[e])}function r(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];"function"===typeof i?(n++,i.apply(t,e[n])):t.push(i)}return t}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonParserError";var i={trace:function(){},JisonParserError:e,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(e){return'"'+e+'"'},getSymbolName:function(e){if(this.terminals_[e])return this.terminals_[e];var t=this.symbols_;for(var n in t)if(t[n]===e)return n;return null},describeSymbol:function(e){if(e!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[e])return this.terminal_descriptions_[e];if(e===this.EOF)return"end of input";var t=this.getSymbolName(e);return t?this.quoteName(t):null},collect_expected_token_set:function(e,t){var n=this.TERROR,r=[],i={};if(!t&&this.state_descriptions_&&this.state_descriptions_[e])return[this.state_descriptions_[e]];for(var a in this.table[e])if((a=+a)!==n){var o=t?a:this.describeSymbol(a);o&&!i[o]&&(r.push(o),i[o]=!0)}return r},productions_:function(e){for(var t=[],n=e.pop,r=e.rule,i=0,a=n.length;i<a;i++)t.push([n[i],r[i]]);return t}({pop:r([29,t,[30,10],31,31,32,32,t,[33,15]]),rule:r([2,t,[3,5],4,7,t,[1,4],2,4,6,t,[1,14],2])}),performAction:function(e,t,n){var r=this.yy;r.parser,r.lexer;switch(e){case 0:case 6:this.$=n[t-1];break;case 1:return this.$=n[t-1],n[t-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:n[t-1],left:n[t-2],right:n[t]};break;case 7:this.$={type:"Calc",value:n[t-1]};break;case 8:this.$={type:"Calc",value:n[t-1],prefix:n[t-5]};break;case 9:case 10:case 11:this.$=n[t];break;case 12:this.$={type:"Value",value:parseFloat(n[t])};break;case 13:this.$={type:"Value",value:-1*parseFloat(n[t])};break;case 14:this.$={type:"CssVariable",value:n[t-1]};break;case 15:this.$={type:"CssVariable",value:n[t-3],fallback:n[t-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(n[t]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(n[t]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(n[t]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(n[t]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(n[t]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(n[t]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(n[t]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(n[t]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(n[t]),unit:"%"};break;case 30:var i=n[t];i.value*=-1,this.$=i}},table:function(e){for(var t=[],n=e.len,r=e.symbol,i=e.type,a=e.state,o=e.mode,s=e.goto,u=0,l=n.length;u<l;u++){for(var c=n[u],d={},h=0;h<c;h++){var f=r.shift();switch(i.shift()){case 2:d[f]=[o.shift(),s.shift()];break;case 0:d[f]=a.shift();break;default:d[f]=[3]}}t.push(d)}return t}({len:r([24,1,5,23,1,18,t,[0,3],1,t,[0,16],t,[23,4],n,[28,3],0,0,16,1,6,6,t,[0,3],5,1,2,n,[37,3],n,[20,3],5,0,0]),symbol:r([4,7,9,11,12,t,[15,19,1],1,1,t,[3,4,1],n,[30,19],n,[29,4],7,4,10,11,n,[22,14],n,[19,3],n,[43,22],n,[23,69],n,[139,4],8,n,[51,24],4,n,[138,15],13,n,[186,5],8,n,[6,6],n,[5,5],9,8,14,n,[159,47],n,[60,10]]),type:r([t,[2,19],t,[0,5],1,t,[2,24],t,[0,4],n,[22,19],n,[43,42],n,[23,70],n,[28,25],n,[45,25],n,[113,54]]),state:r([1,2,8,6,7,30,n,[4,3],33,37,n,[5,3],38,n,[4,3],39,n,[4,3],40,n,[4,3],42,n,[21,4],50,n,[5,3],51,n,[4,3]]),mode:r([t,[1,179],t,[2,3],n,[5,5],n,[6,4],t,[1,57]]),goto:r([5,3,4,24,t,[9,15,1],t,[25,5,1],n,[24,19],31,35,32,34,n,[18,14],36,n,[38,19],n,[19,57],n,[118,4],41,n,[24,19],43,35,n,[16,14],44,t,[2,3],28,29,2,t,[3,3],28,29,3,n,[53,4],t,[45,5,1],n,[100,42],52,n,[5,4],53])}),defaultActions:function(e){for(var t={},n=e.idx,r=e.goto,i=0,a=n.length;i<a;i++){t[n[i]]=r[i]}return t}({idx:r([6,7,8,t,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:r([9,10,11,t,[16,14,1],12,1,30,13,t,[4,4,1],14,15,8])}),parseError:function(e,t,n){if(!t.recoverable)throw"function"===typeof this.trace&&this.trace(e),n||(n=this.JisonParserError),new n(e,t);"function"===typeof this.trace&&this.trace(e),t.destroy()},parse:function(e){var t,n=this,r=new Array(128),i=new Array(128),a=new Array(128),o=this.table,s=0,u=0,l=(this.TERROR,this.EOF),c=(this.options.errorRecoveryTokenDiscardCount,[0,54]);t=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var d={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};function h(){var e=t.fastLex();return"number"!==typeof e&&(e=n.symbols_[e]||e),e||l}"function"!==typeof assert||assert,this.yyGetSharedState=function(){return d},function(e,t){for(var n in t)"undefined"===typeof e[n]&&Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}(d,this.yy),d.lexer=t,d.parser=this,"function"===typeof d.parseError?this.parseError=function(e,t,n){return n||(n=this.JisonParserError),d.parseError.call(this,e,t,n)}:this.parseError=this.originalParseError,"function"===typeof d.quoteName?this.quoteName=function(e){return d.quoteName.call(this,e)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(e,n,o){var u,l;n&&((d.post_parse||this.post_parse)&&(l=this.constructParseErrorInfo(null,null,null,!1)),d.post_parse&&"undefined"!==typeof(u=d.post_parse.call(this,d,e,l))&&(e=u),this.post_parse&&"undefined"!==typeof(u=this.post_parse.call(this,d,e,l))&&(e=u),l&&l.destroy&&l.destroy());if(this.__reentrant_call_depth>1)return e;if(t.cleanupAfterLex&&t.cleanupAfterLex(o),d&&(d.lexer=void 0,d.parser=void 0,t.yy===d&&(t.yy=void 0)),d=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,r.length=0,i.length=0,a.length=0,s=0,!o){for(var c=this.__error_infos.length-1;c>=0;c--){var h=this.__error_infos[c];h&&"function"===typeof h.destroy&&h.destroy()}this.__error_infos.length=0}return e},this.constructParseErrorInfo=function(e,n,o,l){var c={errStr:e,exception:n,text:t.match,value:t.yytext,token:this.describeSymbol(u)||u,token_id:u,line:t.yylineno,expected:o,recoverable:l,state:f,action:p,new_state:_,symbol_stack:r,state_stack:i,value_stack:a,stack_pointer:s,yy:d,lexer:t,parser:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(c),c};var f,p,m,v,g,y,x,_,b=function(){var e=t.lex();return"number"!==typeof e&&(e=n.symbols_[e]||e),e||l},w={$:!0,_$:void 0,yy:d},S=!1;try{if(this.__reentrant_call_depth++,t.setInput(e,d),"function"===typeof t.canIUse)t.canIUse().fastLex&&(b=h);for(a[s]=null,i[s]=0,r[s]=0,++s,this.pre_parse&&this.pre_parse.call(this,d),d.pre_parse&&d.pre_parse.call(this,d),_=i[s-1];;){if(f=_,this.defaultActions[f])p=2,_=this.defaultActions[f];else if(u||(u=b()),v=o[f]&&o[f][u]||c,_=v[1],!(p=v[0])){var M,E=this.describeSymbol(u)||u,T=this.collect_expected_token_set(f);M="number"===typeof t.yylineno?"Parse error on line "+(t.yylineno+1)+": ":"Parse error: ","function"===typeof t.showPosition&&(M+="\n"+t.showPosition(69,10)+"\n"),T.length?M+="Expecting "+T.join(", ")+", got unexpected "+E:M+="Unexpected "+E,g=this.constructParseErrorInfo(M,null,T,!1),"undefined"!==typeof(m=this.parseError(g.errStr,g,this.JisonParserError))&&(S=m);break}switch(p){default:if(p instanceof Array){g=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+f+", token: "+u,null,null,!1),"undefined"!==typeof(m=this.parseError(g.errStr,g,this.JisonParserError))&&(S=m);break}g=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),"undefined"!==typeof(m=this.parseError(g.errStr,g,this.JisonParserError))&&(S=m);break;case 1:r[s]=u,a[s]=t.yytext,i[s]=_,++s,u=0;continue;case 2:if(y=(x=this.productions_[_-1])[1],"undefined"!==typeof(m=this.performAction.call(w,_,s-1,a))){S=m;break}s-=y;var k=x[0];r[s]=k,a[s]=w.$,_=o[i[s-1]][k],i[s]=_,++s;continue;case 3:-2!==s&&(S=!0,s--,"undefined"!==typeof a[s]&&(S=a[s]))}break}}catch(C){if(C instanceof this.JisonParserError)throw C;if(t&&"function"===typeof t.JisonLexerError&&C instanceof t.JisonLexerError)throw C;g=this.constructParseErrorInfo("Parsing aborted due to exception.",C,null,!1),S=!1,"undefined"!==typeof(m=this.parseError(g.errStr,g,this.JisonParserError))&&(S=m)}finally{S=this.cleanupAfterParse(S,!0,!0),this.__reentrant_call_depth--}return S}};i.originalParseError=i.parseError,i.originalQuoteName=i.quoteName;var a=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonLexerError";var t={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(e,t,n){if(e=""+e,void 0==n&&(n=!(e.indexOf("\n")>0&&e.indexOf("^")>0)),this.yylloc&&n)if("function"===typeof this.prettyPrintRange){this.prettyPrintRange(this.yylloc);/\n\s*$/.test(e)||(e+="\n"),e+="\n  Erroneous area:\n"+this.prettyPrintRange(this.yylloc)}else if("function"===typeof this.showPosition){var r=this.showPosition();r&&(e.length&&"\n"!==e[e.length-1]&&"\n"!==r[0]?e+="\n"+r:e+=r)}var i={errStr:e,recoverable:!!t,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(i),i},parseError:function(e,t,n){if(n||(n=this.JisonLexerError),this.yy){if(this.yy.parser&&"function"===typeof this.yy.parser.parseError)return this.yy.parser.parseError.call(this,e,t,n)||this.ERROR;if("function"===typeof this.yy.parseError)return this.yy.parseError.call(this,e,t,n)||this.ERROR}throw new n(e,t)},yyerror:function(e){var t="";this.yylloc&&(t=" on line "+(this.yylineno+1));var n=this.constructLexErrorInfo("Lexical error"+t+": "+e,this.options.lexerErrorsAreRecoverable),r=Array.prototype.slice.call(arguments,1);return r.length&&(n.extra_error_attributes=r),this.parseError(n.errStr,n,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(e){if(this.setInput("",{}),!e){for(var t=this.__error_infos.length-1;t>=0;t--){var n=this.__error_infos[t];n&&"function"===typeof n.destroy&&n.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var e=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:e,last_line:this.yylineno+1,last_column:e,range:[this.offset,this.offset]}},setInput:function(e,t){if(this.yy=t||this.yy||{},!this.__decompressed){for(var n=this.rules,r=0,i=n.length;r<i;r++){"number"===typeof(h=n[r])&&(n[r]=n[h])}var a=this.conditions;for(var o in a){var s=a[o],u=s.rules,l=(i=u.length,new Array(i+1)),c=new Array(i+1);for(r=0;r<i;r++){var d=u[r],h=n[d];l[r+1]=h,c[r+1]=d}s.rules=c,s.__rule_regexes=l,s.__rule_count=i}this.__decompressed=!0}return this._input=e||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(e,t){var n=e.call(this,this._input,t);return"string"!==typeof n?n&&(this._input=""+n):this._input=n,this},input:function(){if(!this._input)return null;var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=1,n=!1;if("\n"===e)n=!0;else if("\r"===e){n=!0;var r=this._input[1];"\n"===r&&(t++,e+=r,this.yytext+=r,this.yyleng++,this.offset++,this.match+=r,this.matched+=r,this.yylloc.range[1]++)}return n?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(t),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);if(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.yyleng=this.yytext.length,this.offset-=t,this.match=this.match.substr(0,this.match.length-t),this.matched=this.matched.substr(0,this.matched.length-t),n.length>1){this.yylineno-=n.length-1,this.yylloc.last_line=this.yylineno+1;var r=this.match,i=r.split(/(?:\r\n?|\n)/g);1===i.length&&(i=(r=this.matched).split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=i[i.length-1].length}else this.yylloc.last_column-=t;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var e="";this.yylloc&&(e=" on line "+(this.yylineno+1));var t=this.constructLexErrorInfo("Lexical error"+e+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(e){return this.unput(this.match.slice(e))},pastInput:function(e,t){var n=this.matched.substring(0,this.matched.length-this.match.length);e<0?e=n.length:e||(e=20),t<0?t=n.length:t||(t=1);var r=(n=n.substr(2*-e-2)).replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(-t)).join("\n")).length>e&&(n="..."+n.substr(-e)),n},upcomingInput:function(e,t){var n=this.match;e<0?e=n.length+this._input.length:e||(e=20),t<0?t=e:t||(t=1),n.length<2*e+2&&(n+=this._input.substring(0,2*e+2));var r=n.replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(0,t)).join("\n")).length>e&&(n=n.substring(0,e)+"..."),n},showPosition:function(e,t){var n=this.pastInput(e).replace(/\s/g," "),r=new Array(n.length+1).join("-");return n+this.upcomingInput(t).replace(/\s/g," ")+"\n"+r+"^"},deriveLocationInfo:function(e,t,n,r){var i={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return e&&(i.first_line=0|e.first_line,i.last_line=0|e.last_line,i.first_column=0|e.first_column,i.last_column=0|e.last_column,e.range&&(i.range[0]=0|e.range[0],i.range[1]=0|e.range[1])),(i.first_line<=0||i.last_line<i.first_line)&&(i.first_line<=0&&t&&(i.first_line=0|t.last_line,i.first_column=0|t.last_column,t.range&&(i.range[0]=0|e.range[1])),(i.last_line<=0||i.last_line<i.first_line)&&n&&(i.last_line=0|n.first_line,i.last_column=0|n.first_column,n.range&&(i.range[1]=0|e.range[0])),i.first_line<=0&&r&&(i.last_line<=0||r.last_line<=i.last_line)&&(i.first_line=0|r.first_line,i.first_column=0|r.first_column,r.range&&(i.range[0]=0|r.range[0])),i.last_line<=0&&r&&(i.first_line<=0||r.first_line>=i.first_line)&&(i.last_line=0|r.last_line,i.last_column=0|r.last_column,r.range&&(i.range[1]=0|r.range[1]))),i.last_line<=0&&(i.first_line<=0?(i.first_line=this.yylloc.first_line,i.last_line=this.yylloc.last_line,i.first_column=this.yylloc.first_column,i.last_column=this.yylloc.last_column,i.range[0]=this.yylloc.range[0],i.range[1]=this.yylloc.range[1]):(i.last_line=this.yylloc.last_line,i.last_column=this.yylloc.last_column,i.range[1]=this.yylloc.range[1])),i.first_line<=0&&(i.first_line=i.last_line,i.first_column=0,i.range[1]=i.range[0]),i.first_column<0&&(i.first_column=0),i.last_column<0&&(i.last_column=i.first_column>0?i.first_column:80),i},prettyPrintRange:function(e,t,n){e=this.deriveLocationInfo(e,t,n);var r=(this.matched+this._input).split("\n"),i=Math.max(1,t?t.first_line:e.first_line-3),a=Math.max(1,n?n.last_line:e.last_line+1),o=1+Math.log10(1|a)|0,s=new Array(o).join(" "),u=[],l=r.slice(i-1,a+1).map((function(t,n){var r=n+i,a=(s+r).substr(-o)+": "+t,l=new Array(o+1).join("^"),c=3,d=0;(r===e.first_line?(c+=e.first_column,d=Math.max(2,(r===e.last_line?e.last_column:t.length)-e.first_column+1)):r===e.last_line?d=Math.max(2,e.last_column+1):r>e.first_line&&r<e.last_line&&(d=Math.max(2,t.length+1)),d)&&(a+="\n"+l+new Array(c).join(".")+new Array(d).join("^"),t.trim().length>0&&u.push(n));return a=a.replace(/\t/g," ")}));if(u.length>4){var c=u[1]+1,d=u[u.length-2]-1,h=new Array(o+1).join(" ")+"  (...continued...)";h+="\n"+new Array(o+1).join("-")+"  (---------------)",l.splice(c,d-c+1,h)}return l.join("\n")},describeYYLLOC:function(e,t){var n,r=e.first_line,i=e.last_line,a=e.first_column,o=e.last_column;if(0===i-r?(n="line "+r+", ",n+=o-a<=1?"column "+a:"columns "+a+" .. "+o):n="lines "+r+"(column "+a+") .. "+i+"(column "+o+")",e.range&&t){var s=e.range[0],u=e.range[1]-1;n+=u<=s?" {String Offset: "+s+"}":" {String Offset range: "+s+" .. "+u+"}"}return n},test_match:function(e,t){var n,r,i,a,o;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),o=(a=e[0]).length,(r=a.split(/(?:\r\n?|\n)/g)).length>1?(this.yylineno+=r.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r[r.length-1].length):this.yylloc.last_column+=o,this.yytext+=a,this.match+=a,this.matched+=a,this.matches=e,this.yyleng=this.yytext.length,this.yylloc.range[1]+=o,this.offset+=o,this._more=!1,this._backtrack=!1,this._input=this._input.slice(o),n=this.performAction.call(this,this.yy,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in i)this[s]=i[s];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(n=this._signaled_error_token,this._signaled_error_token=!1,n)},next:function(){if(this.done)return this.clear(),this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||this.clear();var i=this.__currentRuleSet__;if(!i&&(!(i=this.__currentRuleSet__=this._currentRules())||!i.rules)){var a="";this.options.trackPosition&&(a=" on line "+(this.yylineno+1));var o=this.constructLexErrorInfo("Internal lexer engine error"+a+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(o.errStr,o,this.JisonLexerError)||this.ERROR}for(var s=i.rules,u=i.__rule_regexes,l=i.__rule_count,c=1;c<=l;c++)if((n=this._input.match(u[c]))&&(!t||n[0].length>t[0].length)){if(t=n,r=c,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,s[c])))return e;if(this._backtrack){t=void 0;continue}return!1}if(!this.options.flex)break}if(t)return!1!==(e=this.test_match(t,s[r]))&&e;if(this._input){a="";this.options.trackPosition&&(a=" on line "+(this.yylineno+1));o=this.constructLexErrorInfo("Lexical error"+a+": Unrecognized text.",this.options.lexerErrorsAreRecoverable);var d=this._input,h=this.topState(),f=this.conditionStack.length;return(e=this.parseError(o.errStr,o,this.JisonLexerError)||this.ERROR)===this.ERROR&&(this.matches||d!==this._input||h!==this.topState()||f!==this.conditionStack.length||this.input()),e}return this.done=!0,this.clear(),this.EOF},lex:function(){var e;for("function"===typeof this.pre_lex&&(e=this.pre_lex.call(this,0)),"function"===typeof this.options.pre_lex&&(e=this.options.pre_lex.call(this,e)||e),this.yy&&"function"===typeof this.yy.pre_lex&&(e=this.yy.pre_lex.call(this,e)||e);!e;)e=this.next();return this.yy&&"function"===typeof this.yy.post_lex&&(e=this.yy.post_lex.call(this,e)||e),"function"===typeof this.options.post_lex&&(e=this.options.post_lex.call(this,e)||e),"function"===typeof this.post_lex&&(e=this.post_lex.call(this,e)||e),e},fastLex:function(){for(var e;!e;)e=this.next();return e},canIUse:function(){return{fastLex:!("function"===typeof this.pre_lex||"function"===typeof this.options.pre_lex||this.yy&&"function"===typeof this.yy.pre_lex||this.yy&&"function"===typeof this.yy.post_lex||"function"===typeof this.options.post_lex||"function"===typeof this.post_lex)&&"function"===typeof this.fastLex}},begin:function(e){return this.pushState(e)},pushState:function(e){return this.conditionStack.push(e),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:e,performAction:function(e,t,n){if(1!==t)return this.simpleCaseActionClusters[t]},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return t}();function o(){this.yy={}}return i.lexer=a,o.prototype=i,i.Parser=o,new o}();t.parser=n,t.Parser=n.Parser,t.parse=function(){return n.parse.apply(n,arguments)}},40082:function(e,t,n){var r=n(83257),i=n(42993),a=n(19581);function o(e){return this instanceof o?(this.nodes=r(e),this):new o(e)}o.prototype.toString=function(){return Array.isArray(this.nodes)?a(this.nodes):""},o.prototype.walk=function(e,t){return i(this.nodes,e,t),this},o.unit=n(54119),o.walk=i,o.stringify=a,e.exports=o},83257:function(e){var t="(".charCodeAt(0),n=")".charCodeAt(0),r="'".charCodeAt(0),i='"'.charCodeAt(0),a="\\".charCodeAt(0),o="/".charCodeAt(0),s=",".charCodeAt(0),u=":".charCodeAt(0),l="*".charCodeAt(0);e.exports=function(e){for(var c,d,h,f,p,m,v,g,y=[],x=e,_=0,b=x.charCodeAt(_),w=x.length,S=[{nodes:y}],M=0,E="",T="",k="";_<w;)if(b<=32){c=_;do{c+=1,b=x.charCodeAt(c)}while(b<=32);f=x.slice(_,c),h=y[y.length-1],b===n&&M?k=f:h&&"div"===h.type?h.after=f:b===s||b===u||b===o&&x.charCodeAt(c+1)!==l?T=f:y.push({type:"space",sourceIndex:_,value:f}),_=c}else if(b===r||b===i){c=_,f={type:"string",sourceIndex:_,quote:d=b===r?"'":'"'};do{if(p=!1,~(c=x.indexOf(d,c+1)))for(m=c;x.charCodeAt(m-1)===a;)m-=1,p=!p;else c=(x+=d).length-1,f.unclosed=!0}while(p);f.value=x.slice(_+1,c),y.push(f),_=c+1,b=x.charCodeAt(_)}else if(b===o&&x.charCodeAt(_+1)===l)f={type:"comment",sourceIndex:_},-1===(c=x.indexOf("*/",_))&&(f.unclosed=!0,c=x.length),f.value=x.slice(_+2,c),y.push(f),_=c+2,b=x.charCodeAt(_);else if(b===o||b===s||b===u)f=x[_],y.push({type:"div",sourceIndex:_-T.length,value:f,before:T,after:""}),T="",_+=1,b=x.charCodeAt(_);else if(t===b){c=_;do{c+=1,b=x.charCodeAt(c)}while(b<=32);if(f={type:"function",sourceIndex:_-E.length,value:E,before:x.slice(_+1,c)},_=c,"url"===E&&b!==r&&b!==i){c-=1;do{if(p=!1,~(c=x.indexOf(")",c+1)))for(m=c;x.charCodeAt(m-1)===a;)m-=1,p=!p;else c=(x+=")").length-1,f.unclosed=!0}while(p);v=c;do{v-=1,b=x.charCodeAt(v)}while(b<=32);f.nodes=_!==v+1?[{type:"word",sourceIndex:_,value:x.slice(_,v+1)}]:[],f.unclosed&&v+1!==c?(f.after="",f.nodes.push({type:"space",sourceIndex:v+1,value:x.slice(v+1,c)})):f.after=x.slice(v+1,c),_=c+1,b=x.charCodeAt(_),y.push(f)}else M+=1,f.after="",y.push(f),S.push(f),y=f.nodes=[],g=f;E=""}else if(n===b&&M)_+=1,b=x.charCodeAt(_),g.after=k,k="",M-=1,S.pop(),y=(g=S[M]).nodes;else{c=_;do{b===a&&(c+=1),c+=1,b=x.charCodeAt(c)}while(c<w&&!(b<=32||b===r||b===i||b===s||b===u||b===o||b===t||b===n&&M));f=x.slice(_,c),t===b?E=f:y.push({type:"word",sourceIndex:_,value:f}),_=c}for(_=S.length-1;_;_-=1)S[_].unclosed=!0;return S[0].nodes}},19581:function(e){function t(e,t){var r,i,a=e.type,o=e.value;return t&&void 0!==(i=t(e))?i:"word"===a||"space"===a?o:"string"===a?(r=e.quote||"")+o+(e.unclosed?"":r):"comment"===a?"/*"+o+(e.unclosed?"":"*/"):"div"===a?(e.before||"")+o+(e.after||""):Array.isArray(e.nodes)?(r=n(e.nodes),"function"!==a?r:o+"("+(e.before||"")+r+(e.after||"")+(e.unclosed?"":")")):o}function n(e,n){var r,i;if(Array.isArray(e)){for(r="",i=e.length-1;~i;i-=1)r=t(e[i],n)+r;return r}return t(e,n)}e.exports=n},54119:function(e){var t="-".charCodeAt(0),n="+".charCodeAt(0),r=".".charCodeAt(0),i="e".charCodeAt(0),a="E".charCodeAt(0);e.exports=function(e){for(var o,s=0,u=e.length,l=!1,c=-1,d=!1;s<u;){if((o=e.charCodeAt(s))>=48&&o<=57)d=!0;else if(o===i||o===a){if(c>-1)break;c=s}else if(o===r){if(l)break;l=!0}else{if(o!==n&&o!==t)break;if(0!==s)break}s+=1}return c+1===s&&s--,!!d&&{number:e.slice(0,s),unit:e.slice(s)}}},42993:function(e){e.exports=function e(t,n,r){var i,a,o,s;for(i=0,a=t.length;i<a;i+=1)o=t[i],r||(s=n(o,i,t)),!1!==s&&"function"===o.type&&Array.isArray(o.nodes)&&e(o.nodes,n,r),r&&n(o,i,t)}},19727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(e,t,n){var r=c;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=M(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?f:d,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=f,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var c="suspendedStart",d="suspendedYield",h="executing",f="completed",p={};function m(){}function v(){}function g(){}var y={};y[a]=function(){return this};var x=Object.getPrototypeOf,_=x&&x(x(C([])));_&&_!==n&&r.call(_,a)&&(y=_);var b=g.prototype=m.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=b.constructor=g,g.constructor=v,g[s]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),b[s]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(n){Function("r","regeneratorRuntime = r")(t)}},90474:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,a="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&u()}function s(){o(a)}function u(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},h=y(0,0,0,0);function f(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=d(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=f(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,s=f(r.width),u=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=p(r,"left","right")+a),Math.round(u+o)!==n&&(u-=p(r,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var l=Math.round(s+a)-t,c=Math.round(u+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return y(i.left,i.top,s,u)}var v="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function g(e){return i?v(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):m(e):h}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var x=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return c(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);c(this,{target:e,contentRect:n})},b=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new x(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!==typeof WeakMap?new WeakMap:new r,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new b(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var M="undefined"!==typeof a.ResizeObserver?a.ResizeObserver:S;t.default=M},36813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,c=null,d=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(d,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,g=-1,y=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,b=_.port2;_.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();x=e+y;try{v(!0,e)?b.postMessage(null):(m=!1,v=null)}catch(n){throw b.postMessage(null),n}}else m=!1},n=function(e){v=e,m||(m=!0,b.postMessage(null))},r=function(e,n){g=h((function(){e(t.unstable_now())}),n)},i=function(){f(g),g=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function M(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],k=[],C=1,A=null,P=3,O=!1,L=!1,R=!1;function D(e){for(var t=S(k);null!==t;){if(null===t.callback)M(k);else{if(!(t.startTime<=e))break;M(k),t.sortIndex=t.expirationTime,w(T,t)}t=S(k)}}function I(e){if(R=!1,D(e),!L)if(null!==S(T))L=!0,n(F);else{var t=S(k);null!==t&&r(I,t.startTime-e)}}function F(e,n){L=!1,R&&(R=!1,i()),O=!0;var a=P;try{for(D(n),A=S(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,P=A.priorityLevel;var s=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===S(T)&&M(T),D(n)}else M(T);A=S(T)}if(null!==A)var u=!0;else{var l=S(k);null!==l&&r(I,l.startTime-n),u=!1}return u}finally{A=null,P=a,O=!1}}var N=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(T)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,w(k,e),null===S(T)&&e===S(k)&&(R?i():R=!0,r(I,o-s))):(e.sortIndex=u,w(T,e),L||O||(L=!0,n(F))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},45296:function(e,t,n){"use strict";e.exports=n(36813)},79613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var l=a[u];if(!s(l))return!1;var c=e[l],d=t[l];if(!1===(i=n?n.call(r,c,d,l):void 0)||void 0===i&&c!==d)return!1}return!0}},34585:function(e,t,n){"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return be},AddEquation:function(){return H},AddOperation:function(){return ve},AdditiveAnimationBlendMode:function(){return hn},AdditiveBlending:function(){return U},AlphaFormat:function(){return tt},AlwaysDepth:function(){return se},AlwaysStencilFunc:function(){return Gn},AmbientLight:function(){return Jd},AmbientLightProbe:function(){return wh},AnimationClip:function(){return ed},AnimationLoader:function(){return ud},AnimationMixer:function(){return tf},AnimationObjectGroup:function(){return Jh},AnimationUtils:function(){return Bc},ArcCurve:function(){return vd},ArrayCamera:function(){return fu},ArrowHelper:function(){return Wf},Audio:function(){return Rh},AudioAnalyser:function(){return zh},AudioContext:function(){return xh},AudioListener:function(){return Lh},AudioLoader:function(){return _h},AxesHelper:function(){return qf},AxisHelper:function(){return Wp},BackSide:function(){return D},BasicDepthPacking:function(){return Mn},BasicShadowMap:function(){return A},BinaryTextureLoader:function(){return Qp},Bone:function(){return $u},BooleanKeyframeTrack:function(){return qc},BoundingBoxHelper:function(){return qp},Box2:function(){return hf},Box3:function(){return Pr},Box3Helper:function(){return Gf},BoxBufferGeometry:function(){return Ha},BoxGeometry:function(){return Ha},BoxHelper:function(){return Vf},BufferAttribute:function(){return ra},BufferGeometry:function(){return Ma},BufferGeometryLoader:function(){return sh},ByteType:function(){return He},Cache:function(){return nd},Camera:function(){return Ka},CameraHelper:function(){return Nf},CanvasRenderer:function(){return Jp},CanvasTexture:function(){return Cl},CatmullRomCurve3:function(){return wd},CineonToneMapping:function(){return _e},CircleBufferGeometry:function(){return Pl},CircleGeometry:function(){return Pl},ClampToEdgeWrapping:function(){return Oe},Clock:function(){return Th},Color:function(){return Ji},ColorKeyframeTrack:function(){return Xc},CompressedTexture:function(){return kl},CompressedTextureLoader:function(){return ld},ConeBufferGeometry:function(){return Ll},ConeGeometry:function(){return Ll},CubeCamera:function(){return $a},CubeReflectionMapping:function(){return Me},CubeRefractionMapping:function(){return Ee},CubeTexture:function(){return Ja},CubeTextureLoader:function(){return dd},CubeUVReflectionMapping:function(){return Ce},CubeUVRefractionMapping:function(){return Ae},CubicBezierCurve:function(){return Td},CubicBezierCurve3:function(){return kd},CubicInterpolant:function(){return Gc},CullFaceBack:function(){return T},CullFaceFront:function(){return k},CullFaceFrontBack:function(){return C},CullFaceNone:function(){return E},Curve:function(){return pd},CurvePath:function(){return Dd},CustomBlending:function(){return G},CustomToneMapping:function(){return we},CylinderBufferGeometry:function(){return Ol},CylinderGeometry:function(){return Ol},Cylindrical:function(){return cf},DataTexture:function(){return Ju},DataTexture2DArray:function(){return Eo},DataTexture3D:function(){return To},DataTextureLoader:function(){return hd},DataUtils:function(){return Yf},DecrementStencilOp:function(){return Ln},DecrementWrapStencilOp:function(){return Dn},DefaultLoadingManager:function(){return id},DepthFormat:function(){return st},DepthStencilFormat:function(){return ut},DepthTexture:function(){return Al},DirectionalLight:function(){return $d},DirectionalLightHelper:function(){return Df},DiscreteInterpolant:function(){return Zc},DodecahedronBufferGeometry:function(){return Dl},DodecahedronGeometry:function(){return Dl},DoubleSide:function(){return I},DstAlphaFactor:function(){return te},DstColorFactor:function(){return re},DynamicBufferAttribute:function(){return Fp},DynamicCopyUsage:function(){return Qn},DynamicDrawUsage:function(){return Zn},DynamicReadUsage:function(){return Xn},EdgesGeometry:function(){return zl},EdgesHelper:function(){return Xp},EllipseCurve:function(){return md},EqualDepth:function(){return ce},EqualStencilFunc:function(){return jn},EquirectangularReflectionMapping:function(){return Te},EquirectangularRefractionMapping:function(){return ke},Euler:function(){return pi},EventDispatcher:function(){return tr},ExtrudeBufferGeometry:function(){return pc},ExtrudeGeometry:function(){return pc},FaceColors:function(){return Ep},FileLoader:function(){return sd},FlatShading:function(){return F},Float16BufferAttribute:function(){return da},Float32Attribute:function(){return Hp},Float32BufferAttribute:function(){return ha},Float64Attribute:function(){return Zp},Float64BufferAttribute:function(){return fa},FloatType:function(){return Ke},Fog:function(){return wu},FogExp2:function(){return bu},Font:function(){return ph},FontLoader:function(){return yh},FrontSide:function(){return R},Frustum:function(){return ro},GLBufferAttribute:function(){return af},GLSL1:function(){return Jn},GLSL3:function(){return er},GammaEncoding:function(){return yn},GreaterDepth:function(){return he},GreaterEqualDepth:function(){return de},GreaterEqualStencilFunc:function(){return Vn},GreaterStencilFunc:function(){return Un},GridHelper:function(){return Af},Group:function(){return pu},HalfFloatType:function(){return Ye},HemisphereLight:function(){return jd},HemisphereLightHelper:function(){return Cf},HemisphereLightProbe:function(){return bh},IcosahedronBufferGeometry:function(){return vc},IcosahedronGeometry:function(){return vc},ImageBitmapLoader:function(){return hh},ImageLoader:function(){return cd},ImageUtils:function(){return yr},ImmediateRenderObject:function(){return vf},IncrementStencilOp:function(){return On},IncrementWrapStencilOp:function(){return Rn},InstancedBufferAttribute:function(){return oh},InstancedBufferGeometry:function(){return ah},InstancedInterleavedBuffer:function(){return rf},InstancedMesh:function(){return sl},Int16Attribute:function(){return Up},Int16BufferAttribute:function(){return sa},Int32Attribute:function(){return Vp},Int32BufferAttribute:function(){return la},Int8Attribute:function(){return Np},Int8BufferAttribute:function(){return ia},IntType:function(){return qe},InterleavedBuffer:function(){return Mu},InterleavedBufferAttribute:function(){return Tu},Interpolant:function(){return Vc},InterpolateDiscrete:function(){return an},InterpolateLinear:function(){return on},InterpolateSmooth:function(){return sn},InvertStencilOp:function(){return In},JSONLoader:function(){return em},KeepStencilOp:function(){return An},KeyframeTrack:function(){return Wc},LOD:function(){return Zu},LatheBufferGeometry:function(){return gc},LatheGeometry:function(){return gc},Layers:function(){return mi},LensFlare:function(){return nm},LessDepth:function(){return ue},LessEqualDepth:function(){return le},LessEqualStencilFunc:function(){return zn},LessStencilFunc:function(){return Nn},Light:function(){return Nd},LightProbe:function(){return nh},Line:function(){return pl},Line3:function(){return mf},LineBasicMaterial:function(){return ul},LineCurve:function(){return Cd},LineCurve3:function(){return Ad},LineDashedMaterial:function(){return zc},LineLoop:function(){return yl},LinePieces:function(){return Sp},LineSegments:function(){return gl},LineStrip:function(){return wp},LinearEncoding:function(){return vn},LinearFilter:function(){return je},LinearInterpolant:function(){return Hc},LinearMipMapLinearFilter:function(){return Ve},LinearMipMapNearestFilter:function(){return Ue},LinearMipmapLinearFilter:function(){return Be},LinearMipmapNearestFilter:function(){return ze},LinearToneMapping:function(){return ye},Loader:function(){return ad},LoaderUtils:function(){return ih},LoadingManager:function(){return rd},LogLuvEncoding:function(){return _n},LoopOnce:function(){return tn},LoopPingPong:function(){return rn},LoopRepeat:function(){return nn},LuminanceAlphaFormat:function(){return at},LuminanceFormat:function(){return it},MOUSE:function(){return S},Material:function(){return Wi},MaterialLoader:function(){return rh},Math:function(){return pr},MathUtils:function(){return pr},Matrix3:function(){return gr},Matrix4:function(){return ii},MaxEquation:function(){return X},Mesh:function(){return Va},MeshBasicMaterial:function(){return ea},MeshDepthMaterial:function(){return su},MeshDistanceMaterial:function(){return uu},MeshFaceMaterial:function(){return kp},MeshLambertMaterial:function(){return Nc},MeshMatcapMaterial:function(){return jc},MeshNormalMaterial:function(){return Fc},MeshPhongMaterial:function(){return Dc},MeshPhysicalMaterial:function(){return Rc},MeshStandardMaterial:function(){return Lc},MeshToonMaterial:function(){return Ic},MinEquation:function(){return q},MirroredRepeatWrapping:function(){return Le},MixOperation:function(){return me},MultiMaterial:function(){return Cp},MultiplyBlending:function(){return V},MultiplyOperation:function(){return pe},NearestFilter:function(){return Re},NearestMipMapLinearFilter:function(){return Ne},NearestMipMapNearestFilter:function(){return Ie},NearestMipmapLinearFilter:function(){return Fe},NearestMipmapNearestFilter:function(){return De},NeverDepth:function(){return oe},NeverStencilFunc:function(){return Fn},NoBlending:function(){return j},NoColors:function(){return Mp},NoToneMapping:function(){return ge},NormalAnimationBlendMode:function(){return dn},NormalBlending:function(){return z},NotEqualDepth:function(){return fe},NotEqualStencilFunc:function(){return Bn},NumberKeyframeTrack:function(){return Kc},Object3D:function(){return Ai},ObjectLoader:function(){return uh},ObjectSpaceNormalMap:function(){return kn},OctahedronBufferGeometry:function(){return yc},OctahedronGeometry:function(){return yc},OneFactor:function(){return Y},OneMinusDstAlphaFactor:function(){return ne},OneMinusDstColorFactor:function(){return ie},OneMinusSrcAlphaFactor:function(){return ee},OneMinusSrcColorFactor:function(){return $},OrthographicCamera:function(){return Yd},PCFShadowMap:function(){return P},PCFSoftShadowMap:function(){return O},PMREMGenerator:function(){return mp},ParametricBufferGeometry:function(){return xc},ParametricGeometry:function(){return xc},Particle:function(){return Pp},ParticleBasicMaterial:function(){return Rp},ParticleSystem:function(){return Op},ParticleSystemMaterial:function(){return Dp},Path:function(){return Id},PerspectiveCamera:function(){return Ya},Plane:function(){return Ri},PlaneBufferGeometry:function(){return oo},PlaneGeometry:function(){return oo},PlaneHelper:function(){return Hf},PointCloud:function(){return Ap},PointCloudMaterial:function(){return Lp},PointLight:function(){return Kd},PointLightHelper:function(){return Mf},Points:function(){return Ml},PointsMaterial:function(){return xl},PolarGridHelper:function(){return Pf},PolyhedronBufferGeometry:function(){return Rl},PolyhedronGeometry:function(){return Rl},PositionalAudio:function(){return jh},PropertyBinding:function(){return $h},PropertyMixer:function(){return Uh},QuadraticBezierCurve:function(){return Pd},QuadraticBezierCurve3:function(){return Od},Quaternion:function(){return Tr},QuaternionKeyframeTrack:function(){return Qc},QuaternionLinearInterpolant:function(){return Yc},REVISION:function(){return w},RGBADepthPacking:function(){return En},RGBAFormat:function(){return rt},RGBAIntegerFormat:function(){return pt},RGBA_ASTC_10x10_Format:function(){return Nt},RGBA_ASTC_10x5_Format:function(){return Dt},RGBA_ASTC_10x6_Format:function(){return It},RGBA_ASTC_10x8_Format:function(){return Ft},RGBA_ASTC_12x10_Format:function(){return jt},RGBA_ASTC_12x12_Format:function(){return zt},RGBA_ASTC_4x4_Format:function(){return Tt},RGBA_ASTC_5x4_Format:function(){return kt},RGBA_ASTC_5x5_Format:function(){return Ct},RGBA_ASTC_6x5_Format:function(){return At},RGBA_ASTC_6x6_Format:function(){return Pt},RGBA_ASTC_8x5_Format:function(){return Ot},RGBA_ASTC_8x6_Format:function(){return Lt},RGBA_ASTC_8x8_Format:function(){return Rt},RGBA_BPTC_Format:function(){return Ut},RGBA_ETC2_EAC_Format:function(){return Et},RGBA_PVRTC_2BPPV1_Format:function(){return wt},RGBA_PVRTC_4BPPV1_Format:function(){return bt},RGBA_S3TC_DXT1_Format:function(){return vt},RGBA_S3TC_DXT3_Format:function(){return gt},RGBA_S3TC_DXT5_Format:function(){return yt},RGBDEncoding:function(){return Sn},RGBEEncoding:function(){return xn},RGBEFormat:function(){return ot},RGBFormat:function(){return nt},RGBIntegerFormat:function(){return ft},RGBM16Encoding:function(){return wn},RGBM7Encoding:function(){return bn},RGB_ETC1_Format:function(){return St},RGB_ETC2_Format:function(){return Mt},RGB_PVRTC_2BPPV1_Format:function(){return _t},RGB_PVRTC_4BPPV1_Format:function(){return xt},RGB_S3TC_DXT1_Format:function(){return mt},RGFormat:function(){return dt},RGIntegerFormat:function(){return ht},RawShaderMaterial:function(){return Oc},Ray:function(){return ri},Raycaster:function(){return of},RectAreaLight:function(){return eh},RedFormat:function(){return lt},RedIntegerFormat:function(){return ct},ReinhardToneMapping:function(){return xe},RepeatWrapping:function(){return Pe},ReplaceStencilOp:function(){return Pn},ReverseSubtractEquation:function(){return W},RingBufferGeometry:function(){return _c},RingGeometry:function(){return _c},SRGB8_ALPHA8_ASTC_10x10_Format:function(){return $t},SRGB8_ALPHA8_ASTC_10x5_Format:function(){return Kt},SRGB8_ALPHA8_ASTC_10x6_Format:function(){return Yt},SRGB8_ALPHA8_ASTC_10x8_Format:function(){return Qt},SRGB8_ALPHA8_ASTC_12x10_Format:function(){return Jt},SRGB8_ALPHA8_ASTC_12x12_Format:function(){return en},SRGB8_ALPHA8_ASTC_4x4_Format:function(){return Bt},SRGB8_ALPHA8_ASTC_5x4_Format:function(){return Vt},SRGB8_ALPHA8_ASTC_5x5_Format:function(){return Gt},SRGB8_ALPHA8_ASTC_6x5_Format:function(){return Ht},SRGB8_ALPHA8_ASTC_6x6_Format:function(){return Zt},SRGB8_ALPHA8_ASTC_8x5_Format:function(){return Wt},SRGB8_ALPHA8_ASTC_8x6_Format:function(){return qt},SRGB8_ALPHA8_ASTC_8x8_Format:function(){return Xt},Scene:function(){return Su},SceneUtils:function(){return tm},ShaderChunk:function(){return so},ShaderLib:function(){return lo},ShaderMaterial:function(){return Xa},ShadowMaterial:function(){return Pc},Shape:function(){return Fd},ShapeBufferGeometry:function(){return bc},ShapeGeometry:function(){return bc},ShapePath:function(){return fh},ShapeUtils:function(){return dc},ShortType:function(){return Ze},Skeleton:function(){return nl},SkeletonHelper:function(){return wf},SkinnedMesh:function(){return Qu},SmoothShading:function(){return N},Sphere:function(){return Kr},SphereBufferGeometry:function(){return wc},SphereGeometry:function(){return wc},Spherical:function(){return lf},SphericalHarmonics3:function(){return th},SplineCurve:function(){return Ld},SpotLight:function(){return Hd},SpotLightHelper:function(){return yf},Sprite:function(){return Bu},SpriteMaterial:function(){return Cu},SrcAlphaFactor:function(){return J},SrcAlphaSaturateFactor:function(){return ae},SrcColorFactor:function(){return Q},StaticCopyUsage:function(){return Yn},StaticDrawUsage:function(){return Hn},StaticReadUsage:function(){return qn},StereoCamera:function(){return Eh},StreamCopyUsage:function(){return $n},StreamDrawUsage:function(){return Wn},StreamReadUsage:function(){return Kn},StringKeyframeTrack:function(){return $c},SubtractEquation:function(){return Z},SubtractiveBlending:function(){return B},TOUCH:function(){return M},TangentSpaceNormalMap:function(){return Tn},TetrahedronBufferGeometry:function(){return Sc},TetrahedronGeometry:function(){return Sc},TextBufferGeometry:function(){return Mc},TextGeometry:function(){return Mc},Texture:function(){return _r},TextureLoader:function(){return fd},TorusBufferGeometry:function(){return Ec},TorusGeometry:function(){return Ec},TorusKnotBufferGeometry:function(){return Tc},TorusKnotGeometry:function(){return Tc},Triangle:function(){return Hi},TriangleFanDrawMode:function(){return mn},TriangleStripDrawMode:function(){return pn},TrianglesDrawMode:function(){return fn},TubeBufferGeometry:function(){return kc},TubeGeometry:function(){return kc},UVMapping:function(){return Se},Uint16Attribute:function(){return Bp},Uint16BufferAttribute:function(){return ua},Uint32Attribute:function(){return Gp},Uint32BufferAttribute:function(){return ca},Uint8Attribute:function(){return jp},Uint8BufferAttribute:function(){return aa},Uint8ClampedAttribute:function(){return zp},Uint8ClampedBufferAttribute:function(){return oa},Uniform:function(){return nf},UniformsLib:function(){return uo},UniformsUtils:function(){return qa},UnsignedByteType:function(){return Ge},UnsignedInt248Type:function(){return et},UnsignedIntType:function(){return Xe},UnsignedShort4444Type:function(){return Qe},UnsignedShort5551Type:function(){return $e},UnsignedShort565Type:function(){return Je},UnsignedShortType:function(){return We},VSMShadowMap:function(){return L},Vector2:function(){return mr},Vector3:function(){return kr},Vector4:function(){return wr},VectorKeyframeTrack:function(){return Jc},Vertex:function(){return Ip},VertexColors:function(){return Tp},VideoTexture:function(){return Tl},WebGL1Renderer:function(){return _u},WebGLCubeRenderTarget:function(){return eo},WebGLMultipleRenderTargets:function(){return Mr},WebGLMultisampleRenderTarget:function(){return Er},WebGLRenderTarget:function(){return Sr},WebGLRenderTargetCube:function(){return $p},WebGLRenderer:function(){return xu},WebGLUtils:function(){return hu},WireframeGeometry:function(){return Cc},WireframeHelper:function(){return Kp},WrapAroundEnding:function(){return cn},XHRLoader:function(){return Yp},ZeroCurvatureEnding:function(){return un},ZeroFactor:function(){return K},ZeroSlopeEnding:function(){return ln},ZeroStencilOp:function(){return Cn},sRGBEncoding:function(){return gn}});var r=n(15861),i=n(37762),a=n(4942),o=n(70885);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var u=n(97326);function l(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,u.Z)(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function h(){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},h.apply(this,arguments)}var f=n(1413),p=n(89611);function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,p.Z)(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}for(var g,y=n(15671),x=n(43144),_=n(87757),b=n.n(_),w="129",S={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},M={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},E=0,T=1,k=2,C=3,A=0,P=1,O=2,L=3,R=0,D=1,I=2,F=1,N=2,j=0,z=1,U=2,B=3,V=4,G=5,H=100,Z=101,W=102,q=103,X=104,K=200,Y=201,Q=202,$=203,J=204,ee=205,te=206,ne=207,re=208,ie=209,ae=210,oe=0,se=1,ue=2,le=3,ce=4,de=5,he=6,fe=7,pe=0,me=1,ve=2,ge=0,ye=1,xe=2,_e=3,be=4,we=5,Se=300,Me=301,Ee=302,Te=303,ke=304,Ce=306,Ae=307,Pe=1e3,Oe=1001,Le=1002,Re=1003,De=1004,Ie=1004,Fe=1005,Ne=1005,je=1006,ze=1007,Ue=1007,Be=1008,Ve=1008,Ge=1009,He=1010,Ze=1011,We=1012,qe=1013,Xe=1014,Ke=1015,Ye=1016,Qe=1017,$e=1018,Je=1019,et=1020,tt=1021,nt=1022,rt=1023,it=1024,at=1025,ot=rt,st=1026,ut=1027,lt=1028,ct=1029,dt=1030,ht=1031,ft=1032,pt=1033,mt=33776,vt=33777,gt=33778,yt=33779,xt=35840,_t=35841,bt=35842,wt=35843,St=36196,Mt=37492,Et=37496,Tt=37808,kt=37809,Ct=37810,At=37811,Pt=37812,Ot=37813,Lt=37814,Rt=37815,Dt=37816,It=37817,Ft=37818,Nt=37819,jt=37820,zt=37821,Ut=36492,Bt=37840,Vt=37841,Gt=37842,Ht=37843,Zt=37844,Wt=37845,qt=37846,Xt=37847,Kt=37848,Yt=37849,Qt=37850,$t=37851,Jt=37852,en=37853,tn=2200,nn=2201,rn=2202,an=2300,on=2301,sn=2302,un=2400,ln=2401,cn=2402,dn=2500,hn=2501,fn=0,pn=1,mn=2,vn=3e3,gn=3001,yn=3007,xn=3002,_n=3003,bn=3004,wn=3005,Sn=3006,Mn=3200,En=3201,Tn=0,kn=1,Cn=0,An=7680,Pn=7681,On=7682,Ln=7683,Rn=34055,Dn=34056,In=5386,Fn=512,Nn=513,jn=514,zn=515,Un=516,Bn=517,Vn=518,Gn=519,Hn=35044,Zn=35048,Wn=35040,qn=35045,Xn=35049,Kn=35041,Yn=35046,Qn=35050,$n=35042,Jn="100",er="300 es",tr=function(){function e(){(0,y.Z)(this,e)}return(0,x.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),nr=[],rr=0;rr<256;rr++)nr[rr]=(rr<16?"0":"")+rr.toString(16);var ir=1234567,ar=Math.PI/180,or=180/Math.PI;function sr(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(nr[255&e]+nr[e>>8&255]+nr[e>>16&255]+nr[e>>24&255]+"-"+nr[255&t]+nr[t>>8&255]+"-"+nr[t>>16&15|64]+nr[t>>24&255]+"-"+nr[63&n|128]+nr[n>>8&255]+"-"+nr[n>>16&255]+nr[n>>24&255]+nr[255&r]+nr[r>>8&255]+nr[r>>16&255]+nr[r>>24&255]).toUpperCase()}function ur(e,t,n){return Math.max(t,Math.min(n,e))}function lr(e,t){return(e%t+t)%t}function cr(e,t,n){return(1-n)*e+n*t}function dr(e){return 0===(e&e-1)&&0!==e}function hr(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function fr(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var pr=Object.freeze({__proto__:null,DEG2RAD:ar,RAD2DEG:or,generateUUID:sr,clamp:ur,euclideanModulo:lr,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:cr,damp:function(e,t,n,r){return cr(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(lr(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(ir=e%2147483647),((ir=16807*ir%2147483647)-1)/2147483646},degToRad:function(e){return e*ar},radToDeg:function(e){return e*or},isPowerOfTwo:dr,ceilPowerOfTwo:hr,floorPowerOfTwo:fr,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*d,u*h,s*l);break;case"YZY":e.set(u*h,s*c,u*d,s*l);break;case"ZXZ":e.set(u*d,u*h,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*f,s*l);break;case"YXY":e.set(u*f,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*f,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),mr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,y.Z)(this,e),this.x=t,this.y=n}return(0,x.Z)(e,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),e}();mr.prototype.isVector2=!0;var vr,gr=function(){function e(){(0,y.Z)(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,x.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],x=r[7],_=r[2],b=r[5],w=r[8];return i[0]=a*p+o*g+s*_,i[3]=a*m+o*y+s*b,i[6]=a*v+o*x+s*w,i[1]=u*p+l*g+c*_,i[4]=u*m+l*y+c*b,i[7]=u*v+l*x+c*w,i[2]=d*p+h*g+f*_,i[5]=d*m+h*y+f*b,i[8]=d*v+h*x+f*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,d=o*s-l*i,h=u*i-a*s,f=t*c+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=d*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*l,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();gr.prototype.isMatrix3=!0;var yr=function(){function e(){(0,y.Z)(this,e)}return(0,x.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===vr&&(vr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),vr.width=e.width,vr.height=e.height;var n=vr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=vr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),xr=0,_r=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oe,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:je,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Be,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:rt,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ge,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:vn;return(0,y.Z)(this,n),e=t.call(this),Object.defineProperty((0,u.Z)(e),"id",{value:xr++}),e.uuid=sr(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=h,e.format=c,e.internalFormat=null,e.type=d,e.offset=new mr(0,0),e.repeat=new mr(1,1),e.center=new mr(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new gr,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.version=0,e.onUpdate=null,e}return(0,x.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=sr()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(br(r[a].image)):i.push(br(r[a]))}else i=br(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==Se)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pe:e.x=e.x-Math.floor(e.x);break;case Oe:e.x=e.x<0?0:1;break;case Le:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Pe:e.y=e.y-Math.floor(e.y);break;case Oe:e.y=e.y<0?0:1;break;case Le:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(tr);function br(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?yr.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}_r.DEFAULT_IMAGE=void 0,_r.DEFAULT_MAPPING=Se,_r.prototype.isTexture=!0;var wr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,y.Z)(this,e),this.x=t,this.y=n,this.z=r,this.w=i}return(0,x.Z)(e,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],d=s[1],h=s[5],f=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(l-d)<a&&Math.abs(c-p)<a&&Math.abs(f-m)<a){if(Math.abs(l+d)<o&&Math.abs(c+p)<o&&Math.abs(f+m)<o&&Math.abs(u+h+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(h+1)/2,x=(v+1)/2,_=(l+d)/4,b=(c+p)/4,w=(f+m)/4;return g>y&&g>x?g<a?(n=0,r=.707106781,i=.707106781):(r=_/(n=Math.sqrt(g)),i=b/n):y>x?y<a?(n=.707106781,r=0,i=.707106781):(n=_/(r=Math.sqrt(y)),i=w/r):x<a?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(x)),r=w/i),this.set(n,r,i,t),this}var S=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(d-l)*(d-l));return Math.abs(S)<.001&&(S=1),this.x=(m-f)/S,this.y=(c-p)/S,this.z=(d-l)/S,this.w=Math.acos((u+h+v-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),e}();wr.prototype.isVector4=!0;var Sr=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return(0,y.Z)(this,n),(a=t.call(this)).width=e,a.height=r,a.depth=1,a.scissor=new wr(0,0,e,r),a.scissorTest=!1,a.viewport=new wr(0,0,e,r),i=i||{},a.texture=new _r(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.image={},a.texture.image.width=e,a.texture.image.height=r,a.texture.image.depth=1,a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:je,a.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,a.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,a.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,a}return(0,x.Z)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=(0,f.Z)({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(tr);Sr.prototype.isWebGLRenderTarget=!0;var Mr=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;(0,y.Z)(this,n);var o=(a=t.call(this,e,r)).texture;a.texture=[];for(var s=0;s<i;s++)a.texture[s]=o.clone();return a}return(0,x.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Sr);Mr.prototype.isWebGLMultipleRenderTargets=!0;var Er=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return(0,y.Z)(this,n),(a=t.call(this,e,r,i)).samples=4,a}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(Sr);Er.prototype.isWebGLMultisampleRenderTarget=!0;var Tr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,y.Z)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return(0,x.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=d*l*c+u*h*f,this._y=u*h*c-d*l*f,this._z=u*l*f+d*h*c,this._w=u*l*c-d*h*f;break;case"YXZ":this._x=d*l*c+u*h*f,this._y=u*h*c-d*l*f,this._z=u*l*f-d*h*c,this._w=u*l*c+d*h*f;break;case"ZXY":this._x=d*l*c-u*h*f,this._y=u*h*c+d*l*f,this._z=u*l*f+d*h*c,this._w=u*l*c-d*h*f;break;case"ZYX":this._x=d*l*c-u*h*f,this._y=u*h*c+d*l*f,this._z=u*l*f-d*h*c,this._w=u*l*c+d*h*f;break;case"YZX":this._x=d*l*c+u*h*f,this._y=u*h*c+d*l*f,this._z=u*l*f-d*h*c,this._w=u*l*c-d*h*f;break;case"XZY":this._x=d*l*c-u*h*f,this._y=u*h*c-d*l*f,this._z=u*l*f+d*h*c,this._w=u*l*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],d=n+o+c;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(l-s)*h,this._y=(i-u)*h,this._z=(a-r)*h}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(l-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var m=2*Math.sqrt(1+c-n-o);this._w=(a-r)/m,this._x=(i+u)/m,this._y=(s+l)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(ur(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),d=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=i*d+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],d=i[a+0],h=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==d||u!==h||l!==f){var m=1-o,v=s*d+u*h+l*f+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),_=Math.atan2(x,v*g);m=Math.sin(m*_)/x,o=Math.sin(o*_)/x}var b=o*g;if(s=s*m+d*b,u=u*m+h*b,l=l*m+f*b,c=c*m+p*b,m===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],d=i[a+1],h=i[a+2],f=i[a+3];return e[t]=o*f+l*c+s*h-u*d,e[t+1]=s*f+l*d+u*c-o*h,e[t+2]=u*f+l*h+o*d-s*c,e[t+3]=l*f-o*c-s*d-u*h,e}}]),e}();Tr.prototype.isQuaternion=!0;var kr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,y.Z)(this,e),this.x=t,this.y=n,this.z=r}return(0,x.Z)(e,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ar.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Ar.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=u*s+d*-i+l*-o-c*-a,this.y=l*s+d*-a+c*-i-u*-o,this.z=c*s+d*-o+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Cr.copy(this).projectOnVector(e),this.sub(Cr)}},{key:"reflect",value:function(e){return this.sub(Cr.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(ur(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),e}();kr.prototype.isVector3=!0;var Cr=new kr,Ar=new Tr,Pr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr(-1/0,-1/0,-1/0);(0,y.Z)(this,e),this.min=t,this.max=n}return(0,x.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],d=e[s+2];l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>i&&(i=l),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),d=e.getZ(s);l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>i&&(i=l),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Lr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new kr),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new kr),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Rr.copy(t.boundingBox),Rr.applyMatrix4(e.matrixWorld),this.union(Rr));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new kr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Lr),Lr.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Ur),Br.subVectors(this.max,Ur),Dr.subVectors(e.a,Ur),Ir.subVectors(e.b,Ur),Fr.subVectors(e.c,Ur),Nr.subVectors(Ir,Dr),jr.subVectors(Fr,Ir),zr.subVectors(Dr,Fr);var t=[0,-Nr.z,Nr.y,0,-jr.z,jr.y,0,-zr.z,zr.y,Nr.z,0,-Nr.x,jr.z,0,-jr.x,zr.z,0,-zr.x,-Nr.y,Nr.x,0,-jr.y,jr.x,0,-zr.y,zr.x,0];return!!Hr(t,Dr,Ir,Fr,Br)&&(!!Hr(t=[1,0,0,0,1,0,0,0,1],Dr,Ir,Fr,Br)&&(Vr.crossVectors(Nr,jr),Hr(t=[Vr.x,Vr.y,Vr.z],Dr,Ir,Fr,Br)))}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new kr),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Lr.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Lr).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Or[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Or[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Or[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Or[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Or[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Or[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Or[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Or[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Or)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Pr.prototype.isBox3=!0;var Or=[new kr,new kr,new kr,new kr,new kr,new kr,new kr,new kr],Lr=new kr,Rr=new Pr,Dr=new kr,Ir=new kr,Fr=new kr,Nr=new kr,jr=new kr,zr=new kr,Ur=new kr,Br=new kr,Vr=new kr,Gr=new kr;function Hr(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Gr.fromArray(e,a);var s=i.x*Math.abs(Gr.x)+i.y*Math.abs(Gr.y)+i.z*Math.abs(Gr.z),u=t.dot(Gr),l=n.dot(Gr),c=r.dot(Gr);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var Zr=new Pr,Wr=new kr,qr=new kr,Xr=new kr,Kr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,y.Z)(this,e),this.center=t,this.radius=n}return(0,x.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Zr.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new kr),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Pr),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Xr.subVectors(e,this.center);var t=Xr.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Xr.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return qr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Wr.copy(e.center).add(qr)),this.expandByPoint(Wr.copy(e.center).sub(qr)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Yr=new kr,Qr=new kr,$r=new kr,Jr=new kr,ei=new kr,ti=new kr,ni=new kr,ri=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr(0,0,-1);(0,y.Z)(this,e),this.origin=t,this.direction=n}return(0,x.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new kr),t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Yr)),this}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new kr),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Yr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yr.copy(this.direction).multiplyScalar(t).add(this.origin),Yr.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Qr.copy(e).add(t).multiplyScalar(.5),$r.copy(t).sub(e).normalize(),Jr.copy(this.origin).sub(Qr);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot($r),c=Jr.dot(this.direction),d=-Jr.dot($r),h=Jr.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*c-d,s=u*f,(i=l*d-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*d)+h}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*d)+h;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*d)+h;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-d),u))*(a+2*d)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-d),u))*(a+2*d)+h):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-d),u))*(a+2*d)+h;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy($r).multiplyScalar(a).add(Qr),o}},{key:"intersectSphere",value:function(e,t){Yr.subVectors(e.center,this.origin);var n=Yr.dot(this.direction),r=Yr.dot(Yr)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),l>=0?(i=(e.min.y-d.y)*l,a=(e.max.y-d.y)*l):(i=(e.max.y-d.y)*l,a=(e.min.y-d.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Yr)}},{key:"intersectTriangle",value:function(e,t,n,r,i){ei.subVectors(t,e),ti.subVectors(n,e),ni.crossVectors(ei,ti);var a,o=this.direction.dot(ni);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Jr.subVectors(this.origin,e);var s=a*this.direction.dot(ti.crossVectors(Jr,ti));if(s<0)return null;var u=a*this.direction.dot(ei.cross(Jr));if(u<0)return null;if(s+u>o)return null;var l=-a*Jr.dot(ni);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ii=function(){function e(){(0,y.Z)(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,x.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=d,v[3]=h,v[7]=f,v[11]=p,v[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/ai.setFromMatrixColumn(e,0).length(),i=1/ai.setFromMatrixColumn(e,1).length(),a=1/ai.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var d=a*l,h=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=h+f*u,t[5]=d-p*u,t[9]=-o*s,t[2]=p-d*u,t[6]=f+h*u,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,v=s*c,g=u*l,y=u*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){var x=s*l,_=s*c,b=u*l,w=u*c;t[0]=x-w*o,t[4]=-a*c,t[8]=b+_*o,t[1]=_+b*o,t[5]=a*l,t[9]=w-x*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var S=a*l,M=a*c,E=o*l,T=o*c;t[0]=s*l,t[4]=E*u-M,t[8]=S*u+T,t[1]=s*c,t[5]=T*u+S,t[9]=M*u-E,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var k=a*s,C=a*u,A=o*s,P=o*u;t[0]=s*l,t[4]=P-k*c,t[8]=A*c+C,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=C*c+A,t[10]=k-P*c}else if("XZY"===e.order){var O=a*s,L=a*u,R=o*s,D=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=O*c+D,t[5]=a*l,t[9]=L*c-R,t[2]=R*c-L,t[6]=o*l,t[10]=D*c+O}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(si,e,ui)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return di.subVectors(e,t),0===di.lengthSq()&&(di.z=1),di.normalize(),li.crossVectors(n,di),0===li.lengthSq()&&(1===Math.abs(n.z)?di.x+=1e-4:di.z+=1e-4,di.normalize(),li.crossVectors(n,di)),li.normalize(),ci.crossVectors(di,li),r[0]=li.x,r[4]=ci.x,r[8]=di.x,r[1]=li.y,r[5]=ci.y,r[9]=di.y,r[2]=li.z,r[6]=ci.z,r[10]=di.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],x=n[11],_=n[15],b=r[0],w=r[4],S=r[8],M=r[12],E=r[1],T=r[5],k=r[9],C=r[13],A=r[2],P=r[6],O=r[10],L=r[14],R=r[3],D=r[7],I=r[11],F=r[15];return i[0]=a*b+o*E+s*A+u*R,i[4]=a*w+o*T+s*P+u*D,i[8]=a*S+o*k+s*O+u*I,i[12]=a*M+o*C+s*L+u*F,i[1]=l*b+c*E+d*A+h*R,i[5]=l*w+c*T+d*P+h*D,i[9]=l*S+c*k+d*O+h*I,i[13]=l*M+c*C+d*L+h*F,i[2]=f*b+p*E+m*A+v*R,i[6]=f*w+p*T+m*P+v*D,i[10]=f*S+p*k+m*O+v*I,i[14]=f*M+p*C+m*L+v*F,i[3]=g*b+y*E+x*A+_*R,i[7]=g*w+y*T+x*P+_*D,i[11]=g*S+y*k+x*O+_*I,i[15]=g*M+y*C+x*L+_*F,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+i*s*c-r*u*c-i*o*d+n*u*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*u*d+i*a*d-r*a*h+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*h-i*a*c+n*a*h+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*d+r*a*c-n*a*d+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],v=e[15],g=c*m*u-p*d*u+p*s*h-o*m*h-c*s*v+o*d*v,y=f*d*u-l*m*u-f*s*h+a*m*h+l*s*v-a*d*v,x=l*p*u-f*c*u+f*o*h-a*p*h-l*o*v+a*c*v,_=f*c*s-l*p*s-f*o*d+a*p*d+l*o*m-a*c*m,b=t*g+n*y+r*x+i*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/b;return e[0]=g*w,e[1]=(p*d*i-c*m*i-p*r*h+n*m*h+c*r*v-n*d*v)*w,e[2]=(o*m*i-p*s*i+p*r*u-n*m*u-o*r*v+n*s*v)*w,e[3]=(c*s*i-o*d*i-c*r*u+n*d*u+o*r*h-n*s*h)*w,e[4]=y*w,e[5]=(l*m*i-f*d*i+f*r*h-t*m*h-l*r*v+t*d*v)*w,e[6]=(f*s*i-a*m*i-f*r*u+t*m*u+a*r*v-t*s*v)*w,e[7]=(a*d*i-l*s*i+l*r*u-t*d*u-a*r*h+t*s*h)*w,e[8]=x*w,e[9]=(f*c*i-l*p*i-f*n*h+t*p*h+l*n*v-t*c*v)*w,e[10]=(a*p*i-f*o*i+f*n*u-t*p*u-a*n*v+t*o*v)*w,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*h-t*o*h)*w,e[12]=_*w,e[13]=(l*p*r-f*c*r+f*n*d-t*p*d-l*n*m+t*c*m)*w,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*m-t*o*m)*w,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*d+t*o*d)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,d=i*u,h=i*l,f=i*c,p=a*l,m=a*c,v=o*c,g=s*u,y=s*l,x=s*c,_=n.x,b=n.y,w=n.z;return r[0]=(1-(p+v))*_,r[1]=(h+x)*_,r[2]=(f-y)*_,r[3]=0,r[4]=(h-x)*b,r[5]=(1-(d+v))*b,r[6]=(m+g)*b,r[7]=0,r[8]=(f+y)*w,r[9]=(m-g)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=ai.set(r[0],r[1],r[2]).length(),a=ai.set(r[4],r[5],r[6]).length(),o=ai.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],oi.copy(this);var s=1/i,u=1/a,l=1/o;return oi.elements[0]*=s,oi.elements[1]*=s,oi.elements[2]*=s,oi.elements[4]*=u,oi.elements[5]*=u,oi.elements[6]*=u,oi.elements[8]*=l,oi.elements[9]*=l,oi.elements[10]*=l,t.setFromRotationMatrix(oi),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),d=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,d=(n+r)*u,h=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();ii.prototype.isMatrix4=!0;var ai=new kr,oi=new ii,si=new kr(0,0,0),ui=new kr(1,1,1),li=new kr,ci=new kr,di=new kr,hi=new ii,fi=new Tr,pi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;(0,y.Z)(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return(0,x.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e,t,n){var r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],d=r[6],h=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(ur(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ur(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(ur(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-ur(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ur(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-ur(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return hi.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hi,t,n)}},{key:"setFromVector3",value:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)}},{key:"reorder",value:function(e){return fi.setFromEuler(this),this.setFromQuaternion(fi,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new kr(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();pi.prototype.isEuler=!0,pi.DefaultOrder="XYZ",pi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var mi=function(){function e(){(0,y.Z)(this,e),this.mask=1}return(0,x.Z)(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}}]),e}(),vi=0,gi=new kr,yi=new Tr,xi=new ii,_i=new kr,bi=new kr,wi=new kr,Si=new Tr,Mi=new kr(1,0,0),Ei=new kr(0,1,0),Ti=new kr(0,0,1),ki={type:"added"},Ci={type:"removed"},Ai=function(e){m(n,e);var t=v(n);function n(){var e;(0,y.Z)(this,n),e=t.call(this),Object.defineProperty((0,u.Z)(e),"id",{value:vi++}),e.uuid=sr(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new kr,i=new pi,a=new Tr,o=new kr(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties((0,u.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ii},normalMatrix:{value:new gr}}),e.matrix=new ii,e.matrixWorld=new ii,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new mi,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,x.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return yi.setFromAxisAngle(e,t),this.quaternion.multiply(yi),this}},{key:"rotateOnWorldAxis",value:function(e,t){return yi.setFromAxisAngle(e,t),this.quaternion.premultiply(yi),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Mi,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Ei,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Ti,e)}},{key:"translateOnAxis",value:function(e,t){return gi.copy(e).applyQuaternion(this.quaternion),this.position.add(gi.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Mi,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Ei,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Ti,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(xi.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?_i.copy(e):_i.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),bi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xi.lookAt(bi,_i,this.up):xi.lookAt(_i,bi,this.up),this.quaternion.setFromRotationMatrix(xi),r&&(xi.extractRotation(r.matrixWorld),yi.setFromRotationMatrix(xi),this.quaternion.premultiply(yi.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ki)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Ci)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Ci)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),xi.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),xi.multiply(e.parent.matrixWorld)),e.applyMatrix4(xi),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new kr),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Tr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bi,e,wi),e}},{key:"getWorldScale",value:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new kr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bi,Si,e),e}},{key:"getWorldDirection",value:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new kr),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],d=0,h=this.material.length;d<h;d++)c.push(i(e.materials,this.material[d]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var m=this.animations[p];r.animations.push(i(e.animations,m))}}if(t){var v=S(e.geometries),g=S(e.materials),y=S(e.textures),x=S(e.images),_=S(e.shapes),b=S(e.skeletons),w=S(e.animations);v.length>0&&(n.geometries=v),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),x.length>0&&(n.images=x),_.length>0&&(n.shapes=_),b.length>0&&(n.skeletons=b),w.length>0&&(n.animations=w)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(tr);Ai.DefaultUp=new kr(0,1,0),Ai.DefaultMatrixAutoUpdate=!0,Ai.prototype.isObject3D=!0;var Pi=new kr,Oi=new kr,Li=new gr,Ri=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,y.Z)(this,e),this.normal=t,this.constant=n}return(0,x.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Pi.subVectors(n,t).cross(Oi.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new kr),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new kr);var n=e.delta(Pi),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new kr),e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Li.getNormalMatrix(e),r=this.coplanarPoint(Pi).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();Ri.prototype.isPlane=!0;var Di=new kr,Ii=new kr,Fi=new kr,Ni=new kr,ji=new kr,zi=new kr,Ui=new kr,Bi=new kr,Vi=new kr,Gi=new kr,Hi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new kr;(0,y.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,x.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Di.subVectors(this.c,this.b),Ii.subVectors(this.a,this.b),.5*Di.cross(Ii).length()}},{key:"getMidpoint",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new kr),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ri),e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new kr);var n,r,i=this.a,a=this.b,o=this.c;ji.subVectors(a,i),zi.subVectors(o,i),Bi.subVectors(e,i);var s=ji.dot(Bi),u=zi.dot(Bi);if(s<=0&&u<=0)return t.copy(i);Vi.subVectors(e,a);var l=ji.dot(Vi),c=zi.dot(Vi);if(l>=0&&c<=l)return t.copy(a);var d=s*c-l*u;if(d<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(ji,n);Gi.subVectors(e,o);var h=ji.dot(Gi),f=zi.dot(Gi);if(f>=0&&h<=f)return t.copy(o);var p=h*u-s*f;if(p<=0&&u>=0&&f<=0)return r=u/(u-f),t.copy(i).addScaledVector(zi,r);var m=l*f-h*c;if(m<=0&&c-l>=0&&h-f>=0)return Ui.subVectors(o,a),r=(c-l)/(c-l+(h-f)),t.copy(a).addScaledVector(Ui,r);var v=1/(m+p+d);return n=p*v,r=d*v,t.copy(i).addScaledVector(ji,n).addScaledVector(zi,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new kr),r.subVectors(n,t),Di.subVectors(e,t),r.cross(Di);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Di.subVectors(r,t),Ii.subVectors(n,t),Fi.subVectors(e,t);var a=Di.dot(Di),o=Di.dot(Ii),s=Di.dot(Fi),u=Ii.dot(Ii),l=Ii.dot(Fi),c=a*u-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new kr),0===c)return i.set(-2,-1,-1);var d=1/c,h=(u*s-o*l)*d,f=(a*l-o*s)*d;return i.set(1-h-f,f,h)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Ni),Ni.x>=0&&Ni.y>=0&&Ni.x+Ni.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Ni),s.set(0,0),s.addScaledVector(i,Ni.x),s.addScaledVector(a,Ni.y),s.addScaledVector(o,Ni.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Di.subVectors(n,t),Ii.subVectors(e,t),Di.cross(Ii).dot(r)<0}}]),e}(),Zi=0,Wi=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),e=t.call(this),Object.defineProperty((0,u.Z)(e),"id",{value:Zi++}),e.uuid=sr(),e.name="",e.type="Material",e.fog=!0,e.blending=z,e.side=R,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=J,e.blendDst=ee,e.blendEquation=H,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=le,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Gn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=An,e.stencilZFail=An,e.stencilZPass=An,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaTest=0,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e}return(0,x.Z)(n,[{key:"onBuild",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===F;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==z&&(n.blending=this.blending),this.side!==R&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(tr);Wi.prototype.isMaterial=!0;var qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xi={h:0,s:0,l:0},Ki={h:0,s:0,l:0};function Yi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Qi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function $i(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Ji=function(){function e(t,n,r){return(0,y.Z)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,x.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=lr(e,1),t=ur(t,0,1),n=ur(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Yi(i,r,e+1/3),this.g=Yi(i,r,e),this.b=Yi(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=qi[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Qi(e.r),this.g=Qi(e.g),this.b=Qi(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=$i(e.r),this.g=$i(e.g),this.b=$i(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Xi),Xi.h+=e,Xi.s+=t,Xi.l+=n,this.setHSL(Xi.h,Xi.s,Xi.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Xi),e.getHSL(Ki);var n=cr(Xi.h,Ki.h,t),r=cr(Xi.s,Ki.s,t),i=cr(Xi.l,Ki.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();Ji.NAMES=qi,Ji.prototype.isColor=!0,Ji.prototype.r=1,Ji.prototype.g=1,Ji.prototype.b=1;var ea=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new Ji(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=pe,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}]),n}(Wi);ea.prototype.isMeshBasicMaterial=!0;var ta=new kr,na=new mr,ra=function(){function e(t,n,r){if((0,y.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Hn,this.updateRange={offset:0,count:-1},this.version=0}return(0,x.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Ji),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new mr),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new kr),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new wr),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)na.fromBufferAttribute(this,t),na.applyMatrix3(e),this.setXY(t,na.x,na.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)ta.fromBufferAttribute(this,r),ta.applyMatrix3(e),this.setXYZ(r,ta.x,ta.y,ta.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)ta.x=this.getX(t),ta.y=this.getY(t),ta.z=this.getZ(t),ta.applyMatrix4(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)ta.x=this.getX(t),ta.y=this.getY(t),ta.z=this.getZ(t),ta.applyNormalMatrix(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)ta.x=this.getX(t),ta.y=this.getY(t),ta.z=this.getZ(t),ta.transformDirection(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Hn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();ra.prototype.isBufferAttribute=!0;var ia=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Int8Array(e),r,i)}return(0,x.Z)(n)}(ra),aa=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Uint8Array(e),r,i)}return(0,x.Z)(n)}(ra),oa=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return(0,x.Z)(n)}(ra),sa=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Int16Array(e),r,i)}return(0,x.Z)(n)}(ra),ua=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,x.Z)(n)}(ra),la=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Int32Array(e),r,i)}return(0,x.Z)(n)}(ra),ca=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,x.Z)(n)}(ra),da=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,x.Z)(n)}(ra);da.prototype.isFloat16BufferAttribute=!0;var ha=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,x.Z)(n)}(ra),fa=function(e){m(n,e);var t=v(n);function n(e,r,i){return(0,y.Z)(this,n),t.call(this,new Float64Array(e),r,i)}return(0,x.Z)(n)}(ra);function pa(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}var ma={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function va(e,t){return new ma[e](t)}var ga=0,ya=new ii,xa=new Ai,_a=new kr,ba=new Pr,wa=new Pr,Sa=new kr,Ma=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),e=t.call(this),Object.defineProperty((0,u.Z)(e),"id",{value:ga++}),e.uuid=sr(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,x.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(pa(e)>65535?ca:ua)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new gr).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return ya.makeRotationFromQuaternion(e),this.applyMatrix4(ya),this}},{key:"rotateX",value:function(e){return ya.makeRotationX(e),this.applyMatrix4(ya),this}},{key:"rotateY",value:function(e){return ya.makeRotationY(e),this.applyMatrix4(ya),this}},{key:"rotateZ",value:function(e){return ya.makeRotationZ(e),this.applyMatrix4(ya),this}},{key:"translate",value:function(e,t,n){return ya.makeTranslation(e,t,n),this.applyMatrix4(ya),this}},{key:"scale",value:function(e,t,n){return ya.makeScale(e,t,n),this.applyMatrix4(ya),this}},{key:"lookAt",value:function(e){return xa.lookAt(e),xa.updateMatrix(),this.applyMatrix4(xa.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_a).negate(),this.translate(_a.x,_a.y,_a.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ha(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Pr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new kr(-1/0,-1/0,-1/0),new kr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];ba.setFromBufferAttribute(i),this.morphTargetsRelative?(Sa.addVectors(this.boundingBox.min,ba.min),this.boundingBox.expandByPoint(Sa),Sa.addVectors(this.boundingBox.max,ba.max),this.boundingBox.expandByPoint(Sa)):(this.boundingBox.expandByPoint(ba.min),this.boundingBox.expandByPoint(ba.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Kr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new kr,1/0);if(e){var n=this.boundingSphere.center;if(ba.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];wa.setFromBufferAttribute(a),this.morphTargetsRelative?(Sa.addVectors(ba.min,wa.min),ba.expandByPoint(Sa),Sa.addVectors(ba.max,wa.max),ba.expandByPoint(Sa)):(ba.expandByPoint(wa.min),ba.expandByPoint(wa.max))}ba.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)Sa.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(Sa));if(t)for(var l=0,c=t.length;l<c;l++)for(var d=t[l],h=this.morphTargetsRelative,f=0,p=d.count;f<p;f++)Sa.fromBufferAttribute(d,f),h&&(_a.fromBufferAttribute(e,f),Sa.add(_a)),o=Math.max(o,n.distanceToSquared(Sa));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new ra(new Float32Array(4*o),4));for(var s=t.tangent.array,u=[],l=[],c=0;c<o;c++)u[c]=new kr,l[c]=new kr;var d=new kr,h=new kr,f=new kr,p=new mr,m=new mr,v=new mr,g=new kr,y=new kr,x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(var _=0,b=x.length;_<b;++_)for(var w=x[_],S=w.start,M=S,E=S+w.count;M<E;M+=3)F(n[M+0],n[M+1],n[M+2]);for(var T=new kr,k=new kr,C=new kr,A=new kr,P=0,O=x.length;P<O;++P)for(var L=x[P],R=L.start,D=R,I=R+L.count;D<I;D+=3)N(n[D+0]),N(n[D+1]),N(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function F(e,t,n){d.fromArray(r,3*e),h.fromArray(r,3*t),f.fromArray(r,3*n),p.fromArray(a,2*e),m.fromArray(a,2*t),v.fromArray(a,2*n),h.sub(d),f.sub(d),m.sub(p),v.sub(p);var i=1/(m.x*v.y-v.x*m.y);isFinite(i)&&(g.copy(h).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(i),y.copy(f).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function N(e){C.fromArray(i,3*e),A.copy(C);var t=u[e];T.copy(t),T.sub(C.multiplyScalar(C.dot(t))).normalize(),k.crossVectors(A,t);var n=k.dot(l[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new ra(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new kr,o=new kr,s=new kr,u=new kr,l=new kr,c=new kr,d=new kr,h=new kr;if(e)for(var f=0,p=e.count;f<p;f+=3){var m=e.getX(f+0),v=e.getX(f+1),g=e.getX(f+2);a.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),u.fromBufferAttribute(n,m),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,g),u.add(d),l.add(d),c.add(d),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,x=t.count;y<x;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),d.subVectors(s,o),h.subVectors(a,o),d.cross(h),n.setXYZ(y+0,d.x,d.y,d.z),n.setXYZ(y+1,d.x,d.y,d.z),n.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,u=Math.min(o.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Sa.fromBufferAttribute(e,t),Sa.normalize(),e.setXYZ(t,Sa.x,Sa.y,Sa.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new ra(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],d=0,h=c.length;d<h;d++){var f=e(c[d],r);l.push(f)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,m=0,v=p.length;m<v;m++){var g=p[m];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],d=[],h=0,f=c.length;h<f;h++){var p=c[h];d.push(p.toJSON(e.data))}d.length>0&&(s[l]=d,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,d=l.length;c<d;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,p=h.length;f<p;f++){var m=h[f];this.addGroup(m.start,m.count,m.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(tr);Ma.prototype.isBufferGeometry=!0;var Ea=new ii,Ta=new ri,ka=new Kr,Ca=new kr,Aa=new kr,Pa=new kr,Oa=new kr,La=new kr,Ra=new kr,Da=new kr,Ia=new kr,Fa=new kr,Na=new mr,ja=new mr,za=new mr,Ua=new kr,Ba=new kr,Va=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ma,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ea;return(0,y.Z)(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),ka.copy(r.boundingSphere),ka.applyMatrix4(a),!1!==e.ray.intersectsSphere(ka)&&(Ea.copy(a).invert(),Ta.copy(e.ray).applyMatrix4(Ea),null===r.boundingBox||!1!==Ta.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,d=r.attributes.uv2,h=r.groups,f=r.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,m=h.length;p<m;p++)for(var v=h[p],g=i[v.materialIndex],y=Math.max(v.start,f.start),x=Math.min(v.start+v.count,f.start+f.count);y<x;y+=3){var _=o.getX(y),b=o.getX(y+1),w=o.getX(y+2);(n=Ga(this,g,e,Ta,s,u,l,c,d,_,b,w))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=v.materialIndex,t.push(n))}else for(var S=Math.max(0,f.start),M=Math.min(o.count,f.start+f.count);S<M;S+=3){var E=o.getX(S),T=o.getX(S+1),k=o.getX(S+2);(n=Ga(this,i,e,Ta,s,u,l,c,d,E,T,k))&&(n.faceIndex=Math.floor(S/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var C=0,A=h.length;C<A;C++)for(var P=h[C],O=i[P.materialIndex],L=Math.max(P.start,f.start),R=Math.min(P.start+P.count,f.start+f.count);L<R;L+=3){(n=Ga(this,O,e,Ta,s,u,l,c,d,L,L+1,L+2))&&(n.faceIndex=Math.floor(L/3),n.face.materialIndex=P.materialIndex,t.push(n))}else for(var D=Math.max(0,f.start),I=Math.min(s.count,f.start+f.count);D<I;D+=3){(n=Ga(this,i,e,Ta,s,u,l,c,d,D,D+1,D+2))&&(n.faceIndex=Math.floor(D/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Ai);function Ga(e,t,n,r,i,a,o,s,u,l,c,d){Ca.fromBufferAttribute(i,l),Aa.fromBufferAttribute(i,c),Pa.fromBufferAttribute(i,d);var h=e.morphTargetInfluences;if(t.morphTargets&&a&&h){Da.set(0,0,0),Ia.set(0,0,0),Fa.set(0,0,0);for(var f=0,p=a.length;f<p;f++){var m=h[f],v=a[f];0!==m&&(Oa.fromBufferAttribute(v,l),La.fromBufferAttribute(v,c),Ra.fromBufferAttribute(v,d),o?(Da.addScaledVector(Oa,m),Ia.addScaledVector(La,m),Fa.addScaledVector(Ra,m)):(Da.addScaledVector(Oa.sub(Ca),m),Ia.addScaledVector(La.sub(Aa),m),Fa.addScaledVector(Ra.sub(Pa),m)))}Ca.add(Da),Aa.add(Ia),Pa.add(Fa)}e.isSkinnedMesh&&(e.boneTransform(l,Ca),e.boneTransform(c,Aa),e.boneTransform(d,Pa));var g=function(e,t,n,r,i,a,o,s){if(null===(t.side===D?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==I,s)))return null;Ba.copy(s),Ba.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Ba);return u<n.near||u>n.far?null:{distance:u,point:Ba.clone(),object:e}}(e,t,n,r,Ca,Aa,Pa,Ua);if(g){s&&(Na.fromBufferAttribute(s,l),ja.fromBufferAttribute(s,c),za.fromBufferAttribute(s,d),g.uv=Hi.getUV(Ua,Ca,Aa,Pa,Na,ja,za,new mr)),u&&(Na.fromBufferAttribute(u,l),ja.fromBufferAttribute(u,c),za.fromBufferAttribute(u,d),g.uv2=Hi.getUV(Ua,Ca,Aa,Pa,Na,ja,za,new mr));var y={a:l,b:c,c:d,normal:new kr,materialIndex:0};Hi.getNormal(Ca,Aa,Pa,y.normal),g.face=y}return g}Va.prototype.isMesh=!0;var Ha=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,y.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var c=(0,u.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var d=[],h=[],f=[],p=[],m=0,v=0;function g(e,t,n,r,i,a,o,s,u,l,g){for(var y=a/u,x=o/l,_=a/2,b=o/2,w=s/2,S=u+1,M=l+1,E=0,T=0,k=new kr,C=0;C<M;C++)for(var A=C*x-b,P=0;P<S;P++){var O=P*y-_;k[e]=O*r,k[t]=A*i,k[n]=w,h.push(k.x,k.y,k.z),k[e]=0,k[t]=0,k[n]=s>0?1:-1,f.push(k.x,k.y,k.z),p.push(P/u),p.push(1-C/l),E+=1}for(var L=0;L<l;L++)for(var R=0;R<u;R++){var D=m+R+S*L,I=m+R+S*(L+1),F=m+(R+1)+S*(L+1),N=m+(R+1)+S*L;d.push(D,I,N),d.push(I,F,N),T+=6}c.addGroup(v,T,g),v+=T,m+=E}return g("z","y","x",-1,-1,a,i,r,l,s,0),g("z","y","x",1,-1,a,i,-r,l,s,1),g("x","z","y",1,1,r,a,i,o,l,2),g("x","z","y",1,-1,r,a,-i,o,l,3),g("x","y","z",1,-1,r,i,a,o,s,4),g("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(d),e.setAttribute("position",new ha(h,3)),e.setAttribute("normal",new ha(f,3)),e.setAttribute("uv",new ha(p,2)),e}return(0,x.Z)(n)}(Ma);function Za(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Wa(e){for(var t={},n=0;n<e.length;n++){var r=Za(e[n]);for(var i in r)t[i]=r[i]}return t}var qa={clone:Za,merge:Wa},Xa=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.morphTargets=!1,r.morphNormals=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Za(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Wi);Xa.prototype.isShaderMaterial=!0;var Ka=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new ii,e.projectionMatrix=new ii,e.projectionMatrixInverse=new ii,e}return(0,x.Z)(n,[{key:"copy",value:function(e,t){return h(c(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new kr),this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){h(c(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){h(c(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Ai);Ka.prototype.isCamera=!0;var Ya=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,y.Z)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,x.Z)(n,[{key:"copy",value:function(e,t){return h(c(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*or*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*ar*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*or*Math.atan(Math.tan(.5*ar*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*ar*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Ka);Ya.prototype.isPerspectiveCamera=!0;var Qa=90,$a=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;if((0,y.Z)(this,n),(a=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),l(a);a.renderTarget=i;var o=new Ya(Qa,1,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new kr(1,0,0)),a.add(o);var s=new Ya(Qa,1,e,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new kr(-1,0,0)),a.add(s);var u=new Ya(Qa,1,e,r);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(new kr(0,1,0)),a.add(u);var c=new Ya(Qa,1,e,r);c.layers=a.layers,c.up.set(0,0,-1),c.lookAt(new kr(0,-1,0)),a.add(c);var d=new Ya(Qa,1,e,r);d.layers=a.layers,d.up.set(0,-1,0),d.lookAt(new kr(0,0,1)),a.add(d);var h=new Ya(Qa,1,e,r);return h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new kr(0,0,-1)),a.add(h),a}return(0,x.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,o.Z)(this.children,6),i=r[0],a=r[1],s=r[2],u=r[3],l=r[4],c=r[5],d=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,u),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.xr.enabled=d}}]),n}(Ai),Ja=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s,u,l,c,d){var h;return(0,y.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Me,u=void 0!==u?u:nt,(h=t.call(this,e,r,i,a,o,s,u,l,c,d))._needsFlipEnvMap=!0,h.flipY=!1,h}return(0,x.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(_r);Ja.prototype.isCubeTexture=!0;var eo=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return(0,y.Z)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),a=t.call(this,e,e,r),r=r||{},a.texture=new Ja(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),a.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,a.texture.minFilter=void 0!==r.minFilter?r.minFilter:je,a.texture._needsFlipEnvMap=!1,a}return(0,x.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=rt,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Ha(5,5,5),o=new Xa({name:"CubemapFromEquirect",uniforms:Za(n),vertexShader:r,fragmentShader:i,side:D,blending:j});o.uniforms.tEquirect.value=t;var s=new Va(a,o),u=t.minFilter;return t.minFilter===Be&&(t.minFilter=je),new $a(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Sr);eo.prototype.isWebGLCubeRenderTarget=!0;var to=new Kr,no=new kr,ro=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ri,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ri,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ri,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ri,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ri,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ri;(0,y.Z)(this,e),this.planes=[t,n,r,i,a,o]}return(0,x.Z)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-d,y-m).normalize(),t[1].setComponents(o+r,c+s,p+d,y+m).normalize(),t[2].setComponents(o+i,c+u,p+h,y+v).normalize(),t[3].setComponents(o-i,c-u,p-h,y-v).normalize(),t[4].setComponents(o-a,c-l,p-f,y-g).normalize(),t[5].setComponents(o+a,c+l,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),to.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(to)}},{key:"intersectsSprite",value:function(e){return to.center.set(0,0,0),to.radius=.7071067811865476,to.applyMatrix4(e.matrixWorld),this.intersectsSphere(to)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(no.x=r.normal.x>0?e.max.x:e.min.x,no.y=r.normal.y>0?e.max.y:e.min.y,no.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(no)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function io(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ao(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i=t.array,a=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var oo=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,y.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,l=Math.floor(a),c=Math.floor(o),d=l+1,h=c+1,f=r/l,p=i/c,m=[],v=[],g=[],x=[],_=0;_<h;_++)for(var b=_*p-u,w=0;w<d;w++){var S=w*f-s;v.push(S,-b,0),g.push(0,0,1),x.push(w/l),x.push(1-_/c)}for(var M=0;M<c;M++)for(var E=0;E<l;E++){var T=E+d*M,k=E+d*(M+1),C=E+1+d*(M+1),A=E+1+d*M;m.push(T,k,A),m.push(k,C,A)}return e.setIndex(m),e.setAttribute("position",new ha(v,3)),e.setAttribute("normal",new ha(g,3)),e.setAttribute("uv",new ha(x,2)),e}return(0,x.Z)(n)}(Ma),so={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), rawDiffuseColor, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), rawDiffuseColor, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 f0 = vec3( pow( ior - 1.0, 2.0 ) / pow( ior + 1.0, 2.0 ) );\n\tvec3 f90 = vec3( 1.0 );\n\tvec3 f_transmission = totalTransmission * getIBLVolumeRefraction(\n\t\tnormal, v, viewDir, roughnessFactor, diffuseColor.rgb, f0, f90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance);\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, f_transmission, totalTransmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, vec3 viewDir, float perceptualRoughness, vec3 baseColor, vec3 f0, vec3 f90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\tfloat NdotV = saturate(dot(n, viewDir));\n\t\tvec2 brdf = integrateSpecularBRDF(NdotV, perceptualRoughness);\n\t\tvec3 specularColor = f0 * brdf.x + f90 * brdf.y;\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef USE_TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t\tfloat thicknessFactor = thickness;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\tvec3 rawDiffuseColor = diffuseColor.rgb;\n\t#include <transmission_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},uo={common:{diffuse:{value:new Ji(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gr},uv2Transform:{value:new gr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new mr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ji(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ji(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gr}},sprite:{diffuse:{value:new Ji(16777215)},opacity:{value:1},center:{value:new mr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new gr}}},lo={basic:{uniforms:Wa([uo.common,uo.specularmap,uo.envmap,uo.aomap,uo.lightmap,uo.fog]),vertexShader:so.meshbasic_vert,fragmentShader:so.meshbasic_frag},lambert:{uniforms:Wa([uo.common,uo.specularmap,uo.envmap,uo.aomap,uo.lightmap,uo.emissivemap,uo.fog,uo.lights,{emissive:{value:new Ji(0)}}]),vertexShader:so.meshlambert_vert,fragmentShader:so.meshlambert_frag},phong:{uniforms:Wa([uo.common,uo.specularmap,uo.envmap,uo.aomap,uo.lightmap,uo.emissivemap,uo.bumpmap,uo.normalmap,uo.displacementmap,uo.fog,uo.lights,{emissive:{value:new Ji(0)},specular:{value:new Ji(1118481)},shininess:{value:30}}]),vertexShader:so.meshphong_vert,fragmentShader:so.meshphong_frag},standard:{uniforms:Wa([uo.common,uo.envmap,uo.aomap,uo.lightmap,uo.emissivemap,uo.bumpmap,uo.normalmap,uo.displacementmap,uo.roughnessmap,uo.metalnessmap,uo.fog,uo.lights,{emissive:{value:new Ji(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:so.meshphysical_vert,fragmentShader:so.meshphysical_frag},toon:{uniforms:Wa([uo.common,uo.aomap,uo.lightmap,uo.emissivemap,uo.bumpmap,uo.normalmap,uo.displacementmap,uo.gradientmap,uo.fog,uo.lights,{emissive:{value:new Ji(0)}}]),vertexShader:so.meshtoon_vert,fragmentShader:so.meshtoon_frag},matcap:{uniforms:Wa([uo.common,uo.bumpmap,uo.normalmap,uo.displacementmap,uo.fog,{matcap:{value:null}}]),vertexShader:so.meshmatcap_vert,fragmentShader:so.meshmatcap_frag},points:{uniforms:Wa([uo.points,uo.fog]),vertexShader:so.points_vert,fragmentShader:so.points_frag},dashed:{uniforms:Wa([uo.common,uo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:so.linedashed_vert,fragmentShader:so.linedashed_frag},depth:{uniforms:Wa([uo.common,uo.displacementmap]),vertexShader:so.depth_vert,fragmentShader:so.depth_frag},normal:{uniforms:Wa([uo.common,uo.bumpmap,uo.normalmap,uo.displacementmap,{opacity:{value:1}}]),vertexShader:so.normal_vert,fragmentShader:so.normal_frag},sprite:{uniforms:Wa([uo.sprite,uo.fog]),vertexShader:so.sprite_vert,fragmentShader:so.sprite_frag},background:{uniforms:{uvTransform:{value:new gr},t2D:{value:null}},vertexShader:so.background_vert,fragmentShader:so.background_frag},cube:{uniforms:Wa([uo.envmap,{opacity:{value:1}}]),vertexShader:so.cube_vert,fragmentShader:so.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:so.equirect_vert,fragmentShader:so.equirect_frag},distanceRGBA:{uniforms:Wa([uo.common,uo.displacementmap,{referencePosition:{value:new kr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:so.distanceRGBA_vert,fragmentShader:so.distanceRGBA_frag},shadow:{uniforms:Wa([uo.lights,uo.fog,{color:{value:new Ji(0)},opacity:{value:1}}]),vertexShader:so.shadow_vert,fragmentShader:so.shadow_frag}};function co(e,t,n,r,i){var a,o,s=new Ji(0),u=0,l=null,c=0,d=null;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),h(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){h(s,u=e)},render:function(n,i){var f=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var m=e.xr,v=m.getSession&&m.getSession();v&&"additive"===v.environmentBlendMode&&(p=null),null===p?h(s,u):p&&p.isColor&&(h(p,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Ce)?(void 0===o&&((o=new Va(new Ha(1,1,1),new Xa({name:"BackgroundCubeMaterial",uniforms:Za(lo.cube.uniforms),vertexShader:lo.cube.vertexShader,fragmentShader:lo.cube.fragmentShader,side:D,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,l===p&&c===p.version&&d===e.toneMapping||(o.material.needsUpdate=!0,l=p,c=p.version,d=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===a&&((a=new Va(new oo(2,2),new Xa({name:"BackgroundMaterial",uniforms:Za(lo.background.uniforms),vertexShader:lo.background.vertexShader,fragmentShader:lo.background.fragmentShader,side:R,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&d===e.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,d=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function ho(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=h(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function y(){x(),l!==u&&c((l=u).object)}function x(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,d,y,x){var _=!1;if(o){var b=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];void 0===c&&(c=h(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c);return c}(y,d,u);l!==b&&c((l=b).object),_=function(e,t){var n=l.attributes,r=e.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,x),_&&function(e,t){var n={},r=e.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,x)}else{var w=!0===u.wireframe;l.geometry===y.id&&l.program===d.id&&l.wireframe===w||(l.geometry=y.id,l.program=d.id,l.wireframe=w,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==x&&n.update(x,34963),_&&(!function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var d in l){var h=l[d];if(h>=0){var y=u[d];if(void 0!==y){var x=y.normalized,_=y.itemSize,b=n.get(y);if(void 0===b)continue;var w=b.buffer,S=b.type,M=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,T=E.stride,k=y.offset;E&&E.isInstancedInterleavedBuffer?(m(h,E.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)):p(h),e.bindBuffer(34962,w),g(h,_,S,x,T*M,k*M)}else y.isInstancedBufferAttribute?(m(h,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):p(h),e.bindBuffer(34962,w),g(h,_,S,x,0,0)}else if("instanceMatrix"===d){var C=n.get(i.instanceMatrix);if(void 0===C)continue;var A=C.buffer,P=C.type;m(h+0,1),m(h+1,1),m(h+2,1),m(h+3,1),e.bindBuffer(34962,A),e.vertexAttribPointer(h+0,4,P,!1,64,0),e.vertexAttribPointer(h+1,4,P,!1,64,16),e.vertexAttribPointer(h+2,4,P,!1,64,32),e.vertexAttribPointer(h+3,4,P,!1,64,48)}else if("instanceColor"===d){var O=n.get(i.instanceColor);if(void 0===O)continue;var L=O.buffer,R=O.type;m(h,1),e.bindBuffer(34962,L),e.vertexAttribPointer(h,3,R,!1,12,0)}else if(void 0!==c){var D=c[d];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(h,D);break;case 3:e.vertexAttrib3fv(h,D);break;case 4:e.vertexAttrib4fv(h,D);break;default:e.vertexAttrib1fv(h,D)}}}}v()}(i,u,d,y),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)d(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)d(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:v}}function fo(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function po(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=d>0,x=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:a?e.getParameter(36183):0}}function mo(e){var t=this,n=null,r=0,i=!1,a=!1,o=new Ri,s=new gr,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,d=n.matrixWorldInverse;s.getNormalMatrix(d),(null===l||l.length<c)&&(l=new Float32Array(c));for(var h=0,f=r;h!==a;++h,f+=4)o.copy(e[h]).applyMatrix4(d,s),o.normal.toArray(l,f),l[f+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,o,s){var d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||a&&!f)a?c(null):l();else{var m=a?0:r,v=4*m,g=p.clippingState||null;u.value=g,g=c(d,o,v,s);for(var y=0;y!==v;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=m}}}function vo(e){var t=new WeakMap;function n(e,t){return t===Te?e.mapping=Me:t===ke&&(e.mapping=Ee),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping;if(a===Te||a===ke){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=e.getRenderTarget(),u=new eo(o.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}function go(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function yo(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],d=s[u+1],h=s[u+2];n.push(c,d,d,h,h,c)}}else{var f=i.array;o=i.version;for(var p=0,m=f.length/3-1;p<m;p+=3){var v=p+0,g=p+1,y=p+2;n.push(v,g,g,y,y,v)}}var x=new(pa(n)>65535?ca:ua)(n,1);x.version=o;var _=a.get(e);_&&t.remove(_),a.set(e,x)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function xo(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,d;if(s)c=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](i,u,a,r*o,l),n.update(u,i,l)}}}function _o(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function bo(e,t){return e[0]-t[0]}function wo(e,t){return Math.abs(t[1])-Math.abs(e[1])}function So(e){for(var t={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,a,o,s){var u=i.morphTargetInfluences,l=void 0===u?0:u.length,c=t[a.id];if(void 0===c){c=[];for(var d=0;d<l;d++)c[d]=[d,0];t[a.id]=c}for(var h=0;h<l;h++){var f=c[h];f[0]=h,f[1]=u[h]}c.sort(wo);for(var p=0;p<8;p++)p<l&&c[p][1]?(r[p][0]=c[p][0],r[p][1]=c[p][1]):(r[p][0]=Number.MAX_SAFE_INTEGER,r[p][1]=0);r.sort(bo);for(var m=o.morphTargets&&a.morphAttributes.position,v=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var x=r[y],_=x[0],b=x[1];_!==Number.MAX_SAFE_INTEGER&&b?(m&&a.getAttribute("morphTarget"+y)!==m[_]&&a.setAttribute("morphTarget"+y,m[_]),v&&a.getAttribute("morphNormal"+y)!==v[_]&&a.setAttribute("morphNormal"+y,v[_]),n[y]=b,g+=b):(m&&!0===a.hasAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),v&&!0===a.hasAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),n[y]=0)}var w=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(e,"morphTargetBaseInfluence",w),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Mo(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==o&&(t.update(u),i.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}lo.physical={uniforms:Wa([lo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new mr(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ji(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new mr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ji(0)}}]),vertexShader:so.meshphysical_vert,fragmentShader:so.meshphysical_frag};var Eo=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,y.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=Re,e.minFilter=Re,e.wrapR=Oe,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,x.Z)(n)}(_r);Eo.prototype.isDataTexture2DArray=!0;var To=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,y.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=Re,e.minFilter=Re,e.wrapR=Oe,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,x.Z)(n)}(_r);To.prototype.isDataTexture3D=!0;var ko=new _r,Co=new Eo,Ao=new To,Po=new Ja,Oo=[],Lo=[],Ro=new Float32Array(16),Do=new Float32Array(9),Io=new Float32Array(4);function Fo(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Oo[i];if(void 0===a&&(a=new Float32Array(i),Oo[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function No(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function jo(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function zo(e,t){var n=Lo[t];void 0===n&&(n=new Int32Array(t),Lo[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Uo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Bo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(No(n,t))return;e.uniform2fv(this.addr,t),jo(n,t)}}function Vo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(No(n,t))return;e.uniform3fv(this.addr,t),jo(n,t)}}function Go(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(No(n,t))return;e.uniform4fv(this.addr,t),jo(n,t)}}function Ho(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(No(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),jo(n,t)}else{if(No(n,r))return;Io.set(r),e.uniformMatrix2fv(this.addr,!1,Io),jo(n,r)}}function Zo(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(No(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),jo(n,t)}else{if(No(n,r))return;Do.set(r),e.uniformMatrix3fv(this.addr,!1,Do),jo(n,r)}}function Wo(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(No(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),jo(n,t)}else{if(No(n,r))return;Ro.set(r),e.uniformMatrix4fv(this.addr,!1,Ro),jo(n,r)}}function qo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Xo(e,t){var n=this.cache;No(n,t)||(e.uniform2iv(this.addr,t),jo(n,t))}function Ko(e,t){var n=this.cache;No(n,t)||(e.uniform3iv(this.addr,t),jo(n,t))}function Yo(e,t){var n=this.cache;No(n,t)||(e.uniform4iv(this.addr,t),jo(n,t))}function Qo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function $o(e,t){var n=this.cache;No(n,t)||(e.uniform2uiv(this.addr,t),jo(n,t))}function Jo(e,t){var n=this.cache;No(n,t)||(e.uniform3uiv(this.addr,t),jo(n,t))}function es(e,t){var n=this.cache;No(n,t)||(e.uniform4uiv(this.addr,t),jo(n,t))}function ts(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||ko,i)}function ns(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ao,i)}function rs(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Po,i)}function is(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Co,i)}function as(e,t){e.uniform1fv(this.addr,t)}function os(e,t){var n=Fo(t,this.size,2);e.uniform2fv(this.addr,n)}function ss(e,t){var n=Fo(t,this.size,3);e.uniform3fv(this.addr,n)}function us(e,t){var n=Fo(t,this.size,4);e.uniform4fv(this.addr,n)}function ls(e,t){var n=Fo(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cs(e,t){var n=Fo(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ds(e,t){var n=Fo(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function hs(e,t){e.uniform1iv(this.addr,t)}function fs(e,t){e.uniform2iv(this.addr,t)}function ps(e,t){e.uniform3iv(this.addr,t)}function ms(e,t){e.uniform4iv(this.addr,t)}function vs(e,t){e.uniform1uiv(this.addr,t)}function gs(e,t){e.uniform2uiv(this.addr,t)}function ys(e,t){e.uniform3uiv(this.addr,t)}function xs(e,t){e.uniform4uiv(this.addr,t)}function _s(e,t,n){var r=t.length,i=zo(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||ko,i[a])}function bs(e,t,n){var r=t.length,i=zo(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||Po,i[a])}function ws(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Uo;case 35664:return Bo;case 35665:return Vo;case 35666:return Go;case 35674:return Ho;case 35675:return Zo;case 35676:return Wo;case 5124:case 35670:return qo;case 35667:case 35671:return Xo;case 35668:case 35672:return Ko;case 35669:case 35673:return Yo;case 5125:return Qo;case 36294:return $o;case 36295:return Jo;case 36296:return es;case 35678:case 36198:case 36298:case 36306:case 35682:return ts;case 35679:case 36299:case 36307:return ns;case 35680:case 36300:case 36308:case 36293:return rs;case 36289:case 36303:case 36311:case 36292:return is}}(t.type)}function Ss(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return as;case 35664:return os;case 35665:return ss;case 35666:return us;case 35674:return ls;case 35675:return cs;case 35676:return ds;case 5124:case 35670:return hs;case 35667:case 35671:return fs;case 35668:case 35672:return ps;case 35669:case 35673:return ms;case 5125:return vs;case 36294:return gs;case 36295:return ys;case 36296:return xs;case 35678:case 36198:case 36298:case 36306:case 35682:return _s;case 35680:case 36300:case 36308:case 36293:return bs}}(t.type)}function Ms(e){this.id=e,this.seq=[],this.map={}}Ss.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),jo(t,e)},Ms.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var Es=/(\w+)(\])?(\[|\.)?/g;function Ts(e,t){e.seq.push(t),e.map[t.id]=t}function ks(e,t,n){var r=e.name,i=r.length;for(Es.lastIndex=0;;){var a=Es.exec(r),o=Es.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){Ts(n,void 0===l?new ws(s,e,t):new Ss(s,e,t));break}var c=n.map[s];void 0===c&&Ts(n,c=new Ms(s)),n=c}}function Cs(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);ks(i,e.getUniformLocation(t,i.name),this)}}function As(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Cs.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Cs.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Cs.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Cs.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var Ps=0;function Os(e){switch(e){case vn:return["Linear","( value )"];case gn:return["sRGB","( value )"];case xn:return["RGBE","( value )"];case bn:return["RGBM","( value, 7.0 )"];case wn:return["RGBM","( value, 16.0 )"];case Sn:return["RGBD","( value, 256.0 )"];case yn:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case _n:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Ls(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Rs(e,t){var n=Os(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ds(e,t){var n=Os(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Is(e,t){var n;switch(t){case ye:n="Linear";break;case xe:n="Reinhard";break;case _e:n="OptimizedCineon";break;case be:n="ACESFilmic";break;case we:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Fs(e){return""!==e}function Ns(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function js(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var zs=/^[ \t]*#include +<([\w\d./]+)>/gm;function Us(e){return e.replace(zs,Bs)}function Bs(e,t){var n=so[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Us(n)}var Vs=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Gs=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hs(e){return e.replace(Gs,Ws).replace(Vs,Zs)}function Zs(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ws(e,t,n,r)}function Ws(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function qs(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Xs(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===P?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===O?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===L&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Me:case Ee:t="ENVMAP_TYPE_CUBE";break;case Ce:case Ae:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Ee:case Ae:t="ENVMAP_MODE_REFRACTION"}return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case pe:t="ENVMAP_BLENDING_MULTIPLY";break;case me:t="ENVMAP_BLENDING_MIX";break;case ve:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fs).join("\n")}(n),v=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[v].filter(Fs).join("\n")).length>0&&(i+="\n"),(a=[m,v].filter(Fs).join("\n")).length>0&&(a+="\n")):(i=[qs(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Fs).join("\n"),a=[m,qs(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ge?"#define TONE_MAPPING":"",n.toneMapping!==ge?so.tonemapping_pars_fragment:"",n.toneMapping!==ge?Is("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",so.encodings_pars_fragment,n.map?Rs("mapTexelToLinear",n.mapEncoding):"",n.matcap?Rs("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Rs("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Rs("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Rs("lightMapTexelToLinear",n.lightMapEncoding):"",Ds("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Fs).join("\n")),u=js(u=Ns(u=Us(u),n),n),l=js(l=Ns(l=Us(l),n),n),u=Hs(u),l=Hs(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===er?"":"out highp vec4 pc_fragColor;",n.glslVersion===er?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var x,_,b=y+a+l,w=As(o,35633,y+i+u),S=As(o,35632,b);if(o.attachShader(g,w),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var M=o.getProgramInfoLog(g).trim(),E=o.getShaderInfoLog(w).trim(),T=o.getShaderInfoLog(S).trim(),k=!0,C=!0;if(!1===o.getProgramParameter(g,35714)){k=!1;var A=Ls(o,w,"vertex"),R=Ls(o,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(g,35715),"gl.getProgramInfoLog",M,A,R)}else""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==E&&""!==T||(C=!1);C&&(this.diagnostics={runnable:k,programLog:M,vertexShader:{log:E,prefix:i},fragmentShader:{log:T,prefix:a}})}return o.deleteShader(w),o.deleteShader(S),this.getUniforms=function(){return void 0===x&&(x=new Cs(o,g)),x},this.getAttributes=function(){return void 0===_&&(_=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}(o,g)),_},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Ps++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=S,this}function Ks(e,t,n,r,i,a){var o=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,d=r.vertexTextures,h=r.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=vn,t}return{getParameters:function(i,o,p,v,g){var y,x,_=v.fog,b=i.isMeshStandardMaterial?v.environment:null,w=t.get(i.envMap||b),S=f[i.type],M=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(l)return 1024;var n=c,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(g):0;if(null!==i.precision&&(h=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",h,"instead."),S){var E=lo[S];y=E.vertexShader,x=E.fragmentShader}else y=i.vertexShader,x=i.fragmentShader;var T=e.getRenderTarget();return{isWebGL2:s,shaderID:S,shaderName:i.type,vertexShader:y,fragmentShader:x,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:h,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null!==T?m(T.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:m(w),envMapCubeUV:!!w&&(w.mapping===Ce||w.mapping===Ae),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===kn,tangentSpaceNormalMap:i.normalMapType===Tn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&g.geometry&&g.geometry.attributes.color&&4===g.geometry.attributes.color.itemSize,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmission||!!i.transmissionMap||!!i.thicknessMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap)&&!!i.displacementMap,fog:!!_,useFog:i.fog,fogExp2:_&&_.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:ge,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===I,flipSided:i.side===D,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<p.length;i++)n.push(t[p[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=f[e.type];if(n){var r=lo[n];t=qa.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,a=0,s=o.length;a<s;a++){var u=o[a];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new Xs(e,n,t,i),o.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function Ys(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Qs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $s(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Js(e){var t=[],n=0,r=[],i=[],a=[],o={id:-1};function s(r,i,a,s,u,l){var c=t[n],d=e.get(a);return void 0===c?(c={id:r.id,object:r,geometry:i,material:a,program:d.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=a,c.program=d.program||o,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?i.push(c):!0===n.transparent?a.push(c):r.push(c)},unshift:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?a.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Qs),i.length>1&&i.sort(t||$s),a.length>1&&a.sort(t||$s)}}}function eu(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new Js(e),t.set(n,[i])):r>=t.get(n).length?(i=new Js(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function tu(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new kr,color:new Ji};break;case"SpotLight":n={position:new kr,direction:new kr,color:new Ji,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new kr,color:new Ji,distance:0,decay:0};break;case"HemisphereLight":n={direction:new kr,skyColor:new Ji,groundColor:new Ji};break;case"RectAreaLight":n={color:new Ji,position:new kr,halfWidth:new kr,halfHeight:new kr}}return e[t.id]=n,n}}}var nu=0;function ru(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function iu(e,t){for(var n=new tu,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mr};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mr,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)i.probe.push(new kr);var o=new kr,s=new ii,u=new ii;return{setup:function(a){for(var o=0,s=0,u=0,l=0;l<9;l++)i.probe[l].set(0,0,0);var c=0,d=0,h=0,f=0,p=0,m=0,v=0,g=0;a.sort(ru);for(var y=0,x=a.length;y<x;y++){var _=a[y],b=_.color,w=_.intensity,S=_.distance,M=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)o+=b.r*w,s+=b.g*w,u+=b.b*w;else if(_.isLightProbe)for(var E=0;E<9;E++)i.probe[E].addScaledVector(_.sh.coefficients[E],w);else if(_.isDirectionalLight){var T=n.get(_);if(T.color.copy(_.color).multiplyScalar(_.intensity),_.castShadow){var k=_.shadow,C=r.get(_);C.shadowBias=k.bias,C.shadowNormalBias=k.normalBias,C.shadowRadius=k.radius,C.shadowMapSize=k.mapSize,i.directionalShadow[c]=C,i.directionalShadowMap[c]=M,i.directionalShadowMatrix[c]=_.shadow.matrix,m++}i.directional[c]=T,c++}else if(_.isSpotLight){var A=n.get(_);if(A.position.setFromMatrixPosition(_.matrixWorld),A.color.copy(b).multiplyScalar(w),A.distance=S,A.coneCos=Math.cos(_.angle),A.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),A.decay=_.decay,_.castShadow){var P=_.shadow,O=r.get(_);O.shadowBias=P.bias,O.shadowNormalBias=P.normalBias,O.shadowRadius=P.radius,O.shadowMapSize=P.mapSize,i.spotShadow[h]=O,i.spotShadowMap[h]=M,i.spotShadowMatrix[h]=_.shadow.matrix,g++}i.spot[h]=A,h++}else if(_.isRectAreaLight){var L=n.get(_);L.color.copy(b).multiplyScalar(w),L.halfWidth.set(.5*_.width,0,0),L.halfHeight.set(0,.5*_.height,0),i.rectArea[f]=L,f++}else if(_.isPointLight){var R=n.get(_);if(R.color.copy(_.color).multiplyScalar(_.intensity),R.distance=_.distance,R.decay=_.decay,_.castShadow){var D=_.shadow,I=r.get(_);I.shadowBias=D.bias,I.shadowNormalBias=D.normalBias,I.shadowRadius=D.radius,I.shadowMapSize=D.mapSize,I.shadowCameraNear=D.camera.near,I.shadowCameraFar=D.camera.far,i.pointShadow[d]=I,i.pointShadowMap[d]=M,i.pointShadowMatrix[d]=_.shadow.matrix,v++}i.point[d]=R,d++}else if(_.isHemisphereLight){var F=n.get(_);F.skyColor.copy(_.color).multiplyScalar(w),F.groundColor.copy(_.groundColor).multiplyScalar(w),i.hemi[p]=F,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=uo.LTC_FLOAT_1,i.rectAreaLTC2=uo.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=uo.LTC_HALF_1,i.rectAreaLTC2=uo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=s,i.ambient[2]=u;var N=i.hash;N.directionalLength===c&&N.pointLength===d&&N.spotLength===h&&N.rectAreaLength===f&&N.hemiLength===p&&N.numDirectionalShadows===m&&N.numPointShadows===v&&N.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=v,i.spotShadowMatrix.length=g,N.directionalLength=c,N.pointLength=d,N.spotLength=h,N.rectAreaLength=f,N.hemiLength=p,N.numDirectionalShadows=m,N.numPointShadows=v,N.numSpotShadows=g,i.version=nu++)},setupView:function(e,t){for(var n=0,r=0,a=0,l=0,c=0,d=t.matrixWorldInverse,h=0,f=e.length;h<f;h++){var p=e[h];if(p.isDirectionalLight){var m=i.directional[n];m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(d),n++}else if(p.isSpotLight){var v=i.spot[a];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(d),v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(d),a++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(d),u.identity(),s.copy(p.matrixWorld),s.premultiply(d),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(d),r++}else if(p.isHemisphereLight){var x=i.hemi[c];x.direction.setFromMatrixPosition(p.matrixWorld),x.direction.transformDirection(d),x.direction.normalize(),c++}}},state:i}}function au(e,t){var n=new iu(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function ou(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new au(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new au(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var su=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=Mn,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Wi);su.prototype.isMeshDepthMaterial=!0;var uu=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new kr,r.nearDistance=1,r.farDistance=1e3,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Wi);uu.prototype.isMeshDistanceMaterial=!0;function lu(e,t,n){var r=new ro,i=new mr,a=new mr,o=new wr,s=[],u=[],l={},c=n.maxTextureSize,d={0:D,1:R,2:I},h=new Xa({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new mr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;var p=new Ma;p.setAttribute("position",new ra(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Va(p,h),v=this;function g(n,r){var i=t.update(m);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,f,m,null)}function y(e){var t=e<<0,n=s[t];return void 0===n&&(n=new su({depthPacking:En,morphTargets:e}),s[t]=n),n}function x(e){var t=e<<0,n=u[t];return void 0===n&&(n=new uu({morphTargets:e}),u[t]=n),n}function _(t,n,r,i,a,o,s){var u=null,c=y,h=t.customDepthMaterial;if(!0===i.isPointLight&&(c=x,h=t.customDistanceMaterial),void 0===h){var f=!1;!0===r.morphTargets&&(f=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),u=c(f)}else u=h;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var p=u.uuid,m=r.uuid,v=l[p];void 0===v&&(v={},l[p]=v);var g=v[m];void 0===g&&(g=u.clone(),v[m]=g),u=g}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=s===L?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:d[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=a,u.farDistance=o),u}function b(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===L)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,d=0,h=c.length;d<h;d++){var f=c[d],p=l[f.materialIndex];if(p&&p.visible){var m=_(n,u,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,f)}}else if(l.visible){var v=_(n,u,l,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,null)}}for(var g=n.children,y=0,x=g.length;y<x;y++)b(g[y],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P,this.render=function(t,n,s){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(j),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var x=y.getFrameExtents();if(i.multiply(x),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/x.x),i.x=a.x*x.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/x.y),i.y=a.y*x.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&this.type===L){var _={minFilter:je,magFilter:je,format:rt};y.map=new Sr(i.x,i.y,_),y.map.texture.name=m.name+".shadowMap",y.mapPass=new Sr(i.x,i.y,_),y.camera.updateProjectionMatrix()}if(null===y.map){var w={minFilter:Re,magFilter:Re,format:rt};y.map=new Sr(i.x,i.y,w),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var S=y.getViewportCount(),M=0;M<S;M++){var E=y.getViewport(M);o.set(a.x*E.x,a.y*E.y,a.x*E.z,a.y*E.w),h.viewport(o),y.updateMatrices(m,M),r=y.getFrustum(),b(n,s,y.camera,m,this.type)}y.isPointLightShadow||this.type!==L||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}v.needsUpdate=!1,e.setRenderTarget(u,l,d)}}}function cu(e,t,n){var r,i,o=n.isWebGL2;var s=new function(){var t=!1,n=new wr,r=null,i=new wr(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},u=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?be(2929):we(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case oe:e.depthFunc(512);break;case se:e.depthFunc(519);break;case ue:e.depthFunc(513);break;case le:e.depthFunc(515);break;case ce:e.depthFunc(514);break;case de:e.depthFunc(518);break;case he:e.depthFunc(516);break;case fe:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},l=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?be(2960):we(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},c={},d=null,h={},f=null,p=!1,m=null,v=null,g=null,y=null,x=null,_=null,b=null,w=!1,S=null,M=null,C=null,A=null,P=null,O=e.getParameter(35661),L=!1,R=0,F=e.getParameter(7938);-1!==F.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(F)[1]),L=R>=1):-1!==F.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),L=R>=2);var N=null,pe={},me=e.getParameter(3088),ve=e.getParameter(2978),ge=(new wr).fromArray(me),ye=(new wr).fromArray(ve);function xe(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var _e={};function be(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function we(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}_e[3553]=xe(3553,3553,1),_e[34067]=xe(34067,34069,6),s.setClear(0,0,0,1),u.setClear(1),l.setClear(0),be(2929),u.setFunc(le),ke(!1),Ce(T),be(2884),Te(j);var Se=(r={},(0,a.Z)(r,H,32774),(0,a.Z)(r,Z,32778),(0,a.Z)(r,W,32779),r);if(o)Se[q]=32775,Se[X]=32776;else{var Me=t.get("EXT_blend_minmax");null!==Me&&(Se[q]=Me.MIN_EXT,Se[X]=Me.MAX_EXT)}var Ee=(i={},(0,a.Z)(i,K,0),(0,a.Z)(i,Y,1),(0,a.Z)(i,Q,768),(0,a.Z)(i,J,770),(0,a.Z)(i,ae,776),(0,a.Z)(i,re,774),(0,a.Z)(i,te,772),(0,a.Z)(i,$,769),(0,a.Z)(i,ee,771),(0,a.Z)(i,ie,775),(0,a.Z)(i,ne,773),i);function Te(t,n,r,i,a,o,s,u){if(t!==j){if(!1===p&&(be(3042),p=!0),t===G)a=a||n,o=o||r,s=s||i,n===v&&a===x||(e.blendEquationSeparate(Se[n],Se[a]),v=n,x=a),r===g&&i===y&&o===_&&s===b||(e.blendFuncSeparate(Ee[r],Ee[i],Ee[o],Ee[s]),g=r,y=i,_=o,b=s),m=t,w=null;else if(t!==m||u!==w){if(v===H&&x===H||(e.blendEquation(32774),v=H,x=H),u)switch(t){case z:e.blendFuncSeparate(1,771,1,771);break;case U:e.blendFunc(1,1);break;case B:e.blendFuncSeparate(0,0,769,771);break;case V:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case z:e.blendFuncSeparate(770,771,1,771);break;case U:e.blendFunc(770,1);break;case B:e.blendFunc(0,769);break;case V:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,y=null,_=null,b=null,m=t,w=u}}else!0===p&&(we(3042),p=!1)}function ke(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function Ce(t){t!==E?(be(2884),t!==M&&(t===T?e.cullFace(1029):t===k?e.cullFace(1028):e.cullFace(1032))):we(2884),M=t}function Ae(t,n,r){t?(be(32823),A===n&&P===r||(e.polygonOffset(n,r),A=n,P=r)):we(32823)}function Pe(t){void 0===t&&(t=33984+O-1),N!==t&&(e.activeTexture(t),N=t)}return{buffers:{color:s,depth:u,stencil:l},enable:be,disable:we,bindFramebuffer:function(t,n){return null===n&&null!==d&&(n=d),h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,o&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==d&&(e.bindFramebuffer(36160,t),d=t)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:Te,setMaterial:function(e,t){e.side===I?we(2884):be(2884);var n=e.side===D;t&&(n=!n),ke(n),e.blending===z&&!1===e.transparent?Te(j):Te(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),u.setFunc(e.depthFunc),u.setTest(e.depthTest),u.setMask(e.depthWrite),s.setMask(e.colorWrite);var r=e.stencilWrite;l.setTest(r),r&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ae(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?be(32926):we(32926)},setFlipSided:ke,setCullFace:Ce,setLineWidth:function(t){t!==C&&(L&&e.lineWidth(t),C=t)},setPolygonOffset:Ae,setScissorTest:function(e){e?be(3089):we(3089)},activeTexture:Pe,bindTexture:function(t,n){null===N&&Pe();var r=pe[N];void 0===r&&(r={type:void 0,texture:void 0},pe[N]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||_e[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=pe[N];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===ge.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ge.copy(t))},viewport:function(t){!1===ye.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ye.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===o&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},N=null,pe={},d=null,h={},f=null,p=!1,m=null,v=null,g=null,y=null,x=null,_=null,b=null,w=!1,S=null,M=null,C=null,A=null,P=null,ge.set(0,0,e.canvas.width,e.canvas.height),ye.set(0,0,e.canvas.width,e.canvas.height),s.reset(),u.reset(),l.reset()}}}function du(e,t,n,r,i,o,s){var u,l,c,d=i.isWebGL2,h=i.maxTextures,f=i.maxCubemapSize,p=i.maxTextureSize,m=i.maxSamples,v=new WeakMap,g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(B){}function y(e,t){return g?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function x(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?fr:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===c&&(c=y(o,s));var u=n?y(o,s):c;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return dr(e.width)&&dr(e.height)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==Re&&e.minFilter!==je}function w(t,n,i,a){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log2(Math.max(i,a))}function S(n,r,i){if(!1===d)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function M(e){return e===Re||e===De||e===Fe?9728:9729}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&v.delete(n),s.memory.textures--}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(!t)return;void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(i.__webglFramebuffer[o]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[o]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),s.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}var k=0;function C(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=s.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void D(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function A(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=a||s?s?r.image[l].image:r.image[l]:x(r.image[l],!1,!0,f);var c,h=u[0],p=_(h)||d,m=o.convert(r.format),v=o.convert(r.type),g=S(r.internalFormat,m,v);if(L(34067,r,p),a){for(var y=0;y<6;y++){c=u[y].mipmaps;for(var M=0;M<c.length;M++){var E=c[M];r.format!==rt&&r.format!==nt?null!==m?n.compressedTexImage2D(34069+y,M,g,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+y,M,g,E.width,E.height,0,m,v,E.data)}}t.__maxMipLevel=c.length-1}else{c=r.mipmaps;for(var T=0;T<6;T++)if(s){n.texImage2D(34069+T,0,g,u[T].width,u[T].height,0,m,v,u[T].data);for(var k=0;k<c.length;k++){var C=c[k].image[T].image;n.texImage2D(34069+T,k+1,g,C.width,C.height,0,m,v,C.data)}}else{n.texImage2D(34069+T,0,g,m,v,u[T]);for(var A=0;A<c.length;A++){var P=c[A];n.texImage2D(34069+T,A+1,g,m,v,P.image[T])}}t.__maxMipLevel=c.length}b(r,p)&&w(34067,r,h.width,h.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}var P=(u={},(0,a.Z)(u,Pe,10497),(0,a.Z)(u,Oe,33071),(0,a.Z)(u,Le,33648),u),O=(l={},(0,a.Z)(l,Re,9728),(0,a.Z)(l,De,9984),(0,a.Z)(l,Fe,9986),(0,a.Z)(l,je,9729),(0,a.Z)(l,ze,9985),(0,a.Z)(l,Be,9987),l);function L(n,a,o){if(o?(e.texParameteri(n,10242,P[a.wrapS]),e.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[a.wrapR]),e.texParameteri(n,10240,O[a.magFilter]),e.texParameteri(n,10241,O[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Oe&&a.wrapT===Oe||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,M(a.magFilter)),e.texParameteri(n,10241,M(a.minFilter)),a.minFilter!==Re&&a.minFilter!==je&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===Ke&&!1===t.has("OES_texture_float_linear"))return;if(!1===d&&a.type===Ye&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E),t.__webglTexture=e.createTexture(),s.memory.textures++)}function D(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!d&&(e.wrapS!==Oe||e.wrapT!==Oe||e.minFilter!==Re&&e.minFilter!==je)}(r)&&!1===_(r.image),l=x(r.image,u,!1,p),c=_(l)||d,h=o.convert(r.format),f=o.convert(r.type),m=S(r.internalFormat,h,f);L(a,r,c);var v=r.mipmaps;if(r.isDepthTexture)m=6402,d?m=r.type===Ke?36012:r.type===Xe?33190:r.type===et?35056:33189:r.type===Ke&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===st&&6402===m&&r.type!==We&&r.type!==Xe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=We,f=o.convert(r.type)),r.format===ut&&6402===m&&(m=34041,r.type!==et&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=et,f=o.convert(r.type))),n.texImage2D(3553,0,m,l.width,l.height,0,h,f,null);else if(r.isDataTexture)if(v.length>0&&c){for(var g=0,y=v.length;g<y;g++)s=v[g],n.texImage2D(3553,g,m,s.width,s.height,0,h,f,s.data);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,h,f,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var M=0,E=v.length;M<E;M++)s=v[M],r.format!==rt&&r.format!==nt?null!==h?n.compressedTexImage2D(3553,M,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,M,m,s.width,s.height,0,h,f,s.data);t.__maxMipLevel=v.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,h,f,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,h,f,l.data),t.__maxMipLevel=0;else if(v.length>0&&c){for(var T=0,k=v.length;T<k;T++)s=v[T],n.texImage2D(3553,T,m,h,f,s);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,m,h,f,l),t.__maxMipLevel=0;b(r,c)&&w(a,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function I(t,i,a,s,u){var l=o.convert(a.format),c=o.convert(a.type),d=S(a.internalFormat,l,c);32879===u||35866===u?n.texImage3D(u,0,d,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,d,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===Ke?i=36012:a.type===Xe&&(i=33190));var s=j(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=j(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=o.convert(l.format),d=o.convert(l.type),h=S(l.internalFormat,c,d);if(r){var f=j(n);e.renderbufferStorageMultisample(36161,f,h,n.width,n.height)}else e.renderbufferStorage(36161,h,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),C(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===st)e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==ut)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),F(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function j(e){return d&&e.isWebGLMultisampleRenderTarget?Math.min(m,e.samples):0}var z=!1,U=!1;this.allocateTextureUnit=function(){var e=k;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),k+=1,e},this.resetTextureUnits=function(){k=0},this.setTexture2D=C,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?D(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?D(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=A,this.setupRenderTarget=function(t){var a=t.texture,u=r.get(t),l=r.get(a);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(l.__webglTexture=e.createTexture(),l.__version=a.version,s.memory.textures++);var c=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=!0===t.isWebGLMultisampleRenderTarget,p=a.isDataTexture3D||a.isDataTexture2DArray,m=_(t)||d;if(!d||a.format!==nt||a.type!==Ke&&a.type!==Ye||(a.format=rt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){u.__webglFramebuffer=[];for(var v=0;v<6;v++)u.__webglFramebuffer[v]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers)for(var g=t.texture,y=0,x=g.length;y<x;y++){var M=r.get(g[y]);void 0===M.__webglTexture&&(M.__webglTexture=e.createTexture(),s.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(f)if(d){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var E=o.convert(a.format),k=o.convert(a.type),C=S(a.internalFormat,E,k),A=j(t);e.renderbufferStorageMultisample(36161,A,C,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),F(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),L(34067,a,m);for(var P=0;P<6;P++)I(u.__webglFramebuffer[P],t,a,36064,34069+P);b(a,m)&&w(34067,a,t.width,t.height),n.bindTexture(34067,null)}else if(h){for(var O=t.texture,R=0,D=O.length;R<D;R++){var z=O[R],U=r.get(z);n.bindTexture(3553,U.__webglTexture),L(3553,z,m),I(u.__webglFramebuffer,t,z,36064+R,3553),b(z,m)&&w(3553,z,t.width,t.height)}n.bindTexture(3553,null)}else{var B=3553;if(p)if(d)B=a.isDataTexture3D?32879:35866;else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(B,l.__webglTexture),L(B,a,m),I(u.__webglFramebuffer,t,a,36064,B),b(a,m)&&w(3553,a,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){for(var t=_(e)||d,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(b(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),w(u,s,e.width,e.height),n.bindTexture(u,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(d){var i=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),C(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),U=!0),e=e.texture),A(e,t)}}function hu(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===Ge)return 5121;if(e===Qe)return 32819;if(e===$e)return 32820;if(e===Je)return 33635;if(e===He)return 5120;if(e===Ze)return 5122;if(e===We)return 5123;if(e===qe)return 5124;if(e===Xe)return 5125;if(e===Ke)return 5126;if(e===Ye)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===tt)return 6406;if(e===nt)return 6407;if(e===rt)return 6408;if(e===it)return 6409;if(e===at)return 6410;if(e===st)return 6402;if(e===ut)return 34041;if(e===lt)return 6403;if(e===ct)return 36244;if(e===dt)return 33319;if(e===ht)return 33320;if(e===ft)return 36248;if(e===pt)return 36249;if(e===mt||e===vt||e===gt||e===yt){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===mt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===vt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===gt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===yt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===xt||e===_t||e===bt||e===wt){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===xt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===_t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===bt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===wt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===St)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Mt||e===Et)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(e===Mt)return n.COMPRESSED_RGB8_ETC2;if(e===Et)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Tt||e===kt||e===Ct||e===At||e===Pt||e===Ot||e===Lt||e===Rt||e===Dt||e===It||e===Ft||e===Nt||e===jt||e===zt||e===Bt||e===Vt||e===Gt||e===Ht||e===Zt||e===Wt||e===qt||e===Xt||e===Kt||e===Yt||e===Qt||e===$t||e===Jt||e===en?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===Ut?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===et?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var fu=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,y.Z)(this,n),(e=t.call(this)).cameras=r,e}return(0,x.Z)(n)}(Ya);fu.prototype.isArrayCamera=!0;var pu=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="Group",e}return(0,x.Z)(n)}(Ai);pu.prototype.isGroup=!0;var mu={type:"move"},vu=function(){function e(){(0,y.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,x.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new pu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new pu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new kr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new kr),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new pu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new kr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new kr),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,a=null,o=null,s=this._targetRay,u=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==s&&null!==(r=t.getPose(e.targetRaySpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(mu)),l&&e.hand){o=!0;var c,d=(0,i.Z)(e.hand.values());try{for(d.s();!(c=d.n()).done;){var h=c.value,f=t.getJointPose(h,n);if(void 0===l.joints[h.jointName]){var p=new pu;p.matrixAutoUpdate=!1,p.visible=!1,l.joints[h.jointName]=p,l.add(p)}var m=l.joints[h.jointName];null!==f&&(m.matrix.fromArray(f.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=f.radius),m.visible=null!==f}}catch(x){d.e(x)}finally{d.f()}var v=l.joints["index-finger-tip"],g=l.joints["thumb-tip"],y=v.position.distanceTo(g.position);l.inputState.pinching&&y>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&y<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==u&&e.gripSpace&&null!==(a=t.getPose(e.gripSpace,n))&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1);return null!==s&&(s.visible=null!==r),null!==u&&(u.visible=null!==a),null!==l&&(l.visible=null!==o),this}}]),e}(),gu=function(e){m(n,e);var t=v(n);function n(e,i){var a;(0,y.Z)(this,n),a=t.call(this);var o=(0,u.Z)(a),s=e.state,l=null,c=1,d=null,h="local-floor",f=null,p=[],m=new Map,v=new Ya;v.layers.enable(1),v.viewport=new wr;var g=new Ya;g.layers.enable(2),g.viewport=new wr;var x=[v,g],_=new fu;_.layers.enable(1),_.layers.enable(2);var w=null,S=null;function M(e){var t=m.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function E(){m.forEach((function(e,t){e.disconnect(t)})),m.clear(),w=null,S=null,s.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),O.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function T(e){for(var t=l.inputSources,n=0;n<p.length;n++)m.set(t[n],p[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=m.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),m.delete(i))}for(var o=0;o<e.added.length;o++){var s=e.added[o],u=m.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=p[e];return void 0===t&&(t=new vu,p[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=p[e];return void 0===t&&(t=new vu,p[e]=t),t.getGripSpace()},a.getHand=function(e){var t=p[e];return void 0===t&&(t=new vu,p[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){c=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){h=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return d},a.getSession=function(){return l},a.setSession=function(){var e=(0,r.Z)(b().mark((function e(t){var n,r,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(l=t)){e.next=24;break}if(l.addEventListener("select",M),l.addEventListener("selectstart",M),l.addEventListener("selectend",M),l.addEventListener("squeeze",M),l.addEventListener("squeezestart",M),l.addEventListener("squeezeend",M),l.addEventListener("end",E),l.addEventListener("inputsourceschange",T),!0===(n=i.getContextAttributes()).xrCompatible){e.next=14;break}return e.next=14,i.makeXRCompatible();case 14:return r={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:c},a=new XRWebGLLayer(l,i,r),l.updateRenderState({baseLayer:a}),e.next=19,l.requestReferenceSpace(h);case 19:d=e.sent,O.setContext(l),O.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var k=new kr,C=new kr;function A(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==l){_.near=g.near=v.near=e.near,_.far=g.far=v.far=e.far,w===_.near&&S===_.far||(l.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);var t=e.parent,n=_.cameras;A(_,t);for(var r=0;r<n.length;r++)A(n[r],t);e.matrixWorld.copy(_.matrixWorld),e.matrix.copy(_.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var i=e.children,a=0,o=i.length;a<o;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),C.setFromMatrixPosition(n.matrixWorld);var r=k.distanceTo(C),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=o*c,f=o*d,p=r/(-c+d),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var v=o+p,g=s+p,y=h-m,x=f+(r-m),_=u*s/g*v,b=l*s/g*v;e.projectionMatrix.makePerspective(y,x,_,b,v,g)}(_,v,g):_.projectionMatrix.copy(v.projectionMatrix)}},a.getCamera=function(){return _};var P=null;var O=new io;return O.setAnimationLoop((function(e,t){if(null!==(f=t.getViewerPose(d))){var n=f.views,r=l.renderState.baseLayer;s.bindXRFramebuffer(r.framebuffer);var i=!1;n.length!==_.cameras.length&&(_.cameras.length=0,i=!0);for(var a=0;a<n.length;a++){var o=n[a],u=r.getViewport(o),c=x[a];c.matrix.fromArray(o.transform.matrix),c.projectionMatrix.fromArray(o.projectionMatrix),c.viewport.set(u.x,u.y,u.width,u.height),0===a&&_.matrix.copy(c.matrix),!0===i&&_.cameras.push(c)}}for(var h=l.inputSources,m=0;m<p.length;m++){var v=p[m],g=h[m];v.update(g,t,d)}P&&P(e,t)})),a.setAnimationLoop=function(e){P=e},a.dispose=function(){},a}return(0,x.Z)(n)}(tr);function yu(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,i,a=e.get(n).envMap;if(a){t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&a._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var o=e.get(a).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===D&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===D&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===D&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===D&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===D&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===D&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===D&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height));e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap);e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===D&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===D&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===D&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===D&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function xu(e){var t=void 0!==(e=e||{}).canvas?e.canvas:function(){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null,f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=vn,this.physicallyCorrectLights=!1,this.toneMapping=ge,this.toneMappingExposure=1;var m=this,v=!1,g=0,y=0,x=null,_=-1,b=null,w=new wr,S=new wr,M=null,E=t.width,T=t.height,k=1,C=null,A=null,P=new wr(0,0,E,T),O=new wr(0,0,E,T),L=!1,R=[],D=new ro,I=!1,F=!1,N=null,j=new ii,z=new kr,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===x?k:1}var V,G,H,Z,W,q,X,K,Y,Q,$,J,ee,te,ne,re,ie,ae,oe,se,ue,le,ce=n;function de(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{var he={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",ye,!1),null===ce){var fe=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&fe.shift(),null===(ce=de(fe,he)))throw de(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Pe){throw console.error("THREE.WebGLRenderer: "+Pe.message),Pe}function pe(){V=new go(ce),G=new po(ce,V,e),V.init(G),ue=new hu(ce,V,G),H=new cu(ce,V,G),R[0]=1029,Z=new _o(ce),W=new Ys,q=new du(ce,V,H,W,G,ue,Z),X=new vo(m),K=new ao(ce,G),le=new ho(ce,V,K,G),Y=new yo(ce,K,Z,le),Q=new Mo(ce,Y,K,Z),ae=new So(ce),ne=new mo(W),$=new Ks(m,X,V,G,le,ne),J=new yu(W),ee=new eu(W),te=new ou(V,G),ie=new co(m,X,H,Q,s),re=new lu(m,Q,G),oe=new fo(ce,V,Z,G),se=new xo(ce,V,Z,G),Z.programs=$.programs,m.capabilities=G,m.extensions=V,m.properties=W,m.renderLists=ee,m.shadowMap=re,m.state=H,m.info=Z}pe();var me=new gu(m,ce);function ve(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;var e=Z.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,i=re.type;pe(),Z.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=i}function xe(e){var t=e.target;t.removeEventListener("dispose",xe),function(e){(function(e){var t=W.get(e).programs;void 0!==t&&t.forEach((function(e){$.releaseProgram(e)}))})(e),W.remove(e)}(t)}this.xr=me,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){var e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(E,T,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new mr),e.set(E,T)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,T=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new mr),e.set(E*k,T*k).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,T=n,k=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new wr),e.copy(w)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),H.viewport(w.copy(P).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),H.scissor(S.copy(O).multiplyScalar(k).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){H.setScissorTest(L=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new Ji),e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",ye,!1),ee.dispose(),te.dispose(),W.dispose(),X.dispose(),Q.dispose(),le.dispose(),me.dispose(),me.removeEventListener("sessionstart",be),me.removeEventListener("sessionend",we),N&&(N.dispose(),N=null),Se.stop()},this.renderBufferImmediate=function(e,t){le.initAttributes();var n=W.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());var r=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),le.enableAttribute(r.position),ce.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),le.enableAttribute(r.normal),ce.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),le.enableAttribute(r.uv),ce.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),le.enableAttribute(r.color),ce.vertexAttribPointer(r.color,3,5126,!1,0,0)),le.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=U);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Ae(e,t,r,i);H.setMaterial(r,o);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,d=1;!0===r.wireframe&&(u=Y.getWireframeAttribute(n),d=2),(r.morphTargets||r.morphNormals)&&ae.update(i,n,r,s),le.setup(i,r,s,n,u);var h=oe;null!==u&&(c=K.get(u),(h=se).setIndex(c));var f=null!==u?u.count:l.count,p=n.drawRange.start*d,m=n.drawRange.count*d,v=null!==a?a.start*d:0,g=null!==a?a.count*d:1/0,y=Math.max(p,v),x=Math.min(f,p+m,v+g)-1,_=Math.max(0,x-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*B()),h.setMode(1)):h.setMode(4);else if(i.isLine){var b=r.linewidth;void 0===b&&(b=1),H.setLineWidth(b*B()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,_,w)}else h.render(y,_)}},this.compile=function(e,t){(h=te.get(e)).init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){ke(n[r],e,t)}else ke(n,e,t)}))};var _e=null;function be(){Se.stop()}function we(){Se.start()}var Se=new io;function Me(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var i=Q.update(e),a=e.material;a.visible&&d.push(e,i,a,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j),d.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Z.render.frame&&(e.skeleton.update(),e.skeleton.frame=Z.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var o=Q.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var f=u[l],p=s[f.materialIndex];p&&p.visible&&d.push(e,o,p,n,z.z,f)}else s.visible&&d.push(e,o,s,n,z.z,null)}for(var m=e.children,v=0,g=m.length;v<g;v++)Me(m[v],t,n,r)}}function Ee(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;if(n.isArrayCamera)for(var d=n.cameras,f=0,p=d.length;f<p;f++){var m=d[f];s.layers.test(m.layers)&&(H.viewport(w.copy(m.viewport)),h.setupLightsView(m),Te(s,t,m,u,l,c))}else Te(s,t,n,u,l,c)}}function Te(e,t,n,r,i,a){if(e.onBeforeRender(m,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=Ae(n,t,i,e);H.setMaterial(i),le.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,o)}else m.renderBufferDirect(n,t,r,i,e,a);e.onAfterRender(m,t,n,r,i,a)}function ke(e,t,n){!0!==t.isScene&&(t=U);var r=W.get(e),i=h.state.lights,a=h.state.shadowsArray,o=i.state.version,s=$.getParameters(e,i.state,a,t,n),u=$.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=X.get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",xe),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ce(e,s),c}else s.uniforms=$.getUniforms(e),e.onBuild(s,m),e.onBeforeCompile(s,m),c=$.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ne.uniform),Ce(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var f=c.getUniforms(),p=Cs.seqWithValue(f.seq,d);return r.currentProgram=c,r.uniformsList=p,c}function Ce(e,t){var n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas}function Ae(e,t,n,r){!0!==t.isScene&&(t=U),q.resetTextureUnits();var i=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===x?m.outputEncoding:x.texture.encoding,s=X.get(n.envMap||a),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=W.get(n),c=h.state.lights;if(!0===I&&(!0===F||e!==b)){var d=e===b&&n.id===_;ne.setState(n,e,d)}var f=!1;n.version===l.__version?l.needsLights&&l.lightsStateVersion!==c.state.version||l.outputEncoding!==o||r.isInstancedMesh&&!1===l.instancing?f=!0:r.isInstancedMesh||!0!==l.instancing?r.isSkinnedMesh&&!1===l.skinning?f=!0:r.isSkinnedMesh||!0!==l.skinning?l.envMap!==s||n.fog&&l.fog!==i?f=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===ne.numPlanes&&l.numIntersection===ne.numIntersection?l.vertexAlphas!==u&&(f=!0):f=!0:f=!0:f=!0:(f=!0,l.__version=n.version);var p=l.currentProgram;!0===f&&(p=ke(n,t,r));var v,g,y=!1,w=!1,S=!1,M=p.getUniforms(),E=l.uniforms;if(H.useProgram(p.program)&&(y=!0,w=!0,S=!0),n.id!==_&&(_=n.id,w=!0),y||b!==e){if(M.setValue(ce,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&M.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),b!==e&&(b=e,w=!0,S=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var C=M.map.cameraPosition;void 0!==C&&C.setValue(ce,z.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&M.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&M.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){M.setOptional(ce,r,"bindMatrix"),M.setOptional(ce,r,"bindMatrixInverse");var A=r.skeleton;A&&(G.floatVertexTextures?(null===A.boneTexture&&A.computeBoneTexture(),M.setValue(ce,"boneTexture",A.boneTexture,q),M.setValue(ce,"boneTextureSize",A.boneTextureSize)):M.setOptional(ce,A,"boneMatrices"))}return(w||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,M.setValue(ce,"receiveShadow",r.receiveShadow)),w&&(M.setValue(ce,"toneMappingExposure",m.toneMappingExposure),l.needsLights&&(g=S,(v=E).ambientLightColor.needsUpdate=g,v.lightProbe.needsUpdate=g,v.directionalLights.needsUpdate=g,v.directionalLightShadows.needsUpdate=g,v.pointLights.needsUpdate=g,v.pointLightShadows.needsUpdate=g,v.spotLights.needsUpdate=g,v.spotLightShadows.needsUpdate=g,v.rectAreaLights.needsUpdate=g,v.hemisphereLights.needsUpdate=g),i&&n.fog&&J.refreshFogUniforms(E,i),J.refreshMaterialUniforms(E,n,k,T,N),Cs.upload(ce,l.uniformsList,E,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Cs.upload(ce,l.uniformsList,E,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&M.setValue(ce,"center",r.center),M.setValue(ce,"modelViewMatrix",r.modelViewMatrix),M.setValue(ce,"normalMatrix",r.normalMatrix),M.setValue(ce,"modelMatrix",r.matrixWorld),p}Se.setAnimationLoop((function(e){_e&&_e(e)})),"undefined"!==typeof window&&Se.setContext(window),this.setAnimationLoop=function(e){_e=e,me.setAnimationLoop(e),null===e?Se.stop():Se.start()},me.addEventListener("sessionstart",be),me.addEventListener("sessionend",we),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==v){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),(h=te.get(e,p.length)).init(),p.push(h),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(j),F=this.localClippingEnabled,I=ne.init(this.clippingPlanes,F,t),(d=ee.get(e,f.length)).init(),f.push(d),Me(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(C,A),!0===I&&ne.beginShadows();var n=h.state.shadowsArray;re.render(n,e,t),h.setupLights(),h.setupLightsView(t),!0===I&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(d,e);var r=d.opaque,i=d.transmissive,a=d.transparent;r.length>0&&Ee(r,e,t),i.length>0&&function(e,t,n,r){null===N&&(N=new Sr(1024,1024,{generateMipmaps:!0,minFilter:Be,magFilter:Re,wrapS:Oe,wrapT:Oe}));var i=m.getRenderTarget();m.setRenderTarget(N),m.clear(),Ee(e,n,r),q.updateRenderTargetMipmap(N),m.setRenderTarget(i),Ee(t,n,r)}(r,i,e,t),a.length>0&&Ee(a,e,t),null!==x&&(q.updateRenderTargetMipmap(x),q.updateMultisampleRenderTarget(x)),!0===e.isScene&&e.onAfterRender(m,e,t),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),le.resetDefaultState(),_=-1,b=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,g=t,y=n,e&&void 0===W.get(e).__webglFramebuffer&&q.setupRenderTarget(e);var r=null,i=!1,a=!1;if(e){var o=e.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(a=!0);var s=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],i=!0):r=e.isWebGLMultisampleRenderTarget?W.get(e).__webglMultisampledFramebuffer:s,w.copy(e.viewport),S.copy(e.scissor),M=e.scissorTest}else w.copy(P).multiplyScalar(k).floor(),S.copy(O).multiplyScalar(k).floor(),M=L;var u=H.bindFramebuffer(36160,r);if(u&&G.drawBuffers){var l=!1;if(e)if(e.isWebGLMultipleRenderTargets){var c=e.texture;if(R.length!==c.length||36064!==R[0]){for(var d=0,h=c.length;d<h;d++)R[d]=36064+d;R.length=c.length,l=!0}}else 1===R.length&&36064===R[0]||(R[0]=36064,R.length=1,l=!0);else 1===R.length&&1029===R[0]||(R[0]=1029,R.length=1,l=!0);l&&(G.isWebGL2?ce.drawBuffers(R):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(R))}if(H.viewport(w),H.scissor(S),H.setScissorTest(M),i){var f=W.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,f.__webglTexture,n)}else if(a){var p=W.get(e.texture),m=t||0;ce.framebufferTextureLayer(36160,36064,p.__webglTexture,n||0,m)}},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){H.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==rt&&ue.convert(l)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var d=c===Ye&&(V.has("EXT_color_buffer_half_float")||G.isWebGL2&&V.has("EXT_color_buffer_float"));if(c!==Ge&&ue.convert(c)!==ce.getParameter(35738)&&(c!==Ke||!(G.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!d)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,ue.convert(l),ue.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var h=null!==x?W.get(x).__webglFramebuffer:null;H.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=ue.convert(t.format);G.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(t,0),ce.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=ue.convert(n.format),s=ue.convert(n.type);q.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=n.image,s=o.width,u=o.height,l=o.data,c=ue.convert(r.format),d=ue.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),a=35866}ce.pixelStorei(37440,r.flipY),ce.pixelStorei(37441,r.premultiplyAlpha),ce.pixelStorei(3317,r.unpackAlignment);var h=ce.getParameter(3314),f=ce.getParameter(32878),p=ce.getParameter(3316),v=ce.getParameter(3315),g=ce.getParameter(32877);ce.pixelStorei(3314,s),ce.pixelStorei(32878,u),ce.pixelStorei(3316,e.min.x),ce.pixelStorei(3315,e.min.y),ce.pixelStorei(32877,e.min.z),ce.texSubImage3D(a,i,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,c,d,l),ce.pixelStorei(3314,h),ce.pixelStorei(32878,f),ce.pixelStorei(3316,p),ce.pixelStorei(3315,v),ce.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ce.generateMipmap(a),H.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){g=0,y=0,x=null,H.reset(),le.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var _u=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n)}(xu);_u.prototype.isWebGL1Renderer=!0;var bu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,y.Z)(this,e),this.name="",this.color=new Ji(t),this.density=n}return(0,x.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();bu.prototype.isFogExp2=!0;var wu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,y.Z)(this,e),this.name="",this.color=new Ji(t),this.near=n,this.far=r}return(0,x.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();wu.prototype.isFog=!0;var Su=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,u.Z)(e)})),e}return(0,x.Z)(n,[{key:"copy",value:function(e,t){return h(c(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Ai);Su.prototype.isScene=!0;var Mu=function(){function e(t,n){(0,y.Z)(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Hn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=sr()}return(0,x.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();Mu.prototype.isInterleavedBuffer=!0;var Eu=new kr,Tu=function(){function e(t,n,r,i){(0,y.Z)(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return(0,x.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Eu.x=this.getX(t),Eu.y=this.getY(t),Eu.z=this.getZ(t),Eu.applyMatrix4(e),this.setXYZ(t,Eu.x,Eu.y,Eu.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Eu.x=this.getX(t),Eu.y=this.getY(t),Eu.z=this.getZ(t),Eu.applyNormalMatrix(e),this.setXYZ(t,Eu.x,Eu.y,Eu.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Eu.x=this.getX(t),Eu.y=this.getY(t),Eu.z=this.getZ(t),Eu.transformDirection(e),this.setXYZ(t,Eu.x,Eu.y,Eu.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new ra(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();Tu.prototype.isInterleavedBufferAttribute=!0;var ku,Cu=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new Ji(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Wi);Cu.prototype.isSpriteMaterial=!0;var Au=new kr,Pu=new kr,Ou=new kr,Lu=new mr,Ru=new mr,Du=new ii,Iu=new kr,Fu=new kr,Nu=new kr,ju=new mr,zu=new mr,Uu=new mr,Bu=function(e){m(n,e);var t=v(n);function n(e){var r;if((0,y.Z)(this,n),(r=t.call(this)).type="Sprite",void 0===ku){ku=new Ma;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Mu(i,5);ku.setIndex([0,1,2,0,2,3]),ku.setAttribute("position",new Tu(a,3,0,!1)),ku.setAttribute("uv",new Tu(a,2,3,!1))}return r.geometry=ku,r.material=void 0!==e?e:new Cu,r.center=new mr(.5,.5),r}return(0,x.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pu.setFromMatrixScale(this.matrixWorld),Du.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ou.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pu.multiplyScalar(-Ou.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Vu(Iu.set(-.5,-.5,0),Ou,a,Pu,n,r),Vu(Fu.set(.5,-.5,0),Ou,a,Pu,n,r),Vu(Nu.set(.5,.5,0),Ou,a,Pu,n,r),ju.set(0,0),zu.set(1,0),Uu.set(1,1);var o=e.ray.intersectTriangle(Iu,Fu,Nu,!1,Au);if(null!==o||(Vu(Fu.set(-.5,.5,0),Ou,a,Pu,n,r),zu.set(0,1),null!==(o=e.ray.intersectTriangle(Iu,Nu,Fu,!1,Au)))){var s=e.ray.origin.distanceTo(Au);s<e.near||s>e.far||t.push({distance:s,point:Au.clone(),uv:Hi.getUV(Au,Iu,Fu,Nu,ju,zu,Uu,new mr),face:null,object:this})}}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Ai);function Vu(e,t,n,r,i,a){Lu.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Ru.x=a*Lu.x-i*Lu.y,Ru.y=i*Lu.x+a*Lu.y):Ru.copy(Lu),e.copy(t),e.x+=Ru.x,e.y+=Ru.y,e.applyMatrix4(Du)}Bu.prototype.isSprite=!0;var Gu=new kr,Hu=new kr,Zu=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties((0,u.Z)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,x.Z)(n,[{key:"copy",value:function(e){h(c(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){Gu.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Gu);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){Gu.setFromMatrixPosition(e.matrixWorld),Hu.setFromMatrixPosition(this.matrixWorld);var n,r,i=Gu.distanceTo(Hu)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(Ai),Wu=new kr,qu=new wr,Xu=new wr,Ku=new kr,Yu=new ii,Qu=function(e){m(n,e);var t=v(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new ii,i.bindMatrixInverse=new ii,i}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new wr,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){h(c(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;qu.fromBufferAttribute(r.attributes.skinIndex,e),Xu.fromBufferAttribute(r.attributes.skinWeight,e),Wu.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=Xu.getComponent(i);if(0!==a){var o=qu.getComponent(i);Yu.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Ku.copy(Wu).applyMatrix4(Yu),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Va);Qu.prototype.isSkinnedMesh=!0;var $u=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="Bone",e}return(0,x.Z)(n)}(Ai);$u.prototype.isBone=!0;var Ju=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s,u,l,c,d,h,f){var p;return(0,y.Z)(this,n),(p=t.call(this,null,s,u,l,c,d,a,o,h,f)).image={data:e||null,width:r||1,height:i||1},p.magFilter=void 0!==c?c:Re,p.minFilter=void 0!==d?d:Re,p.generateMipmaps=!1,p.flipY=!1,p.unpackAlignment=1,p.needsUpdate=!0,p}return(0,x.Z)(n)}(_r);Ju.prototype.isDataTexture=!0;var el=new ii,tl=new ii,nl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,y.Z)(this,e),this.uuid=sr(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,x.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ii)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new ii;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:tl;el.multiplyMatrices(o,t[i]),el.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=hr(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Ju(t,e,e,rt,Ke);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new $u),this.bones.push(a),this.boneInverses.push((new ii).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),rl=new ii,il=new ii,al=[],ol=new Va,sl=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return(0,y.Z)(this,n),(a=t.call(this,e,r)).instanceMatrix=new ra(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(ol.geometry=this.geometry,ol.material=this.material,void 0!==ol.material)for(var i=0;i<r;i++){this.getMatrixAt(i,rl),il.multiplyMatrices(n,rl),ol.matrixWorld=il,ol.raycast(e,al);for(var a=0,o=al.length;a<o;a++){var s=al[a];s.instanceId=i,s.object=this,t.push(s)}al.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new ra(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Va);sl.prototype.isInstancedMesh=!0;var ul=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new Ji(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.morphTargets=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}]),n}(Wi);ul.prototype.isLineBasicMaterial=!0;var ll=new kr,cl=new kr,dl=new ii,hl=new ri,fl=new Kr,pl=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ma,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ul;return(0,y.Z)(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)ll.fromBufferAttribute(t,r-1),cl.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=ll.distanceTo(cl);e.setAttribute("lineDistance",new ha(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),fl.copy(n.boundingSphere),fl.applyMatrix4(r),fl.radius+=i,!1!==e.ray.intersectsSphere(fl)){dl.copy(r).invert(),hl.copy(e.ray).applyMatrix4(dl);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new kr,l=new kr,c=new kr,d=new kr,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,p=n.attributes.position;if(null!==f)for(var m=Math.max(0,a.start),v=Math.min(f.count,a.start+a.count)-1;m<v;m+=h){var g=f.getX(m),y=f.getX(m+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(hl.distanceSqToSegment(u,l,d,c)>s)){d.applyMatrix4(this.matrixWorld);var x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var _=Math.max(0,a.start),b=Math.min(p.count,a.start+a.count)-1;_<b;_+=h){if(u.fromBufferAttribute(p,_),l.fromBufferAttribute(p,_+1),!(hl.distanceSqToSegment(u,l,d,c)>s)){d.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(d);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Ai);pl.prototype.isLine=!0;var ml=new kr,vl=new kr,gl=function(e){m(n,e);var t=v(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return(0,x.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)ml.fromBufferAttribute(t,r),vl.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+ml.distanceTo(vl);e.setAttribute("lineDistance",new ha(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(pl);gl.prototype.isLineSegments=!0;var yl=function(e){m(n,e);var t=v(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return(0,x.Z)(n)}(pl);yl.prototype.isLineLoop=!0;var xl=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new Ji(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.morphTargets=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}]),n}(Wi);xl.prototype.isPointsMaterial=!0;var _l=new ii,bl=new ri,wl=new Kr,Sl=new kr,Ml=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ma,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xl;return(0,y.Z)(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),wl.copy(n.boundingSphere),wl.applyMatrix4(r),wl.radius+=i,!1!==e.ray.intersectsSphere(wl)){_l.copy(r).invert(),bl.copy(e.ray).applyMatrix4(_l);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),d=Math.min(u.count,a.start+a.count);c<d;c++){var h=u.getX(c);Sl.fromBufferAttribute(l,h),El(Sl,h,s,r,e,t,this)}else for(var f=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);f<p;f++)Sl.fromBufferAttribute(l,f),El(Sl,f,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Ai);function El(e,t,n,r,i,a,o){var s=bl.distanceSqToPoint(e);if(s<n){var u=new kr;bl.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}Ml.prototype.isPoints=!0;var Tl=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s,l,c,d){var h;(0,y.Z)(this,n),(h=t.call(this,e,r,i,a,o,s,l,c,d)).format=void 0!==l?l:nt,h.minFilter=void 0!==s?s:je,h.magFilter=void 0!==o?o:je,h.generateMipmaps=!1;var f=(0,u.Z)(h);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){f.needsUpdate=!0,e.requestVideoFrameCallback(t)})),h}return(0,x.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(_r);Tl.prototype.isVideoTexture=!0;var kl=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s,u,l,c,d,h,f){var p;return(0,y.Z)(this,n),(p=t.call(this,null,s,u,l,c,d,a,o,h,f)).image={width:r,height:i},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return(0,x.Z)(n)}(_r);kl.prototype.isCompressedTexture=!0;var Cl=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s,u,l,c){var d;return(0,y.Z)(this,n),(d=t.call(this,e,r,i,a,o,s,u,l,c)).needsUpdate=!0,d}return(0,x.Z)(n)}(_r);Cl.prototype.isCanvasTexture=!0;var Al=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s,u,l,c,d){var h;if((0,y.Z)(this,n),(d=void 0!==d?d:st)!==st&&d!==ut)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&d===st&&(i=We),void 0===i&&d===ut&&(i=et),(h=t.call(this,null,a,o,s,u,l,d,i,c)).image={width:e,height:r},h.magFilter=void 0!==u?u:Re,h.minFilter=void 0!==l?l:Re,h.flipY=!1,h.generateMipmaps=!1,h}return(0,x.Z)(n)}(_r);Al.prototype.isDepthTexture=!0;var Pl=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,y.Z)(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],u=[],l=[],c=[],d=new kr,h=new mr;u.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var f=0,p=3;f<=i;f++,p+=3){var m=a+f/i*o;d.x=r*Math.cos(m),d.y=r*Math.sin(m),u.push(d.x,d.y,d.z),l.push(0,0,1),h.x=(u[p]/r+1)/2,h.y=(u[p+1]/r+1)/2,c.push(h.x,h.y)}for(var v=1;v<=i;v++)s.push(v,v+1,0);return e.setIndex(s),e.setAttribute("position",new ha(u,3)),e.setAttribute("normal",new ha(l,3)),e.setAttribute("uv",new ha(c,2)),e}return(0,x.Z)(n)}(Ma),Ol=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,y.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:d};var h=(0,u.Z)(e);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],m=[],v=[],g=0,x=[],_=a/2,b=0;function w(){for(var e=new kr,t=new kr,n=0,u=(i-r)/a,l=0;l<=s;l++){for(var y=[],w=l/s,S=w*(i-r)+r,M=0;M<=o;M++){var E=M/o,T=E*d+c,k=Math.sin(T),C=Math.cos(T);t.x=S*k,t.y=-w*a+_,t.z=S*C,p.push(t.x,t.y,t.z),e.set(k,u,C).normalize(),m.push(e.x,e.y,e.z),v.push(E,1-w),y.push(g++)}x.push(y)}for(var A=0;A<o;A++)for(var P=0;P<s;P++){var O=x[P][A],L=x[P+1][A],R=x[P+1][A+1],D=x[P][A+1];f.push(O,L,D),f.push(L,R,D),n+=6}h.addGroup(b,n,0),b+=n}function S(e){for(var t=g,n=new mr,a=new kr,s=0,u=!0===e?r:i,l=!0===e?1:-1,y=1;y<=o;y++)p.push(0,_*l,0),m.push(0,l,0),v.push(.5,.5),g++;for(var x=g,w=0;w<=o;w++){var S=w/o*d+c,M=Math.cos(S),E=Math.sin(S);a.x=u*E,a.y=_*l,a.z=u*M,p.push(a.x,a.y,a.z),m.push(0,l,0),n.x=.5*M+.5,n.y=.5*E*l+.5,v.push(n.x,n.y),g++}for(var T=0;T<o;T++){var k=t+T,C=x+T;!0===e?f.push(C,C+1,k):f.push(C+1,C,k),s+=3}h.addGroup(b,s,!0===e?1:2),b+=s}return w(),!1===l&&(r>0&&S(!0),i>0&&S(!1)),e.setIndex(f),e.setAttribute("position",new ha(p,3)),e.setAttribute("normal",new ha(m,3)),e.setAttribute("uv",new ha(v,2)),e}return(0,x.Z)(n)}(Ma),Ll=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,y.Z)(this,n),(e=t.call(this,0,r,i,a,o,s,u,l)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:l},e}return(0,x.Z)(n)}(Ol),Rl=function(e){m(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,y.Z)(this,n),(i=t.call(this)).type="PolyhedronGeometry",i.parameters={vertices:e,indices:r,radius:a,detail:o};var s=[],u=[];function l(e){for(var t=new kr,n=new kr,i=new kr,a=0;a<r.length;a+=3)m(r[a+0],t),m(r[a+1],n),m(r[a+2],i),c(t,n,i,e)}function c(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),u=t.clone().lerp(n,o/i),l=i-o,c=0;c<=l;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(u,c/l)}for(var d=0;d<i;d++)for(var h=0;h<2*(i-d)-1;h++){var f=Math.floor(h/2);h%2===0?(p(a[d][f+1]),p(a[d+1][f]),p(a[d][f])):(p(a[d][f+1]),p(a[d+1][f+1]),p(a[d+1][f]))}}function d(e){for(var t=new kr,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function h(){for(var e=new kr,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=x(e)/2/Math.PI+.5,r=_(e)/Math.PI+.5;u.push(n,1-r)}v(),f()}function f(){for(var e=0;e<u.length;e+=6){var t=u[e+0],n=u[e+2],r=u[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(u[e+0]+=1),n<.2&&(u[e+2]+=1),r<.2&&(u[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function m(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function v(){for(var e=new kr,t=new kr,n=new kr,r=new kr,i=new mr,a=new mr,o=new mr,l=0,c=0;l<s.length;l+=9,c+=6){e.set(s[l+0],s[l+1],s[l+2]),t.set(s[l+3],s[l+4],s[l+5]),n.set(s[l+6],s[l+7],s[l+8]),i.set(u[c+0],u[c+1]),a.set(u[c+2],u[c+3]),o.set(u[c+4],u[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=x(r);g(i,c+0,e,d),g(a,c+2,t,d),g(o,c+4,n,d)}}function g(e,t,n,r){r<0&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=r/2/Math.PI+.5)}function x(e){return Math.atan2(e.z,-e.x)}function _(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return l(o),d(a),h(),i.setAttribute("position",new ha(s,3)),i.setAttribute("normal",new ha(s.slice(),3)),i.setAttribute("uv",new ha(u,2)),0===o?i.computeVertexNormals():i.normalizeNormals(),i}return(0,x.Z)(n)}(Ma),Dl=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,y.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,s,u,r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,x.Z)(n)}(Rl),Il=new kr,Fl=new kr,Nl=new kr,jl=new Hi,zl=function(e){m(n,e);var t=v(n);function n(e,r){var i;if((0,y.Z)(this,n),(i=t.call(this)).type="EdgesGeometry",i.parameters={thresholdAngle:r},r=void 0!==r?r:1,!0===e.isGeometry)return console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),l(i);for(var a=Math.pow(10,4),o=Math.cos(ar*r),s=e.getIndex(),u=e.getAttribute("position"),c=s?s.count:u.count,d=[0,0,0],h=["a","b","c"],f=new Array(3),p={},m=[],v=0;v<c;v+=3){s?(d[0]=s.getX(v),d[1]=s.getX(v+1),d[2]=s.getX(v+2)):(d[0]=v,d[1]=v+1,d[2]=v+2);var g=jl.a,x=jl.b,_=jl.c;if(g.fromBufferAttribute(u,d[0]),x.fromBufferAttribute(u,d[1]),_.fromBufferAttribute(u,d[2]),jl.getNormal(Nl),f[0]="".concat(Math.round(g.x*a),",").concat(Math.round(g.y*a),",").concat(Math.round(g.z*a)),f[1]="".concat(Math.round(x.x*a),",").concat(Math.round(x.y*a),",").concat(Math.round(x.z*a)),f[2]="".concat(Math.round(_.x*a),",").concat(Math.round(_.y*a),",").concat(Math.round(_.z*a)),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var b=0;b<3;b++){var w=(b+1)%3,S=f[b],M=f[w],E=jl[h[b]],T=jl[h[w]],k="".concat(S,"_").concat(M),C="".concat(M,"_").concat(S);C in p&&p[C]?(Nl.dot(p[C].normal)<=o&&(m.push(E.x,E.y,E.z),m.push(T.x,T.y,T.z)),p[C]=null):k in p||(p[k]={index0:d[b],index1:d[w],normal:Nl.clone()})}}for(var A in p)if(p[A]){var P=p[A],O=P.index0,L=P.index1;Il.fromBufferAttribute(u,O),Fl.fromBufferAttribute(u,L),m.push(Il.x,Il.y,Il.z),m.push(Fl.x,Fl.y,Fl.z)}return i.setAttribute("position",new ha(m,3)),i}return(0,x.Z)(n)}(Ma),Ul=function(e,t,n){n=n||2;var r,i,a,o,s,u,l,c=t&&t.length,d=c?t[0]*n:e.length,h=Bl(e,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Bl(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push($l(o));for(s.sort(Xl),i=0;i<s.length;i++)Kl(s[i],n),n=Vl(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var p=n;p<d;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-r,o-i))?1/l:0}return Gl(h,f,n,r,i,l),f};function Bl(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=uc(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=uc(a,e[a],e[a+1],o);return o&&nc(o,o.next)&&(lc(o),o=o.next),o}function Vl(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!nc(r,r.next)&&0!==tc(r.prev,r,r.next))r=r.next;else{if(lc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Gl(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Ql(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Zl(e,r,i,a):Hl(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),lc(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?Gl(e=Wl(Vl(e),t,n),t,n,r,i,a,2):2===o&&ql(e,t,n,r,i,a):Gl(Vl(e),t,n,r,i,a,1);break}}}function Hl(e){var t=e.prev,n=e,r=e.next;if(tc(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Jl(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&tc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Zl(e,t,n,r){var i=e.prev,a=e,o=e.next;if(tc(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=Ql(s,u,t,n,r),h=Ql(l,c,t,n,r),f=e.prevZ,p=e.nextZ;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&Jl(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&tc(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Jl(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&tc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&Jl(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&tc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Jl(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&tc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Wl(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!nc(i,a)&&rc(i,r,r.next,a)&&oc(i,a)&&oc(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),lc(r),lc(r.next),r=e=a),r=r.next}while(r!==e);return Vl(r)}function ql(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&ec(o,s)){var u=sc(o,s);return o=Vl(o,o.next),u=Vl(u,u.next),Gl(o,t,n,r,i,a),void Gl(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Xl(e,t){return e.x-t.x}function Kl(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,l=n,c=n.x,d=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Jl(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),oc(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&Yl(n,r)))&&(n=r,h=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=sc(t,e);Vl(t,t.next),Vl(n,n.next)}}function Yl(e,t){return tc(e.prev,e,t.prev)<0&&tc(t.next,e,e.next)<0}function Ql(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function $l(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Jl(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function ec(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&rc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(oc(e,t)&&oc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(tc(e.prev,e,t.prev)||tc(e,t.prev,t))||nc(e,t)&&tc(e.prev,e,e.next)>0&&tc(t.prev,t,t.next)>0)}function tc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function nc(e,t){return e.x===t.x&&e.y===t.y}function rc(e,t,n,r){var i=ac(tc(e,t,n)),a=ac(tc(e,t,r)),o=ac(tc(n,r,e)),s=ac(tc(n,r,t));return i!==a&&o!==s||(!(0!==i||!ic(e,n,t))||(!(0!==a||!ic(e,r,t))||(!(0!==o||!ic(n,e,r))||!(0!==s||!ic(n,t,r)))))}function ic(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ac(e){return e>0?1:e<0?-1:0}function oc(e,t){return tc(e.prev,e,e.next)<0?tc(e,t,e.next)>=0&&tc(e,e.prev,t)>=0:tc(e,t,e.prev)<0||tc(e,e.next,t)<0}function sc(e,t){var n=new cc(e.i,e.x,e.y),r=new cc(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function uc(e,t,n,r){var i=new cc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function lc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function cc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var dc=function(){function e(){(0,y.Z)(this,e)}return(0,x.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];hc(e),fc(n,e);var a=e.length;t.forEach(hc);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,fc(n,t[o]);for(var s=Ul(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function hc(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function fc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var pc=function(e){m(n,e);var t=v(n);function n(e,r){var i;(0,y.Z)(this,n),(i=t.call(this)).type="ExtrudeGeometry",i.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];for(var a=(0,u.Z)(i),o=[],s=[],l=0,c=e.length;l<c;l++){d(e[l])}function d(e){var t=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,u=void 0!==r.depth?r.depth:100,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:6,d=void 0!==r.bevelSize?r.bevelSize:c-2,h=void 0!==r.bevelOffset?r.bevelOffset:0,f=void 0!==r.bevelSegments?r.bevelSegments:3,p=r.extrudePath,m=void 0!==r.UVGenerator?r.UVGenerator:mc;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=r.amount);var v,g,y,x,_,b=!1;p&&(v=p.getSpacedPoints(i),b=!0,l=!1,g=p.computeFrenetFrames(i,!1),y=new kr,x=new kr,_=new kr),l||(f=0,c=0,d=0,h=0);var w=e.extractPoints(n),S=w.shape,M=w.holes;if(!dc.isClockWise(S)){S=S.reverse();for(var E=0,T=M.length;E<T;E++){var k=M[E];dc.isClockWise(k)&&(M[E]=k.reverse())}}for(var C=dc.triangulateShape(S,M),A=S,P=0,O=M.length;P<O;P++){var L=M[P];S=S.concat(L)}function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var D=S.length,I=C.length;function F(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,d=o*l-s*u;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),p=t.x-s/h,m=t.y+o/h,v=((n.x-l/f-p)*l-(n.y+u/f-m)*u)/(o*l-s*u),g=(r=p+o*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new mr(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new mr(r/a,i/a)}for(var N=[],j=0,z=A.length,U=z-1,B=j+1;j<z;j++,U++,B++)U===z&&(U=0),B===z&&(B=0),N[j]=F(A[j],A[U],A[B]);for(var V,G=[],H=N.concat(),Z=0,W=M.length;Z<W;Z++){var q=M[Z];V=[];for(var X=0,K=q.length,Y=K-1,Q=X+1;X<K;X++,Y++,Q++)Y===K&&(Y=0),Q===K&&(Q=0),V[X]=F(q[X],q[Y],q[Q]);G.push(V),H=H.concat(V)}for(var $=0;$<f;$++){for(var J=$/f,ee=c*Math.cos(J*Math.PI/2),te=d*Math.sin(J*Math.PI/2)+h,ne=0,re=A.length;ne<re;ne++){var ie=R(A[ne],N[ne],te);Oe(ie.x,ie.y,-ee)}for(var ae=0,oe=M.length;ae<oe;ae++){var se=M[ae];V=G[ae];for(var ue=0,le=se.length;ue<le;ue++){var ce=R(se[ue],V[ue],te);Oe(ce.x,ce.y,-ee)}}}for(var de=d+h,he=0;he<D;he++){var fe=l?R(S[he],H[he],de):S[he];b?(x.copy(g.normals[0]).multiplyScalar(fe.x),y.copy(g.binormals[0]).multiplyScalar(fe.y),_.copy(v[0]).add(x).add(y),Oe(_.x,_.y,_.z)):Oe(fe.x,fe.y,0)}for(var pe=1;pe<=i;pe++)for(var me=0;me<D;me++){var ve=l?R(S[me],H[me],de):S[me];b?(x.copy(g.normals[pe]).multiplyScalar(ve.x),y.copy(g.binormals[pe]).multiplyScalar(ve.y),_.copy(v[pe]).add(x).add(y),Oe(_.x,_.y,_.z)):Oe(ve.x,ve.y,u/i*pe)}for(var ge=f-1;ge>=0;ge--){for(var ye=ge/f,xe=c*Math.cos(ye*Math.PI/2),_e=d*Math.sin(ye*Math.PI/2)+h,be=0,we=A.length;be<we;be++){var Se=R(A[be],N[be],_e);Oe(Se.x,Se.y,u+xe)}for(var Me=0,Ee=M.length;Me<Ee;Me++){var Te=M[Me];V=G[Me];for(var ke=0,Ce=Te.length;ke<Ce;ke++){var Ae=R(Te[ke],V[ke],_e);b?Oe(Ae.x,Ae.y+v[i-1].y,v[i-1].x+xe):Oe(Ae.x,Ae.y,u+xe)}}}function Pe(e,t){for(var n=e.length;--n>=0;){var r=n,a=n-1;a<0&&(a=e.length-1);for(var o=0,s=i+2*f;o<s;o++){var u=D*o,l=D*(o+1);Re(t+r+u,t+a+u,t+a+l,t+r+l)}}}function Oe(e,n,r){t.push(e),t.push(n),t.push(r)}function Le(e,t,n){De(e),De(t),De(n);var r=o.length/3,i=m.generateTopUV(a,o,r-3,r-2,r-1);Ie(i[0]),Ie(i[1]),Ie(i[2])}function Re(e,t,n,r){De(e),De(t),De(r),De(t),De(n),De(r);var i=o.length/3,s=m.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);Ie(s[0]),Ie(s[1]),Ie(s[3]),Ie(s[1]),Ie(s[2]),Ie(s[3])}function De(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function Ie(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(l){for(var t=0,n=D*t,r=0;r<I;r++){var s=C[r];Le(s[2]+n,s[1]+n,s[0]+n)}n=D*(t=i+2*f);for(var u=0;u<I;u++){var c=C[u];Le(c[0]+n,c[1]+n,c[2]+n)}}else{for(var d=0;d<I;d++){var h=C[d];Le(h[2],h[1],h[0])}for(var p=0;p<I;p++){var m=C[p];Le(m[0]+D*i,m[1]+D*i,m[2]+D*i)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Pe(A,t),t+=A.length;for(var n=0,r=M.length;n<r;n++){var i=M[n];Pe(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return i.setAttribute("position",new ha(o,3)),i.setAttribute("uv",new ha(s,2)),i.computeVertexNormals(),i}return(0,x.Z)(n,[{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}]),n}(Ma),mc={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new mr(a,o),new mr(s,u),new mr(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-l)?[new mr(o,1-u),new mr(l,1-d),new mr(h,1-p),new mr(m,1-g)]:[new mr(s,1-u),new mr(c,1-d),new mr(f,1-p),new mr(v,1-g)]}};var vc=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,y.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,o,s,r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,x.Z)(n)}(Rl),gc=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,y.Z)(this,n),(r=t.call(this)).type="LatheGeometry",r.parameters={points:e,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=ur(o,0,2*Math.PI);for(var s=[],u=[],l=[],c=1/i,d=new kr,h=new mr,f=0;f<=i;f++)for(var p=a+f*c*o,m=Math.sin(p),v=Math.cos(p),g=0;g<=e.length-1;g++)d.x=e[g].x*m,d.y=e[g].y,d.z=e[g].x*v,u.push(d.x,d.y,d.z),h.x=f/i,h.y=g/(e.length-1),l.push(h.x,h.y);for(var x=0;x<i;x++)for(var _=0;_<e.length-1;_++){var b=_+x*e.length,w=b,S=b+e.length,M=b+e.length+1,E=b+1;s.push(w,S,E),s.push(S,M,E)}if(r.setIndex(s),r.setAttribute("position",new ha(u,3)),r.setAttribute("uv",new ha(l,2)),r.computeVertexNormals(),o===2*Math.PI)for(var T=r.attributes.normal.array,k=new kr,C=new kr,A=new kr,P=i*e.length*3,O=0,L=0;O<e.length;O++,L+=3)k.x=T[L+0],k.y=T[L+1],k.z=T[L+2],C.x=T[P+L+0],C.y=T[P+L+1],C.z=T[P+L+2],A.addVectors(k,C).normalize(),T[L+0]=T[P+L+0]=A.x,T[L+1]=T[P+L+1]=A.y,T[L+2]=T[P+L+2]=A.z;return r}return(0,x.Z)(n)}(Ma),yc=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,y.Z)(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,a,o,r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,x.Z)(n)}(Rl),xc=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;(0,y.Z)(this,n),(a=t.call(this)).type="ParametricGeometry",a.parameters={func:e,slices:r,stacks:i};var o=[],s=[],u=[],l=[],c=1e-5,d=new kr,h=new kr,f=new kr,p=new kr,m=new kr;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var v=r+1,g=0;g<=i;g++)for(var x=g/i,_=0;_<=r;_++){var b=_/r;e(b,x,h),s.push(h.x,h.y,h.z),b-c>=0?(e(b-c,x,f),p.subVectors(h,f)):(e(b+c,x,f),p.subVectors(f,h)),x-c>=0?(e(b,x-c,f),m.subVectors(h,f)):(e(b,x+c,f),m.subVectors(f,h)),d.crossVectors(p,m).normalize(),u.push(d.x,d.y,d.z),l.push(b,x)}for(var w=0;w<i;w++)for(var S=0;S<r;S++){var M=w*v+S,E=w*v+S+1,T=(w+1)*v+S+1,k=(w+1)*v+S;o.push(M,E,k),o.push(E,T,k)}return a.setIndex(o),a.setAttribute("position",new ha(s,3)),a.setAttribute("normal",new ha(u,3)),a.setAttribute("uv",new ha(l,2)),a}return(0,x.Z)(n)}(Ma),_c=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,y.Z)(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:u},a=Math.max(3,a);for(var l=[],c=[],d=[],h=[],f=r,p=(i-r)/(o=Math.max(1,o)),m=new kr,v=new mr,g=0;g<=o;g++){for(var x=0;x<=a;x++){var _=s+x/a*u;m.x=f*Math.cos(_),m.y=f*Math.sin(_),c.push(m.x,m.y,m.z),d.push(0,0,1),v.x=(m.x/i+1)/2,v.y=(m.y/i+1)/2,h.push(v.x,v.y)}f+=p}for(var b=0;b<o;b++)for(var w=b*(a+1),S=0;S<a;S++){var M=S+w,E=M,T=M+a+1,k=M+a+2,C=M+1;l.push(E,T,C),l.push(T,k,C)}return e.setIndex(l),e.setAttribute("position",new ha(c,3)),e.setAttribute("normal",new ha(d,3)),e.setAttribute("uv",new ha(h,2)),e}return(0,x.Z)(n)}(Ma),bc=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,y.Z)(this,n),(r=t.call(this)).type="ShapeGeometry",r.parameters={shapes:e,curveSegments:i};var a=[],o=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(e))h(e);else for(var d=0;d<e.length;d++)h(e[d]),r.addGroup(l,c,d),l+=c,c=0;function h(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,l=n.holes;!1===dc.isClockWise(r)&&(r=r.reverse());for(var d=0,h=l.length;d<h;d++){var f=l[d];!0===dc.isClockWise(f)&&(l[d]=f.reverse())}for(var p=dc.triangulateShape(r,l),m=0,v=l.length;m<v;m++){var g=l[m];r=r.concat(g)}for(var y=0,x=r.length;y<x;y++){var _=r[y];o.push(_.x,_.y,0),s.push(0,0,1),u.push(_.x,_.y)}for(var b=0,w=p.length;b<w;b++){var S=p[b],M=S[0]+t,E=S[1]+t,T=S[2]+t;a.push(M,E,T),c+=3}}return r.setIndex(a),r.setAttribute("position",new ha(o,3)),r.setAttribute("normal",new ha(s,3)),r.setAttribute("uv",new ha(u,2)),r}return(0,x.Z)(n,[{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}]),n}(Ma);var wc=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,y.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(u+l,Math.PI),d=0,h=[],f=new kr,p=new kr,m=[],v=[],g=[],x=[],_=0;_<=a;_++){var b=[],w=_/a,S=0;0==_&&0==u?S=.5/i:_==a&&c==Math.PI&&(S=-.5/i);for(var M=0;M<=i;M++){var E=M/i;f.x=-r*Math.cos(o+E*s)*Math.sin(u+w*l),f.y=r*Math.cos(u+w*l),f.z=r*Math.sin(o+E*s)*Math.sin(u+w*l),v.push(f.x,f.y,f.z),p.copy(f).normalize(),g.push(p.x,p.y,p.z),x.push(E+S,1-w),b.push(d++)}h.push(b)}for(var T=0;T<a;T++)for(var k=0;k<i;k++){var C=h[T][k+1],A=h[T][k],P=h[T+1][k],O=h[T+1][k+1];(0!==T||u>0)&&m.push(C,A,O),(T!==a-1||c<Math.PI)&&m.push(A,P,O)}return e.setIndex(m),e.setAttribute("position",new ha(v,3)),e.setAttribute("normal",new ha(g,3)),e.setAttribute("uv",new ha(x,2)),e}return(0,x.Z)(n)}(Ma),Sc=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,y.Z)(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,a,o,r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,x.Z)(n)}(Rl),Mc=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,y.Z)(this,n);var a=i.font;if(!a||!a.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),l(r,new Ma);var o=a.generateShapes(e,i.size);return i.depth=void 0!==i.height?i.height:50,void 0===i.bevelThickness&&(i.bevelThickness=10),void 0===i.bevelSize&&(i.bevelSize=8),void 0===i.bevelEnabled&&(i.bevelEnabled=!1),(r=t.call(this,o,i)).type="TextGeometry",r}return(0,x.Z)(n)}(pc),Ec=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,y.Z)(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var u=[],l=[],c=[],d=[],h=new kr,f=new kr,p=new kr,m=0;m<=a;m++)for(var v=0;v<=o;v++){var g=v/o*s,x=m/a*Math.PI*2;f.x=(r+i*Math.cos(x))*Math.cos(g),f.y=(r+i*Math.cos(x))*Math.sin(g),f.z=i*Math.sin(x),l.push(f.x,f.y,f.z),h.x=r*Math.cos(g),h.y=r*Math.sin(g),p.subVectors(f,h).normalize(),c.push(p.x,p.y,p.z),d.push(v/o),d.push(m/a)}for(var _=1;_<=a;_++)for(var b=1;b<=o;b++){var w=(o+1)*_+b-1,S=(o+1)*(_-1)+b-1,M=(o+1)*(_-1)+b,E=(o+1)*_+b;u.push(w,S,E),u.push(S,M,E)}return e.setIndex(u),e.setAttribute("position",new ha(l,3)),e.setAttribute("normal",new ha(c,3)),e.setAttribute("uv",new ha(d,2)),e}return(0,x.Z)(n)}(Ma),Tc=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,y.Z)(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:u},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],d=[],h=[],f=new kr,p=new kr,m=new kr,v=new kr,g=new kr,x=new kr,_=new kr,b=0;b<=a;++b){var w=b/a*s*Math.PI*2;R(w,s,u,r,m),R(w+.01,s,u,r,v),x.subVectors(v,m),_.addVectors(v,m),g.crossVectors(x,_),_.crossVectors(g,x),g.normalize(),_.normalize();for(var S=0;S<=o;++S){var M=S/o*Math.PI*2,E=-i*Math.cos(M),T=i*Math.sin(M);f.x=m.x+(E*_.x+T*g.x),f.y=m.y+(E*_.y+T*g.y),f.z=m.z+(E*_.z+T*g.z),c.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),d.push(p.x,p.y,p.z),h.push(b/a),h.push(S/o)}}for(var k=1;k<=a;k++)for(var C=1;C<=o;C++){var A=(o+1)*(k-1)+(C-1),P=(o+1)*k+(C-1),O=(o+1)*k+C,L=(o+1)*(k-1)+C;l.push(A,P,L),l.push(P,O,L)}function R(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(l),e.setAttribute("position",new ha(c,3)),e.setAttribute("normal",new ha(d,3)),e.setAttribute("uv",new ha(h,2)),e}return(0,x.Z)(n)}(Ma),kc=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,y.Z)(this,n),(r=t.call(this)).type="TubeGeometry",r.parameters={path:e,tubularSegments:i,radius:a,radialSegments:o,closed:s};var u=e.computeFrenetFrames(i,s);r.tangents=u.tangents,r.normals=u.normals,r.binormals=u.binormals;var l=new kr,c=new kr,d=new mr,h=new kr,f=[],p=[],m=[],v=[];function g(){for(var e=0;e<i;e++)x(e);x(!1===s?i:0),b(),_()}function x(t){h=e.getPointAt(t/i,h);for(var n=u.normals[t],r=u.binormals[t],s=0;s<=o;s++){var d=s/o*Math.PI*2,m=Math.sin(d),v=-Math.cos(d);c.x=v*n.x+m*r.x,c.y=v*n.y+m*r.y,c.z=v*n.z+m*r.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=h.x+a*c.x,l.y=h.y+a*c.y,l.z=h.z+a*c.z,f.push(l.x,l.y,l.z)}}function _(){for(var e=1;e<=i;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;v.push(n,r,s),v.push(r,a,s)}}function b(){for(var e=0;e<=i;e++)for(var t=0;t<=o;t++)d.x=e/i,d.y=t/o,m.push(d.x,d.y)}return g(),r.setIndex(v),r.setAttribute("position",new ha(f,3)),r.setAttribute("normal",new ha(p,3)),r.setAttribute("uv",new ha(m,2)),r}return(0,x.Z)(n,[{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}]),n}(Ma),Cc=function(e){m(n,e);var t=v(n);function n(e){var r;if((0,y.Z)(this,n),(r=t.call(this)).type="WireframeGeometry",!0===e.isGeometry)return console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),l(r);var i=[],a=[0,0],o={},s=new kr;if(null!==e.index){var u=e.attributes.position,c=e.index,d=e.groups;0===d.length&&(d=[{start:0,count:c.count,materialIndex:0}]);for(var h=0,f=d.length;h<f;++h)for(var p=d[h],m=p.start,v=m,g=m+p.count;v<g;v+=3)for(var x=0;x<3;x++){var _=c.getX(v+x),b=c.getX(v+(x+1)%3);a[0]=Math.min(_,b),a[1]=Math.max(_,b);var w=a[0]+","+a[1];void 0===o[w]&&(o[w]={index1:a[0],index2:a[1]})}for(var S in o){var M=o[S];s.fromBufferAttribute(u,M.index1),i.push(s.x,s.y,s.z),s.fromBufferAttribute(u,M.index2),i.push(s.x,s.y,s.z)}}else for(var E=e.attributes.position,T=0,k=E.count/3;T<k;T++)for(var C=0;C<3;C++){var A=3*T+C;s.fromBufferAttribute(E,A),i.push(s.x,s.y,s.z);var P=3*T+(C+1)%3;s.fromBufferAttribute(E,P),i.push(s.x,s.y,s.z)}return r.setAttribute("position",new ha(i,3)),r}return(0,x.Z)(n)}(Ma),Ac=Object.freeze({__proto__:null,BoxGeometry:Ha,BoxBufferGeometry:Ha,CircleGeometry:Pl,CircleBufferGeometry:Pl,ConeGeometry:Ll,ConeBufferGeometry:Ll,CylinderGeometry:Ol,CylinderBufferGeometry:Ol,DodecahedronGeometry:Dl,DodecahedronBufferGeometry:Dl,EdgesGeometry:zl,ExtrudeGeometry:pc,ExtrudeBufferGeometry:pc,IcosahedronGeometry:vc,IcosahedronBufferGeometry:vc,LatheGeometry:gc,LatheBufferGeometry:gc,OctahedronGeometry:yc,OctahedronBufferGeometry:yc,ParametricGeometry:xc,ParametricBufferGeometry:xc,PlaneGeometry:oo,PlaneBufferGeometry:oo,PolyhedronGeometry:Rl,PolyhedronBufferGeometry:Rl,RingGeometry:_c,RingBufferGeometry:_c,ShapeGeometry:bc,ShapeBufferGeometry:bc,SphereGeometry:wc,SphereBufferGeometry:wc,TetrahedronGeometry:Sc,TetrahedronBufferGeometry:Sc,TextGeometry:Mc,TextBufferGeometry:Mc,TorusGeometry:Ec,TorusBufferGeometry:Ec,TorusKnotGeometry:Tc,TorusKnotBufferGeometry:Tc,TubeGeometry:kc,TubeBufferGeometry:kc,WireframeGeometry:Cc}),Pc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new Ji(0),r.transparent=!0,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(Wi);Pc.prototype.isShadowMaterial=!0;var Oc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return(0,x.Z)(n)}(Xa);Oc.prototype.isRawShaderMaterial=!0;var Lc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new Ji(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ji(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Tn,r.normalScale=new mr(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.vertexTangents=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}]),n}(Wi);Lc.prototype.isMeshStandardMaterial=!0;var Rc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoat=0,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new mr(1,1),r.clearcoatNormalMap=null,r.reflectivity=.5,Object.defineProperty((0,u.Z)(r),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=ur(2.5*(e-1)/(e+1),0,1)}}),r.sheen=null,r.transmission=0,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new Ji(1,1,1),r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ji).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}]),n}(Lc);Rc.prototype.isMeshPhysicalMaterial=!0;var Dc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new Ji(16777215),r.specular=new Ji(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ji(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Tn,r.normalScale=new mr(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=pe,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}]),n}(Wi);Dc.prototype.isMeshPhongMaterial=!0;var Ic=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new Ji(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ji(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Tn,r.normalScale=new mr(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}]),n}(Wi);Ic.prototype.isMeshToonMaterial=!0;var Fc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Tn,r.normalScale=new mr(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}]),n}(Wi);Fc.prototype.isMeshNormalMaterial=!0;var Nc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new Ji(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Ji(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=pe,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}]),n}(Wi);Nc.prototype.isMeshLambertMaterial=!0;var jc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new Ji(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Tn,r.normalScale=new mr(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}]),n}(Wi);jc.prototype.isMeshMatcapMaterial=!0;var zc=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(ul);zc.prototype.isLineDashedMaterial=!0;var Uc=Object.freeze({__proto__:null,ShadowMaterial:Pc,SpriteMaterial:Cu,RawShaderMaterial:Oc,ShaderMaterial:Xa,PointsMaterial:xl,MeshPhysicalMaterial:Rc,MeshStandardMaterial:Lc,MeshPhongMaterial:Dc,MeshToonMaterial:Ic,MeshNormalMaterial:Fc,MeshLambertMaterial:Nc,MeshDepthMaterial:su,MeshDistanceMaterial:uu,MeshBasicMaterial:ea,MeshMatcapMaterial:jc,LineDashedMaterial:zc,LineBasicMaterial:ul,Material:Wi}),Bc={arraySlice:function(e,t,n){return Bc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],d=[],h=0;h<u.times.length;++h){var f=u.times[h]*i;if(!(f<n||f>=r)){c.push(u.times[h]);for(var p=0;p<l;++p)d.push(u.values[h*l+p])}}0!==c.length&&(u.times=Bc.convertArray(c,u.times.constructor),u.values=Bc.convertArray(d,u.values.constructor),o.push(u))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var d=r.times.length-1,h=void 0;if(a<=r.times[0]){var f=s,p=u-s;h=Bc.arraySlice(r.values,f,p)}else if(a>=r.times[d]){var m=d*u+s,v=m+u-s;h=Bc.arraySlice(r.values,m,v)}else{var g=r.createInterpolant(),y=s,x=u-s;g.evaluate(a),h=Bc.arraySlice(g.resultBuffer,y,x)}"quaternion"===i&&(new Tr).fromArray(h).normalize().conjugate().toArray(h);for(var _=o.times.length,b=0;b<_;++b){var w=b*c+l;if("quaternion"===i)Tr.multiplyQuaternionsFlat(o.values,w,h,0,o.values,w);else for(var S=c-2*l,M=0;M<S;++M)o.values[w+M]-=h[M]}},s=0;s<i;++s)o(s);return e.blendMode=hn,e}},Vc=function(){function e(t,n,r,i){(0,y.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,x.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();Vc.prototype.beforeStart_=Vc.prototype.copySampleValue_,Vc.prototype.afterEnd_=Vc.prototype.copySampleValue_;var Gc=function(e){m(n,e);var t=v(n);function n(e,r,i,a){var o;return(0,y.Z)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:un,endingEnd:un},o}return(0,x.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case ln:i=e,o=2*t-n;break;case cn:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ln:a=e,s=2*n-t;break;case cn:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,v=-d*m+2*d*p-d*f,g=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,x=h*m-h*p,_=0;_!==o;++_)i[_]=v*a[l+_]+g*a[u+_]+y*a[s+_]+x*a[c+_];return i}}]),n}(Vc),Hc=function(e){m(n,e);var t=v(n);function n(e,r,i,a){return(0,y.Z)(this,n),t.call(this,e,r,i,a)}return(0,x.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,d=0;d!==o;++d)i[d]=a[u+d]*c+a[s+d]*l;return i}}]),n}(Vc),Zc=function(e){m(n,e);var t=v(n);function n(e,r,i,a){return(0,y.Z)(this,n),t.call(this,e,r,i,a)}return(0,x.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Vc),Wc=function(){function e(t,n,r,i){if((0,y.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Bc.convertArray(n,this.TimeBufferType),this.values=Bc.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,x.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Zc(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Hc(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Gc(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case an:t=this.InterpolantFactoryMethodDiscrete;break;case on:t=this.InterpolantFactoryMethodLinear;break;case sn:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return an;case this.InterpolantFactoryMethodLinear:return on;case this.InterpolantFactoryMethodSmooth:return sn}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Bc.arraySlice(n,i,a),this.values=Bc.arraySlice(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Bc.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Bc.arraySlice(this.times),t=Bc.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===sn,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,d=l+n,h=0;h!==n;++h){var f=t[l+h];if(f!==t[c+h]||f!==t[d+h]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,m=a*n,v=0;v!==n;++v)t[m+v]=t[p+v]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,x=0;x!==n;++x)t[y+x]=t[g+x];++a}return a!==e.length?(this.times=Bc.arraySlice(e,0,a),this.values=Bc.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Bc.arraySlice(this.times,0),t=Bc.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Bc.convertArray(e.times,Array),values:Bc.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Wc.prototype.TimeBufferType=Float32Array,Wc.prototype.ValueBufferType=Float32Array,Wc.prototype.DefaultInterpolation=on;var qc=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n)}(Wc);qc.prototype.ValueTypeName="bool",qc.prototype.ValueBufferType=Array,qc.prototype.DefaultInterpolation=an,qc.prototype.InterpolantFactoryMethodLinear=void 0,qc.prototype.InterpolantFactoryMethodSmooth=void 0;var Xc=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n)}(Wc);Xc.prototype.ValueTypeName="color";var Kc=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n)}(Wc);Kc.prototype.ValueTypeName="number";var Yc=function(e){m(n,e);var t=v(n);function n(e,r,i,a){return(0,y.Z)(this,n),t.call(this,e,r,i,a)}return(0,x.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)Tr.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(Vc),Qc=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Yc(this.times,this.values,this.getValueSize(),e)}}]),n}(Wc);Qc.prototype.ValueTypeName="quaternion",Qc.prototype.DefaultInterpolation=on,Qc.prototype.InterpolantFactoryMethodSmooth=void 0;var $c=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n)}(Wc);$c.prototype.ValueTypeName="string",$c.prototype.ValueBufferType=Array,$c.prototype.DefaultInterpolation=an,$c.prototype.InterpolantFactoryMethodLinear=void 0,$c.prototype.InterpolantFactoryMethodSmooth=void 0;var Jc=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.apply(this,arguments)}return(0,x.Z)(n)}(Wc);Jc.prototype.ValueTypeName="vector";var ed=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dn;(0,y.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=sr(),this.duration<0&&this.resetDuration()}return(0,x.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(td(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Wc.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=Bc.getKeyframeOrder(s);s=Bc.sortedArray(s,1,l),u=Bc.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Kc(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var d=[];for(var h in r)d.push(this.CreateFromMorphTargetSequence(h,r[h],t,n));return d}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Bc.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var d={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)d[c[h].morphTargets[f]]=-1;for(var p in d){for(var m=[],v=[],g=0;g!==c[h].morphTargets.length;++g){var y=c[h];m.push(y.time),v.push(y.morphTarget===p?1:0)}r.push(new Kc(".morphTargetInfluence["+p+"]",m,v))}s=d.length*(a||1)}else{var x=".bones["+t[l].name+"]";n(Jc,x+".position",c,"pos",r),n(Qc,x+".quaternion",c,"rot",r),n(Jc,x+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function td(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kc;case"vector":case"vector2":case"vector3":case"vector4":return Jc;case"color":return Xc;case"quaternion":return Qc;case"bool":case"boolean":return qc;case"string":return $c}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Bc.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var nd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},rd=(0,x.Z)((function e(t,n,r){(0,y.Z)(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),id=new rd,ad=function(){function e(t){(0,y.Z)(this,e),this.manager=void 0!==t?t:id,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,x.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),od={},sd=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=nd.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===od[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);d="blob"===h?new Blob([f.buffer],{type:u}):f.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(c,u);break;case"json":d=JSON.parse(c);break;default:d=c}setTimeout((function(){t&&t(d),i.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){r&&r(g),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{for(var v in od[e]=[],od[e].push({onLoad:t,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,r=od[e];if(delete od[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),nd.add(e,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=od[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=od[e];delete od[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=od[e];delete od[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(v,this.requestHeader[v]);o.send(null)}return i.manager.itemStart(e),o}od[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(ad),ud=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new sd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=ed.parse(e[n]);t.push(r)}return t}}]),n}(ad),ld=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new kl,s=new sd(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=je),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,d=e.length;c<d;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=je),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(ad),cd=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=nd.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),nd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(ad),dd=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new Ja,a=new cd(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(ad),hd=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Ju,o=new sd(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Oe,a.wrapT=void 0!==n.wrapT?n.wrapT:Oe,a.magFilter=void 0!==n.magFilter?n.magFilter:je,a.minFilter=void 0!==n.minFilter?n.minFilter:je,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Be),1===n.mipmapCount&&(a.minFilter=je),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}]),n}(ad),fd=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new _r,a=new cd(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?nt:rt,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(ad),pd=function(){function e(){(0,y.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,x.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new mr:new kr);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new kr,r=[],i=[],a=[],o=new kr,s=new ii,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new kr),r[u].normalize()}i[0]=new kr,a[0]=new kr;var c=Number.MAX_VALUE,d=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var m=Math.acos(ur(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,m))}a[p].crossVectors(r[p],i[p])}if(!0===t){var v=Math.acos(ur(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],v*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),md=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,y.Z)(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new mr,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=u-this.aY;s=d*l-h*c+this.aX,u=d*c+h*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(pd);md.prototype.isEllipseCurve=!0;var vd=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o,s){var u;return(0,y.Z)(this,n),(u=t.call(this,e,r,i,i,a,o,s)).type="ArcCurve",u}return(0,x.Z)(n)}(md);function gd(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}vd.prototype.isArcCurve=!0;var yd=new kr,xd=new gd,_d=new gd,bd=new gd,wd=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,y.Z)(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===l&&u===o-1&&(u=o-2,l=1),this.closed||u>0?t=a[(u-1)%o]:(yd.subVectors(a[0],a[1]).add(a[0]),t=yd);var c=a[u%o],d=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(yd.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=yd),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,f=Math.pow(t.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(n),h);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),xd.initNonuniformCatmullRom(t.x,c.x,d.x,n.x,f,p,m),_d.initNonuniformCatmullRom(t.y,c.y,d.y,n.y,f,p,m),bd.initNonuniformCatmullRom(t.z,c.z,d.z,n.z,f,p,m)}else"catmullrom"===this.curveType&&(xd.initCatmullRom(t.x,c.x,d.x,n.x,this.tension),_d.initCatmullRom(t.y,c.y,d.y,n.y,this.tension),bd.initCatmullRom(t.z,c.z,d.z,n.z,this.tension));return i.set(xd.calc(l),_d.calc(l),bd.calc(l)),i}},{key:"copy",value:function(e){h(c(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){h(c(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new kr).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(pd);function Sd(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Md(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Ed(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}wd.prototype.isCatmullRomCurve3=!0;var Td=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new mr;return(0,y.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Ed(e,r.x,i.x,a.x,o.x),Ed(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(pd);Td.prototype.isCubicBezierCurve=!0;var kd=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new kr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new kr;return(0,y.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Ed(e,r.x,i.x,a.x,o.x),Ed(e,r.y,i.y,a.y,o.y),Ed(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(pd);kd.prototype.isCubicBezierCurve3=!0;var Cd=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr;return(0,y.Z)(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new mr;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(pd);Cd.prototype.isLineCurve=!0;var Ad=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr;return(0,y.Z)(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(pd),Pd=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mr;return(0,y.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Md(e,r.x,i.x,a.x),Md(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(pd);Pd.prototype.isQuadraticBezierCurve=!0;var Od=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new kr;return(0,y.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Md(e,r.x,i.x,a.x),Md(e,r.y,i.y,a.y),Md(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(pd);Od.prototype.isQuadraticBezierCurve3=!0;var Ld=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,y.Z)(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return(0,x.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(Sd(o,s.x,u.x,l.x,c.x),Sd(o,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){h(c(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){h(c(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new mr).fromArray(i))}return this}}]),n}(pd);Ld.prototype.isSplineCurve=!0;var Rd=Object.freeze({__proto__:null,ArcCurve:vd,CatmullRomCurve3:wd,CubicBezierCurve:Td,CubicBezierCurve3:kd,EllipseCurve:md,LineCurve:Cd,LineCurve3:Ad,QuadraticBezierCurve:Pd,QuadraticBezierCurve3:Od,SplineCurve:Ld}),Dd=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,x.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Cd(t,e))}},{key:"getPoint",value:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){h(c(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){h(c(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new Rd[i.type]).fromJSON(i))}return this}}]),n}(pd),Id=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new mr,e&&r.setFromPoints(e),r}return(0,x.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Cd(this.currentPoint.clone(),new mr(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new Pd(this.currentPoint.clone(),new mr(e,t),new mr(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new Td(this.currentPoint.clone(),new mr(e,t),new mr(n,r),new mr(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Ld(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new md(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return h(c(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Dd),Fd=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this,e)).uuid=sr(),r.type="Shape",r.holes=[],r}return(0,x.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){h(c(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){h(c(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new Id).fromJSON(i))}return this}}]),n}(Id),Nd=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,y.Z)(this,n),(r=t.call(this)).type="Light",r.color=new Ji(e),r.intensity=i,r}return(0,x.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Ai);Nd.prototype.isLight=!0;var jd=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return(0,y.Z)(this,n),(a=t.call(this,e,i)).type="HemisphereLight",a.position.copy(Ai.DefaultUp),a.updateMatrix(),a.groundColor=new Ji(r),a}return(0,x.Z)(n,[{key:"copy",value:function(e){return Nd.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(Nd);jd.prototype.isHemisphereLight=!0;var zd=new ii,Ud=new kr,Bd=new kr,Vd=function(){function e(t){(0,y.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new mr(512,512),this.map=null,this.mapPass=null,this.matrix=new ii,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ro,this._frameExtents=new mr(1,1),this._viewportCount=1,this._viewports=[new wr(0,0,1,1)]}return(0,x.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Ud.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ud),Bd.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Bd),t.updateMatrixWorld(),zd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Gd=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this,new Ya(50,1,.5,500))).focus=1,e}return(0,x.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*or*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),h(c(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Vd);Gd.prototype.isSpotLightShadow=!0;var Hd=function(e){m(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(Ai.DefaultUp),i.updateMatrix(),i.target=new Ai,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.shadow=new Gd,i}return(0,x.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Nd);Hd.prototype.isSpotLight=!0;var Zd=new ii,Wd=new kr,qd=new kr,Xd=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this,new Ya(90,1,.5,500)))._frameExtents=new mr(4,2),e._viewportCount=6,e._viewports=[new wr(2,1,1,1),new wr(0,1,1,1),new wr(3,1,1,1),new wr(1,1,1,1),new wr(3,0,1,1),new wr(1,0,1,1)],e._cubeDirections=[new kr(1,0,0),new kr(-1,0,0),new kr(0,0,1),new kr(0,0,-1),new kr(0,1,0),new kr(0,-1,0)],e._cubeUps=[new kr(0,1,0),new kr(0,1,0),new kr(0,1,0),new kr(0,1,0),new kr(0,0,1),new kr(0,0,-1)],e}return(0,x.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Wd.setFromMatrixPosition(e.matrixWorld),n.position.copy(Wd),qd.copy(n.position),qd.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(qd),n.updateMatrixWorld(),r.makeTranslation(-Wd.x,-Wd.y,-Wd.z),Zd.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zd)}}]),n}(Vd);Xd.prototype.isPointLightShadow=!0;var Kd=function(e){m(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=a,i.decay=o,i.shadow=new Xd,i}return(0,x.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Nd);Kd.prototype.isPointLight=!0;var Yd=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,y.Z)(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return(0,x.Z)(n,[{key:"copy",value:function(e,t){return h(c(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Ka);Yd.prototype.isOrthographicCamera=!0;var Qd=function(e){m(n,e);var t=v(n);function n(){return(0,y.Z)(this,n),t.call(this,new Yd(-5,5,5,-5,.5,500))}return(0,x.Z)(n)}(Vd);Qd.prototype.isDirectionalLightShadow=!0;var $d=function(e){m(n,e);var t=v(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(Ai.DefaultUp),i.updateMatrix(),i.target=new Ai,i.shadow=new Qd,i}return(0,x.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Nd);$d.prototype.isDirectionalLight=!0;var Jd=function(e){m(n,e);var t=v(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return(0,x.Z)(n)}(Nd);Jd.prototype.isAmbientLight=!0;var eh=function(e){m(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,y.Z)(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=a,i.height=o,i}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(Nd);eh.prototype.isRectAreaLight=!0;var th=function(){function e(){(0,y.Z)(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new kr)}return(0,x.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();th.prototype.isSphericalHarmonics3=!0;var nh=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new th,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,y.Z)(this,n),(e=t.call(this,void 0,i)).sh=r,e}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Nd);nh.prototype.isLightProbe=!0;var rh=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this,e)).textures={},r}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new sd(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new Uc[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new Ji).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new Ji).setHex(a.value);break;case"v2":r.uniforms[i].value=(new mr).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new kr).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new wr).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new gr).fromArray(a.value);break;case"m4":r.uniforms[i].value=(new ii).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new mr).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new mr).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}]),n}(ad),ih=function(){function e(){(0,y.Z)(this,e)}return(0,x.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}(),ah=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(Ma);ah.prototype.isInstancedBufferGeometry=!0;var oh=function(e){m(n,e);var t=v(n);function n(e,r,i,a){var o;return(0,y.Z)(this,n),"number"===typeof i&&(a=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=t.call(this,e,r,i)).meshPerAttribute=a||1,o}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=h(c(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(ra);oh.prototype.isInstancedBufferAttribute=!0;var sh=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new sd(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=va(i.type,a),s=new Mu(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new ah:new Ma,a=e.data.index;if(void 0!==a){var o=va(a.type,a.array);i.setIndex(new ra(o,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){var d=r(e.data,l.data);c=new Tu(d,l.itemSize,l.offset,l.normalized)}else{var h=va(l.type,l.array);c=new(l.isInstancedBufferAttribute?oh:ra)(h,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),void 0!==l.usage&&c.setUsage(l.usage),void 0!==l.updateRange&&(c.updateRange.offset=l.updateRange.offset,c.updateRange.count=l.updateRange.count),i.setAttribute(u,c)}var f=e.data.morphAttributes;if(f)for(var p in f){for(var m=f[p],v=[],g=0,y=m.length;g<y;g++){var x=m[g],_=void 0;if(x.isInterleavedBufferAttribute){var b=r(e.data,x.data);_=new Tu(b,x.itemSize,x.offset,x.normalized)}else{var w=va(x.type,x.array);_=new ra(w,x.itemSize,x.normalized)}void 0!==x.name&&(_.name=x.name),v.push(_)}i.morphAttributes[p]=v}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var S=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==S)for(var M=0,E=S.length;M!==E;++M){var T=S[M];i.addGroup(T.start,T.count,T.materialIndex)}var k=e.data.boundingSphere;if(void 0!==k){var C=new kr;void 0!==k.center&&C.fromArray(k.center),i.boundingSphere=new Kr(C,k.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(ad),uh=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?ih.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new sd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,s,n),l=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,l),void 0!==t){var c=!1;for(var d in a)if(a[d]instanceof HTMLImageElement){c=!0;break}!1===c&&t(u)}return u}},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Fd).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new nl).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n,r={};if(void 0!==e)for(var i=new sh,a=0,o=e.length;a<o;a++){var s=void 0,u=e[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ac[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":s=new Ac[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ac[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ac[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ac[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ac[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ac[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ac[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ac[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ac[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Ac[u.type]((new Rd[u.path.type]).fromJSON(u.path),u.tubularSegments,u.radius,u.radialSegments,u.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ac[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ac[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var l=0,c=u.shapes.length;l<c;l++){var d=t[u.shapes[l]];n.push(d)}s=new Ac[u.type](n,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var h=0,f=u.shapes.length;h<f;h++){var p=t[u.shapes[h]];n.push(p)}var m=u.options.extrudePath;void 0!==m&&(u.options.extrudePath=(new Rd[m.type]).fromJSON(m)),s=new Ac[u.type](n,u.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(u);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),r[u.uuid]=s}return r}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new rh;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=ed.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:va(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new rd(t);(n=new cd(o)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var d=0,h=c.length;d<h;d++){var f=a(c[d]);null!==f&&(f instanceof HTMLImageElement?i[l.uuid].push(f):i[l.uuid].push(new Ju(f.data,f.width,f.height)))}}else{var p=a(l.url);null!==p&&(i[l.uuid]=p)}}}return i}},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0,u=t[o.image];Array.isArray(u)?(s=new Ja(u),6===u.length&&(s.needsUpdate=!0)):(s=u&&u.data?new Ju(u.data,u.width,u.height):new _r(u),u&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,lh)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],ch),s.wrapT=n(o.wrap[1],ch)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,dh)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,dh)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r}},{key:"parseObject",value:function(e,t,n,r){var i,a,o;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Su,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new Ji(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new wu(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new bu(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Ya(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Yd(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Jd(e.color,e.intensity);break;case"DirectionalLight":i=new $d(e.color,e.intensity);break;case"PointLight":i=new Kd(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new eh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Hd(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new jd(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new nh).fromJSON(e);break;case"SkinnedMesh":a=s(e.geometry),o=u(e.material),i=new Qu(a,o),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":a=s(e.geometry),o=u(e.material),i=new Va(a,o);break;case"InstancedMesh":a=s(e.geometry),o=u(e.material);var l=e.count,c=e.instanceMatrix,d=e.instanceColor;(i=new sl(a,o,l)).instanceMatrix=new ra(new Float32Array(c.array),16),void 0!==d&&(i.instanceColor=new ra(new Float32Array(d.array),d.itemSize));break;case"LOD":i=new Zu;break;case"Line":i=new pl(s(e.geometry),u(e.material));break;case"LineLoop":i=new yl(s(e.geometry),u(e.material));break;case"LineSegments":i=new gl(s(e.geometry),u(e.material));break;case"PointCloud":case"Points":i=new Ml(s(e.geometry),u(e.material));break;case"Sprite":i=new Bu(u(e.material));break;case"Group":i=new pu;break;case"Bone":i=new $u;break;default:i=new Ai}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var h=e.children,f=0;f<h.length;f++)i.add(this.parseObject(h[f],t,n,r));if(void 0!==e.animations)for(var p=e.animations,m=0;m<p.length;m++){var v=p[m];i.animations.push(r[v])}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);for(var g=e.levels,y=0;y<g.length;y++){var x=g[y],_=i.getObjectByProperty("uuid",x.object);void 0!==_&&i.addLevel(_,x.distance)}}return i}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"setTexturePath",value:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}]),n}(ad),lh={UVMapping:Se,CubeReflectionMapping:Me,CubeRefractionMapping:Ee,EquirectangularReflectionMapping:Te,EquirectangularRefractionMapping:ke,CubeUVReflectionMapping:Ce,CubeUVRefractionMapping:Ae},ch={RepeatWrapping:Pe,ClampToEdgeWrapping:Oe,MirroredRepeatWrapping:Le},dh={NearestFilter:Re,NearestMipmapNearestFilter:De,NearestMipmapLinearFilter:Fe,LinearFilter:je,LinearMipmapNearestFilter:ze,LinearMipmapLinearFilter:Be},hh=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,x.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=nd.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){nd.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(ad);hh.prototype.isImageBitmapLoader=!0;var fh=function(){function e(){(0,y.Z)(this,e),this.type="ShapePath",this.color=new Ji,this.subPaths=[],this.currentPath=null}return(0,x.Z)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new Id,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Fd;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i,a,o,s=dc.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var l=[];if(1===u.length)return a=u[0],(o=new Fd).curves=a.curves,l.push(o),l;var c=!s(u[0].getPoints());c=e?!c:c;var d,h,f=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=u.length;g<y;g++)i=s(d=(a=u[g]).getPoints()),(i=e?!i:i)?(!c&&p[v]&&v++,p[v]={s:new Fd,p:d},p[v].s.curves=a.curves,c&&v++,m[v]=[]):m[v].push({h:a,p:d[0]});if(!p[0])return n(u);if(p.length>1){for(var x=!1,_=[],b=0,w=p.length;b<w;b++)f[b]=[];for(var S=0,M=p.length;S<M;S++)for(var E=m[S],T=0;T<E.length;T++){for(var k=E[T],C=!0,A=0;A<p.length;A++)r(k.p,p[A].p)&&(S!==A&&_.push({froms:S,tos:A,hole:T}),C?(C=!1,f[A].push(k)):x=!0);C&&f[S].push(k)}_.length>0&&(x||(m=f))}for(var P=0,O=p.length;P<O;P++){o=p[P].s,l.push(o);for(var L=0,R=(h=m[P]).length;L<R;L++)o.holes.push(h[L].h)}return l}}]),e}(),ph=function(){function e(t){(0,y.Z)(this,e),this.type="Font",this.data=t}return(0,x.Z)(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=mh(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}]),e}();function mh(e,t,n){for(var r=Array.from(e),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=a;else{var d=vh(c,i,s,u,n);s+=d.offsetX,o.push(d.path)}}return o}function vh(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,u,l,c,d,h,f,p=new fh;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*t+n,s=m[v++]*t+r,p.moveTo(o,s);break;case"l":o=m[v++]*t+n,s=m[v++]*t+r,p.lineTo(o,s);break;case"q":u=m[v++]*t+n,l=m[v++]*t+r,c=m[v++]*t+n,d=m[v++]*t+r,p.quadraticCurveTo(c,d,u,l);break;case"b":u=m[v++]*t+n,l=m[v++]*t+r,c=m[v++]*t+n,d=m[v++]*t+r,h=m[v++]*t+n,f=m[v++]*t+r,p.bezierCurveTo(c,d,h,f,u,l)}}return{offsetX:a.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}ph.prototype.isFont=!0;var gh,yh=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new sd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)}},{key:"parse",value:function(e){return new ph(e)}}]),n}(ad),xh={getContext:function(){return void 0===gh&&(gh=new(window.AudioContext||window.webkitAudioContext)),gh},setContext:function(e){gh=e}},_h=function(e){m(n,e);var t=v(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,x.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new sd(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);xh.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}]),n}(ad),bh=function(e){m(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,y.Z)(this,n),i=t.call(this,void 0,a);var o=(new Ji).set(e),s=(new Ji).set(r),u=new kr(o.r,o.g,o.b),l=new kr(s.r,s.g,s.b),c=Math.sqrt(Math.PI),d=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(d),i}return(0,x.Z)(n)}(nh);bh.prototype.isHemisphereLightProbe=!0;var wh=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,y.Z)(this,n),r=t.call(this,void 0,i);var a=(new Ji).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,x.Z)(n)}(nh);wh.prototype.isAmbientLightProbe=!0;var Sh=new ii,Mh=new ii,Eh=function(){function e(){(0,y.Z)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ya,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ya,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,x.Z)(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),a=t.eyeSep/2,o=a*t.near/t.focus,s=t.near*Math.tan(ar*t.fov*.5)/t.zoom;Mh.elements[12]=-a,Sh.elements[12]=a,n=-s*t.aspect+o,r=s*t.aspect+o,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-o,r=s*t.aspect-o,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Mh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Sh)}}]),e}(),Th=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,y.Z)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,x.Z)(e,[{key:"start",value:function(){this.startTime=kh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=kh();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function kh(){return("undefined"===typeof performance?Date:performance).now()}var Ch=new kr,Ah=new Tr,Ph=new kr,Oh=new kr,Lh=function(e){m(n,e);var t=v(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).type="AudioListener",e.context=xh.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new Th,e}return(0,x.Z)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){h(c(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ch,Ah,Ph),Oh.set(0,0,-1).applyQuaternion(Ah),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ch.x,i),t.positionY.linearRampToValueAtTime(Ch.y,i),t.positionZ.linearRampToValueAtTime(Ch.z,i),t.forwardX.linearRampToValueAtTime(Oh.x,i),t.forwardY.linearRampToValueAtTime(Oh.y,i),t.forwardZ.linearRampToValueAtTime(Oh.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Ch.x,Ch.y,Ch.z),t.setOrientation(Oh.x,Oh.y,Oh.z,r.x,r.y,r.z)}}]),n}(Ai),Rh=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,x.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Ai),Dh=new kr,Ih=new Tr,Fh=new kr,Nh=new kr,jh=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return(0,x.Z)(n,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(h(c(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Dh,Ih,Fh),Nh.set(0,0,1).applyQuaternion(Ih);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Dh.x,r),t.positionY.linearRampToValueAtTime(Dh.y,r),t.positionZ.linearRampToValueAtTime(Dh.z,r),t.orientationX.linearRampToValueAtTime(Nh.x,r),t.orientationY.linearRampToValueAtTime(Nh.y,r),t.orientationZ.linearRampToValueAtTime(Nh.z,r)}else t.setPosition(Dh.x,Dh.y,Dh.z),t.setOrientation(Nh.x,Nh.y,Nh.z)}}}]),n}(Rh),zh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,y.Z)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,x.Z)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),Uh=function(){function e(t,n,r){var i,a,o;switch((0,y.Z)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,x.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){Tr.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;Tr.multiplyQuaternionsFlat(e,a,e,t,e,n),Tr.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),Bh="\\[\\]\\.:\\/",Vh=new RegExp("[\\[\\]\\.:\\/]","g"),Gh="[^\\[\\]\\.:\\/]",Hh="[^"+Bh.replace("\\.","")+"]",Zh=/((?:WC+[\/:])*)/.source.replace("WC",Gh),Wh=/(WCOD+)?/.source.replace("WCOD",Hh),qh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Gh),Xh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Gh),Kh=new RegExp("^"+Zh+Wh+qh+Xh+"$"),Yh=["material","materials","bones"],Qh=function(){function e(t,n,r){(0,y.Z)(this,e);var i=r||$h.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,x.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),$h=function(){function e(t,n,r){(0,y.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,x.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Vh,"")}},{key:"parseTrackName",value:function(e){var t=Kh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Yh.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();$h.Composite=Qh,$h.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$h.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$h.prototype.GetterByBindingType=[$h.prototype._getValue_direct,$h.prototype._getValue_array,$h.prototype._getValue_arrayElement,$h.prototype._getValue_toArray],$h.prototype.SetterByBindingTypeAndVersioning=[[$h.prototype._setValue_direct,$h.prototype._setValue_direct_setNeedsUpdate,$h.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$h.prototype._setValue_array,$h.prototype._setValue_array_setNeedsUpdate,$h.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$h.prototype._setValue_arrayElement,$h.prototype._setValue_arrayElement_setNeedsUpdate,$h.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$h.prototype._setValue_fromArray,$h.prototype._setValue_fromArray_setNeedsUpdate,$h.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Jh=function(){function e(){(0,y.Z)(this,e),this.uuid=sr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,x.Z)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var d=arguments[l],h=d.uuid,f=t[h];if(void 0===f){f=s++,t[h]=f,e.push(d);for(var p=0,m=a;p!==m;++p)i[p].push(new $h(d,n[p],r[p]))}else if(f<u){o=e[f];var v=--u,g=e[v];t[g.uuid]=f,e[f]=g,t[h]=v,e[v]=d;for(var y=0,x=a;y!==x;++y){var _=i[y],b=_[v],w=_[f];_[f]=b,void 0===w&&(w=new $h(d,n[y],r[y])),_[v]=w}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,d=e[c];t[d.uuid]=l,e[l]=d,t[u]=c,e[c]=s;for(var h=0,f=r;h!==f;++h){var p=n[h],m=p[c],v=p[l];p[l]=m,p[c]=v}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var d=--i,h=e[d],f=--a,p=e[f];t[h.uuid]=c,e[c]=h,t[p.uuid]=d,e[d]=p,e.pop();for(var m=0,v=r;m!==v;++m){var g=n[m],y=g[d],x=g[f];g[c]=y,g[d]=x,g.pop()}}else{var _=--a,b=e[_];_>0&&(t[b.uuid]=c),e[c]=b,e.pop();for(var w=0,S=r;w!==S;++w){var M=n[w];M[c]=M[_],M.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var d=l,h=s.length;d!==h;++d){var f=s[d];c[d]=new $h(f,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}();Jh.prototype.isAnimationObjectGroup=!0;var ef=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,y.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:un,endingEnd:un},l=0;l!==o;++l){var c=a[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nn,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,x.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===hn)for(var c=0,d=u.length;c!==d;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);else for(var h=0,f=u.length;h!==f;++h)u[h].evaluate(o),l[h].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===rn;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===tn){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=ln,r.endingEnd=ln):(r.endingStart=e?this.zeroSlopeAtStart?ln:un:cn,r.endingEnd=t?this.zeroSlopeAtEnd?ln:un:cn)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),tf=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,x.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var d=r[c],h=d.name,f=l[h];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new Uh($h.create(n,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,s,h),a[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Hc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?ed.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:dn),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new ef(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?ed.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(tr);tf.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var nf=function(){function e(t){(0,y.Z)(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return(0,x.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),rf=function(e){m(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,y.Z)(this,n),(i=t.call(this,e,r)).meshPerAttribute=a||1,i}return(0,x.Z)(n,[{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=h(c(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=h(c(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Mu);rf.prototype.isInstancedInterleavedBuffer=!0;var af=function(){function e(t,n,r,i,a){(0,y.Z)(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return(0,x.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}();af.prototype.isGLBufferAttribute=!0;var of=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,y.Z)(this,e),this.ray=new ri(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new mi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,x.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return uf(e,this,n,t),n.sort(sf),n}},{key:"intersectObjects",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)uf(e[r],this,n,t);return n.sort(sf),n}}]),e}();function sf(e,t){return e.distance-t.distance}function uf(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)uf(i[a],t,n,!0)}var lf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,y.Z)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,x.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ur(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),cf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,y.Z)(this,e),this.radius=t,this.theta=n,this.y=r,this}return(0,x.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),df=new mr,hf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mr(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mr(-1/0,-1/0);(0,y.Z)(this,e),this.min=t,this.max=n}return(0,x.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=df.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new mr),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new mr),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new mr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new mr),t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return df.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();hf.prototype.isBox2=!0;var ff=new kr,pf=new kr,mf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr;(0,y.Z)(this,e),this.start=t,this.end=n}return(0,x.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new kr),e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new kr),e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new kr),this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){ff.subVectors(e,this.start),pf.subVectors(this.end,this.start);var n=pf.dot(pf),r=pf.dot(ff)/n;return t&&(r=ur(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new kr),this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),vf=function(e){m(n,e);var t=v(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this)).material=e,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return(0,x.Z)(n)}(Ai);vf.prototype.isImmediateRenderObject=!0;var gf=new kr,yf=function(e){m(n,e);var t=v(n);function n(e,r){var i;(0,y.Z)(this,n),(i=t.call(this)).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r;for(var a=new Ma,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,u=1;s<32;s++,u++){var l=s/32*Math.PI*2,c=u/32*Math.PI*2;o.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}a.setAttribute("position",new ha(o,3));var d=new ul({fog:!1,toneMapped:!1});return i.cone=new gl(a,d),i.add(i.cone),i.update(),i}return(0,x.Z)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),gf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Ai),xf=new kr,_f=new ii,bf=new ii,wf=function(e){m(n,e);var t=v(n);function n(e){var r;(0,y.Z)(this,n);for(var i=Sf(e),a=new Ma,o=[],s=[],u=new Ji(0,0,1),l=new Ji(0,1,0),c=0;c<i.length;c++){var d=i[c];d.parent&&d.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}a.setAttribute("position",new ha(o,3)),a.setAttribute("color",new ha(s,3));var h=new ul({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,h)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,x.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");bf.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(_f.multiplyMatrices(bf,s.matrixWorld),xf.setFromMatrixPosition(_f),i.setXYZ(o,xf.x,xf.y,xf.z),_f.multiplyMatrices(bf,s.parent.matrixWorld),xf.setFromMatrixPosition(_f),i.setXYZ(o+1,xf.x,xf.y,xf.z),o+=2)}r.getAttribute("position").needsUpdate=!0,h(c(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(gl);function Sf(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Sf(e.children[n]));return t}var Mf=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;(0,y.Z)(this,n);var o=new wc(r,4,2),s=new ea({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.light.updateMatrixWorld(),a.color=i,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,x.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Va),Ef=new kr,Tf=new Ji,kf=new Ji,Cf=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;(0,y.Z)(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i;var o=new yc(r);o.rotateY(.5*Math.PI),a.material=new ea({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),u=new Float32Array(3*s.count);return o.setAttribute("color",new ra(u,3)),a.add(new Va(o,a.material)),a.update(),a}return(0,x.Z)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Tf.copy(this.light.color),kf.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Tf:kf;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Ef.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Ai),Af=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,y.Z)(this,n),a=new Ji(a),o=new Ji(o);for(var s=i/2,u=r/i,l=r/2,c=[],d=[],h=0,f=0,p=-l;h<=i;h++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var m=h===s?a:o;m.toArray(d,f),f+=3,m.toArray(d,f),f+=3,m.toArray(d,f),f+=3,m.toArray(d,f),f+=3}var v=new Ma;v.setAttribute("position",new ha(c,3)),v.setAttribute("color",new ha(d,3));var g=new ul({vertexColors:!0,toneMapped:!1});return(e=t.call(this,v,g)).type="GridHelper",e}return(0,x.Z)(n)}(gl),Pf=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,y.Z)(this,n),s=new Ji(s),u=new Ji(u);for(var l=[],c=[],d=0;d<=i;d++){var h=d/i*(2*Math.PI),f=Math.sin(h)*r,p=Math.cos(h)*r;l.push(0,0,0),l.push(f,0,p);var m=1&d?s:u;c.push(m.r,m.g,m.b),c.push(m.r,m.g,m.b)}for(var v=0;v<=a;v++)for(var g=1&v?s:u,x=r-r/a*v,_=0;_<o;_++){var b=_/o*(2*Math.PI),w=Math.sin(b)*x,S=Math.cos(b)*x;l.push(w,0,S),c.push(g.r,g.g,g.b),b=(_+1)/o*(2*Math.PI),w=Math.sin(b)*x,S=Math.cos(b)*x,l.push(w,0,S),c.push(g.r,g.g,g.b)}var M=new Ma;M.setAttribute("position",new ha(l,3)),M.setAttribute("color",new ha(c,3));var E=new ul({vertexColors:!0,toneMapped:!1});return(e=t.call(this,M,E)).type="PolarGridHelper",e}return(0,x.Z)(n)}(gl),Of=new kr,Lf=new kr,Rf=new kr,Df=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;(0,y.Z)(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,void 0===r&&(r=1);var o=new Ma;o.setAttribute("position",new ha([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new ul({fog:!1,toneMapped:!1});return a.lightPlane=new pl(o,s),a.add(a.lightPlane),(o=new Ma).setAttribute("position",new ha([0,0,0,0,0,1],3)),a.targetLine=new pl(o,s),a.add(a.targetLine),a.update(),a}return(0,x.Z)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){Of.setFromMatrixPosition(this.light.matrixWorld),Lf.setFromMatrixPosition(this.light.target.matrixWorld),Rf.subVectors(Lf,Of),this.lightPlane.lookAt(Lf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lf),this.targetLine.scale.z=Rf.length()}}]),n}(Ai),If=new kr,Ff=new Ka,Nf=function(e){m(n,e);var t=v(n);function n(e){var r;(0,y.Z)(this,n);var i=new Ma,a=new ul({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],u={},l=new Ji(16755200),c=new Ji(16711680),d=new Ji(43775),h=new Ji(16777215),f=new Ji(3355443);function p(e,t,n){m(e,n),m(t,n)}function m(e,t){o.push(0,0,0),s.push(t.r,t.g,t.b),void 0===u[e]&&(u[e]=[]),u[e].push(o.length/3-1)}return p("n1","n2",l),p("n2","n4",l),p("n4","n3",l),p("n3","n1",l),p("f1","f2",l),p("f2","f4",l),p("f4","f3",l),p("f3","f1",l),p("n1","f1",l),p("n2","f2",l),p("n3","f3",l),p("n4","f4",l),p("p","n1",c),p("p","n2",c),p("p","n3",c),p("p","n4",c),p("u1","u2",d),p("u2","u3",d),p("u3","u1",d),p("c","t",h),p("p","c",f),p("cn1","cn2",f),p("cn3","cn4",f),p("cf1","cf2",f),p("cf3","cf4",f),i.setAttribute("position",new ha(o,3)),i.setAttribute("color",new ha(s,3)),(r=t.call(this,i,a)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=u,r.update(),r}return(0,x.Z)(n,[{key:"update",value:function(){var e=this.geometry,t=this.pointMap;Ff.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),jf("c",t,e,Ff,0,0,-1),jf("t",t,e,Ff,0,0,1),jf("n1",t,e,Ff,-1,-1,-1),jf("n2",t,e,Ff,1,-1,-1),jf("n3",t,e,Ff,-1,1,-1),jf("n4",t,e,Ff,1,1,-1),jf("f1",t,e,Ff,-1,-1,1),jf("f2",t,e,Ff,1,-1,1),jf("f3",t,e,Ff,-1,1,1),jf("f4",t,e,Ff,1,1,1),jf("u1",t,e,Ff,.7,1.1,-1),jf("u2",t,e,Ff,-.7,1.1,-1),jf("u3",t,e,Ff,0,2,-1),jf("cf1",t,e,Ff,-1,0,1),jf("cf2",t,e,Ff,1,0,1),jf("cf3",t,e,Ff,0,-1,1),jf("cf4",t,e,Ff,0,1,1),jf("cn1",t,e,Ff,-1,0,-1),jf("cn2",t,e,Ff,1,0,-1),jf("cn3",t,e,Ff,0,-1,-1),jf("cn4",t,e,Ff,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(gl);function jf(e,t,n,r,i,a,o){If.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],If.x,If.y,If.z)}var zf,Uf,Bf=new Pr,Vf=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,y.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new Ma;return s.setIndex(new ra(a,1)),s.setAttribute("position",new ra(o,3)),(r=t.call(this,s,new ul({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return(0,x.Z)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Bf.setFromObject(this.object),!Bf.isEmpty()){var t=Bf.min,n=Bf.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e){return gl.prototype.copy.call(this,e),this.object=e.object,this}}]),n}(gl),Gf=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,y.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ma;return s.setIndex(new ra(a,1)),s.setAttribute("position",new ha(o,3)),(r=t.call(this,s,new ul({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return(0,x.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),h(c(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(gl),Hf=function(e){m(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,y.Z)(this,n);var o=a,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],u=new Ma;u.setAttribute("position",new ha(s,3)),u.computeBoundingSphere(),(r=t.call(this,u,new ul({color:o,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var l=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],c=new Ma;return c.setAttribute("position",new ha(l,3)),c.computeBoundingSphere(),r.add(new Va(c,new ea({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return(0,x.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?D:R,this.lookAt(this.plane.normal),h(c(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(pl),Zf=new kr,Wf=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kr(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kr(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return(0,y.Z)(this,n),(e=t.call(this)).type="ArrowHelper",void 0===zf&&((zf=new Ma).setAttribute("position",new ha([0,0,0,0,1,0],3)),(Uf=new Ol(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new pl(zf,new ul({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Va(Uf,new ea({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,s,u),e}return(0,x.Z)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Zf.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Zf,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return h(c(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(Ai),qf=function(e){m(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,y.Z)(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Ma;o.setAttribute("position",new ha(i,3)),o.setAttribute("color",new ha(a,3));var s=new ul({vertexColors:!0,toneMapped:!1});return(e=t.call(this,o,s)).type="AxesHelper",e}return(0,x.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(gl),Xf=new Float32Array(1),Kf=new Int32Array(Xf.buffer),Yf=function(){function e(){(0,y.Z)(this,e)}return(0,x.Z)(e,null,[{key:"toHalfFloat",value:function(e){Xf[0]=e;var t=Kf[0],n=t>>16&32768,r=t>>12&2047,i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t):i<113?n|=((r|=2048)>>114-i)+(r>>113-i&1):(n|=i-112<<10|r>>1,n+=1&r)}}]),e}(),Qf=Math.pow(2,8),$f=[.125,.215,.35,.446,.526,.582],Jf=5+$f.length,ep=20,tp=(g={},(0,a.Z)(g,vn,0),(0,a.Z)(g,gn,1),(0,a.Z)(g,xn,2),(0,a.Z)(g,bn,3),(0,a.Z)(g,wn,4),(0,a.Z)(g,Sn,5),(0,a.Z)(g,yn,6),g),np=new ea({side:D,depthWrite:!1,depthTest:!1}),rp=new Va(new Ha,np),ip=new Yd,ap=gp(),op=ap._lodPlanes,sp=ap._sizeLods,up=ap._sigmas,lp=new Ji,cp=null,dp=(1+Math.sqrt(5))/2,hp=1/dp,fp=[new kr(1,1,1),new kr(-1,1,1),new kr(1,1,-1),new kr(-1,1,-1),new kr(0,dp,hp),new kr(0,dp,-hp),new kr(hp,0,dp),new kr(-hp,0,dp),new kr(dp,hp,0),new kr(-dp,hp,0)];function pp(e){var t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-n)),(n+128)/255}var mp=function(){function e(t){(0,y.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new kr(0,1,0);return new Oc({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:tp[vn]},outputEncoding:{value:tp[vn]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:j,depthTest:!1,depthWrite:!1})}(ep),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,x.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;cp=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=bp(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=_p(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<op.length;e++)op[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(cp),e.scissorTest=!1,xp(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){cp=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:Re,minFilter:Re,generateMipmaps:!1,type:Ge,format:ot,encoding:vp(e)?e.encoding:xn,depthBuffer:!1},n=yp(t);return n.depthBuffer=!e,this._pingPongRenderTarget=yp(t),n}},{key:"_compileMaterial",value:function(e){var t=new Va(op[0],e);this._renderer.compile(t,ip)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new Ya(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.outputEncoding,c=s.toneMapping;s.getClearColor(lp),s.toneMapping=ge,s.outputEncoding=vn,s.autoClear=!1;var d=!1,h=e.background;if(h){if(h.isColor){np.color.copy(h).convertSRGBToLinear(),e.background=null;var f=pp(np.color);np.opacity=f,d=!0}}else{np.color.copy(lp).convertSRGBToLinear();var p=pp(np.color);np.opacity=p,d=!0}for(var m=0;m<6;m++){var v=m%3;0==v?(i.up.set(0,a[m],0),i.lookAt(o[m],0,0)):1==v?(i.up.set(0,0,a[m]),i.lookAt(0,o[m],0)):(i.up.set(0,a[m],0),i.lookAt(0,0,o[m])),xp(r,v*Qf,m>2?Qf:0,Qf,Qf),s.setRenderTarget(r),d&&s.render(rp,i),s.render(e,i)}s.toneMapping=c,s.outputEncoding=l,s.autoClear=u}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=bp()):null==this._equirectShader&&(this._equirectShader=_p());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new Va(op[0],r),a=r.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=tp[e.encoding],a.outputEncoding.value=tp[t.texture.encoding],xp(t,0,0,3*Qf,2*Qf),n.setRenderTarget(t),n.render(i,ip)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<Jf;r++){var i=Math.sqrt(up[r]*up[r]-up[r-1]*up[r-1]),a=fp[(r-1)%fp.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Va(op[r],u),c=u.uniforms,d=sp[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):ep;p>ep&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(ep));for(var m=[],v=0,g=0;g<ep;++g){var y=g/f,x=Math.exp(-y*y/2);m.push(x),0==g?v+=x:g<p&&(v+=2*x)}for(var _=0;_<m.length;_++)m[_]=m[_]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o),c.dTheta.value=h,c.mipInt.value=8-n,c.inputEncoding.value=tp[e.texture.encoding],c.outputEncoding.value=tp[e.texture.encoding];var b=sp[r];xp(t,3*Math.max(0,Qf-2*b),(0===r?0:2*Qf)+2*b*(r>4?r-8+4:0),3*b,2*b),s.setRenderTarget(t),s.render(l,ip)}}]),e}();function vp(e){return void 0!==e&&e.type===Ge&&(e.encoding===vn||e.encoding===gn||e.encoding===yn)}function gp(){for(var e=[],t=[],n=[],r=8,i=0;i<Jf;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>4?o=$f[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],d=new Float32Array(108),h=new Float32Array(72),f=new Float32Array(36),p=0;p<6;p++){var m=p%3*2/3-1,v=p>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];d.set(g,18*p),h.set(c,12*p);var y=[p,p,p,p,p,p];f.set(y,6*p)}var x=new Ma;x.setAttribute("position",new ra(d,3)),x.setAttribute("uv",new ra(h,2)),x.setAttribute("faceIndex",new ra(f,1)),e.push(x),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function yp(e){var t=new Sr(3*Qf,3*Qf,e);return t.texture.mapping=Ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function xp(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function _p(){var e=new mr(1,1);return new Oc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:tp[vn]},outputEncoding:{value:tp[vn]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:j,depthTest:!1,depthWrite:!1})}function bp(){return new Oc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:tp[vn]},outputEncoding:{value:tp[vn]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:j,depthTest:!1,depthWrite:!1})}var wp=0,Sp=1,Mp=0,Ep=1,Tp=2;function kp(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Cp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Ap(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ml(e,t)}function Pp(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Bu(e)}function Op(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ml(e,t)}function Lp(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new xl(e)}function Rp(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new xl(e)}function Dp(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new xl(e)}function Ip(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new kr(e,t,n)}function Fp(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new ra(e,t).setUsage(Zn)}function Np(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ia(e,t)}function jp(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new aa(e,t)}function zp(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new oa(e,t)}function Up(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new sa(e,t)}function Bp(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ua(e,t)}function Vp(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new la(e,t)}function Gp(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ca(e,t)}function Hp(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ha(e,t)}function Zp(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new fa(e,t)}function Wp(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new qf(e)}function qp(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Vf(e,t)}function Xp(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new gl(new zl(e.geometry),new ul({color:void 0!==t?t:16777215}))}function Kp(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new gl(new Cc(e.geometry),new ul({color:void 0!==t?t:16777215}))}function Yp(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new sd(e)}function Qp(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new hd(e)}function $p(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new eo(e,n)}function Jp(){console.error("THREE.CanvasRenderer has been removed")}function em(){console.error("THREE.JSONLoader has been removed.")}pd.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(pd.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Id.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Af.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},wf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ad.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ih.extractUrlBase(e)},ad.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},hf.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},hf.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},hf.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},hf.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Pr.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Pr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Pr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Pr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Pr.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Kr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ro.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},mf.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},gr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},gr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},gr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},gr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},gr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},gr.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},ii.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},ii.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},ii.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new kr).setFromMatrixColumn(this,3)},ii.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},ii.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},ii.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},ii.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},ii.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},ii.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},ii.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},ii.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},ii.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},ii.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},ii.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},ii.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},ii.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},ii.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},ii.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},ii.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Ri.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Tr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Tr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ri.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},ri.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},ri.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Hi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Hi.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Hi.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Hi.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Hi.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Hi.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Hi.getBarycoord(e,t,n,r,i)},Hi.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Hi.getNormal(e,t,n,r)},Fd.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Fd.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new pc(this,e)},Fd.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new bc(this,e)},mr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},mr.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},mr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},kr.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},kr.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},kr.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},kr.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},kr.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},kr.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},kr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},kr.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},kr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},wr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},wr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ai.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Ai.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ai.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Ai.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ai.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Ai.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Va.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Va.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),fn},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Qu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Ya.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Nd.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ra.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Zn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Zn)}}}),ra.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Zn:Hn),this},ra.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ra.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ma.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},Ma.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new ra(arguments[1],arguments[2])))},Ma.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},Ma.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Ma.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Ma.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},Ma.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Ma.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Mu.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Zn:Hn),this},Mu.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},pc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},pc.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},pc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Su.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},nf.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Wi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ji}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===F}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Xa.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),xu.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},xu.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},xu.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},xu.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},xu.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},xu.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},xu.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},xu.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},xu.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},xu.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},xu.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},xu.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},xu.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},xu.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},xu.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},xu.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},xu.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},xu.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},xu.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},xu.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},xu.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},xu.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},xu.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},xu.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},xu.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(xu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?gn:vn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(lu.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Sr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Rh.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new _h).load(e,(function(e){t.setBuffer(e)})),this},zh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},$a.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},$a.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},yr.crossOrigin=void 0,yr.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new fd;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},yr.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new dd;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},yr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},yr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var tm={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function nm(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:w}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=w)},30907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},97326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},15861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},15671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},43144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},37762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(40181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},87462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},63366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},89611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},70885:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(40181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},42982:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(30907);var i=n(40181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},40181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(30907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{scaleBand:function(){return Uh},scaleDiverging:function(){return Ay},scaleDivergingLog:function(){return Py},scaleDivergingPow:function(){return Ly},scaleDivergingSqrt:function(){return Ry},scaleDivergingSymlog:function(){return Oy},scaleIdentity:function(){return um},scaleImplicit:function(){return jh},scaleLinear:function(){return sm},scaleLog:function(){return gm},scaleOrdinal:function(){return zh},scalePoint:function(){return Vh},scalePow:function(){return Tm},scaleQuantile:function(){return Nm},scaleQuantize:function(){return jm},scaleRadial:function(){return Pm},scaleSequential:function(){return by},scaleSequentialLog:function(){return wy},scaleSequentialPow:function(){return My},scaleSequentialQuantile:function(){return Ty},scaleSequentialSqrt:function(){return Ey},scaleSequentialSymlog:function(){return Sy},scaleSqrt:function(){return km},scaleSymlog:function(){return bm},scaleThreshold:function(){return zm},scaleTime:function(){return gy},scaleUtc:function(){return yy},tickFormat:function(){return am}});var t=n(72791),r=n(54164),i=n(4942),a=n(70885),o=n(31201),s=n(48218),u=n(48991),l=n(91490),c=n(42982),d=n(15861),h=n(87757),f=n.n(h);function p(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function m(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function v(){}var g=.7,y=1/g,x="\\s*([+-]?\\d+)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w=/^#([0-9a-f]{3,8})$/,S=new RegExp("^rgb\\("+[x,x,x]+"\\)$"),M=new RegExp("^rgb\\("+[b,b,b]+"\\)$"),E=new RegExp("^rgba\\("+[x,x,x,_]+"\\)$"),T=new RegExp("^rgba\\("+[b,b,b,_]+"\\)$"),k=new RegExp("^hsl\\("+[_,b,b]+"\\)$"),C=new RegExp("^hsla\\("+[_,b,b,_]+"\\)$"),A={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function P(){return this.rgb().formatHex()}function O(){return this.rgb().formatRgb()}function L(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=w.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?R(t):3===n?new N(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?D(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?D(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=S.exec(e))?new N(t[1],t[2],t[3],1):(t=M.exec(e))?new N(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=E.exec(e))?D(t[1],t[2],t[3],t[4]):(t=T.exec(e))?D(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=k.exec(e))?B(t[1],t[2]/100,t[3]/100,1):(t=C.exec(e))?B(t[1],t[2]/100,t[3]/100,t[4]):A.hasOwnProperty(e)?R(A[e]):"transparent"===e?new N(NaN,NaN,NaN,0):null}function R(e){return new N(e>>16&255,e>>8&255,255&e,1)}function D(e,t,n,r){return r<=0&&(e=t=n=NaN),new N(e,t,n,r)}function I(e){return e instanceof v||(e=L(e)),e?new N((e=e.rgb()).r,e.g,e.b,e.opacity):new N}function F(e,t,n,r){return 1===arguments.length?I(e):new N(e,t,n,null==r?1:r)}function N(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function j(){return"#"+U(this.r)+U(this.g)+U(this.b)}function z(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function U(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function B(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new G(e,t,n,r)}function V(e){if(e instanceof G)return new G(e.h,e.s,e.l,e.opacity);if(e instanceof v||(e=L(e)),!e)return new G;if(e instanceof G)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new G(o,s,u,e.opacity)}function G(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function H(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Z(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}p(v,L,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:P,formatHex:P,formatHsl:function(){return V(this).formatHsl()},formatRgb:O,toString:O}),p(N,F,m(v,{brighter:function(e){return e=null==e?y:Math.pow(y,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?g:Math.pow(g,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:z,toString:z})),p(G,(function(e,t,n,r){return 1===arguments.length?V(e):new G(e,t,n,null==r?1:r)}),m(v,{brighter:function(e){return e=null==e?y:Math.pow(y,e),new G(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?g:Math.pow(g,e),new G(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new N(H(e>=240?e-240:e+120,i,r),H(e,i,r),H(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var W=function(e){return function(){return e}};function q(e,t){return function(n){return e+n*t}}function X(e){return 1===(e=+e)?K:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):W(isNaN(t)?n:t)}}function K(e,t){var n=t-e;return n?q(e,n):W(isNaN(e)?t:e)}(function e(t){var n=X(t);function r(e,t){var r=n((e=F(e)).r,(t=F(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=K(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r})(1);function Y(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=F(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}var Q=Y((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return Z((n-r/t)*t,o,i,a,s)}})),$=(Y((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Z((n-r/t)*t,i,a,o,s)}})),new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map((function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}))),J=function(e){return Q(e[e.length-1])}($),ee=n(34585),te=n(80184),ne=new o.GeoCoordinates(47.58,-122.34),re=new l.VectorTileDataSource({authenticationCode:"J0IJdYzKDYS3nHVDDEWETIqK3nAcxqW42vz7xeSq61M"});function ie(){var e=(0,t.useRef)(null),n=(0,t.useState)(null),r=(0,a.Z)(n,2),i=r[0],h=r[1];(0,t.useEffect)((function(){if(e.current){var t=new u.MapView({theme:"./resources/berlin_tilezen_effects_streets.json",canvas:e.current,target:ne,zoomLevel:12.4,tilt:40,heading:0,projection:o.sphereProjection,decoderUrl:"decoder.bundle.js"});t.addDataSource(re);var n=function(){return t.resize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",n),h(t);var r=new s.MapControls(t),i=new s.MapControlsUI(r);return e.current.parentElement.appendChild(i.domElement),function(){return window.removeEventListener("resize",n)}}}),[]),function(e){(0,t.useEffect)((function(){e&&(0,d.Z)(f().mark((function t(){var n,r,i,a,o,s,u,d;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./data/policeBoundaries.json");case 2:if(200===(n=t.sent).status){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.json();case 7:return r=t.sent,t.next=10,fetch("./data/NeighbourhoodCount2021.json");case 10:if(200===(i=t.sent).status){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,i.json();case 15:return a=t.sent,o=Math.max.apply(Math,(0,c.Z)(Object.values(a))),r.features.forEach((function(e){var t=a[e.properties.NEIGHBORHOOD]/o||0;e.properties.color=J(t),e.properties.height=2700*t})),s=new l.GeoJsonDataProvider("Seattle",r),u=new l.VectorTileDataSource({dataProvider:s,styleSetName:"geojson",gatherFeatureAttributes:!0,addGroundPlane:!1}),t.next=22,e.addDataSource(u);case 22:d={styles:{geojson:[{when:"$geometryType == 'polygon'",technique:"extruded-polygon",renderOrder:1e3,maxZoomLevel:15,attr:{color:["get","color"],transparent:!0,opacity:.6,constantHeight:!0,boundaryWalls:!1}}]}},u.setTheme(d),e.update();case 25:case"end":return t.stop()}}),t)})))()}),[e])}(i),function(e){(0,t.useEffect)((function(){e&&(0,d.Z)(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new l.VectorTileDataSource({baseUrl:"https://xyz.api.here.com/hub/spaces/f2RCpkYJ/tile/web",apiFormat:l.APIFormat.XYZSpace,authenticationCode:"APvHpXqZRCCJxzzPCQ55ZwA",styleSetName:"geojson"}),t.next=3,e.addDataSource(n);case 3:r={styles:{geojson:[{when:"$geometryType == 'point'",technique:"circles",renderOrder:1e4,minZoomLevel:15,attr:{transparent:!0,opacity:.7,color:"#0080ff",size:["+",["*",["get","count"],.09],10]}}]}},n.setTheme(r),e.update();case 6:case"end":return t.stop()}}),t)})))()}),[e])}(i);var p=function(e){var n=(0,t.useRef)();return[(0,t.useCallback)((function(e){n.current={x:e.pageX,y:e.pageY}}),[]),(0,t.useCallback)((function(t){if(e&&n.current&&!(Math.pow(n.current.x-t.pageX,2)+Math.pow(n.current.y-t.pageY,2)>10)){var r=e.intersectMapObjects(t.pageX,t.pageY).filter((function(e){var t;return"Seattle"===(null===(t=e.userData)||void 0===t?void 0:t.$layer)}));if(r.length){var i=r[0].userData.target,a={target:new o.GeoCoordinates(i[1],i[0]),tilt:40,heading:0,distance:4e3},s=e.camera.position.clone(),l=e.camera.quaternion.clone(),c=u.MapViewUtils.getCameraPositionFromTargetCoordinates(a.target,a.distance,a.heading,a.tilt,e.projection),d=u.MapViewUtils.getCameraRotationAtTarget(e.projection,a.target,a.heading,a.tilt),h=Date.now(),f=new ee.CatmullRomCurve3([s,c]);e.addEventListener(u.MapViewEventNames.Render,(function t(){var n=(Date.now()-h)/1e3;n>=1&&(n=1,e.endAnimation(),e.removeEventListener(u.MapViewEventNames.Render,t)),e.camera.position.copy(f.getPoint(n));var r=l.clone().slerp(d,n);e.camera.quaternion.copy(r),e.camera.updateMatrixWorld(!0)})),e.beginAnimation()}}}),[e])]}(i),m=(0,a.Z)(p,2),v=m[0],g=m[1];return(0,te.jsx)("div",{className:"canvas-container",children:(0,te.jsx)("canvas",{ref:e,onPointerDown:v,onPointerUp:g})})}var ae=n(14642),oe=n(59737);function se(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ue=n(63366),le=n(87462),ce=n(52007),de=n.n(ce),he=n(28182),fe=n(90767),pe=n(12065),me=n(86481),ve=n(10551),ge=n(42071),ye=n(89683),xe=n(23031),_e=n(97326),be=n(89611);function we(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,be.Z)(e,t)}var Se=t.createContext(null);function Me(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function Ee(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Te(e,n,r){var i=Me(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var u=o in n,l=o in i,c=n[o],d=(0,t.isValidElement)(c)&&!c.props.in;!l||u&&!d?l||!u||d?l&&u&&(0,t.isValidElement)(c)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:Ee(s,"exit",e),enter:Ee(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:Ee(s,"exit",e),enter:Ee(s,"enter",e)})}})),a}var ke=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Ce=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind((0,_e.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}we(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,Me(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Ee(e,"appear",r),enter:Ee(e,"enter",r),exit:Ee(e,"exit",r)})}))):Te(e,a,o),firstRender:!1}},r.handleExited=function(e,t){var n=Me(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,le.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,ue.Z)(e,["component","childFactory"]),a=this.state.contextValue,o=ke(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(Se.Provider,{value:a},o):t.createElement(Se.Provider,{value:a},t.createElement(n,i,o))},n}(t.Component);Ce.propTypes={},Ce.defaultProps={component:"div",childFactory:function(e){return e}};var Ae=Ce,Pe=(n(78677),n(91672)),Oe=n(62110),Le=n.n(Oe),Re=n(95438),De=n(84804),Ie=n(96567),Fe=(0,Pe.w)((function(e,n){var r=e.styles,i=(0,De.O)([r],void 0,(0,t.useContext)(Pe.T)),a=(0,t.useRef)();return(0,t.useLayoutEffect)((function(){var e=n.key+"-global",t=new Ie.m({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,r],function(){t.flush()}}),[n]),(0,t.useLayoutEffect)((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&(0,Re.M)(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function Ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,De.O)(t)}var je=function(){var e=Ne.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var ze=function(e){var n=e.className,r=e.classes,i=e.pulsate,o=void 0!==i&&i,s=e.rippleX,u=e.rippleY,l=e.rippleSize,c=e.in,d=e.onExited,h=e.timeout,f=t.useState(!1),p=(0,a.Z)(f,2),m=p[0],v=p[1],g=(0,he.Z)(n,r.ripple,r.rippleVisible,o&&r.ripplePulsate),y={width:l,height:l,top:-l/2+u,left:-l/2+s},x=(0,he.Z)(r.child,m&&r.childLeaving,o&&r.childPulsate);return c||m||v(!0),t.useEffect((function(){if(!c&&null!=d){var e=setTimeout(d,h);return function(){clearTimeout(e)}}}),[d,c,h]),(0,te.jsx)("span",{className:g,style:y,children:(0,te.jsx)("span",{className:x})})},Ue=n(30208);var Be,Ve,Ge,He,Ze,We,qe,Xe,Ke=(0,Ue.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ye=["center","classes","className"],Qe=je(Ze||(Ze=Be||(Be=se(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),$e=je(We||(We=Ve||(Ve=se(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Je=je(qe||(qe=Ge||(Ge=se(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),et=(0,me.ZP)("span",{name:"MuiTouchRipple",slot:"Root",skipSx:!0})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),tt=(0,me.ZP)(ze,{name:"MuiTouchRipple",slot:"Ripple"})(Xe||(Xe=He||(He=se(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Ke.rippleVisible,Qe,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ke.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Ke.child,Ke.childLeaving,$e,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ke.childPulsate,Je,(function(e){return e.theme.transitions.easing.easeInOut})),nt=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiTouchRipple"}),i=r.center,o=void 0!==i&&i,s=r.classes,u=void 0===s?{}:s,l=r.className,d=(0,ue.Z)(r,Ye),h=t.useState([]),f=(0,a.Z)(h,2),p=f[0],m=f[1],v=t.useRef(0),g=t.useRef(null);t.useEffect((function(){g.current&&(g.current(),g.current=null)}),[p]);var y=t.useRef(!1),x=t.useRef(null),_=t.useRef(null),b=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(x.current)}}),[]);var w=t.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;m((function(e){return[].concat((0,c.Z)(e),[(0,te.jsx)(tt,{classes:{ripple:(0,he.Z)(u.ripple,Ke.ripple),rippleVisible:(0,he.Z)(u.rippleVisible,Ke.rippleVisible),ripplePulsate:(0,he.Z)(u.ripplePulsate,Ke.ripplePulsate),child:(0,he.Z)(u.child,Ke.child),childLeaving:(0,he.Z)(u.childLeaving,Ke.childLeaving),childPulsate:(0,he.Z)(u.childPulsate,Ke.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},v.current)])})),v.current+=1,g.current=a}),[u]),S=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,s=void 0===a?o||t.pulsate:a,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&y.current)y.current=!1;else{"touchstart"===e.type&&(y.current=!0);var c,d,h,f=l?null:b.current,p=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),d=Math.round(p.height/2);else{var m=e.touches?e.touches[0]:e,v=m.clientX,g=m.clientY;c=Math.round(v-p.left),d=Math.round(g-p.top)}if(s)(h=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(h+=1);else{var S=2*Math.max(Math.abs((f?f.clientWidth:0)-c),c)+2,M=2*Math.max(Math.abs((f?f.clientHeight:0)-d),d)+2;h=Math.sqrt(Math.pow(S,2)+Math.pow(M,2))}e.touches?null===_.current&&(_.current=function(){w({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})},x.current=setTimeout((function(){_.current&&(_.current(),_.current=null)}),80)):w({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})}}),[o,w]),M=t.useCallback((function(){S({},{pulsate:!0})}),[S]),E=t.useCallback((function(e,t){if(clearTimeout(x.current),"touchend"===e.type&&_.current)return _.current(),_.current=null,void(x.current=setTimeout((function(){E(e,t)})));_.current=null,m((function(e){return e.length>0?e.slice(1):e})),g.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:M,start:S,stop:E}}),[M,S,E]),(0,te.jsx)(et,(0,le.Z)({className:(0,he.Z)(u.root,Ke.root,l),ref:b},d,{children:(0,te.jsx)(Ae,{component:null,exit:!0,children:p})}))})),rt=nt,it=n(95159);function at(e){return(0,it.Z)("MuiButtonBase",e)}var ot,st=(0,Ue.Z)("MuiButtonBase",["root","disabled","focusVisible"]),ut=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"],lt=(0,me.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((ot={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,i.Z)(ot,"&.".concat(st.disabled),{pointerEvents:"none",cursor:"default"}),(0,i.Z)(ot,"@media print",{colorAdjust:"exact"}),ot)),ct=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiButtonBase"}),i=r.action,o=r.centerRipple,s=void 0!==o&&o,u=r.children,l=r.className,c=r.component,d=void 0===c?"button":c,h=r.disabled,f=void 0!==h&&h,p=r.disableRipple,m=void 0!==p&&p,v=r.disableTouchRipple,g=void 0!==v&&v,y=r.focusRipple,x=void 0!==y&&y,_=r.LinkComponent,b=void 0===_?"a":_,w=r.onBlur,S=r.onClick,M=r.onContextMenu,E=r.onDragLeave,T=r.onFocus,k=r.onFocusVisible,C=r.onKeyDown,A=r.onKeyUp,P=r.onMouseDown,O=r.onMouseLeave,L=r.onMouseUp,R=r.onTouchEnd,D=r.onTouchMove,I=r.onTouchStart,F=r.tabIndex,N=void 0===F?0:F,j=r.TouchRippleProps,z=r.type,U=(0,ue.Z)(r,ut),B=t.useRef(null),V=t.useRef(null),G=(0,xe.Z)(),H=G.isFocusVisibleRef,Z=G.onFocus,W=G.onBlur,q=G.ref,X=t.useState(!1),K=(0,a.Z)(X,2),Y=K[0],Q=K[1];function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return(0,ye.Z)((function(r){return t&&t(r),!n&&V.current&&V.current[e](r),!0}))}f&&Y&&Q(!1),t.useImperativeHandle(i,(function(){return{focusVisible:function(){Q(!0),B.current.focus()}}}),[]),t.useEffect((function(){Y&&x&&!m&&V.current.pulsate()}),[m,x,Y]);var J=$("start",P),ee=$("stop",M),ne=$("stop",E),re=$("stop",L),ie=$("stop",(function(e){Y&&e.preventDefault(),O&&O(e)})),ae=$("start",I),oe=$("stop",R),se=$("stop",D),ce=$("stop",(function(e){W(e),!1===H.current&&Q(!1),w&&w(e)}),!1),de=(0,ye.Z)((function(e){B.current||(B.current=e.currentTarget),Z(e),!0===H.current&&(Q(!0),k&&k(e)),T&&T(e)})),pe=function(){var e=B.current;return d&&"button"!==d&&!("A"===e.tagName&&e.href)},me=t.useRef(!1),_e=(0,ye.Z)((function(e){x&&!me.current&&Y&&V.current&&" "===e.key&&(me.current=!0,V.current.stop(e,(function(){V.current.start(e)}))),e.target===e.currentTarget&&pe()&&" "===e.key&&e.preventDefault(),C&&C(e),e.target===e.currentTarget&&pe()&&"Enter"===e.key&&!f&&(e.preventDefault(),S&&S(e))})),be=(0,ye.Z)((function(e){x&&" "===e.key&&V.current&&Y&&!e.defaultPrevented&&(me.current=!1,V.current.stop(e,(function(){V.current.pulsate(e)}))),A&&A(e),S&&e.target===e.currentTarget&&pe()&&" "===e.key&&!e.defaultPrevented&&S(e)})),we=d;"button"===we&&(U.href||U.to)&&(we=b);var Se={};"button"===we?(Se.type=void 0===z?"button":z,Se.disabled=f):(U.href||U.to||(Se.role="button"),f&&(Se["aria-disabled"]=f));var Me=(0,ge.Z)(q,B),Ee=(0,ge.Z)(n,Me),Te=t.useState(!1),ke=(0,a.Z)(Te,2),Ce=ke[0],Ae=ke[1];t.useEffect((function(){Ae(!0)}),[]);var Pe=Ce&&!m&&!f;var Oe=(0,le.Z)({},r,{centerRipple:s,component:d,disabled:f,disableRipple:m,disableTouchRipple:g,focusRipple:x,tabIndex:N,focusVisible:Y}),Le=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,a={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,fe.Z)(a,at,i);return n&&r&&(o.root+=" ".concat(r)),o}(Oe);return(0,te.jsxs)(lt,(0,le.Z)({as:we,className:(0,he.Z)(Le.root,l),ownerState:Oe,onBlur:ce,onClick:S,onContextMenu:ee,onFocus:de,onKeyDown:_e,onKeyUp:be,onMouseDown:J,onMouseLeave:ie,onMouseUp:re,onDragLeave:ne,onTouchEnd:oe,onTouchMove:se,onTouchStart:ae,ref:Ee,tabIndex:f?-1:N,type:z},Se,U,{children:[u,Pe?(0,te.jsx)(rt,(0,le.Z)({ref:V,center:s},j)):null]}))})),dt=ct,ht=n(14036);function ft(e){return(0,it.Z)("MuiIconButton",e)}var pt=(0,Ue.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),mt=["edge","children","className","color","disabled","disableFocusRipple","size"],vt=(0,me.ZP)(dt,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,ht.Z)(n.color))],n.edge&&t["edge".concat((0,ht.Z)(n.edge))],t["size".concat((0,ht.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:(0,pe.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,le.Z)({color:t.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:(0,pe.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,i.Z)({},"&.".concat(pt.disabled),{backgroundColor:"transparent",color:t.palette.action.disabled}))})),gt=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,a=n.children,o=n.className,s=n.color,u=void 0===s?"default":s,l=n.disabled,c=void 0!==l&&l,d=n.disableFocusRipple,h=void 0!==d&&d,f=n.size,p=void 0===f?"medium":f,m=(0,ue.Z)(n,mt),v=(0,le.Z)({},n,{edge:i,color:u,disabled:c,disableFocusRipple:h,size:p}),g=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,a=e.size,o={root:["root",n&&"disabled","default"!==r&&"color".concat((0,ht.Z)(r)),i&&"edge".concat((0,ht.Z)(i)),"size".concat((0,ht.Z)(a))]};return(0,fe.Z)(o,ft,t)}(v);return(0,te.jsx)(vt,(0,le.Z)({className:(0,he.Z)(g.root,o),centerRipple:!0,focusRipple:!h,disabled:c,ref:t,ownerState:v},m,{children:a}))})),yt=gt,xt=n(57441),_t=n(79613),bt=n.n(_t);var wt=function(e){function t(e,r,u,l,h){for(var f,p,m,v,_,w=0,S=0,M=0,E=0,T=0,L=0,D=m=f=0,F=0,N=0,j=0,z=0,U=u.length,B=U-1,V="",G="",H="",Z="";F<U;){if(p=u.charCodeAt(F),F===B&&0!==S+E+M+w&&(0!==S&&(p=47===S?10:47),E=M=w=0,U++,B++),0===S+E+M+w){if(F===B&&(0<N&&(V=V.replace(d,"")),0<V.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:V+=u.charAt(F)}p=59}switch(p){case 123:for(f=(V=V.trim()).charCodeAt(0),m=1,z=++F;F<U;){switch(p=u.charCodeAt(F)){case 123:m++;break;case 125:m--;break;case 47:switch(p=u.charCodeAt(F+1)){case 42:case 47:e:{for(D=F+1;D<B;++D)switch(u.charCodeAt(D)){case 47:if(42===p&&42===u.charCodeAt(D-1)&&F+2!==D){F=D+1;break e}break;case 10:if(47===p){F=D+1;break e}}F=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;F++<B&&u.charCodeAt(F)!==p;);}if(0===m)break;F++}if(m=u.substring(z,F),0===f&&(f=(V=V.replace(c,"").trim()).charCodeAt(0)),64===f){switch(0<N&&(V=V.replace(d,"")),p=V.charCodeAt(1)){case 100:case 109:case 115:case 45:N=r;break;default:N=O}if(z=(m=t(r,N,m,p,h+1)).length,0<R&&(_=s(3,m,N=n(O,V,j),r,C,k,z,p,h,l),V=N.join(""),void 0!==_&&0===(z=(m=_.trim()).length)&&(p=0,m="")),0<z)switch(p){case 115:V=V.replace(b,o);case 100:case 109:case 45:m=V+"{"+m+"}";break;case 107:m=(V=V.replace(g,"$1 $2"))+"{"+m+"}",m=1===P||2===P&&a("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=V+m,112===l&&(G+=m,m="")}else m=""}else m=t(r,n(r,V,j),m,l,h+1);H+=m,m=j=N=D=f=0,V="",p=u.charCodeAt(++F);break;case 125:case 59:if(1<(z=(V=(0<N?V.replace(d,""):V).trim()).length))switch(0===D&&(f=V.charCodeAt(0),45===f||96<f&&123>f)&&(z=(V=V.replace(" ",":")).length),0<R&&void 0!==(_=s(1,V,r,e,C,k,G.length,l,h,l))&&0===(z=(V=_.trim()).length)&&(V="\0\0"),f=V.charCodeAt(0),p=V.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){Z+=V+u.charAt(F);break}default:58!==V.charCodeAt(z-1)&&(G+=i(V,f,p,V.charCodeAt(2)))}j=N=D=f=0,V="",p=u.charCodeAt(++F)}}switch(p){case 13:case 10:47===S?S=0:0===1+f&&107!==l&&0<V.length&&(N=1,V+="\0"),0<R*I&&s(0,V,r,e,C,k,G.length,l,h,l),k=1,C++;break;case 59:case 125:if(0===S+E+M+w){k++;break}default:switch(k++,v=u.charAt(F),p){case 9:case 32:if(0===E+w+S)switch(T){case 44:case 58:case 9:case 32:v="";break;default:32!==p&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===E+S+w&&(N=j=1,v="\f"+v);break;case 108:if(0===E+S+w+A&&0<D)switch(F-D){case 2:112===T&&58===u.charCodeAt(F-3)&&(A=T);case 8:111===L&&(A=L)}break;case 58:0===E+S+w&&(D=F);break;case 44:0===S+M+E+w&&(N=1,v+="\r");break;case 34:case 39:0===S&&(E=E===p?0:0===E?p:E);break;case 91:0===E+S+M&&w++;break;case 93:0===E+S+M&&w--;break;case 41:0===E+S+w&&M--;break;case 40:if(0===E+S+w){if(0===f)if(2*T+3*L===533);else f=1;M++}break;case 64:0===S+M+E+w+D+m&&(m=1);break;case 42:case 47:if(!(0<E+w+M))switch(S){case 0:switch(2*p+3*u.charCodeAt(F+1)){case 235:S=47;break;case 220:z=F,S=42}break;case 42:47===p&&42===T&&z+2!==F&&(33===u.charCodeAt(z+2)&&(G+=u.substring(z,F+1)),v="",S=0)}}0===S&&(V+=v)}L=T,T=p,F++}if(0<(z=G.length)){if(N=r,0<R&&(void 0!==(_=s(2,G,N,e,C,k,z,l,h,l))&&0===(G=_).length))return Z+G+H;if(G=N.join(",")+"{"+G+"}",0!==P*A){switch(2!==P||a(G,2)||(A=0),A){case 111:G=G.replace(x,":-moz-$1")+G;break;case 112:G=G.replace(y,"::-webkit-input-$1")+G.replace(y,"::-moz-$1")+G.replace(y,":-ms-input-$1")+G}A=0}}return Z+G+H}function n(e,t,n){var i=t.trim().split(m);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<a;++s)for(var l=0;l<o;++l)t[u++]=r(e[l]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===P||2===P&&a(u,1)?"-webkit-"+u+u:u}if(0===P||2===P&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(T,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return f.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(_,"tb");break;case 232:u=o.replace(_,"tb-rl");break;case 220:u=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(M,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,u,c){for(var d,h=0,f=t;h<R;++h)switch(d=L[h].call(l,e,f,n,r,i,a,o,s,u,c)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==t)return f}function u(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?P=1:(P=2,D=e):P=0),u}function l(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<R){var i=s(-1,n,r,r,C,k,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(O,r,n,0,0);return 0<R&&(void 0!==(i=s(-2,a,r,r,C,k,a.length,0,0,0))&&(a=i)),"",A=0,k=C=1,a}var c=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,x=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,k=1,C=1,A=0,P=1,O=[],L=[],R=0,D=null,I=0;return l.use=function e(t){switch(t){case void 0:case null:R=L.length=0;break;default:if("function"===typeof t)L[R++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else I=0|!!t}return e},l.set=u,void 0!==e&&u(e),l},St=n(63840),Mt=n(50620),Et=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Tt=(0,Mt.Z)((function(e){return Et.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ct=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},At=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,xt.typeOf)(e)},Pt=Object.freeze([]),Ot=Object.freeze({});function Lt(e){return"function"==typeof e}function Rt(e){return e.displayName||e.name||"Component"}function Dt(e){return e&&"string"==typeof e.styledComponentId}var It="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Ft="undefined"!=typeof window&&"HTMLElement"in window,Nt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var zt=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&jt(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),Ut=new Map,Bt=new Map,Vt=1,Gt=function(e){if(Ut.has(e))return Ut.get(e);for(;Bt.has(Vt);)Vt++;var t=Vt++;return Ut.set(e,t),Bt.set(t,e),t},Ht=function(e){return Bt.get(e)},Zt=function(e,t){t>=Vt&&(Vt=t+1),Ut.set(e,t),Bt.set(t,e)},Wt="style["+It+'][data-styled-version="5.3.3"]',qt=new RegExp("^"+It+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Xt=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},Kt=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(qt);if(s){var u=0|parseInt(s[1],10),l=s[2];0!==u&&(Zt(l,u),Xt(e,l,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},Yt=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},Qt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(It))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(It,"active"),r.setAttribute("data-styled-version","5.3.3");var o=Yt();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},$t=function(){function e(e){var t=this.element=Qt(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}jt(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Jt=function(){function e(e){var t=this.element=Qt(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),en=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),tn=Ft,nn={isServer:!Ft,useCSSOMInjection:!Nt},rn=function(){function e(e,t,n){void 0===e&&(e=Ot),void 0===t&&(t={}),this.options=kt({},nn,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Ft&&tn&&(tn=!1,function(e){for(var t=document.querySelectorAll(Wt),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(It)&&(Kt(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return Gt(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(kt({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new en(i):r?new $t(i):new Jt(i),new zt(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Gt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Gt(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Gt(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=Ht(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(o&&s&&o.size){var u=It+".g"+i+'[id="'+a+'"]',l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+=e+",")})),r+=""+s+u+'{content:"'+l+'"}/*!sc*/\n'}}}return r}(this)},e}(),an=/(a)(d)/gi,on=function(e){return String.fromCharCode(e+(e>25?39:97))};function sn(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=on(t%52)+n;return(on(t%52)+n).replace(an,"$1-$2")}var un=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ln=function(e){return un(5381,e)};function cn(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Lt(n)&&!Dt(n))return!1}return!0}var dn=ln("5.3.3"),hn=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&cn(e),this.componentId=t,this.baseHash=un(dn,t),this.baseStyle=n,rn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=Pn(this.rules,e,t,n).join(""),o=sn(un(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,l=un(this.baseHash,n.hash),c="",d=0;d<u;d++){var h=this.rules[d];if("string"==typeof h)c+=h;else if(h){var f=Pn(h,e,t,n),p=Array.isArray(f)?f.join(""):f;l=un(l,p+d),c+=p}}if(c){var m=sn(l>>>0);if(!t.hasNameForId(r,m)){var v=n(c,"."+m,void 0,r);t.insertRules(r,m,v)}i.push(m)}}return i.join(" ")},e}(),fn=/^\s*\/\/.*$/gm,pn=[":","[",".","#"];function mn(e){var t,n,r,i,a=void 0===e?Ot:e,o=a.options,s=void 0===o?Ot:o,u=a.plugins,l=void 0===u?Pt:u,c=new wt(s),d=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,u,l,c,d){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(i[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),f=function(e,r,a){return 0===r&&-1!==pn.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,s){void 0===s&&(s="&");var u=e.replace(fn,""),l=a&&o?o+" "+a+" { "+u+" }":u;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(o||!a?"":a,l)}return c.use([].concat(l,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,f))},h,function(e){if(-2===e){var t=d;return d=[],t}}])),p.hash=l.length?l.reduce((function(e,t){return t.name||jt(15),un(e,t.name)}),5381).toString():"",p}var vn=t.createContext(),gn=(vn.Consumer,t.createContext()),yn=(gn.Consumer,new rn),xn=mn();function _n(){return(0,t.useContext)(vn)||yn}function bn(){return(0,t.useContext)(gn)||xn}function wn(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],a=_n(),o=(0,t.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return mn({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){bt()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(vn.Provider,{value:o},t.createElement(gn.Provider,{value:s},e.children))}var Sn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=xn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return jt(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=xn),this.name+e.hash},e}(),Mn=/([A-Z])/,En=/([A-Z])/g,Tn=/^ms-/,kn=function(e){return"-"+e.toLowerCase()};function Cn(e){return Mn.test(e)?e.replace(En,kn).replace(Tn,"-ms-"):e}var An=function(e){return null==e||!1===e||""===e};function Pn(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=Pn(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return An(e)?"":Dt(e)?"."+e.styledComponentId:Lt(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:Pn(e(t),t,n,r):e instanceof Sn?n?(e.inject(n,r),e.getName(r)):e:At(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!An(t[o])&&(Array.isArray(t[o])&&t[o].isCss||Lt(t[o])?a.push(Cn(o)+":",t[o],";"):At(t[o])?a.push.apply(a,e(t[o],o)):a.push(Cn(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in St.Z?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var u}var On=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Lt(e)||At(e)?On(Pn(Ct(Pt,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:On(Pn(Ct(e,n)))}new Set;var Rn=function(e,t,n){return void 0===n&&(n=Ot),e.theme!==n.theme&&e.theme||t||n.theme},Dn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,In=/(^-|-$)/g;function Fn(e){return e.replace(Dn,"-").replace(In,"")}var Nn=function(e){return sn(ln(e)>>>0)};function jn(e){return"string"==typeof e&&!0}var zn=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Un=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Bn(e,t,n){var r=e[n];zn(t)&&zn(r)?Vn(r,t):e[n]=t}function Vn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(zn(o))for(var s in o)Un(s)&&Bn(e,o[s],s)}return e}var Gn=t.createContext();Gn.Consumer;var Hn={};function Zn(e,n,r){var i=Dt(e),a=!jn(e),o=n.attrs,s=void 0===o?Pt:o,u=n.componentId,l=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Fn(e);Hn[n]=(Hn[n]||0)+1;var r=n+"-"+Nn("5.3.3"+n+Hn[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):u,c=n.displayName,d=void 0===c?function(e){return jn(e)?"styled."+e:"Styled("+Rt(e)+")"}(e):c,h=n.displayName&&n.componentId?Fn(n.displayName)+"-"+n.componentId:n.componentId||l,f=i&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,p=n.shouldForwardProp;i&&e.shouldForwardProp&&(p=n.shouldForwardProp?function(t,r,i){return e.shouldForwardProp(t,r,i)&&n.shouldForwardProp(t,r,i)}:e.shouldForwardProp);var m,v=new hn(r,h,i?e.componentStyle:void 0),g=v.isStatic&&0===s.length,y=function(e,n){return function(e,n,r,i){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,l=e.shouldForwardProp,c=e.styledComponentId,d=e.target,h=function(e,t,n){void 0===e&&(e=Ot);var r=kt({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in Lt(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(Rn(n,(0,t.useContext)(Gn),s)||Ot,n,a),f=h[0],p=h[1],m=function(e,t,n,r){var i=_n(),a=bn();return t?e.generateAndInjectStyles(Ot,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,f),v=r,g=p.$as||n.$as||p.as||n.as||d,y=jn(g),x=p!==n?kt({},n,{},p):n,_={};for(var b in x)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?_.as=x[b]:(l?l(b,Tt,g):!y||Tt(b))&&(_[b]=x[b]));return n.style&&p.style!==n.style&&(_.style=kt({},n.style,{},p.style)),_.className=Array.prototype.concat(u,c,m!==c?m:null,n.className,p.className).filter(Boolean).join(" "),_.ref=v,(0,t.createElement)(g,_)}(m,e,n,g)};return y.displayName=d,(m=t.forwardRef(y)).attrs=f,m.componentStyle=v,m.displayName=d,m.shouldForwardProp=p,m.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Pt,m.styledComponentId=h,m.target=i?e.target:e,m.withComponent=function(e){var t=n.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["componentId"]),a=t&&t+"-"+(jn(e)?e:Fn(Rt(e)));return Zn(e,kt({},i,{attrs:f,componentId:a}),r)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Vn({},e.defaultProps,t):t}}),m.toString=function(){return"."+m.styledComponentId},a&&Le()(m,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var Wn=function(e){return function e(t,n,r){if(void 0===r&&(r=Ot),!(0,xt.isValidElementType)(n))return jt(1,String(n));var i=function(){return t(n,r,Ln.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,kt({},r,{},i))},i.attrs=function(i){return e(t,n,kt({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Zn,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Wn[e]=Wn(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=cn(e),rn.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(Pn(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&rn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Yt();return"<style "+[n&&'nonce="'+n+'"',It+'="true"','data-styled-version="5.3.3"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?jt(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return jt(2);var r=((n={})[It]="",n["data-styled-version"]="5.3.3",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=Yt();return i&&(r.nonce=i),[t.createElement("style",kt({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new rn({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?jt(2):t.createElement(wn,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return jt(3)}}();var qn,Xn,Kn=Wn,Yn=Kn.div(qn||(qn=se(["\n  position: fixed;\n  top: 5px;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 1;\n"]))),Qn=Kn(yt)(Xn||(Xn=se(["\n  color: black !important;\n  background-color: #c2fadb !important;\n  background-image: linear-gradient(315deg, #6daddb 0%, #c2fadb 74%) !important;\n  height: 55px;\n  width: 55px;\n"])));var $n=function(e){return"string"===typeof e};function Jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return $n(e)?t:(0,le.Z)({},t,{ownerState:(0,le.Z)({},t.ownerState,n)})}var er=n(30418),tr=n(99691);function nr(){return(0,er.Z)(tr.Z)}var rr=!1,ir="unmounted",ar="exited",or="entering",sr="entered",ur="exiting",lr=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=ar,r.appearStatus=or):i=sr:i=t.unmountOnExit||t.mountOnEnter?ir:ar,r.state={status:i},r.nextCallback=null,r}we(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ir?{status:ar}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==or&&n!==sr&&(t=or):n!==or&&n!==sr||(t=ur)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===or?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===ar&&this.setState({status:ir})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],s=a[1],u=this.getTimeouts(),l=i?u.appear:u.enter;!e&&!n||rr?this.safeSetState({status:sr},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:or},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:sr},(function(){t.props.onEntered(o,s)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!rr?(this.props.onExit(i),this.safeSetState({status:ur},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:ar},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:ar},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===ir)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,ue.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Se.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function cr(){}lr.contextType=Se,lr.propTypes={},lr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cr,onEntering:cr,onEntered:cr,onExit:cr,onExiting:cr,onExited:cr},lr.UNMOUNTED=ir,lr.EXITED=ar,lr.ENTERING=or,lr.ENTERED=sr,lr.EXITING=ur;var dr=lr,hr=function(e){return e.scrollTop};function fr(e,t){var n,r,i=e.timeout,a=e.easing,o=e.style,s=void 0===o?{}:o;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof a?a[t.mode]:a,delay:s.transitionDelay}}var pr=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function mr(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var vr={entering:{opacity:1,transform:mr(1)},entered:{opacity:1,transform:"none"}},gr=t.forwardRef((function(e,n){var r=e.addEndListener,i=e.appear,a=void 0===i||i,o=e.children,s=e.easing,u=e.in,l=e.onEnter,c=e.onEntered,d=e.onEntering,h=e.onExit,f=e.onExited,p=e.onExiting,m=e.style,v=e.timeout,g=void 0===v?"auto":v,y=e.TransitionComponent,x=void 0===y?dr:y,_=(0,ue.Z)(e,pr),b=t.useRef(),w=t.useRef(),S=nr(),M=t.useRef(null),E=(0,ge.Z)(o.ref,n),T=(0,ge.Z)(M,E),k=function(e){return function(t){if(e){var n=M.current;void 0===t?e(n):e(n,t)}}},C=k(d),A=k((function(e,t){hr(e);var n,r=fr({style:m,timeout:g,easing:s},{mode:"enter"}),i=r.duration,a=r.delay,o=r.easing;"auto"===g?(n=S.transitions.getAutoHeightDuration(e.clientHeight),w.current=n):n=i,e.style.transition=[S.transitions.create("opacity",{duration:n,delay:a}),S.transitions.create("transform",{duration:.666*n,delay:a,easing:o})].join(","),l&&l(e,t)})),P=k(c),O=k(p),L=k((function(e){var t,n=fr({style:m,timeout:g,easing:s},{mode:"exit"}),r=n.duration,i=n.delay,a=n.easing;"auto"===g?(t=S.transitions.getAutoHeightDuration(e.clientHeight),w.current=t):t=r,e.style.transition=[S.transitions.create("opacity",{duration:t,delay:i}),S.transitions.create("transform",{duration:.666*t,delay:i||.333*t,easing:a})].join(","),e.style.opacity="0",e.style.transform=mr(.75),h&&h(e)})),R=k(f);return t.useEffect((function(){return function(){clearTimeout(b.current)}}),[]),(0,te.jsx)(x,(0,le.Z)({appear:a,in:u,nodeRef:M,onEnter:A,onEntered:P,onEntering:C,onExit:L,onExited:R,onExiting:O,addEndListener:function(e){"auto"===g&&(b.current=setTimeout(e,w.current||0)),r&&r(M.current,e)},timeout:"auto"===g?null:g},_,{children:function(e,n){return t.cloneElement(o,(0,le.Z)({style:(0,le.Z)({opacity:0,transform:mr(.75),visibility:"exited"!==e||u?void 0:"hidden"},vr[e],m,o.props.style),ref:T},n))}}))}));gr.muiSupportAuto=!0;var yr=gr,xr=n(47563),_r=n(75721),br=n(99723);function wr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Sr(e){return e instanceof wr(e).Element||e instanceof Element}function Mr(e){return e instanceof wr(e).HTMLElement||e instanceof HTMLElement}function Er(e){return"undefined"!==typeof ShadowRoot&&(e instanceof wr(e).ShadowRoot||e instanceof ShadowRoot)}var Tr=Math.max,kr=Math.min,Cr=Math.round;function Ar(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(Mr(e)&&t){var a=e.offsetHeight,o=e.offsetWidth;o>0&&(r=Cr(n.width)/o||1),a>0&&(i=Cr(n.height)/a||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function Pr(e){var t=wr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Or(e){return e?(e.nodeName||"").toLowerCase():null}function Lr(e){return((Sr(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rr(e){return Ar(Lr(e)).left+Pr(e).scrollLeft}function Dr(e){return wr(e).getComputedStyle(e)}function Ir(e){var t=Dr(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Fr(e,t,n){void 0===n&&(n=!1);var r=Mr(t),i=Mr(t)&&function(e){var t=e.getBoundingClientRect(),n=Cr(t.width)/e.offsetWidth||1,r=Cr(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=Lr(t),o=Ar(e,i),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==Or(t)||Ir(a))&&(s=function(e){return e!==wr(e)&&Mr(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Pr(e);var t}(t)),Mr(t)?((u=Ar(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=Rr(a))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function Nr(e){var t=Ar(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function jr(e){return"html"===Or(e)?e:e.assignedSlot||e.parentNode||(Er(e)?e.host:null)||Lr(e)}function zr(e){return["html","body","#document"].indexOf(Or(e))>=0?e.ownerDocument.body:Mr(e)&&Ir(e)?e:zr(jr(e))}function Ur(e,t){var n;void 0===t&&(t=[]);var r=zr(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=wr(r),o=i?[a].concat(a.visualViewport||[],Ir(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(Ur(jr(o)))}function Br(e){return["table","td","th"].indexOf(Or(e))>=0}function Vr(e){return Mr(e)&&"fixed"!==Dr(e).position?e.offsetParent:null}function Gr(e){for(var t=wr(e),n=Vr(e);n&&Br(n)&&"static"===Dr(n).position;)n=Vr(n);return n&&("html"===Or(n)||"body"===Or(n)&&"static"===Dr(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Mr(e)&&"fixed"===Dr(e).position)return null;for(var n=jr(e);Mr(n)&&["html","body"].indexOf(Or(n))<0;){var r=Dr(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Hr="top",Zr="bottom",Wr="right",qr="left",Xr="auto",Kr=[Hr,Zr,Wr,qr],Yr="start",Qr="end",$r="viewport",Jr="popper",ei=Kr.reduce((function(e,t){return e.concat([t+"-"+Yr,t+"-"+Qr])}),[]),ti=[].concat(Kr,[Xr]).reduce((function(e,t){return e.concat([t,t+"-"+Yr,t+"-"+Qr])}),[]),ni=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ri(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function ii(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var ai={placement:"bottom",modifiers:[],strategy:"absolute"};function oi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function si(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?ai:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},ai,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,u={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;l(),i.options=Object.assign({},a,i.options,s),i.scrollParents={reference:Sr(e)?Ur(e):e.contextElement?Ur(e.contextElement):[],popper:Ur(t)};var c=function(e){var t=ri(e);return ni.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=c.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var s=a({state:i,name:t,instance:u,options:r}),l=function(){};o.push(s||l)}})),u.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(oi(t,n)){i.rects={reference:Fr(t,Gr(n),"fixed"===i.options.strategy),popper:Nr(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,l=a.options,c=void 0===l?{}:l,d=a.name;"function"===typeof o&&(i=o({state:i,options:c,name:d,instance:u})||i)}else i.reset=!1,r=-1}}},update:ii((function(){return new Promise((function(e){u.forceUpdate(),e(i)}))})),destroy:function(){l(),s=!0}};if(!oi(e,t))return u;function l(){o.forEach((function(e){return e()})),o=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var ui={passive:!0};function li(e){return e.split("-")[0]}function ci(e){return e.split("-")[1]}function di(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function hi(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?li(i):null,o=i?ci(i):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(a){case Hr:t={x:s,y:n.y-r.height};break;case Zr:t={x:s,y:n.y+n.height};break;case Wr:t={x:n.x+n.width,y:u};break;case qr:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var l=a?di(a):null;if(null!=l){var c="y"===l?"height":"width";switch(o){case Yr:t[l]=t[l]-(n[c]/2-r[c]/2);break;case Qr:t[l]=t[l]+(n[c]/2-r[c]/2)}}return t}var fi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pi(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,d=e.isFixed,h=o.x,f=void 0===h?0:h,p=o.y,m=void 0===p?0:p,v="function"===typeof c?c({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),x=qr,_=Hr,b=window;if(l){var w=Gr(n),S="clientHeight",M="clientWidth";if(w===wr(n)&&"static"!==Dr(w=Lr(n)).position&&"absolute"===s&&(S="scrollHeight",M="scrollWidth"),w=w,i===Hr||(i===qr||i===Wr)&&a===Qr)_=Zr,m-=(d&&b.visualViewport?b.visualViewport.height:w[S])-r.height,m*=u?1:-1;if(i===qr||(i===Hr||i===Zr)&&a===Qr)x=Wr,f-=(d&&b.visualViewport?b.visualViewport.width:w[M])-r.width,f*=u?1:-1}var E,T=Object.assign({position:s},l&&fi),k=!0===c?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Cr(t*r)/r||0,y:Cr(n*r)/r||0}}({x:f,y:m}):{x:f,y:m};return f=k.x,m=k.y,u?Object.assign({},T,((E={})[_]=y?"0":"",E[x]=g?"0":"",E.transform=(b.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",E)):Object.assign({},T,((t={})[_]=y?m+"px":"",t[x]=g?f+"px":"",t.transform="",t))}var mi={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];Mr(i)&&Or(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});Mr(r)&&Or(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var vi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=ti.reduce((function(e,n){return e[n]=function(e,t,n){var r=li(e),i=[qr,Hr].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[qr,Wr].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],u=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}},gi={left:"right",right:"left",bottom:"top",top:"bottom"};function yi(e){return e.replace(/left|right|bottom|top/g,(function(e){return gi[e]}))}var xi={start:"end",end:"start"};function _i(e){return e.replace(/start|end/g,(function(e){return xi[e]}))}function bi(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Er(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function wi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Si(e,t){return t===$r?wi(function(e){var t=wr(e),n=Lr(e),r=t.visualViewport,i=n.clientWidth,a=n.clientHeight,o=0,s=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,s=r.offsetTop)),{width:i,height:a,x:o+Rr(e),y:s}}(e)):Sr(t)?function(e){var t=Ar(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):wi(function(e){var t,n=Lr(e),r=Pr(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=Tr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Tr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Rr(e),u=-r.scrollTop;return"rtl"===Dr(i||n).direction&&(s+=Tr(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:u}}(Lr(e)))}function Mi(e,t,n){var r="clippingParents"===t?function(e){var t=Ur(jr(e)),n=["absolute","fixed"].indexOf(Dr(e).position)>=0&&Mr(e)?Gr(e):e;return Sr(n)?t.filter((function(e){return Sr(e)&&bi(e,n)&&"body"!==Or(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce((function(t,n){var r=Si(e,n);return t.top=Tr(r.top,t.top),t.right=kr(r.right,t.right),t.bottom=kr(r.bottom,t.bottom),t.left=Tr(r.left,t.left),t}),Si(e,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Ei(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ti(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ki(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,u=void 0===s?$r:s,l=n.elementContext,c=void 0===l?Jr:l,d=n.altBoundary,h=void 0!==d&&d,f=n.padding,p=void 0===f?0:f,m=Ei("number"!==typeof p?p:Ti(p,Kr)),v=c===Jr?"reference":Jr,g=e.rects.popper,y=e.elements[h?v:c],x=Mi(Sr(y)?y:y.contextElement||Lr(e.elements.popper),o,u),_=Ar(e.elements.reference),b=hi({reference:_,element:g,strategy:"absolute",placement:i}),w=wi(Object.assign({},g,b)),S=c===Jr?w:_,M={top:x.top-S.top+m.top,bottom:S.bottom-x.bottom+m.bottom,left:x.left-S.left+m.left,right:S.right-x.right+m.right},E=e.modifiersData.offset;if(c===Jr&&E){var T=E[i];Object.keys(M).forEach((function(e){var t=[Wr,Zr].indexOf(e)>=0?1:-1,n=[Hr,Zr].indexOf(e)>=0?"y":"x";M[e]+=T[n]*t}))}return M}var Ci={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,u=n.fallbackPlacements,l=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,v=t.options.placement,g=li(v),y=u||(g===v||!p?[yi(v)]:function(e){if(li(e)===Xr)return[];var t=yi(e);return[_i(e),t,_i(t)]}(v)),x=[v].concat(y).reduce((function(e,n){return e.concat(li(n)===Xr?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=void 0===u?ti:u,c=ci(r),d=c?s?ei:ei.filter((function(e){return ci(e)===c})):Kr,h=d.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=d);var f=h.reduce((function(t,n){return t[n]=ki(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[li(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:c,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),_=t.rects.reference,b=t.rects.popper,w=new Map,S=!0,M=x[0],E=0;E<x.length;E++){var T=x[E],k=li(T),C=ci(T)===Yr,A=[Hr,Zr].indexOf(k)>=0,P=A?"width":"height",O=ki(t,{placement:T,boundary:c,rootBoundary:d,altBoundary:h,padding:l}),L=A?C?Wr:qr:C?Zr:Hr;_[P]>b[P]&&(L=yi(L));var R=yi(L),D=[];if(a&&D.push(O[k]<=0),s&&D.push(O[L]<=0,O[R]<=0),D.every((function(e){return e}))){M=T,S=!1;break}w.set(T,D)}if(S)for(var I=function(e){var t=x.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return M=t,"break"},F=p?3:1;F>0;F--){if("break"===I(F))break}t.placement!==M&&(t.modifiersData[r]._skip=!0,t.placement=M,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ai(e,t,n){return Tr(e,kr(t,n))}var Pi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,f=void 0===h||h,p=n.tetherOffset,m=void 0===p?0:p,v=ki(t,{boundary:u,rootBoundary:l,padding:d,altBoundary:c}),g=li(t.placement),y=ci(t.placement),x=!y,_=di(g),b="x"===_?"y":"x",w=t.modifiersData.popperOffsets,S=t.rects.reference,M=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(w){if(a){var A,P="y"===_?Hr:qr,O="y"===_?Zr:Wr,L="y"===_?"height":"width",R=w[_],D=R+v[P],I=R-v[O],F=f?-M[L]/2:0,N=y===Yr?S[L]:M[L],j=y===Yr?-M[L]:-S[L],z=t.elements.arrow,U=f&&z?Nr(z):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=B[P],G=B[O],H=Ai(0,S[L],U[L]),Z=x?S[L]/2-F-H-V-T.mainAxis:N-H-V-T.mainAxis,W=x?-S[L]/2+F+H+G+T.mainAxis:j+H+G+T.mainAxis,q=t.elements.arrow&&Gr(t.elements.arrow),X=q?"y"===_?q.clientTop||0:q.clientLeft||0:0,K=null!=(A=null==k?void 0:k[_])?A:0,Y=R+W-K,Q=Ai(f?kr(D,R+Z-K-X):D,R,f?Tr(I,Y):I);w[_]=Q,C[_]=Q-R}if(s){var $,J="x"===_?Hr:qr,ee="x"===_?Zr:Wr,te=w[b],ne="y"===b?"height":"width",re=te+v[J],ie=te-v[ee],ae=-1!==[Hr,qr].indexOf(g),oe=null!=($=null==k?void 0:k[b])?$:0,se=ae?re:te-S[ne]-M[ne]-oe+T.altAxis,ue=ae?te+S[ne]+M[ne]-oe-T.altAxis:ie,le=f&&ae?function(e,t,n){var r=Ai(e,t,n);return r>n?n:r}(se,te,ue):Ai(f?se:re,te,f?ue:ie);w[b]=le,C[b]=le-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};var Oi={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=li(n.placement),u=di(s),l=[qr,Wr].indexOf(s)>=0?"height":"width";if(a&&o){var c=function(e,t){return Ei("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ti(e,Kr))}(i.padding,n),d=Nr(a),h="y"===u?Hr:qr,f="y"===u?Zr:Wr,p=n.rects.reference[l]+n.rects.reference[u]-o[u]-n.rects.popper[l],m=o[u]-n.rects.reference[u],v=Gr(a),g=v?"y"===u?v.clientHeight||0:v.clientWidth||0:0,y=p/2-m/2,x=c[h],_=g-d[l]-c[f],b=g/2-d[l]/2+y,w=Ai(x,b,_),S=u;n.modifiersData[r]=((t={})[S]=w,t.centerOffset=w-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&bi(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Li(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ri(e){return[Hr,Wr,Zr,qr].some((function(t){return e[t]>=0}))}var Di=si({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,u=wr(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach((function(e){e.addEventListener("scroll",n.update,ui)})),s&&u.addEventListener("resize",n.update,ui),function(){a&&l.forEach((function(e){e.removeEventListener("scroll",n.update,ui)})),s&&u.removeEventListener("resize",n.update,ui)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=hi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,u=void 0===s||s,l={placement:li(t.placement),variation:ci(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,pi(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,pi(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},mi,vi,Ci,Pi,Oi,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=ki(t,{elementContext:"reference"}),s=ki(t,{altBoundary:!0}),u=Li(o,r),l=Li(s,i,a),c=Ri(u),d=Ri(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}}]}),Ii=n(62971);var Fi=t.forwardRef((function(e,n){var i=e.children,o=e.container,s=e.disablePortal,u=void 0!==s&&s,l=t.useState(null),c=(0,a.Z)(l,2),d=c[0],h=c[1],f=(0,xr.Z)(t.isValidElement(i)?i.ref:null,n);return(0,_r.Z)((function(){u||h(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,u]),(0,_r.Z)((function(){if(d&&!u)return(0,Ii.Z)(n,d),function(){(0,Ii.Z)(n,null)}}),[n,d,u]),u?t.isValidElement(i)?t.cloneElement(i,{ref:f}):i:d?r.createPortal(i,d):d})),Ni=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","TransitionProps"],ji=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function zi(e){return"function"===typeof e?e():e}var Ui={},Bi=t.forwardRef((function(e,n){var r=e.anchorEl,i=e.children,o=e.direction,s=e.disablePortal,u=e.modifiers,l=e.open,c=e.placement,d=e.popperOptions,h=e.popperRef,f=e.TransitionProps,p=(0,ue.Z)(e,Ni),m=t.useRef(null),v=(0,xr.Z)(m,n),g=t.useRef(null),y=(0,xr.Z)(g,h),x=t.useRef(y);(0,_r.Z)((function(){x.current=y}),[y]),t.useImperativeHandle(h,(function(){return g.current}),[]);var _=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(c,o),b=t.useState(_),w=(0,a.Z)(b,2),S=w[0],M=w[1];t.useEffect((function(){g.current&&g.current.forceUpdate()})),(0,_r.Z)((function(){if(r&&l){zi(r);var e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){var t=e.state;M(t.placement)}}];null!=u&&(e=e.concat(u)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));var t=Di(zi(r),m.current,(0,le.Z)({placement:_},d,{modifiers:e}));return x.current(t),function(){t.destroy(),x.current(null)}}}),[r,s,u,l,d,_]);var E={placement:S};return null!==f&&(E.TransitionProps=f),(0,te.jsx)("div",(0,le.Z)({ref:v,role:"tooltip"},p,{children:"function"===typeof i?i(E):i}))})),Vi=t.forwardRef((function(e,n){var r=e.anchorEl,i=e.children,o=e.container,s=e.direction,u=void 0===s?"ltr":s,l=e.disablePortal,c=void 0!==l&&l,d=e.keepMounted,h=void 0!==d&&d,f=e.modifiers,p=e.open,m=e.placement,v=void 0===m?"bottom":m,g=e.popperOptions,y=void 0===g?Ui:g,x=e.popperRef,_=e.style,b=e.transition,w=void 0!==b&&b,S=(0,ue.Z)(e,ji),M=t.useState(!0),E=(0,a.Z)(M,2),T=E[0],k=E[1];if(!h&&!p&&(!w||T))return null;var C=o||(r?(0,br.Z)(zi(r)).body:void 0);return(0,te.jsx)(Fi,{disablePortal:c,container:C,children:(0,te.jsx)(Bi,(0,le.Z)({anchorEl:r,direction:u,disablePortal:c,modifiers:f,ref:n,open:w?!T:p,placement:v,popperOptions:y,popperRef:x},S,{style:(0,le.Z)({position:"fixed",top:0,left:0,display:p||!h||w&&!T?null:"none"},_),TransitionProps:w?{in:p,onEnter:function(){k(!1)},onExited:function(){k(!0)}}:null,children:i}))})})),Gi=n(27301),Hi=t.forwardRef((function(e,t){var n=(0,Gi.Z)();return(0,te.jsx)(Vi,(0,le.Z)({direction:null==n?void 0:n.direction},e,{ref:t}))})),Zi=Hi,Wi=n(67384),qi=n(98278);function Xi(e){return(0,it.Z)("MuiTooltip",e)}var Ki=(0,Ue.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Yi=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function Qi(e){return Math.round(1e5*e)/1e5}var $i=(0,me.ZP)(Zi,{name:"MuiTooltip",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((function(e){var t,n=e.theme,r=e.ownerState,a=e.open;return(0,le.Z)({zIndex:n.zIndex.tooltip,pointerEvents:"none"},!r.disableInteractive&&{pointerEvents:"auto"},!a&&{pointerEvents:"none"},r.arrow&&(t={},(0,i.Z)(t,'&[data-popper-placement*="bottom"] .'.concat(Ki.arrow),{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}}),(0,i.Z)(t,'&[data-popper-placement*="top"] .'.concat(Ki.arrow),{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}}),(0,i.Z)(t,'&[data-popper-placement*="right"] .'.concat(Ki.arrow),(0,le.Z)({},r.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}})),(0,i.Z)(t,'&[data-popper-placement*="left"] .'.concat(Ki.arrow),(0,le.Z)({},r.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})),t))})),Ji=(0,me.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:function(e,t){var n=e.ownerState;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat((0,ht.Z)(n.placement.split("-")[0]))]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,le.Z)({backgroundColor:(0,pe.Fq)(n.palette.grey[700],.92),borderRadius:n.shape.borderRadius,color:n.palette.common.white,fontFamily:n.typography.fontFamily,padding:"4px 8px",fontSize:n.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:n.typography.fontWeightMedium},r.arrow&&{position:"relative",margin:0},r.touch&&{padding:"8px 16px",fontSize:n.typography.pxToRem(14),lineHeight:"".concat(Qi(16/14),"em"),fontWeight:n.typography.fontWeightRegular},(t={},(0,i.Z)(t,".".concat(Ki.popper,'[data-popper-placement*="left"] &'),(0,le.Z)({transformOrigin:"right center"},r.isRtl?(0,le.Z)({marginLeft:"14px"},r.touch&&{marginLeft:"24px"}):(0,le.Z)({marginRight:"14px"},r.touch&&{marginRight:"24px"}))),(0,i.Z)(t,".".concat(Ki.popper,'[data-popper-placement*="right"] &'),(0,le.Z)({transformOrigin:"left center"},r.isRtl?(0,le.Z)({marginRight:"14px"},r.touch&&{marginRight:"24px"}):(0,le.Z)({marginLeft:"14px"},r.touch&&{marginLeft:"24px"}))),(0,i.Z)(t,".".concat(Ki.popper,'[data-popper-placement*="top"] &'),(0,le.Z)({transformOrigin:"center bottom",marginBottom:"14px"},r.touch&&{marginBottom:"24px"})),(0,i.Z)(t,".".concat(Ki.popper,'[data-popper-placement*="bottom"] &'),(0,le.Z)({transformOrigin:"center top",marginTop:"14px"},r.touch&&{marginTop:"24px"})),t))})),ea=(0,me.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:function(e,t){return t.arrow}})((function(e){var t=e.theme;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,pe.Fq)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})),ta=!1,na=null;function ra(e,t){return function(n){t&&t(n),e(n)}}var ia,aa,oa,sa,ua,la=t.forwardRef((function(e,n){var r,i,o,s,u,l,c=(0,ve.Z)({props:e,name:"MuiTooltip"}),d=c.arrow,h=void 0!==d&&d,f=c.children,p=c.components,m=void 0===p?{}:p,v=c.componentsProps,g=void 0===v?{}:v,y=c.describeChild,x=void 0!==y&&y,_=c.disableFocusListener,b=void 0!==_&&_,w=c.disableHoverListener,S=void 0!==w&&w,M=c.disableInteractive,E=void 0!==M&&M,T=c.disableTouchListener,k=void 0!==T&&T,C=c.enterDelay,A=void 0===C?100:C,P=c.enterNextDelay,O=void 0===P?0:P,L=c.enterTouchDelay,R=void 0===L?700:L,D=c.followCursor,I=void 0!==D&&D,F=c.id,N=c.leaveDelay,j=void 0===N?0:N,z=c.leaveTouchDelay,U=void 0===z?1500:z,B=c.onClose,V=c.onOpen,G=c.open,H=c.placement,Z=void 0===H?"bottom":H,W=c.PopperComponent,q=c.PopperProps,X=void 0===q?{}:q,K=c.title,Y=c.TransitionComponent,Q=void 0===Y?yr:Y,$=c.TransitionProps,J=(0,ue.Z)(c,Yi),ee=nr(),ne="rtl"===ee.direction,re=t.useState(),ie=(0,a.Z)(re,2),ae=ie[0],oe=ie[1],se=t.useState(null),ce=(0,a.Z)(se,2),de=ce[0],pe=ce[1],me=t.useRef(!1),_e=E||I,be=t.useRef(),we=t.useRef(),Se=t.useRef(),Me=t.useRef(),Ee=(0,qi.Z)({controlled:G,default:!1,name:"Tooltip",state:"open"}),Te=(0,a.Z)(Ee,2),ke=Te[0],Ce=Te[1],Ae=ke,Pe=(0,Wi.Z)(F),Oe=t.useRef(),Le=t.useCallback((function(){void 0!==Oe.current&&(document.body.style.WebkitUserSelect=Oe.current,Oe.current=void 0),clearTimeout(Me.current)}),[]);t.useEffect((function(){return function(){clearTimeout(be.current),clearTimeout(we.current),clearTimeout(Se.current),Le()}}),[Le]);var Re=function(e){clearTimeout(na),ta=!0,Ce(!0),V&&!Ae&&V(e)},De=(0,ye.Z)((function(e){clearTimeout(na),na=setTimeout((function(){ta=!1}),800+j),Ce(!1),B&&Ae&&B(e),clearTimeout(be.current),be.current=setTimeout((function(){me.current=!1}),ee.transitions.duration.shortest)})),Ie=function(e){me.current&&"touchstart"!==e.type||(ae&&ae.removeAttribute("title"),clearTimeout(we.current),clearTimeout(Se.current),A||ta&&O?we.current=setTimeout((function(){Re(e)}),ta?O:A):Re(e))},Fe=function(e){clearTimeout(we.current),clearTimeout(Se.current),Se.current=setTimeout((function(){De(e)}),j)},Ne=(0,xe.Z)(),je=Ne.isFocusVisibleRef,ze=Ne.onBlur,Ue=Ne.onFocus,Be=Ne.ref,Ve=t.useState(!1),Ge=(0,a.Z)(Ve,2)[1],He=function(e){ze(e),!1===je.current&&(Ge(!1),Fe(e))},Ze=function(e){ae||oe(e.currentTarget),Ue(e),!0===je.current&&(Ge(!0),Ie(e))},We=function(e){me.current=!0;var t=f.props;t.onTouchStart&&t.onTouchStart(e)},qe=Ie,Xe=Fe;t.useEffect((function(){if(Ae)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||De(e)}}),[De,Ae]);var Ke=(0,ge.Z)(oe,n),Ye=(0,ge.Z)(Be,Ke),Qe=(0,ge.Z)(f.ref,Ye);""===K&&(Ae=!1);var $e=t.useRef({x:0,y:0}),Je=t.useRef(),et={},tt="string"===typeof K;x?(et.title=Ae||!tt||S?null:K,et["aria-describedby"]=Ae?Pe:null):(et["aria-label"]=tt?K:null,et["aria-labelledby"]=Ae&&!tt?Pe:null);var nt=(0,le.Z)({},et,J,f.props,{className:(0,he.Z)(J.className,f.props.className),onTouchStart:We,ref:Qe},I?{onMouseMove:function(e){var t=f.props;t.onMouseMove&&t.onMouseMove(e),$e.current={x:e.clientX,y:e.clientY},Je.current&&Je.current.update()}}:{});var rt={};k||(nt.onTouchStart=function(e){We(e),clearTimeout(Se.current),clearTimeout(be.current),Le(),Oe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Me.current=setTimeout((function(){document.body.style.WebkitUserSelect=Oe.current,Ie(e)}),R)},nt.onTouchEnd=function(e){f.props.onTouchEnd&&f.props.onTouchEnd(e),Le(),clearTimeout(Se.current),Se.current=setTimeout((function(){De(e)}),U)}),S||(nt.onMouseOver=ra(qe,nt.onMouseOver),nt.onMouseLeave=ra(Xe,nt.onMouseLeave),_e||(rt.onMouseOver=qe,rt.onMouseLeave=Xe)),b||(nt.onFocus=ra(Ze,nt.onFocus),nt.onBlur=ra(He,nt.onBlur),_e||(rt.onFocus=Ze,rt.onBlur=He));var it=t.useMemo((function(){var e,t=[{name:"arrow",enabled:Boolean(de),options:{element:de,padding:4}}];return null!=(e=X.popperOptions)&&e.modifiers&&(t=t.concat(X.popperOptions.modifiers)),(0,le.Z)({},X.popperOptions,{modifiers:t})}),[de,X]),at=(0,le.Z)({},c,{isRtl:ne,arrow:h,disableInteractive:_e,placement:Z,PopperComponentProp:W,touch:me.current}),ot=function(e){var t=e.classes,n=e.disableInteractive,r=e.arrow,i=e.touch,a=e.placement,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch","tooltipPlacement".concat((0,ht.Z)(a.split("-")[0]))],arrow:["arrow"]};return(0,fe.Z)(o,Xi,t)}(at),st=null!=(r=m.Popper)?r:$i,ut=null!=(i=null!=(o=m.Transition)?o:Q)?i:yr,lt=null!=(s=m.Tooltip)?s:Ji,ct=null!=(u=m.Arrow)?u:ea,dt=Jn(st,(0,le.Z)({},X,g.popper),at),ft=Jn(ut,(0,le.Z)({},$,g.transition),at),pt=Jn(lt,(0,le.Z)({},g.tooltip),at),mt=Jn(ct,(0,le.Z)({},g.arrow),at);return(0,te.jsxs)(t.Fragment,{children:[t.cloneElement(f,nt),(0,te.jsx)(st,(0,le.Z)({as:null!=W?W:Zi,placement:Z,anchorEl:I?{getBoundingClientRect:function(){return{top:$e.current.y,left:$e.current.x,right:$e.current.x,bottom:$e.current.y,width:0,height:0}}}:ae,popperRef:Je,open:!!ae&&Ae,id:Pe,transition:!0},rt,dt,{className:(0,he.Z)(ot.popper,null==X?void 0:X.className,null==(l=g.popper)?void 0:l.className),popperOptions:it,children:function(e){var t,n,r=e.TransitionProps;return(0,te.jsx)(ut,(0,le.Z)({timeout:ee.transitions.duration.shorter},r,ft,{children:(0,te.jsxs)(lt,(0,le.Z)({},pt,{className:(0,he.Z)(ot.tooltip,null==(t=g.tooltip)?void 0:t.className),children:[K,h?(0,te.jsx)(ct,(0,le.Z)({},mt,{className:(0,he.Z)(ot.arrow,null==(n=g.arrow)?void 0:n.className),ref:pe})):null]}))}))}}))]})})),ca=la;function da(e){var t,n=e.mode,r=e.setMode;return(0,te.jsx)(Yn,{children:(0,te.jsx)(ca,{title:function(){switch(n){case lT.Map:return"Switch to chart view";case lT.Charts:return"Switch to map view";default:return""}}(),children:(0,te.jsx)(Qn,{onClick:function(){r((function(e){return e===lT.Map?lT.Charts:lT.Map}))},children:(t={},(0,i.Z)(t,lT.Map,(0,te.jsx)(oe.Z,{})),(0,i.Z)(t,lT.Charts,(0,te.jsx)(ae.Z,{})),t)[n]})})})}var ha,fa,pa=Kn.div(ia||(ia=se(["\n  position: relative;\n  box-sizing: border-box;\n  height: 100vh;\n  width: 100vw;\n  overflow: auto;\n  background-color: #4c4177;\n  background-image: linear-gradient(\n    315deg,\n    hsl(252, 35%, 20%) 0%,\n    hsl(204, 45%, 15%) 60%\n  );\n  padding-top: 75px;\n  display: flex;\n  justify-content: center;\n"]))),ma=Kn.div(aa||(aa=se(["\n  height: calc(100vh - 75px);\n  width: calc(100vw - 400px);\n  overflow: hidden;\n  user-select: none;\n"]))),va=Kn.div(oa||(oa=se(["\n  position: absolute;\n  top: 5px;\n  left: 55px;\n  color: white;\n  height: 35px;\n  width: 35px;\n"]))),ga=Kn.div(sa||(sa=se(["\n  position: absolute;\n  top: 75px;\n  left: 5px;\n"]))),ya=Kn.div(ua||(ua=se(["\n  display: flex;\n  flex-direction: column;\n  color: white;\n  text-align: center;\n  border: 1px solid white;\n  border-radius: 10px;\n  padding: 15px;\n  margin-bottom: 30px;\n  width: 165px;\n"]))),xa=Kn.div(ha||(ha=se(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid\n    ",";\n  border-radius: 10px;\n  margin: 5px 0;\n  padding: 5px;\n  cursor: pointer;\n  &:hover {\n    background-color: rgba(200, 200, 200, 0.2);\n  }\n"])),(function(e){return e.selected?"lime":"rgb(200, 200, 200)"})),_a=Kn.div(fa||(fa=se(["\n  margin-bottom: 15px;\n  font-weight: 600;\n"])));function ba(e){var t=e.mode,n=e.setMode;return(0,te.jsxs)(ya,{children:[(0,te.jsx)(_a,{children:"Display Options"}),(0,te.jsx)(xa,{selected:t===uT.Total,onClick:function(){return n(uT.Total)},children:"Total"}),(0,te.jsx)(xa,{selected:t===uT.Categories,onClick:function(){return n(uT.Categories)},children:"Categories"}),(0,te.jsx)(xa,{selected:t===uT.Neighbourhoods,onClick:function(){return n(uT.Neighbourhoods)},children:"Neighbourhoods"})]})}var wa=n(48573),Sa=n.n(wa),Ma=n(81694),Ea=n.n(Ma),Ta=n(17719),ka=n(26181),Ca=n.n(ka),Aa=n(93629),Pa=n.n(Aa),Oa=n(82066),La=n.n(Oa),Ra=n(30298),Da=n.n(Ra),Ia=n(26769),Fa=n.n(Ia),Na=function(e){return 0===e?0:e>0?1:-1},ja=function(e){return Fa()(e)&&e.indexOf("%")===e.length-1},za=function(e){return Da()(e)&&!La()(e)},Ua=function(e){return za(e)||Fa()(e)},Ba=0,Va=function(e){var t=++Ba;return"".concat(e||"").concat(t)},Ga=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!za(e)&&!Fa()(e))return r;if(ja(e)){var a=e.indexOf("%");n=t*parseFloat(e.slice(0,a))/100}else n=+e;return La()(n)&&(n=r),i&&n>t&&(n=t),n},Ha=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Za=function(e,t){return za(e)&&za(t)?function(n){return e+n*(t-e)}:function(){return t}};function Wa(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):Ca()(e,t))===n})):null}var qa=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]};function Xa(){return Xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}function Ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ya(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qa=(0,t.forwardRef)((function(e,n){var r=e.aspect,i=e.width,a=void 0===i?"100%":i,o=e.height,s=void 0===o?"100%":o,u=e.minWidth,l=e.minHeight,c=e.maxHeight,d=e.children,h=e.debounce,f=void 0===h?0:h,p=e.id,m=e.className,v=Ka((0,t.useState)({containerWidth:-1,containerHeight:-1}),2),g=v[0],y=v[1],x=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return x}),[x]);var _=Ka((0,t.useState)(!1),2),b=_[0],w=_[1],S=function(){return x.current?{containerWidth:x.current.clientWidth,containerHeight:x.current.clientHeight}:null},M=function(){if(b){var e=S();if(e){var t=g.containerWidth,n=g.containerHeight,r=e.containerWidth,i=e.containerHeight;r===t&&i===n||y({containerWidth:r,containerHeight:i})}}},E=f>0?Sa()(M,f):M;(0,t.useEffect)((function(){if(b){var e=S();e&&y(e)}}),[b]),(0,t.useEffect)((function(){w(!0)}),[]);var T={width:a,height:s,minWidth:u,minHeight:l,maxHeight:c};return t.createElement(Ta.ZP,{handleWidth:!0,handleHeight:!0,onResize:E,targetRef:x},t.createElement("div",Xa({},null!=p?{id:"".concat(p)}:{},{className:Ea()("recharts-responsive-container",m),style:T,ref:x}),function(){var e=g.containerWidth,n=g.containerHeight;if(e<0||n<0)return null;qa(ja(a)||ja(s),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,s),qa(!r||r>0,"The aspect(%s) must be greater than zero.",r);var i=ja(a)?e:a,o=ja(s)?n:s;return r&&r>0&&(i?o=i/r:o&&(i=o*r),c&&o>c&&(o=c)),qa(i>0||o>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,o,a,s,u,l,r),(0,t.cloneElement)(d,{width:i,height:o})}()))})),$a=n(82730),Ja=n.n($a),eo=n(61211),to=n.n(eo),no=n(74786),ro=n.n(no),io=n(33038),ao=n.n(io),oo=n(64286),so=n.n(oo),uo=n(66222),lo=n.n(uo),co=n(42854),ho=n.n(co),fo=n(65127),po=n.n(fo),mo=n(8092),vo=n.n(mo);function go(e){return go="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},go(e)}var yo=["viewBox","children"],xo=["className","color","height","id","lang","max","media","method","min","name","style","target","type","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_o=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],bo=function(e,n,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,t.isValidElement)(e)&&(i=e.props),!vo()(i))return null;var a={};return Object.keys(i).forEach((function(e){(xo.includes(e)||r&&yo.includes(e)||n&&_o.includes(e))&&(a[e]=i[e])})),a},wo=function(e,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,t.isValidElement)(e)&&(r=e.props),!vo()(r))return null;var i={};return Object.keys(r).forEach((function(e){_o.includes(e)&&(i[e]=n||function(t){return r[e](r,t)})})),i},So=function(e,t,n){if(!vo()(e)||"object"!==go(e))return null;var r=null;return Object.keys(e).forEach((function(i){var a=e[i];_o.includes(i)&&"function"===typeof a&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(a,t,n))})),r};function Mo(){return Mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mo.apply(this,arguments)}function Eo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function To(e){var n=e.children,r=e.width,i=e.height,a=e.viewBox,o=e.className,s=e.style,u=Eo(e,["children","width","height","viewBox","className","style"]),l=a||{width:r,height:i,x:0,y:0},c=Ea()("recharts-surface",o);return t.createElement("svg",Mo({},bo(u,!0,!0),{className:c,width:r,height:i,style:s,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height),version:"1.1"}),n)}function ko(){return ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ko.apply(this,arguments)}function Co(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ao(e){var n=e.children,r=e.className,i=Co(e,["children","className"]),a=Ea()("recharts-layer",r);return t.createElement("g",ko({className:a},bo(i,!0)),n)}var Po=n(66339),Oo=n.n(Po),Lo=n(25244),Ro=n(55475),Do=n.n(Ro);function Io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,r=function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):Do()(r)};Do()(r)}function Fo(e){return Fo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function No(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zo(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=No(r),a=i[0],o=i.slice(1);return"number"===typeof a?void Io(n.bind(null,o),a):(n(a),void Io(n.bind(null,o)))}"object"===Fo(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){Vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=["Webkit","Moz","O","ms"],Ho=["-webkit-","-moz-","-o-","-ms-"],Zo=["transform","transformOrigin","transition"],Wo=function(e){return e},qo=function(e,t){return Object.keys(t).reduce((function(n,r){return Bo(Bo({},n),{},Vo({},r,e(r,t[r])))}),{})},Xo=function(e){return Object.keys(e).reduce((function(e,t){return Bo(Bo({},e),function(e,t){if(-1===Zo.indexOf(e))return Vo({},e,t);var n="transition"===e,r=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),i=t;return Go.reduce((function(e,a,o){return n&&(i=t.replace(/(transform|transform-origin)/gim,"".concat(Ho[o],"$1"))),Bo(Bo({},e),{},Vo({},a+r,i))}),{})}(t,e[t]))}),e)},Ko=function(e,t,n){return e.map((function(e){return"".concat(function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())}))}(e)," ").concat(t,"ms ").concat(n)})).join(",")};function Yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||$o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e){return function(e){if(Array.isArray(e))return Jo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $o(e,t){if(e){if("string"===typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jo(e,t):void 0}}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var es=1e-4,ts=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},ns=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},rs=function(e,t){return function(n){var r=ts(e,t);return ns(r,n)}},is=function(e,t){return function(n){var r=ts(e,t),i=[].concat(Qo(r.map((function(e,t){return e*t})).slice(1)),[0]);return ns(i,n)}},as=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,a=1,o=1;break;case"ease":r=.25,i=.1,a=.25,o=1;break;case"ease-in":r=.42,i=0,a=1,o=1;break;case"ease-out":r=.42,i=0,a=.58,o=1;break;case"ease-in-out":r=0,i=0,a=.58,o=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var u=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),l=Yo(u,4);r=l[0],i=l[1],a=l[2],o=l[3]}}[r,a,i,o].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var c=rs(r,a),d=rs(i,o),h=is(r,a),f=function(e){return e>1?1:e<0?0:e},p=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=c(n)-t,a=h(n);if(Math.abs(i-t)<es||a<es)return d(n);n=f(n-i/a)}return d(n)};return p.isStepper=!1,p},os=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,a=e.dt,o=void 0===a?17:a,s=function(e,t,r){var a=r+(-(e-t)*n-r*i)*o/1e3,s=r*o/1e3+e;return Math.abs(s-t)<es&&Math.abs(a)<es?[t,0]:[s,a]};return s.isStepper=!0,s.dt=o,s};function ss(e){return function(e){if(Array.isArray(e))return fs(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||hs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach((function(t){cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ds(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||hs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hs(e,t){if(e){if("string"===typeof e)return fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fs(e,t):void 0}}function fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ps=function(e,t,n){return e+(t-e)*n},ms=function(e){return e.from!==e.to},vs=function e(t,n,r){var i=qo((function(e,n){if(ms(n)){var r=ds(t(n.from,n.to,n.velocity),2),i=r[0],a=r[1];return ls(ls({},n),{},{from:i,velocity:a})}return n}),n);return r<1?qo((function(e,t){return ms(t)?ls(ls({},t),{},{velocity:ps(t.velocity,i[e].velocity,r),from:ps(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)},gs=function(e,t,n,r,i){var a,o,s,u,l=(a=e,o=t,[Object.keys(a),Object.keys(o)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),c=l.reduce((function(n,r){return ls(ls({},n),{},cs({},r,[e[r],t[r]]))}),{}),d=l.reduce((function(n,r){return ls(ls({},n),{},cs({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),h=-1,f=function(){return null};return f=n.isStepper?function(r){s||(s=r);var a=(r-s)/n.dt;d=vs(n,d,a),i(ls(ls(ls({},e),t),qo((function(e,t){return t.from}),d))),s=r,Object.values(d).filter(ms).length&&(h=Do()(f))}:function(a){u||(u=a);var o=(a-u)/r,s=qo((function(e,t){return ps.apply(void 0,ss(t).concat([n(o)]))}),c);if(i(ls(ls(ls({},e),t),s)),o<1)h=Do()(f);else{var l=qo((function(e,t){return ps.apply(void 0,ss(t).concat([n(1)]))}),c);i(ls(ls(ls({},e),t),l))}},function(){return Do()(f),function(){(0,Ro.cancel)(h)}}};function ys(e){return ys="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(e)}function xs(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _s(e){return function(e){if(Array.isArray(e))return bs(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return bs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bs(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ts(e,t){return Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ts(e,t)}function ks(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ps(e);if(t){var i=Ps(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cs(this,n)}}function Cs(e,t){return!t||"object"!==ys(t)&&"function"!==typeof t?As(e):t}function As(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ps(e){return Ps=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ps(e)}var Os=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}(o,e);var n,r,i,a=ks(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=a.call(this,e,t)).props,i=r.isActive,s=r.attributeName,u=r.from,l=r.to,c=r.steps,d=r.children;if(n.handleStyleChange=n.handleStyleChange.bind(As(n)),n.changeStyle=n.changeStyle.bind(As(n)),!i)return n.state={style:{}},"function"===typeof d&&(n.state={style:l}),Cs(n);if(c&&c.length)n.state={style:c[0].style};else if(u){if("function"===typeof d)return n.state={style:u},Cs(n);n.state={style:s?Ms({},s,u):u}}else n.state={style:{}};return n}return n=o,r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,a=t.shouldReAnimate;if(r)if(n){if(!((0,Lo.deepEqual)(e.to,this.props.to)&&e.canBegin&&e.isActive)){var o=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var s=o||a?this.props.from:e.to;if(this.state&&this.state.style){var u={style:i?Ms({},i,s):s};(i&&this.state.style[i]!==s||!i&&this.state.style!==s)&&this.setState(u)}this.runAnimation(Ss(Ss({},this.props),{},{from:s,begin:0}))}}else{var l={style:i?Ms({},i,this.props.to):this.props.to};this.state&&this.state.style&&(i&&this.state.style[i]!==this.props.to||!i&&this.state.style!==this.props.to)&&this.setState(l)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,a=e.easing,o=e.begin,s=e.onAnimationEnd,u=e.onAnimationStart,l=gs(n,r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return as(r);case"spring":return os();default:if("cubic-bezier"===r.split("(")[0])return as(r)}return"function"===typeof r?r:null}(a),i,this.changeStyle);this.manager.start([u,o,function(){t.stopJSAnimation=l()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,a=n[0],o=a.style,s=a.duration,u=void 0===s?0:s;return this.manager.start([i].concat(_s(n.reduce((function(e,r,i){if(0===i)return e;var a=r.duration,o=r.easing,s=void 0===o?"ease":o,u=r.style,l=r.properties,c=r.onAnimationEnd,d=i>0?n[i-1]:r,h=l||Object.keys(u);if("function"===typeof s||"spring"===s)return[].concat(_s(e),[t.runJSAnimation.bind(t,{from:d.style,to:u,duration:a,easing:s}),a]);var f=Ko(h,a,s),p=Ss(Ss(Ss({},d.style),u),{},{transition:f});return[].concat(_s(e),[p,a,c]).filter(Wo)}),[o,Math.max(u,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=zo());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,a=e.easing,o=e.onAnimationStart,s=e.onAnimationEnd,u=e.steps,l=e.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!==typeof a&&"function"!==typeof l&&"spring"!==a)if(u.length>1)this.runStepAnimation(e);else{var d=r?Ms({},r,i):i,h=Ko(Object.keys(d),n,a);c.start([o,t,Ss(Ss({},d),{},{transition:h}),n,s])}else this.runJSAnimation(e)}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"render",value:function(){var e=this.props,n=e.children,r=(e.begin,e.duration,e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,xs(e,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"])),a=t.Children.count(n),o=Xo(this.state.style);if("function"===typeof n)return n(o);if(!r||0===a)return n;var s=function(e){var n=e.props,r=n.style,a=void 0===r?{}:r,s=n.className;return(0,t.cloneElement)(e,Ss(Ss({},i),{},{style:Ss(Ss({},a),o),className:s}))};return 1===a?s(t.Children.only(n)):t.createElement("div",null,t.Children.map(n,(function(e){return s(e)})))}}],r&&Es(n.prototype,r),i&&Es(n,i),o}(t.PureComponent);Os.displayName="Animate",Os.propTypes={from:de().oneOfType([de().object,de().string]),to:de().oneOfType([de().object,de().string]),attributeName:de().string,duration:de().number,begin:de().number,easing:de().oneOfType([de().string,de().func]),steps:de().arrayOf(de().shape({duration:de().number.isRequired,style:de().object.isRequired,easing:de().oneOfType([de().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),de().func]),properties:de().arrayOf("string"),onAnimationEnd:de().func})),children:de().oneOfType([de().node,de().func]),isActive:de().bool,canBegin:de().bool,onAnimationEnd:de().func,shouldReAnimate:de().bool,onAnimationStart:de().func,onAnimationReStart:de().func},Os.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};var Ls=Os,Rs=n(25937);function Ds(e){return Ds="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(e)}function Is(){return Is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}function Fs(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(n),!0).forEach((function(t){zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Us(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vs(e,t){return Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vs(e,t)}function Gs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zs(e);if(t){var i=Zs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hs(this,n)}}function Hs(e,t){return!t||"object"!==Ds(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zs(e){return Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zs(e)}void 0===Number.isFinite&&(Number.isFinite=function(e){return"number"===typeof e&&isFinite(e)});var Ws=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},qs=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(o,e);var n,r,i,a=Gs(o);function o(){var e;Us(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={isActive:!1},e.handleEnter=function(t,n){var r=e.props,i=r.appearOptions,a=r.enterOptions;e.handleStyleActive(n?i:a)},e.handleExit=function(){e.handleStyleActive(e.props.leaveOptions)},e}return n=o,(r=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(js(js({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return Ws(t)+Ws(n)+Ws(r)}},{key:"render",value:function(){var e=this,n=this.props,r=n.children,i=(n.appearOptions,n.enterOptions,n.leaveOptions,Fs(n,["children","appearOptions","enterOptions","leaveOptions"]));return t.createElement(Rs.Transition,Is({},i,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return t.createElement(Ls,e.state,t.Children.only(r))}))}}])&&Bs(n.prototype,r),i&&Bs(n,i),o}(t.Component);qs.propTypes={appearOptions:de().object,enterOptions:de().object,leaveOptions:de().object,children:de().element};var Xs=qs;function Ks(e){var n=e.component,r=e.children,i=e.appear,a=e.enter,o=e.leave;return t.createElement(Rs.TransitionGroup,{component:n},t.Children.map(r,(function(e,n){return t.createElement(Xs,{appearOptions:i,enterOptions:a,leaveOptions:o,key:"child-".concat(n)},e)})))}Ks.propTypes={appear:de().object,enter:de().object,leave:de().object,children:de().oneOfType([de().array,de().element]),component:de().any},Ks.defaultProps={component:"span"};var Ys=Ls;function Qs(e){return Qs="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(e)}function $s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Js(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){nu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ru(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function au(e,t){return au=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},au(e,t)}function ou(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uu(e);if(t){var i=uu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return su(this,n)}}function su(e,t){return!t||"object"!==Qs(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uu(e){return uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uu(e)}function lu(e){return Pa()(e)&&Ua(e[0])&&Ua(e[1])?e.join(" ~ "):e}var cu=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&au(e,t)}(o,e);var n,r,i,a=ou(o);function o(){return ru(this,o),a.apply(this,arguments)}return n=o,r=[{key:"renderContent",value:function(){var e=this.props,n=e.payload,r=e.separator,i=e.formatter,a=e.itemStyle,o=e.itemSorter;if(n&&n.length){var s=(o?so()(n,o):n).map((function(e,o){if("none"===e.type)return null;var s=tu({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),u=e.formatter||i||lu,l=e.name,c=e.value;if(u){var d=u(c,l,e,o,n);if(Array.isArray(d)){var h=$s(d,2);c=h[0],l=h[1]}else c=d}return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(o),style:s},Ua(l)?t.createElement("span",{className:"recharts-tooltip-item-name"},l):null,Ua(l)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},c),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},s)}return null}},{key:"render",value:function(){var e=this.props,n=e.wrapperClassName,r=e.contentStyle,i=e.labelClassName,a=e.labelStyle,o=e.label,s=e.labelFormatter,u=e.payload,l=tu({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),c=tu({margin:0},a),d=!ho()(o),h=d?o:"",f=Ea()("recharts-default-tooltip",n),p=Ea()("recharts-tooltip-label",i);return d&&s&&(h=s(o,u)),t.createElement("div",{className:f,style:l},t.createElement("p",{className:p,style:c},t.isValidElement(h)?h:"".concat(h)),this.renderContent())}}],r&&iu(n.prototype,r),i&&iu(n,i),o}(t.PureComponent);cu.displayName="DefaultTooltipContent",cu.defaultProps={separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}};var du={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return du[e]},set:function(e,t){if("string"===typeof e)du[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){du[t]=e[t]}))}}};function hu(e){return hu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(e)}function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(n),!0).forEach((function(t){mu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yu(e,t){return yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yu(e,t)}function xu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bu(e);if(t){var i=bu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _u(this,n)}}function _u(e,t){return!t||"object"!==hu(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bu(e){return bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bu(e)}var wu="recharts-tooltip-wrapper";function Su(e){return e.dataKey}var Mu=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yu(e,t)}(o,e);var n,r,i,a=xu(o);function o(){var e;vu(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={boxWidth:-1,boxHeight:-1},e.wrapperNode=void 0,e.getTranslate=function(t){var n=t.key,r=t.tooltipDimension,i=t.viewBoxDimension,a=e.props,o=a.allowEscapeViewBox,s=a.coordinate,u=a.offset,l=a.position,c=a.viewBox;if(l&&za(l[n]))return l[n];var d=s[n]-r-u,h=s[n]+u;return o[n]?h:s[n]+r+u>c[n]+i?Math.max(d,c[n]):Math.max(h,c[n])},e}return n=o,(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>1||Math.abs(r.height-n)>1)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e,n,r,i=this,a=this.props,o=a.payload,s=a.isAnimationActive,u=a.animationDuration,l=a.animationEasing,c=a.filterNull,d=function(e,t){return!0===e?Oo()(t,Su):ro()(e)?Oo()(t,e):t}(a.payloadUniqBy,c&&o&&o.length?o.filter((function(e){return!ho()(e.value)})):o),h=d&&d.length,f=this.props,p=f.content,m=f.viewBox,v=f.coordinate,g=f.position,y=f.active,x=pu({pointerEvents:"none",visibility:y&&h?"visible":"hidden",position:"absolute",top:0,left:0},f.wrapperStyle);if(g&&za(g.x)&&za(g.y))n=g.x,r=g.y;else{var _=this.state,b=_.boxWidth,w=_.boxHeight;b>0&&w>0&&v?(n=this.getTranslate({key:"x",tooltipDimension:b,viewBoxDimension:m.width}),r=this.getTranslate({key:"y",tooltipDimension:w,viewBoxDimension:m.height})):x.visibility="hidden"}x=pu(pu({},Xo({transform:this.props.useTranslate3d?"translate3d(".concat(n,"px, ").concat(r,"px, 0)"):"translate(".concat(n,"px, ").concat(r,"px)")})),x),s&&y&&(x=pu(pu({},Xo({transition:"transform ".concat(u,"ms ").concat(l)})),x));var S=Ea()(wu,(mu(e={},"".concat(wu,"-right"),za(n)&&v&&za(v.x)&&n>=v.x),mu(e,"".concat(wu,"-left"),za(n)&&v&&za(v.x)&&n<v.x),mu(e,"".concat(wu,"-bottom"),za(r)&&v&&za(v.y)&&r>=v.y),mu(e,"".concat(wu,"-top"),za(r)&&v&&za(v.y)&&r<v.y),e));return t.createElement("div",{className:S,style:x,ref:function(e){i.wrapperNode=e}},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):ro()(e)?t.createElement(e,n):t.createElement(cu,n)}(p,pu(pu({},this.props),{},{payload:d})))}}])&&gu(n.prototype,r),i&&gu(n,i),o}(t.PureComponent);Mu.displayName="Tooltip",Mu.defaultProps={active:!1,allowEscapeViewBox:{x:!1,y:!1},offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!du.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1};var Eu=n(52085),Tu=n.n(Eu),ku=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI),Cu=2*ku;var Au={draw:function(e,t){var n=Math.sqrt(t/ku);e.moveTo(n,0),e.arc(0,0,n,0,Cu)}},Pu={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ou=Math.sqrt(1/3),Lu=2*Ou,Ru={draw:function(e,t){var n=Math.sqrt(t/Lu),r=n*Ou;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Du={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},Iu=Math.sin(ku/10)/Math.sin(7*ku/10),Fu=Math.sin(Cu/10)*Iu,Nu=-Math.cos(Cu/10)*Iu,ju={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=Fu*n,i=Nu*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=Cu*a/5,s=Math.cos(o),u=Math.sin(o);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},zu=Math.sqrt(3),Uu={draw:function(e,t){var n=-Math.sqrt(t/(3*zu));e.moveTo(0,2*n),e.lineTo(-zu*n,-n),e.lineTo(zu*n,-n),e.closePath()}},Bu=-.5,Vu=Math.sqrt(3)/2,Gu=1/Math.sqrt(12),Hu=3*(Gu/2+1),Zu={draw:function(e,t){var n=Math.sqrt(t/Hu),r=n/2,i=n*Gu,a=r,o=n*Gu+n,s=-a,u=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,u),e.lineTo(Bu*r-Vu*i,Vu*r+Bu*i),e.lineTo(Bu*a-Vu*o,Vu*a+Bu*o),e.lineTo(Bu*s-Vu*u,Vu*s+Bu*u),e.lineTo(Bu*r+Vu*i,Bu*i-Vu*r),e.lineTo(Bu*a+Vu*o,Bu*o-Vu*a),e.lineTo(Bu*s+Vu*u,Bu*u-Vu*s),e.closePath()}},Wu=Math.PI,qu=2*Wu,Xu=1e-6,Ku=qu-Xu;function Yu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Qu(){return new Yu}Yu.prototype=Qu.prototype={constructor:Yu,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-e,u=r-t,l=a-e,c=o-t,d=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>Xu)if(Math.abs(c*s-u*l)>Xu&&i){var h=n-a,f=r-o,p=s*s+u*u,m=h*h+f*f,v=Math.sqrt(p),g=Math.sqrt(d),y=i*Math.tan((Wu-Math.acos((p+d-m)/(2*v*g)))/2),x=y/g,_=y/v;Math.abs(x-1)>Xu&&(this._+="L"+(e+x*l)+","+(t+x*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*f)+","+(this._x1=e+_*s)+","+(this._y1=t+_*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,l=t+s,c=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Xu||Math.abs(this._y1-l)>Xu)&&(this._+="L"+u+","+l),n&&(d<0&&(d=d%qu+qu),d>Ku?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):d>Xu&&(this._+="A"+n+","+n+",0,"+ +(d>=Wu)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var $u=Qu;function Ju(e){return function(){return e}}function el(e){return el="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(e)}function tl(){return tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tl.apply(this,arguments)}function nl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function il(e,t){return il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},il(e,t)}function al(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sl(e);if(t){var i=sl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ol(this,n)}}function ol(e,t){return!t||"object"!==el(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sl(e){return sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sl(e)}var ul={symbolCircle:Au,symbolCross:Pu,symbolDiamond:Ru,symbolSquare:Du,symbolStar:ju,symbolTriangle:Uu,symbolWye:Zu},ll=Math.PI/180,cl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&il(e,t)}(o,e);var n,r,i,a=al(o);function o(){return nl(this,o),a.apply(this,arguments)}return n=o,r=[{key:"getPath",value:function(){var e=this.props,t=e.size,n=e.sizeType,r=e.type,i=function(e){var t="symbol".concat(Tu()(e));return ul[t]||Au}(r),a=function(e,t){var n=null;function r(){var r;if(n||(n=r=$u()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:Ju(e||Au),t="function"===typeof t?t:Ju(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:Ju(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:Ju(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(i).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*ll;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(t,n,r));return a()}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.cx,i=e.cy,a=e.size;return r===+r&&i===+i&&a===+a?t.createElement("path",tl({},bo(this.props,!0),{className:Ea()("recharts-symbols",n),transform:"translate(".concat(r,", ").concat(i,")"),d:this.getPath()})):null}}],r&&rl(n.prototype,r),i&&rl(n,i),o}(t.PureComponent);function dl(e){return dl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dl(e)}function hl(){return hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hl.apply(this,arguments)}function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gl(e,t){return gl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gl(e,t)}function yl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_l(e);if(t){var i=_l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xl(this,n)}}function xl(e,t){return!t||"object"!==dl(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _l(e){return _l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_l(e)}cl.defaultProps={type:"circle",size:64,sizeType:"area"},cl.registerSymbol=function(e,t){ul["symbol".concat(Tu()(e))]=t};var bl=32,wl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gl(e,t)}(o,e);var n,r,i,a=yl(o);function o(){return ml(this,o),a.apply(this,arguments)}return n=o,r=[{key:"renderIcon",value:function(e){var n=this.props.inactiveColor,r=16,i=bl/6,a=bl/3,o=e.inactive?n:e.color;if("plainline"===e.type)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:bl,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(r,"h").concat(a,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(r,"\n            H").concat(bl,"M").concat(2*a,",").concat(r,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return t.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(bl,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){pl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete s.legendIcon,t.cloneElement(e.legendIcon,s)}return t.createElement(cl,{fill:o,cx:r,cy:r,size:bl,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,n=this.props,r=n.payload,i=n.iconSize,a=n.layout,o=n.formatter,s=n.inactiveColor,u={x:0,y:0,width:bl,height:bl},l={display:"horizontal"===a?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((function(n,r){var a,d=n.formatter||o,h=Ea()((pl(a={"recharts-legend-item":!0},"legend-item-".concat(r),!0),pl(a,"inactive",n.inactive),a));if("none"===n.type)return null;var f=n.inactive?s:n.color;return t.createElement("li",hl({className:h,style:l,key:"legend-item-".concat(r)},So(e.props,n,r)),t.createElement(To,{width:i,height:i,viewBox:u,style:c},e.renderIcon(n)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},d?d(n.value,n,r):n.value))}))}},{key:"render",value:function(){var e=this.props,n=e.payload,r=e.layout,i=e.align;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===r?i:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}],r&&vl(n.prototype,r),i&&vl(n,i),o}(t.PureComponent);function Sl(e){return Sl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(e)}function Ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(n),!0).forEach((function(t){Tl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Al(e,t){return Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Al(e,t)}function Pl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ll(e);if(t){var i=Ll(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ol(this,n)}}function Ol(e,t){return!t||"object"!==Sl(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ll(e){return Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ll(e)}function Rl(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Dl(e){return e.value}function Il(e,t){return!0===e?Oo()(t,Dl):ro()(e)?Oo()(t,e):t}wl.displayName="Legend",wl.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"};var Fl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Al(e,t)}(o,e);var n,r,i,a=Pl(o);function o(){var e;kl(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).wrapperNode=void 0,e.state={boxWidth:-1,boxHeight:-1},e}return n=o,i=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&za(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;return t>=0&&n>=0?{width:t,height:n}:null}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,a=r.align,o=r.verticalAlign,s=r.margin,u=r.chartWidth,l=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===a&&"vertical"===i?{left:((u||0)-(this.getBBoxSnapshot()||{width:0}).width)/2}:"right"===a?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===o?{top:((l||0)-(this.getBBoxSnapshot()||{height:0}).height)/2}:"bottom"===o?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),El(El({},t),n)}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight,r=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-t)>1||Math.abs(i.height-n)>1)&&this.setState({boxWidth:i.width,boxHeight:i.height},(function(){r&&r(i)}))}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1},(function(){r&&r(null)}))}},{key:"render",value:function(){var e=this,n=this.props,r=n.content,i=n.width,a=n.height,o=n.wrapperStyle,s=n.payloadUniqBy,u=n.payload,l=El(El({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(o)),o);return t.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,n){if(t.isValidElement(e))return t.cloneElement(e,n);if(ro()(e))return t.createElement(e,n);n.ref;var r=Rl(n,["ref"]);return t.createElement(wl,r)}(r,El(El({},this.props),{},{payload:Il(s,u)})))}}])&&Cl(n.prototype,r),i&&Cl(n,i),o}(t.PureComponent);function Nl(){}function jl(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zl(e){this._context=e}function Ul(e){this._context=e}function Bl(e){this._context=e}function Vl(e){this._context=e}function Gl(e){this._context=e}function Hl(e){return new Gl(e)}function Zl(e){return e<0?-1:1}function Wl(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Zl(a)+Zl(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ql(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Xl(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function Kl(e){this._context=e}function Yl(e){this._context=new Ql(e)}function Ql(e){this._context=e}function $l(e){this._context=e}function Jl(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function ec(e,t){this._context=e,this._t=t}Fl.displayName="Legend",Fl.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"},zl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jl(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Ul.prototype={areaStart:Nl,areaEnd:Nl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:jl(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:jl(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Vl.prototype={areaStart:Nl,areaEnd:Nl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Gl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xl(this,this._t0,ql(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Xl(this,ql(this,n=Wl(this,e,t)),n);break;default:Xl(this,this._t0,n=Wl(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Yl.prototype=Object.create(Kl.prototype)).point=function(e,t){Kl.prototype.point.call(this,t,e)},Ql.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},$l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Jl(e),i=Jl(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};Array.prototype.slice;function tc(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function nc(e){return e[0]}function rc(e){return e[1]}function ic(e,t){var n=Ju(!0),r=null,i=Hl,a=null;function o(o){var s,u,l,c=(o=tc(o)).length,d=!1;for(null==r&&(a=i(l=$u())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(u,s,o),+t(u,s,o));if(l)return a=null,l+""||null}return e="function"===typeof e?e:void 0===e?nc:Ju(e),t="function"===typeof t?t:void 0===t?rc:Ju(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Ju(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Ju(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:Ju(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o}function ac(e,t,n){var r=null,i=Ju(!0),a=null,o=Hl,s=null;function u(u){var l,c,d,h,f,p=(u=tc(u)).length,m=!1,v=new Array(p),g=new Array(p);for(null==a&&(s=o(f=$u())),l=0;l<=p;++l){if(!(l<p&&i(h=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=l-1;d>=c;--d)s.point(v[d],g[d]);s.lineEnd(),s.areaEnd()}m&&(v[l]=+e(h,l,u),g[l]=+t(h,l,u),s.point(r?+r(h,l,u):v[l],n?+n(h,l,u):g[l]))}if(f)return s=null,f+""||null}function l(){return ic().defined(i).curve(o).context(a)}return e="function"===typeof e?e:void 0===e?nc:Ju(+e),t="function"===typeof t?t:Ju(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?rc:Ju(+n),u.x=function(t){return arguments.length?(e="function"===typeof t?t:Ju(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"===typeof t?t:Ju(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Ju(+e),u):r},u.y=function(e){return arguments.length?(t="function"===typeof e?e:Ju(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"===typeof e?e:Ju(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Ju(+e),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"===typeof e?e:Ju(!!e),u):i},u.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),u):o},u.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),u):a},u}function oc(e){return oc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}function sc(){return sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sc.apply(this,arguments)}function uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fc(e,t){return fc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fc(e,t)}function pc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vc(e);if(t){var i=vc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mc(this,n)}}function mc(e,t){return!t||"object"!==oc(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vc(e){return vc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vc(e)}var gc={curveBasisClosed:function(e){return new Ul(e)},curveBasisOpen:function(e){return new Bl(e)},curveBasis:function(e){return new zl(e)},curveLinearClosed:function(e){return new Vl(e)},curveLinear:Hl,curveMonotoneX:function(e){return new Kl(e)},curveMonotoneY:function(e){return new Yl(e)},curveNatural:function(e){return new $l(e)},curveStep:function(e){return new ec(e,.5)},curveStepAfter:function(e){return new ec(e,1)},curveStepBefore:function(e){return new ec(e,0)}},yc=function(e){return e.x===+e.x&&e.y===+e.y},xc=function(e){return e.x},_c=function(e){return e.y},bc=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fc(e,t)}(o,e);var n,r,i,a=pc(o);function o(){return dc(this,o),a.apply(this,arguments)}return n=o,r=[{key:"getPath",value:function(){var e,t=this.props,n=t.type,r=t.points,i=t.baseLine,a=t.layout,o=t.connectNulls,s=function(e,t){if(ro()(e))return e;var n="curve".concat(Tu()(e));return"curveMonotone"===n&&t?gc["".concat(n).concat("vertical"===t?"Y":"X")]:gc[n]||Hl}(n,a),u=o?r.filter((function(e){return yc(e)})):r;if(Pa()(i)){var l=o?i.filter((function(e){return yc(e)})):i,c=u.map((function(e,t){return lc(lc({},e),{},{base:l[t]})}));return(e="vertical"===a?ac().y(_c).x1(xc).x0((function(e){return e.base.x})):ac().x(xc).y1(_c).y0((function(e){return e.base.y}))).defined(yc).curve(s),e(c)}return(e="vertical"===a&&za(i)?ac().y(_c).x1(xc).x0(i):za(i)?ac().x(xc).y1(_c).y0(i):ic().x(xc).y(_c)).defined(yc).curve(s),e(u)}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?this.getPath():i;return t.createElement("path",sc({},bo(this.props),wo(this.props),{className:Ea()("recharts-curve",n),d:o,ref:a}))}}],r&&hc(n.prototype,r),i&&hc(n,i),o}(t.PureComponent);function wc(e){return wc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(e)}function Sc(){return Sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sc.apply(this,arguments)}function Mc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(e,t){return Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tc(e,t)}function kc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ac(e);if(t){var i=Ac(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cc(this,n)}}function Cc(e,t){return!t||"object"!==wc(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ac(e){return Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ac(e)}bc.defaultProps={type:"linear",points:[],connectNulls:!1};var Pc=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(o,e);var n,r,i,a=kc(o);function o(){return Mc(this,o),a.apply(this,arguments)}return n=o,r=[{key:"render",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,s=e.top,u=e.left,l=e.className;return za(n)&&za(r)&&za(i)&&za(a)&&za(s)&&za(u)?t.createElement("path",Sc({},bo(this.props,!0),{className:Ea()("recharts-cross",l),d:o.getPath(n,r,i,a,s,u)})):null}}],i=[{key:"getPath",value:function(e,t,n,r,i,a){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)}}],r&&Ec(n.prototype,r),i&&Ec(n,i),o}(t.PureComponent);function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){Rc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pc.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var Dc=Math.PI/180,Ic=function(e){return 180*e/Math.PI},Fc=function(e,t,n,r){return{x:e+Math.cos(-Dc*r)*n,y:t+Math.sin(-Dc*r)*n}},Nc=function(e,t){var n=e.x,r=e.y,i=t.cx,a=t.cy,o=function(e,t){var n=e.x,r=e.y,i=t.x,a=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2))}({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o};var s=(n-i)/o,u=Math.acos(s);return r>a&&(u=2*Math.PI-u),{radius:o,angle:Ic(u),angleInRadian:u}},jc=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360);return e+360*Math.min(i,a)},zc=function(e,t){var n=e.x,r=e.y,i=Nc({x:n,y:r},t),a=i.radius,o=i.angle,s=t.innerRadius,u=t.outerRadius;if(a<s||a>u)return!1;if(0===a)return!0;var l,c=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-360*a,endAngle:n-360*a}}(t),d=c.startAngle,h=c.endAngle,f=o;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;l=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;l=f>=h&&f<=d}return l?Lc(Lc({},t),{},{radius:a,angle:jc(f,t)}):null};function Uc(e){return Uc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(e)}function Bc(){return Bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bc.apply(this,arguments)}function Vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hc(e,t){return Hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hc(e,t)}function Zc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qc(e);if(t){var i=qc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wc(this,n)}}function Wc(e,t){return!t||"object"!==Uc(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qc(e){return qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qc(e)}var Xc=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,a=e.sign,o=e.isExternal,s=e.cornerRadius,u=e.cornerIsExternal,l=s*(o?1:-1)+r,c=Math.asin(s/l)/Dc,d=u?i:i+a*c,h=u?i-a*c:i;return{center:Fc(t,n,l,d),circleTangency:Fc(t,n,r,d),lineTangency:Fc(t,n,l*Math.cos(c*Dc),h),theta:c}},Kc=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,a=e.startAngle,o=function(e,t){return Na(t-e)*Math.min(Math.abs(t-e),359.999)}(a,e.endAngle),s=a+o,u=Fc(t,n,i,a),l=Fc(t,n,i,s),c="M ".concat(u.x,",").concat(u.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(a>s),",\n    ").concat(l.x,",").concat(l.y,"\n  ");if(r>0){var d=Fc(t,n,r,a),h=Fc(t,n,r,s);c+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(a<=s),",\n            ").concat(d.x,",").concat(d.y," Z")}else c+="L ".concat(t,",").concat(n," Z");return c},Yc=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hc(e,t)}(o,e);var n,r,i,a=Zc(o);function o(){return Vc(this,o),a.apply(this,arguments)}return n=o,r=[{key:"render",value:function(){var e=this.props,n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,u=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=e.className;if(a<i||l===c)return null;var h,f=Ea()("recharts-sector",d),p=a-i,m=Ga(o,p,0,!0);return h=m>0&&Math.abs(l-c)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,s=e.cornerIsExternal,u=e.startAngle,l=e.endAngle,c=Na(l-u),d=Xc({cx:t,cy:n,radius:i,angle:u,sign:c,cornerRadius:a,cornerIsExternal:s}),h=d.circleTangency,f=d.lineTangency,p=d.theta,m=Xc({cx:t,cy:n,radius:i,angle:l,sign:-c,cornerRadius:a,cornerIsExternal:s}),v=m.circleTangency,g=m.lineTangency,y=m.theta,x=s?Math.abs(u-l):Math.abs(u-l)-p-y;if(x<0)return o?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):Kc({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:l});var _="M ".concat(f.x,",").concat(f.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(c<0),",").concat(v.x,",").concat(v.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(g.x,",").concat(g.y,"\n  ");if(r>0){var b=Xc({cx:t,cy:n,radius:r,angle:u,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),w=b.circleTangency,S=b.lineTangency,M=b.theta,E=Xc({cx:t,cy:n,radius:r,angle:l,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),T=E.circleTangency,k=E.lineTangency,C=E.theta,A=s?Math.abs(u-l):Math.abs(u-l)-M-C;if(A<0&&0===a)return"".concat(_,"L").concat(t,",").concat(n,"Z");_+="L".concat(k.x,",").concat(k.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(T.x,",").concat(T.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(c>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(S.x,",").concat(S.y,"Z")}else _+="L".concat(t,",").concat(n,"Z");return _}({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(m,p/2),forceCornerRadius:s,cornerIsExternal:u,startAngle:l,endAngle:c}):Kc({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:l,endAngle:c}),t.createElement("path",Bc({},bo(this.props,!0),{className:f,d:h}))}}],r&&Gc(n.prototype,r),i&&Gc(n,i),o}(t.PureComponent);function Qc(e){return Qc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(e)}function $c(){return $c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$c.apply(this,arguments)}function Jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function td(e,t){return td=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},td(e,t)}function nd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=id(e);if(t){var i=id(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rd(this,n)}}function rd(e,t){return!t||"object"!==Qc(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function id(e){return id=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},id(e)}Yc.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1};var ad=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&td(e,t)}(o,e);var n,r,i,a=nd(o);function o(){return Jc(this,o),a.apply(this,arguments)}return n=o,(r=[{key:"render",value:function(){var e=this.props,n=e.cx,r=e.cy,i=e.r,a=e.className,o=Ea()("recharts-dot",a);return n===+n&&r===+r&&i===+i?t.createElement("circle",$c({},bo(this.props),wo(this.props),{className:o,cx:n,cy:r,r:i})):null}}])&&ed(n.prototype,r),i&&ed(n,i),o}(t.PureComponent);function od(e){return od="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(e)}function sd(){return sd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sd.apply(this,arguments)}function ud(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cd(e,t){return cd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cd(e,t)}function dd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fd(e);if(t){var i=fd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hd(this,n)}}function hd(e,t){return!t||"object"!==od(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fd(e){return fd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fd(e)}var pd=function(e,t,n,r,i){var a,o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,u=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0;if(o>0&&i instanceof Array){for(var c=[0,0,0,0],d=0;d<4;d++)c[d]=i[d]>o?o:i[d];a="M".concat(e,",").concat(t+s*c[0]),c[0]>0&&(a+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(e+u*c[0],",").concat(t)),a+="L ".concat(e+n-u*c[1],",").concat(t),c[1]>0&&(a+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,",\n        ").concat(e+n,",").concat(t+s*c[1])),a+="L ".concat(e+n,",").concat(t+r-s*c[2]),c[2]>0&&(a+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,",\n        ").concat(e+n-u*c[2],",").concat(t+r)),a+="L ".concat(e+u*c[3],",").concat(t+r),c[3]>0&&(a+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,",\n        ").concat(e,",").concat(t+r-s*c[3])),a+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);a="M ".concat(e,",").concat(t+s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+u*h,",").concat(t,"\n            L ").concat(e+n-u*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+n,",").concat(t+s*h,"\n            L ").concat(e+n,",").concat(t+r-s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+n-u*h,",").concat(t+r,"\n            L ").concat(e+u*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(l,",").concat(e,",").concat(t+r-s*h," Z")}else a="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return a},md=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,a=t.y,o=t.width,s=t.height;if(Math.abs(o)>0&&Math.abs(s)>0){var u=Math.min(i,i+o),l=Math.max(i,i+o),c=Math.min(a,a+s),d=Math.max(a,a+s);return n>=u&&n<=l&&r>=c&&r<=d}return!1},vd=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cd(e,t)}(o,e);var n,r,i,a=dd(o);function o(){var e;ud(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={totalLength:-1},e.node=void 0,e}return n=o,r=[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var e=this.node.getTotalLength();e&&this.setState({totalLength:e})}catch(t){}}},{key:"render",value:function(){var e=this,n=this.props,r=n.x,i=n.y,a=n.width,o=n.height,s=n.radius,u=n.className,l=this.state.totalLength,c=this.props,d=c.animationEasing,h=c.animationDuration,f=c.animationBegin,p=c.isAnimationActive,m=c.isUpdateAnimationActive;if(r!==+r||i!==+i||a!==+a||o!==+o||0===a||0===o)return null;var v=Ea()("recharts-rectangle",u);return m?t.createElement(Ys,{canBegin:l>0,from:{width:a,height:o,x:r,y:i},to:{width:a,height:o,x:r,y:i},duration:h,animationEasing:d,isActive:m},(function(n){var r=n.width,i=n.height,a=n.x,o=n.y;return t.createElement(Ys,{canBegin:l>0,from:"0px ".concat(-1===l?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:h,isActive:p,easing:d},t.createElement("path",sd({},bo(e.props,!0),{className:v,d:pd(a,o,r,i,s),ref:function(t){e.node=t}})))})):t.createElement("path",sd({},bo(this.props,!0),{className:v,d:pd(r,i,a,o,s)}))}}],r&&ld(n.prototype,r),i&&ld(n,i),o}(t.PureComponent);vd.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"};var gd=n(8493);function yd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function xd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _d={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},bd=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},wd=null,Sd=null,Md=function e(n){if(n===wd&&Pa()(Sd))return Sd;var r=[];return t.Children.forEach(n,(function(t){ho()(t)||((0,gd.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))})),Sd=r,wd=n,r},Ed=function(e,t){var n=[],r=[];return r=Pa()(t)?t.map((function(e){return bd(e)})):[bd(t)],Md(e).forEach((function(e){var t=Ca()(e,"type.displayName")||Ca()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n},Td=function(e,t){var n=Ed(e,t);return n&&n[0]},kd=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!za(n)||n<=0||!za(r)||r<=0)},Cd=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ad=function(e){return e&&e.type&&Fa()(e.type)&&Cd.indexOf(e.type)>=0},Pd=function e(n,r){if(n===r)return!0;var i=t.Children.count(n);if(i!==t.Children.count(r))return!1;if(0===i)return!0;if(1===i)return Od(Pa()(n)?n[0]:n,Pa()(r)?r[0]:r);for(var a=0;a<i;a++){var o=n[a],s=r[a];if(Pa()(o)||Pa()(s)){if(!e(o,s))return!1}else if(!Od(o,s))return!1}return!0},Od=function(e,t){if(ho()(e)&&ho()(t))return!0;if(!ho()(e)&&!ho()(t)){var n=e.props||{},r=n.children,i=xd(n,["children"]),a=t.props||{},o=a.children,s=xd(a,["children"]);return r&&o?yd(i,s)&&Pd(r,o):!r&&!o&&yd(i,s)}return!1},Ld=function(e,t){var n=[],r={};return Md(e).forEach((function(e,i){if(Ad(e))n.push(e);else if(e){var a=bd(e.type),o=t[a]||{},s=o.handler,u=o.once;if(s&&(!u||!r[a])){var l=s(e,a,i);n.push(l),r[a]=!0}}})),n};function Rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rd(Object(n),!0).forEach((function(t){Id(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Id(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fd(e){return function(e){if(Array.isArray(e))return Nd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Nd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jd={widthCache:{},cacheCount:0},zd={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ud=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],Bd="recharts_measurement_span";var Vd=function(e){return Object.keys(e).reduce((function(t,n){return"".concat(t).concat((r=n,r.split("").reduce((function(e,t){return t===t.toUpperCase()?[].concat(Fd(e),["-",t.toLowerCase()]):[].concat(Fd(e),[t])}),[]).join("")),":").concat(function(e,t){return Ud.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}(n,e[n]),";");var r}),"")},Gd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||du.isSsr)return{width:0,height:0};var n="".concat(e),r=Vd(t),i="".concat(n,"-").concat(r);if(jd.widthCache[i])return jd.widthCache[i];try{var a=document.getElementById(Bd);a||((a=document.createElement("span")).setAttribute("id",Bd),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=Dd(Dd({},zd),t);Object.keys(o).map((function(e){return a.style[e]=o[e],e})),a.textContent=n;var s=a.getBoundingClientRect(),u={width:s.width,height:s.height};return jd.widthCache[i]=u,++jd.cacheCount>2e3&&(jd.cacheCount=0,jd.widthCache={}),u}catch(l){return{width:0,height:0}}},Hd=n(72692),Zd=n.n(Hd);function Wd(e){return Wd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(e)}function qd(){return qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qd.apply(this,arguments)}function Xd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qd(e,t){return Qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qd(e,t)}function $d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eh(e);if(t){var i=eh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jd(this,n)}}function Jd(e,t){return!t||"object"!==Wd(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eh(e)}function th(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rh(Object(n),!0).forEach((function(t){ah(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ah(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oh=/[ \f\n\r\t\v\u2028\u2029]+/,sh=function(e){try{var t=[];return ho()(e.children)||(t=e.breakAll?e.children.toString().split(""):e.children.toString().split(oh)),{wordsWithComputedWidth:t.map((function(t){return{word:t,width:Gd(t,e.style).width}})),spaceWidth:e.breakAll?0:Gd("\xa0",e.style).width}}catch(n){return null}},uh=function(e){return[{words:ho()(e)?[]:e.toString().split(oh)}]},lh=function(e,t){if((e.width||e.scaleToFit)&&!du.isSsr&&t){var n=sh(e);return n?function(e,t,n,r,i){var a=za(e.maxLines),o=e.children,s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var a=t.word,o=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+o+n<r))s.words.push(a),s.width+=o+n;else{var u={words:[a],width:o};e.push(u)}return e}),[])},u=s(t);if(!a)return u;for(var l,c=function(t){var n=o.slice(0,t),i=sh(ih(ih({},e),{},{children:n+"\u2026"})).wordsWithComputedWidth,a=s(i),u=a.length>e.maxLines||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(a).width>r;return[u,a]},d=0,h=o.length-1,f=0;d<=h&&f<=o.length-1;){var p=Math.floor((d+h)/2),m=th(c(p-1),2),v=m[0],g=m[1],y=th(c(p),1)[0];if(v||y||(d=p+1),v&&y&&(h=p-1),!v&&y){l=g;break}f++}return l||u}(e,n.wordsWithComputedWidth,n.spaceWidth,e.width,e.scaleToFit):uh(e.children)}return uh(e.children)},ch=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qd(e,t)}(o,e);var n,r,i,a=$d(o);function o(){var e;Kd(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={},e}return n=o,r=[{key:"render",value:function(){var e=this.props,n=e.dx,r=e.dy,i=e.textAnchor,a=e.verticalAnchor,o=e.scaleToFit,s=e.angle,u=e.lineHeight,l=e.capHeight,c=e.className,d=e.breakAll,h=Xd(e,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className","breakAll"]),f=this.state.wordsByLines;if(!Ua(h.x)||!Ua(h.y))return null;var p,m=h.x+(za(n)?n:0),v=h.y+(za(r)?r:0);switch(a){case"start":p=Zd()("calc(".concat(l,")"));break;case"middle":p=Zd()("calc(".concat((f.length-1)/2," * -").concat(u," + (").concat(l," / 2))"));break;default:p=Zd()("calc(".concat(f.length-1," * -").concat(u,")"))}var g=[];if(o){var y=f[0].width,x=this.props.width;g.push("scale(".concat((za(x)?x/y:1)/y,")"))}return s&&g.push("rotate(".concat(s,", ").concat(m,", ").concat(v,")")),g.length&&(h.transform=g.join(" ")),t.createElement("text",qd({},bo(h,!0),{x:m,y:v,className:Ea()("recharts-text",c),textAnchor:i}),f.map((function(e,n){return t.createElement("tspan",{x:m,dy:0===n?p:u,key:n},e.words.join(d?"":" "))})))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){if(e.width!==t.prevWidth||e.scaleToFit!==t.prevScaleToFit||e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll){var n=e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll;return{prevWidth:e.width,prevScaleToFit:e.scaleToFit,prevChildren:e.children,prevStyle:e.style,wordsByLines:lh(e,n)}}return null}}],r&&Yd(n.prototype,r),i&&Yd(n,i),o}(t.Component);function dh(e){return function(e){if(Array.isArray(e))return hh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return hh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hh(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fh(Object(n),!0).forEach((function(t){mh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vh(){return vh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(this,arguments)}ch.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"};var gh=function(e,n,r){var i,a,o=e.position,s=e.viewBox,u=e.offset,l=e.className,c=s,d=c.cx,h=c.cy,f=c.innerRadius,p=c.outerRadius,m=c.startAngle,v=c.endAngle,g=c.clockWise,y=(f+p)/2,x=function(e,t){return Na(t-e)*Math.min(Math.abs(t-e),360)}(m,v),_=x>=0?1:-1;"insideStart"===o?(i=m+_*u,a=g):"insideEnd"===o?(i=v-_*u,a=!g):"end"===o&&(i=v+_*u,a=g),a=x<=0?a:!a;var b=Fc(d,h,y,i),w=Fc(d,h,y,i+359*(a?1:-1)),S="M".concat(b.x,",").concat(b.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(a?0:1,",\n    ").concat(w.x,",").concat(w.y),M=ho()(e.id)?Va("recharts-radial-line-"):e.id;return t.createElement("text",vh({},r,{dominantBaseline:"central",className:Ea()("recharts-radial-bar-label",l)}),t.createElement("defs",null,t.createElement("path",{id:M,d:S})),t.createElement("textPath",{xlinkHref:"#".concat(M)},n))};function yh(e){var n,r=e.viewBox,i=e.position,a=e.value,o=e.children,s=e.content,u=e.className,l=void 0===u?"":u,c=e.textBreakAll;if(!r||ho()(a)&&ho()(o)&&!(0,t.isValidElement)(s)&&!ro()(s))return null;if((0,t.isValidElement)(s))return(0,t.cloneElement)(s,e);if(ro()(s)){if(n=(0,t.createElement)(s,e),(0,t.isValidElement)(n))return n}else n=function(e){var t=e.value,n=e.formatter,r=ho()(e.children)?t:e.children;return ro()(n)?n(r):r}(e);var d=function(e){return za(e.cx)}(r),h=bo(e,!0);if(d&&("insideStart"===i||"insideEnd"===i||"end"===i))return gh(e,n,h);var f=d?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,a=i.cx,o=i.cy,s=i.innerRadius,u=i.outerRadius,l=(i.startAngle+i.endAngle)/2;if("outside"===r){var c=Fc(a,o,u+n,l),d=c.x;return{x:d,y:c.y,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var h=Fc(a,o,(s+u)/2,l);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(e):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,a=t,o=a.x,s=a.y,u=a.width,l=a.height,c=l>=0?1:-1,d=c*r,h=c>0?"end":"start",f=c>0?"start":"end",p=u>=0?1:-1,m=p*r,v=p>0?"end":"start",g=p>0?"start":"end";if("top"===i)return ph(ph({},{x:o+u/2,y:s-c*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(s-n.y,0),width:u}:{});if("bottom"===i)return ph(ph({},{x:o+u/2,y:s+l+d,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(s+l),0),width:u}:{});if("left"===i){var y={x:o-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return ph(ph({},y),n?{width:Math.max(y.x-n.x,0),height:l}:{})}if("right"===i){var x={x:o+u+m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return ph(ph({},x),n?{width:Math.max(n.x+n.width-x.x,0),height:l}:{})}var _=n?{width:u,height:l}:{};return"insideLeft"===i?ph({x:o+m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},_):"insideRight"===i?ph({x:o+u-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},_):"insideTop"===i?ph({x:o+u/2,y:s+d,textAnchor:"middle",verticalAnchor:f},_):"insideBottom"===i?ph({x:o+u/2,y:s+l-d,textAnchor:"middle",verticalAnchor:h},_):"insideTopLeft"===i?ph({x:o+m,y:s+d,textAnchor:g,verticalAnchor:f},_):"insideTopRight"===i?ph({x:o+u-m,y:s+d,textAnchor:v,verticalAnchor:f},_):"insideBottomLeft"===i?ph({x:o+m,y:s+l-d,textAnchor:g,verticalAnchor:h},_):"insideBottomRight"===i?ph({x:o+u-m,y:s+l-d,textAnchor:v,verticalAnchor:h},_):vo()(i)&&(za(i.x)||ja(i.x))&&(za(i.y)||ja(i.y))?ph({x:o+Ga(i.x,u),y:s+Ga(i.y,l),textAnchor:"end",verticalAnchor:"end"},_):ph({x:o+u/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},_)}(e);return t.createElement(ch,vh({className:Ea()("recharts-label",l)},h,f,{breakAll:c}),n)}yh.displayName="Label",yh.defaultProps={offset:5};var xh=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,a=e.endAngle,o=e.r,s=e.radius,u=e.innerRadius,l=e.outerRadius,c=e.x,d=e.y,h=e.top,f=e.left,p=e.width,m=e.height,v=e.clockWise,g=e.labelViewBox;if(g)return g;if(za(p)&&za(m)){if(za(c)&&za(d))return{x:c,y:d,width:p,height:m};if(za(h)&&za(f))return{x:h,y:f,width:p,height:m}}return za(c)&&za(d)?{x:c,y:d,width:0,height:0}:za(t)&&za(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:a||r||0,innerRadius:u||0,outerRadius:l||s||o||0,clockWise:v}:e.viewBox?e.viewBox:{}},_h=function(e,n){return e?!0===e?t.createElement(yh,{key:"label-implicit",viewBox:n}):Ua(e)?t.createElement(yh,{key:"label-implicit",viewBox:n,value:e}):(0,t.isValidElement)(e)?e.type===yh?(0,t.cloneElement)(e,{key:"label-implicit",viewBox:n}):t.createElement(yh,{key:"label-implicit",content:e,viewBox:n}):ro()(e)?t.createElement(yh,{key:"label-implicit",content:e,viewBox:n}):vo()(e)?t.createElement(yh,vh({viewBox:n},e,{key:"label-implicit"})):null:null};function bh(e){return bh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(e)}function wh(){return wh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wh.apply(this,arguments)}function Sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(n),!0).forEach((function(t){Eh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Th(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ch(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ah(e,t){return Ah=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ah(e,t)}function Ph(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lh(e);if(t){var i=Lh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Oh(this,n)}}function Oh(e,t){return!t||"object"!==bh(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lh(e)}yh.parseViewBox=xh,yh.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=xh(e),o=Ed(i,yh.displayName).map((function(e,r){return(0,t.cloneElement)(e,{viewBox:n||a,key:"label-".concat(r)})}));if(!r)return o;var s=_h(e.label,n||a);return[s].concat(dh(o))};var Rh=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ah(e,t)}(o,e);var n,r,i,a=Ph(o);function o(){return kh(this,o),a.apply(this,arguments)}return n=o,r=[{key:"shouldComponentUpdate",value:function(e){var t=e.viewBox,n=Th(e,["viewBox"]),r=this.props,i=r.viewBox,a=Th(r,["viewBox"]);return!yd(t,i)||!yd(n,a)}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,a,o,s=this.props,u=s.x,l=s.y,c=s.width,d=s.height,h=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,v=p?-1:1,g=e.tickSize||f,y=za(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,o=(r=(i=l+ +!p*d)-v*g)-v*m,a=y;break;case"left":r=i=e.coordinate,a=(t=(n=u+ +!p*c)-v*g)-v*m,o=y;break;case"right":r=i=e.coordinate,a=(t=(n=u+ +p*c)+v*g)+v*m,o=y;break;default:t=n=e.coordinate,o=(r=(i=l+ +p*d)+v*g)+v*m,a=y}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:a,y:o}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.orientation,s=e.mirror,u=e.axisLine,l=Mh(Mh(Mh({},bo(this.props)),bo(u)),{},{fill:"none"});if("top"===o||"bottom"===o){var c=+("top"===o&&!s||"bottom"===o&&s);l=Mh(Mh({},l),{},{x1:n,y1:r+c*a,x2:n+i,y2:r+c*a})}else{var d=+("left"===o&&!s||"right"===o&&s);l=Mh(Mh({},l),{},{x1:n+d*i,y1:r,x2:n+d*i,y2:r+a})}return t.createElement("line",wh({},l,{className:Ea()("recharts-cartesian-axis-line",Ca()(u,"className"))}))}},{key:"renderTicks",value:function(e){var n=this,r=this.props,i=r.tickLine,a=r.stroke,s=r.tick,u=r.tickFormatter,l=r.unit,c=o.getTicks(Mh(Mh({},this.props),{},{ticks:e})),d=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=bo(this.props),p=bo(s),m=Mh(Mh({},f),{},{fill:"none"},bo(i)),v=c.map((function(e,r){var v=n.getTickLineCoord(e),g=v.line,y=v.tick,x=Mh(Mh(Mh(Mh({textAnchor:d,verticalAnchor:h},f),{},{stroke:"none",fill:a},p),y),{},{index:r,payload:e,visibleTicksCount:c.length,tickFormatter:u});return t.createElement(Ao,wh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(r)},So(n.props,e,r)),i&&t.createElement("line",wh({},m,g,{className:Ea()("recharts-cartesian-axis-tick-line",Ca()(i,"className"))})),s&&o.renderTickItem(s,x,"".concat(ro()(u)?u(e.value,r):e.value).concat(l||"")))}));return t.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var e=this.props,n=e.axisLine,r=e.width,i=e.height,a=e.ticksGenerator,o=e.className;if(e.hide)return null;var s=this.props,u=s.ticks,l=Th(s,["ticks"]),c=u;return ro()(a)&&(c=u&&u.length>0?a(this.props):a(l)),r<=0||i<=0||!c||!c.length?null:t.createElement(Ao,{className:Ea()("recharts-cartesian-axis",o)},n&&this.renderAxisLine(),this.renderTicks(c),yh.renderCallByParent(this.props))}}],i=[{key:"getTicks",value:function(e){var t=e.tick,n=e.ticks,r=e.viewBox,i=e.minTickGap,a=e.orientation,s=e.interval,u=e.tickFormatter,l=e.unit;return n&&n.length&&t?za(s)||du.isSsr?o.getNumberIntervalTicks(n,"number"===typeof s&&za(s)?s:0):"preserveStartEnd"===s?o.getTicksStart({ticks:n,tickFormatter:u,viewBox:r,orientation:a,minTickGap:i,unit:l},!0):"preserveStart"===s?o.getTicksStart({ticks:n,tickFormatter:u,viewBox:r,orientation:a,minTickGap:i,unit:l}):o.getTicksEnd({ticks:n,tickFormatter:u,viewBox:r,orientation:a,minTickGap:i,unit:l}):[]}},{key:"getNumberIntervalTicks",value:function(e,t){return e.filter((function(e,n){return n%(t+1)===0}))}},{key:"getTicksStart",value:function(e,t){var n,r,i=e.ticks,a=e.tickFormatter,o=e.viewBox,s=e.orientation,u=e.minTickGap,l=e.unit,c=o.x,d=o.y,h=o.width,f=o.height,p="top"===s||"bottom"===s?"width":"height",m=(i||[]).slice(),v=l&&"width"===p?Gd(l)[p]:0,g=m.length,y=g>=2?Na(m[1].coordinate-m[0].coordinate):1;if(1===y?(n="width"===p?c:d,r="width"===p?c+h:d+f):(n="width"===p?c+h:d+f,r="width"===p?c:d),t){var x=i[g-1],_=ro()(a)?a(x.value,g-1):x.value,b=Gd(_)[p]+v,w=y*(x.coordinate+y*b/2-r);m[g-1]=x=Mh(Mh({},x),{},{tickCoord:w>0?x.coordinate-w*y:x.coordinate}),y*(x.tickCoord-y*b/2-n)>=0&&y*(x.tickCoord+y*b/2-r)<=0&&(r=x.tickCoord-y*(b/2+u),m[g-1]=Mh(Mh({},x),{},{isShow:!0}))}for(var S=t?g-1:g,M=0;M<S;M++){var E=m[M],T=ro()(a)?a(E.value,M):E.value,k=Gd(T)[p]+v;if(0===M){var C=y*(E.coordinate-y*k/2-n);m[M]=E=Mh(Mh({},E),{},{tickCoord:C<0?E.coordinate-C*y:E.coordinate})}else m[M]=E=Mh(Mh({},E),{},{tickCoord:E.coordinate});y*(E.tickCoord-y*k/2-n)>=0&&y*(E.tickCoord+y*k/2-r)<=0&&(n=E.tickCoord+y*(k/2+u),m[M]=Mh(Mh({},E),{},{isShow:!0}))}return m.filter((function(e){return e.isShow}))}},{key:"getTicksEnd",value:function(e){var t,n,r=e.ticks,i=e.tickFormatter,a=e.viewBox,o=e.orientation,s=e.minTickGap,u=e.unit,l=a.x,c=a.y,d=a.width,h=a.height,f="top"===o||"bottom"===o?"width":"height",p=u&&"width"===f?Gd(u)[f]:0,m=(r||[]).slice(),v=m.length,g=v>=2?Na(m[1].coordinate-m[0].coordinate):1;1===g?(t="width"===f?l:c,n="width"===f?l+d:c+h):(t="width"===f?l+d:c+h,n="width"===f?l:c);for(var y=v-1;y>=0;y--){var x=m[y],_=ro()(i)?i(x.value,v-y-1):x.value,b=Gd(_)[f]+p;if(y===v-1){var w=g*(x.coordinate+g*b/2-n);m[y]=x=Mh(Mh({},x),{},{tickCoord:w>0?x.coordinate-w*g:x.coordinate})}else m[y]=x=Mh(Mh({},x),{},{tickCoord:x.coordinate});g*(x.tickCoord-g*b/2-t)>=0&&g*(x.tickCoord+g*b/2-n)<=0&&(n=x.tickCoord-g*(b/2+s),m[y]=Mh(Mh({},x),{},{isShow:!0}))}return m.filter((function(e){return e.isShow}))}},{key:"renderTickItem",value:function(e,n,r){return t.isValidElement(e)?t.cloneElement(e,n):ro()(e)?e(n):t.createElement(ch,wh({},n,{className:"recharts-cartesian-axis-tick-value"}),r)}}],r&&Ch(n.prototype,r),i&&Ch(n,i),o}(t.Component);function Dh(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Ih(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Fh(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}Rh.displayName="CartesianAxis",Rh.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};var Nh=n(37762),jh=Symbol("implicit");function zh(){var e=new Map,t=[],n=[],r=jh;function i(i){var a=i+"",o=e.get(a);if(!o){if(r!==jh)return r;e.set(a,o=t.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,a=(0,Nh.Z)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o+"";e.has(s)||e.set(s,t.push(o))}}catch(u){a.e(u)}finally{a.f()}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return zh(t,n).unknown(r)},Ih.apply(i,arguments),i}function Uh(){var e,t,n=zh().unknown(void 0),r=n.domain,i=n.range,o=0,s=1,u=!1,l=0,c=0,d=.5;function h(){var n=r().length,a=s<o,h=a?s:o,f=a?o:s;e=(f-h)/Math.max(1,n-l+2*c),u&&(e=Math.floor(e)),h+=(f-h-e*(n-l))*d,t=e*(1-l),u&&(h=Math.round(h),t=Math.round(t));var p=Dh(n).map((function(t){return h+e*t}));return i(a?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){var t,n;return arguments.length?(t=e,n=(0,a.Z)(t,2),o=n[0],s=n[1],o=+o,s=+s,h()):[o,s]},n.rangeRound=function(e){var t,n;return t=e,n=(0,a.Z)(t,2),o=n[0],s=n[1],o=+o,s=+s,u=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(u=!!e,h()):u},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),h()):d},n.copy=function(){return Uh(r(),[o,s]).round(u).paddingInner(l).paddingOuter(c).align(d)},Ih.apply(h(),arguments)}function Bh(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Bh(t())},e}function Vh(){return Bh(Uh.apply(null,arguments).paddingInner(1))}var Gh=n(18111),Hh=n.n(Gh),Zh=n(29627),Wh=n.n(Zh),qh=n(66452),Xh=n.n(qh),Kh=n(5008),Yh=n.n(Kh),Qh=n(4234),$h=n.n(Qh);function Jh(e){return function(e){if(Array.isArray(e))return ef(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ef(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tf=function(e){return e},nf={"@@functional/placeholder":!0},rf=function(e){return e===nf},af=function(e){return function t(){return 0===arguments.length||1===arguments.length&&rf(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},of=function e(t,n){return 1===t?n:af((function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter((function(e){return e!==nf})).length;return o>=t?n.apply(void 0,i):e(t-o,af((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=i.map((function(e){return rf(e)?t.shift():e}));return n.apply(void 0,Jh(a).concat(t))})))}))},sf=function(e){return of(e.length,e)},uf=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},lf=sf((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),cf=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return tf;var r=t.reverse(),i=r[0],a=r.slice(1);return function(){return a.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},df=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hf=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var ff=sf((function(e,t,n){var r=+e;return r+n*(+t-r)})),pf=sf((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),mf=sf((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))})),vf={rangeStep:function(e,t,n){for(var r=new($h())(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a},getDigitCount:function(e){return 0===e?1:Math.floor(new($h())(e).abs().log(10).toNumber())+1},interpolateNumber:ff,uninterpolateNumber:pf,uninterpolateTruncation:mf};function gf(e){return function(e){if(Array.isArray(e))return _f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||xf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||xf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xf(e,t){if(e){if("string"===typeof e)return _f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_f(e,t):void 0}}function _f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bf(e){var t=yf(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function wf(e,t,n){if(e.lte(0))return new($h())(0);var r=vf.getDigitCount(e.toNumber()),i=new($h())(10).pow(r),a=e.div(i),o=1!==r?.05:.1,s=new($h())(Math.ceil(a.div(o).toNumber())).add(n).mul(o).mul(i);return t?s:new($h())(Math.ceil(s))}function Sf(e,t,n){var r=1,i=new($h())(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new($h())(10).pow(vf.getDigitCount(e)-1),i=new($h())(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new($h())(Math.floor(e)))}else 0===e?i=new($h())(Math.floor((t-1)/2)):n||(i=new($h())(Math.floor(e)));var o=Math.floor((t-1)/2);return cf(lf((function(e){return i.add(new($h())(e-o).mul(r)).toNumber()})),uf)(0,t)}function Mf(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new($h())(0),tickMin:new($h())(0),tickMax:new($h())(0)};var a,o=wf(new($h())(t).sub(e).div(n-1),r,i);a=e<=0&&t>=0?new($h())(0):(a=new($h())(e).add(t).div(2)).sub(new($h())(a).mod(o));var s=Math.ceil(a.sub(e).div(o).toNumber()),u=Math.ceil(new($h())(t).sub(a).div(o).toNumber()),l=s+u+1;return l>n?Mf(e,t,n,r,i+1):(l<n&&(u=t>0?u+(n-l):u,s=t>0?s:s+(n-l)),{step:o,tickMin:a.sub(new($h())(s).mul(o)),tickMax:a.add(new($h())(u).mul(o))})}var Ef=hf((function(e){var t=yf(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),s=bf([n,r]),u=yf(s,2),l=u[0],c=u[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(gf(uf(0,i-1).map((function(){return 1/0})))):[].concat(gf(uf(0,i-1).map((function(){return-1/0}))),[c]);return n>r?df(d):d}if(l===c)return Sf(l,i,a);var h=Mf(l,c,o,a),f=h.step,p=h.tickMin,m=h.tickMax,v=vf.rangeStep(p,m.add(new($h())(.1).mul(f)),f);return n>r?df(v):v})),Tf=(hf((function(e){var t=yf(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),s=bf([n,r]),u=yf(s,2),l=u[0],c=u[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return Sf(l,i,a);var d=wf(new($h())(c).sub(l).div(o-1),a,0),h=cf(lf((function(e){return new($h())(l).add(new($h())(e).mul(d)).toNumber()})),uf),f=h(0,o).filter((function(e){return e>=l&&e<=c}));return n>r?df(f):f})),hf((function(e,t){var n=yf(e,2),r=n[0],i=n[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=bf([r,i]),s=yf(o,2),u=s[0],l=s[1];if(u===-1/0||l===1/0)return[r,i];if(u===l)return[u];var c=Math.max(t,2),d=wf(new($h())(l).sub(u).div(c-1),a,0),h=[].concat(gf(vf.rangeStep(new($h())(u),new($h())(l).sub(new($h())(.99).mul(d)),d)),[l]);return r>i?df(h):h}))),kf=Math.sqrt(50),Cf=Math.sqrt(10),Af=Math.sqrt(2);function Pf(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=Of(e,t,n))||!isFinite(o))return[];if(o>0){var u=Math.round(e/o),l=Math.round(t/o);for(u*o<e&&++u,l*o>t&&--l,a=new Array(i=l-u+1);++s<i;)a[s]=(u+s)*o}else{o=-o;var c=Math.round(e*o),d=Math.round(t*o);for(c/o<e&&++c,d/o>t&&--d,a=new Array(i=d-c+1);++s<i;)a[s]=(c+s)/o}return r&&a.reverse(),a}function Of(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=kf?10:a>=Cf?5:a>=Af?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=kf?10:a>=Cf?5:a>=Af?2:1)}function Lf(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=kf?i*=10:a>=Cf?i*=5:a>=Af&&(i*=2),t<e?-i:i}function Rf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Df(e){var t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;n(e[a],t)<0?r=a+1:i=a}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return Rf(e(t),n)}}(e)),{left:r,center:function(e,n,i,a){null==i&&(i=0),null==a&&(a=e.length);var o=r(e,n,i,a-1);return o>i&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;n(e[a],t)>0?i=a:r=a+1}return r}}}var If=f().mark(Nf);function Ff(e){return null===e?NaN:+e}function Nf(e,t){var n,r,i,a,o,s,u;return f().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(void 0!==t){l.next=21;break}n=(0,Nh.Z)(e),l.prev=2,n.s();case 4:if((r=n.n()).done){l.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){l.next=9;break}return l.next=9,i;case 9:l.next=4;break;case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(2),n.e(l.t0);case 16:return l.prev=16,n.f(),l.finish(16);case 19:l.next=40;break;case 21:a=-1,o=(0,Nh.Z)(e),l.prev=23,o.s();case 25:if((s=o.n()).done){l.next=32;break}if(u=s.value,!(null!=(u=t(u,++a,e))&&(u=+u)>=u)){l.next=30;break}return l.next=30,u;case 30:l.next=25;break;case 32:l.next=37;break;case 34:l.prev=34,l.t1=l.catch(23),o.e(l.t1);case 37:return l.prev=37,o.f(),l.finish(37);case 40:case"end":return l.stop()}}),If,null,[[2,13,16,19],[23,34,37,40]])}var jf=Df(Rf),zf=jf.right,Uf=(jf.left,Df(Ff).center,zf);function Bf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Gf(){}var Hf=.7,Zf=1/Hf,Wf="\\s*([+-]?\\d+)\\s*",qf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kf=/^#([0-9a-f]{3,8})$/,Yf=new RegExp("^rgb\\("+[Wf,Wf,Wf]+"\\)$"),Qf=new RegExp("^rgb\\("+[Xf,Xf,Xf]+"\\)$"),$f=new RegExp("^rgba\\("+[Wf,Wf,Wf,qf]+"\\)$"),Jf=new RegExp("^rgba\\("+[Xf,Xf,Xf,qf]+"\\)$"),ep=new RegExp("^hsl\\("+[qf,Xf,Xf]+"\\)$"),tp=new RegExp("^hsla\\("+[qf,Xf,Xf,qf]+"\\)$"),np={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rp(){return this.rgb().formatHex()}function ip(){return this.rgb().formatRgb()}function ap(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Kf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?op(t):3===n?new cp(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?sp(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?sp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Yf.exec(e))?new cp(t[1],t[2],t[3],1):(t=Qf.exec(e))?new cp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=$f.exec(e))?sp(t[1],t[2],t[3],t[4]):(t=Jf.exec(e))?sp(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ep.exec(e))?pp(t[1],t[2]/100,t[3]/100,1):(t=tp.exec(e))?pp(t[1],t[2]/100,t[3]/100,t[4]):np.hasOwnProperty(e)?op(np[e]):"transparent"===e?new cp(NaN,NaN,NaN,0):null}function op(e){return new cp(e>>16&255,e>>8&255,255&e,1)}function sp(e,t,n,r){return r<=0&&(e=t=n=NaN),new cp(e,t,n,r)}function up(e){return e instanceof Gf||(e=ap(e)),e?new cp((e=e.rgb()).r,e.g,e.b,e.opacity):new cp}function lp(e,t,n,r){return 1===arguments.length?up(e):new cp(e,t,n,null==r?1:r)}function cp(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function dp(){return"#"+fp(this.r)+fp(this.g)+fp(this.b)}function hp(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function fp(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function pp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vp(e,t,n,r)}function mp(e){if(e instanceof vp)return new vp(e.h,e.s,e.l,e.opacity);if(e instanceof Gf||(e=ap(e)),!e)return new vp;if(e instanceof vp)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new vp(o,s,u,e.opacity)}function vp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function gp(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function yp(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}Bf(Gf,ap,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:rp,formatHex:rp,formatHsl:function(){return mp(this).formatHsl()},formatRgb:ip,toString:ip}),Bf(cp,lp,Vf(Gf,{brighter:function(e){return e=null==e?Zf:Math.pow(Zf,e),new cp(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Hf:Math.pow(Hf,e),new cp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dp,formatHex:dp,formatRgb:hp,toString:hp})),Bf(vp,(function(e,t,n,r){return 1===arguments.length?mp(e):new vp(e,t,n,null==r?1:r)}),Vf(Gf,{brighter:function(e){return e=null==e?Zf:Math.pow(Zf,e),new vp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Hf:Math.pow(Hf,e),new vp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new cp(gp(e>=240?e-240:e+120,i,r),gp(e,i,r),gp(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var xp=function(e){return function(){return e}};function _p(e,t){return function(n){return e+n*t}}function bp(e){return 1===(e=+e)?wp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):xp(isNaN(t)?n:t)}}function wp(e,t){var n=t-e;return n?_p(e,n):xp(isNaN(e)?t:e)}var Sp=function e(t){var n=bp(t);function r(e,t){var r=n((e=lp(e)).r,(t=lp(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=wp(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Mp(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=lp(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}Mp((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return yp((n-r/t)*t,o,i,a,s)}})),Mp((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return yp((n-r/t)*t,i,a,o,s)}}));function Ep(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Rp(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Tp(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cp(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Rp(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Ap=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pp=new RegExp(Ap.source,"g");function Op(e,t){var n,r,i,a=Ap.lastIndex=Pp.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=Ap.exec(e))&&(r=Pp.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:kp(n,r)})),a=Pp.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function Lp(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function Rp(e,t){var n,r=typeof t;return null==t||"boolean"===r?xp(t):("number"===r?kp:"string"===r?(n=ap(t))?(t=n,Sp):Op:t instanceof ap?Sp:t instanceof Date?Tp:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Lp:Array.isArray(t)?Ep:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Cp:kp)(e,t)}function Dp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ip(e){return+e}var Fp=[0,1];function Np(e){return e}function jp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function zp(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=jp(i,r),a=n(o,a)):(r=jp(r,i),a=n(a,o)),function(e){return a(r(e))}}function Up(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=jp(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Uf(e,t,1,r)-1;return a[n](i[n](t))}}function Bp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vp(){var e,t,n,r,i,a,o=Fp,s=Fp,u=Rp,l=Np;function c(){var e=Math.min(o.length,s.length);return l!==Np&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?Up:zp,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,u)))(e(l(t)))}return d.invert=function(n){return l(t((a||(a=r(s,o.map(e),kp)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,Ip),c()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),u=Dp,c()},d.clamp=function(e){return arguments.length?(l=!!e||Np,c()):l!==Np},d.interpolate=function(e){return arguments.length?(u=e,c()):u},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}function Gp(){return Vp()(Np,Np)}var Hp,Zp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wp(e){if(!(t=Zp.exec(e)))throw new Error("invalid format: "+e);var t;return new qp({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function qp(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Xp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Kp(e){return(e=Xp(Math.abs(e)))?e[1]:NaN}function Yp(e,t){var n=Xp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Wp.prototype=qp.prototype,qp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Qp={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Yp(100*e,t)},r:Yp,s:function(e,t){var n=Xp(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Hp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Xp(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function $p(e){return e}var Jp,em,tm,nm=Array.prototype.map,rm=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function im(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?$p:(t=nm.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?$p:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(nm.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Wp(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,v=e.precision,g=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Qp[y]||(void 0===v&&(v=12),g=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===h?a:/[%p]/.test(y)?u:"",b=Qp[y],w=/[defgprs%]/.test(y);function S(e){var i,a,u,h=x,S=_;if("c"===y)S=b(e)+S,e="";else{var M=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:b(Math.abs(e),v),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),M&&0===+e&&"+"!==d&&(M=!1),h=(M?"("===d?d:l:"-"===d||"("===d?"":d)+h,S=("s"===y?rm[8+Hp/3]:"")+S+(M&&"("===d?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(u=e.charCodeAt(i))||u>57){S=(46===u?o+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var E=h.length+e.length+S.length,T=E<p?new Array(p-E+1).join(t):"";switch(m&&f&&(e=r(T+e,T.length?p-S.length:1/0),T=""),n){case"<":e=h+e+S+T;break;case"=":e=h+T+e+S;break;case"^":e=T.slice(0,E=T.length>>1)+h+e+S+T.slice(E);break;default:e=T+h+e+S}return s(e)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=Wp(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Kp(t)/3))),i=Math.pow(10,-r),a=rm[8+r/3];return function(e){return n(i*e)+a}}}}function am(e,t,n,r){var i,a=Lf(e,t,n);switch((r=Wp(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Kp(t)/3)))-Kp(Math.abs(e)))}(a,o))||(r.precision=i),tm(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kp(t)-Kp(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Kp(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return em(r)}function om(e){var t=e.domain;return e.ticks=function(e){var n=t();return Pf(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return am(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;for(l<u&&(i=u,u=l,l=i,i=o,o=s,s=i);c-- >0;){if((i=Of(u,l,n))===r)return a[o]=u,a[s]=l,t(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function sm(){var e=Gp();return e.copy=function(){return Bp(e,sm())},Ih.apply(e,arguments),om(e)}function um(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,Ip),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return um(e).unknown(t)},e=arguments.length?Array.from(e,Ip):[0,1],om(n)}function lm(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function cm(e){return Math.log(e)}function dm(e){return Math.exp(e)}function hm(e){return-Math.log(-e)}function fm(e){return-Math.exp(-e)}function pm(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mm(e){return function(t){return-e(-t)}}function vm(e){var t,n,r=e(cm,dm),i=r.domain,a=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(a),n=function(e){return 10===e?pm:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),i()[0]<0?(t=mm(t),n=mm(n),e(hm,fm)):e(cm,dm),r}return r.base=function(e){return arguments.length?(a=+e,o()):a},r.domain=function(e){return arguments.length?(i(e),o()):i()},r.ticks=function(e){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(h=s,s=u,u=h);var l,c,d,h=t(s),f=t(u),p=null==e?10:+e,m=[];if(!(a%1)&&f-h<p){if(h=Math.floor(h),f=Math.ceil(f),s>0){for(;h<=f;++h)for(c=1,l=n(h);c<a;++c)if(!((d=l*c)<s)){if(d>u)break;m.push(d)}}else for(;h<=f;++h)for(c=a-1,l=n(h);c>=1;--c)if(!((d=l*c)<s)){if(d>u)break;m.push(d)}2*m.length<p&&(m=Pf(s,u,p))}else m=Pf(h,f,Math.min(f-h,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=em(i)),e===1/0)return i;null==e&&(e=10);var o=Math.max(1,a*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*a<a-.5&&(r*=a),r<=o?i(e):""}},r.nice=function(){return i(lm(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function gm(){var e=vm(Vp()).domain([1,10]);return e.copy=function(){return Bp(e,gm()).base(e.base())},Ih.apply(e,arguments),e}function ym(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _m(e){var t=1,n=e(ym(t),xm(t));return n.constant=function(n){return arguments.length?e(ym(t=+n),xm(t)):t},om(n)}function bm(){var e=_m(Vp());return e.copy=function(){return Bp(e,bm()).constant(e.constant())},Ih.apply(e,arguments)}function wm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Sm(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Mm(e){return e<0?-e*e:e*e}function Em(e){var t=e(Np,Np),n=1;function r(){return 1===n?e(Np,Np):.5===n?e(Sm,Mm):e(wm(n),wm(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},om(t)}function Tm(){var e=Em(Vp());return e.copy=function(){return Bp(e,Tm()).exponent(e.exponent())},Ih.apply(e,arguments),e}function km(){return Tm.apply(null,arguments).exponent(.5)}function Cm(e){return Math.sign(e)*e*e}function Am(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Pm(){var e,t=Gp(),n=[0,1],r=!1;function i(n){var i=Am(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(Cm(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,Ip)).map(Cm)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Pm(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},Ih.apply(i,arguments),om(i)}function Om(e,t){var n;if(void 0===t){var r,i=(0,Nh.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,u=(0,Nh.Z)(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;null!=(l=t(l,++s,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(c){u.e(c)}finally{u.f()}}return n}function Lm(e,t){var n;if(void 0===t){var r,i=(0,Nh.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n>a||void 0===n&&a>=a)&&(n=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,u=(0,Nh.Z)(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;null!=(l=t(l,++s,e))&&(n>l||void 0===n&&l>=l)&&(n=l)}}catch(c){u.e(c)}finally{u.f()}}return n}function Rm(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rf;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1),c=Math.max(n,Math.floor(t-o*u/a+l)),d=Math.min(r,Math.floor(t+(a-o)*u/a+l));Rm(e,t,c,d,i)}var h=e[t],f=n,p=r;for(Dm(e,n,t),i(e[r],h)>0&&Dm(e,n,r);f<p;){for(Dm(e,f,p),++f,--p;i(e[f],h)<0;)++f;for(;i(e[p],h)>0;)--p}0===i(e[n],h)?Dm(e,n,p):Dm(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}return e}function Dm(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Im(e,t,n){if(r=(e=Float64Array.from(Nf(e,n))).length){if((t=+t)<=0||r<2)return Lm(e);if(t>=1)return Om(e);var r,i=(r-1)*t,a=Math.floor(i),o=Om(Rm(e,a).subarray(0,a+1));return o+(Lm(e.subarray(a+1))-o)*(i-a)}}function Fm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ff;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function Nm(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=Fm(t,e/i);return a}function a(t){return null==t||isNaN(t=+t)?e:n[Uf(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];var n,r=(0,Nh.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;null==a||isNaN(a=+a)||t.push(a)}}catch(o){r.e(o)}finally{r.f()}return t.sort(Rf),i()},a.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return Nm().domain(t).range(n).unknown(e)},Ih.apply(a,arguments)}function jm(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[Uf(i,t,0,r)]:e}function u(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return s}return s.domain=function(e){var r,i;return arguments.length?(r=e,i=(0,a.Z)(r,2),t=i[0],n=i[1],t=+t,n=+n,u()):[t,n]},s.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,u()):o.slice()},s.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return jm().domain([t,n]).range(o).unknown(e)},Ih.apply(om(s),arguments)}function zm(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[Uf(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return zm().domain(t).range(n).unknown(e)},Ih.apply(i,arguments)}Jp=im({thousands:",",grouping:[3],currency:["$",""]}),em=Jp.format,tm=Jp.formatPrefix;var Um=1e3,Bm=6e4,Vm=36e5,Gm=864e5,Hm=6048e5,Zm=2592e6,Wm=31536e6,qm=new Date,Xm=new Date;function Km(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return s},i.filter=function(n){return Km((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return qm.setTime(+t),Xm.setTime(+r),e(qm),e(Xm),Math.floor(n(qm,Xm))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}var Ym=Km((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Ym.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Km((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Ym:null};var Qm=Ym,$m=(Ym.range,Km((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Um)}),(function(e,t){return(t-e)/Um}),(function(e){return e.getUTCSeconds()}))),Jm=$m,ev=($m.range,Km((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Um)}),(function(e,t){e.setTime(+e+t*Bm)}),(function(e,t){return(t-e)/Bm}),(function(e){return e.getMinutes()}))),tv=ev,nv=(ev.range,Km((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Um-e.getMinutes()*Bm)}),(function(e,t){e.setTime(+e+t*Vm)}),(function(e,t){return(t-e)/Vm}),(function(e){return e.getHours()}))),rv=nv,iv=(nv.range,Km((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bm)/Gm}),(function(e){return e.getDate()-1}))),av=iv;iv.range;function ov(e){return Km((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bm)/Hm}))}var sv=ov(0),uv=ov(1),lv=ov(2),cv=ov(3),dv=ov(4),hv=ov(5),fv=ov(6),pv=(sv.range,uv.range,lv.range,cv.range,dv.range,hv.range,fv.range,Km((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),mv=pv,vv=(pv.range,Km((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));vv.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Km((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var gv=vv,yv=(vv.range,Km((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Bm)}),(function(e,t){return(t-e)/Bm}),(function(e){return e.getUTCMinutes()}))),xv=yv,_v=(yv.range,Km((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Vm)}),(function(e,t){return(t-e)/Vm}),(function(e){return e.getUTCHours()}))),bv=_v,wv=(_v.range,Km((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Gm}),(function(e){return e.getUTCDate()-1}))),Sv=wv;wv.range;function Mv(e){return Km((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Hm}))}var Ev=Mv(0),Tv=Mv(1),kv=Mv(2),Cv=Mv(3),Av=Mv(4),Pv=Mv(5),Ov=Mv(6),Lv=(Ev.range,Tv.range,kv.range,Cv.range,Av.range,Pv.range,Ov.range,Km((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Rv=Lv,Dv=(Lv.range,Km((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Dv.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Km((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Iv=Dv;Dv.range;function Fv(e,t,n,r,i,o){var s=[[Jm,1,Um],[Jm,5,5e3],[Jm,15,15e3],[Jm,30,3e4],[o,1,Bm],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,Vm],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Gm],[r,2,1728e5],[n,1,Hm],[t,1,Zm],[t,3,7776e6],[e,1,Wm]];function u(t,n,r){var i=Math.abs(n-t)/r,o=Df((function(e){return(0,a.Z)(e,3)[2]})).right(s,i);if(o===s.length)return e.every(Lf(t/Wm,n/Wm,r));if(0===o)return Qm.every(Math.max(Lf(t,n,r),1));var u=(0,a.Z)(s[i/s[o-1][2]<s[o][2]/i?o-1:o],2),l=u[0],c=u[1];return l.every(c)}return[function(e,t,n){var r=t<e;if(r){var i=[t,e];e=i[0],t=i[1]}var a=n&&"function"===typeof n.range?n:u(e,t,n),o=a?a.range(e,+t+1):[];return r?o.reverse():o},u]}var Nv=Fv(Iv,Rv,Ev,Sv,bv,xv),jv=(0,a.Z)(Nv,2),zv=jv[0],Uv=jv[1],Bv=Fv(gv,mv,sv,av,rv,tv),Vv=(0,a.Z)(Bv,2),Gv=Vv[0],Hv=Vv[1];function Zv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Xv,Kv,Yv,Qv={"-":"",_:" ",0:"0"},$v=/^\s*\d+/,Jv=/^%/,eg=/[\\^$*+?|[\]().{}]/g;function tg(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function ng(e){return e.replace(eg,"\\$&")}function rg(e){return new RegExp("^(?:"+e.map(ng).join("|")+")","i")}function ig(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function ag(e,t,n){var r=$v.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function og(e,t,n){var r=$v.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ug(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function lg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function cg(e,t,n){var r=$v.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function hg(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function fg(e,t,n){var r=$v.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function pg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vg(e,t,n){var r=$v.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function yg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function xg(e,t,n){var r=$v.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _g(e,t,n){var r=$v.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function bg(e,t,n){var r=$v.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function wg(e,t,n){var r=Jv.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Sg(e,t,n){var r=$v.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mg(e,t,n){var r=$v.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Eg(e,t){return tg(e.getDate(),t,2)}function Tg(e,t){return tg(e.getHours(),t,2)}function kg(e,t){return tg(e.getHours()%12||12,t,2)}function Cg(e,t){return tg(1+av.count(gv(e),e),t,3)}function Ag(e,t){return tg(e.getMilliseconds(),t,3)}function Pg(e,t){return Ag(e,t)+"000"}function Og(e,t){return tg(e.getMonth()+1,t,2)}function Lg(e,t){return tg(e.getMinutes(),t,2)}function Rg(e,t){return tg(e.getSeconds(),t,2)}function Dg(e){var t=e.getDay();return 0===t?7:t}function Ig(e,t){return tg(sv.count(gv(e)-1,e),t,2)}function Fg(e){var t=e.getDay();return t>=4||0===t?dv(e):dv.ceil(e)}function Ng(e,t){return e=Fg(e),tg(dv.count(gv(e),e)+(4===gv(e).getDay()),t,2)}function jg(e){return e.getDay()}function zg(e,t){return tg(uv.count(gv(e)-1,e),t,2)}function Ug(e,t){return tg(e.getFullYear()%100,t,2)}function Bg(e,t){return tg((e=Fg(e)).getFullYear()%100,t,2)}function Vg(e,t){return tg(e.getFullYear()%1e4,t,4)}function Gg(e,t){var n=e.getDay();return tg((e=n>=4||0===n?dv(e):dv.ceil(e)).getFullYear()%1e4,t,4)}function Hg(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tg(t/60|0,"0",2)+tg(t%60,"0",2)}function Zg(e,t){return tg(e.getUTCDate(),t,2)}function Wg(e,t){return tg(e.getUTCHours(),t,2)}function qg(e,t){return tg(e.getUTCHours()%12||12,t,2)}function Xg(e,t){return tg(1+Sv.count(Iv(e),e),t,3)}function Kg(e,t){return tg(e.getUTCMilliseconds(),t,3)}function Yg(e,t){return Kg(e,t)+"000"}function Qg(e,t){return tg(e.getUTCMonth()+1,t,2)}function $g(e,t){return tg(e.getUTCMinutes(),t,2)}function Jg(e,t){return tg(e.getUTCSeconds(),t,2)}function ey(e){var t=e.getUTCDay();return 0===t?7:t}function ty(e,t){return tg(Ev.count(Iv(e)-1,e),t,2)}function ny(e){var t=e.getUTCDay();return t>=4||0===t?Av(e):Av.ceil(e)}function ry(e,t){return e=ny(e),tg(Av.count(Iv(e),e)+(4===Iv(e).getUTCDay()),t,2)}function iy(e){return e.getUTCDay()}function ay(e,t){return tg(Tv.count(Iv(e)-1,e),t,2)}function oy(e,t){return tg(e.getUTCFullYear()%100,t,2)}function sy(e,t){return tg((e=ny(e)).getUTCFullYear()%100,t,2)}function uy(e,t){return tg(e.getUTCFullYear()%1e4,t,4)}function ly(e,t){var n=e.getUTCDay();return tg((e=n>=4||0===n?Av(e):Av.ceil(e)).getUTCFullYear()%1e4,t,4)}function cy(){return"+0000"}function dy(){return"%"}function hy(e){return+e}function fy(e){return Math.floor(+e/1e3)}function py(e){return new Date(e)}function my(e){return e instanceof Date?+e:+new Date(+e)}function vy(e,t,n,r,i,a,o,s,u,l){var c=Gp(),d=c.invert,h=c.domain,f=l(".%L"),p=l(":%S"),m=l("%I:%M"),v=l("%I %p"),g=l("%a %d"),y=l("%b %d"),x=l("%B"),_=l("%Y");function b(e){return(u(e)<e?f:s(e)<e?p:o(e)<e?m:a(e)<e?v:r(e)<e?i(e)<e?g:y:n(e)<e?x:_)(e)}return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?h(Array.from(e,my)):h().map(py)},c.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?b:l(t)},c.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(lm(n,e)):c},c.copy=function(){return Bp(c,vy(e,t,n,r,i,a,o,s,u,l))},c}function gy(){return Ih.apply(vy(Gv,Hv,gv,mv,sv,av,rv,tv,Jm,Kv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yy(){return Ih.apply(vy(zv,Uv,Iv,Rv,Ev,Sv,bv,xv,Jm,Yv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xy(){var e,t,n,r,i,o=0,s=1,u=Np,l=!1;function c(t){return null==t||isNaN(t=+t)?i:u(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,r,i,o;return arguments.length?(n=t,i=(r=(0,a.Z)(n,2))[0],o=r[1],u=e(i,o),c):[u(0),u(1)]}}return c.domain=function(i){var u,l;return arguments.length?(u=i,l=(0,a.Z)(u,2),o=l[0],s=l[1],e=r(o=+o),t=r(s=+s),n=e===t?0:1/(t-e),c):[o,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=d(Rp),c.rangeRound=d(Dp),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(s),n=e===t?0:1/(t-e),c}}function _y(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function by(){var e=om(xy()(Np));return e.copy=function(){return _y(e,by())},Fh.apply(e,arguments)}function wy(){var e=vm(xy()).domain([1,10]);return e.copy=function(){return _y(e,wy()).base(e.base())},Fh.apply(e,arguments)}function Sy(){var e=_m(xy());return e.copy=function(){return _y(e,Sy()).constant(e.constant())},Fh.apply(e,arguments)}function My(){var e=Em(xy());return e.copy=function(){return _y(e,My()).exponent(e.exponent())},Fh.apply(e,arguments)}function Ey(){return My.apply(null,arguments).exponent(.5)}function Ty(){var e=[],t=Np;function n(n){if(null!=n&&!isNaN(n=+n))return t((Uf(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];var r,i=(0,Nh.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;null==a||isNaN(a=+a)||e.push(a)}}catch(o){i.e(o)}finally{i.f()}return e.sort(Rf),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((function(n,r){return t(r/(e.length-1))}))},n.quantiles=function(t){return Array.from({length:t+1},(function(n,r){return Im(e,r/t)}))},n.copy=function(){return Ty(t).domain(e)},Fh.apply(n,arguments)}function ky(e,t){void 0===t&&(t=e,e=Rp);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}function Cy(){var e,t,n,r,i,o,s,u=0,l=.5,c=1,d=1,h=Np,f=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+o(e))-t)*(d*e<d*t?r:i),h(f?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,i,o,s;return arguments.length?(n=t,i=(r=(0,a.Z)(n,3))[0],o=r[1],s=r[2],h=ky(e,[i,o,s]),p):[h(0),h(.5),h(1)]}}return p.domain=function(s){var h,f;return arguments.length?(h=s,f=(0,a.Z)(h,3),u=f[0],l=f[1],c=f[2],e=o(u=+u),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d=t<e?-1:1,p):[u,l,c]},p.clamp=function(e){return arguments.length?(f=!!e,p):f},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=m(Rp),p.rangeRound=m(Dp),p.unknown=function(e){return arguments.length?(s=e,p):s},function(a){return o=a,e=a(u),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d=t<e?-1:1,p}}function Ay(){var e=om(Cy()(Np));return e.copy=function(){return _y(e,Ay())},Fh.apply(e,arguments)}function Py(){var e=vm(Cy()).domain([.1,1,10]);return e.copy=function(){return _y(e,Py()).base(e.base())},Fh.apply(e,arguments)}function Oy(){var e=_m(Cy());return e.copy=function(){return _y(e,Oy()).constant(e.constant())},Fh.apply(e,arguments)}function Ly(){var e=Em(Cy());return e.copy=function(){return _y(e,Ly()).exponent(e.exponent())},Fh.apply(e,arguments)}function Ry(){return Ly.apply(null,arguments).exponent(.5)}function Dy(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Iy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Fy(e,t){return e[t]}function Ny(e){var t=[];return t.key=e,t}function jy(e){return function(e){if(Array.isArray(e))return zy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return zy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uy(Object(n),!0).forEach((function(t){Vy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gy(e,t,n){return ho()(e)||ho()(t)?n:Ua(t)?Ca()(e,t,n):ro()(t)?t(e):n}function Hy(e,t,n,r){var i=Yh()(e,(function(e){return Gy(e,t)}));if("number"===n){var a=i.filter((function(e){return za(e)||parseFloat(e)}));return a.length?[Xh()(a),Wh()(a)]:[1/0,-1/0]}return(r?i.filter((function(e){return!ho()(e)})):i).map((function(e){return Ua(e)||e instanceof Date?e:""}))}!function(e){Xv=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,l=rg(i),c=ig(i),d=rg(a),h=ig(a),f=rg(o),p=ig(o),m=rg(s),v=ig(s),g=rg(u),y=ig(u),x={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Eg,e:Eg,f:Pg,g:Bg,G:Gg,H:Tg,I:kg,j:Cg,L:Ag,m:Og,M:Lg,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:hy,s:fy,S:Rg,u:Dg,U:Ig,V:Ng,w:jg,W:zg,x:null,X:null,y:Ug,Y:Vg,Z:Hg,"%":dy},_={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Zg,e:Zg,f:Yg,g:sy,G:ly,H:Wg,I:qg,j:Xg,L:Kg,m:Qg,M:$g,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:hy,s:fy,S:Jg,u:ey,U:ty,V:ry,w:iy,W:ay,x:null,X:null,y:oy,Y:uy,Z:cy,"%":dy},b={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:mg,e:mg,f:bg,g:dg,G:cg,H:gg,I:gg,j:vg,L:_g,m:pg,M:yg,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:fg,Q:Sg,s:Mg,S:xg,u:og,U:sg,V:ug,w:ag,W:lg,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:dg,Y:cg,Z:hg,"%":wg};function w(e,t){return function(n){var r,i,a,o=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=Qv[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function S(e,t){return function(n){var r,i,a=qv(1900,void 0,1);if(M(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Wv(qv(a.y,0,1))).getUTCDay(),r=i>4||0===i?Tv.ceil(r):Tv(r),r=Sv.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Zv(qv(a.y,0,1))).getDay(),r=i>4||0===i?uv.ceil(r):uv(r),r=av.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Wv(qv(a.y,0,1)).getUTCDay():Zv(qv(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Wv(a)):Zv(a)}}function M(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=b[i in Qv?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),{format:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),Kv=Xv.format,Xv.parse,Yv=Xv.utcFormat,Xv.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Zy=function(e){var t,n=e.type.displayName,r=e.props,i=r.stroke,a=r.fill;switch(n){case"Line":t=i;break;case"Area":case"Radar":t=i&&"none"!==i?i:a;break;default:t=a}return t},Wy=function(e){var t,n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Td(n,Fl.displayName);return o?(t=o.props&&o.props.payload?o.props&&o.props.payload:"children"===a?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:o.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,i=n.name,a=n.legendType;return{inactive:n.hide,dataKey:r,type:o.props.iconType||a||"square",color:Zy(t),value:i||r,payload:t.props}})),By(By(By({},o.props),Fl.getWithHeight(o,i)),{},{payload:t,item:o})):null},qy=function(e,t,n,r){var i=t.props.children,a=Ed(i,"ErrorBar").filter((function(e){var t=e.props.direction;return!(!ho()(t)&&!ho()(r))||r.indexOf(t)>=0}));if(a&&a.length){var o=a.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=Gy(t,n,0),i=Pa()(r)?[Xh()(r),Wh()(r)]:[r,r],a=o.reduce((function(e,n){var r=Gy(t,n,0),a=i[0]-Math.abs(Pa()(r)?r[0]:r),o=i[1]+Math.abs(Pa()(r)?r[1]:r);return[Math.min(a,e[0]),Math.max(o,e[1])]}),[1/0,-1/0]);return[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}),[1/0,-1/0])}return null},Xy=function(e,t,n,r){var i=t.map((function(t){var i=t.props.dataKey;return"number"===n&&i&&qy(e,t,i)||Hy(e,i,n,r)}));if("number"===n)return i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var a={};return i.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)a[t[n]]||(a[t[n]]=!0,e.push(t[n]));return e}),[])},Ky=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Yy=function(e,t,n){var r,i,a=e.map((function(e){return e.coordinate===t&&(r=!0),e.coordinate===n&&(i=!0),e.coordinate}));return r||a.push(t),i||a.push(n),a},Qy=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,a=e.type,o=e.range,s=(t||n)&&"category"===a&&r.bandwidth?r.bandwidth()/2:0;return s="angleAxis"===e.axisType?2*Na(o[0]-o[1])*s:s,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+s,value:e,offset:s}})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+s,value:e,index:t,offset:s}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+s,value:e,offset:s}})):r.domain().map((function(e,t){return{coordinate:r(e)+s,value:i?i[e]:e,index:t,offset:s}}))},$y=function(e,t,n){var r;return ro()(n)?r=n:ro()(t)&&(r=t),ro()(e)||r?function(t,n,i,a){ro()(e)&&e(t,n,i,a),ro()(r)&&r(t,n,i,a)}:null},Jy=1e-4,ex={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var s=La()(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}Dy(e,t)}},none:Dy,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}Dy(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,u=0,l=0;s<i;++s){for(var c=e[t[s]],d=c[o][1]||0,h=(d-(c[o-1][1]||0))/2,f=0;f<s;++f){var p=e[t[f]];h+=(p[o][1]||0)-(p[o-1][1]||0)}u+=d,l+=h*d}n[o-1][1]+=n[o-1][0]=a,u&&(a-=l/u)}n[o-1][1]+=n[o-1][0]=a,Dy(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=La()(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}}},tx=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=function(){var e=Ju([]),t=Iy,n=Dy,r=Fy;function i(i){var a,o,s,u=Array.from(e.apply(this,arguments),Ny),l=u.length,c=-1,d=(0,Nh.Z)(i);try{for(d.s();!(s=d.n()).done;){var h=s.value;for(a=0,++c;a<l;++a)(u[a][c]=[0,+r(h,u[a].key,c,i)]).data=h}}catch(f){d.e(f)}finally{d.f()}for(a=0,o=tc(t(u));a<l;++a)u[o[a]].index=a;return n(u,o),u}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:Ju(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:Ju(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?Iy:"function"===typeof e?e:Ju(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Dy:e,i):n},i}().keys(r).value((function(e,t){return+Gy(e,t,0)})).order(Iy).offset(ex[n]);return i(e)},nx=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,a=t.originalDomain,o=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&a&&("auto"===a[0]||"auto"===a[1])){var u=e.domain();if(!u.length)return null;var l=Ef(u,i,o);return e.domain(function(e,t){return"number"===t?[Xh()(e),Wh()(e)]:e}(l,r)),{niceTicks:l}}if(i&&"number"===r){var c=e.domain();return{niceTicks:Tf(c,i,o)}}return null},rx=function(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!ho()(i[t.dataKey])){var s=Wa(n,"value",i[t.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=Gy(i,ho()(o)?t.dataKey:o);return ho()(u)?null:t.scale(u)},ix=function(e,t,n){return Object.keys(e).reduce((function(r,i){var a=e[i].stackedData.reduce((function(e,r){var i=r.slice(t,n+1).reduce((function(e,t){return[Xh()(t.concat([e[0]]).filter(za)),Wh()(t.concat([e[1]]).filter(za))]}),[1/0,-1/0]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},ax=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ox=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sx=function(e,t,n){if(!Pa()(e))return t;var r=[];if(za(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(ax.test(e[0])){var i=+ax.exec(e[0])[1];r[0]=t[0]-i}else ro()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(za(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(ox.test(e[1])){var a=+ox.exec(e[1])[1];r[1]=t[1]+a}else ro()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},ux=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=so()(t,(function(e){return e.coordinate})),a=1/0,o=1,s=i.length;o<s;o++){var u=i[o],l=i[o-1];a=Math.min((u.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},lx=function(e,t,n){return e&&e.length?Hh()(e,Ca()(n,"type.defaultProps.domain"))?t:e:t},cx=function(e,t){var n=e.props,r=n.dataKey,i=n.name,a=n.unit,o=n.formatter,s=n.tooltipType,u=n.chartType;return By(By({},bo(e)),{},{dataKey:r,unit:a,formatter:o,name:i||r,color:Zy(e),value:Gy(t,r),type:s,payload:t,chartType:u})};function dx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dx(Object(n),!0).forEach((function(t){fx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var px=["Webkit","Moz","O","ms"];function mx(e){return mx="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(e)}function vx(){return vx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vx.apply(this,arguments)}function gx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gx(Object(n),!0).forEach((function(t){xx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bx(e,t){return bx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bx(e,t)}function wx(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ex(e);if(t){var i=Ex(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sx(this,n)}}function Sx(e,t){return!t||"object"!==mx(t)&&"function"!==typeof t?Mx(e):t}function Mx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ex(e){return Ex=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ex(e)}var Tx=function(e){return e.changedTouches&&!!e.changedTouches.length},kx=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bx(e,t)}(o,e);var n,r,i,a=wx(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).leaveTimer=void 0,t.travellerDragStartHandlers=void 0,t.handleDrag=function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])},t.handleDragEnd=function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1}),t.detachDragEndListener()},t.handleLeaveWrapper=function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))},t.handleEnterSlideOrTraveller=function(){t.setState({isTextActive:!0})},t.handleLeaveSlideOrTraveller=function(){t.setState({isTextActive:!1})},t.handleSlideDragStart=function(e){var n=Tx(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()},t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(Mx(t),"startX"),endX:t.handleTravellerDragStart.bind(Mx(t),"endX")},t.state={},t}return n=o,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,n=e.endX,r=this.state.scaleValues,i=this.props,a=i.gap,s=i.data.length-1,u=Math.min(t,n),l=Math.max(t,n),c=o.getIndexInRange(r,u),d=o.getIndexInRange(r,l);return{startIndex:c-c%a,endIndex:d===s?s:d-d%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,a=Gy(n[e],i,e);return ro()(r)?r(a,e):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,a=this.props,o=a.x,s=a.width,u=a.travellerWidth,l=a.startIndex,c=a.endIndex,d=a.onChange,h=e.pageX-n;h>0?h=Math.min(h,o+s-u-i,o+s-u-r):h<0&&(h=Math.max(h,o-r,o-i));var f=this.getIndex({startX:r+h,endX:i+h});f.startIndex===l&&f.endIndex===c||!d||d(f),this.setState({startX:r+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=Tx(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t,n=this.state,r=n.brushMoveStartX,i=n.movingTravellerId,a=n.endX,o=n.startX,s=this.state[i],u=this.props,l=u.x,c=u.width,d=u.travellerWidth,h=u.onChange,f=u.gap,p=u.data,m={startX:this.state.startX,endX:this.state.endX},v=e.pageX-r;v>0?v=Math.min(v,l+c-d-s):v<0&&(v=Math.max(v,l-s)),m[i]=s+v;var g=this.getIndex(m),y=g.startIndex,x=g.endIndex;this.setState((xx(t={},i,s+v),xx(t,"brushMoveStartX",e.pageX),t),(function(){h&&function(){var e=p.length-1;return"startX"===i&&(a>o?y%f===0:x%f===0)||a<o&&x===e||"endX"===i&&(a>o?x%f===0:y%f===0)||a>o&&x===e}()&&h(g)}))}},{key:"renderBackground",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.fill,s=e.stroke;return t.createElement("rect",{stroke:s,fill:o,x:n,y:r,width:i,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.data,s=e.children,u=e.padding,l=t.Children.only(s);return l?t.cloneElement(l,{x:n,y:r,width:i,height:a,margin:u,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,n){var r=this.props,i=r.y,a=r.travellerWidth,s=r.height,u=r.traveller,l=Math.max(e,this.props.x),c=yx(yx({},bo(this.props)),{},{x:l,y:i,width:a,height:s});return t.createElement(Ao,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],style:{cursor:"col-resize"}},o.renderTraveller(u,c))}},{key:"renderSlide",value:function(e,n){var r=this.props,i=r.y,a=r.height,o=r.stroke,s=r.travellerWidth,u=Math.min(e,n)+s,l=Math.max(Math.abs(n-e)-s,0);return t.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:u,y:i,width:l,height:a})}},{key:"renderText",value:function(){var e=this.props,n=e.startIndex,r=e.endIndex,i=e.y,a=e.height,o=e.travellerWidth,s=e.stroke,u=this.state,l=u.startX,c=u.endX,d={pointerEvents:"none",fill:s};return t.createElement(Ao,{className:"recharts-brush-texts"},t.createElement(ch,vx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:i+a/2},d),this.getTextOfTick(n)),t.createElement(ch,vx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+o+5,y:i+a/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,n=e.data,r=e.className,i=e.children,a=e.x,o=e.y,s=e.width,u=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,h=c.endX,f=c.isTextActive,p=c.isSlideMoving,m=c.isTravellerMoving;if(!n||!n.length||!za(a)||!za(o)||!za(s)||!za(u)||s<=0||u<=0)return null;var v=Ea()("recharts-brush",r),g=1===t.Children.count(i),y=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=px.reduce((function(e,r){return hx(hx({},e),{},fx({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return t.createElement(Ao,{className:v,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),g&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(f||p||m||l)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(e){var n=e.x,r=e.y,i=e.width,a=e.height,o=e.stroke,s=Math.floor(r+a/2)-1;return t.createElement(t.Fragment,null,t.createElement("rect",{x:n,y:r,width:i,height:a,fill:o,stroke:"none"}),t.createElement("line",{x1:n+1,y1:s,x2:n+i-1,y2:s,fill:"none",stroke:"#fff"}),t.createElement("line",{x1:n+1,y1:s+2,x2:n+i-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):ro()(e)?e(n):o.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,a=e.travellerWidth,o=e.updateId,s=e.startIndex,u=e.endIndex;if(n!==t.prevData||o!==t.prevUpdateId)return yx({prevData:n,prevTravellerWidth:a,prevUpdateId:o,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,a=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,u=Vh().domain(lo()(0,s)).range([i,i+a-o]),l=u.domain().map((function(e){return u(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:u(n),endX:u(r),scale:u,scaleValues:l}}({data:n,width:r,x:i,travellerWidth:a,startIndex:s,endIndex:u}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||a!==t.prevTravellerWidth)){t.scale.range([i,i+r-a]);var l=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:a,prevUpdateId:o,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:l}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],r&&_x(n.prototype,r),i&&_x(n,i),o}(t.PureComponent);kx.displayName="Brush",kx.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var Cx=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},Ax=n(37702),Px=n.n(Ax);function Ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lx(Object(n),!0).forEach((function(t){Dx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ix=function(e,t){var n=e.x,r=e.y,i=t.x,a=t.y;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},Fx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=void 0,this.scale=t}var t,n,r;return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&Ox(t.prototype,n),r&&Ox(t,r),e}();Fx.EPS=1e-4;var Nx=function(e){var t=Object.keys(e).reduce((function(t,n){return Rx(Rx({},t),{},Dx({},n,Fx.create(e[n])))}),{});return Rx(Rx({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return Px()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return Ja()(e,(function(e,n){return t[n].isInRange(e)}))}})};function jx(){return jx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jx.apply(this,arguments)}function zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ux(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zx(Object(n),!0).forEach((function(t){Bx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vx(e){var n=e.x,r=e.y,i=e.r,a=e.alwaysShow,o=e.clipPathId,s=Ua(n),u=Ua(r);if(qa(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!u)return null;var l=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,a=Nx({x:r.scale,y:i.scale}),o=a.apply({x:t,y:n},{bandAware:!0});return Cx(e,"discard")&&!a.isInRange(o)?null:o}(e);if(!l)return null;var c=l.x,d=l.y,h=e.shape,f=e.className,p=Ux(Ux({clipPath:Cx(e,"hidden")?"url(#".concat(o,")"):void 0},bo(e,!0)),{},{cx:c,cy:d});return t.createElement(Ao,{className:Ea()("recharts-reference-dot",f)},Vx.renderDot(h,p),yh.renderCallByParent(e,{x:c-i,y:d-i,width:2*i,height:2*i}))}Vx.displayName="ReferenceDot",Vx.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},Vx.renderDot=function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):ro()(e)?e(n):t.createElement(ad,jx({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"}))};var Gx=n(14064),Hx=n.n(Gx);function Zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zx(Object(n),!0).forEach((function(t){qx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Kx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yx(){return Yx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yx.apply(this,arguments)}function Qx(e){var n=e.x,r=e.y,i=e.segment,a=e.xAxis,o=e.yAxis,s=e.shape,u=e.className,l=e.alwaysShow,c=e.clipPathId;qa(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=function(e,t,n,r,i){var a=i.viewBox,o=a.x,s=a.y,u=a.width,l=a.height,c=i.position;if(n){var d=i.y,h=i.yAxis.orientation,f=e.y.apply(d,{position:c});if(Cx(i,"discard")&&!e.y.isInRange(f))return null;var p=[{x:o+u,y:f},{x:o,y:f}];return"left"===h?p.reverse():p}if(t){var m=i.x,v=i.xAxis.orientation,g=e.x.apply(m,{position:c});if(Cx(i,"discard")&&!e.x.isInRange(g))return null;var y=[{x:g,y:s+l},{x:g,y:s}];return"top"===v?y.reverse():y}if(r){var x=i.segment.map((function(t){return e.apply(t,{position:c})}));return Cx(i,"discard")&&Hx()(x,(function(t){return!e.isInRange(t)}))?null:x}return null}(Nx({x:a.scale,y:o.scale}),Ua(n),Ua(r),i&&2===i.length,e);if(!d)return null;var h=Xx(d,2),f=h[0],p=f.x,m=f.y,v=h[1],g=v.x,y=v.y,x=Wx(Wx({clipPath:Cx(e,"hidden")?"url(#".concat(c,")"):void 0},bo(e,!0)),{},{x1:p,y1:m,x2:g,y2:y});return t.createElement(Ao,{className:Ea()("recharts-reference-line",u)},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):ro()(e)?e(n):t.createElement("line",Yx({},n,{className:"recharts-reference-line-line"}))}(s,x),yh.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Ix({x:t,y:n},{x:r,y:i})}({x1:p,y1:m,x2:g,y2:y})))}function $x(){return $x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$x.apply(this,arguments)}function Jx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function e_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jx(Object(n),!0).forEach((function(t){t_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function t_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qx.displayName="ReferenceLine",Qx.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function n_(e){var n=e.x1,r=e.x2,i=e.y1,a=e.y2,o=e.className,s=e.alwaysShow,u=e.clipPathId;qa(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=Ua(n),c=Ua(r),d=Ua(i),h=Ua(a),f=e.shape;if(!l&&!c&&!d&&!h&&!f)return null;var p=function(e,t,n,r,i){var a=i.x1,o=i.x2,s=i.y1,u=i.y2,l=i.xAxis,c=i.yAxis;if(!l||!c)return null;var d=Nx({x:l.scale,y:c.scale}),h={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(o,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(u,{position:"end"}):d.y.rangeMax};return!Cx(i,"discard")||d.isInRange(h)&&d.isInRange(f)?Ix(h,f):null}(l,c,d,h,e);if(!p&&!f)return null;var m=Cx(e,"hidden")?"url(#".concat(u,")"):void 0;return t.createElement(Ao,{className:Ea()("recharts-reference-area",o)},n_.renderRect(f,e_(e_({clipPath:m},bo(e,!0)),p)),yh.renderCallByParent(e,p))}n_.displayName="ReferenceArea",n_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},n_.renderRect=function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):ro()(e)?e(n):t.createElement(vd,$x({},n,{className:"recharts-reference-area-rect"}))};var r_=function(e,t,n,r,i){var a=Ed(e,Qx.displayName),o=Ed(e,Vx.displayName),s=a.concat(o),u=Ed(e,n_.displayName),l="".concat(r,"Id"),c=r[0],d=t;if(s.length&&(d=s.reduce((function(e,t){if(t.props[l]===n&&Cx(t.props,"extendDomain")&&za(t.props[c])){var r=t.props[c];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),d)),u.length){var h="".concat(c,"1"),f="".concat(c,"2");d=u.reduce((function(e,t){if(t.props[l]===n&&Cx(t.props,"extendDomain")&&za(t.props[h])&&za(t.props[f])){var r=t.props[h],i=t.props[f];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),d)}return i&&i.length&&(d=i.reduce((function(e,t){return za(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),d)),d},i_=n(97143),a_=new(n.n(i_)());a_.setMaxListeners&&a_.setMaxListeners(10);var o_="recharts.syncMouseEvents";function s_(e){return s_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(e)}function u_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||y_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l_(){return l_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l_.apply(this,arguments)}function c_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h_(e,t){return h_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h_(e,t)}function f_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v_(e);if(t){var i=v_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p_(this,n)}}function p_(e,t){return!t||"object"!==s_(t)&&"function"!==typeof t?m_(e):t}function m_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v_(e){return v_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v_(e)}function g_(e){return function(e){if(Array.isArray(e))return x_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y_(e,t){if(e){if("string"===typeof e)return x_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x_(e,t):void 0}}function x_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function __(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?__(Object(n),!0).forEach((function(t){w_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):__(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S_={xAxis:["bottom","top"],yAxis:["left","right"]},M_={x:0,y:0},E_=Number.isFinite?Number.isFinite:isFinite,T_="function"===typeof requestAnimationFrame?requestAnimationFrame:"function"===typeof setImmediate?setImmediate:setTimeout,k_="function"===typeof cancelAnimationFrame?cancelAnimationFrame:"function"===typeof clearImmediate?clearImmediate:clearTimeout,C_=function(e,t,n){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,o=(r||[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(g_(e),g_(n)):e}),[]);return o&&o.length>0?o:n&&n.props&&n.props.data&&n.props.data.length>0?n.props.data:e&&e.length&&za(i)&&za(a)?e.slice(i,a+1):[]},A_=function(e,t,n,r){var i=e.graphicalItems,a=e.tooltipAxis,o=C_(t,e);return n<0||!i||!i.length||n>=o.length?null:i.reduce((function(e,t){if(t.props.hide)return e;var i,s=t.props.data;a.dataKey&&!a.allowDuplicatedCategory?i=Wa(void 0===s?o:s,a.dataKey,r):i=s&&s[n]||o[n];return i?[].concat(g_(e),[cx(t,i)]):e}),[])},P_=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},a=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),o=e.orderedTooltipTicks,s=e.tooltipAxis,u=e.tooltipTicks,l=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=-1,o=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(o>1){if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,u=0;u<o;u++){var l=u>0?r[u-1].coordinate:r[o-1].coordinate,c=r[u].coordinate,d=u>=o-1?r[0].coordinate:r[u+1].coordinate,h=void 0;if(Na(c-l)!==Na(d-c)){var f=[];if(Na(d-c)===Na(s[1]-s[0])){h=d;var p=c+s[1]-s[0];f[0]=Math.min(p,(p+l)/2),f[1]=Math.max(p,(p+l)/2)}else{h=l;var m=d+s[1]-s[0];f[0]=Math.min(c,(m+c)/2),f[1]=Math.max(c,(m+c)/2)}var v=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(e>v[0]&&e<=v[1]||e>=f[0]&&e<=f[1]){a=r[u].index;break}}else{var g=Math.min(l,d),y=Math.max(l,d);if(e>(g+c)/2&&e<=(y+c)/2){a=r[u].index;break}}}else for(var x=0;x<o;x++)if(0===x&&e<=(n[x].coordinate+n[x+1].coordinate)/2||x>0&&x<o-1&&e>(n[x].coordinate+n[x-1].coordinate)/2&&e<=(n[x].coordinate+n[x+1].coordinate)/2||x===o-1&&e>(n[x].coordinate+n[x-1].coordinate)/2){a=n[x].index;break}}else a=0;return a}(a,o,u,s);if(l>=0&&u){var c=u[l]&&u[l].value,d=A_(e,t,l,c),h=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,o=r.radius;return b_(b_(b_({},r),Fc(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,u=r.angle;return b_(b_(b_({},r),Fc(r.cx,r.cy,s,u)),{},{angle:u,radius:s})}return M_}(n,o,l,i);return{activeTooltipIndex:l,activeLabel:c,activePayload:d,activeCoordinate:h}}return null},O_=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,a=t.axisIdKey,o=t.stackGroups,s=t.dataStartIndex,u=t.dataEndIndex,l=e.layout,c=e.children,d=e.stackOffset,h=Ky(l,i),f=n.reduce((function(t,n){var f=n.props,p=f.type,m=f.dataKey,v=f.allowDataOverflow,g=f.allowDuplicatedCategory,y=f.scale,x=f.ticks,_=n.props[a],b=C_(e.data,{graphicalItems:r.filter((function(e){return e.props[a]===_})),dataStartIndex:s,dataEndIndex:u}),w=b.length;if(!t[_]){var S,M,E;if(m){if(S=Hy(b,m,p),"category"===p&&h){var T=function(e){if(!Pa()(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);g&&T?(M=S,S=lo()(0,w)):g||(S=lx(n.props.domain,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(g_(e),[t])}),[]))}else if("category"===p)S=g?S.filter((function(e){return""!==e&&!ho()(e)})):lx(n.props.domain,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||ho()(t)?e:[].concat(g_(e),[t])}),[]);else if("number"===p){var k=function(e,t,n,r){var i=t.map((function(t){return qy(e,t,n,r)})).filter((function(e){return!ho()(e)}));return i&&i.length?i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(b,r.filter((function(e){return e.props[a]===_&&!e.props.hide})),m,i);k&&(S=k)}!h||"number"!==p&&"auto"===y||(E=Hy(b,m,"category"))}else S=h?lo()(0,w):o&&o[_]&&o[_].hasStack&&"number"===p?"expand"===d?[0,1]:ix(o[_].stackGroups,s,u):Xy(b,r.filter((function(e){return e.props[a]===_&&!e.props.hide})),p,!0);if("number"===p)S=r_(c,S,_,i,x),n.props.domain&&(S=sx(n.props.domain,S,v));else if("category"===p&&n.props.domain){var C=n.props.domain;S.every((function(e){return C.indexOf(e)>=0}))&&(S=C)}return b_(b_({},t),{},w_({},_,b_(b_({},n.props),{},{axisType:i,domain:S,categoricalDomain:E,duplicateDomain:M,originalDomain:n.props.domain,isCategorical:h,layout:l})))}return t}),{});return f},L_=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,a=t.graphicalItems,o=t.stackGroups,s=t.dataStartIndex,u=t.dataEndIndex,l=e.children,c="".concat(r,"Id"),d=Ed(l,i),h={};return d&&d.length?h=O_(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:c,stackGroups:o,dataStartIndex:s,dataEndIndex:u}):a&&a.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,a=t.axisIdKey,o=t.stackGroups,s=t.dataStartIndex,u=t.dataEndIndex,l=e.layout,c=e.children,d=C_(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:u}),h=d.length,f=Ky(l,i),p=-1;return n.reduce((function(e,t){var m,v=t.props[a];return e[v]?e:(p++,f?m=lo()(0,h):o&&o[v]&&o[v].hasStack?(m=ix(o[v].stackGroups,s,u),m=r_(c,m,v,i)):(m=sx(r.defaultProps.domain,Xy(d,n.filter((function(e){return e.props[a]===v&&!e.props.hide})),"number"),r.defaultProps.allowDataOverflow),m=r_(c,m,v,i)),b_(b_({},e),{},w_({},v,b_(b_({axisType:i},r.defaultProps),{},{hide:!0,orientation:Ca()(S_,"".concat(i,".").concat(p%2),null),domain:m,originalDomain:r.defaultProps.domain,isCategorical:f,layout:l}))))}),{})}(e,{Axis:i,graphicalItems:a,axisType:r,axisIdKey:c,stackGroups:o,dataStartIndex:s,dataEndIndex:u})),h},R_=function(e){var t=e.children,n=e.defaultShowTooltip,r=Td(t,kx.displayName);return{chartX:0,chartY:0,dataStartIndex:r&&r.props&&r.props.startIndex||0,dataEndIndex:r&&r.props&&r.props.endIndex||e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!ho()(n)&&n}},D_=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},I_=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,a=e.yAxisMap,o=void 0===a?{}:a,s=n.width,u=n.height,l=n.children,c=n.margin||{},d=Td(l,kx.displayName),h=Td(l,Fl.displayName),f=Object.keys(o).reduce((function(e,t){var n=o[t],r=n.orientation;return n.mirror||n.hide?e:b_(b_({},e),{},w_({},r,e[r]+n.width))}),{left:c.left||0,right:c.right||0}),p=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:b_(b_({},e),{},w_({},r,Ca()(e,"".concat(r))+n.height))}),{top:c.top||0,bottom:c.bottom||0}),m=b_(b_({},p),f),v=m.bottom;return d&&(m.bottom+=d.props.height||kx.defaultProps.height),h&&t&&(m=function(e,t,n,r){var i=n.children,a=n.width,o=n.margin,s=a-(o.left||0)-(o.right||0),u=Wy({children:i,legendWidth:s}),l=e;if(u){var c=r||{},d=u.align,h=u.verticalAlign,f=u.layout;("vertical"===f||"horizontal"===f&&"center"===h)&&za(e[d])&&(l=By(By({},e),{},Vy({},d,l[d]+(c.width||0)))),("horizontal"===f||"vertical"===f&&"center"===d)&&za(e[h])&&(l=By(By({},e),{},Vy({},h,l[h]+(c.height||0))))}return l}(m,0,n,t)),b_(b_({brushBottom:v},m),{},{width:s-m.left-m.right,height:u-m.top-m.bottom})},F_=n(15727),N_=n.n(F_);function j_(e){return function(e){if(Array.isArray(e))return z_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z_(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U_(){return U_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U_.apply(this,arguments)}function B_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(n),!0).forEach((function(t){G_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Z_={valueAccessor:function(e){return Pa()(e.value)?N_()(e.value):e.value}};function W_(e){var n=e.data,r=e.valueAccessor,i=e.dataKey,a=e.clockWise,o=e.id,s=e.textBreakAll,u=H_(e,["data","valueAccessor","dataKey","clockWise","id","textBreakAll"]);return n&&n.length?t.createElement(Ao,{className:"recharts-label-list"},n.map((function(e,n){var l=ho()(i)?r(e,n):Gy(e&&e.payload,i),c=ho()(o)?{}:{id:"".concat(o,"-").concat(n)};return t.createElement(yh,U_({},bo(e,!0),u,c,{parentViewBox:e.parentViewBox,index:n,value:l,textBreakAll:s,viewBox:yh.parseViewBox(ho()(a)?e:V_(V_({},e),{},{clockWise:a})),key:"label-".concat(n)}))}))):null}function q_(e,n){return e?!0===e?t.createElement(W_,{key:"labelList-implicit",data:n}):t.isValidElement(e)||ro()(e)?t.createElement(W_,{key:"labelList-implicit",data:n,content:e}):vo()(e)?t.createElement(W_,U_({data:n},e,{key:"labelList-implicit"})):null:null}function X_(){return X_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X_.apply(this,arguments)}function K_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $_(e){var n=e.offset,r=e.layout,i=e.width,a=e.dataKey,o=e.data,s=e.dataPointFormatter,u=e.xAxis,l=e.yAxis,c=Q_(e,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),d=bo(c),h=o.map((function(e,o){var c=s(e,a),h=c.x,f=c.y,p=c.value,m=c.errorVal;if(!m)return null;var v,g,y=[];if(Array.isArray(m)){var x=K_(m,2);v=x[0],g=x[1]}else v=g=m;if("vertical"===r){var _=u.scale,b=f+n,w=b+i,S=b-i,M=_(p-v),E=_(p+g);y.push({x1:E,y1:w,x2:E,y2:S}),y.push({x1:M,y1:b,x2:E,y2:b}),y.push({x1:M,y1:w,x2:M,y2:S})}else if("horizontal"===r){var T=l.scale,k=h+n,C=k-i,A=k+i,P=T(p-v),O=T(p+g);y.push({x1:C,y1:O,x2:A,y2:O}),y.push({x1:k,y1:P,x2:k,y2:O}),y.push({x1:C,y1:P,x2:A,y2:P})}return t.createElement(Ao,X_({className:"recharts-errorBar",key:"bar-".concat(o)},d),y.map((function(e,n){return t.createElement("line",X_({},e,{key:"line-".concat(n)}))})))}));return t.createElement(Ao,{className:"recharts-errorBars"},h)}function J_(e){return J_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(e)}function eb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tb(){return tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tb.apply(this,arguments)}function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach((function(t){ib(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ib(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ab(e){return function(e){if(Array.isArray(e))return ob(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ob(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ob(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ob(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lb(e,t){return lb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lb(e,t)}function cb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hb(e);if(t){var i=hb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return db(this,n)}}function db(e,t){return!t||"object"!==J_(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hb(e){return hb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hb(e)}W_.displayName="LabelList",W_.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=Ed(i,W_.displayName).map((function(e,r){return(0,t.cloneElement)(e,{data:n,key:"labelList-".concat(r)})}));if(!r)return a;var o=q_(e.label,n);return[o].concat(j_(a))},W_.defaultProps=Z_,$_.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},$_.displayName="ErrorBar";var fb=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lb(e,t)}(o,e);var n,r,i,a=cb(o);function o(){var e;sb(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).mainCurve=void 0,e.state={isAnimationFinished:!0,totalLength:0},e.getStrokeDasharray=function(e,t,n){for(var r=n.reduce((function(e,t){return e+t})),i=Math.floor(e/r),a=e%r,s=t-e,u=[],l=0,c=0;;c+=n[l],++l)if(c+n[l]>a){u=[].concat(ab(n.slice(0,l)),[a-c]);break}var d=u.length%2===0?[0,s]:[s];return[].concat(ab(o.repeat(n,i)),ab(u),d).map((function(e){return"".concat(e,"px")})).join(", ")},e.id=Va("recharts-line-"),e.pathRef=function(t){e.mainCurve=t},e.handleAnimationEnd=function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()},e.handleAnimationStart=function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()},e}return n=o,r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,n=e.points,r=e.xAxis,i=e.yAxis,a=e.layout,o=e.children,s=Ed(o,$_.displayName);if(!s)return null;function u(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:Gy(e.payload,t)}}return s.map((function(e,o){return t.cloneElement(e,{key:"bar-".concat(o),data:n,xAxis:r,yAxis:i,layout:a,dataPointFormatter:u})}))}},{key:"renderDots",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,i=r.dot,a=r.points,s=r.dataKey,u=bo(this.props),l=bo(i,!0),c=a.map((function(e,t){var n=rb(rb(rb({key:"dot-".concat(t),r:3},u),l),{},{value:e.value,dataKey:s,cx:e.x,cy:e.y,index:t,payload:e.payload});return o.renderDotItem(i,n)})),d={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement(Ao,tb({className:"recharts-line-dots",key:"dots"},d),c)}},{key:"renderCurveStatically",value:function(e,n,r,i){var a=this.props,o=a.type,s=a.layout,u=a.connectNulls,l=(a.ref,eb(a,["type","layout","connectNulls","ref"])),c=rb(rb(rb({},bo(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(r,")"):null,points:e},i),{},{type:o,layout:s,connectNulls:u});return t.createElement(bc,tb({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,n){var r=this,i=this.props,a=i.points,o=i.strokeDasharray,s=i.isAnimationActive,u=i.animationBegin,l=i.animationDuration,c=i.animationEasing,d=i.animationId,h=i.animateNewValues,f=i.width,p=i.height,m=this.state,v=m.prevPoints,g=m.totalLength;return t.createElement(Ys,{begin:u,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var i=t.t;if(v){var s=v.length/a.length,u=a.map((function(e,t){var n=Math.floor(t*s);if(v[n]){var r=v[n],a=Za(r.x,e.x),o=Za(r.y,e.y);return rb(rb({},e),{},{x:a(i),y:o(i)})}if(h){var u=Za(2*f,e.x),l=Za(p/2,e.y);return rb(rb({},e),{},{x:u(i),y:l(i)})}return rb(rb({},e),{},{x:e.x,y:e.y})}));return r.renderCurveStatically(u,e,n)}var l,c=Za(0,g)(i);if(o){var d="".concat(o).split(/[,\s]+/gim).map((function(e){return parseFloat(e)}));l=r.getStrokeDasharray(c,g,d)}else l="".concat(c,"px ").concat(g-c,"px");return r.renderCurveStatically(a,e,n,{strokeDasharray:l})}))}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,i=n.isAnimationActive,a=this.state,o=a.prevPoints,s=a.totalLength;return i&&r&&r.length&&(!o&&s>0||!Hh()(o,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e=this.props,n=e.hide,r=e.dot,i=e.points,a=e.className,o=e.xAxis,s=e.yAxis,u=e.top,l=e.left,c=e.width,d=e.height,h=e.isAnimationActive,f=e.id;if(n||!i||!i.length)return null;var p=this.state.isAnimationFinished,m=1===i.length,v=Ea()("recharts-line",a),g=o&&o.allowDataOverflow||s&&s.allowDataOverflow,y=ho()(f)?this.id:f;return t.createElement(Ao,{className:v},g?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(y)},t.createElement("rect",{x:l,y:u,width:c,height:d}))):null,!m&&this.renderCurve(g,y),this.renderErrorBar(),(m||r)&&this.renderDots(g,y),(!h||p)&&W_.renderCallByParent(this.props,i))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!==0?[].concat(ab(e),[0]):e,r=[],i=0;i<t;++i)r=[].concat(ab(r),ab(n));return r}},{key:"renderDotItem",value:function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(ro()(e))r=e(n);else{var i=Ea()("recharts-line-dot",e?e.className:"");r=t.createElement(ad,tb({},n,{className:i}))}return r}}],r&&ub(n.prototype,r),i&&ub(n,i),o}(t.PureComponent);fb.displayName="Line",fb.defaultProps={xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!du.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1},fb.getComposedData=function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,s=e.bandSize,u=e.displayedData,l=e.offset,c=t.layout,d=u.map((function(e,t){var u=Gy(e,o);return"horizontal"===c?{x:rx({axis:n,ticks:i,bandSize:s,entry:e,index:t}),y:ho()(u)?null:r.scale(u),value:u,payload:e}:{x:ho()(u)?null:n.scale(u),y:rx({axis:r,ticks:a,bandSize:s,entry:e,index:t}),value:u,payload:e}}));return rb({points:d,layout:c},l)};var pb=function(){return null};pb.displayName="XAxis",pb.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",domain:[0,"auto"],padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var mb=function(){return null};mb.displayName="YAxis",mb.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",domain:[0,"auto"],padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var vb=function(e){var n,r,i=e.chartName,a=e.GraphicalChild,o=e.defaultTooltipEventType,s=void 0===o?"axis":o,u=e.validateTooltipEventTypes,l=void 0===u?["axis"]:u,c=e.axisComponents,d=e.legendContent,h=e.formatAxisMap,f=e.defaultProps,p=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,a=t.updateId,o=t.dataStartIndex,s=t.dataEndIndex,u=e.barSize,l=e.layout,d=e.barGap,h=e.barCategoryGap,f=e.maxBarSize,p=D_(l),m=p.numericAxisName,v=p.cateAxisName,g=function(e){return!(!e||!e.length)&&e.some((function(e){var t=bd(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),y=g&&function(e){var t=e.barSize,n=e.stackGroups,r=void 0===n?{}:n;if(!r)return{};for(var i={},a=Object.keys(r),o=0,s=a.length;o<s;o++)for(var u=r[a[o]].stackGroups,l=Object.keys(u),c=0,d=l.length;c<d;c++){var h=u[l[c]],f=h.items,p=h.cateAxisId,m=f.filter((function(e){return bd(e.type).indexOf("Bar")>=0}));if(m&&m.length){var v=m[0].props.barSize,g=m[0].props[p];i[g]||(i[g]=[]),i[g].push({item:m[0],stackList:m.slice(1),barSize:ho()(v)?t:v})}}return i}({barSize:u,stackGroups:r}),x=[];return n.forEach((function(n,u){var p=C_(e.data,{dataStartIndex:o,dataEndIndex:s},n),g=n.props,_=g.dataKey,b=g.maxBarSize,w=n.props["".concat(m,"Id")],S=n.props["".concat(v,"Id")],M=c.reduce((function(e,r){var i,a=t["".concat(r.axisType,"Map")],o=n.props["".concat(r.axisType,"Id")],s=a&&a[o];return b_(b_({},e),{},(w_(i={},r.axisType,s),w_(i,"".concat(r.axisType,"Ticks"),Qy(s)),i))}),{}),E=M[v],T=M["".concat(v,"Ticks")],k=r&&r[w]&&r[w].hasStack&&function(e,t){var n=e.props.stackId;if(Ua(n)){var r=t[n];if(r&&r.items.length){for(var i=-1,a=0,o=r.items.length;a<o;a++)if(r.items[a]===e){i=a;break}return i>=0?r.stackedData[i]:null}}return null}(n,r[w].stackGroups),C=bd(n.type).indexOf("Bar")>=0,A=ux(E,T),P=[];if(C){var O,L,R=ho()(b)?f:b,D=null!==(O=null!==(L=ux(E,T,!0))&&void 0!==L?L:R)&&void 0!==O?O:0;P=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,a=void 0===i?[]:i,o=e.maxBarSize,s=a.length;if(s<1)return null;var u,l=Ga(t,r,0,!0);if(a[0].barSize===+a[0].barSize){var c=!1,d=r/s,h=a.reduce((function(e,t){return e+t.barSize||0}),0);(h+=(s-1)*l)>=r&&(h-=(s-1)*l,l=0),h>=r&&d>0&&(c=!0,h=s*(d*=.9));var f={offset:((r-h)/2>>0)-l,size:0};u=a.reduce((function(e,t){var n=[].concat(jy(e),[{item:t.item,position:{offset:f.offset+f.size+l,size:c?d:t.barSize}}]);return f=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:f})})),n}),[])}else{var p=Ga(n,r,0,!0);r-2*p-(s-1)*l<=0&&(l=0);var m=(r-2*p-(s-1)*l)/s;m>1&&(m>>=0);var v=o===+o?Math.min(m,o):m;u=a.reduce((function(e,t,n){var r=[].concat(jy(e),[{item:t.item,position:{offset:p+(m+l)*n+(m-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),[])}return u}({barGap:d,barCategoryGap:h,bandSize:D!==A?D:A,sizeList:y[S],maxBarSize:R}),D!==A&&(P=P.map((function(e){return b_(b_({},e),{},{position:b_(b_({},e.position),{},{offset:e.position.offset-D/2})})})))}var I,F,N,j=n&&n.type&&n.type.getComposedData;j&&x.push({props:b_(b_({},j(b_(b_({},M),{},{displayedData:p,props:e,dataKey:_,item:n,bandSize:A,barPosition:P,offset:i,stackedData:k,layout:l,dataStartIndex:o,dataEndIndex:s}))),{},(I={key:n.key||"item-".concat(u)},w_(I,m,M[m]),w_(I,v,M[v]),w_(I,"animationId",a),I)),childIndex:(F=n,N=e.children,Md(N).indexOf(F)),item:n})})),x},m=function(e,t){var n=e.props,r=e.dataStartIndex,o=e.dataEndIndex,s=e.updateId;if(!kd({props:n}))return null;var u=n.children,l=n.layout,d=n.stackOffset,f=n.data,m=n.reverseStackOrder,v=D_(l),g=v.numericAxisName,y=v.cateAxisName,x=Ed(u,a),_=function(e,t,n,r,i,a){if(!e)return null;var o=(a?t.reverse():t).reduce((function(e,t){var i=t.props,a=i.stackId;if(i.hide)return e;var o=t.props[n],s=e[o]||{hasStack:!1,stackGroups:{}};if(Ua(a)){var u=s.stackGroups[a]||{numericAxisId:n,cateAxisId:r,items:[]};u.items.push(t),s.hasStack=!0,s.stackGroups[a]=u}else s.stackGroups[Va("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return By(By({},e),{},Vy({},o,s))}),{});return Object.keys(o).reduce((function(t,a){var s=o[a];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,a){var o=s.stackGroups[a];return By(By({},t),{},Vy({},a,{numericAxisId:n,cateAxisId:r,items:o.items,stackedData:tx(e,o.items,i)}))}),{})),By(By({},t),{},Vy({},a,s))}),{})}(f,x,"".concat(g,"Id"),"".concat(y,"Id"),d,m),b=c.reduce((function(e,t){var i="".concat(t.axisType,"Map");return b_(b_({},e),{},w_({},i,L_(n,b_(b_({},t),{},{graphicalItems:x,stackGroups:t.axisType===g&&_,dataStartIndex:r,dataEndIndex:o}))))}),{}),w=I_(b_(b_({},b),{},{props:n,graphicalItems:x}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(b).forEach((function(e){b[e]=h(n,b[e],w,e.replace("Map",""),i)}));var S=function(e){var t=Ha(e),n=Qy(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:so()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:ux(t,n)}}(b["".concat(y,"Map")]),M=p(n,b_(b_({},b),{},{dataStartIndex:r,dataEndIndex:o,updateId:s,graphicalItems:x,stackGroups:_,offset:w}));return b_(b_({formattedGraphicalItems:M,graphicalItems:x,offset:w,stackGroups:_},S),b)};return r=n=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h_(e,t)}(u,e);var n,r,a,o=f_(u);function u(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=o.call(this,e)).uniqueChartId=void 0,n.clipPathId=void 0,n.legendInstance=void 0,n.deferId=void 0,n.container=void 0,n.clearDeferId=function(){!ho()(n.deferId)&&k_&&k_(n.deferId),n.deferId=null},n.handleLegendBBoxUpdate=function(e){if(e&&n.legendInstance){var t=n.state,r=t.dataStartIndex,i=t.dataEndIndex,a=t.updateId;n.setState(b_({legendBBox:e},m({props:n.props,dataStartIndex:r,dataEndIndex:i,updateId:a},b_(b_({},n.state),{},{legendBBox:e}))))}},n.handleReceiveSyncEvent=function(e,t,r){n.props.syncId===e&&t!==n.uniqueChartId&&(n.clearDeferId(),n.deferId=T_&&T_(n.applySyncEvent.bind(m_(n),r)))},n.handleBrushChange=function(e){var t=e.startIndex,r=e.endIndex;if(t!==n.state.dataStartIndex||r!==n.state.dataEndIndex){var i=n.state.updateId;n.setState((function(){return b_({dataStartIndex:t,dataEndIndex:r},m({props:n.props,dataStartIndex:t,dataEndIndex:r,updateId:i},n.state))})),n.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}},n.handleMouseEnter=function(e){var t=n.props.onMouseEnter,r=n.getMouseInfo(e);if(r){var i=b_(b_({},r),{},{isTooltipActive:!0});n.setState(i),n.triggerSyncEvent(i),ro()(t)&&t(i,e)}},n.triggeredAfterMouseMove=function(e){var t=n.props.onMouseMove,r=n.getMouseInfo(e),i=r?b_(b_({},r),{},{isTooltipActive:!0}):{isTooltipActive:!1};n.setState(i),n.triggerSyncEvent(i),ro()(t)&&t(i,e)},n.handleItemMouseEnter=function(e){n.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))},n.handleItemMouseLeave=function(){n.setState((function(){return{isTooltipActive:!1}}))},n.handleMouseMove=function(e){e&&ro()(e.persist)&&e.persist(),n.triggeredAfterMouseMove(e)},n.handleMouseLeave=function(e){var t=n.props.onMouseLeave,r={isTooltipActive:!1};n.setState(r),n.triggerSyncEvent(r),ro()(t)&&t(r,e),n.cancelThrottledTriggerAfterMouseMove()},n.handleOuterEvent=function(e){var t=function(e){var t=e&&e.type;return t&&_d[t]?_d[t]:null}(e),r=Ca()(n.props,"".concat(t));t&&ro()(r)&&r(/.*touch.*/i.test(t)?n.getMouseInfo(e.changedTouches[0]):n.getMouseInfo(e),e)},n.handleClick=function(e){var t=n.props.onClick,r=n.getMouseInfo(e);if(r){var i=b_(b_({},r),{},{isTooltipActive:!0});n.setState(i),n.triggerSyncEvent(i),ro()(t)&&t(i,e)}},n.handleMouseDown=function(e){var t=n.props.onMouseDown;ro()(t)&&t(n.getMouseInfo(e),e)},n.handleMouseUp=function(e){var t=n.props.onMouseUp;ro()(t)&&t(n.getMouseInfo(e),e)},n.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseMove(e.changedTouches[0])},n.handleTouchStart=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseDown(e.changedTouches[0])},n.handleTouchEnd=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseUp(e.changedTouches[0])},n.verticalCoordinatesGenerator=function(e){var t=e.xAxis,n=e.width,r=e.height,i=e.offset;return Yy(Rh.getTicks(b_(b_(b_({},Rh.defaultProps),t),{},{ticks:Qy(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.left,i.left+i.width)},n.horizontalCoordinatesGenerator=function(e){var t=e.yAxis,n=e.width,r=e.height,i=e.offset;return Yy(Rh.getTicks(b_(b_(b_({},Rh.defaultProps),t),{},{ticks:Qy(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.top,i.top+i.height)},n.axesTicksGenerator=function(e){return Qy(e,!0)},n.renderCursor=function(e){var r=n.state,a=r.isTooltipActive,o=r.activeCoordinate,s=r.activePayload,u=r.offset,l=r.activeTooltipIndex,c=n.getTooltipEventType();if(!e||!e.props.cursor||!a||!o||"ScatterChart"!==i&&"axis"!==c)return null;var d,h=n.props.layout,f=bc;if("ScatterChart"===i)d=o,f=Pc;else if("BarChart"===i)d=n.getCursorRectangle(),f=vd;else if("radial"===h){var p=n.getCursorPoints(),m=p.cx,v=p.cy,g=p.radius;d={cx:m,cy:v,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:g,outerRadius:g},f=Yc}else d={points:n.getCursorPoints()},f=bc;var y=e.key||"_recharts-cursor",x=b_(b_(b_(b_({stroke:"#ccc",pointerEvents:"none"},u),d),bo(e.props.cursor)),{},{payload:s,payloadIndex:l,key:y,className:"recharts-tooltip-cursor"});return(0,t.isValidElement)(e.props.cursor)?(0,t.cloneElement)(e.props.cursor,x):(0,t.createElement)(f,x)},n.renderPolarAxis=function(e,r,i){var a=Ca()(e,"type.axisType"),o=Ca()(n.state,"".concat(a,"Map"))[e.props["".concat(a,"Id")]];return(0,t.cloneElement)(e,b_(b_({},o),{},{className:a,key:e.key||"".concat(r,"-").concat(i),ticks:Qy(o,!0)}))},n.renderXAxis=function(e,t,r){var i=n.state.xAxisMap[e.props.xAxisId];return n.renderAxis(i,e,t,r)},n.renderYAxis=function(e,t,r){var i=n.state.yAxisMap[e.props.yAxisId];return n.renderAxis(i,e,t,r)},n.renderGrid=function(e){var r=n.state,i=r.xAxisMap,a=r.yAxisMap,o=r.offset,s=n.props,u=s.width,l=s.height,c=Ha(i),d=to()(a,(function(e){return Ja()(e.domain,E_)}))||Ha(a),h=e.props||{};return(0,t.cloneElement)(e,{key:e.key||"grid",x:za(h.x)?h.x:o.left,y:za(h.y)?h.y:o.top,width:za(h.width)?h.width:o.width,height:za(h.height)?h.height:o.height,xAxis:c,yAxis:d,offset:o,chartWidth:u,chartHeight:l,verticalCoordinatesGenerator:h.verticalCoordinatesGenerator||n.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:h.horizontalCoordinatesGenerator||n.horizontalCoordinatesGenerator})},n.renderPolarGrid=function(e){var r=e.props,i=r.radialLines,a=r.polarAngles,o=r.polarRadius,s=n.state,u=s.radiusAxisMap,l=s.angleAxisMap,c=Ha(u),d=Ha(l),h=d.cx,f=d.cy,p=d.innerRadius,m=d.outerRadius;return(0,t.cloneElement)(e,{polarAngles:Pa()(a)?a:Qy(d,!0).map((function(e){return e.coordinate})),polarRadius:Pa()(o)?o:Qy(c,!0).map((function(e){return e.coordinate})),cx:h,cy:f,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:i})},n.renderLegend=function(){var e=n.state.formattedGraphicalItems,r=n.props,i=r.children,a=r.width,o=r.height,s=n.props.margin||{},u=a-(s.left||0)-(s.right||0),l=Wy({children:i,formattedGraphicalItems:e,legendWidth:u,legendContent:d});if(!l)return null;var c=l.item,h=c_(l,["item"]);return(0,t.cloneElement)(c,b_(b_({},h),{},{chartWidth:a,chartHeight:o,margin:s,ref:function(e){n.legendInstance=e},onBBoxUpdate:n.handleLegendBBoxUpdate}))},n.renderTooltip=function(){var e=n.props.children,r=Td(e,Mu.displayName);if(!r)return null;var i=n.state,a=i.isTooltipActive,o=i.activeCoordinate,s=i.activePayload,u=i.activeLabel,l=i.offset;return(0,t.cloneElement)(r,{viewBox:b_(b_({},l),{},{x:l.left,y:l.top}),active:a,label:u,payload:a?s:[],coordinate:o})},n.renderBrush=function(e){var r=n.props,i=r.margin,a=r.data,o=n.state,s=o.offset,u=o.dataStartIndex,l=o.dataEndIndex,c=o.updateId;return(0,t.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:$y(n.handleBrushChange,null,e.props.onChange),data:a,x:za(e.props.x)?e.props.x:s.left,y:za(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(i.bottom||0),width:za(e.props.width)?e.props.width:s.width,startIndex:u,endIndex:l,updateId:"brush-".concat(c)})},n.renderReferenceElement=function(e,r,i){if(!e)return null;var a=m_(n).clipPathId,o=n.state,s=o.xAxisMap,u=o.yAxisMap,l=o.offset,c=e.props,d=c.xAxisId,h=c.yAxisId;return(0,t.cloneElement)(e,{key:e.key||"".concat(r,"-").concat(i),xAxis:s[d],yAxis:u[h],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:a})},n.renderActivePoints=function(e){var t=e.item,n=e.activePoint,r=e.basePoint,i=e.childIndex,a=e.isRange,o=[],s=t.props.key,l=t.item.props,c=l.activeDot,d=b_(b_({index:i,dataKey:l.dataKey,cx:n.x,cy:n.y,r:4,fill:Zy(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value,key:"".concat(s,"-activePoint-").concat(i)},bo(c)),wo(c));return o.push(u.renderActiveDot(c,d)),r?o.push(u.renderActiveDot(c,b_(b_({},d),{},{cx:r.x,cy:r.y,key:"".concat(s,"-basePoint-").concat(i)}))):a&&o.push(null),o},n.renderGraphicChild=function(e,r,i){var a=n.filterFormatItem(e,r,i);if(!a)return null;var o=n.getTooltipEventType(),s=n.state,u=s.isTooltipActive,l=s.tooltipAxis,c=s.activeTooltipIndex,d=s.activeLabel,h=n.props.children,f=Td(h,Mu.displayName),p=a.props,m=p.points,v=p.isRange,g=p.baseLine,y=a.item.props,x=y.activeDot,_=!y.hide&&u&&f&&x&&c>=0,b={};"axis"!==o&&f&&"click"===f.props.trigger?b={onClick:$y(n.handleItemMouseEnter,null,e.props.onCLick)}:"axis"!==o&&(b={onMouseLeave:$y(n.handleItemMouseLeave,null,e.props.onMouseLeave),onMouseEnter:$y(n.handleItemMouseEnter,null,e.props.onMouseEnter)});var w=(0,t.cloneElement)(e,b_(b_({},a.props),b));if(_){var S,M;if(l.dataKey&&!l.allowDuplicatedCategory){var E="function"===typeof l.dataKey?function(e){return"function"===typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());S=Wa(m,E,d),M=v&&g&&Wa(g,E,d)}else S=m[c],M=v&&g&&g[c];if(!ho()(S))return[w].concat(g_(n.renderActivePoints({item:a,activePoint:S,basePoint:M,childIndex:c,isRange:v})))}return v?[w,null,null]:[w,null]},n.renderCustomized=function(e,r,i){return(0,t.cloneElement)(e,b_(b_({key:"recharts-customized-".concat(i)},n.props),n.state))},n.uniqueChartId=ho()(e.id)?Va("recharts"):e.id,n.clipPathId="".concat(n.uniqueChartId,"-clip"),e.throttleDelay&&(n.triggeredAfterMouseMove=ao()(n.triggeredAfterMouseMove,e.throttleDelay)),n.state={},n}return n=u,r=[{key:"componentDidMount",value:function(){ho()(this.props.syncId)||this.addListener()}},{key:"componentDidUpdate",value:function(e){ho()(e.syncId)&&!ho()(this.props.syncId)&&this.addListener(),!ho()(e.syncId)&&ho()(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),ho()(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){"function"===typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Td(this.props.children,Mu.displayName);if(e&&po()(e.props.shared)){var t=e.props.shared?"axis":"item";return l.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=function(e,t){return{chartX:Math.round(e.pageX-t.left),chartY:Math.round(e.pageY-t.top)}}(e,function(e){var t=e.ownerDocument.documentElement,n={top:0,left:0};return"undefined"!==typeof e.getBoundingClientRect&&(n=e.getBoundingClientRect()),{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}(this.container)),n=this.inRange(t.chartX,t.chartY);if(!n)return null;var r=this.state,i=r.xAxisMap,a=r.yAxisMap;if("axis"!==this.getTooltipEventType()&&i&&a){var o=Ha(i).scale,s=Ha(a).scale,u=o&&o.invert?o.invert(t.chartX):null,l=s&&s.invert?s.invert(t.chartY):null;return b_(b_({},t),{},{xValue:u,yValue:l})}var c=P_(this.state,this.props.data,this.props.layout,n);return c?b_(b_({},t),c):null}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,n=t.activeCoordinate,r=t.offset,i=t.tooltipAxisBandSize,a=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?n.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:n.y-a,width:"horizontal"===e?i:r.width-1,height:"horizontal"===e?r.height-1:i}}},{key:"getCursorPoints",value:function(){var e,t,n,r,i=this.props.layout,a=this.state,o=a.activeCoordinate,s=a.offset;if("horizontal"===i)n=e=o.x,t=s.top,r=s.top+s.height;else if("vertical"===i)r=t=o.y,e=s.left,n=s.left+s.width;else if(!ho()(o.cx)||!ho()(o.cy)){if("centric"!==i){var u=o.cx,l=o.cy,c=o.radius,d=o.startAngle,h=o.endAngle;return{points:[Fc(u,l,c,d),Fc(u,l,c,h)],cx:u,cy:l,radius:c,startAngle:d,endAngle:h}}var f=o.cx,p=o.cy,m=o.innerRadius,v=o.outerRadius,g=o.angle,y=Fc(f,p,m,g),x=Fc(f,p,v,g);e=y.x,t=y.y,n=x.x,r=x.y}return[{x:e,y:t},{x:n,y:r}]}},{key:"inRange",value:function(e,t){var n=this.props.layout;if("horizontal"===n||"vertical"===n){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var i=this.state,a=i.angleAxisMap,o=i.radiusAxisMap;if(a&&o){var s=Ha(a);return zc({x:e,y:t},s)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=Td(e,Mu.displayName),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),b_(b_({},wo(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){a_.on(o_,this.handleReceiveSyncEvent),a_.setMaxListeners&&a_._maxListeners&&a_.setMaxListeners(a_._maxListeners+1)}},{key:"removeListener",value:function(){a_.removeListener(o_,this.handleReceiveSyncEvent),a_.setMaxListeners&&a_._maxListeners&&a_.setMaxListeners(a_._maxListeners-1)}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;ho()(t)||a_.emit(o_,t,this.uniqueChartId,e)}},{key:"applySyncEvent",value:function(e){var t=this.props,n=t.layout,r=t.syncMethod,i=this.state.updateId,a=e.dataStartIndex,o=e.dataEndIndex;if(ho()(e.dataStartIndex)&&ho()(e.dataEndIndex))if(ho()(e.activeTooltipIndex))this.setState(e);else{var s=e.chartX,u=e.chartY,l=e.activeTooltipIndex,c=this.state,d=c.offset,h=c.tooltipTicks;if(!d)return;if("function"===typeof r)l=r(h,e);else if("value"===r){l=-1;for(var f=0;f<h.length;f++)if(h[f].value===e.activeLabel){l=f;break}}var p=b_(b_({},d),{},{x:d.left,y:d.top}),v=Math.min(s,p.x+p.width),g=Math.min(u,p.y+p.height),y=h[l]&&h[l].value,x=A_(this.state,this.props.data,l),_=h[l]?{x:"horizontal"===n?h[l].coordinate:v,y:"horizontal"===n?g:h[l].coordinate}:M_;this.setState(b_(b_({},e),{},{activeLabel:y,activeCoordinate:_,activePayload:x,activeTooltipIndex:l}))}else this.setState(b_({dataStartIndex:a,dataEndIndex:o},m({props:this.props,dataStartIndex:a,dataEndIndex:o,updateId:i},this.state)))}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,a=r.length;i<a;i++){var o=r[i];if(o.item===e||o.props.key===e.key||t===bd(o.item.type)&&n===o.childIndex)return o}return null}},{key:"renderAxis",value:function(e,n,r,i){var a=this.props,o=a.width,s=a.height;return t.createElement(Rh,l_({},e,{className:"recharts-".concat(e.axisType," ").concat(e.axisType),key:n.key||"".concat(r,"-").concat(i),viewBox:{x:0,y:0,width:o,height:s},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var e=this.clipPathId,n=this.state.offset,r=n.left,i=n.top,a=n.height,o=n.width;return t.createElement("defs",null,t.createElement("clipPath",{id:e},t.createElement("rect",{x:r,y:i,height:a,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=u_(t,2),r=n[0],i=n[1];return b_(b_({},e),{},w_({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=u_(t,2),r=n[0],i=n[1];return b_(b_({},e),{},w_({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.xAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getYScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.yAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getItemByXY",value:function(e){var t=this.state.formattedGraphicalItems;if(t&&t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n],a=i.props,o=i.item,s=bd(o.type);if("Bar"===s){var u=(a.data||[]).find((function(t){return md(e,t)}));if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===s){var l=(a.data||[]).find((function(t){return zc(e,t)}));if(l)return{graphicalItem:i,payload:l}}}return null}},{key:"render",value:function(){var e=this;if(!kd(this))return null;var n=this.props,r=n.children,i=n.className,a=n.width,o=n.height,s=n.style,u=n.compact,l=c_(n,["children","className","width","height","style","compact"]),c=bo(l),d={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(u)return t.createElement(To,l_({},c,{width:a,height:o}),this.renderClipPath(),Ld(r,d));var h=this.parseEventsOfWrapper();return t.createElement("div",l_({className:Ea()("recharts-wrapper",i),style:b_({position:"relative",cursor:"default",width:a,height:o},s)},h,{ref:function(t){e.container=t}}),t.createElement(To,l_({},c,{width:a,height:o}),this.renderClipPath(),Ld(r,d)),this.renderLegend(),this.renderTooltip())}}],r&&d_(n.prototype,r),a&&d_(n,a),u}(t.Component),n.displayName=i,n.defaultProps=b_({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f),n.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.children,i=e.width,a=e.height,o=e.layout,s=e.stackOffset,u=e.margin;if(ho()(t.updateId)){var l=R_(e);return b_(b_(b_({},l),{},{updateId:0},m(b_(b_({props:e},l),{},{updateId:0}),t)),{},{prevData:n,prevWidth:i,prevHeight:a,prevLayout:o,prevStackOffset:s,prevMargin:u,prevChildren:r})}if(n!==t.prevData||i!==t.prevWidth||a!==t.prevHeight||o!==t.prevLayout||s!==t.prevStackOffset||!yd(u,t.prevMargin)){var c=R_(e),d={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},h=b_(b_({},P_(t,n,o)),{},{updateId:t.updateId+1}),f=b_(b_(b_({},c),d),h);return b_(b_(b_({},f),m(b_({props:e},f),t)),{},{prevData:n,prevWidth:i,prevHeight:a,prevLayout:o,prevStackOffset:s,prevMargin:u,prevChildren:r})}if(!Pd(r,t.prevChildren)){var p=!ho()(n)?t.updateId:t.updateId+1;return b_(b_({updateId:p},m(b_(b_({props:e},t),{},{updateId:p}),t)),{},{prevChildren:r})}return null},n.renderActiveDot=function(e,n){var r;return r=(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):ro()(e)?e(n):t.createElement(ad,n),t.createElement(Ao,{className:"recharts-active-dot",key:n.key},r)},r}({chartName:"LineChart",GraphicalChild:fb,axisComponents:[{axisType:"xAxis",AxisComp:pb},{axisType:"yAxis",AxisComp:mb}],formatAxisMap:function(t,n,r,i,a){var o=t.width,s=t.height,u=t.layout,l=t.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!Td(l,"Bar");return c.reduce((function(o,s){var l,c,f,p,m,v=n[s],g=v.orientation,y=v.domain,x=v.padding,_=void 0===x?{}:x,b=v.mirror,w=v.reversed,S="".concat(g).concat(b?"Mirror":"");if("number"===v.type&&("gap"===v.padding||"no-gap"===v.padding)){var M=y[1]-y[0],E=1/0,T=v.categoricalDomain.sort();T.forEach((function(e,t){t>0&&(E=Math.min((e||0)-(T[t-1]||0),E))}));var k=E/M,C="vertical"===v.layout?r.height:r.width;if("gap"===v.padding&&(l=k*C/2),"no-gap"===v.padding){var A=Ga(t.barCategoryGap,k*C),P=k*C/2;l=P-A-(P-A)/C*A}}c="xAxis"===i?[r.left+(_.left||0)+(l||0),r.left+r.width-(_.right||0)-(l||0)]:"yAxis"===i?"horizontal"===u?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(l||0),r.top+r.height-(_.bottom||0)-(l||0)]:v.range,w&&(c=[c[1],c[0]]);var O=function(t,n,r){var i=t.scale,a=t.type,o=t.layout,s=t.axisType;if("auto"===i)return"radial"===o&&"radiusAxis"===s?{scale:Uh(),realScaleType:"band"}:"radial"===o&&"angleAxis"===s?{scale:sm(),realScaleType:"linear"}:"category"===a&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Vh(),realScaleType:"point"}:"category"===a?{scale:Uh(),realScaleType:"band"}:{scale:sm(),realScaleType:"linear"};if(Fa()(i)){var u="scale".concat(Tu()(i));return{scale:(e[u]||Vh)(),realScaleType:e[u]?u:"point"}}return ro()(i)?{scale:i}:{scale:Vh(),realScaleType:"point"}}(v,a,h),L=O.scale,R=O.realScaleType;L.domain(y).range(c),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-Jy,a=Math.max(r[0],r[1])+Jy,o=e(t[0]),s=e(t[n-1]);(o<i||o>a||s<i||s>a)&&e.domain([t[0],t[n-1]])}}(L);var D=nx(L,Rx(Rx({},v),{},{realScaleType:R}));"xAxis"===i?(m="top"===g&&!b||"bottom"===g&&b,f=r.left,p=d[S]-m*v.height):"yAxis"===i&&(m="left"===g&&!b||"right"===g&&b,f=d[S]-m*v.width,p=r.top);var I=Rx(Rx(Rx({},v),D),{},{realScaleType:R,x:f,y:p,scale:L,width:"xAxis"===i?r.width:v.width,height:"yAxis"===i?r.height:v.height});return I.bandSize=ux(I,D),v.hide||"xAxis"!==i?v.hide||(d[S]+=(m?-1:1)*I.width):d[S]+=(m?-1:1)*I.height,Rx(Rx({},o),{},Dx({},s,I))}),{})}});function gb(e){return gb="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(e)}function yb(){return yb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yb.apply(this,arguments)}function xb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_b(Object(n),!0).forEach((function(t){wb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eb(e,t){return Eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Eb(e,t)}function Tb(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cb(e);if(t){var i=Cb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kb(this,n)}}function kb(e,t){return!t||"object"!==gb(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cb(e){return Cb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cb(e)}var Ab=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eb(e,t)}(o,e);var n,r,i,a=Tb(o);function o(){return Sb(this,o),a.apply(this,arguments)}return n=o,r=[{key:"renderHorizontal",value:function(e){var n=this,r=this.props,i=r.x,a=r.width,s=r.horizontal;if(!e||!e.length)return null;var u=e.map((function(e,t){var r=bb(bb({},n.props),{},{x1:i,y1:e,x2:i+a,y2:e,key:"line-".concat(t),index:t});return o.renderLineItem(s,r)}));return t.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}},{key:"renderVertical",value:function(e){var n=this,r=this.props,i=r.y,a=r.height,s=r.vertical;if(!e||!e.length)return null;var u=e.map((function(e,t){var r=bb(bb({},n.props),{},{x1:e,y1:i,x2:e,y2:i+a,key:"line-".concat(t),index:t});return o.renderLineItem(s,r)}));return t.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}},{key:"renderVerticalStripes",value:function(e){var n=this.props.verticalFill;if(!n||!n.length)return null;var r=this.props,i=r.fillOpacity,a=r.x,o=r.y,s=r.width,u=r.height,l=e.slice().sort((function(e,t){return e-t}));a!==l[0]&&l.unshift(0);var c=l.map((function(e,r){var c=l[r+1]?l[r+1]-e:a+s-e;if(c<=0)return null;var d=r%n.length;return t.createElement("rect",{key:"react-".concat(r),x:Math.round(e+a-a),y:o,width:c,height:u,stroke:"none",fill:n[d],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return t.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}},{key:"renderHorizontalStripes",value:function(e){var n=this.props.horizontalFill;if(!n||!n.length)return null;var r=this.props,i=r.fillOpacity,a=r.x,o=r.y,s=r.width,u=r.height,l=e.slice().sort((function(e,t){return e-t}));o!==l[0]&&l.unshift(0);var c=l.map((function(e,r){var c=l[r+1]?l[r+1]-e:o+u-e;if(c<=0)return null;var d=r%n.length;return t.createElement("rect",{key:"react-".concat(r),y:Math.round(e+o-o),x:a,height:c,width:s,stroke:"none",fill:n[d],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return t.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}},{key:"renderBackground",value:function(){var e=this.props.fill;if(!e||"none"===e)return null;var n=this.props,r=n.fillOpacity,i=n.x,a=n.y,o=n.width,s=n.height;return t.createElement("rect",{x:i,y:a,width:o,height:s,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.horizontal,s=e.vertical,u=e.horizontalCoordinatesGenerator,l=e.verticalCoordinatesGenerator,c=e.xAxis,d=e.yAxis,h=e.offset,f=e.chartWidth,p=e.chartHeight;if(!za(i)||i<=0||!za(a)||a<=0||!za(n)||n!==+n||!za(r)||r!==+r)return null;var m=this.props,v=m.horizontalPoints,g=m.verticalPoints;return v&&v.length||!ro()(u)||(v=u({yAxis:d,width:f,height:p,offset:h})),g&&g.length||!ro()(l)||(g=l({xAxis:c,width:f,height:p,offset:h})),t.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),o&&this.renderHorizontal(v),s&&this.renderVertical(g),o&&this.renderHorizontalStripes(v),s&&this.renderVerticalStripes(g))}}],i=[{key:"renderLineItem",value:function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(ro()(e))r=e(n);else{var i=n.x1,a=n.y1,o=n.x2,s=n.y2,u=n.key,l=xb(n,["x1","y1","x2","y2","key"]);r=t.createElement("line",yb({},bo(l),{x1:i,y1:a,x2:o,y2:s,fill:"none",key:u}))}return r}}],r&&Mb(n.prototype,r),i&&Mb(n,i),o}(t.PureComponent);Ab.displayName="CartesianGrid",Ab.defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};var Pb,Ob,Lb,Rb,Db=n(8529),Ib=Kn.div(Pb||(Pb=se(["\n  background-color: #4c4177;\n  background-image: linear-gradient(\n    315deg,\n    hsl(204, 45%, 15%) 0%,\n    hsl(252, 35%, 20%) 70%\n  );\n  padding: 15px;\n  border-radius: 15px;\n  border: 3px groove rgb(200, 200, 200);\n"]))),Fb=Kn.div(Ob||(Ob=se(["\n  font-size: 1.1rem;\n  font-weight: 700;\n  text-align: center;\n  color: rgb(200, 200, 200);\n"]))),Nb=Kn.div(Lb||(Lb=se(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  color: ",";\n"])),(function(e){return e.color})),jb=Kn.div(Rb||(Rb=se(["\n  margin-left: 8px;\n"])));function zb(e){var t=e.active,n=e.payload,r=e.label,i=e.xAxisLabels;return t&&n&&n.length?(0,te.jsxs)(Ib,{children:[(0,te.jsx)(Fb,{children:i[r]}),n.sort((function(e,t){return t.value-e.value})).map((function(e){return(0,te.jsxs)(Nb,{color:e.color,children:[(0,te.jsxs)("div",{children:[" ",e.dataKey,":"]}),(0,te.jsx)(jb,{children:e.value})]},e.dataKey)}))]}):null}var Ub=n(1413),Bb=F(),Vb=Math.PI/3,Gb=2*Math.PI/3;var Hb,Zb=function(e,t,n){switch(e){case uT.Categories:return function(e,t){return Object.keys(e.categories).forEach((function(e){t[e]||(t[e]=!0)})),(0,Ub.Z)({},e.categories)}(t,n);case uT.Neighbourhoods:return function(e,t){return Object.keys(e.neighbourhoods).forEach((function(e){t[e]||(t[e]=!0)})),(0,Ub.Z)({},e.neighbourhoods)}(t,n);case uT.Total:return function(e,t){t.crimes=!0;var n=Object.values(e.categories).reduce((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),0);return{crimes:n}}(t,n);default:return{}}},Wb=function(e){var n=e.mode,r=e.filteredData;return(0,t.useMemo)((function(){var e=function(e,t){var n=[],r={},i=e.map((function(e,i){var o=e.month.split(", "),s=(0,a.Z)(o,2),u=s[0],l=s[1];return n.push("".concat(l,"/").concat(u.slice(2))),(0,Ub.Z)({name:i},Zb(t,e,r))}));return{categories:r,groupedData:i,xAxisLabels:n}}(r,n),t=e.categories,i=e.groupedData,o=e.xAxisLabels,s=Object.keys(t),u=1/s.length,l=s.map((function(e,t){return function(e){var t;return e=(.5-e)*Math.PI,Bb.r=255*(t=Math.sin(e))*t,Bb.g=255*(t=Math.sin(e+Vb))*t,Bb.b=255*(t=Math.sin(e+Gb))*t,Bb+""}(t*u)}));return{groupedData:i,categories:s.sort(),xAxisLabels:o,colors:l}}),[r,n])};function qb(e){var n=e.mode,r=e.filteredData,i=Wb({mode:n,filteredData:r}),o=i.groupedData,s=i.categories,u=i.xAxisLabels,l=i.colors,c=function(e){var n=e.initialData,r=(0,t.useState)("dataMin"),i=(0,a.Z)(r,2),o=i[0],s=i[1],u=(0,t.useState)("dataMax"),l=(0,a.Z)(u,2),c=l[0],d=l[1],h=(0,t.useState)(null),f=(0,a.Z)(h,2),p=f[0],m=f[1],v=(0,t.useState)(null),g=(0,a.Z)(v,2),y=g[0],x=g[1],_=(0,t.useState)("dataMax+1"),b=(0,a.Z)(_,2),w=b[0],S=b[1],M=(0,t.useState)("dataMin-1"),E=(0,a.Z)(M,2),T=E[0],k=E[1],C=(0,t.useCallback)((function(){m(null),x(null),s("dataMin"),d("dataMax"),k("dataMin-1"),S("dataMax+1")}),[n]);(0,t.useEffect)((function(){setTimeout((function(){C()}),100)}),[C]);var A=(0,t.useCallback)((function(e,t){var r=n.slice(e,t+1),i=1/0,a=-1/0;return r.forEach((function(e){Object.keys(e).forEach((function(t){"name"!==t&&(e[t]<i&&(i=e[t]),e[t]>a&&(a=e[t]))}))})),[i,a]}),[n]);return{left:o,right:c,top:w,bottom:T,refAreaLeft:p,refAreaRight:y,zoom:function(){var e=p,t=y;if(m(null),x(null),e!==t&&null!==t&&null!==e){if(e>t){var r=[t,e];e=r[0],t=r[1]}var i=A(e,t),o=(0,a.Z)(i,2),u=o[0],l=o[1];s(n[e].name),d(n[t].name),k(u),S(l)}},zoomOut:function(){C()},onMouseDown:function(e){m(e.activeTooltipIndex)},onMouseMove:function(e){p&&x(e.activeTooltipIndex)}}}({initialData:o}),d=c.left,h=c.right,f=c.top,p=c.bottom,m=c.refAreaLeft,v=c.refAreaRight,g=c.zoom,y=c.zoomOut,x=c.onMouseDown,_=c.onMouseMove;return(0,te.jsxs)(ma,{children:[d>=0&&(0,te.jsx)(va,{children:(0,te.jsx)(Qn,{onClick:y,children:(0,te.jsx)(Db.Z,{fontSize:"large"})})}),(0,te.jsx)(Qa,{width:"100%",height:"100%",children:(0,te.jsxs)(vb,{data:o,margin:{top:5,right:30,left:20,bottom:5},onMouseDown:x,onMouseMove:_,onMouseUp:g,children:[(0,te.jsx)(Ab,{strokeDasharray:"3 3"}),(0,te.jsx)(pb,{allowDataOverflow:!0,allowDecimals:!1,tickFormatter:function(e){return u[e]},dataKey:"name",type:"number",domain:[d,h]}),(0,te.jsx)(mb,{allowDataOverflow:!0,domain:[p,f]}),(0,te.jsx)(Mu,{content:(0,te.jsx)(zb,{xAxisLabels:u})}),(0,te.jsx)(Fl,{}),s.map((function(e,t){return(0,te.jsx)(fb,{type:"monotone",dataKey:e,stroke:l[t],dot:!1},e)})),m&&v?(0,te.jsx)(n_,{x1:o[m].name,x2:o[v].name,strokeOpacity:.3}):null]})})]})}var Xb=Kn.div(Hb||(Hb=se(["\n  margin-bottom: 15px;\n  font-weight: 600;\n"])));var Kb=t.createContext();function Yb(){return t.useContext(Kb)}function Qb(e){return(0,it.Z)("PrivateSwitchBase",e)}(0,Ue.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var $b=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Jb=(0,me.ZP)(dt,{skipSx:!0})((function(e){var t=e.ownerState;return(0,le.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),ew=(0,me.ZP)("input",{skipSx:!0})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),tw=t.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,i=e.checkedIcon,o=e.className,s=e.defaultChecked,u=e.disabled,l=e.disableFocusRipple,c=void 0!==l&&l,d=e.edge,h=void 0!==d&&d,f=e.icon,p=e.id,m=e.inputProps,v=e.inputRef,g=e.name,y=e.onBlur,x=e.onChange,_=e.onFocus,b=e.readOnly,w=e.required,S=e.tabIndex,M=e.type,E=e.value,T=(0,ue.Z)(e,$b),k=(0,qi.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),C=(0,a.Z)(k,2),A=C[0],P=C[1],O=Yb(),L=u;O&&"undefined"===typeof L&&(L=O.disabled);var R="checkbox"===M||"radio"===M,D=(0,le.Z)({},e,{checked:A,disabled:L,disableFocusRipple:c,edge:h}),I=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge,a={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,ht.Z)(i))],input:["input"]};return(0,fe.Z)(a,Qb,t)}(D);return(0,te.jsxs)(Jb,(0,le.Z)({component:"span",className:(0,he.Z)(I.root,o),centerRipple:!0,focusRipple:!c,disabled:L,tabIndex:null,role:void 0,onFocus:function(e){_&&_(e),O&&O.onFocus&&O.onFocus(e)},onBlur:function(e){y&&y(e),O&&O.onBlur&&O.onBlur(e)},ownerState:D,ref:t},T,{children:[(0,te.jsx)(ew,(0,le.Z)({autoFocus:n,checked:r,defaultChecked:s,className:I.input,disabled:L,id:R&&p,name:g,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;P(t),x&&x(e,t)}},readOnly:b,ref:v,required:w,ownerState:D,tabIndex:S,type:M},"checkbox"===M&&void 0===E?{}:{value:E},m)),A?i:f]}))})),nw=tw,rw=n(76189),iw=(0,rw.Z)((0,te.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),aw=(0,rw.Z)((0,te.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ow=(0,rw.Z)((0,te.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function sw(e){return(0,it.Z)("MuiCheckbox",e)}var uw=(0,Ue.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),lw=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],cw=(0,me.ZP)(nw,{shouldForwardProp:function(e){return(0,me.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,ht.Z)(n.color))]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,le.Z)({color:n.palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:(0,pe.Fq)("default"===r.color?n.palette.action.active:n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(t={},(0,i.Z)(t,"&.".concat(uw.checked,", &.").concat(uw.indeterminate),{color:n.palette[r.color].main}),(0,i.Z)(t,"&.".concat(uw.disabled),{color:n.palette.action.disabled}),t))})),dw=(0,te.jsx)(aw,{}),hw=(0,te.jsx)(iw,{}),fw=(0,te.jsx)(ow,{}),pw=t.forwardRef((function(e,n){var r,i,a=(0,ve.Z)({props:e,name:"MuiCheckbox"}),o=a.checkedIcon,s=void 0===o?dw:o,u=a.color,l=void 0===u?"primary":u,c=a.icon,d=void 0===c?hw:c,h=a.indeterminate,f=void 0!==h&&h,p=a.indeterminateIcon,m=void 0===p?fw:p,v=a.inputProps,g=a.size,y=void 0===g?"medium":g,x=(0,ue.Z)(a,lw),_=f?m:d,b=f?m:s,w=(0,le.Z)({},a,{color:l,indeterminate:f,size:y}),S=function(e){var t=e.classes,n=e.indeterminate,r=e.color,i={root:["root",n&&"indeterminate","color".concat((0,ht.Z)(r))]},a=(0,fe.Z)(i,sw,t);return(0,le.Z)({},t,a)}(w);return(0,te.jsx)(cw,(0,le.Z)({type:"checkbox",inputProps:(0,le.Z)({"data-indeterminate":f},v),icon:t.cloneElement(_,{fontSize:null!=(r=_.props.fontSize)?r:y}),checkedIcon:t.cloneElement(b,{fontSize:null!=(i=b.props.fontSize)?i:y}),ownerState:w,ref:n},x,{classes:S}))})),mw=pw,vw=n(96248),gw=n(82466),yw=n(46189),xw=n(27979),_w=n(93981),bw=["onChange","maxRows","minRows","style","value"];function ww(e,t){return parseInt(e[t],10)||0}var Sw={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Mw=t.forwardRef((function(e,n){var r=e.onChange,i=e.maxRows,o=e.minRows,s=void 0===o?1:o,u=e.style,l=e.value,c=(0,ue.Z)(e,bw),d=t.useRef(null!=l).current,h=t.useRef(null),f=(0,xr.Z)(n,h),p=t.useRef(null),m=t.useRef(0),v=t.useState({}),g=(0,a.Z)(v,2),y=g[0],x=g[1],_=t.useCallback((function(){var t=h.current,n=(0,xw.Z)(t).getComputedStyle(t);if("0px"!==n.width){var r=p.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],o=ww(n,"padding-bottom")+ww(n,"padding-top"),u=ww(n,"border-bottom-width")+ww(n,"border-top-width"),l=r.scrollHeight;r.value="x";var c=r.scrollHeight,d=l;s&&(d=Math.max(Number(s)*c,d)),i&&(d=Math.min(Number(i)*c,d));var f=(d=Math.max(d,c))+("border-box"===a?o+u:0),v=Math.abs(d-l)<=1;x((function(e){return m.current<20&&(f>0&&Math.abs((e.outerHeightStyle||0)-f)>1||e.overflow!==v)?(m.current+=1,{overflow:v,outerHeightStyle:f}):e}))}}),[i,s,e.placeholder]);t.useEffect((function(){var e,t=(0,_w.Z)((function(){m.current=0,_()})),n=(0,xw.Z)(h.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(h.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}}),[_]),(0,_r.Z)((function(){_()})),t.useEffect((function(){m.current=0}),[l]);return(0,te.jsxs)(t.Fragment,{children:[(0,te.jsx)("textarea",(0,le.Z)({value:l,onChange:function(e){m.current=0,d||_(),r&&r(e)},ref:f,rows:s,style:(0,le.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},u)},c)),(0,te.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,le.Z)({},Sw,u,{padding:0})})]})})),Ew=Mw;function Tw(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var kw=n(40162);function Cw(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,i="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,te.jsx)(Fe,{styles:i})}var Aw=function(e){return(0,te.jsx)(Cw,(0,le.Z)({},e,{defaultTheme:tr.Z}))};function Pw(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Ow(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Pw(e.value)&&""!==e.value||t&&Pw(e.defaultValue)&&""!==e.defaultValue)}function Lw(e){return(0,it.Z)("MuiInputBase",e)}var Rw=(0,Ue.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Dw=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Iw=function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,ht.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Fw=function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Nw=(0,me.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Iw})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({},t.typography.body1,(0,i.Z)({color:t.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Rw.disabled),{color:t.palette.text.disabled,cursor:"default"}),n.multiline&&(0,le.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),jw=(0,me.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Fw})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode,o={color:"currentColor",opacity:a?.42:.5,transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},s={opacity:"0 !important"},u={opacity:a?.42:.5};return(0,le.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,i.Z)(t,"label[data-shrink=false] + .".concat(Rw.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u}),(0,i.Z)(t,"&.".concat(Rw.disabled),{opacity:1,WebkitTextFillColor:n.palette.text.disabled}),(0,i.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),zw=(0,te.jsx)(Aw,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Uw=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiInputBase"}),i=r["aria-describedby"],o=r.autoComplete,s=r.autoFocus,u=r.className,l=r.components,c=void 0===l?{}:l,d=r.componentsProps,h=void 0===d?{}:d,f=r.defaultValue,p=r.disabled,m=r.disableInjectingGlobalStyles,v=r.endAdornment,g=r.fullWidth,y=void 0!==g&&g,x=r.id,_=r.inputComponent,b=void 0===_?"input":_,w=r.inputProps,S=void 0===w?{}:w,M=r.inputRef,E=r.maxRows,T=r.minRows,k=r.multiline,C=void 0!==k&&k,A=r.name,P=r.onBlur,O=r.onChange,L=r.onClick,R=r.onFocus,D=r.onKeyDown,I=r.onKeyUp,F=r.placeholder,N=r.readOnly,j=r.renderSuffix,z=r.rows,U=r.startAdornment,B=r.type,V=void 0===B?"text":B,G=r.value,H=(0,ue.Z)(r,Dw),Z=null!=S.value?S.value:G,W=t.useRef(null!=Z).current,q=t.useRef(),X=t.useCallback((function(e){0}),[]),K=(0,ge.Z)(S.ref,X),Y=(0,ge.Z)(M,K),Q=(0,ge.Z)(q,Y),$=t.useState(!1),J=(0,a.Z)($,2),ee=J[0],ne=J[1],re=Yb();var ie=Tw({props:r,muiFormControl:re,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ie.focused=re?re.focused:ee,t.useEffect((function(){!re&&p&&ee&&(ne(!1),P&&P())}),[re,p,ee,P]);var ae=re&&re.onFilled,oe=re&&re.onEmpty,se=t.useCallback((function(e){Ow(e)?ae&&ae():oe&&oe()}),[ae,oe]);(0,kw.Z)((function(){W&&se({value:Z})}),[Z,se,W]);t.useEffect((function(){se(q.current)}),[]);var ce=b,de=S;C&&"input"===ce&&(de=z?(0,le.Z)({type:void 0,minRows:z,maxRows:z},de):(0,le.Z)({type:void 0,maxRows:E,minRows:T},de),ce=Ew);t.useEffect((function(){re&&re.setAdornedStart(Boolean(U))}),[re,U]);var pe=(0,le.Z)({},r,{color:ie.color||"primary",disabled:ie.disabled,endAdornment:v,error:ie.error,focused:ie.focused,formControl:re,fullWidth:y,hiddenLabel:ie.hiddenLabel,multiline:C,size:ie.size,startAdornment:U,type:V}),me=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,a=e.endAdornment,o=e.focused,s=e.formControl,u=e.fullWidth,l=e.hiddenLabel,c=e.multiline,d=e.size,h=e.startAdornment,f=e.type,p={root:["root","color".concat((0,ht.Z)(n)),r&&"disabled",i&&"error",u&&"fullWidth",o&&"focused",s&&"formControl","small"===d&&"sizeSmall",c&&"multiline",h&&"adornedStart",a&&"adornedEnd",l&&"hiddenLabel"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",c&&"inputMultiline","small"===d&&"inputSizeSmall",l&&"inputHiddenLabel",h&&"inputAdornedStart",a&&"inputAdornedEnd"]};return(0,fe.Z)(p,Lw,t)}(pe),ye=c.Root||Nw,xe=h.root||{},_e=c.Input||jw;return de=(0,le.Z)({},de,h.input),(0,te.jsxs)(t.Fragment,{children:[!m&&zw,(0,te.jsxs)(ye,(0,le.Z)({},xe,!$n(ye)&&{ownerState:(0,le.Z)({},pe,xe.ownerState)},{ref:n,onClick:function(e){q.current&&e.currentTarget===e.target&&q.current.focus(),L&&L(e)}},H,{className:(0,he.Z)(me.root,xe.className,u),children:[U,(0,te.jsx)(Kb.Provider,{value:null,children:(0,te.jsx)(_e,(0,le.Z)({ownerState:pe,"aria-invalid":ie.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:f,disabled:ie.disabled,id:x,onAnimationStart:function(e){se("mui-auto-fill-cancel"===e.animationName?q.current:{value:"x"})},name:A,placeholder:F,readOnly:N,required:ie.required,rows:z,value:Z,onKeyDown:D,onKeyUp:I,type:V},de,!$n(_e)&&{as:ce,ownerState:(0,le.Z)({},pe,de.ownerState)},{ref:Q,className:(0,he.Z)(me.input,de.className),onBlur:function(e){P&&P(e),S.onBlur&&S.onBlur(e),re&&re.onBlur?re.onBlur(e):ne(!1)},onChange:function(e){if(!W){var t=e.target||q.current;if(null==t)throw new Error((0,yw.Z)(1));se({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];S.onChange&&S.onChange.apply(S,[e].concat(r)),O&&O.apply(void 0,[e].concat(r))},onFocus:function(e){ie.disabled?e.stopPropagation():(R&&R(e),S.onFocus&&S.onFocus(e),re&&re.onFocus?re.onFocus(e):ne(!0))}}))}),v,j?j((0,le.Z)({},ie,{startAdornment:U})):null]}))]})})),Bw=Uw;function Vw(e){return(0,it.Z)("MuiInput",e)}var Gw=(0,Ue.Z)("MuiInput",["root","formControl","focused","disabled","colorSecondary","underline","error","sizeSmall","multiline","fullWidth","input","inputSizeSmall","inputMultiline","inputTypeSearch"]),Hw=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],Zw=(0,me.ZP)(Nw,{shouldForwardProp:function(e){return(0,me.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,c.Z)(Iw(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,le.Z)({position:"relative"},r.formControl&&{"label + &":{marginTop:16}},!r.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat(n.palette[r.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"}},(0,i.Z)(t,"&.".concat(Gw.focused,":after"),{transform:"scaleX(1)"}),(0,i.Z)(t,"&.".concat(Gw.error,":after"),{borderBottomColor:n.palette.error.main,transform:"scaleX(1)"}),(0,i.Z)(t,"&:before",{borderBottom:"1px solid ".concat(a),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"}),(0,i.Z)(t,"&:hover:not(.".concat(Gw.disabled,"):before"),{borderBottom:"2px solid ".concat(n.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(a)}}),(0,i.Z)(t,"&.".concat(Gw.disabled,":before"),{borderBottomStyle:"dotted"}),t))})),Ww=(0,me.ZP)(jw,{name:"MuiInput",slot:"Input",overridesResolver:Fw})({}),qw=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiInput"}),r=n.disableUnderline,i=n.components,a=void 0===i?{}:i,o=n.componentsProps,s=n.fullWidth,u=void 0!==s&&s,l=n.inputComponent,c=void 0===l?"input":l,d=n.multiline,h=void 0!==d&&d,f=n.type,p=void 0===f?"text":f,m=(0,ue.Z)(n,Hw),v=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,fe.Z)(n,Vw,t);return(0,le.Z)({},t,r)}(n),g={root:{ownerState:{disableUnderline:r}}},y=o?(0,gw.Z)(o,g):g;return(0,te.jsx)(Bw,(0,le.Z)({components:(0,le.Z)({Root:Zw,Input:Ww},a),componentsProps:y,fullWidth:u,inputComponent:c,multiline:h,ref:t,type:p},m,{classes:v}))}));qw.muiName="Input";var Xw=qw;function Kw(e){return(0,it.Z)("MuiFilledInput",e)}var Yw=(0,Ue.Z)("MuiFilledInput",["root","colorSecondary","underline","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","hiddenLabel","input","inputSizeSmall","inputHiddenLabel","inputMultiline","inputAdornedStart","inputAdornedEnd"]),Qw=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],$w=(0,me.ZP)(Nw,{shouldForwardProp:function(e){return(0,me.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[].concat((0,c.Z)(Iw(e,t)),[!n.disableUnderline&&t.underline])}})((function(e){var t,n,r=e.theme,a=e.ownerState,o="light"===r.palette.mode,s=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,le.Z)((t={position:"relative",backgroundColor:u,borderTopLeftRadius:r.shape.borderRadius,borderTopRightRadius:r.shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:u}}},(0,i.Z)(t,"&.".concat(Yw.focused),{backgroundColor:u}),(0,i.Z)(t,"&.".concat(Yw.disabled),{backgroundColor:o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}),t),!a.disableUnderline&&(n={"&:after":{borderBottom:"2px solid ".concat(r.palette[a.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"}},(0,i.Z)(n,"&.".concat(Yw.focused,":after"),{transform:"scaleX(1)"}),(0,i.Z)(n,"&.".concat(Yw.error,":after"),{borderBottomColor:r.palette.error.main,transform:"scaleX(1)"}),(0,i.Z)(n,"&:before",{borderBottom:"1px solid ".concat(s),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"}),(0,i.Z)(n,"&:hover:not(.".concat(Yw.disabled,"):before"),{borderBottom:"1px solid ".concat(r.palette.text.primary)}),(0,i.Z)(n,"&.".concat(Yw.disabled,":before"),{borderBottomStyle:"dotted"}),n),a.startAdornment&&{paddingLeft:12},a.endAdornment&&{paddingRight:12},a.multiline&&(0,le.Z)({padding:"25px 12px 8px"},"small"===a.size&&{paddingTop:21,paddingBottom:4},a.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Jw=(0,me.ZP)(jw,{name:"MuiFilledInput",slot:"Input",overridesResolver:Fw})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),eS=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiFilledInput"}),r=n.components,i=void 0===r?{}:r,a=n.componentsProps,o=n.fullWidth,s=void 0!==o&&o,u=n.inputComponent,l=void 0===u?"input":u,c=n.multiline,d=void 0!==c&&c,h=n.type,f=void 0===h?"text":h,p=(0,ue.Z)(n,Qw),m=(0,le.Z)({},n,{fullWidth:s,inputComponent:l,multiline:d,type:f}),v=function(e){var t=e.classes,n={root:["root",!e.disableUnderline&&"underline"],input:["input"]},r=(0,fe.Z)(n,Kw,t);return(0,le.Z)({},t,r)}(n),g={root:{ownerState:m},input:{ownerState:m}},y=a?(0,gw.Z)(a,g):g;return(0,te.jsx)(Bw,(0,le.Z)({components:(0,le.Z)({Root:$w,Input:Jw},i),componentsProps:y,fullWidth:s,inputComponent:l,multiline:d,ref:t,type:f},p,{classes:v}))}));eS.muiName="Input";var tS=eS,nS=["children","classes","className","label","notched"],rS=(0,me.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),iS=(0,me.ZP)("legend",{skipSx:!0})((function(e){var t=e.ownerState,n=e.theme;return(0,le.Z)({float:"unset"},void 0===t.label&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},void 0!==t.label&&(0,le.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function aS(e){return(0,it.Z)("MuiOutlinedInput",e)}var oS=(0,Ue.Z)("MuiOutlinedInput",["root","colorSecondary","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","notchedOutline","input","inputSizeSmall","inputMultiline","inputAdornedStart","inputAdornedEnd"]),sS=["components","fullWidth","inputComponent","label","multiline","notched","type"],uS=(0,me.ZP)(Nw,{shouldForwardProp:function(e){return(0,me.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Iw})((function(e){var t,n=e.theme,r=e.ownerState,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,le.Z)((t={position:"relative",borderRadius:n.shape.borderRadius},(0,i.Z)(t,"&:hover .".concat(oS.notchedOutline),{borderColor:n.palette.text.primary}),(0,i.Z)(t,"@media (hover: none)",(0,i.Z)({},"&:hover .".concat(oS.notchedOutline),{borderColor:a})),(0,i.Z)(t,"&.".concat(oS.focused," .").concat(oS.notchedOutline),{borderColor:n.palette[r.color].main,borderWidth:2}),(0,i.Z)(t,"&.".concat(oS.error," .").concat(oS.notchedOutline),{borderColor:n.palette.error.main}),(0,i.Z)(t,"&.".concat(oS.disabled," .").concat(oS.notchedOutline),{borderColor:n.palette.action.disabled}),t),r.startAdornment&&{paddingLeft:14},r.endAdornment&&{paddingRight:14},r.multiline&&(0,le.Z)({padding:"16.5px 14px"},"small"===r.size&&{padding:"8.5px 14px"}))})),lS=(0,me.ZP)((function(e){var t=e.className,n=e.label,r=e.notched,i=(0,ue.Z)(e,nS),a=(0,le.Z)({},e,{notched:r,label:n});return(0,te.jsx)(rS,(0,le.Z)({"aria-hidden":!0,className:t,ownerState:a},i,{children:(0,te.jsx)(iS,{ownerState:a,children:n?(0,te.jsx)("span",{children:n}):(0,te.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}})})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,t){return t.notchedOutline}})((function(e){return{borderColor:"light"===e.theme.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),cS=(0,me.ZP)(jw,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Fw})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),dS=t.forwardRef((function(e,n){var r,i=(0,ve.Z)({props:e,name:"MuiOutlinedInput"}),a=i.components,o=void 0===a?{}:a,s=i.fullWidth,u=void 0!==s&&s,l=i.inputComponent,c=void 0===l?"input":l,d=i.label,h=i.multiline,f=void 0!==h&&h,p=i.notched,m=i.type,v=void 0===m?"text":m,g=(0,ue.Z)(i,sS),y=function(e){var t=e.classes,n=(0,fe.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},aS,t);return(0,le.Z)({},t,n)}(i),x=Tw({props:i,muiFormControl:Yb(),states:["required"]});return(0,te.jsx)(Bw,(0,le.Z)({components:(0,le.Z)({Root:uS,Input:cS},o),renderSuffix:function(e){return(0,te.jsx)(lS,{className:y.notchedOutline,label:d&&x.required?r||(r=(0,te.jsxs)(t.Fragment,{children:[d,"\xa0","*"]})):d,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)})},fullWidth:u,inputComponent:c,multiline:f,ref:n,type:v},g,{classes:(0,le.Z)({},y,{notchedOutline:null})}))}));dS.muiName="Input";var hS=dS;function fS(e){return(0,it.Z)("MuiFormLabel",e)}var pS=(0,Ue.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),mS=["children","className","color","component","disabled","error","filled","focused","required"],vS=(0,me.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,le.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,le.Z)({color:n.palette.text.secondary},n.typography.body1,(t={lineHeight:"1.4375em",padding:0,position:"relative"},(0,i.Z)(t,"&.".concat(pS.focused),{color:n.palette[r.color].main}),(0,i.Z)(t,"&.".concat(pS.disabled),{color:n.palette.text.disabled}),(0,i.Z)(t,"&.".concat(pS.error),{color:n.palette.error.main}),t))})),gS=(0,me.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,t){return t.asterisk}})((function(e){var t=e.theme;return(0,i.Z)({},"&.".concat(pS.error),{color:t.palette.error.main})})),yS=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiFormLabel"}),r=n.children,i=n.className,a=n.component,o=void 0===a?"label":a,s=(0,ue.Z)(n,mS),u=Tw({props:n,muiFormControl:Yb(),states:["color","required","focused","disabled","error","filled"]}),l=(0,le.Z)({},n,{color:u.color||"primary",component:o,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=function(e){var t=e.classes,n=e.color,r=e.focused,i=e.disabled,a=e.error,o=e.filled,s=e.required,u={root:["root","color".concat((0,ht.Z)(n)),i&&"disabled",a&&"error",o&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return(0,fe.Z)(u,fS,t)}(l);return(0,te.jsxs)(vS,(0,le.Z)({as:o,ownerState:l,className:(0,he.Z)(c.root,i),ref:t},s,{children:[r,u.required&&(0,te.jsxs)(gS,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),xS=yS;function _S(e){return(0,it.Z)("MuiInputLabel",e)}(0,Ue.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var bS=["disableAnimation","margin","shrink","variant"],wS=(0,me.ZP)(xS,{shouldForwardProp:function(e){return(0,me.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,i.Z)({},"& .".concat(pS.asterisk),t.asterisk),t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,le.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,le.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,le.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),SS=t.forwardRef((function(e,t){var n=(0,ve.Z)({name:"MuiInputLabel",props:e}),r=n.disableAnimation,i=void 0!==r&&r,a=n.shrink,o=(0,ue.Z)(n,bS),s=Yb(),u=a;"undefined"===typeof u&&s&&(u=s.filled||s.focused||s.adornedStart);var l=Tw({props:n,muiFormControl:s,states:["size","variant","required"]}),c=(0,le.Z)({},n,{disableAnimation:i,formControl:s,shrink:u,size:l.size,variant:l.variant,required:l.required}),d=function(e){var t=e.classes,n=e.formControl,r=e.size,i=e.shrink,a={root:["root",n&&"formControl",!e.disableAnimation&&"animated",i&&"shrink","small"===r&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},o=(0,fe.Z)(a,_S,t);return(0,le.Z)({},t,o)}(c);return(0,te.jsx)(wS,(0,le.Z)({"data-shrink":u,ownerState:c,ref:t},o,{classes:d}))})),MS=n(19103);function ES(e){return(0,it.Z)("MuiFormControl",e)}(0,Ue.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var TS=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],kS=(0,me.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return(0,le.Z)({},t.root,t["margin".concat((0,ht.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((function(e){var t=e.ownerState;return(0,le.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),CS=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiFormControl"}),i=r.children,o=r.className,s=r.color,u=void 0===s?"primary":s,l=r.component,c=void 0===l?"div":l,d=r.disabled,h=void 0!==d&&d,f=r.error,p=void 0!==f&&f,m=r.focused,v=r.fullWidth,g=void 0!==v&&v,y=r.hiddenLabel,x=void 0!==y&&y,_=r.margin,b=void 0===_?"none":_,w=r.required,S=void 0!==w&&w,M=r.size,E=void 0===M?"medium":M,T=r.variant,k=void 0===T?"outlined":T,C=(0,ue.Z)(r,TS),A=(0,le.Z)({},r,{color:u,component:c,disabled:h,error:p,fullWidth:g,hiddenLabel:x,margin:b,required:S,size:E,variant:k}),P=function(e){var t=e.classes,n=e.margin,r=e.fullWidth,i={root:["root","none"!==n&&"margin".concat((0,ht.Z)(n)),r&&"fullWidth"]};return(0,fe.Z)(i,ES,t)}(A),O=t.useState((function(){var e=!1;return i&&t.Children.forEach(i,(function(t){if((0,MS.Z)(t,["Input","Select"])){var n=(0,MS.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),L=(0,a.Z)(O,2),R=L[0],D=L[1],I=t.useState((function(){var e=!1;return i&&t.Children.forEach(i,(function(t){(0,MS.Z)(t,["Input","Select"])&&Ow(t.props,!0)&&(e=!0)})),e})),F=(0,a.Z)(I,2),N=F[0],j=F[1],z=t.useState(!1),U=(0,a.Z)(z,2),B=U[0],V=U[1];h&&B&&V(!1);var G=void 0===m||h?B:m,H=t.useCallback((function(){j(!0)}),[]),Z={adornedStart:R,setAdornedStart:D,color:u,disabled:h,error:p,filled:N,focused:G,fullWidth:g,hiddenLabel:x,size:E,onBlur:function(){V(!1)},onEmpty:t.useCallback((function(){j(!1)}),[]),onFilled:H,onFocus:function(){V(!0)},registerEffect:undefined,required:S,variant:k};return(0,te.jsx)(Kb.Provider,{value:Z,children:(0,te.jsx)(kS,(0,le.Z)({as:c,ownerState:A,className:(0,he.Z)(P.root,o),ref:n},C,{children:i}))})})),AS=CS;function PS(e){return(0,it.Z)("MuiFormHelperText",e)}var OS=(0,Ue.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),LS=["children","className","component","disabled","error","filled","focused","margin","required","variant"],RS=(0,me.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.size&&t["size".concat((0,ht.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,le.Z)({color:n.palette.text.secondary},n.typography.caption,(t={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,i.Z)(t,"&.".concat(OS.disabled),{color:n.palette.text.disabled}),(0,i.Z)(t,"&.".concat(OS.error),{color:n.palette.error.main}),t),"small"===r.size&&{marginTop:4},r.contained&&{marginLeft:14,marginRight:14})})),DS=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiFormHelperText"}),r=n.children,i=n.className,a=n.component,o=void 0===a?"p":a,s=(0,ue.Z)(n,LS),u=Tw({props:n,muiFormControl:Yb(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,le.Z)({},n,{component:o,contained:"filled"===u.variant||"outlined"===u.variant,variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required}),c=function(e){var t=e.classes,n=e.contained,r=e.size,i=e.disabled,a=e.error,o=e.filled,s=e.focused,u=e.required,l={root:["root",i&&"disabled",a&&"error",r&&"size".concat((0,ht.Z)(r)),n&&"contained",s&&"focused",o&&"filled",u&&"required"]};return(0,fe.Z)(l,PS,t)}(l);return(0,te.jsx)(RS,(0,le.Z)({as:o,ownerState:l,className:(0,he.Z)(c.root,i),ref:t},s,{children:" "===r?(0,te.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):r}))})),IS=n(98301);var FS=t.createContext({});function NS(e){return(0,it.Z)("MuiList",e)}(0,Ue.Z)("MuiList",["root","padding","dense","subheader"]);var jS=["children","className","component","dense","disablePadding","subheader"],zS=(0,me.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((function(e){var t=e.ownerState;return(0,le.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),US=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiList"}),i=r.children,a=r.className,o=r.component,s=void 0===o?"ul":o,u=r.dense,l=void 0!==u&&u,c=r.disablePadding,d=void 0!==c&&c,h=r.subheader,f=(0,ue.Z)(r,jS),p=t.useMemo((function(){return{dense:l}}),[l]),m=(0,le.Z)({},r,{component:s,dense:l,disablePadding:d}),v=function(e){var t=e.classes,n={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,fe.Z)(n,NS,t)}(m);return(0,te.jsx)(FS.Provider,{value:p,children:(0,te.jsxs)(zS,(0,le.Z)({as:s,className:(0,he.Z)(v.root,a),ref:n,ownerState:m},f,{children:[h,i]}))})}));function BS(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var VS=BS,GS=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function HS(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function ZS(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function WS(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function qS(e,t,n,r,i,a){for(var o=!1,s=i(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return!1;o=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&WS(s,a)&&!u)return s.focus(),!0;s=i(e,s,n)}return!1}var XS=t.forwardRef((function(e,n){var r=e.actions,i=e.autoFocus,a=void 0!==i&&i,o=e.autoFocusItem,s=void 0!==o&&o,u=e.children,l=e.className,c=e.disabledItemsFocusable,d=void 0!==c&&c,h=e.disableListWrap,f=void 0!==h&&h,p=e.onKeyDown,m=e.variant,v=void 0===m?"selectedMenu":m,g=(0,ue.Z)(e,GS),y=t.useRef(null),x=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,kw.Z)((function(){a&&y.current.focus()}),[a]),t.useImperativeHandle(r,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!y.current.style.width;if(e.clientHeight<y.current.clientHeight&&n){var r="".concat(VS((0,IS.Z)(e)),"px");y.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,y.current.style.width="calc(100% + ".concat(r,")")}return y.current}}}),[]);var _=(0,ge.Z)(y,n),b=-1;t.Children.forEach(u,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===b)&&(b=n))}));var w=t.Children.map(u,(function(e,n){if(n===b){var r={};return s&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===v&&(r.tabIndex=0),t.cloneElement(e,r)}return e}));return(0,te.jsx)(US,(0,le.Z)({role:"menu",ref:_,className:l,onKeyDown:function(e){var t=y.current,n=e.key,r=(0,IS.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),qS(t,r,f,d,HS);else if("ArrowUp"===n)e.preventDefault(),qS(t,r,f,d,ZS);else if("Home"===n)e.preventDefault(),qS(t,null,f,d,HS);else if("End"===n)e.preventDefault(),qS(t,null,f,d,ZS);else if(1===n.length){var i=x.current,a=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);var s=r&&!i.repeating&&WS(r,i);i.previousKeyMatched&&(s||qS(t,r,!1,d,HS,i))?e.preventDefault():i.previousKeyMatched=!1}p&&p(e)},tabIndex:a?0:-1},g,{children:w}))})),KS=XS;function YS(e){return(0,it.Z)("MuiPaper",e)}(0,Ue.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var QS=["className","component","elevation","square","variant"],$S=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},JS=(0,me.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat(t.palette.divider)},"elevation"===n.variant&&(0,le.Z)({boxShadow:t.shadows[n.elevation]},"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,pe.Fq)("#fff",$S(n.elevation)),", ").concat((0,pe.Fq)("#fff",$S(n.elevation)),")")}))})),eM=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiPaper"}),r=n.className,i=n.component,a=void 0===i?"div":i,o=n.elevation,s=void 0===o?1:o,u=n.square,l=void 0!==u&&u,c=n.variant,d=void 0===c?"elevation":c,h=(0,ue.Z)(n,QS),f=(0,le.Z)({},n,{component:a,elevation:s,square:l,variant:d}),p=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes,a={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,fe.Z)(a,YS,i)}(f);return(0,te.jsx)(JS,(0,le.Z)({as:a,ownerState:f,className:(0,he.Z)(p.root,r),ref:t},h))})),tM=eM,nM=n(83199),rM=n(17602),iM=n(58956),aM=n(78949),oM=n(15671),sM=n(43144);function uM(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function lM(e){return parseInt((0,xw.Z)(e).getComputedStyle(e).paddingRight,10)||0}function cM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,a=[t,n].concat((0,c.Z)(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){-1===a.indexOf(e)&&-1===o.indexOf(e.tagName)&&uM(e,i)}))}function dM(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function hM(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,br.Z)(e);return t.body===e?(0,xw.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=BS((0,br.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(lM(r)+i,"px");var a=(0,br.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(a,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(lM(e)+i,"px")}))}var o=r.parentElement,s=(0,xw.Z)(r),u="HTML"===(null==o?void 0:o.nodeName)&&"scroll"===s.getComputedStyle(o).overflowY?o:r;n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var fM=function(){function e(){(0,oM.Z)(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return(0,sM.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&uM(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);cM(t,e.mount,e.modalRef,r,!0);var i=dM(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=dM(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=hM(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=dM(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&uM(e.modalRef,!0),cM(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&uM(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),pM=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function mM(e){var t=[],n=[];return Array.from(e.querySelectorAll(pM)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function vM(){return!0}var gM=function(e){var n=e.children,r=e.disableAutoFocus,i=void 0!==r&&r,a=e.disableEnforceFocus,o=void 0!==a&&a,s=e.disableRestoreFocus,u=void 0!==s&&s,l=e.getTabbable,c=void 0===l?mM:l,d=e.isEnabled,h=void 0===d?vM:d,f=e.open,p=t.useRef(),m=t.useRef(null),v=t.useRef(null),g=t.useRef(null),y=t.useRef(null),x=t.useRef(!1),_=t.useRef(null),b=(0,xr.Z)(n.ref,_),w=t.useRef(null);t.useEffect((function(){f&&_.current&&(x.current=!i)}),[i,f]),t.useEffect((function(){if(f&&_.current){var e=(0,br.Z)(_.current);return _.current.contains(e.activeElement)||(_.current.hasAttribute("tabIndex")||_.current.setAttribute("tabIndex",-1),x.current&&_.current.focus()),function(){u||(g.current&&g.current.focus&&(p.current=!0,g.current.focus()),g.current=null)}}}),[f]),t.useEffect((function(){if(f&&_.current){var e=(0,br.Z)(_.current),t=function(t){var n=_.current;if(null!==n)if(e.hasFocus()&&!o&&h()&&!p.current){if(!n.contains(e.activeElement)){if(t&&y.current!==t.target||e.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!x.current)return;var r=[];if(e.activeElement!==m.current&&e.activeElement!==v.current||(r=c(_.current)),r.length>0){var i,a,s=Boolean((null==(i=w.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=w.current)?void 0:a.key)),u=r[0],l=r[r.length-1];s?l.focus():u.focus()}else n.focus()}}else p.current=!1},n=function(t){w.current=t,!o&&h()&&"Tab"===t.key&&e.activeElement===_.current&&t.shiftKey&&(p.current=!0,v.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===e.activeElement.tagName&&t()}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[i,o,u,h,f,c]);var S=function(e){null===g.current&&(g.current=e.relatedTarget),x.current=!0};return(0,te.jsxs)(t.Fragment,{children:[(0,te.jsx)("div",{tabIndex:0,onFocus:S,ref:m,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:b,onFocus:function(e){null===g.current&&(g.current=e.relatedTarget),x.current=!0,y.current=e.target;var t=n.props.onFocus;t&&t(e)}}),(0,te.jsx)("div",{tabIndex:0,onFocus:S,ref:v,"data-test":"sentinelEnd"})]})};function yM(e){return(0,it.Z)("MuiModal",e)}(0,Ue.Z)("MuiModal",["root","hidden"]);var xM=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var _M=new fM,bM=t.forwardRef((function(e,n){var r=e.BackdropComponent,i=e.BackdropProps,o=e.children,s=e.classes,u=e.className,l=e.closeAfterTransition,c=void 0!==l&&l,d=e.component,h=void 0===d?"div":d,f=e.components,p=void 0===f?{}:f,m=e.componentsProps,v=void 0===m?{}:m,g=e.container,y=e.disableAutoFocus,x=void 0!==y&&y,_=e.disableEnforceFocus,b=void 0!==_&&_,w=e.disableEscapeKeyDown,S=void 0!==w&&w,M=e.disablePortal,E=void 0!==M&&M,T=e.disableRestoreFocus,k=void 0!==T&&T,C=e.disableScrollLock,A=void 0!==C&&C,P=e.hideBackdrop,O=void 0!==P&&P,L=e.keepMounted,R=void 0!==L&&L,D=e.manager,I=void 0===D?_M:D,F=e.onBackdropClick,N=e.onClose,j=e.onKeyDown,z=e.open,U=e.theme,B=e.onTransitionEnter,V=e.onTransitionExited,G=(0,ue.Z)(e,xM),H=t.useState(!0),Z=(0,a.Z)(H,2),W=Z[0],q=Z[1],X=t.useRef({}),K=t.useRef(null),Y=t.useRef(null),Q=(0,xr.Z)(Y,n),$=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),J=function(){return X.current.modalRef=Y.current,X.current.mountNode=K.current,X.current},ee=function(){I.mount(J(),{disableScrollLock:A}),Y.current.scrollTop=0},ne=(0,iM.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(g)||(0,br.Z)(K.current).body;I.add(J(),e),Y.current&&ee()})),re=t.useCallback((function(){return I.isTopModal(J())}),[I]),ie=(0,iM.Z)((function(e){K.current=e,e&&(z&&re()?ee():uM(Y.current,!0))})),ae=t.useCallback((function(){I.remove(J())}),[I]);t.useEffect((function(){return function(){ae()}}),[ae]),t.useEffect((function(){z?ne():$&&c||ae()}),[z,ae,$,c,ne]);var oe=(0,le.Z)({},e,{classes:s,closeAfterTransition:c,disableAutoFocus:x,disableEnforceFocus:b,disableEscapeKeyDown:S,disablePortal:E,disableRestoreFocus:k,disableScrollLock:A,exited:W,hideBackdrop:O,keepMounted:R}),se=function(e){var t=e.open,n=e.exited,r=e.classes,i={root:["root",!t&&n&&"hidden"]};return(0,fe.Z)(i,yM,r)}(oe);if(!R&&!z&&(!$||W))return null;var ce={};void 0===o.props.tabIndex&&(ce.tabIndex="-1"),$&&(ce.onEnter=(0,aM.Z)((function(){q(!1),B&&B()}),o.props.onEnter),ce.onExited=(0,aM.Z)((function(){q(!0),V&&V(),c&&ae()}),o.props.onExited));var de=p.Root||h,pe=v.root||{};return(0,te.jsx)(Fi,{ref:ie,container:g,disablePortal:E,children:(0,te.jsxs)(de,(0,le.Z)({role:"presentation"},pe,!$n(de)&&{as:h,ownerState:(0,le.Z)({},oe,pe.ownerState),theme:U},G,{ref:Q,onKeyDown:function(e){j&&j(e),"Escape"===e.key&&re()&&(S||(e.stopPropagation(),N&&N(e,"escapeKeyDown")))},className:(0,he.Z)(se.root,pe.className,u),children:[!O&&r?(0,te.jsx)(r,(0,le.Z)({open:z,onClick:function(e){e.target===e.currentTarget&&(F&&F(e),N&&N(e,"backdropClick"))}},i)):null,(0,te.jsx)(gM,{disableEnforceFocus:b,disableAutoFocus:x,disableRestoreFocus:k,isEnabled:re,open:z,children:t.cloneElement(o,ce)})]}))})})),wM=bM;function SM(e){return(0,it.Z)("MuiBackdrop",e)}(0,Ue.Z)("MuiBackdrop",["root","invisible"]);var MM=["classes","className","invisible","component","components","componentsProps","theme"],EM=t.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.invisible,a=void 0!==i&&i,o=e.component,s=void 0===o?"div":o,u=e.components,l=void 0===u?{}:u,c=e.componentsProps,d=void 0===c?{}:c,h=e.theme,f=(0,ue.Z)(e,MM),p=(0,le.Z)({},e,{classes:n,invisible:a}),m=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,fe.Z)(n,SM,t)}(p),v=l.Root||s,g=d.root||{};return(0,te.jsx)(v,(0,le.Z)({"aria-hidden":!0},g,!$n(v)&&{as:s,ownerState:(0,le.Z)({},p,g.ownerState),theme:h},{ref:t},f,{className:(0,he.Z)(m.root,g.className,r)}))})),TM=EM,kM=n(81314),CM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],AM={entering:{opacity:1},entered:{opacity:1}},PM={enter:kM.x9.enteringScreen,exit:kM.x9.leavingScreen},OM=t.forwardRef((function(e,n){var r=e.addEndListener,i=e.appear,a=void 0===i||i,o=e.children,s=e.easing,u=e.in,l=e.onEnter,c=e.onEntered,d=e.onEntering,h=e.onExit,f=e.onExited,p=e.onExiting,m=e.style,v=e.timeout,g=void 0===v?PM:v,y=e.TransitionComponent,x=void 0===y?dr:y,_=(0,ue.Z)(e,CM),b=nr(),w=t.useRef(null),S=(0,ge.Z)(o.ref,n),M=(0,ge.Z)(w,S),E=function(e){return function(t){if(e){var n=w.current;void 0===t?e(n):e(n,t)}}},T=E(d),k=E((function(e,t){hr(e);var n=fr({style:m,timeout:g,easing:s},{mode:"enter"});e.style.webkitTransition=b.transitions.create("opacity",n),e.style.transition=b.transitions.create("opacity",n),l&&l(e,t)})),C=E(c),A=E(p),P=E((function(e){var t=fr({style:m,timeout:g,easing:s},{mode:"exit"});e.style.webkitTransition=b.transitions.create("opacity",t),e.style.transition=b.transitions.create("opacity",t),h&&h(e)})),O=E(f);return(0,te.jsx)(x,(0,le.Z)({appear:a,in:u,nodeRef:w,onEnter:k,onEntered:C,onEntering:T,onExit:P,onExited:O,onExiting:A,addEndListener:function(e){r&&r(w.current,e)},timeout:g},_,{children:function(e,n){return t.cloneElement(o,(0,le.Z)({style:(0,le.Z)({opacity:0,visibility:"exited"!==e||u?void 0:"hidden"},AM[e],m,o.props.style),ref:M},n))}}))})),LM=OM,RM=["children","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],DM=(0,me.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,le.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),IM=t.forwardRef((function(e,t){var n,r=(0,ve.Z)({props:e,name:"MuiBackdrop"}),i=r.children,a=r.components,o=void 0===a?{}:a,s=r.componentsProps,u=void 0===s?{}:s,l=r.className,c=r.invisible,d=void 0!==c&&c,h=r.open,f=r.transitionDuration,p=r.TransitionComponent,m=void 0===p?LM:p,v=(0,ue.Z)(r,RM),g=function(e){return e.classes}((0,le.Z)({},r,{invisible:d}));return(0,te.jsx)(m,(0,le.Z)({in:h,timeout:f},v,{children:(0,te.jsx)(TM,{className:l,invisible:d,components:(0,le.Z)({Root:DM},o),componentsProps:{root:(0,le.Z)({},u.root,(!o.Root||!$n(o.Root))&&{ownerState:(0,le.Z)({},null==(n=u.root)?void 0:n.ownerState)})},classes:g,ref:t,children:i})}))})),FM=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],NM=(0,me.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),jM=(0,me.ZP)(IM,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),zM=t.forwardRef((function(e,n){var r,i=(0,ve.Z)({name:"MuiModal",props:e}),o=i.BackdropComponent,s=void 0===o?jM:o,u=i.closeAfterTransition,l=void 0!==u&&u,c=i.children,d=i.components,h=void 0===d?{}:d,f=i.componentsProps,p=void 0===f?{}:f,m=i.disableAutoFocus,v=void 0!==m&&m,g=i.disableEnforceFocus,y=void 0!==g&&g,x=i.disableEscapeKeyDown,_=void 0!==x&&x,b=i.disablePortal,w=void 0!==b&&b,S=i.disableRestoreFocus,M=void 0!==S&&S,E=i.disableScrollLock,T=void 0!==E&&E,k=i.hideBackdrop,C=void 0!==k&&k,A=i.keepMounted,P=void 0!==A&&A,O=(0,ue.Z)(i,FM),L=t.useState(!0),R=(0,a.Z)(L,2),D=R[0],I=R[1],F={closeAfterTransition:l,disableAutoFocus:v,disableEnforceFocus:y,disableEscapeKeyDown:_,disablePortal:w,disableRestoreFocus:M,disableScrollLock:T,hideBackdrop:C,keepMounted:P},N=function(e){return e.classes}((0,le.Z)({},i,F,{exited:D}));return(0,te.jsx)(wM,(0,le.Z)({components:(0,le.Z)({Root:NM},h),componentsProps:{root:(0,le.Z)({},p.root,(!h.Root||!$n(h.Root))&&{ownerState:(0,le.Z)({},null==(r=p.root)?void 0:r.ownerState)})},BackdropComponent:s,onTransitionEnter:function(){return I(!1)},onTransitionExited:function(){return I(!0)},ref:n},O,{classes:N},F,{children:c}))}));function UM(e){return(0,it.Z)("MuiPopover",e)}(0,Ue.Z)("MuiPopover",["root","paper"]);var BM=["onEntering"],VM=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function GM(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function HM(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function ZM(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function WM(e){return"function"===typeof e?e():e}var qM=(0,me.ZP)(zM,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),XM=(0,me.ZP)(tM,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),KM=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiPopover"}),i=r.action,a=r.anchorEl,o=r.anchorOrigin,s=void 0===o?{vertical:"top",horizontal:"left"}:o,u=r.anchorPosition,l=r.anchorReference,c=void 0===l?"anchorEl":l,d=r.children,h=r.className,f=r.container,p=r.elevation,m=void 0===p?8:p,v=r.marginThreshold,g=void 0===v?16:v,y=r.open,x=r.PaperProps,_=void 0===x?{}:x,b=r.transformOrigin,w=void 0===b?{vertical:"top",horizontal:"left"}:b,S=r.TransitionComponent,M=void 0===S?yr:S,E=r.transitionDuration,T=void 0===E?"auto":E,k=r.TransitionProps,C=(k=void 0===k?{}:k).onEntering,A=(0,ue.Z)(r.TransitionProps,BM),P=(0,ue.Z)(r,VM),O=t.useRef(),L=(0,ge.Z)(O,_.ref),R=(0,le.Z)({},r,{anchorOrigin:s,anchorReference:c,elevation:m,marginThreshold:g,PaperProps:_,transformOrigin:w,TransitionComponent:M,transitionDuration:T,TransitionProps:A}),D=function(e){var t=e.classes;return(0,fe.Z)({root:["root"],paper:["paper"]},UM,t)}(R),I=t.useCallback((function(){if("anchorPosition"===c)return u;var e=WM(a),t=(e&&1===e.nodeType?e:(0,IS.Z)(O.current).body).getBoundingClientRect();return{top:t.top+GM(t,s.vertical),left:t.left+HM(t,s.horizontal)}}),[a,s.horizontal,s.vertical,u,c]),F=t.useCallback((function(e){return{vertical:GM(e,w.vertical),horizontal:HM(e,w.horizontal)}}),[w.horizontal,w.vertical]),N=t.useCallback((function(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=F(t);if("none"===c)return{top:null,left:null,transformOrigin:ZM(n)};var r=I(),i=r.top-n.vertical,o=r.left-n.horizontal,s=i+t.height,u=o+t.width,l=(0,rM.Z)(WM(a)),d=l.innerHeight-g,h=l.innerWidth-g;if(i<g){var f=i-g;i-=f,n.vertical+=f}else if(s>d){var p=s-d;i-=p,n.vertical+=p}if(o<g){var m=o-g;o-=m,n.horizontal+=m}else if(u>h){var v=u-h;o-=v,n.horizontal+=v}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:ZM(n)}}),[a,c,I,F,g]),j=t.useCallback((function(){var e=O.current;if(e){var t=N(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[N]);t.useEffect((function(){y&&j()})),t.useImperativeHandle(i,(function(){return y?{updatePosition:function(){j()}}:null}),[y,j]),t.useEffect((function(){if(y){var e=(0,nM.Z)((function(){j()})),t=(0,rM.Z)(a);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[a,y,j]);var z=T;"auto"!==T||M.muiSupportAuto||(z=void 0);var U=f||(a?(0,IS.Z)(WM(a)).body:void 0);return(0,te.jsx)(qM,(0,le.Z)({BackdropProps:{invisible:!0},className:(0,he.Z)(D.root,h),container:U,open:y,ref:n,ownerState:R},P,{children:(0,te.jsx)(M,(0,le.Z)({appear:!0,in:y,onEntering:function(e,t){C&&C(e,t),j()},timeout:z},A,{children:(0,te.jsx)(XM,(0,le.Z)({elevation:m},_,{ref:L,className:(0,he.Z)(D.paper,_.className),children:d}))}))}))})),YM=KM;function QM(e){return(0,it.Z)("MuiMenu",e)}(0,Ue.Z)("MuiMenu",["root","paper","list"]);var $M=["onEntering"],JM=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],eE={vertical:"top",horizontal:"right"},tE={vertical:"top",horizontal:"left"},nE=(0,me.ZP)(YM,{shouldForwardProp:function(e){return(0,me.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),rE=(0,me.ZP)(tM,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,t){return t.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),iE=(0,me.ZP)(KS,{name:"MuiMenu",slot:"List",overridesResolver:function(e,t){return t.list}})({outline:0}),aE=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiMenu"}),i=r.autoFocus,a=void 0===i||i,o=r.children,s=r.disableAutoFocusItem,u=void 0!==s&&s,l=r.MenuListProps,c=void 0===l?{}:l,d=r.onClose,h=r.open,f=r.PaperProps,p=void 0===f?{}:f,m=r.PopoverClasses,v=r.transitionDuration,g=void 0===v?"auto":v,y=r.TransitionProps,x=(y=void 0===y?{}:y).onEntering,_=r.variant,b=void 0===_?"selectedMenu":_,w=(0,ue.Z)(r.TransitionProps,$M),S=(0,ue.Z)(r,JM),M=nr(),E="rtl"===M.direction,T=(0,le.Z)({},r,{autoFocus:a,disableAutoFocusItem:u,MenuListProps:c,onEntering:x,PaperProps:p,transitionDuration:g,TransitionProps:w,variant:b}),k=function(e){var t=e.classes;return(0,fe.Z)({root:["root"],paper:["paper"],list:["list"]},QM,t)}(T),C=a&&!u&&h,A=t.useRef(null),P=-1;return t.Children.map(o,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===b&&e.props.selected||-1===P)&&(P=n))})),(0,te.jsx)(nE,(0,le.Z)({classes:m,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?eE:tE,PaperProps:(0,le.Z)({component:rE},p,{classes:(0,le.Z)({},p.classes,{root:k.paper})}),className:k.root,open:h,ref:n,transitionDuration:g,TransitionProps:(0,le.Z)({onEntering:function(e,t){A.current&&A.current.adjustStyleForScrollbar(e,M),x&&x(e,t)}},w),ownerState:T},S,{children:(0,te.jsx)(iE,(0,le.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:A,autoFocus:a&&(-1===P||u),autoFocusItem:C,variant:b},c,{className:(0,he.Z)(k.list,c.className),children:o}))}))})),oE=aE;function sE(e){return(0,it.Z)("MuiNativeSelect",e)}var uE=(0,Ue.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),lE=["className","disabled","IconComponent","inputRef","variant"],cE=function(e){var t,n=e.ownerState,r=e.theme;return(0,le.Z)((t={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===r.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},(0,i.Z)(t,"&.".concat(uE.disabled),{cursor:"default"}),(0,i.Z)(t,"&[multiple]",{height:"auto"}),(0,i.Z)(t,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:r.palette.background.paper}),(0,i.Z)(t,"&&&",{paddingRight:24,minWidth:16}),t),"filled"===n.variant&&{"&&&":{paddingRight:32}},"outlined"===n.variant&&{borderRadius:r.shape.borderRadius,"&:focus":{borderRadius:r.shape.borderRadius},"&&&":{paddingRight:32}})},dE=(0,me.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:me.FO,overridesResolver:function(e,t){var n=e.ownerState;return[t.select,t[n.variant],(0,i.Z)({},"&.".concat(uE.multiple),t.multiple)]}})(cE),hE=function(e){var t=e.ownerState,n=e.theme;return(0,le.Z)((0,i.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:n.palette.action.active},"&.".concat(uE.disabled),{color:n.palette.action.disabled}),t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},fE=(0,me.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,ht.Z)(n.variant))],n.open&&t.iconOpen]}})(hE),pE=t.forwardRef((function(e,n){var r=e.className,i=e.disabled,a=e.IconComponent,o=e.inputRef,s=e.variant,u=void 0===s?"standard":s,l=(0,ue.Z)(e,lE),c=(0,le.Z)({},e,{disabled:i,variant:u}),d=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,a=e.open,o={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,ht.Z)(n)),a&&"iconOpen",r&&"disabled"]};return(0,fe.Z)(o,sE,t)}(c);return(0,te.jsxs)(t.Fragment,{children:[(0,te.jsx)(dE,(0,le.Z)({ownerState:c,className:(0,he.Z)(d.select,r),disabled:i,ref:o||n},l)),e.multiple?null:(0,te.jsx)(fE,{as:a,ownerState:c,className:d.icon})]})}));function mE(e){return(0,it.Z)("MuiSelect",e)}var vE=(0,Ue.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),gE=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],yE=(0,me.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,t){var n=e.ownerState;return[(0,i.Z)({},"&.".concat(vE.select),t.select),(0,i.Z)({},"&.".concat(vE.select),t[n.variant]),(0,i.Z)({},"&.".concat(vE.multiple),t.multiple)]}})(cE,(0,i.Z)({},"&.".concat(vE.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),xE=(0,me.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,t){var n=e.ownerState;return[t.icon,n.variant&&t["icon".concat((0,ht.Z)(n.variant))],n.open&&t.iconOpen]}})(hE),_E=(0,me.ZP)("input",{shouldForwardProp:function(e){return(0,me.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,t){return t.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function bE(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function wE(e){return null==e||"string"===typeof e&&!e.trim()}var SE,ME,EE=t.forwardRef((function(e,n){var r=e["aria-describedby"],i=e["aria-label"],o=e.autoFocus,s=e.autoWidth,u=e.children,l=e.className,c=e.defaultValue,d=e.disabled,h=e.displayEmpty,f=e.IconComponent,p=e.inputRef,m=e.labelId,v=e.MenuProps,g=void 0===v?{}:v,y=e.multiple,x=e.name,_=e.onBlur,b=e.onChange,w=e.onClose,S=e.onFocus,M=e.onOpen,E=e.open,T=e.readOnly,k=e.renderValue,C=e.SelectDisplayProps,A=void 0===C?{}:C,P=e.tabIndex,O=e.value,L=e.variant,R=void 0===L?"standard":L,D=(0,ue.Z)(e,gE),I=(0,qi.Z)({controlled:O,default:c,name:"Select"}),F=(0,a.Z)(I,2),N=F[0],j=F[1],z=t.useRef(null),U=t.useRef(null),B=t.useState(null),V=(0,a.Z)(B,2),G=V[0],H=V[1],Z=t.useRef(null!=E).current,W=t.useState(),q=(0,a.Z)(W,2),X=q[0],K=q[1],Y=t.useState(!1),Q=(0,a.Z)(Y,2),$=Q[0],J=Q[1],ee=(0,ge.Z)(n,p),ne=t.useCallback((function(e){U.current=e,e&&H(e)}),[]);t.useImperativeHandle(ee,(function(){return{focus:function(){U.current.focus()},node:z.current,value:N}}),[N]),t.useEffect((function(){o&&U.current.focus()}),[o]),t.useEffect((function(){var e=(0,IS.Z)(U.current).getElementById(m);if(e){var t=function(){getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}),[m]);var re,ie,ae=function(e,t){e?M&&M(t):w&&w(t),Z||(K(s?null:G.clientWidth),J(e))},oe=t.Children.toArray(u),se=function(e){return function(t){var n;if(t.currentTarget.hasAttribute("tabindex")){if(y){n=Array.isArray(N)?N.slice():[];var r=N.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),N!==n&&(j(n),b)){var i=t.nativeEvent||t,a=new i.constructor(i.type,i);Object.defineProperty(a,"target",{writable:!0,value:{value:n,name:x}}),b(a,e)}y||ae(!1,t)}}},ce=null!==G&&(Z?E:$);delete D["aria-invalid"];var de=[],pe=!1;(Ow({value:N})||h)&&(k?re=k(N):pe=!0);var me=oe.map((function(e){if(!t.isValidElement(e))return null;var n;if(y){if(!Array.isArray(N))throw new Error((0,yw.Z)(2));n=N.some((function(t){return bE(t,e.props.value)})),n&&pe&&de.push(e.props.children)}else(n=bE(N,e.props.value))&&pe&&(ie=e.props.children);return n&&!0,t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:se(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));pe&&(re=y?0===de.length?null:de.reduce((function(e,t,n){return e.push(t),n<de.length-1&&e.push(", "),e}),[]):ie);var ve,ye=X;!s&&Z&&G&&(ye=G.clientWidth),ve="undefined"!==typeof P?P:d?null:0;var xe=A.id||(x?"mui-component-select-".concat(x):void 0),_e=(0,le.Z)({},e,{variant:R,value:N,open:ce}),be=function(e){var t=e.classes,n=e.variant,r=e.disabled,i=e.multiple,a=e.open,o={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,ht.Z)(n)),a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,fe.Z)(o,mE,t)}(_e);return(0,te.jsxs)(t.Fragment,{children:[(0,te.jsx)(yE,(0,le.Z)({ref:ne,tabIndex:ve,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":ce?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,xe].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:function(e){if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ae(!0,e))}},onMouseDown:d||T?null:function(e){0===e.button&&(e.preventDefault(),U.current.focus(),ae(!0,e))},onBlur:function(e){!ce&&_&&(Object.defineProperty(e,"target",{writable:!0,value:{value:N,name:x}}),_(e))},onFocus:S},A,{ownerState:_e,className:(0,he.Z)(be.select,l,A.className),id:xe,children:wE(re)?(0,te.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):re})),(0,te.jsx)(_E,(0,le.Z)({value:Array.isArray(N)?N.join(","):N,name:x,ref:z,"aria-hidden":!0,onChange:function(e){var t=oe.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=oe[t];j(n.props.value),b&&b(e,n)}},tabIndex:-1,disabled:d,className:be.nativeInput,autoFocus:o,ownerState:_e},D)),(0,te.jsx)(xE,{as:f,className:be.icon,ownerState:_e}),(0,te.jsx)(oE,(0,le.Z)({id:"menu-".concat(x||""),anchorEl:G,open:ce,onClose:function(e){ae(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},g,{MenuListProps:(0,le.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},g.MenuListProps),PaperProps:(0,le.Z)({},g.PaperProps,{style:(0,le.Z)({minWidth:ye},null!=g.PaperProps?g.PaperProps.style:null)}),children:me}))]})})),TE=EE,kE=(0,rw.Z)((0,te.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),CE=["autoWidth","children","classes","className","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],AE=t.forwardRef((function(e,n){var r=(0,ve.Z)({name:"MuiSelect",props:e}),i=r.autoWidth,a=void 0!==i&&i,o=r.children,s=r.classes,u=void 0===s?{}:s,l=r.className,c=r.displayEmpty,d=void 0!==c&&c,h=r.IconComponent,f=void 0===h?kE:h,p=r.id,m=r.input,v=r.inputProps,g=r.label,y=r.labelId,x=r.MenuProps,_=r.multiple,b=void 0!==_&&_,w=r.native,S=void 0!==w&&w,M=r.onClose,E=r.onOpen,T=r.open,k=r.renderValue,C=r.SelectDisplayProps,A=r.variant,P=void 0===A?"outlined":A,O=(0,ue.Z)(r,CE),L=S?pE:TE,R=Tw({props:r,muiFormControl:Yb(),states:["variant"]}).variant||P,D=m||{standard:SE||(SE=(0,te.jsx)(Xw,{})),outlined:(0,te.jsx)(hS,{label:g}),filled:ME||(ME=(0,te.jsx)(tS,{}))}[R],I=function(e){return e.classes}((0,le.Z)({},r,{classes:u})),F=(0,ge.Z)(n,D.ref);return t.cloneElement(D,(0,le.Z)({inputComponent:L,inputProps:(0,le.Z)({children:o,IconComponent:f,variant:R,type:void 0,multiple:b},S?{id:p}:{autoWidth:a,displayEmpty:d,labelId:y,MenuProps:x,onClose:M,onOpen:E,open:T,renderValue:k,SelectDisplayProps:(0,le.Z)({id:p},C)},v,{classes:v?(0,gw.Z)(I,v.classes):I},m?m.props.inputProps:{})},b&&S&&"outlined"===R?{notched:!0}:{},{ref:F,className:(0,he.Z)(D.props.className,l)},O))}));AE.muiName="Select";var PE=AE;function OE(e){return(0,it.Z)("MuiTextField",e)}(0,Ue.Z)("MuiTextField",["root"]);var LE=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],RE={standard:Xw,filled:tS,outlined:hS},DE=(0,me.ZP)(AS,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),IE=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiTextField"}),r=n.autoComplete,i=n.autoFocus,a=void 0!==i&&i,o=n.children,s=n.className,u=n.color,l=void 0===u?"primary":u,c=n.defaultValue,d=n.disabled,h=void 0!==d&&d,f=n.error,p=void 0!==f&&f,m=n.FormHelperTextProps,v=n.fullWidth,g=void 0!==v&&v,y=n.helperText,x=n.id,_=n.InputLabelProps,b=n.inputProps,w=n.InputProps,S=n.inputRef,M=n.label,E=n.maxRows,T=n.minRows,k=n.multiline,C=void 0!==k&&k,A=n.name,P=n.onBlur,O=n.onChange,L=n.onFocus,R=n.placeholder,D=n.required,I=void 0!==D&&D,F=n.rows,N=n.select,j=void 0!==N&&N,z=n.SelectProps,U=n.type,B=n.value,V=n.variant,G=void 0===V?"outlined":V,H=(0,ue.Z)(n,LE),Z=(0,le.Z)({},n,{autoFocus:a,color:l,disabled:h,error:p,fullWidth:g,multiline:C,required:I,select:j,variant:G}),W=function(e){var t=e.classes;return(0,fe.Z)({root:["root"]},OE,t)}(Z);var q={};"outlined"===G&&(_&&"undefined"!==typeof _.shrink&&(q.notched=_.shrink),q.label=M),j&&(z&&z.native||(q.id=void 0),q["aria-describedby"]=void 0);var X=(0,vw.Z)(x),K=y&&X?"".concat(X,"-helper-text"):void 0,Y=M&&X?"".concat(X,"-label"):void 0,Q=RE[G],$=(0,te.jsx)(Q,(0,le.Z)({"aria-describedby":K,autoComplete:r,autoFocus:a,defaultValue:c,fullWidth:g,multiline:C,name:A,rows:F,maxRows:E,minRows:T,type:U,value:B,id:X,inputRef:S,onBlur:P,onChange:O,onFocus:L,placeholder:R,inputProps:b},q,w));return(0,te.jsxs)(DE,(0,le.Z)({className:(0,he.Z)(W.root,s),disabled:h,error:p,fullWidth:g,ref:t,required:I,color:l,variant:G,ownerState:Z},H,{children:[M&&(0,te.jsx)(SS,(0,le.Z)({htmlFor:X,id:Y},_,{children:M})),j?(0,te.jsx)(PE,(0,le.Z)({"aria-describedby":K,id:X,labelId:Y,value:B,input:$},z,{children:o})):$,y&&(0,te.jsx)(DS,(0,le.Z)({id:K},m,{children:y}))]}))})),FE=IE,NE=n(98937),jE=n(77907),zE=n(58959);function UE(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function BE(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}var VE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,n=void 0===t||t,r=e.ignoreCase,i=void 0===r||r,a=e.limit,o=e.matchFrom,s=void 0===o?"any":o,u=e.stringify,l=e.trim,c=void 0!==l&&l;return function(e,t){var r=t.inputValue,o=t.getOptionLabel,l=c?r.trim():r;i&&(l=l.toLowerCase()),n&&(l=UE(l));var d=e.filter((function(e){var t=(u||o)(e);return i&&(t=t.toLowerCase()),n&&(t=UE(t)),"start"===s?0===t.indexOf(l):t.indexOf(l)>-1}));return"number"===typeof a?d.slice(0,a):d}}();function GE(e){var n,r=e.autoComplete,i=void 0!==r&&r,o=e.autoHighlight,s=void 0!==o&&o,u=e.autoSelect,l=void 0!==u&&u,c=e.blurOnSelect,d=void 0!==c&&c,h=e.disabled,f=e.clearOnBlur,p=void 0===f?!e.freeSolo:f,m=e.clearOnEscape,v=void 0!==m&&m,g=e.componentName,y=void 0===g?"useAutocomplete":g,x=e.defaultValue,_=void 0===x?e.multiple?[]:null:x,b=e.disableClearable,w=void 0!==b&&b,S=e.disableCloseOnSelect,M=void 0!==S&&S,E=e.disabledItemsFocusable,T=void 0!==E&&E,k=e.disableListWrap,C=void 0!==k&&k,A=e.filterOptions,P=void 0===A?VE:A,O=e.filterSelectedOptions,L=void 0!==O&&O,R=e.freeSolo,D=void 0!==R&&R,I=e.getOptionDisabled,F=e.getOptionLabel,N=void 0===F?function(e){var t;return null!=(t=e.label)?t:e}:F,j=e.isOptionEqualToValue,z=void 0===j?function(e,t){return e===t}:j,U=e.groupBy,B=e.handleHomeEndKeys,V=void 0===B?!e.freeSolo:B,G=e.id,H=e.includeInputInList,Z=void 0!==H&&H,W=e.inputValue,q=e.multiple,X=void 0!==q&&q,K=e.onChange,Y=e.onClose,Q=e.onHighlightChange,$=e.onInputChange,J=e.onOpen,ee=e.open,te=e.openOnFocus,ne=void 0!==te&&te,re=e.options,ie=e.selectOnFocus,ae=void 0===ie?!e.freeSolo:ie,oe=e.value,se=(0,vw.Z)(G);n=function(e){var t=N(e);return"string"!==typeof t?String(t):t};var ue=t.useRef(!1),ce=t.useRef(!0),de=t.useRef(null),he=t.useRef(null),fe=t.useState(null),pe=(0,a.Z)(fe,2),me=pe[0],ve=pe[1],ge=t.useState(-1),ye=(0,a.Z)(ge,2),xe=ye[0],_e=ye[1],be=s?0:-1,we=t.useRef(be),Se=(0,zE.Z)({controlled:oe,default:_,name:y}),Me=(0,a.Z)(Se,2),Ee=Me[0],Te=Me[1],ke=(0,zE.Z)({controlled:W,default:"",name:y,state:"inputValue"}),Ce=(0,a.Z)(ke,2),Ae=Ce[0],Pe=Ce[1],Oe=t.useState(!1),Le=(0,a.Z)(Oe,2),Re=Le[0],De=Le[1],Ie=t.useCallback((function(e,t){if((X?Ee.length<t.length:null!==t)||p){var r;if(X)r="";else if(null==t)r="";else{var i=n(t);r="string"===typeof i?i:""}Ae!==r&&(Pe(r),$&&$(e,r,"reset"))}}),[n,Ae,X,$,Pe,p,Ee]),Fe=t.useRef();t.useEffect((function(){var e=Ee!==Fe.current;Fe.current=Ee,Re&&!e||D&&!e||Ie(null,Ee)}),[Ee,Ie,Re,Fe,D]);var Ne=(0,zE.Z)({controlled:ee,default:!1,name:y,state:"open"}),je=(0,a.Z)(Ne,2),ze=je[0],Ue=je[1],Be=t.useState(!0),Ve=(0,a.Z)(Be,2),Ge=Ve[0],He=Ve[1],Ze=!X&&null!=Ee&&Ae===n(Ee),We=ze,qe=We?P(re.filter((function(e){return!L||!(X?Ee:[Ee]).some((function(t){return null!==t&&z(e,t)}))})),{inputValue:Ze&&Ge?"":Ae,getOptionLabel:n}):[],Xe=ze&&qe.length>0,Ke=(0,iM.Z)((function(e){-1===e?de.current.focus():me.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));t.useEffect((function(){X&&xe>Ee.length-1&&(_e(-1),Ke(-1))}),[Ee,X,xe,Ke]);var Ye=(0,iM.Z)((function(e){var t=e.event,n=e.index,r=e.reason,i=void 0===r?"auto":r;if(we.current=n,-1===n?de.current.removeAttribute("aria-activedescendant"):de.current.setAttribute("aria-activedescendant","".concat(se,"-option-").concat(n)),Q&&Q(t,-1===n?null:qe[n],i),he.current){var a=he.current.querySelector('[role="option"].Mui-focused');a&&(a.classList.remove("Mui-focused"),a.classList.remove("Mui-focusVisible"));var o=he.current.parentElement.querySelector('[role="listbox"]');if(o)if(-1!==n){var s=he.current.querySelector('[data-option-index="'.concat(n,'"]'));if(s&&(s.classList.add("Mui-focused"),"keyboard"===i&&s.classList.add("Mui-focusVisible"),o.scrollHeight>o.clientHeight&&"mouse"!==i)){var u=s,l=o.clientHeight+o.scrollTop,c=u.offsetTop+u.offsetHeight;c>l?o.scrollTop=c-o.clientHeight:u.offsetTop-u.offsetHeight*(U?1.3:0)<o.scrollTop&&(o.scrollTop=u.offsetTop-u.offsetHeight*(U?1.3:0))}}else o.scrollTop=0}})),Qe=(0,iM.Z)((function(e){var t=e.event,r=e.diff,a=e.direction,o=void 0===a?"next":a,s=e.reason,u=void 0===s?"auto":s;if(We){var l=function(e,t){if(!he.current||-1===e)return-1;for(var n=e;;){if("next"===t&&n===qe.length||"previous"===t&&-1===n)return-1;var r=he.current.querySelector('[data-option-index="'.concat(n,'"]')),i=!T&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(!(r&&!r.hasAttribute("tabindex")||i))return n;n+="next"===t?1:-1}}(function(){var e=qe.length-1;if("reset"===r)return be;if("start"===r)return 0;if("end"===r)return e;var t=we.current+r;return t<0?-1===t&&Z?-1:C&&-1!==we.current||Math.abs(r)>1?0:e:t>e?t===e+1&&Z?-1:C||Math.abs(r)>1?e:0:t}(),o);if(Ye({index:l,reason:u,event:t}),i&&"reset"!==r)if(-1===l)de.current.value=Ae;else{var c=n(qe[l]);de.current.value=c,0===c.toLowerCase().indexOf(Ae.toLowerCase())&&Ae.length>0&&de.current.setSelectionRange(Ae.length,c.length)}}})),$e=t.useCallback((function(){if(We){var e=X?Ee[0]:Ee;if(0!==qe.length&&null!=e){if(he.current)if(null==e)we.current>=qe.length-1?Ye({index:qe.length-1}):Ye({index:we.current});else{var t=qe[we.current];if(X&&t&&-1!==BE(Ee,(function(e){return z(t,e)})))return;var n=BE(qe,(function(t){return z(t,e)}));-1===n?Qe({diff:"reset"}):Ye({index:n})}}else Qe({diff:"reset"})}}),[qe.length,!X&&Ee,L,Qe,Ye,We,Ae,X]),Je=(0,iM.Z)((function(e){(0,Ii.Z)(he,e),e&&$e()}));t.useEffect((function(){$e()}),[$e]);var et=function(e){ze||(Ue(!0),He(!0),J&&J(e))},tt=function(e,t){ze&&(Ue(!1),Y&&Y(e,t))},nt=function(e,t,n,r){if(Array.isArray(Ee)){if(Ee.length===t.length&&Ee.every((function(e,n){return e===t[n]})))return}else if(Ee===t)return;K&&K(e,t,n,r),Te(t)},rt=t.useRef(!1),it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",i=n,a=t;if(X){var o=BE(a=Array.isArray(Ee)?Ee.slice():[],(function(e){return z(t,e)}));-1===o?a.push(t):"freeSolo"!==r&&(a.splice(o,1),i="removeOption")}Ie(e,a),nt(e,a,i,{option:t}),M||e.ctrlKey||e.metaKey||tt(e,i),(!0===d||"touch"===d&&rt.current||"mouse"===d&&!rt.current)&&de.current.blur()};var at=function(e,t){if(X){tt(e,"toggleInput");var n=xe;-1===xe?""===Ae&&"previous"===t&&(n=Ee.length-1):((n+="next"===t?1:-1)<0&&(n=0),n===Ee.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;for(var n=e;;){if("next"===t&&n===Ee.length||"previous"===t&&-1===n)return-1;var r=me.querySelector('[data-tag-index="'.concat(n,'"]'));if(r&&r.hasAttribute("tabindex")&&!r.disabled&&"true"!==r.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),_e(n),Ke(n)}},ot=function(e){ue.current=!0,Pe(""),$&&$(e,"","clear"),nt(e,X?[]:null,"clear")},st=function(e){return function(t){if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==xe&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(_e(-1),Ke(-1)),229!==t.which))switch(t.key){case"Home":We&&V&&(t.preventDefault(),Qe({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":We&&V&&(t.preventDefault(),Qe({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),Qe({diff:-5,direction:"previous",reason:"keyboard",event:t}),et(t);break;case"PageDown":t.preventDefault(),Qe({diff:5,direction:"next",reason:"keyboard",event:t}),et(t);break;case"ArrowDown":t.preventDefault(),Qe({diff:1,direction:"next",reason:"keyboard",event:t}),et(t);break;case"ArrowUp":t.preventDefault(),Qe({diff:-1,direction:"previous",reason:"keyboard",event:t}),et(t);break;case"ArrowLeft":at(t,"previous");break;case"ArrowRight":at(t,"next");break;case"Enter":if(-1!==we.current&&We){var n=qe[we.current],r=!!I&&I(n);if(t.preventDefault(),r)return;it(t,n,"selectOption"),i&&de.current.setSelectionRange(de.current.value.length,de.current.value.length)}else D&&""!==Ae&&!1===Ze&&(X&&t.preventDefault(),it(t,Ae,"createOption","freeSolo"));break;case"Escape":We?(t.preventDefault(),t.stopPropagation(),tt(t,"escape")):v&&(""!==Ae||X&&Ee.length>0)&&(t.preventDefault(),t.stopPropagation(),ot(t));break;case"Backspace":if(X&&""===Ae&&Ee.length>0){var a=-1===xe?Ee.length-1:xe,o=Ee.slice();o.splice(a,1),nt(t,o,"removeOption",{option:Ee[a]})}}}},ut=function(e){De(!0),ne&&!ue.current&&et(e)},lt=function(e){null!==he.current&&he.current.parentElement.contains(document.activeElement)?de.current.focus():(De(!1),ce.current=!0,ue.current=!1,l&&-1!==we.current&&We?it(e,qe[we.current],"blur"):l&&D&&""!==Ae?it(e,Ae,"blur","freeSolo"):p&&Ie(e,Ee),tt(e,"blur"))},ct=function(e){var t=e.target.value;Ae!==t&&(Pe(t),He(!1),$&&$(e,t,"input")),""===t?w||X||nt(e,null,"clear"):et(e)},dt=function(e){Ye({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},ht=function(){rt.current=!0},ft=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));it(e,qe[t],"selectOption"),rt.current=!1},pt=function(e){return function(t){var n=Ee.slice();n.splice(e,1),nt(t,n,"removeOption",{option:Ee[e]})}},mt=function(e){ze?tt(e,"toggleInput"):et(e)},vt=function(e){e.target.getAttribute("id")!==se&&e.preventDefault()},gt=function(){de.current.focus(),ae&&ce.current&&de.current.selectionEnd-de.current.selectionStart===0&&de.current.select(),ce.current=!1},yt=function(e){""!==Ae&&ze||mt(e)},xt=D&&Ae.length>0;xt=xt||(X?Ee.length>0:null!==Ee);var _t=qe;if(U){new Map;_t=qe.reduce((function(e,t,n){var r=U(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return h&&Re&&lt(),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,le.Z)({"aria-owns":Xe?"".concat(se,"-listbox"):null,role:"combobox","aria-expanded":Xe},e,{onKeyDown:st(e),onMouseDown:vt,onClick:gt})},getInputLabelProps:function(){return{id:"".concat(se,"-label"),htmlFor:se}},getInputProps:function(){return{id:se,value:Ae,onBlur:lt,onFocus:ut,onChange:ct,onMouseDown:yt,"aria-activedescendant":We?"":null,"aria-autocomplete":i?"both":"list","aria-controls":Xe?"".concat(se,"-listbox"):void 0,autoComplete:"off",ref:de,autoCapitalize:"none",spellCheck:"false"}},getClearProps:function(){return{tabIndex:-1,onClick:ot}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:mt}},getTagProps:function(e){var t=e.index;return{key:t,"data-tag-index":t,tabIndex:-1,onDelete:pt(t)}},getListboxProps:function(){return{role:"listbox",id:"".concat(se,"-listbox"),"aria-labelledby":"".concat(se,"-label"),ref:Je,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var t=e.index,r=e.option,i=(X?Ee:[Ee]).some((function(e){return null!=e&&z(r,e)})),a=!!I&&I(r);return{key:n(r),tabIndex:-1,role:"option",id:"".concat(se,"-option-").concat(t),onMouseOver:dt,onClick:ft,onTouchStart:ht,"data-option-index":t,"aria-disabled":a,"aria-selected":i}},id:se,inputValue:Ae,value:Ee,dirty:xt,popupOpen:We,focused:Re||-1!==xe,anchorEl:me,setAnchorEl:ve,focusedTag:xe,groupedOptions:_t}}function HE(e){return(0,it.Z)("MuiListSubheader",e)}(0,Ue.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var ZE=["className","color","component","disableGutters","disableSticky","inset"],WE=(0,me.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,ht.Z)(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:t.palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:t.palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:t.palette.background.paper})})),qE=t.forwardRef((function(e,t){var n=(0,ve.Z)({props:e,name:"MuiListSubheader"}),r=n.className,i=n.color,a=void 0===i?"default":i,o=n.component,s=void 0===o?"li":o,u=n.disableGutters,l=void 0!==u&&u,c=n.disableSticky,d=void 0!==c&&c,h=n.inset,f=void 0!==h&&h,p=(0,ue.Z)(n,ZE),m=(0,le.Z)({},n,{color:a,component:s,disableGutters:l,disableSticky:d,inset:f}),v=function(e){var t=e.classes,n=e.color,r=e.disableGutters,i=e.inset,a=e.disableSticky,o={root:["root","default"!==n&&"color".concat((0,ht.Z)(n)),!r&&"gutters",i&&"inset",!a&&"sticky"]};return(0,fe.Z)(o,HE,t)}(m);return(0,te.jsx)(WE,(0,le.Z)({as:s,className:(0,he.Z)(v.root,r),ref:t,ownerState:m},p))})),XE=qE,KE=(0,rw.Z)((0,te.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function YE(e){return(0,it.Z)("MuiChip",e)}var QE=(0,Ue.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]),$E=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],JE=(0,me.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.color,a=n.clickable,o=n.onDelete,s=n.size,u=n.variant;return[(0,i.Z)({},"& .".concat(QE.avatar),t.avatar),(0,i.Z)({},"& .".concat(QE.avatar),t["avatar".concat((0,ht.Z)(s))]),(0,i.Z)({},"& .".concat(QE.avatar),t["avatarColor".concat((0,ht.Z)(r))]),(0,i.Z)({},"& .".concat(QE.icon),t.icon),(0,i.Z)({},"& .".concat(QE.icon),t["icon".concat((0,ht.Z)(s))]),(0,i.Z)({},"& .".concat(QE.icon),t["iconColor".concat((0,ht.Z)(r))]),(0,i.Z)({},"& .".concat(QE.deleteIcon),t.deleteIcon),(0,i.Z)({},"& .".concat(QE.deleteIcon),t["deleteIcon".concat((0,ht.Z)(s))]),(0,i.Z)({},"& .".concat(QE.deleteIcon),t["deleteIconColor".concat((0,ht.Z)(r))]),(0,i.Z)({},"& .".concat(QE.deleteIcon),t["deleteIconOutlinedColor".concat((0,ht.Z)(r))]),t.root,t["size".concat((0,ht.Z)(s))],t["color".concat((0,ht.Z)(r))],a&&t.clickable,a&&"default"!==r&&t["clickableColor".concat((0,ht.Z)(r),")")],o&&t.deletable,o&&"default"!==r&&t["deletableColor".concat((0,ht.Z)(r))],t[u],"outlined"===u&&t["outlined".concat((0,ht.Z)(r))]]}})((function(e){var t,n=e.theme,r=e.ownerState,a=(0,pe.Fq)(n.palette.text.primary,.26);return(0,le.Z)((t={fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:n.palette.text.primary,backgroundColor:n.palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,i.Z)(t,"&.".concat(QE.disabled),{opacity:n.palette.action.disabledOpacity,pointerEvents:"none"}),(0,i.Z)(t,"& .".concat(QE.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300],fontSize:n.typography.pxToRem(12)}),(0,i.Z)(t,"& .".concat(QE.avatarColorPrimary),{color:n.palette.primary.contrastText,backgroundColor:n.palette.primary.dark}),(0,i.Z)(t,"& .".concat(QE.avatarColorSecondary),{color:n.palette.secondary.contrastText,backgroundColor:n.palette.secondary.dark}),(0,i.Z)(t,"& .".concat(QE.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)}),(0,i.Z)(t,"& .".concat(QE.icon),(0,le.Z)({color:"light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300],marginLeft:5,marginRight:-6},"small"===r.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==r.color&&{color:"inherit"})),(0,i.Z)(t,"& .".concat(QE.deleteIcon),(0,le.Z)({WebkitTapHighlightColor:"transparent",color:a,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,pe.Fq)(a,.4)}},"small"===r.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==r.color&&{color:(0,pe.Fq)(n.palette[r.color].contrastText,.7),"&:hover, &:active":{color:n.palette[r.color].contrastText}})),t),"small"===r.size&&{height:24},"default"!==r.color&&{backgroundColor:n.palette[r.color].main,color:n.palette[r.color].contrastText},r.onDelete&&(0,i.Z)({},"&.".concat(QE.focusVisible),{backgroundColor:(0,pe.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),r.onDelete&&"default"!==r.color&&(0,i.Z)({},"&.".concat(QE.focusVisible),{backgroundColor:n.palette[r.color].dark}))}),(function(e){var t,n=e.theme,r=e.ownerState;return(0,le.Z)({},r.clickable&&(t={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:(0,pe.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}},(0,i.Z)(t,"&.".concat(QE.focusVisible),{backgroundColor:(0,pe.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),(0,i.Z)(t,"&:active",{boxShadow:n.shadows[1]}),t),r.clickable&&"default"!==r.color&&(0,i.Z)({},"&:hover, &.".concat(QE.focusVisible),{backgroundColor:n.palette[r.color].dark}))}),(function(e){var t,n,r=e.theme,a=e.ownerState;return(0,le.Z)({},"outlined"===a.variant&&(t={backgroundColor:"transparent",border:"1px solid ".concat("light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[700])},(0,i.Z)(t,"&.".concat(QE.clickable,":hover"),{backgroundColor:r.palette.action.hover}),(0,i.Z)(t,"&.".concat(QE.focusVisible),{backgroundColor:r.palette.action.focus}),(0,i.Z)(t,"& .".concat(QE.avatar),{marginLeft:4}),(0,i.Z)(t,"& .".concat(QE.avatarSmall),{marginLeft:2}),(0,i.Z)(t,"& .".concat(QE.icon),{marginLeft:4}),(0,i.Z)(t,"& .".concat(QE.iconSmall),{marginLeft:2}),(0,i.Z)(t,"& .".concat(QE.deleteIcon),{marginRight:5}),(0,i.Z)(t,"& .".concat(QE.deleteIconSmall),{marginRight:3}),t),"outlined"===a.variant&&"default"!==a.color&&(n={color:r.palette[a.color].main,border:"1px solid ".concat((0,pe.Fq)(r.palette[a.color].main,.7))},(0,i.Z)(n,"&.".concat(QE.clickable,":hover"),{backgroundColor:(0,pe.Fq)(r.palette[a.color].main,r.palette.action.hoverOpacity)}),(0,i.Z)(n,"&.".concat(QE.focusVisible),{backgroundColor:(0,pe.Fq)(r.palette[a.color].main,r.palette.action.focusOpacity)}),(0,i.Z)(n,"& .".concat(QE.deleteIcon),{color:(0,pe.Fq)(r.palette[a.color].main,.7),"&:hover, &:active":{color:r.palette[a.color].main}}),n))})),eT=(0,me.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(e,t){var n=e.ownerState.size;return[t.label,t["label".concat((0,ht.Z)(n))]]}})((function(e){var t=e.ownerState;return(0,le.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function tT(e){return"Backspace"===e.key||"Delete"===e.key}var nT=t.forwardRef((function(e,n){var r=(0,ve.Z)({props:e,name:"MuiChip"}),i=r.avatar,a=r.className,o=r.clickable,s=r.color,u=void 0===s?"default":s,l=r.component,c=r.deleteIcon,d=r.disabled,h=void 0!==d&&d,f=r.icon,p=r.label,m=r.onClick,v=r.onDelete,g=r.onKeyDown,y=r.onKeyUp,x=r.size,_=void 0===x?"medium":x,b=r.variant,w=void 0===b?"filled":b,S=(0,ue.Z)(r,$E),M=t.useRef(null),E=(0,ge.Z)(M,n),T=function(e){e.stopPropagation(),v&&v(e)},k=!(!1===o||!m)||o,C="small"===_,A=k||v?dt:l||"div",P=(0,le.Z)({},r,{component:A,disabled:h,size:_,color:u,onDelete:!!v,clickable:k,variant:w}),O=function(e){var t=e.classes,n=e.disabled,r=e.size,i=e.color,a=e.onDelete,o=e.clickable,s=e.variant,u={root:["root",s,n&&"disabled","size".concat((0,ht.Z)(r)),"color".concat((0,ht.Z)(i)),o&&"clickable",o&&"clickableColor".concat((0,ht.Z)(i)),a&&"deletable",a&&"deletableColor".concat((0,ht.Z)(i)),"".concat(s).concat((0,ht.Z)(i))],label:["label","label".concat((0,ht.Z)(r))],avatar:["avatar","avatar".concat((0,ht.Z)(r)),"avatarColor".concat((0,ht.Z)(i))],icon:["icon","icon".concat((0,ht.Z)(r)),"iconColor".concat((0,ht.Z)(i))],deleteIcon:["deleteIcon","deleteIcon".concat((0,ht.Z)(r)),"deleteIconColor".concat((0,ht.Z)(i)),"deleteIconOutlinedColor".concat((0,ht.Z)(i))]};return(0,fe.Z)(u,YE,t)}(P),L=A===dt?(0,le.Z)({component:l||"div",focusVisibleClassName:O.focusVisible},v&&{disableRipple:!0}):{},R=null;if(v){var D=(0,he.Z)("default"!==u&&("outlined"===w?O["deleteIconOutlinedColor".concat((0,ht.Z)(u))]:O["deleteIconColor".concat((0,ht.Z)(u))]),C&&O.deleteIconSmall);R=c&&t.isValidElement(c)?t.cloneElement(c,{className:(0,he.Z)(c.props.className,O.deleteIcon,D),onClick:T}):(0,te.jsx)(KE,{className:(0,he.Z)(O.deleteIcon,D),onClick:T})}var I=null;i&&t.isValidElement(i)&&(I=t.cloneElement(i,{className:(0,he.Z)(O.avatar,i.props.className)}));var F=null;return f&&t.isValidElement(f)&&(F=t.cloneElement(f,{className:(0,he.Z)(O.icon,f.props.className)})),(0,te.jsxs)(JE,(0,le.Z)({as:A,className:(0,he.Z)(O.root,a),disabled:!(!k||!h)||void 0,onClick:m,onKeyDown:function(e){e.currentTarget===e.target&&tT(e)&&e.preventDefault(),g&&g(e)},onKeyUp:function(e){e.currentTarget===e.target&&(v&&tT(e)?v(e):"Escape"===e.key&&M.current&&M.current.blur()),y&&y(e)},ref:E,ownerState:P},L,S,{children:[I||F,(0,te.jsx)(eT,{className:(0,he.Z)(O.label),ownerState:P,children:p}),R]}))})),rT=nT,iT=(0,rw.Z)((0,te.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function aT(e){return(0,it.Z)("MuiAutocomplete",e)}var oT,sT,uT,lT,cT=(0,Ue.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),dT=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],hT=(0,me.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.fullWidth,a=n.hasClearIcon,o=n.hasPopupIcon,s=n.inputFocused,u=n.size;return[(0,i.Z)({},"& .".concat(cT.tag),t.tag),(0,i.Z)({},"& .".concat(cT.tag),t["tagSize".concat((0,ht.Z)(u))]),(0,i.Z)({},"& .".concat(cT.inputRoot),t.inputRoot),(0,i.Z)({},"& .".concat(cT.input),t.input),(0,i.Z)({},"& .".concat(cT.input),s&&t.inputFocused),t.root,r&&t.fullWidth,o&&t.hasPopupIcon,a&&t.hasClearIcon]}})((function(e){var t,n,r,a,o,s=e.ownerState;return(0,le.Z)((t={},(0,i.Z)(t,"&.".concat(cT.focused," .").concat(cT.clearIndicator),{visibility:"visible"}),(0,i.Z)(t,"@media (pointer: fine)",(0,i.Z)({},"&:hover .".concat(cT.clearIndicator),{visibility:"visible"})),t),s.fullWidth&&{width:"100%"},(o={},(0,i.Z)(o,"& .".concat(cT.tag),(0,le.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===s.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),(0,i.Z)(o,"& .".concat(cT.inputRoot),(n={flexWrap:"wrap"},(0,i.Z)(n,".".concat(cT.hasPopupIcon,"&, .").concat(cT.hasClearIcon,"&"),{paddingRight:30}),(0,i.Z)(n,".".concat(cT.hasPopupIcon,".").concat(cT.hasClearIcon,"&"),{paddingRight:56}),(0,i.Z)(n,"& .".concat(cT.input),{width:0,minWidth:30}),n)),(0,i.Z)(o,"& .".concat(Gw.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),(0,i.Z)(o,"& .".concat(Gw.root,".").concat(Rw.sizeSmall),(0,i.Z)({},"& .".concat(Gw.input),{padding:"2px 4px 3px 0"})),(0,i.Z)(o,"& .".concat(oS.root),(r={padding:9},(0,i.Z)(r,".".concat(cT.hasPopupIcon,"&, .").concat(cT.hasClearIcon,"&"),{paddingRight:39}),(0,i.Z)(r,".".concat(cT.hasPopupIcon,".").concat(cT.hasClearIcon,"&"),{paddingRight:65}),(0,i.Z)(r,"& .".concat(cT.input),{padding:"7.5px 4px 7.5px 6px"}),(0,i.Z)(r,"& .".concat(cT.endAdornment),{right:9}),r)),(0,i.Z)(o,"& .".concat(oS.root,".").concat(Rw.sizeSmall),(0,i.Z)({padding:6},"& .".concat(cT.input),{padding:"2.5px 4px 2.5px 6px"})),(0,i.Z)(o,"& .".concat(Yw.root),(a={paddingTop:19,paddingLeft:8},(0,i.Z)(a,".".concat(cT.hasPopupIcon,"&, .").concat(cT.hasClearIcon,"&"),{paddingRight:39}),(0,i.Z)(a,".".concat(cT.hasPopupIcon,".").concat(cT.hasClearIcon,"&"),{paddingRight:65}),(0,i.Z)(a,"& .".concat(Yw.input),{padding:"7px 4px"}),(0,i.Z)(a,"& .".concat(cT.endAdornment),{right:9}),a)),(0,i.Z)(o,"& .".concat(Yw.root,".").concat(Rw.sizeSmall),(0,i.Z)({paddingBottom:1},"& .".concat(Yw.input),{padding:"2.5px 4px"})),(0,i.Z)(o,"& .".concat(Rw.hiddenLabel),{paddingTop:8}),(0,i.Z)(o,"& .".concat(cT.input),(0,le.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},s.inputFocused&&{opacity:1})),o))})),fT=(0,me.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(e,t){return t.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),pT=(0,me.ZP)(yt,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(e,t){return t.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),mT=(0,me.ZP)(yt,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(e,t){var n=e.ownerState;return(0,le.Z)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})((function(e){var t=e.ownerState;return(0,le.Z)({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})})),vT=(0,me.ZP)(Zi,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(e,t){var n=e.ownerState;return[(0,i.Z)({},"& .".concat(cT.option),t.option),t.popper,n.disablePortal&&t.popperDisablePortal]}})((function(e){var t=e.theme,n=e.ownerState;return(0,le.Z)({zIndex:t.zIndex.modal},n.disablePortal&&{position:"absolute"})})),gT=(0,me.ZP)(tM,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(e,t){return t.paper}})((function(e){var t=e.theme;return(0,le.Z)({},t.typography.body1,{overflow:"auto"})})),yT=(0,me.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(e,t){return t.loading}})((function(e){return{color:e.theme.palette.text.secondary,padding:"14px 16px"}})),xT=(0,me.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(e,t){return t.noOptions}})((function(e){return{color:e.theme.palette.text.secondary,padding:"14px 16px"}})),_T=(0,me.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(e,t){return t.listbox}})((function(e){var t,n,r=e.theme;return(0,i.Z)({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},"& .".concat(cT.option),(n={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},(0,i.Z)(n,r.breakpoints.up("sm"),{minHeight:"auto"}),(0,i.Z)(n,"&.".concat(cT.focused),{backgroundColor:r.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),(0,i.Z)(n,'&[aria-disabled="true"]',{opacity:r.palette.action.disabledOpacity,pointerEvents:"none"}),(0,i.Z)(n,"&.".concat(cT.focusVisible),{backgroundColor:r.palette.action.focus}),(0,i.Z)(n,'&[aria-selected="true"]',(t={backgroundColor:(0,pe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},(0,i.Z)(t,"&.".concat(cT.focused),{backgroundColor:(0,pe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.palette.action.selected}}),(0,i.Z)(t,"&.".concat(cT.focusVisible),{backgroundColor:(0,pe.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),t)),n))})),bT=(0,me.ZP)(XE,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(e,t){return t.groupLabel}})((function(e){return{backgroundColor:e.theme.palette.background.paper,top:-8}})),wT=(0,me.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(e,t){return t.groupUl}})((0,i.Z)({padding:0},"& .".concat(cT.option),{paddingLeft:24})),ST=t.forwardRef((function(e,n){var r,i,a=(0,ve.Z)({props:e,name:"MuiAutocomplete"}),o=(a.autoComplete,a.autoHighlight,a.autoSelect,a.blurOnSelect,a.ChipProps),s=a.className,u=a.clearIcon,l=void 0===u?oT||(oT=(0,te.jsx)(iT,{fontSize:"small"})):u,c=a.clearOnBlur,d=(void 0===c&&a.freeSolo,a.clearOnEscape,a.clearText),h=void 0===d?"Clear":d,f=a.closeText,p=void 0===f?"Close":f,m=a.componentsProps,v=void 0===m?{}:m,g=a.defaultValue,y=(void 0===g&&a.multiple,a.disableClearable),x=void 0!==y&&y,_=(a.disableCloseOnSelect,a.disabled),b=void 0!==_&&_,w=(a.disabledItemsFocusable,a.disableListWrap,a.disablePortal),S=void 0!==w&&w,M=(a.filterSelectedOptions,a.forcePopupIcon),E=void 0===M?"auto":M,T=a.freeSolo,k=void 0!==T&&T,C=a.fullWidth,A=void 0!==C&&C,P=a.getLimitTagsText,O=void 0===P?function(e){return"+".concat(e)}:P,L=a.getOptionLabel,R=void 0===L?function(e){var t;return null!=(t=e.label)?t:e}:L,D=a.groupBy,I=a.handleHomeEndKeys,F=(void 0===I&&a.freeSolo,a.includeInputInList,a.limitTags),N=void 0===F?-1:F,j=a.ListboxComponent,z=void 0===j?"ul":j,U=a.ListboxProps,B=a.loading,V=void 0!==B&&B,G=a.loadingText,H=void 0===G?"Loading\u2026":G,Z=a.multiple,W=void 0!==Z&&Z,q=a.noOptionsText,X=void 0===q?"No options":q,K=(a.openOnFocus,a.openText),Y=void 0===K?"Open":K,Q=a.PaperComponent,$=void 0===Q?tM:Q,J=a.PopperComponent,ee=void 0===J?Zi:J,ne=a.popupIcon,re=void 0===ne?sT||(sT=(0,te.jsx)(kE,{})):ne,ie=a.renderGroup,ae=a.renderInput,oe=a.renderOption,se=a.renderTags,ce=a.selectOnFocus,de=(void 0===ce&&a.freeSolo,a.size),pe=void 0===de?"medium":de,me=(0,ue.Z)(a,dT),ge=GE((0,le.Z)({},a,{componentName:"Autocomplete"})),ye=ge.getRootProps,xe=ge.getInputProps,_e=ge.getInputLabelProps,be=ge.getPopupIndicatorProps,we=ge.getClearProps,Se=ge.getTagProps,Me=ge.getListboxProps,Ee=ge.getOptionProps,Te=ge.value,ke=ge.dirty,Ce=ge.id,Ae=ge.popupOpen,Pe=ge.focused,Oe=ge.focusedTag,Le=ge.anchorEl,Re=ge.setAnchorEl,De=ge.inputValue,Ie=ge.groupedOptions,Fe=!x&&!b&&ke,Ne=(!k||!0===E)&&!1!==E,je=(0,le.Z)({},a,{disablePortal:S,focused:Pe,fullWidth:A,hasClearIcon:Fe,hasPopupIcon:Ne,inputFocused:-1===Oe,popupOpen:Ae,size:pe}),ze=function(e){var t=e.classes,n=e.disablePortal,r=e.focused,i=e.fullWidth,a=e.hasClearIcon,o=e.hasPopupIcon,s=e.inputFocused,u=e.popupOpen,l=e.size,c={root:["root",r&&"focused",i&&"fullWidth",a&&"hasClearIcon",o&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag","tagSize".concat((0,ht.Z)(l))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",u&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,fe.Z)(c,aT,t)}(je);if(W&&Te.length>0){var Ue=function(e){return(0,le.Z)({className:(0,he.Z)(ze.tag),disabled:b},Se(e))};i=se?se(Te,Ue):Te.map((function(e,t){return(0,te.jsx)(rT,(0,le.Z)({label:R(e),size:pe},Ue({index:t}),o))}))}if(N>-1&&Array.isArray(i)){var Be=i.length-N;!Pe&&Be>0&&(i=i.splice(0,N)).push((0,te.jsx)("span",{className:ze.tag,children:O(Be)},i.length))}var Ve=ie||function(e){return(0,te.jsxs)("li",{children:[(0,te.jsx)(bT,{className:ze.groupLabel,ownerState:je,component:"div",children:e.group}),(0,te.jsx)(wT,{className:ze.groupUl,ownerState:je,children:e.children})]},e.key)},Ge=oe||function(e,t){return(0,te.jsx)("li",(0,le.Z)({},e,{children:R(t)}))},He=function(e,t){var n=Ee({option:e,index:t});return Ge((0,le.Z)({},n,{className:ze.option}),e,{selected:n["aria-selected"],inputValue:De})};return(0,te.jsxs)(t.Fragment,{children:[(0,te.jsx)(hT,(0,le.Z)({ref:n,className:(0,he.Z)(ze.root,s),ownerState:je},ye(me),{children:ae({id:Ce,disabled:b,fullWidth:!0,size:"small"===pe?"small":void 0,InputLabelProps:_e(),InputProps:{ref:Re,className:ze.inputRoot,startAdornment:i,endAdornment:(0,te.jsxs)(fT,{className:ze.endAdornment,ownerState:je,children:[Fe?(0,te.jsx)(pT,(0,le.Z)({},we(),{"aria-label":h,title:h,ownerState:je},v.clearIndicator,{className:(0,he.Z)(ze.clearIndicator,null==(r=v.clearIndicator)?void 0:r.className),children:l})):null,Ne?(0,te.jsx)(mT,(0,le.Z)({},be(),{disabled:b,"aria-label":Ae?p:Y,title:Ae?p:Y,className:(0,he.Z)(ze.popupIndicator),ownerState:je,children:re})):null]})},inputProps:(0,le.Z)({className:(0,he.Z)(ze.input),disabled:b},xe())})})),Ae&&Le?(0,te.jsx)(vT,{as:ee,className:(0,he.Z)(ze.popper),disablePortal:S,style:{width:Le?Le.clientWidth:null},ownerState:je,role:"presentation",anchorEl:Le,open:!0,children:(0,te.jsxs)(gT,{as:$,className:ze.paper,ownerState:je,children:[V&&0===Ie.length?(0,te.jsx)(yT,{className:ze.loading,ownerState:je,children:H}):null,0!==Ie.length||k||V?null:(0,te.jsx)(xT,{className:ze.noOptions,ownerState:je,role:"presentation",onMouseDown:function(e){e.preventDefault()},children:X}),Ie.length>0?(0,te.jsx)(_T,(0,le.Z)({as:z,className:ze.listbox,ownerState:je},Me(),U,{children:Ie.map((function(e,t){return D?Ve({key:e.key,group:e.group,children:e.options.map((function(t,n){return He(t,e.index+n)}))}):He(e,t)}))})):null]})}):null]})})),MT=ST,ET=(0,me.ZP)(Zi)({width:"auto !important"}),TT=(0,me.ZP)(MT)({marginBottom:10,width:165,"& .MuiInputLabel-root":{color:"white"},"&.Mui-focused .MuiInputLabel-root":{color:"white !important"},"& .MuiButtonBase-root":{color:"white"},"& .MuiChip-root":{display:"none"},"& .MuiAutocomplete-inputRoot":{color:"white"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white  !important"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white !important"}}),kT=(0,te.jsx)(NE.Z,{fontSize:"small"}),CT=(0,te.jsx)(jE.Z,{fontSize:"small"});function AT(e){var t=e.allOptions,n=e.name,r=e.filter,i=e.setFilter;return(0,te.jsx)(TT,{multiple:!0,options:t,limitTags:0,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},renderOption:function(e,t,n){var r=n.selected;return(0,te.jsxs)("li",(0,Ub.Z)((0,Ub.Z)({},e),{},{children:[(0,te.jsx)(mw,{icon:kT,checkedIcon:CT,style:{marginRight:8},checked:r}),t]}))},PopperComponent:ET,renderInput:function(e){return(0,te.jsx)(FE,(0,Ub.Z)((0,Ub.Z)({},e),{},{label:n}))},onChange:function(e,t){i(t)},value:r})}function PT(e){var n=e.mode,r=e.setFilteredData,i=(0,t.useState)([]),o=(0,a.Z)(i,2),s=o[0],u=o[1],l=(0,t.useCallback)((function(e){var t={};return s.forEach((function(n){t=(0,Ub.Z)((0,Ub.Z)({},t),n[e])})),Object.keys(t).sort()}),[s]),c=(0,t.useMemo)((function(){return l("neighbourhoods")}),[l]),h=(0,t.useMemo)((function(){return l("categories")}),[l]),p=(0,t.useState)([]),m=(0,a.Z)(p,2),v=m[0],g=m[1],y=(0,t.useState)([]),x=(0,a.Z)(y,2),_=x[0],b=x[1];return(0,t.useEffect)((function(){(0,d.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/chartData.json");case 2:if(200===(t=e.sent).status){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.json();case 7:n=e.sent,u(n);case 9:case"end":return e.stop()}}),e)})))()}),[]),(0,t.useEffect)((function(){if(s.length){var e=s.map((function(e){var t={month:e.month,categories:{},neighbourhoods:{}};return v.length?v.forEach((function(n){e.categories[n]&&(t.categories[n]=e.categories[n])})):t.categories=e.categories,_.length?_.forEach((function(n){e.neighbourhoods[n]&&(t.neighbourhoods[n]=e.neighbourhoods[n])})):t.neighbourhoods=e.neighbourhoods,t}));r(e)}}),[v,_,r,s]),n===uT.Total?null:(0,te.jsxs)(ya,{children:[(0,te.jsx)(Xb,{children:"Filter Data"}),n===uT.Categories&&(0,te.jsx)(AT,{allOptions:h,filter:v,setFilter:g,name:"Categories"}),n===uT.Neighbourhoods&&(0,te.jsx)(AT,{allOptions:c,filter:_,setFilter:b,name:"Neighbourhoods"})]})}function OT(){var e=(0,t.useState)(uT.Total),n=(0,a.Z)(e,2),r=n[0],i=n[1],o=(0,t.useState)([]),s=(0,a.Z)(o,2),u=s[0],l=s[1];return(0,te.jsxs)(pa,{children:[(0,te.jsxs)(ga,{children:[(0,te.jsx)(ba,{mode:r,setMode:i}),(0,te.jsx)(PT,{mode:r,setFilteredData:l})]}),(0,te.jsx)(qb,{mode:r,filteredData:u})]})}function LT(){var e,n=(0,t.useState)(lT.Map),r=(0,a.Z)(n,2),o=r[0],s=r[1];return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(da,{mode:o,setMode:s}),(e={},(0,i.Z)(e,lT.Map,(0,te.jsx)(ie,{})),(0,i.Z)(e,lT.Charts,(0,te.jsx)(OT,{})),e)[o]]})}!function(e){e[e.Total=0]="Total",e[e.Categories=1]="Categories",e[e.Neighbourhoods=2]="Neighbourhoods"}(uT||(uT={})),function(e){e[e.Map=0]="Map",e[e.Charts=1]="Charts"}(lT||(lT={})),r.render((0,te.jsx)(t.StrictMode,{children:(0,te.jsx)(LT,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.fd15a968.js.map