/*! For license information please see main.a6b22f45.js.LICENSE.txt */
(()=>{var e={95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},78677:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ie});var r=n(96567),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function m(e,t){return t.push(e),e}var f=1,g=1,v=0,y=0,_=0,x="";function b(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:f,column:g,length:a,return:""}}function w(e,t){return a(b("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return _=y>0?u(x,--y):0,g--,10===_&&(g=1,f--),_}function M(){return _=y<v?u(x,y++):0,g++,10===_&&(g=1,f++),_}function E(){return u(x,y)}function T(){return y}function C(e,t){return h(x,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function P(e){return f=g=1,v=d(x=e),y=0,[]}function O(e){return x="",e}function R(e){return s(C(y-1,k(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(_=E())&&_<33;)M();return A(e)>2||A(_)>3?"":" "}function D(e,t){for(;--t&&M()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return C(e,T()+(t<6&&32==E()&&32==M()))}function k(e){for(;M();)switch(_){case e:return y;case 34:case 39:34!==e&&39!==e&&k(_);break;case 40:41===e&&k(e);break;case 92:M()}return y}function I(e,t){for(;M()&&e+_!==57&&(e+_!==84||47!==E()););return"/*"+C(t,y-1)+"*"+o(47===e?e:M())}function F(e){for(;!A(E());)M();return C(e,y)}var N="-ms-",z="-moz-",U="-webkit-",j="comm",B="rule",V="decl",G="@keyframes";function H(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case"@import":case V:return e.return=e.return||e.value;case j:return"";case G:return e.return=e.value+"{"+H(e.children,r)+"}";case B:e.value=e.props.join(",")}return d(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e,t){switch(function(e,t){return(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3)}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+z+e+N+e+e;case 6828:case 4268:return U+e+N+e+e;case 6165:return U+e+N+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return U+e+N+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+N+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+N+l(e,"shrink","negative")+e;case 5292:return U+e+N+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+N+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+z+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?q(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+N+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+N+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+N+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+N+e+e}return e}function Z(e){return O($("",null,null,null,[""],e=P(e),0,[0],e))}function $(e,t,n,r,i,a,s,u,h){for(var p=0,f=0,g=s,v=0,y=0,_=0,x=1,b=1,w=1,C=0,A="",P=i,O=a,k=r,N=A;b;)switch(_=C,C=M()){case 40:if(108!=_&&58==N.charCodeAt(g-1)){-1!=c(N+=l(R(C),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:N+=R(C);break;case 9:case 10:case 13:case 32:N+=L(_);break;case 92:N+=D(T()-1,7);continue;case 47:switch(E()){case 42:case 47:m(K(I(M(),T()),t,n),h);break;default:N+="/"}break;case 123*x:u[p++]=d(N)*w;case 125*x:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+f:y>0&&d(N)-g&&m(y>32?Y(N+";",r,n,g-1):Y(l(N," ","")+";",r,n,g-2),h);break;case 59:N+=";";default:if(m(k=X(N,t,n,p,f,i,u,A,P=[],O=[],g),a),123===C)if(0===f)$(N,t,k,k,P,a,g,u,O);else switch(v){case 100:case 109:case 115:$(e,k,k,r&&m(X(e,k,k,0,0,i,u,A,i,P=[],g),O),i,O,g,u,r?P:O);break;default:$(N,k,k,k,[""],O,0,u,O)}}p=f=y=0,x=w=1,A=N="",g=s;break;case 58:g=1+d(N),y=_;default:if(x<1)if(123==C)--x;else if(125==C&&0==x++&&125==S())continue;switch(N+=o(C),C*x){case 38:w=f>0?1:(N+="\f",-1);break;case 44:u[p++]=(d(N)-1)*w,w=1;break;case 64:45===E()&&(N+=R(M())),v=E(),f=g=d(A=N+=F(T())),C++;break;case 45:45===_&&2==d(N)&&(x=0)}}return a}function X(e,t,n,r,o,a,c,u,d,m,f){for(var g=o-1,v=0===o?a:[""],y=p(v),_=0,x=0,w=0;_<r;++_)for(var S=0,M=h(e,g+1,g=i(x=c[_])),E=e;S<y;++S)(E=s(x>0?v[S]+" "+M:l(M,/&\f/g,v[S])))&&(d[w++]=E);return b(e,t,n,0===o?B:u,d,m,f)}function K(e,t,n){return b(e,t,n,j,o(_),h(e,2,-2),0)}function Y(e,t,n,r){return b(e,t,n,V,h(e,0,r),h(e,r+1,-1),r)}var Q=function(e,t,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(t[n]=1),!A(i);)M();return C(e,y)},J=function(e,t){return O(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===E()&&(t[n]=1),e[n]+=Q(y-1,t,n);break;case 2:e[n]+=R(r);break;case 4:if(44===r){e[++n]=58===E()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=M());return e}(P(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],o=J(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=q(e.value,e.length);break;case G:return H([w(e,{value:l(e.value,"@","@"+U)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([w(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([w(e,{props:[l(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,N+"input-$1")]})],r)}return""}))}}];const ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,a,s={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,h=[W,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([te,ne].concat(i,h));a=function(e,t,n,r){c=n,H(Z(e?e+"{"+t.styles+"}":t.styles),d),r&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new r.m({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return m.sheet.hydrate(l),m}},50620:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},91672:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,w:()=>a});var r=n(72791),i=n(78677),o=(n(84804),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));o.Provider;var a=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))},s=(0,r.createContext)({})},84804:(e,t,n)=>{"use strict";n.d(t,{O:()=>f});const r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};var i=n(63840),o=n(50620),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,o.Z)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===i.Z[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":c(a)&&(r+=u(o)+":"+h(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=d(e,t,a);switch(o){case"animation":case"animationName":r+=u(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)c(a[l])&&(r+=u(o)+":"+h(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=p,o=n(e);return p=i,d(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var p,m=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,o="";p=void 0;var a=e[0];null==a||void 0===a.raw?(i=!1,o+=d(n,t,a)):o+=a[0];for(var s=1;s<e.length;s++)o+=d(n,t,e[s]),i&&(o+=a[s]);m.lastIndex=0;for(var l,c="";null!==(l=m.exec(o));)c+="-"+l[1];return{name:r(o)+c,styles:o,next:p}}},96567:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}()},63840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},95438:(e,t,n)=>{"use strict";n.d(t,{f:()=>r,M:()=>i});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}}},97489:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17668),t),i(n(63014),t),i(n(71350),t),i(n(22939),t),i(n(14650),t),i(n(47633),t)},26309:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67538),t),i(n(22939),t),i(n(38794),t),i(n(72885),t),i(n(6705),t),i(n(73917),t),i(n(71872),t),i(n(53693),t),i(n(47468),t),i(n(23365),t),i(n(68891),t),i(n(79829),t),i(n(91173),t),i(n(51566),t),i(n(44987),t),i(n(47633),t),i(n(68374),t),i(n(84727),t)},67538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorUtils=void 0;const r=n(15739),i=n(534),o=n(55471),a=255,s=new i.Color;!function(e){e.getHexFromRgba=function(e,t,n,i){return r.assert(i>=0&&i<=1),a-Math.floor(i*a)<<24^e*a<<16^t*a<<8^n*a<<0},e.getHexFromRgb=function(e,t,n){return r.assert(e>=0&&e<=1),r.assert(t>=0&&t<=1),r.assert(n>=0&&n<=1),e*a<<16^t*a<<8^n*a<<0},e.getHexFromHsl=function(e,t,n){return r.assert(e>=0&&e<=1),r.assert(t>=0&&t<=1),r.assert(n>=0&&n<=1),s.setHSL(e,t,n).getHex()},e.getRgbaFromHex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.RGBA;return r.assert(0===(0&e),"Wrong hex format"),t.r=(e>>16&a)/a,t.g=(e>>8&a)/a,t.b=(e>>0&a)/a,t.a=(a-(e>>24&a))/a,t},e.hasAlphaInHex=function(e){return r.assert(0===(0&e),"Wrong hex format"),e>>24!==0},e.getAlphaFromHex=function(e){return r.assert(0===(0&e),"Wrong hex format"),(a-(e>>24)&a)/a},e.removeAlphaFromHex=function(e){return r.assert(0===(0&e),"Wrong hex format"),16777215&e}}(t.ColorUtils||(t.ColorUtils={}))},51566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scaleHeight=t.getFeatureText=t.getFeatureName=t.getFeatureId=t.getProjectionName=t.getProjection=t.GeometryType=t.getArrayConstructor=void 0;const r=n(31201),i=n(22939),o=n(51638),a=n(38794);function s(e,t,n,r,i){var o;let a;if(void 0===t&&(t="name"),n){const n=e.lookup(`${t}:short`);if("string"===typeof n&&n.length>0)return n}if(r){const t=e.lookup("iso_code");if("string"===typeof t&&t.length>0)return t}if(void 0!==i)for(const s of i)if(a=null!==(o=e.lookup(`${t}:${s}`))&&void 0!==o?o:e.lookup(`${t}_${s}`),"string"===typeof a&&a.length>0)return a;if(a=e.lookup(t),"string"===typeof a)return a}t.getArrayConstructor=function(e){switch(e){case"float":return Float32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array}},function(e){e[e.Unspecified=0]="Unspecified",e[e.Point=1]="Point",e[e.Line=2]="Line",e[e.SolidLine=3]="SolidLine",e[e.Text=4]="Text",e[e.TextPath=5]="TextPath",e[e.ExtrudedLine=6]="ExtrudedLine",e[e.Polygon=7]="Polygon",e[e.ExtrudedPolygon=8]="ExtrudedPolygon",e[e.Object3D=9]="Object3D",e[e.Other=1e3]="Other"}(t.GeometryType||(t.GeometryType={})),t.getProjection=function(e){switch(e){case"mercator":return r.mercatorProjection;case"webMercator":return r.webMercatorProjection;case"sphere":return r.sphereProjection;case"normalizedEquirectangular":return r.normalizedEquirectangularProjection;case"equirectangular":return r.equirectangularProjection;default:throw new Error(`Unknown projection ${e}`)}},t.getProjectionName=function(e){if(e===r.mercatorProjection)return"mercator";if(e===r.webMercatorProjection)return"webMercator";if(e===r.sphereProjection)return"sphere";if(e===r.normalizedEquirectangularProjection)return"normalizedEquirectangular";if(e===r.equirectangularProjection)return"equirectangular";throw new Error("Unknown projection")},t.getFeatureId=function(e){if(void 0===e)return 0;if("string"===typeof e||"number"===typeof e)return e;if(e.hasOwnProperty("$id")){const t=e.$id;if("string"===typeof t||"number"===typeof t)return t}return 0},t.getFeatureName=s,t.getFeatureText=function(e,t,n){let r,l;const c=e instanceof i.Env?e:e.env;let u="name";if(a.isTextTechnique(t)||a.isPoiTechnique(t)||a.isLineMarkerTechnique(t)){if(void 0!==t.text)return o.evaluateTechniqueAttr(e,t.text);if(void 0!==t.label&&(u=o.evaluateTechniqueAttr(e,t.label),"string"!==typeof u))return;r=t.useAbbreviation,l=t.useIsoCode}return s(c,u,r,l,n)},t.scaleHeight=function(e,t,n){return!o.evaluateTechniqueAttr(e,t.constantHeight,n<12)}},18284:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapEnv=t.Env=void 0;class n{static isEnv(e){return e instanceof n}lookup(e){}unmap(){return{}}}t.Env=n;t.MapEnv=class extends n{constructor(e,t){super(),this.entries=e,this.parent=t}lookup(e){if(this.entries.hasOwnProperty(e)){const t=this.entries[e];if(void 0!==t)return t}return this.parent?this.parent.lookup(e):void 0}unmap(){const e=this.parent?this.parent.unmap():{};for(const t in this.entries)this.entries.hasOwnProperty(t)&&(e[t]=this.entries[t]);return e}}},22939:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolateExpr=t.StepExpr=t.CaseExpr=t.MatchExpr=t.CallExpr=t.HasAttributeExpr=t.ObjectLiteralExpr=t.StringLiteralExpr=t.NumberLiteralExpr=t.BooleanLiteralExpr=t.NullLiteralExpr=t.LiteralExpr=t.VarExpr=t.Expr=t.ExprScope=t.isJsonExpr=t.ExprDependencies=void 0;const o=n(534),a=n(37087),s=n(72037),l=n(9375),c=n(53693),u=n(79145),h=n(55471);i(n(18284),t);const d=new a.ExprEvaluator,p=new s.ExprInstantiator;class m{constructor(){this.properties=new Set}}t.ExprDependencies=m;class f{static of(e){const t=new m;return e.accept(this.instance,t),t}visitNullLiteralExpr(e,t){}visitBooleanLiteralExpr(e,t){}visitNumberLiteralExpr(e,t){}visitStringLiteralExpr(e,t){}visitObjectLiteralExpr(e,t){}visitVarExpr(e,t){t.properties.add(e.name)}visitHasAttributeExpr(e,t){t.properties.add(e.name)}visitCallExpr(e,t){switch(e.args.forEach((e=>e.accept(this,t))),e.op){case"dynamic-properties":t.volatile=!0;break;case"feature-state":t.featureState=!0,t.properties.add("$state"),t.properties.add("$id");break;case"id":t.properties.add("$id");break;case"zoom":case"world-ppi-scale":case"world-discrete-ppi-scale":t.properties.add("$zoom");break;case"geometry-type":t.properties.add("$geometryType")}}visitMatchExpr(e,t){e.value.accept(this,t),e.branches.forEach((e=>{let[n,r]=e;return r.accept(this,t)})),e.fallback.accept(this,t)}visitCaseExpr(e,t){e.branches.forEach((e=>{let[n,r]=e;n.accept(this,t),r.accept(this,t)})),e.fallback.accept(this,t)}visitStepExpr(e,t){e.input.accept(this,t),e.defaultValue.accept(this,t),e.stops.forEach((e=>{let[n,r]=e;return r.accept(this,t)}))}visitInterpolateExpr(e,t){e.input.accept(this,t),e.stops.forEach((e=>{let[n,r]=e;return r.accept(this,t)}))}}function g(e){return Array.isArray(e)&&e.length>0&&"string"===typeof e[0]}var v;f.instance=new f,t.isJsonExpr=g,function(e){e[e.Value=0]="Value",e[e.Condition=1]="Condition",e[e.Dynamic=2]="Dynamic"}(v=t.ExprScope||(t.ExprScope={}));class y{static isExpr(e){return e instanceof y}static parse(e){return new l.ExprParser(e).parse()}static fromJSON(e,t,n){return D(e,void 0!==t?{definitions:t,lockedNames:new Set,cache:null!==n&&void 0!==n?n:new Map}:void 0)}evaluate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.Value,n=arguments.length>2?arguments[2]:void 0;return this.accept(d,new a.ExprEvaluatorContext(d,e,t,n))}instantiate(e){return this.accept(p,e)}dependencies(){return this.m_dependencies||(this.m_dependencies=f.of(this)),this.m_dependencies}intern(e){return e.add(this)}toJSON(){return(new L).serialize(this)}isDynamic(){return void 0===this.m_isDynamic&&(this.m_isDynamic=this.exprIsDynamic()),this.m_isDynamic}}t.Expr=y;class _ extends y{constructor(e){super(),this.name=e}accept(e,t){return e.visitVarExpr(this,t)}exprIsDynamic(){return!1}}t.VarExpr=_;class x extends y{static fromValue(e){switch(typeof e){case"boolean":return new w(e);case"number":return new S(e);case"string":return new M(e);case"object":return null===e?b.instance:new E(e);default:throw new Error(`failed to create a literal from '${e}'`)}}exprIsDynamic(){return!1}}t.LiteralExpr=x;class b extends x{constructor(){super(),this.value=null}accept(e,t){return e.visitNullLiteralExpr(this,t)}exprIsDynamic(){return!1}}t.NullLiteralExpr=b,b.instance=new b;class w extends x{constructor(e){super(),this.value=e}accept(e,t){return e.visitBooleanLiteralExpr(this,t)}}t.BooleanLiteralExpr=w;class S extends x{constructor(e){super(),this.value=e}accept(e,t){return e.visitNumberLiteralExpr(this,t)}}t.NumberLiteralExpr=S;class M extends x{constructor(e){super(),this.value=e}get promotedValue(){var e,t,n;return void 0===this.m_promotedValue&&(this.m_promotedValue=null!==(t=null!==(e=h.RGBA.parse(this.value))&&void 0!==e?e:u.Pixels.parse(this.value))&&void 0!==t?t:null),null!==(n=this.m_promotedValue)&&void 0!==n?n:void 0}accept(e,t){return e.visitStringLiteralExpr(this,t)}}t.StringLiteralExpr=M;class E extends x{constructor(e){super(),this.value=e}get isArrayLiteral(){return Array.isArray(this.value)}accept(e,t){return e.visitObjectLiteralExpr(this,t)}}t.ObjectLiteralExpr=E;class T extends y{constructor(e){super(),this.name=e}accept(e,t){return e.visitHasAttributeExpr(this,t)}exprIsDynamic(){return!1}}t.HasAttributeExpr=T;class C extends y{constructor(e,t){super(),this.op=e,this.args=t}get children(){return this.args}accept(e,t){return e.visitCallExpr(this,t)}exprIsDynamic(){var e;const t=null!==(e=this.descriptor)&&void 0!==e?e:a.ExprEvaluator.getOperator(this.op);return!!(t&&t.isDynamicOperator&&t.isDynamicOperator(this))||this.args.some((e=>e.isDynamic()))}}t.CallExpr=C;class A extends y{constructor(e,t,n){super(),this.value=e,this.branches=t,this.fallback=n}static isValidMatchLabel(e){switch(typeof e){case"number":case"string":return!0;case"object":if(!Array.isArray(e)||0===e.length)return!1;const t=typeof e[0];return("number"===t||"string"===t)&&e.every((e=>typeof e===t));default:return!1}}accept(e,t){return e.visitMatchExpr(this,t)}exprIsDynamic(){return this.value.isDynamic()||this.branches.some((e=>{let[t,n]=e;return n.isDynamic()}))||this.fallback.isDynamic()}}t.MatchExpr=A;class P extends y{constructor(e,t){super(),this.branches=e,this.fallback=t}accept(e,t){return e.visitCaseExpr(this,t)}exprIsDynamic(){return this.branches.some((e=>{let[t,n]=e;return t.isDynamic()||n.isDynamic()}))||this.fallback.isDynamic()}}t.CaseExpr=P;class O extends y{constructor(e,t,n){super(),this.input=e,this.defaultValue=t,this.stops=n}accept(e,t){return e.visitStepExpr(this,t)}exprIsDynamic(){return this.input.isDynamic()||this.defaultValue.isDynamic()||this.stops.some((e=>{let[t,n]=e;return n.isDynamic()}))}}t.StepExpr=O;class R extends y{constructor(e,t,n){super(),this.mode=e,this.input=t,this.stops=n}accept(e,t){return e.visitInterpolateExpr(this,t)}exprIsDynamic(){return this.input.isDynamic()||this.stops.some((e=>{let[t,n]=e;return n.isDynamic()}))}}t.InterpolateExpr=R;class L{serialize(e){return e.accept(this,void 0)}visitNullLiteralExpr(e,t){return null}visitBooleanLiteralExpr(e,t){return e.value}visitNumberLiteralExpr(e,t){return e.value}visitStringLiteralExpr(e,t){return e.value}visitObjectLiteralExpr(e,t){return e.value instanceof o.Vector2?["make-vector",e.value.x,e.value.y]:e.value instanceof o.Vector3?["make-vector",e.value.x,e.value.y,e.value.z]:e.value instanceof o.Vector4?["make-vector",e.value.x,e.value.y,e.value.z,e.value.w]:["literal",e.value]}visitVarExpr(e,t){return["get",e.name]}visitHasAttributeExpr(e,t){return["has",e.name]}visitCallExpr(e,t){return[e.op,...e.args.map((e=>this.serialize(e)))]}visitMatchExpr(e,t){const n=[];for(const[r,i]of e.branches)n.push(r,this.serialize(i));return["match",this.serialize(e.value),...n,this.serialize(e.fallback)]}visitCaseExpr(e,t){const n=[];for(const[r,i]of e.branches)n.push(this.serialize(r),this.serialize(i));return["case",...n,this.serialize(e.fallback)]}visitStepExpr(e,t){const n=["step"];return n.push(this.serialize(e.input)),n.push(this.serialize(e.defaultValue)),e.stops.forEach((e=>{let[t,r]=e;n.push(t),n.push(this.serialize(r))})),n}visitInterpolateExpr(e,t){const n=["interpolate",e.mode];return n.push(this.serialize(e.input)),e.stops.forEach((e=>{let[t,r]=e;n.push(t),n.push(this.serialize(r))})),n}}function D(e,t){if(Array.isArray(e))return k(e,t);if(null===e)return b.instance;if("boolean"===typeof e)return new w(e);if("number"===typeof e)return new S(e);if("string"===typeof e)return new M(e);throw new Error(`failed to create expression from: ${JSON.stringify(e)}`)}function k(e,t){const n=e[0];if("string"!==typeof n)throw new Error("expected a builtin function name");switch(n){case"!has":case"!in":return new C("!",[k([n.slice(1),...e.slice(1)])]);case"ref":return function(e,t){if("string"!==typeof e[1])throw new Error("expected the name of an attribute");if(void 0===t)throw new Error("ref used with no definitions");const n=e[1];if(t.lockedNames.has(n))throw new Error(`circular referene to '${n}'`);if(!(n in t.definitions))throw new Error(`definition '${n}' not found`);const r=t.cache.get(n);if(void 0!==r)return r;let i,o=t.definitions[n];if(c.isInterpolatedPropertyDefinition(o.value))return y.fromJSON(c.interpolatedPropertyDefinitionToJsonExpr(o.value));if(!g(o.value))return y.fromJSON(o.value);o=o.value;if(!g(o))throw new Error(`unsupported definition ${n}`);t.lockedNames.add(n);try{i=D(o,t)}finally{t.lockedNames.delete(n)}return t.cache.set(n,i),i}(e,t);case"get":return function(e,t){if(void 0!==e[2])return I("get",e,t);const n=e[1];if("string"!==typeof n)throw new Error("expected the name of an attribute");return new _(n)}(e,t);case"has":return function(e,t){if(void 0!==e[2])return I("has",e,t);const n=e[1];if("string"!==typeof n)throw new Error("expected the name of an attribute");return new T(n)}(e,t);case"literal":return function(e){const t=e[1];if(null===t||"object"!==typeof t)throw new Error("expected an object or array literal");return new E(t)}(e);case"match":return function(e,t){if(e.length<4)throw new Error("not enough arguments");if(!(e.length%2))throw new Error("fallback is missing in 'match' expression");const n=D(e[1],t),r=[];for(let o=2;o<e.length-1;o+=2){const n=e[o];if(!A.isValidMatchLabel(n))throw new Error(`'${JSON.stringify(n)}' is not a valid label for 'match'`);const i=D(e[o+1],t);r.push([n,i])}const i=D(e[e.length-1],t);return new A(n,r,i)}(e,t);case"case":return function(e,t){if(e.length<3)throw new Error("not enough arguments");if(e.length%2)throw new Error("fallback is missing in 'case' expression");const n=[];for(let i=1;i<e.length-1;i+=2){const r=D(e[i],t),o=D(e[i+1],t);n.push([r,o])}const r=D(e[e.length-1],t);return new P(n,r)}(e,t);case"interpolate":return function(e,t){const n=e[1];if(!function(e){if(!Array.isArray(e))return!1;switch(e[0]){case"discrete":case"linear":case"cubic":case"exponential":return!0;default:return!1}}(n))throw new Error("expected an interpolation type");if("exponential"===n[0]&&"number"!==typeof n[1])throw new Error("expected the base of the exponential interpolation");const r=void 0!==e[2]?D(e[2],t):void 0;if(!y.isExpr(r))throw new Error("expected the input of the interpolation");if(3===e.length||!(e.length%2))throw new Error("invalid number of samples");const i=[];for(let o=3;o<e.length-1;o+=2){const n=e[o],r=D(e[o+1],t);i.push([n,r])}return new R(n,r,i)}(e,t);case"step":return function(e,t){if(e.length<2)throw new Error("expected the input of the 'step' operator");if(e.length<3||!(e.length%2))throw new Error("not enough arguments");const n=D(e[1],t),r=D(e[2],t),i=[];for(let o=3;o<e.length;o+=2){const n=e[o],r=D(e[o+1],t);i.push([n,r])}return new O(n,r,i)}(e,t);default:return I(n,e,t)}}function I(e,t,n){return new C(e,t.slice(1).map((e=>D(e,n))))}},37087:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExprEvaluator=t.ExprEvaluatorContext=void 0;const r=n(534),i=n(22939),o=n(59944),a=n(99880),s=n(98502),l=n(25074),c=n(80303),u=n(28778),h=n(14982),d=n(70628),p=n(20120),m=n(80354),f=n(33668),g=n(43433),v=n(70081),y=n(79145),_=n(55471),x=new Map;function b(e,t){var n,r,o;if(t instanceof i.StringLiteralExpr)return null!==(n=t.promotedValue)&&void 0!==n?n:t.value;const a=e.evaluate(t);return"string"===typeof a&&null!==(o=null!==(r=_.RGBA.parse(a))&&void 0!==r?r:y.Pixels.parse(a))&&void 0!==o?o:a}t.ExprEvaluatorContext=class{constructor(e,t,n,r){this.evaluator=e,this.env=t,this.scope=n,this.cache=r}evaluate(e){var t,n;if(void 0===e)throw new Error("Failed to evaluate expression");const r=null===(t=this.cache)||void 0===t?void 0:t.get(e);if(void 0!==r)return r;const i=e.accept(this.evaluator,this);return null===(n=this.cache)||void 0===n||n.set(e,i),i}wrapValue(e){return i.Expr.isExpr(e)?e:i.LiteralExpr.fromValue(e)}};class w{static defineOperator(e,t){x.set(e,t)}static defineOperators(e){Object.getOwnPropertyNames(e).forEach((t=>{this.defineOperator(t,e[t])}))}static getOperator(e){return x.get(e)}visitVarExpr(e,t){const n=t.env.lookup(e.name);return void 0!==n?n:null}visitNullLiteralExpr(e,t){return null}visitBooleanLiteralExpr(e,t){return e.value}visitNumberLiteralExpr(e,t){return e.value}visitStringLiteralExpr(e,t){return e.value}visitObjectLiteralExpr(e,t){return e.value}visitHasAttributeExpr(e,t){return void 0!==t.env.lookup(e.name)}visitMatchExpr(e,t){const n=t.evaluate(e.value);for(const[r,i]of e.branches){if(Array.isArray(r)&&r.includes(n))return t.evaluate(i);if(r===n)return t.evaluate(i)}return t.evaluate(e.fallback)}visitCaseExpr(e,t){if(t.scope===i.ExprScope.Value){const n=e.branches.findIndex((e=>{let[t,n]=e;return t.isDynamic()}));if(-1!==n){let r;for(let a=0;a<e.branches.length;++a){const[o,s]=e.branches[a],l=t.evaluate(o),c=t.evaluate(s);if(a<n&&Boolean(l))return c;if((i.Expr.isExpr(l)||Boolean(l))&&(void 0===r&&(r=[]),null===r||void 0===r||r.push([t.wrapValue(l),t.wrapValue(c)]),!i.Expr.isExpr(l)&&Boolean(l)))return new i.CaseExpr(r,i.LiteralExpr.fromValue(null))}const o=t.evaluate(e.fallback);return void 0===r?o:new i.CaseExpr(r,t.wrapValue(o))}}for(const[n,r]of e.branches)if(t.evaluate(n))return t.evaluate(r);return t.evaluate(e.fallback)}visitCallExpr(e,t){var n;const r=null!==(n=e.descriptor)&&void 0!==n?n:x.get(e.op);if(r){let n;if(e.descriptor=r,t.scope===i.ExprScope.Value&&e.isDynamic()){if(e.descriptor.partialEvaluate)return e.descriptor.partialEvaluate(t,e);const r=e.args.map((e=>t.wrapValue(t.evaluate(e))));if(r.every(((t,n)=>t===e.args[n])))return e;n=new i.CallExpr(e.op,r)}else n=r.call(t,e);return n}throw new Error(`undefined operator '${e.op}'`)}visitStepExpr(e,t){if(t.scope===i.ExprScope.Value){const n=t.evaluate(e.input),r=t.evaluate(e.defaultValue);return new i.StepExpr(t.wrapValue(n),t.wrapValue(r),e.stops.map((e=>{let[n,r]=e;const i=t.evaluate(r);return[n,t.wrapValue(i)]})))}{const n=t.evaluate(e.input);if("number"!==typeof n)throw new Error(`input '${n}' must be a number`);if(n<e.stops[0][0])return t.evaluate(e.defaultValue);let r=e.stops.findIndex((e=>e[0]>n));return-1===r&&(r=e.stops.length),t.evaluate(e.stops[r-1][1])}}visitInterpolateExpr(e,t){if(t.scope===i.ExprScope.Value){const n=t.evaluate(e.input);return new i.InterpolateExpr(e.mode,t.wrapValue(n),e.stops.map((e=>{let[n,r]=e;const i=t.evaluate(r);return[n,t.wrapValue(i)]})))}{const n=t.evaluate(e.input);if("number"!==typeof n)throw new Error("input must be a number");if("cubic"===e.mode[0])return function(e,t,n){if(n<t.stops[0][0])return b(e,t.stops[0][1]);if(n>=t.stops[t.stops.length-1][0])return b(e,t.stops[t.stops.length-1][1]);const i=t.stops.findIndex((e=>e[0]>n)),o=Math.max(0,i-1),a=0===o?i:o-1,s=i<t.stops.length-1?i+1:i-1,l=t.stops[a][0],c=t.stops[o][0],u=t.stops[i][0],h=.5*(u-c),d=h/(c-l),p=h/(t.stops[s][0]-u),m=(n-c)/(u-c),f=m*m,g=f*m,v=-d*g+2*d*f-d*m,x=(1+d)*g+(-1.5-2*d)*f+(-.5+d)*m+1,w=(-1-p)*g+(1.5+p)*f+.5*m,S=p*g-p*f,M=b(e,t.stops[a][1]),E=b(e,t.stops[o][1]),T=b(e,t.stops[i][1]),C=b(e,t.stops[s][1]);if("number"===typeof M&&"number"===typeof E&&"number"===typeof T&&"number"===typeof C)return v*M+x*E+w*T+S*C;if(M instanceof _.RGBA&&E instanceof _.RGBA&&T instanceof _.RGBA&&C instanceof _.RGBA)return new _.RGBA(r.MathUtils.clamp(v*M.r+x*E.r+w*T.r+S*C.r,0,1),r.MathUtils.clamp(v*M.g+x*E.g+w*T.g+S*C.g,0,1),r.MathUtils.clamp(v*M.b+x*E.b+w*T.b+S*C.b,0,1),r.MathUtils.clamp(v*M.a+x*E.a+w*T.a+S*C.a,0,1));if(M instanceof y.Pixels&&E instanceof y.Pixels&&T instanceof y.Pixels&&C instanceof y.Pixels)return new y.Pixels(v*M.value+x*E.value+w*T.value+S*C.value);if(M instanceof r.Color&&E instanceof r.Color&&T instanceof r.Color&&C instanceof r.Color)return new r.Color(v*M.r+x*E.r+w*T.r+S*C.r,v*M.g+x*E.g+w*T.g+S*C.g,v*M.b+x*E.b+w*T.b+S*C.b);if(M instanceof r.Vector2&&E instanceof r.Vector2&&T instanceof r.Vector2&&C instanceof r.Vector2)return new r.Vector2(v*M.x+x*E.x+w*T.x+S*C.x,v*M.y+x*E.y+w*T.y+S*C.y);if(M instanceof r.Vector3&&E instanceof r.Vector3&&T instanceof r.Vector3&&C instanceof r.Vector3)return new r.Vector3(v*M.x+x*E.x+w*T.x+S*C.x,v*M.y+x*E.y+w*T.y+S*C.y,v*M.z+x*E.z+w*T.z+S*C.z);if(M instanceof r.Vector4&&E instanceof r.Vector4&&T instanceof r.Vector4&&C instanceof r.Vector4)return new r.Vector4(v*M.x+x*E.x+w*T.x+S*C.x,v*M.y+x*E.y+w*T.y+S*C.y,v*M.z+x*E.z+w*T.z+S*C.z,v*M.w+x*E.w+w*T.w+S*C.w);if(Array.isArray(M)&&Array.isArray(E)&&Array.isArray(T)&&Array.isArray(C)){const e=M.length,t=[];for(let n=0;n<e;++n)t[n]=v*M[n]+x*E[n]+w*T[n]+S*C[n];return t}throw new Error("failed to interpolate values")}(t,e,n);const i=e.stops.findIndex((e=>e[0]>n));if(-1===i)return t.evaluate(e.stops[e.stops.length-1][1]);if(0===i)return t.evaluate(e.stops[0][1]);const[o,a]=e.stops[i],[s,l]=e.stops[i-1],c=b(t,l);let u=0;switch(e.mode[0]){case"discrete":return c;case"linear":u=(n-s)/(o-s);break;case"exponential":{const t=e.mode[1];u=1===t?(n-s)/(o-s):(Math.pow(t,n-s)-1)/(Math.pow(t,o-s)-1);break}default:throw new Error(`interpolation mode ${JSON.stringify(e.mode)} is not supported`)}const h=b(t,a);if("number"===typeof c&&"number"===typeof h)return r.MathUtils.lerp(c,h,u);if(c instanceof _.RGBA&&h instanceof _.RGBA)return c.clone().lerp(h,u);if(c instanceof y.Pixels&&h instanceof y.Pixels)return new y.Pixels(r.MathUtils.lerp(c.value,h.value,u));if(c instanceof r.Color&&h instanceof r.Color)return c.clone().lerp(h,u);if(c instanceof r.Vector2&&h instanceof r.Vector2)return c.clone().lerp(h,u);if(c instanceof r.Vector3&&h instanceof r.Vector3)return c.clone().lerp(h,u);if(c instanceof r.Vector4&&h instanceof r.Vector4)return c.clone().lerp(h,u);if(Array.isArray(c)&&Array.isArray(h)&&c.length===h.length)return c.map(((e,t)=>r.MathUtils.lerp(e,h[t],u)));throw new Error(`todo: mix(${JSON.stringify(c)}, ${JSON.stringify(h)}, ${u})`)}}}t.ExprEvaluator=w,w.defineOperators(a.CastOperators),w.defineOperators(l.ComparisonOperators),w.defineOperators(d.MathOperators),w.defineOperators(f.StringOperators),w.defineOperators(s.ColorOperators),w.defineOperators(g.TypeOperators),w.defineOperators(p.MiscOperators),w.defineOperators(u.FlowOperators),w.defineOperators(o.ArrayOperators),w.defineOperators(m.ObjectOperators),w.defineOperators(c.FeatureOperators),w.defineOperators(h.MapOperators),w.defineOperators(v.VectorOperators)},72037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExprInstantiator=void 0;const r=n(18284),i=n(22939),o=new r.Env;t.ExprInstantiator=class{visitNullLiteralExpr(e,t){return e}visitBooleanLiteralExpr(e,t){return e}visitNumberLiteralExpr(e,t){return e}visitStringLiteralExpr(e,t){return e}visitObjectLiteralExpr(e,t){return e}visitVarExpr(e,t){if(t.preserve&&t.preserve.has(e.name))return e;const n=t.env.lookup(e.name);return i.LiteralExpr.fromValue(void 0!==n?n:null)}visitHasAttributeExpr(e,t){if(t.preserve&&t.preserve.has(e.name))return e;const n=void 0!==t.env.lookup(e.name);return i.LiteralExpr.fromValue(n)}visitCallExpr(e,t){const n=e.args.map((e=>e.accept(this,t)));return n.some(((t,n)=>t!==e.args[n]))?new i.CallExpr(e.op,n):e}visitMatchExpr(e,t){const n=e.value.accept(this,t);if(n instanceof i.LiteralExpr){const r=n.value;for(const[n,i]of e.branches){if(Array.isArray(n)&&n.includes(r))return i.accept(this,t);if(n===r)return i.accept(this,t)}return e.fallback.accept(this,t)}let r=e.value!==n;const o=e.branches.map((e=>{let[n,i]=e;const o=i.accept(this,t);return o!==i&&(r=!0),[n,o]})),a=e.fallback.accept(this,t);return a!==e.fallback&&(r=!0),r?new i.MatchExpr(n,o,a):e}visitCaseExpr(e,t){const n=[];let r=!1;for(const[s,l]of e.branches){const e=s.accept(this,t),a=e.dependencies();if(s.isDynamic()||0!==a.properties.size)e!==s&&(r=!0),n.push([e,l]);else if(Boolean(e.evaluate(o,i.ExprScope.Condition)))return l.accept(this,t)}if(0===n.length)return e.fallback.accept(this,t);n.length!==e.branches.length&&(r=!0),n.forEach((e=>{const n=e[1].accept(this,t);n!==e[1]&&(r=!0),e[1]=n}));const a=e.fallback.accept(this,t);return a!==e.fallback&&(r=!0),r?new i.CaseExpr(n,a):e}visitStepExpr(e,t){const n=e.input.accept(this,t),r=e.defaultValue.accept(this,t),o=e.stops.map((e=>{let[n,r]=e;return[n,r.accept(this,t)]}));return new i.StepExpr(n,r,o)}visitInterpolateExpr(e,t){const n=e.input.accept(this,t),r=e.stops.map((e=>{let[n,r]=e;return[n,r.accept(this,t)]}));return new i.InterpolateExpr(e.mode,n,r)}}},9375:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExprParser=void 0;const r=n(22939);var i,o;function a(e){switch(e){case i.Tab:case i.Lf:case i.Cr:case i.Space:return!0;default:return!1}}function s(e){return e>=i._0&&e<=i._9}function l(e){return e>=i.a&&e<=i.z||e>=i.A&&e<=i.Z}function c(e){return function(e){return l(e)||s(e)}(e)||e===i._||e===i.Dollar||e===i.Dot||e===i.LBracket||e===i.RBracket}function u(e){switch(e){case o.Eof:return"eof";case o.Error:return"error";case o.Identifier:return"identifier";case o.Number:return"number";case o.String:return"string";case o.Comma:return",";case o.LParen:return"(";case o.RParen:return")";case o.LBracket:return"[";case o.RBracket:return"]";case o.Exclaim:return"!";case o.TildeEqual:return"~=";case o.CaretEqual:return"^=";case o.DollarEqual:return"$=";case o.EqualEqual:return"==";case o.ExclaimEqual:return"!=";case o.Less:return"<";case o.Greater:return">";case o.LessEqual:return"<=";case o.GreaterEqual:return">=";case o.BarBar:return"||";case o.AmpAmp:return"&&";default:throw new Error(`invalid token ${e}`)}}!function(e){e[e.Tab=9]="Tab",e[e.Lf=10]="Lf",e[e.Cr=13]="Cr",e[e.Space=32]="Space",e[e.LParen=40]="LParen",e[e.RParen=41]="RParen",e[e.Comma=44]="Comma",e[e.Dot=46]="Dot",e[e.LBracket=91]="LBracket",e[e.Backslash=92]="Backslash",e[e.RBracket=93]="RBracket",e[e._0=48]="_0",e[e._9=57]="_9",e[e._=95]="_",e[e.A=64]="A",e[e.Z=90]="Z",e[e.a=97]="a",e[e.z=122]="z",e[e.DoubleQuote=34]="DoubleQuote",e[e.SingleQuote=39]="SingleQuote",e[e.Exclaim=33]="Exclaim",e[e.Equal=61]="Equal",e[e.Caret=94]="Caret",e[e.Tilde=126]="Tilde",e[e.Dollar=36]="Dollar",e[e.Less=60]="Less",e[e.Greater=62]="Greater",e[e.Bar=124]="Bar",e[e.Amp=38]="Amp"}(i||(i={})),function(e){e[e.Eof=0]="Eof",e[e.Error=1]="Error",e[e.Identifier=2]="Identifier",e[e.Number=3]="Number",e[e.String=4]="String",e[e.Comma=5]="Comma",e[e.LParen=6]="LParen",e[e.RParen=7]="RParen",e[e.LBracket=8]="LBracket",e[e.RBracket=9]="RBracket",e[e.Exclaim=10]="Exclaim",e[e.TildeEqual=11]="TildeEqual",e[e.CaretEqual=12]="CaretEqual",e[e.DollarEqual=13]="DollarEqual",e[e.EqualEqual=14]="EqualEqual",e[e.ExclaimEqual=15]="ExclaimEqual",e[e.Less=16]="Less",e[e.Greater=17]="Greater",e[e.LessEqual=18]="LessEqual",e[e.GreaterEqual=19]="GreaterEqual",e[e.BarBar=20]="BarBar",e[e.AmpAmp=21]="AmpAmp"}(o||(o={}));class h{constructor(e){this.code=e,this.m_token=o.Error,this.m_index=0,this.m_char=i.Lf}token(){return this.m_token}text(){var e;return null!==(e=this.m_text)&&void 0!==e?e:""}next(){if(this.m_token=this.yylex(),this.m_token===o.Error)throw new Error(`unexpected character ${this.m_char}`);return this.m_token}yyinp(){var e;this.m_char=null!==(e=this.code.codePointAt(this.m_index++))&&void 0!==e?e:0}yylex(){for(this.m_text=void 0;a(this.m_char);)this.yyinp();if(0===this.m_char)return o.Eof;const e=this.m_char;switch(this.yyinp(),e){case i.LParen:return o.LParen;case i.RParen:return o.RParen;case i.LBracket:return o.LBracket;case i.RBracket:return o.RBracket;case i.Comma:return o.Comma;case i.SingleQuote:case i.DoubleQuote:{const t=this.m_index-1;for(;this.m_char&&this.m_char!==e;)this.yyinp();if(this.m_char!==e)throw new Error("Unfinished string literal");return this.yyinp(),this.m_text=this.code.substring(t,this.m_index-2),o.String}case i.Exclaim:return this.m_char===i.Equal?(this.yyinp(),o.ExclaimEqual):o.Exclaim;case i.Caret:return this.m_char===i.Equal?(this.yyinp(),o.CaretEqual):o.Error;case i.Tilde:return this.m_char===i.Equal?(this.yyinp(),o.TildeEqual):o.Error;case i.Equal:return this.m_char===i.Equal?(this.yyinp(),o.EqualEqual):o.Error;case i.Less:return this.m_char===i.Equal?(this.yyinp(),o.LessEqual):o.Less;case i.Greater:return this.m_char===i.Equal?(this.yyinp(),o.GreaterEqual):o.Greater;case i.Bar:return this.m_char===i.Bar?(this.yyinp(),o.BarBar):o.Error;case i.Amp:return this.m_char===i.Amp?(this.yyinp(),o.AmpAmp):o.Error;default:{const t=this.m_index-2;if(l(e)||e===i._||e===i.Dollar&&c(this.m_char)){for(;c(this.m_char);)this.yyinp();return this.m_text=this.code.substring(t,this.m_index-1),o.Identifier}if(s(e)){for(;s(this.m_char);)this.yyinp();if(this.m_char===i.Dot)for(this.yyinp();s(this.m_char);)this.yyinp();return this.m_text=this.code.substring(t,this.m_index-1),o.Number}if(e===i.Dollar)return this.m_char===i.Equal?(this.yyinp(),o.DollarEqual):o.Error}}return o.Error}}function d(e){switch(e){case o.TildeEqual:return"~=";case o.CaretEqual:return"^=";case o.DollarEqual:return"$=";case o.EqualEqual:return"==";case o.ExclaimEqual:return"!=";default:return}}function p(e){switch(e){case o.Less:return"<";case o.Greater:return">";case o.LessEqual:return"<=";case o.GreaterEqual:return">=";default:return}}t.ExprParser=class{constructor(e){this.lex=new h(e),this.lex.next()}parse(){return this.parseLogicalOr()}yyexpect(e){if(this.lex.token()!==e)throw new Error(`Syntax error: Expected token '${u(e)}' but found '${u(this.lex.token())}'`);this.lex.next()}parsePrimary(){switch(this.lex.token()){case o.Identifier:{const e=this.lex.text();switch(e){case"has":this.lex.next(),this.yyexpect(o.LParen);const t=this.lex.text();return this.yyexpect(o.Identifier),this.yyexpect(o.RParen),new r.HasAttributeExpr(t);case"length":this.lex.next(),this.yyexpect(o.LParen);const n=this.parseLogicalOr();return this.yyexpect(o.RParen),new r.CallExpr("length",[n]);default:const i=new r.VarExpr(e);return this.lex.next(),i}}case o.LParen:{this.lex.next();const e=this.parseLogicalOr();return this.yyexpect(o.RParen),e}default:return this.parseLiteral()}}parseLiteral(){switch(this.lex.token()){case o.Number:{const e=new r.NumberLiteralExpr(parseFloat(this.lex.text()));return this.lex.next(),e}case o.String:{const e=new r.StringLiteralExpr(this.lex.text());return this.lex.next(),e}default:throw new Error("Syntax error")}}parseUnary(){return this.lex.token()===o.Exclaim?(this.lex.next(),new r.CallExpr("!",[this.parseUnary()])):this.parsePrimary()}parseRelational(){let e=this.parseUnary();for(;;)if(this.lex.token()===o.Identifier&&"in"===this.lex.text()){this.lex.next(),this.yyexpect(o.LBracket);const t=[this.parseLiteral()];for(;this.lex.token()===o.Comma;)this.lex.next(),t.push(this.parseLiteral());this.yyexpect(o.RBracket),e=new r.CallExpr("in",[e,r.LiteralExpr.fromValue(t.map((e=>{let{value:t}=e;return t})))])}else{const t=p(this.lex.token());if(void 0===t)break;this.lex.next();const n=this.parseUnary();e=new r.CallExpr(t,[e,n])}return e}parseEquality(){let e=this.parseRelational();for(;;){let t=d(this.lex.token());if(void 0===t)break;"~="===t&&(t="in"),this.lex.next();const n=this.parseRelational();e=new r.CallExpr(t,[e,n])}return e}parseLogicalAnd(){const e=this.parseEquality();if(this.lex.token()!==o.AmpAmp)return e;const t=[e];do{this.lex.next(),t.push(this.parseEquality())}while(this.lex.token()===o.AmpAmp);return new r.CallExpr("all",t)}parseLogicalOr(){const e=this.parseLogicalAnd();if(this.lex.token()!==o.BarBar)return e;const t=[e];do{this.lex.next(),t.push(this.parseLogicalAnd())}while(this.lex.token()===o.BarBar);return new r.CallExpr("any",t)}}},46704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExprPool=void 0;const r=n(22939);t.ExprPool=class{constructor(){this.m_booleanLiterals=new Map,this.m_numberLiterals=new Map,this.m_stringLiterals=new Map,this.m_objectLiterals=new Map,this.m_arrayLiterals=[],this.m_varExprs=new Map,this.m_hasAttributeExprs=new Map,this.m_matchExprs=[],this.m_caseExprs=[],this.m_interpolateExprs=[],this.m_stepExprs=[],this.m_callExprs=new Map}add(e){return e.accept(this,void 0)}visitNullLiteralExpr(e,t){return r.NullLiteralExpr.instance}visitBooleanLiteralExpr(e,t){const n=this.m_booleanLiterals.get(e.value);return n||(this.m_booleanLiterals.set(e.value,e),e)}visitNumberLiteralExpr(e,t){const n=this.m_numberLiterals.get(e.value);return n||(this.m_numberLiterals.set(e.value,e),e)}visitStringLiteralExpr(e,t){const n=this.m_stringLiterals.get(e.value);return n||(this.m_stringLiterals.set(e.value,e),e)}visitObjectLiteralExpr(e,t){const n=this.m_objectLiterals.get(e.value);if(n)return n;if(Array.isArray(e.value)){const t=e.value,n=this.m_arrayLiterals.find((e=>{const n=e.value;return n.length===t.length&&t.every(((e,t)=>e===n[t]))}));if(void 0!==n)return n;this.m_arrayLiterals.push(e)}return this.m_objectLiterals.set(e.value,e),e}visitVarExpr(e,t){const n=this.m_varExprs.get(e.name);return n||(this.m_varExprs.set(e.name,e),e)}visitHasAttributeExpr(e,t){const n=this.m_hasAttributeExprs.get(e.name);return n||(this.m_hasAttributeExprs.set(e.name,e),e)}visitMatchExpr(e,t){const n=e.value.accept(this,t),i=e.branches.map((e=>{let[n,r]=e;return[n,r.accept(this,t)]})),o=e.fallback.accept(this,t);for(const r of this.m_matchExprs){if(r.value!==n)continue;if(r.fallback!==o)continue;if(r.branches.length!==i.length)continue;let e=!0;for(let t=0;t<i.length;t++)if(i[t][0]!==r.branches[t][0]||i[t][1]!==r.branches[t][1]){e=!1;break}if(e)return r}const a=new r.MatchExpr(n,i,o);return this.m_matchExprs.push(a),a}visitCaseExpr(e,t){const n=e.branches.map((e=>{let[n,r]=e;return[n.accept(this,t),r.accept(this,t)]})),i=e.fallback.accept(this,t);for(const r of this.m_caseExprs){if(r.fallback!==i)continue;if(r.branches.length!==n.length)continue;let e=!0;for(let t=0;t<n.length;t++)if(n[t][0]!==r.branches[t][0]||n[t][1]!==r.branches[t][1]){e=!1;break}if(e)return r}const o=new r.CaseExpr(n,i);return this.m_caseExprs.push(o),o}visitCallExpr(e,t){const n=e.args.map((e=>e.accept(this,t)));this.m_callExprs.has(e.op)||this.m_callExprs.set(e.op,[]);const i=this.m_callExprs.get(e.op);for(const r of i){if(r.args.length!==n.length)continue;let e=0;for(;e<r.args.length&&r.args[e]===n[e];++e);if(e===r.args.length)return r}const o=new r.CallExpr(e.op,n);return o.descriptor=e.descriptor,i.push(o),o}visitStepExpr(e,t){if(this.m_stepExprs.includes(e))return e;const n=e.input.accept(this,t),i=e.defaultValue.accept(this,t),o=e.stops.map((e=>{const n=e[0],r=e[1].accept(this,t);return r===e[1]?e:[n,r]}));for(const r of this.m_stepExprs)if(r.input===n&&r.defaultValue===i&&o.length===r.stops.length&&o.every(((e,t)=>{let[n,i]=e;return n===r.stops[t][0]&&i===r.stops[t][1]})))return r;const a=new r.StepExpr(n,i,o);return this.m_stepExprs.push(a),a}visitInterpolateExpr(e,t){if(this.m_interpolateExprs.includes(e))return e;const n=e.input.accept(this,t),i=e.stops.map((e=>{const n=e[0],r=e[1].accept(this,t);return r===e[1]?e:[n,r]}));for(const r of this.m_interpolateExprs)if(r.input===n&&r.mode[0]===e.mode[0]&&r.mode[1]===e.mode[1]&&i.length===r.stops.length&&i.every(((e,t)=>{let[n,i]=e;return n===r.stops[t][0]&&i===r.stops[t][1]})))return r;const o=new r.InterpolateExpr(e.mode,n,i);return this.m_interpolateExprs.push(o),o}}},47633:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFeatureGeometry=void 0,t.isFeatureGeometry=function(e){const t=e.type;return"Point"===t||"MultiPoint"===t||"LineString"===t||"MultiLineString"===t||"Polygon"===t||"MultiPolygon"===t}},63014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},79829:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},91173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interpolatedPropertyDefinitionToJsonExpr=t.isInterpolatedPropertyDefinition=t.InterpolationMode=void 0,function(e){e[e.Discrete=0]="Discrete",e[e.Linear=1]="Linear",e[e.Cubic=2]="Cubic",e[e.Exponential=3]="Exponential"}(t.InterpolationMode||(t.InterpolationMode={})),t.isInterpolatedPropertyDefinition=function(e){return!!(e&&void 0===e.interpolationMode&&Array.isArray(e.values)&&e.values.length>0&&void 0!==e.values[0]&&Array.isArray(e.zoomLevels)&&e.zoomLevels.length>0&&void 0!==e.zoomLevels[0]&&e.values.length===e.zoomLevels.length)},t.interpolatedPropertyDefinitionToJsonExpr=function(e){if(void 0===e.interpolation||"Discrete"===e.interpolation){const t=["step",["zoom"],e.values[0]];for(let n=1;n<e.zoomLevels.length;++n)t.push(e.zoomLevels[n],e.values[n]);return t}const t=["interpolate"];switch(e.interpolation){case"Linear":t.push(["linear"]);break;case"Cubic":t.push(["cubic"]);break;case"Exponential":t.push(["exponential",void 0!==e.exponent?e.exponent:2]);break;default:throw new Error(`interpolation mode '${e.interpolation}' is not supported`)}t.push(["zoom"]);for(let n=0;n<e.zoomLevels.length;++n)t.push(e.zoomLevels[n],e.values[n]);return t}},71350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPolygonEdges=void 0;const r=n(534),i=new r.Vector2,o=new r.Vector2,a=new r.Vector2,s=new r.Vector2;t.addPolygonEdges=function(e,t,n,r,l,c,u,h){for(let d=0;d<l.length;++d)if(l[d])if(!0===c){const c=t+2*d,p=c+1,m=t+(d+1)%l.length*2,f=m+1;!0===u&&e.push(c,m),e.push(p,f);const g=(0===d?l.length:d)-1;if(l[g])if(void 0!==h){const t=r[d*n],u=r[d*n+1],m=r[(d+1)%l.length*n],f=r[(d+1)%l.length*n+1];i.set(t,u),o.set(m,f),a.set(r[g*n],r[g*n+1]),s.set(i.x,i.y),s.sub(a).normalize().dot(o.sub(i).normalize())<=h&&e.push(c,p)}else e.push(c,p)}else{const n=t+d,r=t+(d+1)%l.length;e.push(n,r)}}},79145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pixels=void 0;const n=/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*))px$/;class r{constructor(e){this.value=e}static parse(e){const t=n.exec(e);if(null!==t)return new r(Number(t[1]))}toJSON(){return`${this.value}px`}}t.Pixels=r},73917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyValue=void 0;const r=n(15739),i=n(22939),o=n(79145),a=n(55471),s=n(84727),l=r.LoggerManager.instance.create("PropertyValue");t.getPropertyValue=function(e,t,n){var r,c,u;if(i.Expr.isExpr(e))try{let s=e.evaluate(t,i.ExprScope.Dynamic,n);return"string"===typeof s&&(s=null!==(c=null!==(r=a.RGBA.parse(s))&&void 0!==r?r:o.Pixels.parse(s))&&void 0!==c?c:s),s instanceof a.RGBA?s.getHex():s instanceof o.Pixels?s.value*(null!==(u=Number(t.lookup("$pixelToMeters")))&&void 0!==u?u:1):s}catch(h){return l.error("failed to evaluate expression",JSON.stringify(e),"error",String(h)),null}if(null===e||"undefined"===typeof e)return null;if("string"!==typeof e)return e;{const n=t.lookup("$pixelToMeters")||1,r=s.parseStringEncodedNumeral(e,n);return void 0!==r?r:e}}},55471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBA=void 0;const r=n(534),i=n(67538),o=n(84727);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){const t=o.parseStringEncodedColor(e);if(void 0!==t)return i.ColorUtils.getRgbaFromHex(t)}clone(){return new a(this.r,this.g,this.b,this.a)}getHex(){return i.ColorUtils.getHexFromRgba(this.r,this.g,this.b,this.a)}lerp(e,t){return this.r=r.MathUtils.lerp(this.r,e.r,t),this.g=r.MathUtils.lerp(this.g,e.g,t),this.b=r.MathUtils.lerp(this.b,e.b,t),this.a=r.MathUtils.lerp(this.a,e.a,t),this}toJSON(){return`rgba(${255*this.r<<0}, ${255*this.g<<0}, ${255*this.b<<0}, ${this.a})`}}t.RGBA=a},84727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringEncodedColor=t.parseStringEncodedNumeral=t.StringEncodedNumeralFormatMaxSize=t.StringEncodedNumeralFormats=t.StringEncodedColorFormats=t.StringEncodedMetricFormats=t.StringEncodedNumeralType=void 0;const r=n(15739),i=n(10173),o=n(67538);var a;!function(e){e[e.Meters=0]="Meters",e[e.Pixels=1]="Pixels",e[e.Hex=2]="Hex"}(a=t.StringEncodedNumeralType||(t.StringEncodedNumeralType={}));const s={type:a.Meters,size:1,regExp:/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*))m$/,decoder:(e,t)=>{const n=s.regExp.exec(e);return!!n&&void 0!==(t[0]=Number(n[1]))}},l={type:a.Pixels,size:1,mask:1,regExp:/^((?=\.\d|\d)(?:\d+)?(?:\.?\d*))px$/,decoder:(e,t)=>{const n=l.regExp.exec(e);return null!==n&&(t[0]=Number(n[1]),!0)}},c={type:a.Hex,size:4,regExp:/^\#((?:[0-9A-Fa-f][0-9A-Fa-f]){4}|[0-9A-Fa-f]{4})$/,decoder:(e,t)=>{const n=c.regExp.exec(e);if(null===n)return!1;const i=n[1],o=i.length;return r.assert(4===o||8===o,"Matched incorrect hex color format"),4===o?(t[0]=parseInt(i.charAt(0)+i.charAt(0),16)/255,t[1]=parseInt(i.charAt(1)+i.charAt(1),16)/255,t[2]=parseInt(i.charAt(2)+i.charAt(2),16)/255,t[3]=4===o?parseInt(i.charAt(3)+i.charAt(3),16)/255:1):8===o&&(t[0]=parseInt(i.charAt(0)+i.charAt(1),16)/255,t[1]=parseInt(i.charAt(2)+i.charAt(3),16)/255,t[2]=parseInt(i.charAt(4)+i.charAt(5),16)/255,t[3]=8===o?parseInt(i.charAt(6)+i.charAt(7),16)/255:1),!0}};t.StringEncodedMetricFormats=[s,l];const u=t.StringEncodedMetricFormats.reduce(((e,t)=>Math.max(e,t.size)),0);t.StringEncodedColorFormats=[c];const h=t.StringEncodedColorFormats.reduce(((e,t)=>Math.max(e,t.size)),0);t.StringEncodedNumeralFormats=[...t.StringEncodedMetricFormats,...t.StringEncodedColorFormats],t.StringEncodedNumeralFormatMaxSize=Math.max(h,u);const d=new Array(t.StringEncodedNumeralFormatMaxSize);function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=t.find((t=>!!t.decoder(e,d)));if(void 0===r){const t=i.parseCSSColor(e);return Array.isArray(t)&&!t.some((e=>isNaN(e)))?o.ColorUtils.getHexFromRgba(t[0]/255,t[1]/255,t[2]/255,t[3]):void 0}switch(null===r||void 0===r?void 0:r.type){case a.Pixels:return d[0]*n;case a.Hex:return o.ColorUtils.getHexFromRgba(d[0],d[1],d[2],d[3]);default:return d[0]}}t.parseStringEncodedNumeral=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return p(e,t.StringEncodedNumeralFormats,n)},t.parseStringEncodedColor=function(e){return p(e,t.StringEncodedColorFormats)}},17668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDecodedTechnique=t.StyleSetEvaluator=void 0;const r=n(15739),i=n(22939),o=n(46704),a=n(53693),s=n(91753),l=n(38794),c=r.LoggerManager.instance.create("StyleSetEvaluator"),u=s.AttrScope.TechniqueGeometry;class h{classify(e){if(e._whenExpr){const t=this.switchStyle(e);e._whenExpr=e._whenExpr.accept(this,void 0),this._style=t}}visitNullLiteralExpr(e,t){return e}visitBooleanLiteralExpr(e,t){return e}visitNumberLiteralExpr(e,t){return e}visitStringLiteralExpr(e,t){return e}visitObjectLiteralExpr(e,t){return e}visitVarExpr(e,t){return e}visitHasAttributeExpr(e,t){return e}visitMatchExpr(e,t){return e}visitCaseExpr(e,t){return e}visitCallExpr(e,t){if("all"===e.op){const t=e.args.map((t=>t.accept(this,e))).filter((e=>void 0!==e));return new i.CallExpr(e.op,t)}if(t){const t=this.matchVarStringComparison(e);if(t){if(void 0===this._style.layer&&"$layer"===t.name)return void(this._style.layer=t.value);if(void 0===this._style._geometryType&&"$geometryType"===t.name)return void(this._style._geometryType=t.value)}}return e}visitStepExpr(e,t){return e}visitInterpolateExpr(e,t){return e}matchVarStringComparison(e){if("=="===e.op){const t=e.args[0],n=e.args[1];if(t instanceof i.VarExpr&&n instanceof i.StringLiteralExpr)return{name:t.name,value:n.value};if(n instanceof i.VarExpr&&t instanceof i.StringLiteralExpr)return{name:n.name,value:t.value}}}switchStyle(e){const t=this._style;return this._style=e,t}}class d{constructor(e,t){this.key="",this.set(e,t)}set(e,t,n){let r=!1;if(void 0===e){const t=void 0!==n?n.lookup("$layer"):void 0;e="string"===typeof t?t:void 0}if(this.layer!==e&&(this.layer=e,r=!0),void 0===t){const e=void 0!==n?n.lookup("$geometryType"):void 0;t="string"===typeof e?e:void 0}return this.geometryType!==t&&(this.geometryType=t,r=!0),r&&this.updateKey(),this}updateKey(){void 0!==this.layer?void 0!==this.geometryType?this.key=`${this.layer}:${this.geometryType}`:this.key=`${this.layer}:`:void 0!==this.geometryType?this.key=`:${this.geometryType}`:this.key="all",this.cachedStyleSet=void 0}}function p(e){const t={};for(const n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];"object"===typeof r&&(r.isVector2||r.isVector3||r.isVector4)&&(r=i.LiteralExpr.fromValue(r)),i.Expr.isExpr(r)&&(r=r.toJSON()),t[n]=r}return t}t.StyleSetEvaluator=class{constructor(e){var t;this.m_options=e,this.m_techniques=[],this.m_exprPool=new o.ExprPool,this.m_cachedResults=new Map,this.m_styleConditionClassifier=new h,this.m_subStyleSetCache=new Map,this.m_definitionExprCache=new Map,this.m_tmpOptimizedSubSetKey=new d,this.m_emptyEnv=new i.Env,this.m_featureDependencies=[],this.m_nextArrayBufferId=0,this.m_definitions=this.m_options.definitions,this.styleSet=(t=this.m_options.styleSet,this.m_definitions,t.map((e=>function(e,t){return Object.assign({},e)}(e)))),function(e){let t=0,n=0;for(const r of e)r._styleSetIndex=n++,void 0!==r.technique&&void 0===r.renderOrder&&(r.renderOrder=t++)}(this.styleSet),this.compileStyleSet()}getMatchingTechniques(e,t,n){if(this.m_previousResult&&this.m_previousEnv&&this.m_featureDependencies.every((t=>{var n;return(null===(n=this.m_previousEnv)||void 0===n?void 0:n.lookup(t))===e.lookup(t)})))return this.m_previousResult;const r=[];this.m_cachedResults.clear();const i=this.m_tmpOptimizedSubSetKey;i.set(t,n,e),this.m_layer=i.layer,this.m_geometryType=i.geometryType,this.m_zoomLevel=e.lookup("$zoom");const o=this.getOptimizedStyleSet(i);for(const a of o)if(this.processStyle(e,a,r))break;return this.m_previousResult=r,this.m_previousEnv=e,r}wantsLayer(e){return this.getOptimizedStyleSet(this.m_tmpOptimizedSubSetKey.set(e,void 0)).length>0}wantsFeature(e,t){return this.getOptimizedStyleSet(this.m_tmpOptimizedSubSetKey.set(e,t)).length>0}get expressionEvaluatorCache(){return this.m_cachedResults}resetTechniques(){for(const e of this.m_techniques)e._index=void 0;this.m_techniques.length=0,this.m_previousResult=void 0,this.m_previousEnv=void 0}get techniques(){return this.m_techniques}get decodedTechniques(){return this.m_techniques.map(p)}getOptimizedStyleSet(e){if(void 0!==e.cachedStyleSet)return e.cachedStyleSet;let t=this.m_subStyleSetCache.get(e.key);return void 0!==t?(e.cachedStyleSet=t,t):(t=this.createPreFilteredStyleSet(e),this.m_subStyleSetCache.set(e.key,t),e.cachedStyleSet=t,t)}createPreFilteredStyleSet(e){const{layer:t,geometryType:n}=e;return this.styleSet.filter((e=>(void 0===t||void 0===e.layer||e.layer===t)&&(void 0===n||void 0===e._geometryType||e._geometryType===n)))}compileStyleSet(){this.m_featureDependencies=["$layer","$geometryType","$zoom"],this.styleSet.forEach((e=>this.compileStyle(e))),this.styleSet.forEach((e=>{this.getOptimizedStyleSet(this.m_tmpOptimizedSubSetKey.set(e.layer,e._geometryType))}))}compileStyle(e){if(this.checkStyleDynamicAttributes(e),void 0!==e.when)try{e._whenExpr=Array.isArray(e.when)?i.Expr.fromJSON(e.when,this.m_definitions,this.m_definitionExprCache):i.Expr.parse(e.when),this.m_styleConditionClassifier.classify(e),void 0!==e._whenExpr&&(e._whenExpr=e._whenExpr.intern(this.m_exprPool));const t=e._whenExpr.dependencies();null===t||void 0===t||t.properties.forEach((e=>{this.m_featureDependencies.includes(e)||this.m_featureDependencies.push(e)})),i.isJsonExpr(e.minZoomLevel)&&(e._minZoomLevelExpr=i.Expr.fromJSON(e.minZoomLevel).intern(this.m_exprPool)),i.isJsonExpr(e.maxZoomLevel)&&(e._maxZoomLevelExpr=i.Expr.fromJSON(e.maxZoomLevel).intern(this.m_exprPool))}catch(t){c.log("failed to evaluate expression",JSON.stringify(e.when),"error",String(t))}}processStyle(e,t,n){if(!this.checkZoomLevel(e,t))return!1;if(void 0!==this.m_layer&&void 0!==t.layer&&t.layer!==this.m_layer)return!1;if(void 0!==this.m_geometryType&&void 0!==t._geometryType&&t._geometryType!==this.m_geometryType)return!1;if(t._whenExpr)try{if(!t._whenExpr.evaluate(e,i.ExprScope.Condition,this.m_cachedResults))return!1}catch(r){return c.error(`failed to evaluate expression '${JSON.stringify(t.when)}': ${r}`),!1}return void 0!==t.technique&&("none"!==t.technique&&n.push(this.getTechniqueForStyleMatch(e,t)),!0===t.final)}checkZoomLevel(e,t){var n,r;if(void 0===t.minZoomLevel&&void 0===t.maxZoomLevel)return!0;const o=this.m_zoomLevel;if(void 0===o)return!0;if(void 0!==t.minZoomLevel){let r=t.minZoomLevel;if(!1===(null===(n=t._minZoomLevelExpr)||void 0===n?void 0:n.isDynamic()))try{r=t._minZoomLevelExpr.evaluate(e,i.ExprScope.Condition,this.m_cachedResults)}catch(a){c.error(`failed to evaluate expression '${JSON.stringify(t._minZoomLevelExpr)}': ${a}`)}if("number"===typeof r&&o<r)return!1}if(void 0!==t.maxZoomLevel){let n=t.maxZoomLevel;if(!1===(null===(r=t._maxZoomLevelExpr)||void 0===r?void 0:r.isDynamic()))try{n=t._maxZoomLevelExpr.evaluate(e,i.ExprScope.Condition,this.m_cachedResults)}catch(a){c.error(`failed to evaluate expression '${JSON.stringify(t._maxZoomLevelExpr)}': ${a}`)}if("number"===typeof n&&o>=n)return!1}return!0}getTechniqueForStyleMatch(e,t){let n;if(void 0!==t._dynamicTechniques){const r=this.evaluateTechniqueProperties(t,e),i=this.getDynamicTechniqueKey(t,r);n=t._dynamicTechniques.get(i),void 0===n&&(n=this.createTechnique(t,i,r),t._dynamicTechniques.set(i,n))}else n=t._staticTechnique,void 0===n&&(t._staticTechnique=n=this.createTechnique(t,`${t._styleSetIndex}`,[]));return void 0===n._index&&(n._index=this.m_techniques.length,this.m_techniques.push(n)),n}getDynamicTechniqueKey(e,t){const n=t.map((e=>{let[t,n]=e;return void 0===n?"U":"object"===typeof n?JSON.stringify(n,((e,t)=>{if(t instanceof ArrayBuffer){let e=t.id;return void 0===e&&(e=t.id=this.m_nextArrayBufferId++),e}return t})):JSON.stringify(n)})).join(":");return`${e._styleSetIndex}:${n}`}checkStyleDynamicAttributes(e){var t;if(void 0!==e._dynamicTechniqueAttributes||"none"===e.technique)return;e._dynamicTechniqueAttributes=[],e._dynamicFeatureAttributes=[],e._dynamicForwardedAttributes=[],e._staticAttributes=[];const n=e._dynamicFeatureAttributes,r=e._dynamicTechniqueAttributes,o=e._dynamicForwardedAttributes,l=e._staticAttributes,h=(t,h)=>{if(void 0!==h){if(i.isJsonExpr(h)?h=i.Expr.fromJSON(h,this.m_definitions,this.m_definitionExprCache).intern(this.m_exprPool):a.isInterpolatedPropertyDefinition(h)&&(h=i.Expr.fromJSON(a.interpolatedPropertyDefinitionToJsonExpr(h)).intern(this.m_exprPool)),i.Expr.isExpr(h)){const n=h.dependencies();n.featureState&&("enabled"!==t?c.log("feature-state is not supported in this context"):e._usesFeatureState=!0),0!==n.properties.size||h.isDynamic()||(h=h.evaluate(this.m_emptyEnv))}if(i.Expr.isExpr(h)){const i=function(e,t){var n,r;return"extruded-polygon"===e.technique&&"color"===t&&!1!==e.vertexColors?u:null!==(r=null===(n=s.getTechniqueAttributeDescriptor(e.technique,t))||void 0===n?void 0:n.scope)&&void 0!==r?r:u}(e,t),a=h.dependencies();switch(a.properties.forEach((e=>{this.m_featureDependencies.includes(e)||this.m_featureDependencies.push(e)})),i){case s.AttrScope.FeatureGeometry:n.push([t,h]);break;case s.AttrScope.TechniqueGeometry:r.push([t,h]);break;case s.AttrScope.TechniqueRendering:0===a.properties.size?o.push([t,h]):r.push([t,h])}}else void 0!==h&&null!==h&&l.push([t,h])}},d=new Map([["category","_category"],["secondaryCategory","_secondaryCategory"]]);for(const i in e){if(!e.hasOwnProperty(i))continue;if(i.startsWith("_"))continue;if(["when","technique","layer","attr","description"].includes(i))continue;h(null!==(t=d.get(i))&&void 0!==t?t:i,e[i])}if(void 0!==e.attr)for(const i in e.attr)e.attr.hasOwnProperty(i)&&h(i,e.attr[i]);r.length>0&&(e._dynamicTechniques=new Map)}evaluateTechniqueProperties(e,t){return void 0===e._dynamicTechniqueAttributes?[]:e._dynamicTechniqueAttributes.map((e=>{let[n,r]=e;try{return[n,r.evaluate(t,i.ExprScope.Value,this.m_cachedResults)]}catch(o){return c.error(`failed to evaluate expression '${r.toJSON()}': ${o}`),[n,null]}}))}createTechnique(e,t,n){var r,i;const o={};if(o.name=e.technique,void 0!==e._staticAttributes)for(const[a,s]of e._staticAttributes)null!==s&&(o[a]=s);for(const[a,s]of n)null!==s&&(o[a]=s);if(void 0!==e._dynamicFeatureAttributes)for(const[a,s]of e._dynamicFeatureAttributes)o[a]=s;if(void 0!==e._dynamicForwardedAttributes)for(const[a,s]of e._dynamicForwardedAttributes)o[a]=s;return o._index=this.m_techniques.length,o._styleSetIndex=e._styleSetIndex,void 0!==e.styleSet&&(o._styleSet=e.styleSet),void 0!==e._usesFeatureState&&(o._usesFeatureState=e._usesFeatureState),l.setTechniqueRenderOrderOrPriority(o,null!==(r=this.m_options.priorities)&&void 0!==r?r:[],null!==(i=this.m_options.labelPriorities)&&void 0!==i?i:[]),this.m_techniques.push(o),o}},t.makeDecodedTechnique=p},51638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateTechniqueAttr=void 0;const r=n(22939),i=n(71872);t.evaluateTechniqueAttr=function(e,t,n){if(void 0===t)return n;const o=r.Env.isEnv(e)?i.getPropertyValue(t,e):i.getPropertyValue(t,e.env,e.cachedExprResults);return null!==o&&void 0!==o?o:n}},91753:(e,t)=>{"use strict";var n;function r(){const e={attrDescriptors:{}};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)void 0!==i.attrTransparencyColor&&(e.attrTransparencyColor=i.attrTransparencyColor),void 0!==i.attrDescriptors&&(e.attrDescriptors=Object.assign(Object.assign({},e.attrDescriptors),i.attrDescriptors));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTechniqueAutomaticAttrs=t.getTechniqueAttributeDescriptor=t.getTechniqueDescriptor=t.AttrScope=void 0,function(e){e[e.FeatureGeometry=0]="FeatureGeometry",e[e.TechniqueGeometry=1]="TechniqueGeometry",e[e.TechniqueRendering=2]="TechniqueRendering"}(n=t.AttrScope||(t.AttrScope={}));const i={attrTransparencyColor:"color",attrDescriptors:{constantHeight:n.FeatureGeometry,enabled:n.FeatureGeometry,fadeFar:n.TechniqueRendering,fadeNear:n.TechniqueRendering,transparent:{scope:n.TechniqueRendering,automatic:!0},side:{scope:n.TechniqueRendering,automatic:!0}}},o=r(i,{attrDescriptors:{color:{scope:n.TechniqueRendering,automatic:!0},size:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0}}}),a=r(i,o),s=r(i,o),l=r(i,{attrDescriptors:{text:n.FeatureGeometry,label:n.FeatureGeometry,useAbbreviation:n.FeatureGeometry,useIsoCode:n.FeatureGeometry,poiName:n.FeatureGeometry,imageTexture:n.FeatureGeometry,iconColor:n.TechniqueRendering,iconBrightness:n.TechniqueRendering,backgroundColor:n.TechniqueRendering,backgroundSize:n.TechniqueRendering,backgroundOpacity:n.TechniqueRendering,color:n.TechniqueRendering,opacity:n.TechniqueRendering,size:n.TechniqueRendering}}),c={attrDescriptors:{polygonOffset:{scope:n.TechniqueRendering,automatic:!0},polygonOffsetFactor:{scope:n.TechniqueRendering,automatic:!0},polygonOffsetUnits:{scope:n.TechniqueRendering,automatic:!0},depthTest:{scope:n.TechniqueRendering,automatic:!0},transparent:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},color:{scope:n.TechniqueRendering,automatic:!0},lineColor:n.TechniqueRendering,lineFadeFar:n.TechniqueRendering,lineFadeNear:n.TechniqueRendering}},u=r(i,c,{attrDescriptors:{lineWidth:n.TechniqueRendering,secondaryWidth:n.TechniqueRendering,secondaryColor:n.TechniqueRendering,dashSize:n.TechniqueRendering,gapSize:n.TechniqueRendering,outlineColor:{scope:n.TechniqueRendering,automatic:!0},caps:{scope:n.TechniqueRendering,automatic:!0},drawRangeStart:{scope:n.TechniqueRendering,automatic:!0},drawRangeEnd:{scope:n.TechniqueRendering,automatic:!0},dashes:{scope:n.TechniqueRendering,automatic:!0},dashColor:{scope:n.TechniqueRendering,automatic:!0}}}),h=r(i,{attrDescriptors:{color:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},lineWidth:n.FeatureGeometry}}),d=r(i,c,{attrDescriptors:{wireframe:{scope:n.TechniqueRendering,automatic:!0},color:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},transparent:{scope:n.TechniqueRendering,automatic:!0},lineWidth:n.TechniqueRendering,map:{scope:n.TechniqueRendering,automatic:!0}}}),p=r(i,{attrDescriptors:{color:{scope:n.TechniqueRendering,automatic:!0},vertexColors:{scope:n.TechniqueRendering,automatic:!0},wireframe:{scope:n.TechniqueRendering,automatic:!0},roughness:{scope:n.TechniqueRendering,automatic:!0},metalness:{scope:n.TechniqueRendering,automatic:!0},alphaTest:{scope:n.TechniqueRendering,automatic:!0},depthTest:{scope:n.TechniqueRendering,automatic:!0},transparent:{scope:n.TechniqueRendering,automatic:!0},opacity:{scope:n.TechniqueRendering,automatic:!0},emissive:{scope:n.TechniqueRendering,automatic:!0},emissiveIntensity:{scope:n.TechniqueRendering,automatic:!0},refractionRatio:{scope:n.TechniqueRendering,automatic:!0},normalMapType:{scope:n.TechniqueRendering,automatic:!0},map:{scope:n.TechniqueRendering,automatic:!0},normalMap:{scope:n.TechniqueRendering,automatic:!0},displacementMap:{scope:n.TechniqueRendering,automatic:!0},roughnessMap:{scope:n.TechniqueRendering,automatic:!0},emissiveMap:{scope:n.TechniqueRendering,automatic:!0},bumpMap:{scope:n.TechniqueRendering,automatic:!0},metalnessMap:{scope:n.TechniqueRendering,automatic:!0},alphaMap:{scope:n.TechniqueRendering,automatic:!0}}}),m={"extruded-polygon":r(i,p,{attrDescriptors:{height:n.FeatureGeometry,floorHeight:n.FeatureGeometry,color:n.FeatureGeometry,defaultColor:n.FeatureGeometry,defaultHeight:n.FeatureGeometry,boundaryWalls:n.FeatureGeometry,footprint:n.FeatureGeometry,maxSlope:n.FeatureGeometry,animateExtrusion:n.TechniqueRendering,lineWidth:n.TechniqueRendering,lineFadeNear:n.TechniqueRendering,lineFadeFar:n.TechniqueRendering,lineColor:n.TechniqueRendering}}),"line-marker":l,"labeled-icon":l,"solid-line":u,"dashed-line":u,terrain:p,standard:p,squares:a,circles:s,line:h,segments:h,fill:d,text:r(i,{attrDescriptors:{text:n.FeatureGeometry,label:n.FeatureGeometry,useAbbreviation:n.FeatureGeometry,useIsoCode:n.FeatureGeometry,backgroundColor:n.TechniqueRendering,backgroundSize:n.TechniqueRendering,backgroundOpacity:n.TechniqueRendering,color:n.TechniqueRendering,opacity:n.TechniqueRendering,priority:n.TechniqueRendering,size:n.TechniqueRendering}}),shader:r(i,{attrDescriptors:{params:n.TechniqueRendering}})};function f(e){return"string"!==typeof e&&(e=e.name),m[e]}t.getTechniqueDescriptor=f,t.getTechniqueAttributeDescriptor=function(e,t){const n=f(e),r=null===n||void 0===n?void 0:n.attrDescriptors,i=null===r||void 0===r?void 0:r[t];if(void 0!==typeof i)return"object"===typeof i?i:{scope:i}};const g=new Map;t.getTechniqueAutomaticAttrs=function(e){var t;if("string"!==typeof e&&(e=e.name),g.has(e))return g.get(e);const n=[],r=null===(t=f(e))||void 0===t?void 0:t.attrDescriptors;if(void 0===r)return n;for(const i in r){if(!r.hasOwnProperty(i))continue;const e=r[i];void 0!==e&&"number"!==typeof e&&(!0===e.automatic&&n.push(i))}return g.set(e,n),n}},72885:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.isTextureBuffer=t.PlacementToken=t.transientToPickability=t.Pickability=t.PoiStackMode=t.TextureCoordinateType=t.GeometryKindSet=t.GeometryKind=t.StandardGeometryKind=void 0,function(e){e.All="_all_",e.Background="background",e.Terrain="terrain",e.Area="area",e.Line="line",e.Water="water",e.Border="border",e.Road="road",e.Building="building",e.Label="label",e.Detail="detail"}(n=t.StandardGeometryKind||(t.StandardGeometryKind={})),t.GeometryKind=n;class i extends Set{isSuperset(e){for(const t of e)if(!this.has(t))return!1;return!0}hasIntersection(e){for(const t of e)if(this.has(t))return!0;return!1}hasOrIntersects(e){return e instanceof Set?this.hasIntersection(e):this.has(e)}hasOrIntersectsArray(e){for(const t of e)if(this.has(t))return!0;return!1}}t.GeometryKindSet=i,function(e){e.TileSpace="tile-space",e.EquirectangularSpace="equirectangular-space",e.FeatureSpace="feature-space"}(t.TextureCoordinateType||(t.TextureCoordinateType={})),function(e){e.Show="show-in-stack",e.Hide="hide-in-stack",e.ShowParent="show-parent"}(t.PoiStackMode||(t.PoiStackMode={})),function(e){e.onlyVisible="only-visible",e.transient="transient",e.all="all"}(r=t.Pickability||(t.Pickability={})),t.transientToPickability=function(e){let t=r.onlyVisible;return void 0!==e&&null!==e&&(t="string"===typeof e?e:!0===e?r.transient:r.onlyVisible),t},function(e){e.TopLeft="TL",e.Top="T",e.TopRight="TR",e.Right="R",e.BottomRight="BR",e.Bottom="B",e.BottomLeft="BL",e.Left="L",e.Center="C",e.NorthWest="NW",e.North="N",e.NorthEast="NE",e.East="E",e.SouthEast="SE",e.South="S",e.SouthWest="SW",e.West="W"}(t.PlacementToken||(t.PlacementToken={})),t.isTextureBuffer=function(e){return e&&e.buffer&&"string"===typeof e.type}},38794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTechniqueRenderOrderOrPriority=t.composeTechniqueTextureName=t.addBuffersToTransferList=t.textureCoordinateType=t.supportsTextures=t.needsVertexNormals=t.isLabelRejectionLineTechnique=t.isShaderTechnique=t.isTextTechnique=t.isTerrainTechnique=t.isStandardTechnique=t.isExtrudedPolygonTechnique=t.isFillTechnique=t.isStandardExtrudedLineTechnique=t.isBasicExtrudedLineTechnique=t.isExtrudedLineTechnique=t.isSegmentsTechnique=t.isSpecialDashesLineTechnique=t.isSolidLineTechnique=t.isLineTechnique=t.isLineMarkerTechnique=t.isPoiTechnique=t.isSquaresTechnique=t.isCirclesTechnique=t.TRANSPARENCY_PROPERTY_KEYS=t.TEXTURE_PROPERTY_KEYS=void 0;const r=n(72885);function i(e){return"labeled-icon"===e.name}function o(e){return"line-marker"===e.name}function a(e){return"extruded-line"===e.name}function s(e){return a(e)&&"standard"===e.shading}function l(e){return"fill"===e.name}function c(e){return"extruded-polygon"===e.name}function u(e){return"standard"===e.name}function h(e){return"terrain"===e.name}function d(e){return"text"===e.name}function p(e){return"shader"===e.name}function m(e){return l(e)||u(e)||c(e)||h(e)}t.TEXTURE_PROPERTY_KEYS=["map","normalMap","displacementMap","roughnessMap","emissiveMap","alphaMap","metalnessMap","bumpMap"],t.TRANSPARENCY_PROPERTY_KEYS=["opacity","transparent"],t.isCirclesTechnique=function(e){return"circles"===e.name},t.isSquaresTechnique=function(e){return"squares"===e.name},t.isPoiTechnique=i,t.isLineMarkerTechnique=o,t.isLineTechnique=function(e){return"line"===e.name},t.isSolidLineTechnique=function(e){return"solid-line"===e.name||"dashed-line"===e.name},t.isSpecialDashesLineTechnique=function(e){return("solid-line"===e.name||"dashed-line"===e.name)&&void 0!==e.dashes&&"Square"!==e.dashes},t.isSegmentsTechnique=function(e){return"segments"===e.name},t.isExtrudedLineTechnique=a,t.isBasicExtrudedLineTechnique=function(e){return a(e)&&"basic"===e.shading},t.isStandardExtrudedLineTechnique=s,t.isFillTechnique=l,t.isExtrudedPolygonTechnique=c,t.isStandardTechnique=u,t.isTerrainTechnique=h,t.isTextTechnique=d,t.isShaderTechnique=p,t.isLabelRejectionLineTechnique=function(e){return"label-rejection-line"===e.name},t.needsVertexNormals=function(e){return c(e)||l(e)||u(e)||h(e)||s(e)},t.supportsTextures=m,t.textureCoordinateType=function(e){return m(e)||p(e)?e.textureCoordinateType:void 0},t.addBuffersToTransferList=function(e,n){if(u(e)||c(e)||h(e))for(const i of t.TEXTURE_PROPERTY_KEYS){const t=e[i];r.isTextureBuffer(t)&&t.buffer instanceof ArrayBuffer&&n.push(t.buffer)}},t.composeTechniqueTextureName=function(e,t){let n=e;return"string"===typeof t.imageTexturePrefix&&(n=t.imageTexturePrefix+n),"string"===typeof t.imageTexturePostfix&&(n+=t.imageTexturePostfix),n},t.setTechniqueRenderOrderOrPriority=function(e,t,n){if(d(e)||i(e)||o(e)){if(n&&"string"===typeof e._category){const t=n.indexOf(e._category);-1!==t&&(e.priority=n.length-t)}}else if(t&&void 0!==e._styleSet){const n=n=>{const r=null===t||void 0===t?void 0:t.findIndex((t=>t.group===e._styleSet&&t.category===n));return void 0!==r&&-1!==r?10*(r+1):void 0};if("string"===typeof e._category){const t=n(e._category);void 0!==t&&(e.renderOrder=t)}if("string"===typeof e._secondaryCategory){const t=n(e._secondaryCategory);void 0!==t&&(e.secondaryRenderOrder=t)}}}},6705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonExprReference=void 0,t.isJsonExprReference=function(e){return Array.isArray(e)&&2===e.length&&"ref"===e[0]&&"string"===typeof e[1]}},68374:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeVisitor=void 0;const r=n(22939);t.ThemeVisitor=class{constructor(e){this.theme=e}visitStyles(e){const t=t=>!r.isJsonExpr(t)&&!!e(t);if(void 0!==this.theme.styles)for(const n in this.theme.styles)if(void 0!==this.theme.styles[n])for(const e of this.theme.styles[n])if(t(e))return!0;return!1}}},14650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeBufferUtils=void 0;const r=n(51566);!function(e){function t(e){if(e instanceof Int8Array)return"int8";if(e instanceof Uint8Array)return"uint8";if(e instanceof Int16Array)return"int16";if(e instanceof Uint16Array)return"uint16";if(e instanceof Int32Array)return"int32";if(e instanceof Uint32Array)return"uint32";if(e instanceof Float32Array)return"float";throw new Error(`Unsupported buffer type ${name}`)}function n(e){const n=e.array;return{name:e.name,buffer:n.buffer,type:t(n),itemCount:e.itemSize,normalized:e.normalized}}e.getBufferElementType=t,e.fromThreeBufferAttribute=n,e.fromThreeInterleavedBufferAttribute=function(e){throw new Error("Not implemented yet")},e.fromThreeBufferGeometry=function(e,t){const i=[],o=Object.getOwnPropertyNames(e.attributes);for(const r of o){const t=n(e.attributes[r]);t.name=r,i.push(t)}const a=null!==e.index?n(e.index):void 0;let s=0;if(void 0!==a)s=null===e.index?0:e.index.count;else{const t=e.attributes.position;if(void 0===t)throw new Error("Missing position attibute to deduce item count");s=t.count}return{type:r.GeometryType.Unspecified,vertexAttributes:i,index:a,groups:[{start:0,count:s,technique:t}]}}}(t.ThreeBufferUtils||(t.ThreeBufferUtils={}))},44987:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerDecoderProtocol=t.RequestController=void 0;t.RequestController=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;this.priority=e,this.abortController=t}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}},function(e){let t,n;!function(e){e.Configuration="configuration"}(t=e.DecoderMessageName||(e.DecoderMessageName={})),e.isConfigurationMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Configuration},function(e){e.DecodeTileRequest="decode-tile-request",e.TileInfoRequest="tile-info-request"}(n=e.Requests||(e.Requests={})),e.isDecodeTileRequest=function(e){return e&&"string"===typeof e.type&&e.type===n.DecodeTileRequest},e.isTileInfoRequest=function(e){return e&&"string"===typeof e.type&&e.type===n.TileInfoRequest}}(t.WorkerDecoderProtocol||(t.WorkerDecoderProtocol={}))},47468:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerServiceProtocol=void 0,function(e){let t,n;e.WORKER_SERVICE_MANAGER_SERVICE_ID="worker-service-manager",function(e){e.Initialized="initialized",e.Request="request",e.Response="response"}(t=e.ServiceMessageName||(e.ServiceMessageName={})),e.isInitializedMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Initialized},function(e){e.CreateService="create-service",e.DestroyService="destroy-service"}(n=e.Requests||(e.Requests={})),e.isUnknownServiceError=function(e){return e.message.includes("unknown targetServiceType requested: ")},e.isRequestMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Request},e.isResponseMessage=function(e){return e&&"string"===typeof e.service&&"string"===typeof e.type&&e.type===t.Response}}(t.WorkerServiceProtocol||(t.WorkerServiceProtocol={}))},23365:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerTilerProtocol=void 0,function(e){let t;!function(e){e.RegisterIndex="register-index",e.UpdateIndex="update-index",e.TileRequest="tile-request"}(t=e.Requests||(e.Requests={})),e.isRegisterIndexRequest=function(e){return e&&"string"===typeof e.type&&e.type===t.RegisterIndex},e.isUpdateIndexRequest=function(e){return e&&"string"===typeof e.type&&e.type===t.UpdateIndex},e.isTileRequest=function(e){return e&&"string"===typeof e.type&&e.type===t.TileRequest}}(t.WorkerTilerProtocol||(t.WorkerTilerProtocol={}))},59944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayOperators=void 0;const r=n(22939),i=["boolean","number","string"];function o(e,t){if(!(e instanceof r.StringLiteralExpr)||!i.includes(e.value))throw new Error(`expected "boolean", "number" or "string" instead of '${JSON.stringify(e)}'`);const n=e.value;t.forEach(((e,t)=>{if(typeof e!==n)throw new Error(`expected array element at index ${t} to have type '${n}'`)}))}function a(e,t){const n=e.evaluate(t);if(!Array.isArray(n))throw new Error(`'${n}' is not an array`);return n}const s={array:{call:(e,t)=>{switch(t.args.length){case 0:throw new Error("not enough arguments");case 1:return a(e,t.args[0]);case 2:{const n=a(e,t.args[1]);return o(t.args[0],n),n}case 3:{const n=a(e,t.args[2]);return function(e,t){if(!(e instanceof r.NumberLiteralExpr))throw new Error("missing expected number of elements");const n=e.value;if(t.length!==n)throw new Error(`the array must have ${n} element(s)`)}(t.args[1],n),o(t.args[0],n),n}default:throw new Error("too many arguments")}}},"make-array":{call:(e,t)=>{if(0===t.args.length)throw new Error("not enough arguments");return[...t.args.map((t=>e.evaluate(t)))]}},at:{call:(e,t)=>{const n=t.args,r=e.evaluate(n[0]);if("number"!==typeof r)throw new Error("expected the index of the element to retrieve");const i=e.evaluate(n[1]);if(!Array.isArray(i))throw new Error("expected an array");return r>=0&&r<i.length?i[r]:null}},slice:{call:(e,t)=>{if(t.args.length<2)throw new Error("not enough arguments");const n=e.evaluate(t.args[0]);if("string"!==typeof n&&!Array.isArray(n))throw new Error("input must be a string or an array");const r=e.evaluate(t.args[1]);if("number"!==typeof r)throw new Error("expected an index");let i;if(t.args.length>2&&(i=e.evaluate(t.args[2]),"number"!==typeof i))throw new Error("expected an index");return n.slice(r,i)}}};t.ArrayOperators=s},99880:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastOperators=void 0;const n={"to-boolean":{call:(e,t)=>Boolean(e.evaluate(t.args[0]))},"to-string":{call:(e,t)=>String(e.evaluate(t.args[0]))},"to-number":{call:(e,t)=>{for(const n of t.args){const t=Number(e.evaluate(n));if(!isNaN(t))return t}throw new Error("cannot convert the value to a number")}}};t.CastOperators=n},98502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorOperators=void 0;const r=n(534),i=n(67538),o=n(84727),a={alpha:{call:(e,t)=>{let n=e.evaluate(t.args[0]);"string"===typeof n&&(n=o.parseStringEncodedColor(n));return"number"===typeof n?i.ColorUtils.getAlphaFromHex(n):1}},rgba:{call:(e,t)=>{const n=e.evaluate(t.args[0]),o=e.evaluate(t.args[1]),a=e.evaluate(t.args[2]),s=e.evaluate(t.args[3]);if("number"===typeof n&&"number"===typeof o&&"number"===typeof a&&"number"===typeof s&&n>=0&&o>=0&&a>=0&&s>=0&&s<=1)return function(e,t,n,o){return i.ColorUtils.getHexFromRgba(r.MathUtils.clamp(e,0,255)/255,r.MathUtils.clamp(t,0,255)/255,r.MathUtils.clamp(n,0,255)/255,r.MathUtils.clamp(o,0,1))}(n,o,a,s);throw new Error(`unknown color 'rgba(${n},${o},${a},${s})'`)}},rgb:{call:(e,t)=>{const n=e.evaluate(t.args[0]),o=e.evaluate(t.args[1]),a=e.evaluate(t.args[2]);if("number"===typeof n&&"number"===typeof o&&"number"===typeof a&&n>=0&&o>=0&&a>=0)return function(e,t,n){return i.ColorUtils.getHexFromRgb(r.MathUtils.clamp(e,0,255)/255,r.MathUtils.clamp(t,0,255)/255,r.MathUtils.clamp(n,0,255)/255)}(n,o,a);throw new Error(`unknown color 'rgb(${n},${o},${a})'`)}},hsl:{call:(e,t)=>{const n=e.evaluate(t.args[0]),o=e.evaluate(t.args[1]),a=e.evaluate(t.args[2]);if("number"===typeof n&&"number"===typeof o&&"number"===typeof a&&n>=0&&o>=0&&a>=0)return function(e,t,n){return i.ColorUtils.getHexFromHsl(r.MathUtils.euclideanModulo(e,360)/360,r.MathUtils.clamp(t,0,100)/100,r.MathUtils.clamp(n,0,100)/100)}(n,o,a);throw new Error(`unknown color 'hsl(${n},${o}%,${a}%)'`)}}};t.ColorOperators=a},25074:(e,t)=>{"use strict";function n(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.evaluate(t.args[0]),i=e.evaluate(t.args[1]);if(!("number"===typeof r&&"number"===typeof i||"string"===typeof r&&"string"===typeof i)&&n)throw new Error(`invalid operands '${r}' and '${i}' for operator '${t.op}'`);switch(t.op){case"<":return r<i;case">":return r>i;case"<=":return r<=i;case">=":return r>=i;default:throw new Error(`invalid comparison operator '${t.op}'`)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ComparisonOperators=void 0;const r={"!":{call:(e,t)=>!e.evaluate(t.args[0])},"==":{call:(e,t)=>e.evaluate(t.args[0])===e.evaluate(t.args[1])},"!=":{call:(e,t)=>e.evaluate(t.args[0])!==e.evaluate(t.args[1])},"<":{call:(e,t)=>n(e,t)},">":{call:(e,t)=>n(e,t)},"<=":{call:(e,t)=>n(e,t)},">=":{call:(e,t)=>n(e,t)}};t.ComparisonOperators=r},80303:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureOperators=void 0;const r=n(18284),i=n(22939),o={"geometry-type":{call:(e,t)=>{switch(e.env.lookup("$geometryType")){case"point":return"Point";case"line":return"LineString";case"polygon":return"Polygon";default:return null}}},"feature-state":{isDynamicOperator:()=>!0,call:(e,t)=>{var n,o;if(e.scope!==i.ExprScope.Dynamic)throw new Error("feature-state cannot be used in this context");const a=e.evaluate(t.args[0]);if("string"!==typeof a)throw new Error("expected the name of the property of the feature state");const s=e.env.lookup("$state");return r.Env.isEnv(s)?null!==(n=s.lookup(a))&&void 0!==n?n:null:s instanceof Map&&null!==(o=s.get(a))&&void 0!==o?o:null}},id:{call:(e,t)=>{var n;return null!==(n=e.env.lookup("$id"))&&void 0!==n?n:null}}};t.FeatureOperators=o},28778:(e,t)=>{"use strict";function n(e,t,n){switch(t){case"boolean":case"number":case"string":for(const r of n){const n=e.evaluate(r);if(typeof n===t)return n}throw new Error(`expected a '${t}'`);default:throw new Error(`invalid type '${t}'`)}}Object.defineProperty(t,"__esModule",{value:!0}),t.FlowOperators=void 0;const r={all:{call:(e,t)=>{for(const n of t.args)if(!e.evaluate(n))return!1;return!0}},any:{call:(e,t)=>{for(const n of t.args)if(e.evaluate(n))return!0;return!1}},none:{call:(e,t)=>{for(const n of t.args)if(e.evaluate(n))return!1;return!0}},boolean:{call:(e,t)=>n(e,"boolean",t.args)},number:{call:(e,t)=>n(e,"number",t.args)},string:{call:(e,t)=>n(e,"string",t.args)}};t.FlowOperators=r},14982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapOperators=void 0;const r=n(22939),i={"ppi-scale":{call:(e,t)=>e.evaluate(t.args[0])*(t.args[1]?e.evaluate(t.args[1]):1)},"world-ppi-scale":{isDynamicOperator:()=>!0,call:(e,t)=>{const n=e.evaluate(t.args[0]),r=t.args[1]?e.evaluate(t.args[1]):1,i=e.env.lookup("$zoom");return n*(Math.pow(2,17)/Math.pow(2,i))*r}},"world-discrete-ppi-scale":{isDynamicOperator:()=>!0,call:(e,t)=>{const n=e.evaluate(t.args[0]),r=t.args[1]?e.evaluate(t.args[1]):1,i=e.env.lookup("$zoom");return n*(Math.pow(2,17)/Math.pow(2,Math.floor(i)))*r}},ppi:{call:e=>{const t=e.env.lookup("$ppi");return"number"===typeof t?t:72}},zoom:{isDynamicOperator:()=>!0,call:(e,t)=>{var n;return e.scope===r.ExprScope.Value?t:null!==(n=e.env.lookup("$zoom"))&&void 0!==n?n:null}}};t.MapOperators=i},70628:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathOperators=void 0;const r=n(534),i={"^":{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error(`invalid operands '${typeof n}' and '${typeof r}' for operator '^'`);return Math.pow(n,r)}},"-":{call:(e,t)=>{if(1===t.args.length){const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`\xecnvalid operand '${typeof n} for operator '-'`);return-n}const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error(`invalid operands '${typeof n}' and '${typeof r}' for operator '-'`);return n-r}},"/":{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error(`invalid operands '${typeof n}' and '${typeof r}' for operator '/'`);return n/r}},"%":{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);if("number"!==typeof n||"number"!==typeof r)throw new Error(`invalid operands '${typeof n}' and '${typeof r}' for operator '%'`);return n%r}},"+":{call:(e,t)=>t.args.reduce(((t,n)=>Number(t)+Number(e.evaluate(n))),0)},"*":{call:(e,t)=>t.args.reduce(((t,n)=>Number(t)*Number(e.evaluate(n))),1)},abs:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'abs'`);return Math.abs(n)}},acos:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'acos'`);return Math.acos(n)}},asin:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'asin'`);return Math.asin(n)}},atan:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'atan'`);return Math.atan(n)}},ceil:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'ceil'`);return Math.ceil(n)}},cos:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'cos'`);return Math.cos(n)}},e:{call:()=>Math.E},floor:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'floor'`);return Math.floor(n)}},ln:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'ln'`);return Math.log(n)}},ln2:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'ln2'`);return Math.log2(n)}},log10:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'log10'`);return Math.log10(n)}},max:{call:(e,t)=>Math.max(...t.args.map((t=>Number(e.evaluate(t)))))},min:{call:(e,t)=>Math.min(...t.args.map((t=>Number(e.evaluate(t)))))},clamp:{call:(e,t)=>{const n=e.evaluate(t.args[0]),i=e.evaluate(t.args[1]),o=e.evaluate(t.args[2]);if("number"!==typeof n||"number"!==typeof i||"number"!==typeof o)throw new Error(`invalid operands '${n}', ${i}, ${o} for operator 'clamp'`);return r.MathUtils.clamp(n,i,o)}},pi:{call:()=>Math.PI},round:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'round'`);return Math.round(n)}},sin:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'sin'`);return Math.sin(n)}},sqrt:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'sqrt'`);return Math.sqrt(n)}},tan:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if("number"!==typeof n)throw new Error(`invalid operand '${n}' for operator 'tan'`);return Math.tan(n)}}};t.MathOperators=i},20120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiscOperators=void 0;const n={length:{call:(e,t)=>{const n=e.evaluate(t.args[0]);if(Array.isArray(n)||"string"===typeof n)return n.length;throw new Error(`invalid operand '${n}' for operator 'length'`)}},coalesce:{call:(e,t)=>{for(const n of t.args){const t=e.evaluate(n);if(null!==t)return t}return null}}};t.MiscOperators=n},80354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectOperators=void 0;const r=n(18284),i=n(22939),o=Object.prototype.hasOwnProperty;var a;function s(e,t,n){var i;const s=e.evaluate(t[0]);if("string"!==typeof s)throw new Error("expected the name of an attribute");const l=e.evaluate(t[1]);if(l&&"object"===typeof l){if(r.Env.isEnv(l)){const e=null!==(i=l.lookup(s))&&void 0!==i?i:null;return n===a.get?e:null!==e}if(o.call(l,s))return n!==a.get||l[s]}return n===a.get&&null}!function(e){e[e.get=0]="get",e[e.has=1]="has"}(a||(a={}));const l={in:{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return("string"===typeof n&&"string"===typeof r||!!Array.isArray(r))&&r.includes(n)}},get:{call:(e,t)=>s(e,t.args,a.get)},has:{call:(e,t)=>s(e,t.args,a.has)},"dynamic-properties":{isDynamicOperator:()=>!0,call:(e,t)=>e.scope===i.ExprScope.Dynamic?e.env:t}};t.ObjectOperators=l},33668:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringOperators=void 0;const n={concat:{call:(e,t)=>"".concat(...t.args.map((t=>String(e.evaluate(t)))))},downcase:{call:(e,t)=>String(e.evaluate(t.args[0])).toLocaleLowerCase()},upcase:{call:(e,t)=>String(e.evaluate(t.args[0])).toLocaleUpperCase()},"~=":{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return"string"===typeof n&&"string"===typeof r&&n.includes(r)}},"^=":{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return"string"===typeof n&&"string"===typeof r&&n.startsWith(r)}},"$=":{call:(e,t)=>{const n=e.evaluate(t.args[0]),r=e.evaluate(t.args[1]);return"string"===typeof n&&"string"===typeof r&&n.endsWith(r)}}};t.StringOperators=n},43433:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeOperators=void 0;t.TypeOperators={typeof:{call:(e,t)=>typeof e.evaluate(t.args[0])}}},70081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorOperators=void 0;const r=n(534),i=n(22939);function o(e,t,n){let i;switch(n){case"vector2":i=r.Vector2;break;case"vector3":i=r.Vector3;break;case"vector4":i=r.Vector4}for(const r of t.args){const t=e.evaluate(r);if(t instanceof i)return t}throw new Error(`expected a "${n}"`)}function a(e,t,n){let i,o;switch(n){case"vector2":i=r.Vector2,o=2;break;case"vector3":i=r.Vector3,o=3;break;case"vector4":i=r.Vector4,o=4}for(const r of t.args){const t=e.evaluate(r);if(t instanceof i)return t;if(Array.isArray(t)&&t.length===o&&t.every((e=>"number"===typeof e)))return(new i).fromArray(t)}throw new Error(`expected a "${n}"`)}const s={"make-vector":{call:(e,t)=>{if(void 0!==t._value)return t._value;if(t.args.length<2)throw new Error("not enough arguments");if(t.args.length>4)throw new Error("too many arguments");const n=t.args.map((t=>e.evaluate(t)));let o;switch(n.forEach(((e,t)=>{if("number"!==typeof e)throw new Error(`expected vector component at index ${t} to have type "number"`)})),n.length){case 2:o=(new r.Vector2).fromArray(n);break;case 3:o=(new r.Vector3).fromArray(n);break;case 4:o=(new r.Vector4).fromArray(n);break;default:throw new Error("too many arguments")}return t.args.every((e=>e instanceof i.NumberLiteralExpr))&&(t._value=o),o}},vector2:{call:(e,t)=>o(e,t,"vector2")},vector3:{call:(e,t)=>o(e,t,"vector3")},vector4:{call:(e,t)=>o(e,t,"vector4")},"to-vector2":{call:(e,t)=>a(e,t,"vector2")},"to-vector3":{call:(e,t)=>a(e,t,"vector3")},"to-vector4":{call:(e,t)=>a(e,t,"vector4")}};t.VectorOperators=s},89064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},44317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeLengthGeometrySubdivisionModifier=t.SubdivisionMode=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(70403),s=[new o.Vector3,new o.Vector3];var l;!function(e){e[e.All=0]="All",e[e.NoDiagonals=1]="NoDiagonals"}(l=t.SubdivisionMode||(t.SubdivisionMode={}));class c extends a.SubdivisionModifier{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.All,o=arguments.length>3?arguments[3]:void 0;super(),this.subdivision=e,this.geoBox=t,this.subdivisionMode=n,this.projection=o,i.assert(o.type===r.ProjectionType.Planar,"EdgeLengthGeometrySubdivisionModifier only supports planar projections");const a=o.projectPoint(t.northEast,s[0]),c=o.projectPoint(t.southWest,s[1]);this.m_projectedBox={min:{x:Math.min(a.x,c.x),y:Math.min(a.y,c.y),z:Math.min(a.z,c.z)},max:{x:Math.max(a.x,c.x),y:Math.max(a.y,c.y),z:Math.max(a.z,c.z)}},this.m_maxLengthX=(this.m_projectedBox.max.x-this.m_projectedBox.min.x)/e,this.m_maxLengthY=(this.m_projectedBox.max.y-this.m_projectedBox.min.y)/e,this.subdivisionMode===l.All&&(this.m_maxLengthX*=1.1,this.m_maxLengthY*=1.1),this.m_maxLength=Math.sqrt(this.m_maxLengthX*this.m_maxLengthX+this.m_maxLengthY*this.m_maxLengthY)}get maxLength(){return this.m_maxLength}get maxLengthX(){return this.m_maxLengthX}get maxLengthY(){return this.m_maxLengthY}shouldSplitTriangle(e,t,n){const r=this.shouldSplitEdge(e,t),i=this.shouldSplitEdge(t,n),o=this.shouldSplitEdge(n,e);if(!(r||i||o))return;const a=e.distanceTo(t),s=t.distanceTo(n),l=n.distanceTo(e),c=Math.max(r?a:0,i?s:0,o?l:0);if(a===c)return 0;if(s===c)return 1;if(l===c)return 2;throw new Error("Could not split triangle.")}shouldSplitEdge(e,t){switch(this.subdivisionMode){case l.All:return e.y===t.y&&Math.abs(e.x-t.x)>this.m_maxLengthX||e.x===t.x&&Math.abs(e.y-t.y)>this.m_maxLengthY||e.distanceTo(t)>this.m_maxLength;case l.NoDiagonals:return e.y===t.y&&Math.abs(e.x-t.x)>this.m_maxLengthX||e.x===t.x&&Math.abs(e.y-t.y)>this.m_maxLengthY}}}t.EdgeLengthGeometrySubdivisionModifier=c},80684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphericalGeometrySubdivisionModifier=void 0;const r=n(31201),i=n(534),o=n(70403),a=[new i.Vector3,new i.Vector3,new i.Vector3];class s extends o.SubdivisionModifier{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.sphereProjection;super(),this.angle=e,this.projection=t}shouldSplitTriangle(e,t,n){const i=r.sphereProjection.reprojectPoint(this.projection,e,a[0]),o=r.sphereProjection.reprojectPoint(this.projection,t,a[1]),s=r.sphereProjection.reprojectPoint(this.projection,n,a[2]),l=i.angleTo(o),c=o.angleTo(s),u=s.angleTo(i),h=Math.max(l,Math.max(c,u));if(!(h<this.angle)){if(h===l)return 0;if(h===c)return 1;if(h===u)return 2;throw new Error("failed to split triangle")}}}t.SphericalGeometrySubdivisionModifier=s},70403:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubdivisionModifier=void 0;const r=n(534),i=new r.Vector3,o=new r.Vector3,a=new r.Vector3;t.SubdivisionModifier=class{constructor(){}modify(e){const t=e.getAttribute("position"),n=Array.from(t.array),r=e.getAttribute("uv"),s=void 0!==r?Array.from(r.array):void 0,l=e.getAttribute("edge"),c=void 0!==l?Array.from(l.array):void 0,u=e.getAttribute("wall"),h=void 0!==u?Array.from(u.array):void 0,d=e.getIndex(),p=Array.from(d.array),m=new Map;function f(e,t){const r=`${Math.min(e,t)}_${Math.max(e,t)}`,l=m.get(r);if(void 0!==l)return l;i.set(n[3*e],n[3*e+1],n[3*e+2]),o.set(n[3*t],n[3*t+1],n[3*t+2]),a.lerpVectors(i,o,.5);const u=n.length/3;return n.push(...a.toArray()),m.set(r,u),void 0!==s&&(i.set(s[2*e],s[2*e+1],0),o.set(s[2*t],s[2*t+1],0),a.lerpVectors(i,o,.5),s.push(a.x,a.y)),void 0!==c&&(c[e]===t?(c.push(t),c[e]=u):c[t]===e?(c.push(e),c[t]=u):c.push(-1)),void 0!==h&&(h[e]===t?(h.push(t),h[e]=u):h[t]===e?(h.push(e),h[t]=u):h.push(-1)),u}const g=[];for(;p.length>=3;){const e=p.shift(),t=p.shift(),r=p.shift();i.set(n[3*e],n[3*e+1],n[3*e+2]),o.set(n[3*t],n[3*t+1],n[3*t+2]),a.set(n[3*r],n[3*r+1],n[3*r+2]);switch(this.shouldSplitTriangle(i,o,a)){case 0:{const n=f(e,t);p.push(e,n,r,n,t,r);break}case 1:{const n=f(t,r);p.push(e,t,n,e,n,r);break}case 2:{const n=f(r,e);p.push(e,t,n,n,t,r);break}case void 0:g.push(e,t,r);break;default:throw new Error("failed to subdivide the given geometry")}}return t.array=t.array instanceof Float32Array?new Float32Array(n):new Float64Array(n),t.count=n.length/t.itemSize,t.needsUpdate=!0,e.setIndex(g),void 0!==s&&(r.array=new Float32Array(s),r.count=s.length/r.itemSize,r.needsUpdate=!0),void 0!==c&&(l.array=new Float32Array(c),l.count=c.length/l.itemSize,l.needsUpdate=!0),e}}},31201:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5761),t),i(n(24632),t),i(n(93369),t),i(n(52022),t),i(n(88931),t),i(n(95166),t),i(n(53306),t),i(n(62713),t),i(n(19573),t),i(n(2187),t),i(n(35196),t),i(n(72129),t),i(n(99428),t),i(n(56030),t),i(n(89399),t),i(n(90458),t),i(n(40798),t),i(n(18291),t),i(n(1216),t),i(n(75294),t),i(n(59449),t),i(n(1511),t),i(n(10550),t),i(n(73751),t),i(n(48217),t),i(n(97194),t),i(n(34573),t),i(n(80045),t),i(n(98058),t),i(n(29307),t),i(n(22024),t),i(n(11247),t),i(n(63920),t),i(n(35946),t),i(n(35417),t),i(n(19616),t)},5761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoBox=void 0;const r=n(534),i=n(52022);class o{constructor(e,t){this.southWest=e,this.northEast=t,this.west>this.east&&(this.northEast.longitude+=360)}static fromCoordinates(e,t){return new o(e,t)}static fromCenterAndExtents(e,t){return new o(new i.GeoCoordinates(e.latitude-t.latitudeSpan/2,e.longitude-t.longitudeSpan/2),new i.GeoCoordinates(e.latitude+t.latitudeSpan/2,e.longitude+t.longitudeSpan/2))}get minAltitude(){if(void 0!==this.southWest.altitude&&void 0!==this.northEast.altitude)return Math.min(this.southWest.altitude,this.northEast.altitude)}get maxAltitude(){if(void 0!==this.southWest.altitude&&void 0!==this.northEast.altitude)return Math.max(this.southWest.altitude,this.northEast.altitude)}get south(){return this.southWest.latitude}get north(){return this.northEast.latitude}get west(){return this.southWest.longitude}get east(){return this.northEast.longitude}get center(){const e=.5*(this.south+this.north),{west:t,east:n}=this,{minAltitude:r,altitudeSpan:o}=this;let a;if(void 0!==r&&void 0!==o&&(a=r+.5*o),t<=n)return new i.GeoCoordinates(e,.5*(t+n),a);let s=.5*(360+n+t);return s>360&&(s-=360),new i.GeoCoordinates(e,s,a)}get latitudeSpanInRadians(){return r.MathUtils.degToRad(this.latitudeSpan)}get longitudeSpanInRadians(){return r.MathUtils.degToRad(this.longitudeSpan)}get latitudeSpan(){return this.north-this.south}get altitudeSpan(){if(void 0!==this.maxAltitude&&void 0!==this.minAltitude)return this.maxAltitude-this.minAltitude}get longitudeSpan(){let e=this.northEast.longitude-this.southWest.longitude;return e<0&&(e+=360),e}get latitudeSpanInDegrees(){return this.latitudeSpan}get longitudeSpanInDegrees(){return this.longitudeSpan}contains(e){if(void 0===e.altitude||void 0===this.minAltitude||void 0===this.maxAltitude)return this.containsHelper(e);const t=this.minAltitude===this.maxAltitude,n=this.minAltitude===e.altitude,r=this.minAltitude<=e.altitude&&this.maxAltitude>e.altitude;return!!(t?n:r)&&this.containsHelper(e)}clone(){return new o(this.southWest.clone(),this.northEast.clone())}growToContain(e){this.southWest.latitude=Math.min(this.southWest.latitude,e.latitude),this.southWest.longitude=Math.min(this.southWest.longitude,e.longitude),this.southWest.altitude=void 0!==this.southWest.altitude&&void 0!==e.altitude?Math.min(this.southWest.altitude,e.altitude):void 0!==this.southWest.altitude?this.southWest.altitude:void 0!==e.altitude?e.altitude:void 0,this.northEast.latitude=Math.max(this.northEast.latitude,e.latitude),this.northEast.longitude=Math.max(this.northEast.longitude,e.longitude),this.northEast.altitude=void 0!==this.northEast.altitude&&void 0!==e.altitude?Math.max(this.northEast.altitude,e.altitude):void 0!==this.northEast.altitude?this.northEast.altitude:void 0!==e.altitude?e.altitude:void 0}containsHelper(e){if(e.latitude<this.southWest.latitude||e.latitude>=this.northEast.latitude)return!1;const{west:t,east:n}=this;let r=e.longitude;if(n>i.MAX_LONGITUDE)for(;r<t;)r+=360;if(r>n)for(;r>t+360;)r-=360;return r>=t&&r<n}}t.GeoBox=o},24632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoBoxExtentLike=void 0,t.isGeoBoxExtentLike=function(e){return e&&"object"===typeof e&&"number"===typeof e.latitudeSpan&&"number"===typeof e.longitudeSpan}},44471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoCoordLike=t.geoCoordLikeToGeoPointLike=t.geoCoordLikeToGeoCoordinatesLike=void 0;const r=n(93369),i=n(88931),o=n(62713);t.geoCoordLikeToGeoCoordinatesLike=function(e){return r.isGeoCoordinatesLike(e)?e:o.isLatLngLike(e)?{latitude:e.lat,longitude:e.lng}:{latitude:e[1],longitude:e[0]}},t.geoCoordLikeToGeoPointLike=function(e){return i.isGeoPointLike(e)?e:o.isLatLngLike(e)?[e.lng,e.lat]:[e.longitude,e.latitude]},t.isGeoCoordLike=function(e){return r.isGeoCoordinatesLike(e)||o.isLatLngLike(e)||!i.isGeoPointLike(e)}},52022:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoCoordinates=t.MIN_LONGITUDE=t.MAX_LONGITUDE=t.MIN_LATITUDE=t.MAX_LATITUDE=void 0;const r=n(534),i=n(93369),o=n(88931),a=n(62713);t.MAX_LATITUDE=90,t.MIN_LATITUDE=-90,t.MAX_LONGITUDE=180,t.MIN_LONGITUDE=-180;const s=new r.Vector3,l=new r.Vector3;class c{constructor(e,t,n){this.latitude=e,this.longitude=t,this.altitude=n}static fromDegrees(e,t,n){return new c(e,t,n)}static fromRadians(e,t,n){return new c(r.MathUtils.radToDeg(e),r.MathUtils.radToDeg(t),n)}static fromLatLng(e){return new c(e.lat,e.lng)}static fromGeoPoint(e){return new c(e[1],e[0],e[2])}static fromObject(e){if(o.isGeoPointLike(e))return c.fromGeoPoint(e);if(i.isGeoCoordinatesLike(e))return c.fromDegrees(e.latitude,e.longitude,e.altitude);if(a.isLatLngLike(e))return c.fromDegrees(e.lat,e.lng);throw new Error("Invalid input coordinate format.")}static lerp(e,t,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i,o;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){if(e.lng<t.lng){const r=e.clone();return r.longitude+=360,this.lerp(t,r,1-n)}{const r=t.clone();return r.longitude+=360,this.lerp(e,r,n)}}const a=s.set(e.lat,e.lng,null!==(i=e.altitude)&&void 0!==i?i:0),u=l.set(t.lat,t.lng,null!==(o=t.altitude)&&void 0!==o?o:0);a.lerp(u,n);const h=new c(a.x,a.y,a.z);return r?h.normalized():h}get latitudeInRadians(){return r.MathUtils.degToRad(this.latitude)}get longitudeInRadians(){return r.MathUtils.degToRad(this.longitude)}get latitudeInDegrees(){return this.latitude}get longitudeInDegrees(){return this.longitude}get lat(){return this.latitude}get lng(){return this.longitude}isValid(){return!isNaN(this.latitude)&&!isNaN(this.longitude)}normalized(){let{latitude:e,longitude:t}=this;return isNaN(e)||isNaN(t)?this:((t<-180||t>180)&&(t=function(e,t){const n=e%t;return n<0===t<0?n:n+t}(t+180,360)-180),e=r.MathUtils.clamp(e,-90,90),new c(e,t,this.altitude))}equals(e){return this.latitude===e.latitude&&this.longitude===e.longitude&&this.altitude===e.altitude}copy(e){return this.latitude=e.latitude,this.longitude=e.longitude,this.altitude=e.altitude,this}clone(){return new c(this.latitude,this.longitude,this.altitude)}toLatLng(){return{lat:this.latitude,lng:this.longitude}}toGeoPoint(){return void 0!==this.altitude?[this.longitude,this.latitude,this.altitude]:[this.longitude,this.latitude]}minLongitudeSpanTo(e){const t=Math.min(this.longitude,e.longitude),n=Math.max(this.longitude,e.longitude);return Math.min(n-t,360+t-n)}}t.GeoCoordinates=c},93369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoCoordinatesLike=void 0,t.isGeoCoordinatesLike=function(e){return e&&"number"===typeof e.latitude&&"number"===typeof e.longitude&&("number"===typeof e.altitude||"undefined"===typeof e.altitude)}},88931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoPointLike=void 0,t.isGeoPointLike=function(e){if(Array.isArray(e)){const[t,n,r]=e;return"number"===typeof t&&"number"===typeof n&&(void 0===r||"number"===typeof r)}return!1}},53306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoPolygon=t.isAntimeridianCrossing=void 0;const r=n(534),i=n(5761),o=n(52022),a=n(44471);function s(e,t){return Math.max(e,t)-Math.min(e,t)}function l(e,t){return e>0&&t<0&&s(e,t)>180}t.isAntimeridianCrossing=function(e,t){return Math.sign(e)===-Math.sign(t)&&s(e,t)>180};t.GeoPolygon=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.m_coordinates=e.map((e=>a.geoCoordLikeToGeoCoordinatesLike(e))),t&&this.sortCCW(),n&&this.wrapCoordinatesAround()}get coordinates(){return this.m_coordinates}getGeoBoundingBox(){const e=this.getCentroid();if(void 0===e)return i.GeoBox.fromCoordinates(this.coordinates[0],this.coordinates[0]);const{east:t,west:n}=this.getEastAndWest(e),{north:r,south:a}=this.getNorthAndSouth();return i.GeoBox.fromCoordinates(new o.GeoCoordinates(a,n),new o.GeoCoordinates(r,t))}getCentroid(){const e=this.getArea();if(0===e)return;let t,n=0,r=0,i=this.m_coordinates.length-1;return this.m_coordinates.forEach(((e,o)=>{const a=this.m_coordinates[i];t=e.latitude*a.longitude-a.latitude*e.longitude,n+=(e.latitude+a.latitude)*t,r+=(e.longitude+a.longitude)*t,i=o})),t=6*e,new o.GeoCoordinates(n/t,e<0?r/t-180:r/t)}sortCCW(){const e=this.getPolyAverageCenter();e&&this.m_coordinates.sort(((t,n)=>{const i=new r.Vector2(t.latitude-e.latitude,t.longitude-e.longitude).normalize();return new r.Vector2(n.latitude-e.latitude,n.longitude-e.longitude).normalize().angle()-i.angle()}))}wrapCoordinatesAround(){const e=this.m_coordinates.findIndex(((e,t)=>{const n=0===t?this.m_coordinates.length-1:t-1;return l(this.m_coordinates[n].longitude,e.longitude)}));if(e<0)return;let t=!0;for(let n=0;n<this.m_coordinates.length;n++){const r=(e+n)%this.m_coordinates.length,i=this.m_coordinates[r].longitude,o=this.m_coordinates[(r+1)%this.m_coordinates.length].longitude;t&&(this.m_coordinates[r].longitude+=360),l(o,i)?t=!1:l(i,o)&&(t=!0)}}getPolyAverageCenter(){const e=this.m_coordinates.reduce(((e,t)=>new o.GeoCoordinates(e.latitude+t.latitude,e.longitude+t.longitude)));return new o.GeoCoordinates(e.latitude/this.m_coordinates.length,e.longitude/this.m_coordinates.length)}getArea(){let e=0,t=this.m_coordinates.length-1;return this.m_coordinates.forEach(((n,r)=>{const i=this.m_coordinates[t];e+=n.latitude*i.longitude,e-=n.longitude*i.latitude,t=r})),e/=2}getEastAndWest(e){let t=e.longitude,n=e.longitude,i=this.m_coordinates.length-1;return this.m_coordinates.forEach(((o,a)=>{const s=this.m_coordinates[i];i=a;const l=new r.Vector2(o.latitude-e.latitude,o.longitude-e.longitude).normalize(),c=new r.Vector2(s.latitude-e.latitude,s.longitude-e.longitude).normalize();let u=1===Math.sign(c.angle()-l.angle());c.y>=0&&l.y<0&&(u=!0);const h=o.longitude;h<e.longitude?u?t=Math.min(t,h):n=Math.min(n,h):u?n=Math.max(n,h):t=Math.max(t,h)})),{east:n,west:t}}getNorthAndSouth(){let e=o.MIN_LATITUDE,t=o.MAX_LATITUDE;return this.m_coordinates.forEach(((n,r)=>{e=Math.max(e,n.latitude),t=Math.min(t,n.latitude)})),{north:e,south:t}}}},95166:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGeoPolygonLike=void 0;const r=n(44471);t.isGeoPolygonLike=function(e){if(!e||!Array.isArray(e.coordinates)&&e.coordinates.length>2)return!1;let t=!0;return e.coordinates.forEach((n=>{r.isGeoCoordLike(e)||(t=!1)})),t}},62713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLatLngLike=void 0,t.isLatLngLike=function(e){return e&&"number"===typeof e.lat&&"number"===typeof e.lng}},11247:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBox3Like=void 0,t.isBox3Like=function(e){const t=e;return void 0!==t.min&&void 0!==t.max}},35946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0;const r=n(534);!function(e){function t(e){return(e%=360)<0&&(e+=360),e}function n(e,n){const r=(e=t(e))-(n=t(n));return r>180?r-360:r<=-180?r+360:r}e.newEmptyBox3=function(){return{min:{x:1/0,y:1/0,z:1/0},max:{x:-1/0,y:-1/0,z:-1/0}}},e.newVector3=function(e,t,n,r){return void 0===r?{x:e,y:t,z:n}:(r.x=e,r.y=t,r.z=n,r)},e.copyVector3=function(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t},e.degToRad=r.MathUtils.degToRad,e.radToDeg=r.MathUtils.radToDeg,e.clamp=r.MathUtils.clamp,e.normalizeAngleDeg=t,e.normalizeLongitudeDeg=function(e){return(e=t(e))>180&&(e-=360),e},e.angleDistanceDeg=n,e.interpolateAnglesDeg=function(e,t,r){return(e+n(t,e)*r)%360}}(t.MathUtils||(t.MathUtils={}))},19616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrientedBox3=void 0;const r=n(534);function i(e,t,n,r,i){const o=n.dot(t),a=n.dot(e);if(Math.abs(a)<1e-20)return Math.abs(o)<=r;const s=1/a,l=(o+r)*s,c=(o-r)*s;return l>c?(c>i.min&&(i.min=c),l<i.max&&(i.max=l)):(l>i.min&&(i.min=l),c<i.max&&(i.max=c)),i.min<=i.max&&i.max>=0}const o=new r.Vector3,a={min:-1/0,max:1/0};class s{constructor(e,t,n){this.position=new r.Vector3,this.xAxis=new r.Vector3(1,0,0),this.yAxis=new r.Vector3(0,1,0),this.zAxis=new r.Vector3(0,0,1),this.extents=new r.Vector3,void 0!==e&&this.position.copy(e),void 0!==t&&t.extractBasis(this.xAxis,this.yAxis,this.zAxis),void 0!==n&&this.extents.copy(n)}clone(){const e=new s;return e.copy(this),e}copy(e){this.position.copy(e.position),this.xAxis.copy(e.xAxis),this.yAxis.copy(e.yAxis),this.zAxis.copy(e.zAxis),this.extents.copy(e.extents)}getCenter(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Vector3).copy(this.position)}getSize(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Vector3).copy(this.extents).multiplyScalar(2)}getRotationMatrix(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Matrix4).makeBasis(this.xAxis,this.yAxis,this.zAxis)}intersects(e){const t=Array.isArray(e)?e:e.planes;for(const n of t){const e=Math.abs(n.normal.dot(this.xAxis)*this.extents.x)+Math.abs(n.normal.dot(this.yAxis)*this.extents.y)+Math.abs(n.normal.dot(this.zAxis)*this.extents.z);if(n.distanceToPoint(this.position)+e<0)return!1}return!0}intersectsRay(e){if(a.min=-1/0,a.max=1/0,o.copy(this.position).sub(e.origin),i(e.direction,o,this.xAxis,this.extents.x,a)&&i(e.direction,o,this.yAxis,this.extents.y,a)&&i(e.direction,o,this.zAxis,this.extents.z,a))return a.min>0?a.min:a.max}contains(e){const t=e.x-this.position.x,n=e.y-this.position.y,r=e.z-this.position.z,i=Math.abs(t*this.xAxis.x+n*this.xAxis.y+r*this.xAxis.z),o=Math.abs(t*this.yAxis.x+n*this.yAxis.y+r*this.yAxis.z),a=Math.abs(t*this.zAxis.x+n*this.zAxis.y+r*this.zAxis.z);return!(i>this.extents.x||o>this.extents.y||a>this.extents.z)}distanceToPoint(e){return Math.sqrt(this.distanceToPointSquared(e))}distanceToPointSquared(e){const t=new r.Vector3;t.subVectors(e,this.position);const n=[t.dot(this.xAxis),t.dot(this.yAxis),t.dot(this.zAxis)];let i=0;for(let r=0;r<3;++r){const e=n[r],t=this.extents.getComponent(r);if(e<-t){const n=t+e;i+=n*n}else if(e>t){const n=e-t;i+=n*n}}return i}}t.OrientedBox3=s},63920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOrientedBox3Like=void 0,t.isOrientedBox3Like=function(e){const t=e;return void 0!==t.position&&void 0!==t.xAxis&&void 0!==t.yAxis&&void 0!==t.zAxis&&void 0!==t.extents}},35417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTransformLike=void 0,t.isTransformLike=function(e){const t=e;return void 0!==t.position&&void 0!==t.xAxis&&void 0!==t.yAxis&&void 0!==t.zAxis}},29307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVector2Like=void 0,t.isVector2Like=function(e){return e&&"number"===typeof e.x&&"number"===typeof e.y}},22024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVector3Like=void 0,t.isVector3Like=function(e){return e&&"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.z}},19573:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EarthConstants=void 0;class n{}t.EarthConstants=n,n.EQUATORIAL_CIRCUMFERENCE=40075016.68557849,n.EQUATORIAL_RADIUS=6378137,n.MIN_ELEVATION=-433,n.MAX_ELEVATION=8848,n.MAX_BUILDING_HEIGHT=828},2187:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equirectangularProjection=t.normalizedEquirectangularProjection=void 0;const r=n(534),i=n(5761),o=n(52022),a=n(11247),s=n(35946),l=n(63920),c=n(19573),u=n(72129);class h extends u.Projection{constructor(){super(...arguments),this.type=u.ProjectionType.Planar}getScaleFactor(e){return 1}worldExtent(e,t,n){return n||(n=new r.Box3),n.min.x=0,n.min.y=0,n.min.z=e,n.max.x=this.unitScale,n.max.y=this.unitScale/2,n.max.z=t,n}projectPoint(e,t){var n;return void 0===t&&(t={x:0,y:0,z:0}),t.x=(r.MathUtils.degToRad(e.longitude)+Math.PI)*h.geoToWorldScale*this.unitScale,t.y=(r.MathUtils.degToRad(e.latitude)+.5*Math.PI)*h.geoToWorldScale*this.unitScale,t.z=null!==(n=e.altitude)&&void 0!==n?n:0,t}unprojectPoint(e){return o.GeoCoordinates.fromRadians(e.y*h.worldToGeoScale/this.unitScale-.5*Math.PI,e.x*h.worldToGeoScale/this.unitScale-Math.PI,e.z)}unprojectAltitude(e){return e.z}projectBox(e,t){const n=this.projectPoint(new o.GeoCoordinates(e.center.latitude,e.center.longitude,0)),{latitudeSpanInRadians:i,longitudeSpanInRadians:c,altitudeSpan:u}=e,d=c*h.geoToWorldScale,p=i*h.geoToWorldScale;return t||(t=new r.Box3),a.isBox3Like(t)?(t.min.x=n.x-.5*d*this.unitScale,t.min.y=n.y-.5*p*this.unitScale,t.max.x=n.x+.5*d*this.unitScale,t.max.y=n.y+.5*p*this.unitScale,void 0!==u?(t.min.z=n.z-.5*u,t.max.z=n.z+.5*u):(t.min.z=0,t.max.z=0)):l.isOrientedBox3Like(t)&&(s.MathUtils.newVector3(1,0,0,t.xAxis),s.MathUtils.newVector3(0,1,0,t.yAxis),s.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=n.x,t.position.y=n.y,t.position.z=n.z,t.extents.x=.5*d*this.unitScale,t.extents.y=.5*p*this.unitScale,t.extents.z=Math.max(Number.EPSILON,.5*(null!==u&&void 0!==u?u:0))),t}unprojectBox(e){const t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return i.GeoBox.fromCoordinates(t,n)}groundDistance(e){return e.z}scalePointToSurface(e){return e.z=0,e}surfaceNormal(e,t){return void 0===t?t={x:0,y:0,z:1}:(t.x=0,t.y=0,t.z=1),t}}h.geoToWorldScale=1/(2*Math.PI),h.worldToGeoScale=2*Math.PI/1,t.normalizedEquirectangularProjection=new h(1),t.equirectangularProjection=new h(c.EarthConstants.EQUATORIAL_CIRCUMFERENCE)},35196:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityProjection=void 0;const r=n(534),i=n(5761),o=n(52022),a=n(11247),s=n(35946),l=n(63920),c=n(72129);class u extends c.Projection{constructor(){super(...arguments),this.type=c.ProjectionType.Planar}getScaleFactor(e){return 1}worldExtent(e,t,n){return n||(n=new r.Box3),n.min.x=-Math.PI,n.min.y=.5*-Math.PI,n.min.z=e,n.max.x=Math.PI,n.max.y=.5*Math.PI,n.max.z=t,n}projectPoint(e,t){var n;return t||(t={x:0,y:0,z:0}),t.x=r.MathUtils.degToRad(e.longitude),t.y=r.MathUtils.degToRad(e.latitude),t.z=null!==(n=e.altitude)&&void 0!==n?n:0,t}unprojectPoint(e){return o.GeoCoordinates.fromRadians(e.y,e.x,e.z)}unprojectAltitude(e){return e.z}projectBox(e,t){t||(t=new r.Box3);const n=this.projectPoint(new o.GeoCoordinates(e.south,e.west,e.minAltitude)),i=this.projectPoint(new o.GeoCoordinates(e.north,e.east,e.maxAltitude));return a.isBox3Like(t)?(t.min.x=n.x,t.min.y=n.y,t.min.z=n.z,t.max.x=i.x,t.max.y=i.y,t.max.z=i.z):l.isOrientedBox3Like(t)&&(s.MathUtils.newVector3(1,0,0,t.xAxis),s.MathUtils.newVector3(0,1,0,t.yAxis),s.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=.5*(n.x+i.x),t.position.y=.5*(n.y+i.y),t.position.z=.5*(n.z+i.z),t.extents.x=.5*(i.x-n.x),t.extents.y=.5*(i.y-n.y),t.extents.z=Math.max(Number.EPSILON,.5*(i.z-n.z))),t}unprojectBox(e){const t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return i.GeoBox.fromCoordinates(t,n)}groundDistance(e){return e.z}scalePointToSurface(e){return e.z=0,e}surfaceNormal(e,t){return void 0===t?t={x:0,y:0,z:1}:(t.x=0,t.y=0,t.z=1),t}}t.identityProjection=new u(1)},99428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webMercatorProjection=t.mercatorProjection=t.MercatorConstants=void 0;const r=n(534),i=n(5761),o=n(52022),a=n(93369),s=n(11247),l=n(35946),c=n(63920),u=n(19573),h=n(72129);class d extends h.Projection{constructor(){super(...arguments),this.type=h.ProjectionType.Planar}static clamp(e,t,n){return Math.min(Math.max(t,e),n)}static latitudeClamp(e){return d.clamp(e,-p.MAXIMUM_LATITUDE,p.MAXIMUM_LATITUDE)}static latitudeProject(e){return Math.log(Math.tan(.25*Math.PI+.5*e))/Math.PI}static latitudeClampProject(e){return d.latitudeProject(d.latitudeClamp(e))}static unprojectLatitude(e){return 2*Math.atan(Math.exp(Math.PI*e))-.5*Math.PI}getScaleFactor(e){return Math.cosh(2*Math.PI*(e.y/this.unitScale-.5))}worldExtent(e,t,n){return n||(n=new r.Box3),n.min.x=0,n.min.y=0,n.min.z=e,n.max.x=this.unitScale,n.max.y=this.unitScale,n.max.z=t,n}projectPoint(e,t){var n;let r;return r=e instanceof o.GeoCoordinates?e:new o.GeoCoordinates(e.latitude,e.longitude,e.altitude),t||(t={x:0,y:0,z:0}),t.x=(r.longitude+180)/360*this.unitScale,t.y=(.5*d.latitudeClampProject(r.latitudeInRadians)+.5)*this.unitScale,t.z=null!==(n=r.altitude)&&void 0!==n?n:0,t}unprojectPoint(e){return o.GeoCoordinates.fromRadians(d.unprojectLatitude(2*(e.y/this.unitScale-.5)),e.x/this.unitScale*2*Math.PI-Math.PI,e.z)}unprojectAltitude(e){return e.z}projectBox(e,t){var n;const i=this.projectPoint(e.center),o=(.5*d.latitudeClampProject(e.northEast.latitudeInRadians)+.5)*this.unitScale,a=(.5*d.latitudeClampProject(e.southWest.latitudeInRadians)+.5)*this.unitScale,u=.5*(o+a);i.y=u;const h=o-a,p=e.longitudeSpan/360*this.unitScale;if(t||(t=new r.Box3),s.isBox3Like(t)){t.min.x=i.x-.5*p,t.min.y=i.y-.5*h,t.max.x=i.x+.5*p,t.max.y=i.y+.5*h;const n=e.altitudeSpan;void 0!==n?(t.min.z=i.z-.5*n,t.max.z=i.z+.5*n):(t.min.z=0,t.max.z=0)}else{if(!c.isOrientedBox3Like(t))throw new Error("invalid bounding box");l.MathUtils.newVector3(1,0,0,t.xAxis),l.MathUtils.newVector3(0,1,0,t.yAxis),l.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=i.x,t.position.y=i.y,t.position.z=i.z,t.extents.x=.5*p,t.extents.y=.5*h,t.extents.z=Math.max(Number.EPSILON,.5*(null!==(n=e.altitudeSpan)&&void 0!==n?n:0))}return t}unprojectBox(e){const t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return i.GeoBox.fromCoordinates(t,n)}groundDistance(e){return e.z}scalePointToSurface(e){return e.z=0,e}surfaceNormal(e,t){return void 0===t?t={x:0,y:0,z:1}:(t.x=0,t.y=0,t.z=1),t}reprojectPoint(e,n,r){return e===this||e!==t.webMercatorProjection&&e!==t.mercatorProjection?super.reprojectPoint(e,n,r):(void 0===r&&(r={}),r.x=n.x,r.y=this.unitScale-n.y,r.z=n.z,r)}}class p{}t.MercatorConstants=p,p.MAXIMUM_LATITUDE=1.4844222297453322,t.mercatorProjection=new d(u.EarthConstants.EQUATORIAL_CIRCUMFERENCE),t.webMercatorProjection=new class extends d{projectPoint(e,t){var n;let r;r=e instanceof o.GeoCoordinates?e:new o.GeoCoordinates(e.latitude,e.longitude,e.altitude),t||(t={x:0,y:0,z:0}),t.x=(r.longitude+180)/360*this.unitScale;const i=Math.sin(d.latitudeClamp(r.latitudeInRadians));return t.y=(.5-Math.log((1+i)/(1-i))/(4*Math.PI))*this.unitScale,t.z=null!==(n=r.altitude)&&void 0!==n?n:0,t}unprojectPoint(e){const t=e.x/this.unitScale-.5,n=.5-e.y/this.unitScale,r=360*t,i=90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI;return new o.GeoCoordinates(i,r,e.z)}projectBox(e,t){const n=super.projectBox(e,t);if(s.isBox3Like(n)){const e=n.max.y;n.max.y=this.unitScale-n.min.y,n.min.y=this.unitScale-e}else c.isOrientedBox3Like(n)&&(l.MathUtils.newVector3(1,0,0,n.xAxis),l.MathUtils.newVector3(0,-1,0,n.yAxis),l.MathUtils.newVector3(0,0,-1,n.zAxis),n.position.y=this.unitScale-n.position.y);return n}unprojectBox(e){const t=this.unprojectPoint(e.min),n=this.unprojectPoint(e.max);return new i.GeoBox(new o.GeoCoordinates(n.latitude,t.longitude,t.altitude),new o.GeoCoordinates(t.latitude,n.longitude,n.altitude))}surfaceNormal(e,t){return void 0===t?t={x:0,y:0,z:-1}:(t.x=0,t.y=0,t.z=-1),t}localTangentSpace(e,t){return a.isGeoCoordinatesLike(e)?this.projectPoint(e,t.position):l.MathUtils.copyVector3(e,t.position),l.MathUtils.newVector3(1,0,0,t.xAxis),l.MathUtils.newVector3(0,-1,0,t.yAxis),l.MathUtils.newVector3(0,0,-1,t.zAxis),t}}(u.EarthConstants.EQUATORIAL_CIRCUMFERENCE)},72129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=t.ProjectionType=void 0;const r=n(93369),i=n(35946);!function(e){e[e.Planar=0]="Planar",e[e.Spherical=1]="Spherical"}(t.ProjectionType||(t.ProjectionType={}));t.Projection=class{constructor(e){this.unitScale=e}localTangentSpace(e,t){return r.isGeoCoordinatesLike(e)?this.projectPoint(e,t.position):i.MathUtils.copyVector3(e,t.position),i.MathUtils.newVector3(1,0,0,t.xAxis),i.MathUtils.newVector3(0,1,0,t.yAxis),i.MathUtils.newVector3(0,0,1,t.zAxis),t}reprojectPoint(e,t,n){return e===this?void 0===n?{x:t.x,y:t.y,z:t.z}:(n.x=t.x,n.y=t.y,n.z=t.z,n):this.projectPoint(e.unprojectPoint(t),n)}}},89399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sphereProjection=void 0;const r=n(534),i=n(52022),o=n(93369),a=n(11247),s=n(35946),l=n(63920),c=n(19573),u=n(99428),h=n(72129);function d(e){const t=1/Math.PI,n=Math.floor(2*(e*t+1));return r.MathUtils.clamp(n,0,4)}function p(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}function m(e,t,n){var i;const o=.5*(n+(null!==(i=e.maxAltitude)&&void 0!==i?i:0)),a=r.MathUtils.degToRad(e.west),s=r.MathUtils.degToRad(e.east),l=d(a),c=d(s);let u=Math.cos(a),h=u,p=Math.sin(a),m=p;for(let r=l+1;r<=c;r++){const e=(r+1&1)*((2&r)-1);u=Math.min(e,u),h=Math.max(e,h);const t=(1&r)*((2&r)-1);p=Math.min(t,p),m=Math.max(t,m)}const f=Math.cos(s);u=Math.min(f,u),h=Math.max(f,h);const g=Math.sin(s);p=Math.min(g,p),m=Math.max(g,m);const v=(h+u)*o,y=(h-u)*o,_=(m+p)*o,x=(m-p)*o,b=r.MathUtils.degToRad(e.south),w=r.MathUtils.degToRad(e.north),S=Math.sin(w),M=Math.sin(b),E=(S+M)*o,T=(S-M)*o;return t.min.x=v-y,t.min.y=_-x,t.min.z=E-T,t.max.x=v+y,t.max.y=_+x,t.max.z=E+T,t}class f extends h.Projection{constructor(){super(...arguments),this.type=h.ProjectionType.Spherical}worldExtent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Box3;const i=this.unitScale+t;return n.min.x=-i,n.min.y=-i,n.min.z=-i,n.max.x=i,n.max.y=i,n.max.z=i,n}projectPoint(e){return function(e,t,n){var i;const o=n+(null!==(i=e.altitude)&&void 0!==i?i:0),a=r.MathUtils.degToRad(e.latitude),s=r.MathUtils.degToRad(e.longitude),l=Math.cos(a);return t.x=o*l*Math.cos(s),t.y=o*l*Math.sin(s),t.z=o*Math.sin(a),t}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.MathUtils.newVector3(0,0,0),this.unitScale)}unprojectPoint(e){const t=e.x*e.x+e.y*e.y,n=Math.sqrt(t),r=e.z/n;if(isNaN(r))return i.GeoCoordinates.fromRadians(0,0,-this.unitScale);const o=Math.sqrt(t+e.z*e.z);return i.GeoCoordinates.fromRadians(Math.atan(r),Math.atan2(e.y,e.x),o-this.unitScale)}unprojectAltitude(e){const t=e.x*e.x+e.y*e.y+e.z*e.z;return Math.sqrt(t)-c.EarthConstants.EQUATORIAL_RADIUS}projectBox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Box3;var n,i;if(a.isBox3Like(t))return m(e,t,this.unitScale);if(l.isOrientedBox3Like(t)){if(e.longitudeSpan>=90){const n=m(e,new r.Box3,this.unitScale);return s.MathUtils.newVector3(1,0,0,t.xAxis),s.MathUtils.newVector3(0,1,0,t.yAxis),s.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=.5*(n.max.x+n.min.x),t.position.y=.5*(n.max.y+n.min.y),t.position.z=.5*(n.max.z+n.min.z),t.extents.x=.5*(n.max.x-n.min.x),t.extents.y=.5*(n.max.y-n.min.y),t.extents.z=.5*(n.max.z-n.min.z),t}const{south:o,west:a,north:l,east:c,center:u}=e,h=u.longitude,d=u.latitude,p=Math.cos(r.MathUtils.degToRad(o)),f=Math.sin(r.MathUtils.degToRad(o)),g=Math.cos(r.MathUtils.degToRad(a)),v=Math.sin(r.MathUtils.degToRad(a)),y=Math.cos(r.MathUtils.degToRad(l)),_=Math.sin(r.MathUtils.degToRad(l)),x=Math.cos(r.MathUtils.degToRad(c)),b=Math.sin(r.MathUtils.degToRad(c)),w=Math.cos(r.MathUtils.degToRad(h)),S=Math.sin(r.MathUtils.degToRad(h)),M=Math.cos(r.MathUtils.degToRad(d)),E=Math.sin(r.MathUtils.degToRad(d));let T,C,A;s.MathUtils.newVector3(w*M,S*M,E,t.zAxis),s.MathUtils.newVector3(-S,w,0,t.xAxis),s.MathUtils.newVector3(-w*E,-S*E,M,t.yAxis),o>=0?(T=Math.abs(p*(w*(v-b)+S*(x-g))),C=M*f-E*p,A=M*_-E*y*(w*x+S*b)):(l<=0?(T=Math.abs(y*(w*(v-b)+S*(x-g))),A=M*_-E*y):(T=Math.abs(w*(v-b)+S*(x-g)),A=M*_-E*y*(S*b+w*x)),C=M*f-E*p*(w*x+S*b));const P=.5*(this.unitScale+(null!==(n=e.maxAltitude)&&void 0!==n?n:0)),O=.5*(this.unitScale+(null!==(i=e.minAltitude)&&void 0!==i?i:0)),R=M*(w*x+S*b),L=Math.min(y*R+_*E,p*R+f*E);return s.MathUtils.newVector3(T*P,(A-C)*P,P-L*O,t.extents),s.MathUtils.newVector3(0,(C+A)*P,P+P,t.position),function(e,t,n,r){const i=e.x*r.x+t.x*r.y+n.x*r.z,o=e.y*r.x+t.y*r.y+n.y*r.z,a=e.z*r.x+t.z*r.y+n.z*r.z;r.x=i,r.y=o,r.z=a}(t.xAxis,t.yAxis,t.zAxis,t.position),t.position.x=t.position.x-t.zAxis.x*t.extents.z,t.position.y=t.position.y-t.zAxis.y*t.extents.z,t.position.z=t.position.z-t.zAxis.z*t.extents.z,t}throw new Error("Invalid bounding box")}unprojectBox(e){throw new Error("Method not implemented.")}getScaleFactor(e){return 1}groundDistance(e){return p(e)-this.unitScale}scalePointToSurface(e){const t=this.unitScale/(p(e)||1);return e.x*=t,e.y*=t,e.z*=t,e}surfaceNormal(e,t){void 0===t&&(t={x:0,y:0,z:0});const n=1/(p(e)||1);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t}reprojectPoint(e,t,n){if(e===u.mercatorProjection||e===u.webMercatorProjection){const{x:r,y:i,z:o}=t,a=this.unitScale,s=r/a-Math.PI,l=i/a-Math.PI,c=Math.exp(l),h=c*c,d=2*c/(h+1),p=(h-1)/(h+1),m=a+o;return void 0===n&&(n={}),n.x=Math.cos(s)*d*m,n.y=Math.sin(s)*d*m,n.z=p*m,e===u.webMercatorProjection&&(n.z=-n.z),n}return super.reprojectPoint(e,t,n)}localTangentSpace(e,t){let n;o.isGeoCoordinatesLike(e)?(this.projectPoint(e,t.position),n=e):(s.MathUtils.copyVector3(e,t.position),n=this.unprojectPoint(e));const i=r.MathUtils.degToRad(n.latitude),a=r.MathUtils.degToRad(n.longitude),l=Math.cos(a),c=Math.sin(a),u=Math.cos(i),h=Math.sin(i);return s.MathUtils.newVector3(l*u,c*u,h,t.zAxis),s.MathUtils.newVector3(-c,l,0,t.xAxis),s.MathUtils.newVector3(-l*h,-c*h,u,t.yAxis),t}}t.sphereProjection=new f(c.EarthConstants.EQUATORIAL_RADIUS)},56030:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transverseMercatorProjection=t.TransverseMercatorUtils=void 0;const r=n(534),i=n(5761),o=n(52022),a=n(11247),s=n(35946),l=n(63920),c=n(19573),u=n(72129);class h extends u.Projection{constructor(e){super(e),this.unitScale=e,this.type=u.ProjectionType.Planar,this.m_phi0=0,this.m_lambda0=0}static clampGeoPoint(e,t){const n=e.latitude,r=e.longitude,i=d.POLE_RADIUS,a=d.POLE_RADIUS_SQ,s=Math.round(r/90),l=90*s-r;if(s%2===0||Math.abs(l)>i)return e;const c=n-0,u=l*l+c*c;if(u<a){const e=Math.sqrt(u),t=(i-e)/e,a=1,s=0===l&&0===c?i*a:l;return new o.GeoCoordinates(n+c*t,r+s*t)}return e}getScaleFactor(e){return Math.cosh(2*(e.x/this.unitScale-.5)*Math.PI)}worldExtent(e,t,n){return n||(n=new r.Box3),n.min.x=0,n.min.y=0,n.min.z=e,n.max.x=this.unitScale,n.max.y=this.unitScale,n.max.z=t,n}projectPoint(e,t){var n;t||(t={x:0,y:0,z:0});const i=h.clampGeoPoint(e,this.unitScale),o=i.longitude/360+.5,a=1===o?0:Math.floor(o),s=r.MathUtils.degToRad(i.latitude),l=r.MathUtils.degToRad(i.longitude-360*a)-this.m_lambda0,c=Math.cos(s)*Math.sin(l);t.x=Math.atanh(c),t.y=Math.atan2(Math.tan(s),Math.cos(l))-this.m_phi0;const u=.5/Math.PI;return t.x=this.unitScale*(r.MathUtils.clamp(t.x*u+.5,0,1)+a),t.y=this.unitScale*r.MathUtils.clamp(t.y*u+.5,0,1),t.z=null!==(n=e.altitude)&&void 0!==n?n:0,t}unprojectPoint(e){const t=2*Math.PI,n=e.x/this.unitScale,r=e.y/this.unitScale,i=1===n?0:Math.floor(n),a=t*(n-.5-i),s=t*(r-.5),l=e.z||0,c=s+this.m_phi0,u=Math.asin(Math.sin(c)/Math.cosh(a)),h=this.m_lambda0+Math.atan2(Math.sinh(a),Math.cos(c))+i*t;return o.GeoCoordinates.fromRadians(u,h,l)}projectBox(e,t){const{north:n,south:i,east:c,west:u}=e,h=[e.center,e.northEast,e.southWest,new o.GeoCoordinates(i,c),new o.GeoCoordinates(n,u)],p=d.POLE_EDGE_DEG,m=u<90&&c>90,f=u<0&&c>0,g=u<p&&c>-p&&n>0&&i<0;u<-90&&c>-90&&(h.push(new o.GeoCoordinates(n,-90)),h.push(new o.GeoCoordinates(i,-90))),m&&(h.push(new o.GeoCoordinates(n,90)),h.push(new o.GeoCoordinates(i,90))),f&&(h.push(new o.GeoCoordinates(n,0)),h.push(new o.GeoCoordinates(i,0))),g&&(h.push(new o.GeoCoordinates(0,u)),h.push(new o.GeoCoordinates(0,c))),d.alignLatitude(h,h[0]);const v=h.map((e=>this.projectPoint(e))),y=v.map((e=>e.x)),_=v.map((e=>e.y)),x=v.map((e=>e.z)),b=Math.min(...y),w=Math.min(..._),S=Math.min(...x),M=Math.max(...y),E=Math.max(..._),T=Math.max(...x);if(t||(t=new r.Box3),a.isBox3Like(t))t.min.x=b,t.min.y=w,t.min.z=S,t.max.x=M,t.max.y=E,t.max.z=T;else{if(!l.isOrientedBox3Like(t))throw new Error("invalid bounding box");s.MathUtils.newVector3(1,0,0,t.xAxis),s.MathUtils.newVector3(0,1,0,t.yAxis),s.MathUtils.newVector3(0,0,1,t.zAxis),t.position.x=(b+M)/2,t.position.y=(w+E)/2,t.position.z=(S+T)/2,t.extents.x=(M-b)/2,t.extents.y=(E-w)/2,t.extents.z=(T-S)/2}return t}unprojectBox(e){const t=this.unitScale,n=e.min,r=e.max,a=[{x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:0},n,r,{x:n.x,y:r.y,z:0},{x:r.x,y:n.y,z:0}],s=.5*t,l=.25*t,c=.75*t,u=n.x<s&&r.x>s,h=n.y<s&&r.y>s,p=n.y<l&&r.y>l,m=n.y<c&&r.y>c;h&&(a.push({x:n.x,y:s,z:0}),a.push({x:r.x,y:s,z:0}),u&&a.push({x:s,y:s,z:0})),p&&(a.push({x:n.x,y:l,z:0}),a.push({x:r.x,y:l,z:0}),u&&a.push({x:s,y:l,z:0})),m&&(a.push({x:n.x,y:c,z:0}),a.push({x:r.x,y:c,z:0}),u&&a.push({x:s,y:c,z:0}));const f=a.map((e=>this.unprojectPoint(e)));d.alignLongitude(f,f[0]);const g=f.map((e=>e.latitude)),v=f.filter((e=>Math.abs(e.latitude)<90)).map((e=>e.longitude)),y=f.map((e=>{var t;return null!==(t=e.altitude)&&void 0!==t?t:0})),_=new o.GeoCoordinates(Math.min(...g),Math.min(...v),Math.min(...y)),x=new o.GeoCoordinates(Math.max(...g),Math.max(...v),Math.max(...y));return i.GeoBox.fromCoordinates(_,x)}unprojectAltitude(e){return e.z}groundDistance(e){return e.z}scalePointToSurface(e){return e.z=0,e}surfaceNormal(e,t){return void 0===t?t={x:0,y:0,z:-1}:(t.x=0,t.y=0,t.z=-1),t}}class d{static alignLatitude(e,t){for(const n of e)0===n.latitude&&(n.latitude=1e-9*t.latitude)}static alignLongitude(e,t){const n=t.longitude<0?180:-180,r=t.longitude<0?-180:180;for(const i of e)i.longitude===n&&(i.longitude=r)}}t.TransverseMercatorUtils=d,d.POLE_EDGE=1.4844222297453322,d.POLE_EDGE_DEG=r.MathUtils.radToDeg(d.POLE_EDGE),d.POLE_RADIUS=90-d.POLE_EDGE_DEG,d.POLE_RADIUS_SQ=Math.pow(d.POLE_RADIUS,2),t.transverseMercatorProjection=new h(c.EarthConstants.EQUATORIAL_CIRCUMFERENCE)},90458:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlatTileBoundingBoxGenerator=void 0;const r=n(534);t.FlatTileBoundingBoxGenerator=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.tilingScheme=e,this.minElevation=t,this.maxElevation=n,this.m_tilingScheme=e,this.m_worldBox=e.projection.worldExtent(t,n);const{min:r,max:i}=this.m_worldBox;this.m_worldDimensions={x:i.x-r.x,y:i.y-r.y,z:i.z-r.z}}get projection(){return this.m_tilingScheme.projection}get subdivisionScheme(){return this.m_tilingScheme.subdivisionScheme}getWorldBox(e,t){const n=e.level,i=this.subdivisionScheme.getLevelDimensionX(n),o=this.subdivisionScheme.getLevelDimensionY(n),a=this.m_worldDimensions.x/i,s=this.m_worldDimensions.y/o,l=this.m_worldBox.min.x+a*e.column,c=this.m_worldBox.min.y+s*e.row;return t||(t=new r.Box3),t.min.x=l,t.min.y=c,t.min.z=this.m_worldBox.min.z,t.max.x=l+a,t.max.y=c+s,t.max.z=this.m_worldBox.max.z,t}getGeoBox(e){const t=this.getWorldBox(e);return this.projection.unprojectBox(t)}}},40798:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.halfQuadTreeSubdivisionScheme=void 0;t.halfQuadTreeSubdivisionScheme=new class{getSubdivisionX(){return 2}getSubdivisionY(e){return 0===e?1:2}getLevelDimensionX(e){return 1<<e}getLevelDimensionY(e){return 0!==e?1<<e-1:1}}},97194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hereTilingScheme=void 0;const r=n(2187),i=n(40798),o=n(48217);t.hereTilingScheme=new o.TilingScheme(i.halfQuadTreeSubdivisionScheme,r.normalizedEquirectangularProjection)},80045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mercatorTilingScheme=void 0;const r=n(99428),i=n(18291),o=n(48217);t.mercatorTilingScheme=new o.TilingScheme(i.quadTreeSubdivisionScheme,r.mercatorProjection)},98058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polarTilingScheme=void 0;const r=n(56030),i=n(18291),o=n(48217);t.polarTilingScheme=new o.TilingScheme(i.quadTreeSubdivisionScheme,r.transverseMercatorProjection)},1216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTree=void 0;const r=n(1511);t.QuadTree=class{constructor(e){this.tilingScheme=e}visit(e){this.visitTileKey(r.TileKey.fromRowColumnLevel(0,0,0),e)}visitTileKey(e,t){if(t(e,this.tilingScheme.getGeoBox(e)))for(const n of this.tilingScheme.getSubTileKeys(e))this.visitTileKey(n,t)}}},18291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadTreeSubdivisionScheme=void 0;t.quadTreeSubdivisionScheme=new class{getSubdivisionX(){return 2}getSubdivisionY(){return 2}getLevelDimensionX(e){return 1<<e}getLevelDimensionY(e){return 1<<e}}},75294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubTiles=void 0;const r=n(1511);class i{constructor(e,t,n){this.tileKey=e,this.sizeX=t,this.sizeY=n}[Symbol.iterator](){return 2===this.sizeX&&2===this.sizeY?i.ZCurveIterator(this.tileKey):i.RowColumnIterator(this.tileKey,this.sizeX,this.sizeY)}}t.SubTiles=i,function(e){e.RowColumnIterator=function*(e,t,n){for(let i=0;i<n;i++)for(let o=0;o<t;o++)yield r.TileKey.fromRowColumnLevel(e.row*n+i,e.column*t+o,e.level+1)},e.ZCurveIterator=function*(e){for(let t=0;t<4;t++)yield r.TileKey.fromRowColumnLevel(e.row<<1|t>>1,e.column<<1|1&t,e.level+1)}}(i=t.SubTiles||(t.SubTiles={}))},59449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1511:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileKey=void 0;const n=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648,4294967296,8589934592,17179869184,34359738368,68719476736,137438953472,274877906944,549755813888,1099511627776,2199023255552,4398046511104,8796093022208,17592186044416,35184372088832,70368744177664,0x800000000000,281474976710656,562949953421312,0x4000000000000,0x8000000000000,4503599627370496];class r{constructor(e,t,n){this.row=e,this.column=t,this.level=n}static fromRowColumnLevel(e,t,n){return new r(e,t,n)}static fromQuadKey(e){const t=e.length;let n=0,i=0;for(let r=0;r<e.length;++r){const o=1<<r,a=parseInt(e.charAt(t-r-1),10);1&a&&(i|=o),2&a&&(n|=o)}return r.fromRowColumnLevel(n,i,t)}static fromMortonCode(e){let t=0,n=0,i=0,o=e;for(;o>1;){const e=1<<t;1&o&&(i|=e),2&o&&(n|=e),t++,o=(o-(3&o))/4}const a=r.fromRowColumnLevel(n,i,t);return a.m_mortonCode=e,a}static fromHereTile(e){const t=r.fromMortonCode(parseInt(e,10));return t.m_hereTile=e,t}static columnsAtLevel(e){return Math.pow(2,e)}static rowsAtLevel(e){return Math.pow(2,e)}static atCoords(e,t,n,i,o){return r.fromRowColumnLevel(Math.floor(n/(o/r.rowsAtLevel(e))),Math.floor(t/(i/r.columnsAtLevel(e))),e)}static parentMortonCode(e){return Math.floor(e/4)}parent(){if(0===this.level)throw new Error("Cannot get the parent of the root tile key");return r.fromRowColumnLevel(this.row>>>1,this.column>>>1,this.level-1)}changedLevelBy(e){const t=Math.max(0,this.level+e);let n=this.row,i=this.column;return e>=0?(n<<=e,i<<=e):(n>>>=-e,i>>>=-e),r.fromRowColumnLevel(n,i,t)}changedLevelTo(e){return this.changedLevelBy(e-this.level)}mortonCode(){if(void 0===this.m_mortonCode){let e=this.column,t=this.row,r=n[this.level<<1];for(let i=0;i<this.level;++i)1&e&&(r+=n[2*i]),1&t&&(r+=n[2*i+1]),e>>>=1,t>>>=1;this.m_mortonCode=r}return this.m_mortonCode}toHereTile(){return void 0===this.m_hereTile&&(this.m_hereTile=this.mortonCode().toString()),this.m_hereTile}toQuadKey(){let e="";for(let t=this.level;t>0;--t){const n=1<<t-1,r=0!==(this.column&n),i=0!==(this.row&n);e+=r&&i?"3":i?"2":r?"1":"0"}return e}equals(e){return this.row===e.row&&this.column===e.column&&this.level===e.level}addedSubKey(e){const t=r.fromQuadKey(0===e.length?"-":e),n=this.changedLevelBy(t.level);return r.fromRowColumnLevel(n.row+t.row,n.column+t.column,n.level)}addedSubHereTile(e){const t=r.fromHereTile(e),n=this.changedLevelBy(t.level);return r.fromRowColumnLevel(n.row+t.row,n.column+t.column,n.level)}getSubHereTile(e){const t=1<<2*e;return(this.mortonCode()&t-1|t).toString()}rowCount(){return r.rowsAtLevel(this.level)}columnCount(){return r.columnsAtLevel(this.level)}}t.TileKey=r},10550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileKeyUtils=t.powerOfTwo=void 0;const r=n(52022),i=n(1511);t.powerOfTwo=(()=>{let e=.5;return new Array(53).fill(0).map((()=>e*=2))})(),function(e){function n(e,t,n){const r=e.projection,o=e.subdivisionScheme,a=o.getLevelDimensionX(n),s=o.getLevelDimensionY(n),{min:l,max:c}=r.worldExtent(0,0),u=c.x-l.x,h=c.y-l.y;if(t.x<l.x||t.x>c.x)return null;if(t.y<l.y||t.y>c.y)return null;const d=Math.min(a-1,Math.floor(a*(t.x-l.x)/u)),p=Math.min(s-1,Math.floor(s*(t.y-l.y)/h));return i.TileKey.fromRowColumnLevel(p,d,n)}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const r=s(t,n);return e.mortonCode()+r}function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=0,i=e,o=0;for(;o<n;o++){const e=t.powerOfTwo[52-o];i>=e&&(i-=e,r+=t.powerOfTwo[n-1-o])}return r-=t.powerOfTwo[n-1],{offset:r,mortonCode:i}}function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=0;const i=t.powerOfTwo[n];for(e+=i/2;e<0;)e+=i;for(;e>=i;)e-=i;for(let o=0;o<n&&e>0;o++)1&e&&(r+=t.powerOfTwo[53-n+o]),e>>>=1;return r}e.geoCoordinatesToTileKey=function(e,t,r){return n(e,e.projection.projectPoint(t),r)},e.worldCoordinatesToTileKey=n,e.geoRectangleToTileKeys=function(t,n,o){const a=(e,t,n)=>e<t?n-(t-e)%(n-t):t+(e-t)%(n-t),s=(e,t,n)=>Math.min(Math.max(e,t),n),l=a(n.southWest.longitudeInRadians,-Math.PI,Math.PI),c=s(n.southWest.latitudeInRadians,-.5*Math.PI,.5*Math.PI),u=a(n.northEast.longitudeInRadians,-Math.PI,Math.PI),h=s(n.northEast.latitudeInRadians,-.5*Math.PI,.5*Math.PI),d=e.geoCoordinatesToTileKey(t,r.GeoCoordinates.fromRadians(c,l),o),p=e.geoCoordinatesToTileKey(t,r.GeoCoordinates.fromRadians(h,u),o),m=t.subdivisionScheme.getLevelDimensionX(o);if(!d||!p)throw new Error("Invalid coordinates");const f=d.column;let g=p.column;l>u&&(g+=g!==f?m:m-1);const v=Math.min(d.row,p.row),y=Math.max(d.row,p.row),_=new Array;for(let e=v;e<=y;++e)for(let t=f;t<=g;++t)_.push(i.TileKey.fromRowColumnLevel(e,t%m,o));return _},e.getKeyForTileKeyAndOffset=o,e.extractOffsetAndMortonKeyFromKey=a,e.getParentKeyFromKey=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const{offset:n,mortonCode:r}=a(e,t),s=i.TileKey.fromMortonCode(i.TileKey.parentMortonCode(r));return o(s,n,t)}}(t.TileKeyUtils||(t.TileKeyUtils={}))},73751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileTreeTraverse=void 0;const r=n(75294);t.TileTreeTraverse=class{constructor(e){this.m_subdivisionScheme=e}subTiles(e){const t=this.m_subdivisionScheme.getSubdivisionX(e.level),n=this.m_subdivisionScheme.getSubdivisionY(e.level);return new r.SubTiles(e,t,n)}}},48217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TilingScheme=void 0;const r=n(90458),i=n(10550),o=n(73751);t.TilingScheme=class{constructor(e,t){this.subdivisionScheme=e,this.projection=t,this.boundingBoxGenerator=new r.FlatTileBoundingBoxGenerator(this),this.tileTreeTraverse=new o.TileTreeTraverse(e)}getSubTileKeys(e){return this.tileTreeTraverse.subTiles(e)}getTileKey(e,t){return i.TileKeyUtils.geoCoordinatesToTileKey(this,e,t)}getTileKeys(e,t){return i.TileKeyUtils.geoRectangleToTileKeys(this,e,t)}getGeoBox(e){return this.boundingBoxGenerator.getGeoBox(e)}getWorldBox(e,t){return this.boundingBoxGenerator.getWorldBox(e,t)}}},34573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webMercatorTilingScheme=void 0;const r=n(99428),i=n(18291),o=n(48217);t.webMercatorTilingScheme=new o.TilingScheme(i.quadTreeSubdivisionScheme,r.webMercatorProjection)},63266:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(74699),t),i(n(87776),t),i(n(56216),t),i(n(76800),t)},56216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighPrecisionLine=t.HighPrecisionWireFrameLine=void 0;const r=n(534),i=n(76800);class o extends r.Line{constructor(e,t,n){super(e,t),this.matrixWorldInverse=new r.Matrix4,n&&this.setPositions(n)}get bufferGeometry(){return this.geometry}get shaderMaterial(){return this.material}setPositions(e){i.HighPrecisionUtils.setPositions(this,e)}setupForRendering(){this.onBeforeRender=(e,t,n,r,o,a)=>{i.HighPrecisionUtils.updateHpUniforms(this,n,this.shaderMaterial)}}updateMatrixWorld(e){const t=this.matrixWorldNeedsUpdate||e;super.updateMatrixWorld(e),t&&this.matrixWorldInverse.copy(this.matrixWorld).invert()}}t.HighPrecisionWireFrameLine=o;class a extends r.Mesh{constructor(e,t,n){super(e,t),this.matrixWorldInverse=new r.Matrix4,n&&this.setPositions(n)}get bufferGeometry(){return this.geometry}get shaderMaterial(){return this.material}setPositions(e){i.HighPrecisionUtils.setPositions(this,e)}setupForRendering(){this.onBeforeRender=(e,t,n,r,o,a)=>{i.HighPrecisionUtils.updateHpUniforms(this,n,this.shaderMaterial)}}updateMatrixWorld(e){const t=this.matrixWorldNeedsUpdate||e;super.updateMatrixWorld(e),t&&this.matrixWorldInverse.copy(this.matrixWorld).invert()}}t.HighPrecisionLine=a},32451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighPrecisionPoints=void 0;const r=n(85164),i=n(534),o=n(76800);class a extends i.Points{constructor(e,t,n,o,a){void 0===t&&(t=new r.HighPrecisionPointMaterial({color:o||r.HighPrecisionPointMaterial.DEFAULT_COLOR,opacity:void 0!==a?a:1})),super(void 0===e?new i.BufferGeometry:e,t),this.matrixWorldInverse=new i.Matrix4,n&&this.setPositions(n)}get bufferGeometry(){return this.geometry}clearGeometry(){return this.geometry=new i.BufferGeometry}get shaderMaterial(){return this.material}setPositions(e){o.HighPrecisionUtils.setPositions(this,e)}setupForRendering(){this.material.isHighPrecisionPointsMaterial&&void 0!==this.dimensionality&&this.material.setDimensionality(this.dimensionality),this.onBeforeRender=(e,t,n,r,i,a)=>{o.HighPrecisionUtils.updateHpUniforms(this,n,this.shaderMaterial)}}updateMatrixWorld(e){const t=this.matrixWorldNeedsUpdate||e;super.updateMatrixWorld(e),t&&this.matrixWorldInverse.copy(this.matrixWorld).invert()}}t.HighPrecisionPoints=a},76800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighPrecisionUtils=void 0;const r=n(85164),i=n(534),o=n(56216),a=n(32451),s=n(87776);!function(e){function t(e){return new i.Vector3(Math.fround(e.x),Math.fround(e.y),Math.fround(e.z))}function n(e,n){const r=(new i.Matrix4).copy(e.projectionMatrix).multiply(e.matrixWorldInverse),o=new i.Vector3(0,0,0).applyMatrix4(n),a=t(o);return{viewProjection:r,eyePosHi:a,eyePosLo:t(o.sub(a))}}function l(e){if(e.length>0){const t=e[0];if(void 0===t||null===t)throw Error("Empty element in positions");const n=new Array,r=new Array,o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const o of t){const e=Math.fround(o);r.push(o-e),n.push(e)}},a=e=>{o(e.x,e.y,e.z)};if(void 0!==t.z)e.forEach((e=>{a(e)}));else{if(n.length%3!==0)throw Error("Positions must be 3D, not 2D");e.forEach((e=>{o(e)}))}return{positionHigh:new i.Float32BufferAttribute(n,3),positionLow:new i.Float32BufferAttribute(r,3)}}return{positionHigh:new i.Float32BufferAttribute([],3),positionLow:new i.Float32BufferAttribute([],3)}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=new Array,i=e.length;for(let o=0;o<i;o+=t){for(let t=0;t<n;t++)r.push(e[o+t]);const i=e[o+n],a=e[o+n+1],s=e[o+n+2],l=Math.fround(i),c=i-l,u=Math.fround(a),h=a-u,d=Math.fround(s),p=s-d;r.push(l,u,d,c,h,p);for(let m=n+3;m<t;m++)r.push(e[o+m])}return r}function u(e,t){const n=l(t);return e.bufferGeometry.setAttribute("position",n.positionHigh),e.bufferGeometry.setAttribute("positionLow",n.positionLow),n.positionHigh.itemSize}e.doubleToFloatVec=t,e.makeFloatVec=function(e){const t=Math.fround(e.x),n=Math.fround(e.y),r=Math.fround(e.z),o=new i.Vector3(e.x-t,e.y-n,e.z-r);return e.x=Math.fround(t),e.y=Math.fround(n),e.z=Math.fround(r),o},e.createHighPrecisionCameraPos=n,e.updateHpUniforms=function(e,t,r){const i=n(t,e.matrixWorldInverse),o=i.viewProjection;if(void 0===r||!r.isMaterial)throw Error("High pecision line has no high precision material");if(!(r.uniforms&&r.uniforms.u_mvp&&r.uniforms.u_eyepos&&r.uniforms.u_eyepos_lowpart))throw Error("High pecision material has missing uniforms");r.uniforms.u_mvp.value=new Float32Array(o.elements),r.uniforms.u_eyepos.value=new Float32Array(i.eyePosHi.toArray()),r.uniforms.u_eyepos_lowpart.value=new Float32Array(i.eyePosLo.toArray())},e.createAttributes=l,e.addInterleavedAttributes3=c,e.setPositions=u,e.convertPositions=function(e){if(e.length<=0)return{positions:[]};const t=e[0];if(void 0===t||null===t)throw Error("Empty element in positions");const n=t;if(void 0===n.y&&void 0===n.z)return{positions:e};const r=new Array;return e.forEach((e=>{r.push(e.x,e.y,e.z)})),{positions:r}},e.createLine=function(e,t){const n=void 0!==t.lineWidth?t.lineWidth:5,a=void 0!==t.addCircles&&t.addCircles,l=void 0!==t.wireFrame&&t.wireFrame,u=[],h=[];s.triangulateLine(e,n,u,h,a);const d=new i.BufferGeometry,p=c(u,3),m=new i.InterleavedBuffer(new Float32Array(p),6),f=new i.InterleavedBufferAttribute(m,3,0,!1),g=new i.InterleavedBufferAttribute(m,3,3,!1);d.setAttribute("position",f),d.setAttribute("positionLow",g),d.setIndex(new i.BufferAttribute(new Uint32Array(h),1));const v=new r.HighPrecisionLineMaterial(t),y=l?new o.HighPrecisionWireFrameLine(d,v):new o.HighPrecisionLine(d,v);return y.setupForRendering(),y},e.createPoints=function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(n.length/3);const o=new i.BufferGeometry,s=r.isHighPrecisionPointMaterial(t)?t:new r.HighPrecisionPointMaterial(t),l=new a.HighPrecisionPoints(o,s);return u(l,e),l.setupForRendering(),l}}(t.HighPrecisionUtils||(t.HighPrecisionUtils={}))},74699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineGroup=t.createSimpleLineGeometry=t.createLineGeometry=t.LineGeometry=void 0;const r=n(15739),i=n(534),o=new i.Vector3,a=new i.Vector3,s=new i.Vector3,l=new i.Vector3,c=new i.Vector3,u=.1,h={attributes:[{name:"extrusionCoord",itemSize:3,offset:0},{name:"position",itemSize:3,offset:3},{name:"tangent",itemSize:3,offset:6},{name:"bitangent",itemSize:4,offset:9}],stride:13},d={attributes:[{name:"uv",itemSize:2,offset:h.stride},{name:"normal",itemSize:3,offset:h.stride+2}],stride:5},p={attributes:[...h.attributes,...d.attributes],stride:h.stride+d.stride},m={attributes:[{name:"extrusionCoord",itemSize:2,offset:0},{name:"position",itemSize:3,offset:2},{name:"positionLow",itemSize:3,offset:5},{name:"tangent",itemSize:3,offset:8},{name:"bitangent",itemSize:4,offset:11}],stride:15},f={attributes:[...m.attributes,...d.attributes],stride:m.stride+d.stride};class g{constructor(){this.vertices=[],this.vertexColors=[],this.indices=[]}}function v(e,t){return t?e?f:m:e?p:h}function y(e,t,n,i,o,h){let d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new g,p=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(0===t.length)return d;const m=v(void 0!==o,p).stride,f=t.length/3,y=new Array(f),_=new Array(t.length-3),x=d.vertices.length/m,w=void 0!==i&&i.length>0,S=void 0!==o&&o.length>0,M=void 0!==h&&h.length&&t.length;r.assert(!w||i.length===f),r.assert(!S||o.length/2===f),r.assert(!M||h.length===t.length);let E=u;y[0]=E;for(let r=0;r<f-1;++r){let e=0;for(let n=0;n<3;++n){const i=t[3*(r+1)+n]-t[3*r+n];_[3*r+n]=i,e+=i*i}E+=Math.sqrt(e),y[r+1]=E}const T=w?Math.abs(i[i.length-1]-i[0]):1,C=y[y.length-1]/T;if(w)for(let r=0;r<f;++r)y[r]=i[r]*C+u;let A=!0;for(let r=0;r<3;++r)A=A&&t[r]===t[t.length-3+r];const P=[],O=(r,i,u,m,f)=>{P.length=0,d.vertices.push(m,-1*f,C),P.push(m,1*f,C);for(let e=0;e<3;++e){if(p){const n=Math.fround(t[3*r+e]),i=t[3*r+e]-n;d.vertices.push(n,i),P.push(n,i)}else d.vertices.push(t[3*r+e]),P.push(t[3*r+e]);a.setComponent(e,t[3*r+e])}for(let e=0;e<3;++e)s.setComponent(e,_[i+e]),l.setComponent(e,_[u+e]);s.normalize(),d.vertices.push(s.x,s.y,s.z),P.push(s.x,s.y,s.z),a.add(e),n.surfaceNormal(a,a);const g=b(a,s,l.normalize(),c);d.vertices.push(c.x,c.y,c.z,g),P.push(c.x,c.y,c.z,g),S&&(d.vertices.push(o[2*r],o[2*r+1]),P.push(o[2*r],o[2*r+1]),d.vertices.push(a.x,a.y,a.z),P.push(a.x,a.y,a.z)),d.vertices.push(...P),M&&(d.vertexColors.push(h[3*r],h[3*r+1],h[3*r+2]),d.vertexColors.push(h[3*r],h[3*r+1],h[3*r+2]))};for(let r=0;r<f;++r){const e=A&&0===r?_.length-3:3*Math.max(0,r-1),t=A&&r===f-1?0:Math.min(3*r,_.length-3);r>0&&O(r,e,t,y[r-1],y[r]),r+1<f&&O(r,e,t,-1*y[Math.min(r,y.length-1)],y[Math.min(r+1,y.length-1)])}for(let r=0;r<f-1;++r){const e=x+4*r;d.indices.push(e,e+1,e+2,e+2,e+1,e+3)}return d}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new g;if(0===e.length)return n;const r=e.length/3;let i=n.vertices.length/3;const o=void 0!==t&&t.length&&e.length;for(let a=0;a<r;++a,i++){a>0&&n.indices.push(i),a<r-1&&n.indices.push(i);for(let r=0;r<3;++r)n.vertices.push(e[3*a+r]),o&&n.vertexColors.push(t[3*a+r])}return n}t.LineGeometry=g,t.createLineGeometry=y,t.createSimpleLineGeometry=_;class x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.hasNormalsAndUvs=e,this.highPrecision=t,this.isSimple=n,this.m_geometry=new g}static createGeometry(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(arguments.length>6&&void 0!==arguments[6]&&arguments[6])return r.setAttribute("position",new i.BufferAttribute(new Float32Array(e),3)),t.length===e.length&&r.setAttribute("color",new i.BufferAttribute(new Float32Array(t),3)),r.setIndex(new i.BufferAttribute(new Uint32Array(n),1)),r;{const s=v(o,a),l=new i.InterleavedBuffer(new Float32Array(e),s.stride);return s.attributes.forEach((e=>{const t=new i.InterleavedBufferAttribute(l,e.itemSize,e.offset,!1);r.setAttribute(e.name,t)})),t.length===e.length&&r.setAttribute("color",new i.BufferAttribute(new Float32Array(t),3)),r.setIndex(new i.BufferAttribute(new Uint32Array(n),1)),r}}clear(){this.m_geometry.vertices=[],this.m_geometry.vertexColors=[],this.m_geometry.indices=[]}add(e,t,n,i,o,a){return this.isSimple?_(t,a,this.m_geometry):(r.assert(!this.hasNormalsAndUvs||void 0!==o),y(e,t,n,i,o,a,this.m_geometry,this.highPrecision)),this}get vertices(){return this.m_geometry.vertices}get vertexColors(){return this.m_geometry.vertexColors}get indices(){return this.m_geometry.indices}get vertexAttributes(){return v(this.hasNormalsAndUvs,this.highPrecision).attributes}get stride(){return v(this.hasNormalsAndUvs,this.highPrecision).stride}createGeometry(e){return void 0===e&&(e=new i.BufferGeometry),x.createGeometry(this.m_geometry.vertices,this.m_geometry.vertexColors,this.m_geometry.indices,e,this.hasNormalsAndUvs,this.highPrecision)}}function b(e,t,n,r){let i=0;return t.equals(n)||(i=Math.acos(t.dot(n))*Math.sign(e.dot(o.copy(t).cross(n))),Number.isNaN(i)&&(i=0)),r.copy(t).add(n).normalize().cross(e).normalize(),i}t.LineGroup=x},87776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructLineWidth=t.reconstructLine=t.triangulateLine=t.numCirclePoints=void 0;const r=n(534),i=new r.Vector3(0,0,1),o=[0,1,2,1,3,2],a=[0,1,3,3,1,2,0,3,4,5,4,3],s=Math.PI/8;function l(e,t,n,r,i,o){const a=i.length/3;i.push(e,t,0);for(let l=0;l<9;++l){const c=s*l+Math.PI/2+n;i.push(e+r*Math.cos(c),t+r*Math.sin(c),0),o.push(a,a+l+1,a+(l+1)%9+1)}}t.numCirclePoints=function(e){return 9},t.triangulateLine=function(e,t,n,s){let c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c;if(e.length<3)return;const h=new r.Vector2;if(c){const r=3!==e.length?h.set(e[3]-e[0],e[4]-e[1]).angle():0;l(e[0],e[1],r,t,n,s)}const d=n.length/3,p=new r.Vector3,m=new r.Vector3,f=new r.Vector3,g=new r.Vector3,v=new r.Vector3,y=new r.Vector3,_=new r.Vector3,x=new r.Vector3,b=new r.Vector3,w=e.length/3;let S=0;for(let r=0;r<w;++r){let l=!1;if(m.set(e[3*r],e[3*r+1],e[3*r+2]),r+1<w){if(f.set(e[3*(r+1)],e[3*(r+1)+1],e[3*(r+1)+2]),g.copy(f).sub(m).normalize().cross(i),v.copy(g),r>0&&(v.add(p).multiplyScalar(1-.5*g.dot(p)),l=p.angleTo(g)>Math.PI/2,l)){const e=t/Math.cos(g.angleTo(p)/2);y.copy(g).add(p).normalize().multiplyScalar(-e).add(m),_.copy(p).multiplyScalar(t).add(m),x.copy(g).add(p).normalize().multiplyScalar(e).add(m),b.copy(g).multiplyScalar(t).add(m)}l?n.push(y.x,y.y,y.z,_.x,_.y,_.z,x.x,x.y,x.z,b.x,b.y,b.z):(y.copy(v).multiplyScalar(-t).add(m),_.copy(v).multiplyScalar(t).add(m),n.push(y.x,y.y,y.z,_.x,_.y,_.z)),p.copy(g)}else y.copy(p).multiplyScalar(-t).add(m),_.copy(p).multiplyScalar(t).add(m),n.push(y.x,y.y,y.z,_.x,_.y,_.z);r!==w-1&&((l?a:o).forEach((e=>s.push(d+S+e))),S+=l?4:2)}if(u){const r=2!==e.length?h.set(e[3*(w-3)]-e[3*(w-2)],e[3*(w-3)+1]-e[3*(w-2)+1]).angle():Math.PI;l(e[3*(w-2)],e[3*(w-2)+1],r,t,n,s)}},t.reconstructLine=function(e,t){const n=new Float32Array(e.length/2);for(let r=3*t,i=2*r;r<n.length;r+=3,i+=6)n[r]=e[i]+.5*(e[i+3]-e[i]),n[r+1]=e[i+1]+.5*(e[i+3+1]-e[i+1]),n[r+2]=e[i+2]+.5*(e[i+3+2]-e[i+2]);return n},t.reconstructLineWidth=function(e,t){const n=e[2*t+3]-e[2*t],r=e[2*t+3+1]-e[2*t+1],i=e[2*t+3+2]-e[2*t+2];return.5*Math.sqrt(n*n+r*r+i*i)}},51106:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28350),t)},28350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.Entry=void 0;const r=n(15739);class i{constructor(e,t,n,r,i){this.key=e,this.value=t,this.size=n,this.newer=r,this.older=i}}t.Entry=i;t.LRUCache=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1;this.m_size=0,this.m_map=new Map,this.m_newest=null,this.m_oldest=null,this.m_capacity=e,this.m_sizeFunction=t}forEach(e,t){let n=this.m_newest;for(;null!==n;){const r=n.older;e.call(t,n.value,n.key,this),n=r}}get size(){return this.m_size}get capacity(){return this.m_capacity}get map(){return this.m_map}get newest(){return this.m_newest}get oldest(){return this.m_oldest}setCapacity(e){this.m_capacity=e,this.evict()}setCapacityAndMeasure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>1;this.m_capacity=e,this.m_sizeFunction=t,this.shrinkToCapacity()}shrinkToCapacity(){let e=0;const t=this.m_sizeFunction;let n=this.m_newest;for(;null!==n;){const r=t(n.value);n.size=r,e+=r,n=n.older}this.m_size=e,this.evict()}set(e,t){const n=this.m_sizeFunction(t);let o=this.m_map.get(e);if(void 0!==o)this.m_size=this.m_size-o.size+n,o.value=t,o.size=n,this.promoteEntry(o),this.evict();else{if(n>this.m_capacity)return;if(o=new i(e,t,n,null,null),0===this.m_map.size)this.m_newest=this.m_oldest=o;else{r.assert(null!==this.m_newest);const e=this.m_newest;o.older=this.m_newest,e.newer=o,this.m_newest=o}this.m_map.set(e,o),this.m_size+=n,this.evict()}}get(e){const t=this.m_map.get(e);if(void 0!==t)return this.promoteEntry(t),t.value}has(e){return this.m_map.has(e)}clear(){this.m_newest=this.m_oldest=null,this.m_size=0,this.m_map.clear()}evictAll(){const e=this.evictionCallback;void 0!==e&&this.forEach(((t,n)=>e(n,t))),this.clear()}evictSelected(e,t){const n=this.evictionCallback;let r=this.m_newest;for(;null!==r;){const i=r.older;e.call(t,r.value,r.key)&&(void 0!==n&&n(r.key,r.value),this.deleteEntry(r),this.m_map.delete(r.key)),r=i}}delete(e){const t=this.m_map.get(e);return void 0!==t&&(this.deleteEntry(t),this.m_map.delete(e))}evict(){for(;null!==this.m_oldest&&this.m_size>this.m_capacity;){if(void 0===this.evictOldest())return}}evictOldest(){r.assert(null!==this.m_oldest);const e=this.m_oldest;r.assert(null===e.older);let t=e;if(void 0!==this.canEvict)for(;!this.canEvict(t.key,t.value);){if(null===t.newer)return;t=t.newer}if(t===e)this.m_oldest=t.newer,null!==t.newer&&(r.assert(t.newer.older===t),t.newer.older=null);else{if(null===t.newer)return;r.assert(t.newer.older===t),t.newer.older=t.older,null!==t.older&&(t.older.newer=t.newer)}const n=this.m_map.delete(t.key);return r.assert(!0===n),n&&void 0!==this.evictionCallback&&this.evictionCallback(t.key,t.value),this.m_size-=t.size,t}deleteEntry(e){e===this.m_newest?this.m_newest=e.older:e.newer?e.newer.older=e.older:r.assert(!1),e===this.m_oldest?this.m_oldest=e.newer:e.older?e.older.newer=e.newer:r.assert(!1),this.m_size-=e.size}promoteEntry(e){if(e===this.m_newest)return;e.newer&&(r.assert(e.newer.older===e),e.newer.older=e.older),e.older&&(r.assert(e.older.newer===e),e.older.newer=e.newer),e===this.m_oldest&&(this.m_oldest=e.newer),e.newer=null,e.older=this.m_newest,r.assert(null!==this.m_newest);const t=this.m_newest;r.assert(null===t.newer),t.newer=e,this.m_newest=e}}},48218:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(48971),t),i(n(73530),t),i(n(19007),t),i(n(53161),t),i(n(36814),t),i(n(99424),t),i(n(74034),t)},74034:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraAnimationBuilder=void 0;const r=n(31201),i=n(534),o=n(99424);t.CameraAnimationBuilder=class{static getLookAtFromView(e){return{target:e.target,heading:e.heading,tilt:e.tilt,distance:e.targetDistance}}static appendControlPoint(e,t,n){n=null!==n&&void 0!==n?n:10,e.controlPoints.length>0&&(void 0===t.timestamp||t.timestamp<=e.controlPoints[e.controlPoints.length-1].timestamp)&&(t.timestamp=e.controlPoints[e.controlPoints.length-1].timestamp+n),e.controlPoints.push(t)}static prependControlPoint(e,t,n){n=void 0!==n?n:10;for(const r of e.controlPoints)r.timestamp+=n;t.timestamp=0,e.controlPoints.unshift(t)}static createBowFlyToOptions(e,t,n,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;const l=[t],c=new i.Vector3;e.projection.projectPoint(t.target,c);let u=null!==a&&void 0!==a?a:2*c.distanceTo(e.projection.projectPoint(n.target));u=Math.max(t.distance+n.distance,u);const h=r.GeoCoordinates.lerp(t.target,n.target,.25),d=new o.ControlPoint({target:h,distance:u,timestamp:s/3,tilt:r.MathUtils.interpolateAnglesDeg(t.tilt,n.tilt,.25),heading:r.MathUtils.interpolateAnglesDeg(t.heading,n.heading,.25)});l.push(d);const p=r.GeoCoordinates.lerp(t.target,n.target,.75),m=new o.ControlPoint({target:p,distance:u,timestamp:s/3*2,tilt:r.MathUtils.interpolateAnglesDeg(t.tilt,n.tilt,.75),heading:r.MathUtils.interpolateAnglesDeg(t.heading,n.heading,.75)});return l.push(m),n.timestamp=s,l.push(n),{controlPoints:l}}static createOrbitOptions(e){const t=[e],n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)/3;for(let r=1;r<4;r++){const e=t[r-1];t.push(Object.assign(Object.assign({},e),{heading:e.heading-120,timestamp:e.timestamp+n}))}return{controlPoints:t}}}},99424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraKeyTrackAnimation=t.ControlPoint=void 0;const r=n(31201),i=n(48991),o=n(15739),a=n(534),s=o.LoggerManager.instance.create("CameraKeyTrackAnimation");t.ControlPoint=class{constructor(e){var t,n,i,o;this.timestamp=0,this.timestamp=e.timestamp,this.target=e.target?r.GeoCoordinates.fromObject(e.target):new r.GeoCoordinates(0,0),this.tilt=null!==(t=e.tilt)&&void 0!==t?t:0,this.heading=null!==(n=e.heading)&&void 0!==n?n:0,this.distance=null!==(i=e.distance)&&void 0!==i?i:0,this.name=null!==(o=e.name)&&void 0!==o?o:Date.now().toString()}};class l extends a.Object3D{constructor(e){super(),this.distance=0,this.name=e}}t.CameraKeyTrackAnimation=class{constructor(e,t){var n,r,i,o;this.m_mapView=e,this.m_options=t,this.m_dummy=new l("dummy"),this.m_azimuthAxis=new a.Vector3(0,0,1),this.m_altitudeAxis=new a.Vector3(1,0,0),this.m_running=!1,this.m_lastFrameTime=0;const c=void 0!==this.m_options.interpolation?this.m_options.interpolation:a.InterpolateSmooth;this.m_options.loop=null!==(n=this.m_options.loop)&&void 0!==n?n:a.LoopOnce,this.m_options.repetitions=null!==(r=this.m_options.repetitions)&&void 0!==r?r:1,this.m_options.rotateOnlyClockwise=null===(i=this.m_options.rotateOnlyClockwise)||void 0===i||i,this.m_name=(null!==(o=this.m_options.name)&&void 0!==o?o:"CameraKeyTrackAnimation")+Date.now();const u=this.m_options.controlPoints.map((e=>e.timestamp)),h=[],d=[];this.m_options.controlPoints.map((e=>{const t=this.m_mapView.projection.projectPoint(e.target);h.push(t.x),h.push(t.y),h.push(t.z);const n=new a.Quaternion;n.setFromAxisAngle(this.m_azimuthAxis,a.MathUtils.degToRad(e.heading)),n.multiply((new a.Quaternion).setFromAxisAngle(this.m_altitudeAxis,a.MathUtils.degToRad(e.tilt))),d.push(n.x),d.push(n.y),d.push(n.z),d.push(n.w)}));const p=new a.VectorKeyframeTrack(".position",u,h,c),m=new a.QuaternionKeyframeTrack(".quaternion",u,d,c),f=new a.NumberKeyframeTrack(".distance",u,this.m_options.controlPoints.map((e=>e.distance)),c);this.m_animationClip=new a.AnimationClip("cameraflyoveranimation",-1,[p,m,f]),this.m_animationClip.validate()||s.error("Review the entered controlpoints for: ",this.m_name,", The Animation was provided with invalid track data"),this.m_animationClip.resetDuration(),this.m_animationClip.trim(),this.m_animationMixer=new a.AnimationMixer(this.m_dummy),this.m_animationAction=this.m_animationMixer.clipAction(this.m_animationClip),this.m_animationAction.setLoop(this.m_options.loop,this.m_options.repetitions),this.m_animationAction.clampWhenFinished=!0,this.m_animateCb=this.animate.bind(this),this.m_animationMixer.addEventListener("finished",this.stop.bind(this))}set loop(e){this.m_options.loop=e,this.m_animationAction.setLoop(this.m_options.loop,this.m_options.repetitions)}set repetitions(e){this.m_options.repetitions=e,this.m_animationAction.setLoop(this.m_options.loop,this.m_options.repetitions)}set rotateOnlyClockwise(e){this.m_options.rotateOnlyClockwise=e}start(e,t){this.m_running&&this.stop(),this.m_onFinished=t,this.m_animationAction.reset().play(),this.m_lastFrameTime=Date.now(),this.m_mapView.addEventListener(i.MapViewEventNames.Render,this.m_animateCb),this.m_mapView.beginAnimation(),this.m_running=!0}stop(){this.m_mapView.removeEventListener(i.MapViewEventNames.Render,this.m_animateCb),this.m_mapView.endAnimation(),void 0!==this.m_onFinished&&window.setTimeout(this.m_onFinished,0),this.m_running=!1}isRunning(){return this.m_running}updateCameraFromDummy(){let e=a.MathUtils.radToDeg(this.m_azimuthAxis.clone().applyQuaternion(this.m_dummy.quaternion).angleTo(this.m_azimuthAxis));e=a.MathUtils.clamp(e,0,i.MapViewUtils.MAX_TILT_DEG);const t=this.m_altitudeAxis.clone().applyQuaternion(this.m_dummy.quaternion);let n=t.angleTo(this.m_altitudeAxis);if(this.m_options.rotateOnlyClockwise){this.m_azimuthAxis.dot(t.normalize().cross(this.m_altitudeAxis))>=0&&(n=2*Math.PI-n)}const r=a.MathUtils.radToDeg(n),o=this.m_mapView.projection.unprojectPoint(this.m_dummy.position),l=Math.max(0,this.m_dummy.distance);(isNaN(e)||isNaN(r)||isNaN(l)||!o.isValid())&&s.error("Cannot update due to invalid data",e,r,l,o),this.m_mapView.lookAt({target:o,distance:l,tilt:e,heading:r})}animate(e){const t=(Date.now()-this.m_lastFrameTime)/1e3;this.m_animationMixer.update(t),this.m_lastFrameTime=Date.now(),this.updateCameraFromDummy()}}},19007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LongPressHandler=void 0;t.LongPressHandler=class{constructor(e,t,n){this.element=e,this.onLongPress=t,this.onTap=n,this.timeout=500,this.moveThreshold=5,this.buttonId=0,this.m_pressEvent=void 0,this.m_timerId=void 0,this.m_moveHandlerRegistered=!1,this.m_boundPointerMoveHandler=this.onPointerMove.bind(this),this.m_boundMouseDownHandler=this.onMouseDown.bind(this),this.m_boundTouchStartHandler=this.onTouchStart.bind(this),this.m_boundMouseUpHandler=this.onMouseUp.bind(this),this.m_boundTouchEndHandler=this.onTouchEnd.bind(this),this.element.addEventListener("mousedown",this.m_boundMouseDownHandler),this.element.addEventListener("touchstart",this.m_boundTouchStartHandler),this.element.addEventListener("mouseup",this.m_boundMouseUpHandler),this.element.addEventListener("touchend",this.m_boundTouchEndHandler)}dispose(){this.cancel(),this.element.removeEventListener("mousedown",this.m_boundMouseDownHandler),this.element.removeEventListener("touchstart",this.m_boundTouchStartHandler),this.element.removeEventListener("mouseup",this.m_boundMouseUpHandler),this.element.removeEventListener("touchend",this.m_boundTouchEndHandler)}startPress(e){var t,n;this.cancelTimer(),this.m_pressEvent=null!==(n=null===(t=e.changedTouches)||void 0===t?void 0:t[0])&&void 0!==n?n:e,this.m_timerId=setTimeout((()=>this.onTimeout()),this.timeout),this.addPointerMoveHandler()}onMouseDown(e){e.button===this.buttonId&&this.startPress(e)}onTouchStart(e){this.m_pressEvent?this.cancel():1===e.changedTouches.length&&this.startPress(e)}onMouseUp(e){var t;this.m_pressEvent&&e.button===this.buttonId&&(this.cancel(),null===(t=this.onTap)||void 0===t||t.call(this,e))}onTouchEnd(e){var t;1===e.changedTouches.length&&e.changedTouches[0].identifier===this.m_pressEvent.identifier&&(this.cancel(),null===(t=this.onTap)||void 0===t||t.call(this,e.changedTouches[0]))}onPointerMove(e){var t,n;if(void 0===this.m_pressEvent)return;const{clientX:r,clientY:i}=null!==(n=null===(t=e.changedTouches)||void 0===t?void 0:t[0])&&void 0!==n?n:e;Math.abs(r-this.m_pressEvent.clientX)+Math.abs(i-this.m_pressEvent.clientY)>this.moveThreshold&&this.cancel()}cancel(){this.m_pressEvent=void 0,this.cancelTimer(),this.removePointerMoveHandler()}cancelTimer(){void 0!==this.m_timerId&&(clearTimeout(this.m_timerId),this.m_timerId=void 0)}addPointerMoveHandler(){this.m_moveHandlerRegistered||(this.element.addEventListener("mousemove",this.m_boundPointerMoveHandler),this.element.addEventListener("touchmove",this.m_boundPointerMoveHandler),this.m_moveHandlerRegistered=!0)}removePointerMoveHandler(){this.m_moveHandlerRegistered&&(this.element.removeEventListener("mousemove",this.m_boundPointerMoveHandler),this.element.removeEventListener("touchmove",this.m_boundPointerMoveHandler),this.m_moveHandlerRegistered=!1)}onTimeout(){const e=this.m_pressEvent;this.m_timerId=void 0,this.cancel(),void 0!==e&&this.onLongPress(e)}}},36814:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraPanAnimation=t.CameraRotationAnimation=t.CameraAnimation=t.InterpolationFunction=t.EasingFunction=void 0;const r=n(31201),i=n(15739),o=n(88926),a=n(534),s=n(48971);var l,c;!function(e){e[e.Linear=0]="Linear",e[e.QuadraticIn=1]="QuadraticIn",e[e.QuadraticOut=2]="QuadraticOut",e[e.QuadraticInOut=3]="QuadraticInOut",e[e.CubicIn=4]="CubicIn",e[e.CubicOut=5]="CubicOut",e[e.CubicInOut=6]="CubicInOut",e[e.QuarticIn=7]="QuarticIn",e[e.QuarticOut=8]="QuarticOut",e[e.QuarticInOut=9]="QuarticInOut",e[e.QuinticIn=10]="QuinticIn",e[e.QuinticOut=11]="QuinticOut",e[e.QuinticInOut=12]="QuinticInOut",e[e.SinusoidalIn=13]="SinusoidalIn",e[e.SinusoidalOut=14]="SinusoidalOut",e[e.SinusoidalInOut=15]="SinusoidalInOut",e[e.ExponentialIn=16]="ExponentialIn",e[e.ExponentialOut=17]="ExponentialOut",e[e.ExponentialInOut=18]="ExponentialInOut",e[e.CircularIn=19]="CircularIn",e[e.CircularOut=20]="CircularOut",e[e.CircularInOut=21]="CircularInOut",e[e.ElasticIn=22]="ElasticIn",e[e.ElasticOut=23]="ElasticOut",e[e.ElasticInOut=24]="ElasticInOut",e[e.BackIn=25]="BackIn",e[e.BackOut=26]="BackOut",e[e.BackInOut=27]="BackInOut",e[e.BounceIn=28]="BounceIn",e[e.BounceOut=29]="BounceOut",e[e.BounceInOut=30]="BounceInOut"}(l=t.EasingFunction||(t.EasingFunction={})),function(e){e[e.Linear=0]="Linear",e[e.Bezier=1]="Bezier",e[e.CatmullRom=2]="CatmullRom"}(c=t.InterpolationFunction||(t.InterpolationFunction={}));class u{constructor(e,t){this.mapView=e,this.name=t,this.running=!1,this.stopped=!1,this.duration=1e4,this.repeat=0,this.easing=o.Easing.Linear.None,function(){if(void 0!==h)return;h=new Map,d=new Map,h.set(l.Linear,o.Easing.Linear.None),h.set(l.QuadraticIn,o.Easing.Quadratic.In),h.set(l.QuadraticOut,o.Easing.Quadratic.Out),h.set(l.QuadraticInOut,o.Easing.Quadratic.InOut),h.set(l.CubicIn,o.Easing.Cubic.In),h.set(l.CubicOut,o.Easing.Cubic.Out),h.set(l.CubicInOut,o.Easing.Cubic.InOut),h.set(l.QuarticIn,o.Easing.Quartic.In),h.set(l.QuarticOut,o.Easing.Quartic.Out),h.set(l.QuarticInOut,o.Easing.Quartic.InOut),h.set(l.QuinticIn,o.Easing.Quintic.In),h.set(l.QuinticOut,o.Easing.Quintic.Out),h.set(l.QuinticInOut,o.Easing.Quintic.InOut),h.set(l.SinusoidalIn,o.Easing.Sinusoidal.In),h.set(l.SinusoidalOut,o.Easing.Sinusoidal.Out),h.set(l.SinusoidalInOut,o.Easing.Sinusoidal.InOut),h.set(l.ExponentialIn,o.Easing.Exponential.In),h.set(l.ExponentialOut,o.Easing.Exponential.Out),h.set(l.ExponentialInOut,o.Easing.Exponential.InOut),h.set(l.CircularIn,o.Easing.Circular.In),h.set(l.CircularOut,o.Easing.Circular.Out),h.set(l.CircularOut,o.Easing.Circular.InOut),h.set(l.ElasticIn,o.Easing.Elastic.In),h.set(l.ElasticOut,o.Easing.Elastic.Out),h.set(l.ElasticInOut,o.Easing.Elastic.InOut),h.set(l.BackIn,o.Easing.Back.In),h.set(l.BackOut,o.Easing.Back.Out),h.set(l.BackInOut,o.Easing.Back.InOut),h.set(l.BounceIn,o.Easing.Bounce.In),h.set(l.BounceOut,o.Easing.Bounce.Out),h.set(l.BounceInOut,o.Easing.Bounce.InOut),d.set(c.Linear,o.Interpolation.Linear),d.set(c.Bezier,o.Interpolation.Bezier),d.set(c.CatmullRom,o.Interpolation.CatmullRom)}()}update(e){return!!this.tween&&this.tween.update(null!==e&&void 0!==e?e:i.PerformanceTimer.now())}get isRunning(){return this.running}}t.CameraAnimation=u;t.CameraRotationAnimation=class extends u{constructor(e,t,n,r){var i;super(e,r),this.m_mapControls=t,this.startAngle=0,this.endAngle=360,this.m_axis=new a.Vector3(0,0,1),this.beginInteractionListener=()=>{this.stopped||this.stopTween()},this.endInteractionListener=()=>{this.stopped||this.startTween()},void 0!==n.axis&&(this.m_axis=n.axis),void 0!==n.startAngle&&(this.startAngle=n.startAngle),void 0!==n.endAngle&&(this.endAngle=n.endAngle),void 0!==n.duration&&(this.duration=n.duration),void 0!==n.repeat&&(this.repeat=n.repeat),void 0!==n.easing&&(this.easing="function"===typeof n.easing?n.easing:null!==(i=h.get(n.easing))&&void 0!==i?i:o.Easing.Linear.None),this.m_lastRotationValue=this.startAngle}start(e,t){if(this.running)throw new Error("Animation already running"+this.name!==void 0?this.name:0);this.running=!0,this.onFinished=t,this.stopped=!1,this.m_mapControls&&(this.m_mapControls.addEventListener(s.EventNames.BeginInteraction,this.beginInteractionListener),this.m_mapControls.addEventListener(s.EventNames.EndInteraction,this.endInteractionListener)),this.startTween(e),this.mapView.beginAnimation()}stop(){if(!this.running)throw new Error("Animation not running"+this.name!==void 0?this.name:0);this.running=!1,this.stopped=!0,this.mapView.endAnimation(),this.tween&&this.tween.stop(),this.m_mapControls&&(this.m_mapControls.removeEventListener(s.EventNames.BeginInteraction,this.beginInteractionListener),this.m_mapControls.removeEventListener(s.EventNames.EndInteraction,this.endInteractionListener))}startTween(e){const t=new a.Quaternion;this.m_userCamerRotation=new a.Quaternion,this.mapView.camera.getWorldQuaternion(this.m_userCamerRotation),this.tween=new o.Tween({rotation:0}).to({rotation:this.endAngle-this.m_lastRotationValue},this.duration).onComplete((()=>{this.stop(),this.onFinished&&this.onFinished()})).onUpdate((e=>{let{rotation:n}=e;this.m_lastRotationValue=n,t.setFromEuler(new a.Euler(0,0,a.MathUtils.degToRad(n))),void 0!==this.m_userCamerRotation&&t.multiply(this.m_userCamerRotation),this.mapView.camera.quaternion.copy(t)})),this.tween.repeat(this.repeat),this.tween.easing(this.easing),this.tween.start(e)}stopTween(){this.tween&&this.tween.stop()}};let h,d;t.CameraPanAnimation=class extends u{constructor(e,t,n){var r,i;super(e,n),this.name=n,this.interpolation=o.Interpolation.CatmullRom,void 0!==t.duration&&(this.duration=t.duration),void 0!==t.repeat&&(this.repeat=t.repeat),void 0!==t.easing&&(this.easing="function"===typeof t.easing?t.easing:null!==(r=h.get(t.easing))&&void 0!==r?r:o.Easing.Linear.None),void 0!==t.interpolation&&(this.interpolation="function"===typeof t.interpolation?t.interpolation:null!==(i=d.get(t.interpolation))&&void 0!==i?i:o.Interpolation.Linear),this.m_geoCoordinates=void 0!==t.geoCoordinates?t.geoCoordinates:[]}addPosition(e){this.m_geoCoordinates.push(e)}start(e,t){var n;if(this.running)throw new Error("Animation already running"+this.name!==void 0?this.name:0);this.onFinished=t,this.running=!0;const i=new r.GeoCoordinates(this.mapView.geoCenter.latitude,this.mapView.geoCenter.longitude,this.mapView.camera.position.z),a={latitude:new Array,longitude:new Array,altitude:new Array};for(const r of this.m_geoCoordinates)a.latitude.push(r.latitude),a.longitude.push(r.longitude),a.altitude.push(null!==(n=r.altitude)&&void 0!==n?n:this.mapView.camera.position.z);this.tween=new o.Tween(i).to(a,this.duration).onComplete((()=>{this.stop(),this.onFinished&&this.onFinished()})).onUpdate((e=>{let{latitude:t,longitude:n,altitude:i}=e;this.mapView.geoCenter=new r.GeoCoordinates(t,n,i),this.mapView.camera.position.z=null!==i&&void 0!==i?i:0})),this.tween.repeat(this.repeat),this.tween.easing(this.easing),this.tween.interpolation(this.interpolation),this.tween.start(e),this.mapView.beginAnimation()}stop(){if(!this.running)throw new Error("Animation not running"+this.name!==void 0?this.name:0);this.running=!1,this.mapView.endAnimation(),this.tween&&this.tween.stop()}get isRunning(){return this.running}}},48971:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapControls=t.EventNames=t.TiltState=void 0;const r=n(31201),i=n(48991),o=n(534),a=n(53161);var s,l,c;!function(e){e[e.NONE=0]="NONE",e[e.PAN=1]="PAN",e[e.ROTATE=2]="ROTATE",e[e.ORBIT=3]="ORBIT",e[e.TOUCH=4]="TOUCH"}(s||(s={})),function(e){e[e.Tilted=0]="Tilted",e[e.Down=1]="Down"}(l=t.TiltState||(t.TiltState={})),function(e){e.Update="update",e.BeginInteraction="begin-interaction",e.EndInteraction="end-interaction"}(c=t.EventNames||(t.EventNames={}));const u={type:c.Update},h={type:c.BeginInteraction},d={type:c.EndInteraction},p=o.MathUtils.degToRad(89),m=.01;class f extends i.EventDispatcher{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(),this.mapView=e,this.rotationMouseDeltaFactor=.1,this.orbitingMouseDeltaFactor=.1*o.MathUtils.DEG2RAD,this.orbitingTouchDeltaFactor=.1*o.MathUtils.DEG2RAD,this.enabled=!0,this.zoomEnabled=!0,this.panEnabled=!0,this.tiltEnabled=!0,this.rotateEnabled=!0,this.inertiaEnabled=!0,this.zoomInertiaDampingDuration=.6,this.panInertiaDampingDuration=1,this.tiltToggleDuration=.5,this.tiltAngle=Math.PI/4,this.northResetAnimationDuration=1.5,this.zoomLevelDeltaOnControl=1,this.minZoomLevel=0,this.maxZoomLevel=20,this.minCameraHeight=3,this.zoomLevelDeltaOnDoubleClick=1,this.doubleTapTime=.3,this.m_currentViewDirection=new o.Vector3,this.m_lastMousePosition=new o.Vector2(0,0),this.m_initialMousePosition=new o.Vector2(0,0),this.m_mouseDelta=new o.Vector2(0,0),this.m_needsRenderLastFrame=!0,this.m_panIsAnimated=!1,this.m_panDistanceFrameDelta=new o.Vector3,this.m_panAnimationTime=0,this.m_panAnimationStartTime=0,this.m_lastAveragedPanDistanceOrAngle=0,this.m_currentInertialPanningSpeed=0,this.m_lastPanVector=new o.Vector3,this.m_rotateGlobeQuaternion=new o.Quaternion,this.m_lastRotateGlobeAxis=new o.Vector3,this.m_lastRotateGlobeAngle=0,this.m_lastRotateGlobeFromVector=new o.Vector3,this.m_recentPanDistancesOrAngles=[0,0,0,0,0],this.m_currentPanDistanceOrAngleIndex=0,this.m_zoomIsAnimated=!1,this.m_zoomDeltaRequested=0,this.m_zoomTargetNormalizedCoordinates=new o.Vector2,this.m_zoomAnimationTime=0,this.m_zoomAnimationStartTime=0,this.m_startZoom=0,this.m_tiltIsAnimated=!1,this.m_tiltRequested=void 0,this.m_tiltAnimationTime=0,this.m_tiltAnimationStartTime=0,this.m_startTilt=0,this.m_state=s.NONE,this.m_tmpVector2=new o.Vector2,this.m_tmpVector3=new o.Vector3,this.m_tapStartTime=0,this.m_lastSingleTapTime=0,this.m_fingerMoved=!1,this.m_isDoubleTap=!1,this.m_resetNorthStartTime=0,this.m_resetNorthIsAnimated=!1,this.m_resetNorthAnimationDuration=0,this.m_currentAzimuth=0,this.m_lastAzimuth=0,this.m_startAzimuth=0,this.m_maxTiltAngle=p,this.m_touchState={touches:[],currentRotation:0,initialRotation:0},this.dispose=()=>{},this.camera=e.camera,this.domElement=e.renderer.domElement,this.maxZoomLevel=e.maxZoomLevel,this.minZoomLevel=e.minZoomLevel,this.minCameraHeight=e.minCameraHeight,this.bindInputEvents(this.domElement),this.handleZoom=this.handleZoom.bind(this),this.handlePan=this.handlePan.bind(this),this.tilt=this.tilt.bind(this),this.resetNorth=this.resetNorth.bind(this),this.assignZoomAfterTouchZoomRender=this.assignZoomAfterTouchZoomRender.bind(this),t&&e.addEventListener(i.MapViewEventNames.Dispose,(()=>{this.dispose()}))}static create(e){return new f(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}get zoomLevelDeltaOnMouseWheel(){return void 0!==this.m_zoomLevelDeltaOnMouseWheel?this.m_zoomLevelDeltaOnMouseWheel:this.inertiaEnabled?.8:.2}set zoomLevelDeltaOnMouseWheel(e){this.m_zoomLevelDeltaOnMouseWheel=e}get attitude(){const e=i.MapViewUtils.extractAttitude(this.mapView,this.camera);return{yaw:o.MathUtils.radToDeg(e.yaw),pitch:o.MathUtils.radToDeg(e.pitch),roll:o.MathUtils.radToDeg(e.roll)}}pointToNorth(){this.m_startAzimuth=Math.PI+i.MapViewUtils.extractSphericalCoordinatesFromLocation(this.mapView,this.camera,this.mapView.target).azimuth,this.m_startAzimuth=Math.atan2(Math.sin(this.m_startAzimuth),Math.cos(this.m_startAzimuth)),0!==this.m_startAzimuth&&(this.stopExistingAnimations(),this.m_resetNorthAnimationDuration=this.northResetAnimationDuration,this.m_currentAzimuth=this.m_startAzimuth,this.m_resetNorthStartTime=performance.now(),this.resetNorth())}zoomOnTargetPosition(e,t,n){i.MapViewUtils.zoomOnTargetPosition(this.mapView,e,t,n,this.m_maxTiltAngle)}setZoomLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.enabled&&this.zoomEnabled&&(this.dispatchEvent(h),this.m_startZoom=this.currentZoom,this.m_zoomDeltaRequested=e-this.zoomLevelTargeted,this.stopExistingAnimations(),this.m_zoomAnimationStartTime=performance.now(),this.m_zoomTargetNormalizedCoordinates.set(t.x,t.y),this.handleZoom(),this.dispatchEvent(d))}toggleTilt(){if(!this.enabled||!this.tiltEnabled)return;this.stopExistingAnimations(),this.m_startTilt=this.currentTilt;const e=this.m_startTilt<m;this.m_tiltRequested=e?this.tiltAngle:0,this.m_tiltState=e?l.Tilted:l.Down,this.m_tiltAnimationStartTime=performance.now(),this.tilt()}set cameraHeight(e){this.camera.position.setZ(e),this.camera.matrixWorldNeedsUpdate=!0}get cameraHeight(){return this.mapView.camera.position.z}set maxTiltAngle(e){this.m_maxTiltAngle=Math.max(0,Math.min(p,o.MathUtils.degToRad(e)))}get maxTiltAngle(){return o.MathUtils.radToDeg(this.m_maxTiltAngle)}get zoomLevelTargeted(){return void 0===this.m_targetedZoom?this.currentZoom:this.m_targetedZoom}get tiltState(){return void 0===this.m_tiltState&&(this.m_tiltState=this.currentTilt<m||this.m_tiltState===l.Down?l.Tilted:l.Down),this.m_tiltState}set currentZoom(e){this.m_currentZoom=e}get currentZoom(){return void 0!==this.m_currentZoom?this.m_currentZoom:this.mapView.zoomLevel}set currentTilt(e){this.m_currentTilt=e}get currentTilt(){return o.MathUtils.degToRad(this.mapView.tilt)}get targetedTilt(){return void 0===this.m_targetedTilt?void 0===this.m_currentTilt?this.currentTilt:this.m_currentTilt:this.m_targetedTilt}assignZoomAfterTouchZoomRender(){this.m_currentZoom=this.mapView.zoomLevel,this.m_targetedZoom=this.mapView.zoomLevel,this.mapView.removeEventListener(i.MapViewEventNames.AfterRender,this.assignZoomAfterTouchZoomRender)}stopExistingAnimations(){this.stopResetNorth(),this.stopZoom(),this.stopPan(),this.stopTilt()}resetNorth(){const e=(performance.now()-this.m_resetNorthStartTime)/1e3;if(this.inertiaEnabled){this.m_resetNorthIsAnimated||(this.m_resetNorthIsAnimated=!0,this.mapView.addEventListener(i.MapViewEventNames.AfterRender,this.resetNorth));e>this.m_resetNorthAnimationDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.stopResetNorth()):this.m_needsRenderLastFrame=!0}this.m_lastAzimuth=this.m_currentAzimuth,this.m_currentAzimuth=this.inertiaEnabled?this.easeOutCubic(this.m_startAzimuth,0,Math.min(1,e/this.m_resetNorthAnimationDuration)):0;const t=this.m_currentAzimuth-this.m_lastAzimuth;i.MapViewUtils.orbitAroundScreenPoint(this.mapView,{deltaAzimuth:t,maxTiltAngle:this.m_maxTiltAngle}),this.updateMapView()}stopResetNorth(){this.mapView.removeEventListener(i.MapViewEventNames.AfterRender,this.resetNorth),this.m_resetNorthIsAnimated=!1}tilt(){void 0!==this.m_tiltRequested&&(this.m_targetedTilt=Math.max(Math.min(this.m_tiltRequested,this.maxTiltAngle),0),this.m_tiltRequested=void 0);let e=!1;if(this.inertiaEnabled){this.m_tiltIsAnimated||(this.m_tiltIsAnimated=!0,this.mapView.addEventListener(i.MapViewEventNames.AfterRender,this.tilt));const t=performance.now();this.m_tiltAnimationTime=(t-this.m_tiltAnimationStartTime)/1e3;this.m_tiltAnimationTime>=this.tiltToggleDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.m_tiltAnimationTime=this.tiltToggleDuration,e=!0):this.m_needsRenderLastFrame=!0}this.m_currentTilt=this.inertiaEnabled?this.easeOutCubic(this.m_startTilt,this.targetedTilt,Math.min(1,this.m_tiltAnimationTime/this.tiltToggleDuration)):this.targetedTilt;const t=this.currentTilt,n=this.m_currentTilt-t;i.MapViewUtils.orbitAroundScreenPoint(this.mapView,{deltaTilt:n,maxTiltAngle:this.m_maxTiltAngle}),this.updateMapView(),e&&this.stopTilt()}stopTilt(){this.mapView.removeEventListener(i.MapViewEventNames.AfterRender,this.tilt),this.m_tiltIsAnimated=!1,this.m_targetedTilt=this.m_currentTilt=void 0}easeOutCubic(e,t,n){return e+(t-e)*(1-Math.pow(1-n,3))}easeOutCirc(e,t,n){return e+(t-e)*Math.sqrt(1-Math.pow(n-1,2))}handleZoom(){let e=!1;if(0!==this.m_zoomDeltaRequested&&(this.m_targetedZoom=Math.max(Math.min(this.zoomLevelTargeted+this.m_zoomDeltaRequested,this.maxZoomLevel),this.minZoomLevel),this.m_zoomDeltaRequested=0),this.inertiaEnabled&&this.zoomInertiaDampingDuration>0){this.m_zoomIsAnimated||(this.m_zoomIsAnimated=!0,this.mapView.addEventListener(i.MapViewEventNames.AfterRender,this.handleZoom));const t=performance.now();this.m_zoomAnimationTime=(t-this.m_zoomAnimationStartTime)/1e3;this.m_zoomAnimationTime>this.zoomInertiaDampingDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.m_zoomAnimationTime=this.zoomInertiaDampingDuration,e=!0,this.stopZoom()):this.m_needsRenderLastFrame=!0}this.currentZoom=!this.inertiaEnabled||Math.abs(this.zoomLevelTargeted-this.m_startZoom)<m?this.zoomLevelTargeted:this.easeOutCirc(this.m_startZoom,this.zoomLevelTargeted,Math.min(1,this.m_zoomAnimationTime/this.zoomInertiaDampingDuration));const t=i.MapViewUtils.zoomOnTargetPosition(this.mapView,this.m_zoomTargetNormalizedCoordinates.x,this.m_zoomTargetNormalizedCoordinates.y,this.currentZoom,this.m_maxTiltAngle);!e&&t||(this.m_targetedZoom=void 0,this.m_currentZoom=void 0),this.updateMapView()}stopZoom(){this.mapView.removeEventListener(i.MapViewEventNames.AfterRender,this.handleZoom),this.m_zoomIsAnimated=!1}handlePan(){if(this.m_state===s.NONE&&0===this.m_lastAveragedPanDistanceOrAngle)return;this.inertiaEnabled&&!this.m_panIsAnimated&&(this.m_panIsAnimated=!0,this.mapView.addEventListener(i.MapViewEventNames.AfterRender,this.handlePan));const e=this.inertiaEnabled&&this.panInertiaDampingDuration>0&&this.m_state===s.NONE&&this.m_lastAveragedPanDistanceOrAngle>0;if(e){const e=performance.now();this.m_panAnimationTime=(e-this.m_panAnimationStartTime)/1e3;this.m_panAnimationTime>this.panInertiaDampingDuration?this.m_needsRenderLastFrame&&(this.m_needsRenderLastFrame=!1,this.m_panAnimationTime=this.panInertiaDampingDuration,this.mapView.removeEventListener(i.MapViewEventNames.AfterRender,this.handlePan),this.m_panIsAnimated=!1):this.m_needsRenderLastFrame=!0;const t=this.m_panAnimationTime/this.panInertiaDampingDuration;this.m_currentInertialPanningSpeed=this.easeOutCubic(this.m_lastAveragedPanDistanceOrAngle,0,Math.min(1,t)),0===this.m_currentInertialPanningSpeed&&(this.m_lastAveragedPanDistanceOrAngle=0),this.mapView.projection.type===r.ProjectionType.Planar?this.m_panDistanceFrameDelta.copy(this.m_lastPanVector).setLength(this.m_currentInertialPanningSpeed):this.mapView.projection.type===r.ProjectionType.Spherical&&this.m_rotateGlobeQuaternion.setFromAxisAngle(this.m_lastRotateGlobeAxis,this.m_currentInertialPanningSpeed).normalize()}else{let e=0;this.mapView.projection.type===r.ProjectionType.Planar?e=this.m_lastPanVector.copy(this.m_panDistanceFrameDelta).length():this.mapView.projection.type===r.ProjectionType.Spherical&&(e=this.m_lastRotateGlobeAngle,this.m_rotateGlobeQuaternion.setFromAxisAngle(this.m_lastRotateGlobeAxis,this.m_lastRotateGlobeAngle),this.m_rotateGlobeQuaternion.normalize()),this.m_currentPanDistanceOrAngleIndex=(this.m_currentPanDistanceOrAngleIndex+1)%5,this.m_recentPanDistancesOrAngles[this.m_currentPanDistanceOrAngleIndex]=e,this.m_lastAveragedPanDistanceOrAngle=this.m_recentPanDistancesOrAngles.reduce(((e,t)=>e+t))/5}this.mapView.projection.type===r.ProjectionType.Planar?i.MapViewUtils.panCameraAboveFlatMap(this.mapView,this.m_panDistanceFrameDelta.x,this.m_panDistanceFrameDelta.y):this.mapView.projection.type===r.ProjectionType.Spherical&&i.MapViewUtils.panCameraAroundGlobe(this.mapView,this.m_lastRotateGlobeFromVector,this.m_tmpVector3.copy(this.m_lastRotateGlobeFromVector).applyQuaternion(this.m_rotateGlobeQuaternion)),e||(this.m_panDistanceFrameDelta.set(0,0,0),this.m_lastRotateGlobeAngle=0),this.updateMapView()}stopPan(){this.m_panDistanceFrameDelta.set(0,0,0),this.m_lastAveragedPanDistanceOrAngle=0}bindInputEvents(e){const t=this.contextMenu.bind(this),n=this.mouseDown.bind(this),r=this.mouseWheel.bind(this),i=this.touchStart.bind(this),o=this.touchEnd.bind(this),a=this.touchMove.bind(this),s=this.mouseDoubleClick.bind(this);e.addEventListener("dblclick",s,!1),e.addEventListener("contextmenu",t,!1),e.addEventListener("mousedown",n,!1),e.addEventListener("wheel",r,!1),e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",o,!1),e.addEventListener("touchmove",a,!1),this.dispose=()=>{e.removeEventListener("dblclick",s,!1),e.removeEventListener("contextmenu",t,!1),e.removeEventListener("mousedown",n,!1),e.removeEventListener("wheel",r,!1),e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchend",o,!1),e.removeEventListener("touchmove",a,!1)}}updateMapView(){this.dispatchEvent(u),this.mapView.update()}mouseDoubleClick(e){if(!this.enabled||!this.zoomEnabled)return;const t=this.getPointerPosition(e);this.zoomOnDoubleClickOrTap(t.x,t.y)}mouseDown(e){if(!1===this.enabled)return;if(e.shiftKey)return;if(e.stopPropagation(),this.m_state!==s.NONE)return;if(0===e.button&&!e.ctrlKey&&this.panEnabled)this.m_state=s.PAN;else if(1===e.button)this.m_state=s.ROTATE;else{if(2!==e.button&&!e.ctrlKey||!this.tiltEnabled)return;this.m_state=s.ORBIT}this.dispatchEvent(h);const t=this.getPointerPosition(e);if(this.m_lastMousePosition.copy(t),!0===e.altKey){const{width:e,height:n}=a.getWidthAndHeightFromCanvas(this.domElement);this.m_initialMousePosition.copy(a.calculateNormalizedDeviceCoordinates(t.x,t.y,e,n))}else i.CameraUtils.getPrincipalPoint(this.mapView.camera,this.m_initialMousePosition);const n=this.mouseMove.bind(this),r=this.mouseUp.bind(this);window.addEventListener("mousemove",n,!1),window.addEventListener("mouseup",r,!1),this.m_cleanupMouseEventListeners=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r)}}mouseMove(e){if(!1===this.enabled)return;const t=this.getPointerPosition(e);if(this.m_mouseDelta.set(t.x-this.m_lastMousePosition.x,t.y-this.m_lastMousePosition.y),this.m_state===s.PAN){const e=this.getWorldPositionWithElevation(this.m_lastMousePosition.x,this.m_lastMousePosition.y,t.x,t.y);if(void 0===e)return;const{fromWorld:n,toWorld:r}=e;this.panFromTo(n,r)}else this.m_state===s.ROTATE?(this.stopExistingAnimations(),i.MapViewUtils.rotate(this.mapView,-this.rotationMouseDeltaFactor*this.m_mouseDelta.x,this.rotationMouseDeltaFactor*this.m_mouseDelta.y,this.m_maxTiltAngle)):this.m_state===s.ORBIT&&(this.stopExistingAnimations(),i.MapViewUtils.orbitAroundScreenPoint(this.mapView,{center:this.m_tmpVector2.set(this.m_initialMousePosition.x,this.m_initialMousePosition.y),deltaAzimuth:this.orbitingMouseDeltaFactor*this.m_mouseDelta.x,deltaTilt:-this.orbitingMouseDeltaFactor*this.m_mouseDelta.y,maxTiltAngle:this.m_maxTiltAngle}));this.m_lastMousePosition.set(t.x,t.y),this.m_zoomAnimationStartTime=performance.now(),this.updateMapView(),e.preventDefault(),e.stopPropagation()}mouseUp(e){!1!==this.enabled&&(this.updateMapView(),e.preventDefault(),e.stopPropagation(),this.m_state=s.NONE,this.m_cleanupMouseEventListeners&&this.m_cleanupMouseEventListeners(),this.dispatchEvent(d))}mouseWheel(e){if(!this.enabled||!this.zoomEnabled)return;const{width:t,height:n}=a.getWidthAndHeightFromCanvas(this.domElement),r=a.calculateNormalizedDeviceCoordinates(e.offsetX,e.offsetY,t,n);this.setZoomLevel(this.mapView.zoomLevel-this.zoomLevelDeltaOnMouseWheel*Math.sign(e.deltaY),r),e.preventDefault(),e.stopPropagation()}updateCurrentRotation(){if(this.m_touchState.touches.length<2||0===this.m_touchState.touches[1].currentWorldPosition.length()||0===this.m_touchState.touches[0].currentWorldPosition.length())return;let e=0,t=0;this.mapView.projection.type===r.ProjectionType.Planar?(e=this.m_touchState.touches[1].currentWorldPosition.x-this.m_touchState.touches[0].currentWorldPosition.x,t=this.m_touchState.touches[1].currentWorldPosition.y-this.m_touchState.touches[0].currentWorldPosition.y):this.mapView.projection.type===r.ProjectionType.Spherical&&(e=this.m_touchState.touches[1].currentTouchPoint.x-this.m_touchState.touches[0].currentTouchPoint.x,t=this.m_touchState.touches[0].currentTouchPoint.y-this.m_touchState.touches[1].currentTouchPoint.y,this.m_touchState.initialRotation=this.m_touchState.currentRotation),this.m_touchState.currentRotation=Math.atan2(t,e)}calculatePinchDistanceInWorldSpace(){if(this.m_touchState.touches.length<2)return 0;const e=this.m_tmpVector3.subVectors(this.m_touchState.touches[0].initialWorldPosition,this.m_touchState.touches[1].initialWorldPosition).length();return this.m_tmpVector3.subVectors(this.m_touchState.touches[0].currentWorldPosition,this.m_touchState.touches[1].currentWorldPosition).length()-e}convertTouchPoint(e,t){const n=this.getPointerPosition(e);if(void 0!==t){const e=t.currentTouchPoint,r=this.getWorldPositionWithElevation(e.x,e.y,n.x,n.y),i=void 0===r?new o.Vector3:r.toWorld;return 0!==i.length()||3===this.m_touchState.touches.length&&this.tiltEnabled?(this.m_state!==s.TOUCH&&this.dispatchEvent(h),this.m_state=s.TOUCH,{currentTouchPoint:n,lastTouchPoint:n,currentWorldPosition:i,initialWorldPosition:i}):(this.setTouchState([]),this.m_state=s.NONE,void this.dispatchEvent(d))}{const{width:e,height:t}=a.getWidthAndHeightFromCanvas(this.domElement),r=a.calculateNormalizedDeviceCoordinates(n.x,n.y,e,t),l=i.MapViewUtils.rayCastWorldCoordinates(this.mapView,r.x,r.y),c=null===l?new o.Vector3:l;return 0!==c.length()||3===this.m_touchState.touches.length&&this.tiltEnabled?(this.m_state!==s.TOUCH&&this.dispatchEvent(h),this.m_state=s.TOUCH,{currentTouchPoint:n,lastTouchPoint:n,currentWorldPosition:c,initialWorldPosition:c}):(this.setTouchState([]),this.m_state=s.NONE,void this.dispatchEvent(d))}}setTouchState(e){this.m_touchState.touches=[];for(let t=0;t<e.length;++t){const n=this.convertTouchPoint(e[t]);void 0!==n&&this.m_touchState.touches.push(n)}0!==this.m_touchState.touches.length&&(this.updateCurrentRotation(),this.m_touchState.initialRotation=this.m_touchState.currentRotation)}updateTouches(e){const t=Math.min(e.length,this.m_touchState.touches.length);for(let n=0;n<t;++n){const t=this.m_touchState.touches[n],r=this.convertTouchPoint(e[n],t);void 0!==r&&void 0!==t&&(r.initialWorldPosition=t.initialWorldPosition,r.lastTouchPoint=t.currentTouchPoint,this.m_touchState.touches[n]=r)}}zoomOnDoubleClickOrTap(e,t){if(0===this.zoomLevelDeltaOnDoubleClick)return;const{width:n,height:r}=a.getWidthAndHeightFromCanvas(this.domElement),i=a.calculateNormalizedDeviceCoordinates(e,t,n,r);this.setZoomLevel(this.currentZoom+this.zoomLevelDeltaOnDoubleClick,i)}touchStart(e){!1!==this.enabled&&(this.m_tapStartTime=performance.now(),this.m_fingerMoved=!1,this.m_state=s.TOUCH,this.dispatchEvent(h),this.setTouchState(e.touches),this.updateTouches(e.touches),e.preventDefault(),e.stopPropagation())}touchMove(e){if(!1!==this.enabled){if(this.m_fingerMoved=!0,this.updateTouches(e.touches),this.panEnabled&&this.m_touchState.touches.length<=2&&void 0!==this.m_touchState.touches[0]&&this.panFromTo(this.m_touchState.touches[0].initialWorldPosition,this.m_touchState.touches[0].currentWorldPosition),2===this.m_touchState.touches.length){const e=this.m_touchState.touches,t=new o.Vector2;if(!0===this.zoomEnabled||!0===this.rotateEnabled){const{width:n,height:r}=a.getWidthAndHeightFromCanvas(this.domElement);e.forEach((e=>{const i=a.calculateNormalizedDeviceCoordinates(e.currentTouchPoint.x,e.currentTouchPoint.y,n,r);t.add(i)})),t.divideScalar(e.length)}if(this.zoomEnabled){const e=this.calculatePinchDistanceInWorldSpace();if(Math.abs(e)<m)return;const n=i.MapViewUtils.calculateZoomLevelFromDistance(this.mapView,this.mapView.targetDistance-e);i.MapViewUtils.zoomOnTargetPosition(this.mapView,t.x,t.y,n,this.m_maxTiltAngle)}if(this.rotateEnabled){this.updateCurrentRotation();const e=this.m_touchState.currentRotation-this.m_touchState.initialRotation;this.stopExistingAnimations(),i.MapViewUtils.orbitAroundScreenPoint(this.mapView,{center:this.m_tmpVector2.set(t.x,t.y),deltaAzimuth:e,maxTiltAngle:this.m_maxTiltAngle})}}if(3===this.m_touchState.touches.length&&this.tiltEnabled){const e=this.m_touchState.touches[0],t=this.m_tmpVector2.subVectors(e.currentTouchPoint,e.lastTouchPoint);this.stopExistingAnimations(),i.MapViewUtils.orbitAroundScreenPoint(this.mapView,{deltaAzimuth:this.orbitingTouchDeltaFactor*t.x,deltaTilt:-this.orbitingTouchDeltaFactor*t.y,maxTiltAngle:this.m_maxTiltAngle})}this.m_zoomAnimationStartTime=performance.now(),this.updateMapView(),e.preventDefault(),e.stopPropagation()}}touchEnd(e){!1!==this.enabled&&(this.m_state=s.NONE,this.handleDoubleTap(),this.setTouchState(e.touches),this.dispatchEvent(d),this.updateMapView(),e.preventDefault(),e.stopPropagation())}handleDoubleTap(){if(this.m_fingerMoved||!this.zoomEnabled)return;const e=performance.now();return e-this.m_tapStartTime>120?void 0:this.m_isDoubleTap?(e-this.m_lastSingleTapTime>1e3*this.doubleTapTime||this.zoomOnDoubleClickOrTap(this.m_touchState.touches[0].currentTouchPoint.x,this.m_touchState.touches[0].currentTouchPoint.y),void(this.m_isDoubleTap=!1)):(this.m_isDoubleTap=!0,void(this.m_lastSingleTapTime=e))}contextMenu(e){e.preventDefault()}getWorldPositionWithElevation(e,t,n,r){const{width:o,height:s}=a.getWidthAndHeightFromCanvas(this.domElement),l=a.calculateNormalizedDeviceCoordinates(e,t,o,s),c=a.calculateNormalizedDeviceCoordinates(n,r,o,s);let u,h,d;if(void 0!==this.mapView.elevationProvider&&(d=this.mapView.elevationProvider.rayCast(e,t)),void 0===d)h=i.MapViewUtils.rayCastWorldCoordinates(this.mapView,l.x,l.y),u=i.MapViewUtils.rayCastWorldCoordinates(this.mapView,c.x,c.y);else{h=d;const e=this.mapView.projection.unprojectAltitude(h);u=i.MapViewUtils.rayCastWorldCoordinates(this.mapView,c.x,c.y,e)}if(null!==h&&null!==u)return{fromWorld:h,toWorld:u}}panFromTo(e,t){this.stopExistingAnimations(),this.m_panAnimationStartTime=performance.now(),this.mapView.projection.type===r.ProjectionType.Planar?this.m_panDistanceFrameDelta.subVectors(e,t):this.mapView.projection.type===r.ProjectionType.Spherical&&(this.m_lastRotateGlobeFromVector.copy(e),this.m_lastRotateGlobeAxis.crossVectors(e,t).normalize(),this.m_lastRotateGlobeAngle=e.angleTo(t),isNaN(this.m_lastRotateGlobeAngle)&&(this.m_lastRotateGlobeAngle=0)),this.handlePan()}getPointerPosition(e){const t=a.getWidthAndHeightFromCanvas(this.domElement),n=this.domElement.getBoundingClientRect(),r=Math.round(n.width)/t.width,i=Math.round(n.height)/t.height;return new o.Vector2((e.clientX-Math.floor(n.left))*r,(e.clientY-Math.floor(n.top))*i)}}t.MapControls=f},73530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapControlsUI=void 0;const r=n(31201),i=n(48991);t.MapControlsUI=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls=e,this.domElement=document.createElement("div"),this.m_buttonsElement=document.createElement("div"),this.m_zoomLevelElement=null,this.m_projectionSwitchElement=null,this.m_onMapViewRenderEvent=()=>{if(null===this.m_zoomLevelElement)return;const e=this.controls.zoomLevelTargeted.toFixed(1);"INPUT"===this.m_zoomLevelElement.tagName?this.m_zoomLevelElement.value=e:this.m_zoomLevelElement.innerHTML=e},this.m_onWindowClick=e=>{const t=this.m_zoomLevelElement;e&&e.target&&e.target.contains&&e.target!==t&&!e.target.contains(t)&&t.blur()};const n=document.createElement("span");n.className="harp-gl_v-align",this.domElement.appendChild(n),this.m_buttonsElement=document.createElement("div"),this.m_buttonsElement.className="harp-gl_v-aligned",this.domElement.appendChild(this.m_buttonsElement);const o=document.createElement("button");o.innerText="+",o.className="harp-gl_controls_button-top",o.classList.add("harp-gl_controls-button");const a=document.createElement("button");a.innerText="-",a.className="harp-gl_controls_button-bottom",a.classList.add("harp-gl_controls-button");const s=document.createElement("button");s.innerText="3D",s.id="harp-gl_controls_tilt-button-ui",s.title="Toggle tilt",s.classList.add("harp-gl_controls-button"),s.classList.add("harp-gl_controls_button-bottom");const l=document.createElement("button");l.id="harp-gl_controls-button_compass",l.title="Reset North",l.classList.add("harp-gl_controls-button"),l.classList.add("harp-gl_controls_button-top");const c=document.createElement("span");if(c.id="harp-gl_controls_compass",l.appendChild(c),"show"===t.zoomLevel)this.m_zoomLevelElement=document.createElement("div"),e.mapView.addEventListener(i.MapViewEventNames.Render,this.m_onMapViewRenderEvent);else if("input"===t.zoomLevel){const t=document.createElement("input");t.type="number",t.step="0.1",e.mapView.addEventListener(i.MapViewEventNames.Render,this.m_onMapViewRenderEvent);const n=n=>{e.setZoomLevel(parseFloat(t.value)),n.preventDefault()};t.addEventListener("blur",n),t.addEventListener("keypress",(e=>{"Enter"===e.key&&n(e)})),window.addEventListener("click",this.m_onWindowClick),this.m_zoomLevelElement=t}if(t.projectionSwitch){const e=document.createElement("button");e.id="harp-gl_controls_switch_projection",e.classList.add("harp-gl_controls-button");const t=()=>`Switch to ${this.controls.mapView.projection.type===r.ProjectionType.Spherical?"flat":"globe"} projection`;e.title=t();const n='\n    <svg style="margin-top:5px;" stroke-width="2" class="harp-gl_controls_switch_svg" width="50" height="50" viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\n        <ellipse ry="9.79855" rx="4.56139" id="svg_6" cy="11.99798" cx="11.99798" fill="none"/>\n        <line id="svg_8" y2="8.16866" x2="21.12086" y1="8.16866" x1="3.10044"/>\n        <line id="svg_9" y2="16.10887" x2="21.0645" y1="16.10887" x1="3.04409"/>\n        <ellipse id="svg_11" ry="9.79855" rx="9.82671" cy="11.94167" cx="12.02614" fill="none"/>\n    </svg>',i='\n    <svg style="margin-top:5px;" class="harp-gl_controls_switch_svg" width="25" height="25" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\n        <rect id="svg_1" stroke-width="2" height="13.51524" width="18.35821" y="5.80349" x="3.21307" fill="none"/>\n        <path id="svg_14" d="m9.52018,7.71815l1.2357,-0.0032l-0.61945,1.18258l-0.61625,-1.17938z"/>\n        <path id="svg_15" d="m4.11409,7.32396l3.65718,-0.0032l0.28156,2.13991l-2.59042,1.57678l0.50682,1.80203l2.25254,0.8447l-0.90101,2.0836l0.28157,2.25254l-3.26619,-3.04093l0.67576,-2.02728l-0.61945,-1.97097l-1.01364,-3.15356l0.73528,-0.50362z"/>\n        <path id="svg_17" d="m13.23688,7.4929l2.02409,-0.0032l0.78839,1.29521l2.47779,-1.35152l2.75936,0.78839l0,1.57678l-0.73208,0.61945l-0.28157,1.97097c0,0 -0.67256,0.8479 -0.72888,0.90422c-0.05631,0.05631 0.28157,1.06996 0.33788,1.18258c0.05631,0.11263 -1.68941,-1.35152 -1.6926,-1.35472c-0.0032,-0.0032 -0.16574,1.29841 -0.16894,1.29521c-0.0032,-0.0032 -1.57358,-1.34832 -1.57678,-1.35152c-0.0032,-0.0032 -0.72888,0.67896 -0.73208,0.67576c-0.0032,-0.0032 -0.8415,-0.67256 -0.8447,-0.67576c-0.0032,-0.0032 0.73528,2.0868 0.79159,2.0868c0.05631,0 -0.50682,3.20987 -0.51002,3.20667c-0.0032,-0.0032 -1.2357,-0.16574 -1.34832,-0.16574c-0.11263,0 -0.95733,-1.52046 -0.90102,-1.57678c0.05631,-0.05631 0,-1.80203 -0.0032,-1.80523c-0.0032,-0.0032 -1.40464,-0.33468 -1.40784,-0.33788c-0.0032,-0.0032 -0.05311,-1.74252 -0.05631,-1.74572c-0.0032,-0.0032 1.18578,-0.8415 1.18258,-0.8447c-0.0032,-0.0032 1.69261,-0.16574 1.74892,-0.16574c0.05631,0 1.2389,-1.06996 1.2357,-1.07316c-0.0032,-0.0032 -1.91146,-0.10943 -1.91466,-0.11263c-0.0032,-0.0032 -1.96777,0.17214 -1.97097,0.16894c-0.0032,-0.0032 1.52366,-3.20667 1.52366,-3.20667z"/>\n    </svg>';e.innerHTML=this.controls.mapView.projection.type===r.ProjectionType.Spherical?i:n,e.addEventListener("click",(()=>{this.controls.mapView.projection=this.controls.mapView.projection.type===r.ProjectionType.Spherical?r.mercatorProjection:r.sphereProjection,e.title=t(),e.innerHTML=this.controls.mapView.projection.type===r.ProjectionType.Spherical?i:n})),this.m_projectionSwitchElement=e}return this.m_buttonsElement.appendChild(o),null!==this.m_zoomLevelElement&&this.m_buttonsElement.appendChild(this.m_zoomLevelElement),this.m_buttonsElement.appendChild(a),this.m_buttonsElement.appendChild(l),this.m_buttonsElement.appendChild(s),null!==this.m_projectionSwitchElement&&this.m_buttonsElement.appendChild(this.m_projectionSwitchElement),o.addEventListener("click",(t=>{const n=e.zoomLevelTargeted+e.zoomLevelDeltaOnControl;e.setZoomLevel(n)})),o.addEventListener("dblclick",(e=>{e.stopPropagation()})),a.addEventListener("click",(t=>{const n=e.zoomLevelTargeted-e.zoomLevelDeltaOnControl;e.setZoomLevel(n)})),a.addEventListener("dblclick",(e=>{e.stopPropagation()})),s.addEventListener("click",(t=>{e.toggleTilt()})),l.addEventListener("click",(t=>{e.pointToNorth()})),e.mapView.addEventListener(i.MapViewEventNames.AfterRender,(()=>{c.style.transform=`rotate(${e.mapView.heading}deg)`})),this.domElement.className="harp-gl_controls",null!==this.m_zoomLevelElement&&this.m_zoomLevelElement.classList.add("harp-gl_controls_zoom-level"),!0!==t.disableDefaultStyle&&(this.initStyle(),this.domElement.style.cssText="\n                position: absolute;\n                right: 5px;\n                top: 0;\n                height: 100%; /* Vertical alignment is done dynamically, in the rest of the CSS. */\n                pointer-events: none; /* Allows to click the map even though height is 100%. */\n            "),this}get projectionSwitchElement(){return this.m_projectionSwitchElement}dispose(){null!==this.m_zoomLevelElement&&"INPUT"===this.m_zoomLevelElement.tagName&&window.removeEventListener("click",this.m_onWindowClick),this.controls.mapView.removeEventListener(i.MapViewEventNames.Render,this.m_onMapViewRenderEvent),this.domElement.remove()}initStyle(){if(null!==document.getElementById("here-harp-controls.map-controls-ui-styles"))return;const e=document.createElement("style");e.id="here-harp-controls.map-controls-ui-styles",e.appendChild(document.createTextNode('\n        /* CSS trick to align another div dynamically. */\n        .harp-gl_v-align{\n            height: 100%;\n            display: inline-block;\n            vertical-align: middle;\n        }\n        /* The target element to align vertically with vertical-align. */\n        .harp-gl_v-aligned{\n            pointer-events: all;\n            vertical-align: middle;\n            display: inline-block;\n        }\n        .harp-gl_controls-button {\n            display: block;\n            background-color: #272d37;\n            width: 40px;\n            height: 40px;\n            font-size: 22px;\n            font-weight: bold;\n            outline: none;\n            margin:0;\n            border: none;\n            color: rgba(255, 255, 255, 0.8);\n            cursor: pointer;\n            border-radius: 4px;\n            box-shadow: 0px 0px 5px 0 hsl(220, 4%, 40%);\n            transition: all 0.1s;\n            padding: 0 0 1px 1px;\n            user-select: none;\n            position:relative;\n        }\n        #harp-gl_controls_tilt-button-ui {\n            font-size: 16px;\n        }\n        .harp-gl_controls-button:active {\n            background-color: #37afaa;\n            color: #eee;\n        }\n        .harp-gl_controls-button:focus {\n            outline:none;\n        }\n        .harp-gl_controls_button-top{\n            margin-bottom:0;\n            border-bottom-right-radius:0;\n            border-bottom-left-radius:0;\n        }\n        .harp-gl_controls_button-bottom{\n            margin-top:1px;\n            border-top-right-radius:0;\n            border-top-left-radius:0;\n        }\n        .harp-gl_controls_zoom-level {\n            display: block;\n            background-color: #fff;\n            width: 40px;\n            height: 20px;\n            font-size: 12px;\n            font-weight: bold;\n            outline: none;\n            border: none;\n            color: #555;\n            opacity: 0.87;\n            box-shadow: 0px 0px 4px #aaa;\n            padding: 2px 0 0;\n            text-align: center;\n            user-select: text;\n        }\n        input.harp-gl_controls_zoom-level::-webkit-outer-spin-button,\n        input.harp-gl_controls_zoom-level::-webkit-inner-spin-button {\n            /* display: none; <- Crashes Chrome on hover */\n            -webkit-appearance: none;\n            margin: 0; /* <-- Apparently some margin are still there even though it\'s hidden */\n        }\n        input.harp-gl_controls_zoom-level[type=number] {\n            -moz-appearance:textfield; /* Firefox */\n        }\n        #harp-gl_controls-button_compass{\n            overflow: hidden;\n            margin: 5px 0 0 0;\n        }\n        #harp-gl_controls_compass{\n            pointer-events:none;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            margin:0\n        }\n        #harp-gl_controls_compass::after{\n            content: " ";\n            position:absolute;\n            left:50%;\n            margin-left:-3px;\n            top:50%;\n            margin-top: -18px;\n            border:solid 3px rgba(0,0,0,0);\n            border-bottom:solid 15px #a34f2e;\n        }\n        #harp-gl_controls_compass::before{\n            content: " ";\n            position:absolute;\n            left:50%;\n            margin-left:-3px;\n            top:50%;\n            margin-top:0px;\n            border:solid 3px rgba(0,0,0,0);\n            border-top:solid 15px #eee;\n        }\n        #harp-gl_controls_switch_projection{\n            margin-top:5px;\n        }\n        .harp-gl_controls_switch_svg{\n            width: 25px;\n            height: 25px;\n            stroke: #d4d5d7;\n            fill: #d4d5d7;\n        }\n    ')),document.head.appendChild(e)}}},53161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWidthAndHeightFromCanvas=t.safeParseDecimalInt=t.azimuthAltitudeToDirection=t.calculateNormalizedDeviceCoordinates=void 0;const r=n(534);function i(e,t){if(null===e||void 0===e||""===e)return t;if(!e.match(o))return t;const n=Number.parseInt(e,10);return isNaN(n)?t:n}t.calculateNormalizedDeviceCoordinates=function(e,t,n,i){return new r.Vector2(e/n*2-1,-t/i*2+1)},t.azimuthAltitudeToDirection=function(e,t){e=e,t=t;const n=new r.Vector3,i=Math.cos(t);return n.setX(Math.sin(e)*i),n.setY(Math.cos(e)*i),n.setZ(Math.sin(t)),n},t.safeParseDecimalInt=i;const o=/^\d+$/;t.getWidthAndHeightFromCanvas=function(e){return{width:i(e.style.width,e.clientWidth),height:i(e.style.height,e.clientHeight)}}},36676:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(81315),t),i(n(44659),t),i(n(4917),t)},81315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProvider=void 0,n(89064);const r=n(534);class i extends r.EventDispatcher{constructor(){super(...arguments),this.m_clients=new Set}register(e){return 0===this.m_clients.size&&(this.m_connectPromise=this.connect()),this.m_clients.add(e),this.m_connectPromise}unregister(e){this.m_clients.delete(e)&&0===this.m_clients.size&&this.dispose()}}t.DataProvider=i},44659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileDataSource=t.TileFactory=void 0;const r=n(48991),i=n(30081),o=n(15739),a=n(4917);t.TileFactory=class{constructor(e){this.m_modelConstructor=e}create(e,t){const n=new this.m_modelConstructor(e,t);return n.tileLoader=new a.TileLoader(e,t,e.dataProvider(),e.decoder),n}};class s extends r.DataSource{constructor(e,t){var n,i;if(super(t),this.m_tileFactory=e,this.m_options=t,this.logger=o.LoggerManager.instance.create("TileDataSource"),this.m_isReady=!1,t.decoder)this.m_decoder=t.decoder;else{if(!t.concurrentDecoderServiceName)throw new Error(`TileDataSource[${this.name}]: unable to create, missing decoder or concurrentDecoderServiceName`);this.m_decoder=r.ConcurrentDecoderFacade.getTileDecoder(t.concurrentDecoderServiceName,t.concurrentDecoderScriptUrl,t.concurrentDecoderWorkerCount,t.workerConnectionTimeout)}this.useGeometryLoader=!0,this.cacheable=!0,this.m_unregisterClearTileCache=null===(i=(n=this.dataProvider()).onDidInvalidate)||void 0===i?void 0:i.call(n,(()=>this.mapView.markTilesDirty(this)))}dispose(){var e;null===(e=this.m_unregisterClearTileCache)||void 0===e||e.call(this),this.decoder.dispose(),this.dataProvider().unregister(this)}ready(){return this.m_isReady&&this.m_options.dataProvider.ready()}get decoder(){return this.m_decoder}async connect(){await Promise.all([this.m_options.dataProvider.register(this),this.m_decoder.connect()]),this.m_isReady=!0;let e={};void 0!==this.m_options.storageLevelOffset&&(e={storageLevelOffset:this.m_options.storageLevelOffset}),this.m_decoder.configure({languages:this.languages},e)}setLanguages(e){this.languages=e,this.m_decoder.configure({languages:this.languages}),this.mapView.clearTileCache(this.name)}async setTheme(e,t){let n;e=await i.ThemeLoader.load(e),void 0!==this.styleSetName&&void 0!==e.styles&&(n=e.styles[this.styleSetName]),void 0!==t&&(this.languages=t),void 0!==n&&(this.m_decoder.configure({styleSet:n,definitions:e.definitions,priorities:e.priorities,labelPriorities:e.labelPriorities,languages:t}),this.mapView.clearTileCache(this.name))}dataProvider(){return this.m_options.dataProvider}getTilingScheme(){return this.m_options.tilingScheme}getTile(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.m_tileFactory.create(this,e);return n.copyrightInfo=this.m_options.copyrightInfo,void 0!==this.m_options.copyrightProvider&&this.m_options.copyrightProvider.getCopyrights(n.geoBox,e.level).then((e=>{n.copyrightInfo=void 0===n.copyrightInfo?e:[...n.copyrightInfo,...e],this.requestUpdate()})),t||n.load(),n}getTileInfo(e){return new Promise(((t,n)=>{const i=new a.TileInfoLoader(this,e,this.m_options.dataProvider,this.decoder);i.loadAndDecode().then((e=>{e===r.TileLoaderState.Ready?t(i.tileInfo):n(new Error(`TileDataSource#getInfoTile wrong final state: ${e}`))}))}))}}t.TileDataSource=s},4917:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileInfoLoader=t.TileLoader=void 0,n(89064);const r=n(26309),i=n(48991),o=n(44097),a=n(15739).LoggerManager.instance.create("TileLoader");class s extends i.BaseTileLoader{constructor(e,t,n,r){super(e,t),this.dataSource=e,this.tileKey=t,this.dataProvider=n,this.tileDecoder=r}get priority(){return this.m_priority}set priority(e){this.m_priority=e,void 0!==this.requestController&&(this.requestController.priority=e)}loadImpl(e,t,n){this.dataProvider.getTile(this.tileKey,e).then((r=>{if(e.aborted){const e=new Error("Aborted");throw e.name="AbortError",e}this.onLoaded(r,t,n)})).catch((e=>{"AbortError"!==e.name&&"AbortError: Aborted"!==e.message&&n(e)}))}cancelImpl(){this.state===o.TileLoaderState.Decoding&&this.requestController&&(this.requestController.abort(),this.requestController=void 0)}startDecodeTile(e,t){const n=this.payload;if(void 0===n)return void a.error("TileLoader#startDecodeTile: Cannot decode without payload");this.state=o.TileLoaderState.Decoding,this.payload=void 0;const i=new r.RequestController(this.priority);this.requestController=i;const s=this.dataSource;this.tileDecoder.decodeTile(n,this.tileKey,s.projection,i).then((t=>{i.signal.aborted||this.onDecoded(t,e)})).catch((e=>{"AbortError"!==e.name&&"AbortError: Aborted"!==e.message&&t(e)}))}onLoaded(e,t,n){this.state=o.TileLoaderState.Loaded,this.payload=e;0===e.byteLength||e.constructor===Object&&0===Object.keys(e).length?this.onDecoded({geometries:[],techniques:[]},t):this.startDecodeTile(t,n)}onDecoded(e,t){this.decodedTile=e,t(o.TileLoaderState.Ready)}}t.TileLoader=s;t.TileInfoLoader=class extends s{startDecodeTile(e,t){const n=this.payload;if(void 0===n)return void a.error("TileInfoLoader#startDecodeTile: Cannot decode without payload");this.state=o.TileLoaderState.Decoding,this.payload=void 0;const i=new r.RequestController(this.priority);this.requestController=i;const s=this.dataSource;this.tileDecoder.getTileInfo(n,this.tileKey,s.projection,i).then((t=>{i.signal.aborted||(this.tileInfo=t,e(o.TileLoaderState.Ready))})).catch((e=>{"AbortError"!==e.name&&"AbortError: Aborted"!==e.message&&t(e)}))}}},48991:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57721),t),i(n(31941),t),i(n(31221),t),i(n(20899),t),i(n(64172),t),i(n(45480),t),i(n(37119),t),i(n(86550),t),i(n(12324),t),i(n(58635),t),i(n(56951),t),i(n(52210),t),i(n(34495),t),i(n(8140),t),i(n(53509),t),i(n(87378),t),i(n(49046),t),i(n(26436),t),i(n(71690),t),i(n(13412),t),i(n(47857),t),i(n(17682),t),i(n(80821),t),i(n(41483),t),i(n(89644),t),i(n(44097),t),i(n(21317),t),i(n(89849),t),i(n(10018),t),i(n(29001),t),i(n(65312),t),i(n(64873),t),i(n(3457),t),i(n(12918),t),i(n(92980),t),i(n(61086),t),i(n(6549),t),i(n(91422),t),i(n(92301),t),i(n(40449),t),i(n(4509),t),i(n(24856),t),i(n(30081),t),i(n(67247),t),i(n(56300),t),i(n(27555),t),i(n(61563),t),i(n(3236),t),i(n(2391),t),i(n(56367),t),i(n(53687),t)},57721:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedExtrusionHandler=t.AnimatedExtrusionState=void 0;const r=n(26309),i=n(85164),o=n(15739);var a;!function(e){e[e.None=0]="None",e[e.Started=1]="Started",e[e.Finished=2]="Finished"}(a=t.AnimatedExtrusionState||(t.AnimatedExtrusionState={}));t.AnimatedExtrusionHandler=class{constructor(e){this.m_mapView=e,this.enabled=!0,this.duration=750,this.m_minZoomLevel=1,this.m_forceEnabled=!1,this.m_dataSourceMap=new Map,this.m_state=a.None,this.m_startTime=-1}get forceEnabled(){return this.m_forceEnabled}set forceEnabled(e){this.m_forceEnabled=e,this.duration=750}get minZoomLevel(){return this.m_minZoomLevel}setAnimationProperties(e,t){if(!r.isExtrudedPolygonTechnique(e))return!1;if(e.hasOwnProperty("minZoomLevel")&&(this.m_minZoomLevel=e.minZoomLevel),this.forceEnabled)return this.enabled;void 0!==e.animateExtrusionDuration&&(this.duration=e.animateExtrusionDuration);const n=r.getPropertyValue(e.animateExtrusion,t);return null===n?this.enabled:"boolean"===typeof n?n:"number"===typeof n&&0!==n}update(e){const t=this.m_dataSourceMap.size>0&&e>=this.m_minZoomLevel;this.m_state===a.None&&t?this.m_state=a.Started:this.m_state===a.None||t||this.resetAnimation(!0),this.animateExtrusion()}add(e,t){e.addDisposeCallback(this.removeTile.bind(this));let n=!1;this.m_state!==a.None&&(n=this.skipAnimation(e),n?this.setTileExtrusionRatio(t,1):this.m_state===a.Finished&&this.resetAnimation(!1)),this.getOrCreateTileMap(e.dataSource).set(e.tileKey.mortonCode(),{materials:t,animated:n})}get isAnimating(){return this.m_state!==a.Finished&&this.m_state!==a.None}getTileMap(e){return this.m_dataSourceMap.get(e)}getOrCreateTileMap(e){let t=this.m_dataSourceMap.get(e);return t||(t=new Map,this.m_dataSourceMap.set(e,t)),t}skipAnimation(e){return this.wasAnyAncestorAnimated(e)||this.wasAnyDescendantAnimated(e)}wasAnyAncestorAnimated(e){var t,n;const r=e.dataSource.getDataZoomLevel(this.m_minZoomLevel),i=Math.max(0,e.tileKey.level-r),o=Math.min(i,this.m_mapView.visibleTileSet.options.quadTreeSearchDistanceUp),a=this.getTileMap(e.dataSource);if(!a)return!1;let s=e.tileKey;for(let l=1;l<=o;++l)if(s=s.parent(),null!==(n=null===(t=a.get(s.mortonCode()))||void 0===t?void 0:t.animated)&&void 0!==n&&n)return!0;return!1}wasAnyDescendantAnimated(e){var t,n;const r=e.dataSource.maxDataLevel-e.tileKey.level,i=Math.min(r,this.m_mapView.visibleTileSet.options.quadTreeSearchDistanceDown),o=this.getTileMap(e.dataSource);if(!o)return!1;const a=e.dataSource.getTilingScheme();let s=[e.tileKey],l=[];for(let c=1;c<=i;++c){l.length=0;for(const e of s)for(const r of a.getSubTileKeys(e)){if(null!==(n=null===(t=o.get(r.mortonCode()))||void 0===t?void 0:t.animated)&&void 0!==n&&n)return!0;l.push(r)}[s,l]=[l,s]}return!1}removeTile(e){const t=this.getTileMap(e.dataSource);t&&(t.delete(e.tileKey.mortonCode()),0===t.size&&this.m_dataSourceMap.delete(e.dataSource))}animateExtrusion(){if(this.m_state!==a.Started)return;const e=Date.now();this.m_startTime<0&&(this.m_startTime=e);const t=this.duration,n=Math.min(e-this.m_startTime,t),r=o.MathUtils.easeInOutCubic(i.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN,i.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX,n/t);this.setExtrusionRatio(r),n>=t&&(this.m_state=a.Finished),this.m_mapView.update()}resetAnimation(e){this.m_state=a.None,this.m_startTime=-1,e&&this.m_dataSourceMap.forEach((e=>{e.forEach((e=>{e.animated=!1}))}))}setExtrusionRatio(e){this.m_dataSourceMap.forEach((t=>{t.forEach((t=>{t.animated||(this.setTileExtrusionRatio(t.materials,e),e>=1&&(t.animated=!0))}))}))}setTileExtrusionRatio(e,t){e.forEach((e=>{e.extrusionRatio=t}))}}},49417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundDataSource=void 0;const r=n(31201),i=n(87378),o=n(23350),a=n(67247);class s extends i.DataSource{constructor(){super({name:"background"}),this.m_tilingScheme=s.DEFAULT_TILING_SCHEME,this.cacheable=!0,this.addGroundPlane=!0,this.enablePicking=!1}updateStorageLevelOffset(){let e;this.mapView.dataSources.forEach((t=>{if(t===this)return;t.getTilingScheme()===this.m_tilingScheme&&(e=void 0===e?t.storageLevelOffset:Math.max(e,t.storageLevelOffset))})),void 0===e&&(e=0),e!==this.storageLevelOffset&&(this.storageLevelOffset=e,this.mapView.clearTileCache(this.name))}async setTheme(e,t){this.mapView.clearTileCache(this.name)}setTilingScheme(e){const t=null!==e&&void 0!==e?e:s.DEFAULT_TILING_SCHEME;t!==this.m_tilingScheme&&(this.m_tilingScheme=t,this.updateStorageLevelOffset(),this.mapView.clearTileCache(this.name))}getTilingScheme(){return this.m_tilingScheme}getTile(e){const t=new a.Tile(this,e);return t.forceHasGeometry(!0),o.addGroundPlane(t,s.GROUND_RENDER_ORDER),t}}t.BackgroundDataSource=s,s.GROUND_RENDER_ORDER=Number.MIN_SAFE_INTEGER,s.DEFAULT_TILING_SCHEME=r.webMercatorTilingScheme},31941:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTileLoader=void 0;const r=n(15739),i=n(44097),o=r.LoggerManager.instance.create("BaseTileLoader");t.BaseTileLoader=class{constructor(e,t){this.dataSource=e,this.tileKey=t,this.state=i.TileLoaderState.Initialized,this.m_priority=0,this.loadAbortController=new AbortController}get priority(){return this.m_priority}set priority(e){this.m_priority=e}loadAndDecode(){switch(this.state){case i.TileLoaderState.Loading:case i.TileLoaderState.Loaded:case i.TileLoaderState.Decoding:return this.donePromise;case i.TileLoaderState.Ready:case i.TileLoaderState.Failed:case i.TileLoaderState.Initialized:case i.TileLoaderState.Canceled:return this.load(),this.donePromise}}waitSettled(){return this.donePromise?this.donePromise:Promise.resolve(this.state)}cancel(){this.state===i.TileLoaderState.Loading&&(this.loadAbortController.abort(),this.loadAbortController=new AbortController),this.cancelImpl(),this.onDone(i.TileLoaderState.Canceled)}get isFinished(){return this.state===i.TileLoaderState.Ready||this.state===i.TileLoaderState.Canceled||this.state===i.TileLoaderState.Failed}cancelImpl(){}load(){this.loadImpl(this.loadAbortController.signal,this.onDone.bind(this),this.onError.bind(this)),void 0===this.donePromise&&(this.donePromise=new Promise(((e,t)=>{this.resolveDonePromise=e,this.rejectedDonePromise=t}))),this.state=i.TileLoaderState.Loading}onDone(e){this.resolveDonePromise&&e===i.TileLoaderState.Ready?this.resolveDonePromise(e):this.rejectedDonePromise&&this.rejectedDonePromise(e),this.resolveDonePromise=void 0,this.rejectedDonePromise=void 0,this.donePromise=void 0,this.state=e}onError(e){if(this.state===i.TileLoaderState.Canceled)return;const t=this.dataSource;o.error(`[${t.name}]: failed to load tile ${this.tileKey.mortonCode()}`,e),this.error=e,this.onDone(i.TileLoaderState.Failed)}}},31221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoundsGenerator=void 0;const r=n(31201),i=n(80057),o=n(32344);t.BoundsGenerator=class{constructor(e){this.m_view=e,this.createViewBounds()}generate(){return this.m_view.projection!==this.m_viewBounds.projection&&this.createViewBounds(),this.m_viewBounds.generate()}createViewBounds(){this.m_viewBounds=this.m_view.projection.type===r.ProjectionType.Planar?new i.PlaneViewBounds(this.m_view.camera,this.m_view.projection,this.m_view):new o.SphereViewBounds(this.m_view.camera,this.m_view.projection)}}},20899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraMovementDetector=void 0;const r=n(534),i=n(61563);t.CameraMovementDetector=class{constructor(e,t,n){this.m_throttlingTimeout=e,this.m_movementStartedFunc=t,this.m_movementFinishedFunc=n,this.m_lastCameraPos=new r.Vector3,this.m_newCameraPos=new r.Vector3,this.m_throttlingTimerId=void 0,this.m_movementDetectorDeadline=0,this.onDeadlineTimer=()=>{this.m_throttlingTimerId=void 0;const e=performance.now();e>=this.m_movementDetectorDeadline?this.movementFinished():this.startMovementFinishedTimer(e)},void 0===this.m_throttlingTimeout&&(this.m_throttlingTimeout=300)}checkCameraMoved(e,t){const n=i.MapViewUtils.extractAttitude(e,e.camera),r=e.camera.getWorldPosition(this.m_newCameraPos);if(void 0===this.m_lastAttitude)return this.m_lastCameraPos.copy(r),this.m_lastAttitude=n,!1;const o=!this.m_lastCameraPos.equals(r)||n.yaw!==this.m_lastAttitude.yaw||n.pitch!==this.m_lastAttitude.pitch||n.roll!==this.m_lastAttitude.roll;return o&&(this.m_lastCameraPos.copy(r),this.m_lastAttitude=n),o!==this.m_cameraMovedLastFrame&&(o&&this.movementStarted(),this.m_cameraMovedLastFrame=o),o&&(this.m_movementDetectorDeadline=t+this.m_throttlingTimeout,this.startMovementFinishedTimer(t)),this.m_cameraMovedLastFrame}clear(e){const t=e.camera.getWorldPosition(this.m_newCameraPos);this.m_lastCameraPos.set(t.x,t.y,t.z);const n=i.MapViewUtils.extractAttitude(e,e.camera);this.m_lastAttitude=n}forceMoved(){this.m_lastCameraPos.set(Number.NaN,Number.NaN,Number.NaN)}get cameraIsMoving(){return void 0!==this.m_throttlingTimerId}dispose(){this.removeMovementFinishedTimer(),this.m_movementStartedFunc=void 0,this.m_movementFinishedFunc=void 0}get cameraMovedLastFrame(){return!0===this.m_cameraMovedLastFrame}movementStarted(){void 0!==this.m_movementStartedFunc&&this.m_movementStartedFunc()}movementFinished(){this.removeMovementFinishedTimer(),void 0!==this.m_movementFinishedFunc&&this.m_movementFinishedFunc()}startMovementFinishedTimer(e){if(void 0===this.m_throttlingTimerId){const t=Math.max(0,this.m_movementDetectorDeadline-e);this.m_throttlingTimerId=setTimeout(this.onDeadlineTimer,t)}}removeMovementFinishedTimer(){void 0!==this.m_throttlingTimerId&&(clearTimeout(this.m_throttlingTimerId),this.m_throttlingTimerId=void 0)}}},64172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraUtils=void 0;const r=n(15739),i=n(534),o=n(71690);function a(e,t,n){return r.assert(e>0,"Focal length must be larger than 0"),Math.atan((1-t)*n*.5/e)}function s(e,t,n){return r.assert(e>0,"Focal length must be larger than 0"),0===t?2*Math.atan(.5*n/e):a(e,t,n)+a(e,-t,n)}function l(e){return e.userData.fovs}function c(e,t,n,r,l){const c=r*e.aspect;let h=s(n,t.x,c);if(h<o.MIN_FOV_RAD||h>o.MAX_FOV_RAD){h=i.MathUtils.clamp(h,o.MIN_FOV_RAD,o.MAX_FOV_RAD);l=s(u(h,c,t.x),t.y,r)}if(e.fov=i.MathUtils.radToDeg(l),0===(d=t).x&&0===d.y)delete e.userData.fovs;else{const i=r*e.aspect;e.userData.fovs={top:a(n,t.y,r),right:a(n,t.x,i),horizontal:h}}var d;e.userData.focalLength=n}function u(e,t,n){const i=t/2;if(0===n)return i/Math.tan(e/2);const o=n**2;if(Math.abs(e-Math.PI/2)<1e-6)return i*Math.sqrt(1-o);const a=Math.tan(e),s=i*(1+Math.sign(a)*Math.sqrt(1+a**2*(1-o)))/a;return r.assert(s>=0,"Focal length must be larger than 0"),s}!function(e){function t(e){var t;return null===(t=e.userData)||void 0===t?void 0:t.focalLength}function n(e){return i.MathUtils.degToRad(e.fov)}function r(e,t,r){t=i.MathUtils.clamp(t,o.MIN_FOV_RAD,o.MAX_FOV_RAD);const s=a(e);return c(e,s,u(t,r,s.y),r,t),n(e)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Vector2;return t.x=-e.projectionMatrix.elements[8],t.y=-e.projectionMatrix.elements[9],t}function h(e){var t,n;return null!==(n=null===(t=l(e))||void 0===t?void 0:t.horizontal)&&void 0!==n?n:2*Math.atan(Math.tan(i.MathUtils.degToRad(e.fov)/2)*e.aspect)}function d(e){var t,n;return null!==(n=null===(t=l(e))||void 0===t?void 0:t.top)&&void 0!==n?n:i.MathUtils.degToRad(e.fov/2)}function p(e){var t,n;return null!==(n=null===(t=l(e))||void 0===t?void 0:t.right)&&void 0!==n?n:h(e)/2}e.getFocalLength=t,e.setFocalLength=function(e,n,i){const l=a(e),u=s(n,l.y,i);return u<o.MIN_FOV_RAD||u>o.MAX_FOV_RAD?r(e,u,i):c(e,l,n,i,u),t(e)},e.getVerticalFov=n,e.setVerticalFov=r,e.convertWorldToScreenSize=function(e,t,n){return e*n/t},e.convertScreenToWorldSize=function(e,t,n){return t*n/e},e.getPrincipalPoint=a,e.setPrincipalPoint=function(e,t){const n=e.aspect,r=.999999;e.setViewOffset(n,1,-i.MathUtils.clamp(t.x,-.999999,r)*n/2,1*i.MathUtils.clamp(t.y,-.999999,r)/2,n,1)},e.getHorizontalFov=h,e.getTopFov=d,e.getBottomFov=function(e){return i.MathUtils.degToRad(e.fov)-d(e)},e.getRightFov=p,e.getLeftFov=function(e){var t;return void 0!==(null===(t=l(e))||void 0===t?void 0:t.right)?h(e)-p(e):h(e)/2}}(t.CameraUtils||(t.CameraUtils={}))},45480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultClipPlanesEvaluator=t.TiltViewClipPlanesEvaluator=t.TopViewClipPlanesEvaluator=t.ElevationBasedClipPlanesEvaluator=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(64172),s=n(61563),l=1e-6;var c;!function(e){const t=[new o.Vector3,new o.Vector3],n=new o.Raycaster,i=new o.Sphere(new o.Vector3,r.EarthConstants.EQUATORIAL_RADIUS);function a(e,t){return e-t<l?0:Math.sqrt(e*e-t*t)}e.getFarDistanceFromElevatedHorizon=function(t,n,r,i){const o=a(n,r),s=a(i,r),l=Math.asin(r/n),c=Math.abs(l-e.getNormalToFwdAngle(t));return Math.cos(c)*(o+s)},e.getProjNearPlaneTanDistance=function(e,n,r){const i=e.getWorldDirection(t[0]),o=t[1].copy(i).multiplyScalar(-r).sub(e.position),a=o.dot(i);return a/o.length()>Math.cos(n)?a:void 0},e.getProjSphereIntersectionDistance=function(e,r,o){n.setFromCamera(r,e),i.radius=o;const a=n.ray.intersectSphere(i,t[0]);return null!==a?a.sub(e.position).dot(e.getWorldDirection(t[1])):void 0},e.getNormalToFwdAngle=function(e){const n=t[0].copy(e.position).negate().normalize().dot(e.getWorldDirection(t[1]));return Math.acos(o.MathUtils.clamp(n,-1,1))}}(c||(c={}));class u{constructor(e,t){i.assert(e>=t),this.m_minElevation=t,this.m_maxElevation=e}set maxElevation(e){this.m_maxElevation=e,this.m_minElevation=Math.min(e,this.m_minElevation)}get maxElevation(){return this.m_maxElevation}set minElevation(e){this.m_minElevation=e,this.m_maxElevation=Math.max(e,this.m_maxElevation)}get minElevation(){return this.m_minElevation}}t.ElevationBasedClipPlanesEvaluator=u;class h extends u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.EarthConstants.MAX_BUILDING_HEIGHT,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.05,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6;super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),this.nearMin=t,this.nearFarMarginRatio=n,this.farMaxRatio=a,this.m_tmpVectors=[new o.Vector3,new o.Vector3,new o.Vector3],this.m_tmpQuaternion=new o.Quaternion,i.assert(t>0),i.assert(n>=0),i.assert(a>1);const s=n*t;this.m_minimumViewRange={near:t,far:t+s,minimum:this.nearMin,maximum:Math.max(t*a,t+s)}}evaluateClipPlanes(e,t,n){i.assert(e instanceof o.PerspectiveCamera,"Unsupported camera type.");const a=e;return t.type===r.ProjectionType.Spherical?this.evaluateDistanceSphericalProj(a,t,n):t.type===r.ProjectionType.Planar?this.evaluateDistancePlanarProj(a,t,n):(i.assert(!1,"Unsupported projection type"),Object.assign({},this.minimumViewRange))}get minimumViewRange(){return this.m_minimumViewRange}evaluateDistancePlanarProj(e,t,n){i.assert(t.type!==r.ProjectionType.Spherical);let o=this.nearMin,a=this.nearMin*this.farMaxRatio;const s=t.groundDistance(e.position),l=s*this.farMaxRatio;o=s-this.maxElevation,a=s-this.minElevation,o=Math.max(o,this.nearMin),a=Math.min(a,l);const c=this.nearFarMarginRatio*(o+a)/2;o=Math.max(o-c/2,this.nearMin),a=Math.max(a+c/2,o+c);return{near:o,far:a,minimum:this.nearMin,maximum:Math.max(l,a)}}evaluateDistanceSphericalProj(e,t,n){i.assert(t.type===r.ProjectionType.Spherical);const a=t.groundDistance(e.position);let u=a-this.maxElevation;const h=r.EarthConstants.EQUATORIAL_RADIUS,d=Math.max(l,e.position.length()),p=Math.asin(h/d);let m=o.MathUtils.degToRad(e.fov/2);e.aspect>1&&(m=s.MapViewUtils.calculateHorizontalFovByVerticalFov(2*m,e.aspect));const f=h+this.maxElevation,g=c.getFarDistanceFromElevatedHorizon(e,d,h,f);let v=m>p?g:this.getFovBasedFarPlane(e,d,h,2*m,t);const y=a-this.minElevation,_=a*this.farMaxRatio;u=Math.max(u,this.nearMin),v=Math.max(v,y);const x=this.nearFarMarginRatio*(u+v)/2;u=Math.max(u-x/2,this.nearMin),v=Math.max(v+x/2,u+x);return{near:u,far:v,minimum:this.nearMin,maximum:_}}getFovBasedFarPlane(e,t,n,r,o){const a=e.position;e.matrixWorld.extractBasis(this.m_tmpVectors[0],this.m_tmpVectors[1],this.m_tmpVectors[2]),this.m_tmpQuaternion.setFromAxisAngle(this.m_tmpVectors[0],r/2);const s=this.m_tmpVectors[2],l=this.m_tmpVectors[1].copy(s).applyQuaternion(this.m_tmpQuaternion),c=a.dot(l);if(c<0){return o.groundDistance(e.position)*this.farMaxRatio}const u=a.dot(a)-c*c,h=n*n;i.assert(u<=h,"Please use this evaluator only for top view camera poses.");return c-Math.sqrt(h-u)}}t.TopViewClipPlanesEvaluator=h;class d extends h{constructor(){super(...arguments),this.m_tmpV2=new o.Vector2}evaluateDistancePlanarProj(e,t,n){i.assert(t.type!==r.ProjectionType.Spherical);const c=Object.assign({},this.minimumViewRange),u=Math.PI/2-l,h=t.groundDistance(e.position),d=s.MapViewUtils.extractCameraTilt(e,t),p=a.CameraUtils.getTopFov(e),m=a.CameraUtils.getBottomFov(e),f=o.MathUtils.clamp(d+p,-u,u),g=o.MathUtils.clamp(d-m,-u,u),v=Math.max(0,(h-this.minElevation)/Math.cos(f)),y=Math.max(0,(h-this.maxElevation)/Math.cos(g));return c.near=y*Math.cos(m),c.far=v*Math.cos(p),this.applyViewRangeConstraints(c,e,t,n)}evaluateDistanceSphericalProj(e,t,n){i.assert(t.type===r.ProjectionType.Spherical);const o=Object.assign({},this.minimumViewRange);return o.near=this.computeNearDistSphericalProj(e,t),o.far=this.computeFarDistSphericalProj(e,t),this.applyViewRangeConstraints(o,e,t,n)}computeNearDistSphericalProj(e,t){i.assert(t.type===r.ProjectionType.Spherical);const n=t.groundDistance(e.position)-this.maxElevation;if(n<=0)return 0;const o=r.EarthConstants.EQUATORIAL_RADIUS+this.maxElevation,s=a.CameraUtils.getBottomFov(e),l=c.getProjNearPlaneTanDistance(e,s,o);if(void 0!==l)return l;a.CameraUtils.getPrincipalPoint(e,this.m_tmpV2);const u=this.m_tmpV2.y>0,h=c.getProjSphereIntersectionDistance(e,this.m_tmpV2.setComponent(1,-1),o),d=u?c.getProjSphereIntersectionDistance(e,this.m_tmpV2.setComponent(1,1),o):1/0,p=Math.min(null!==h&&void 0!==h?h:1/0,null!==d&&void 0!==d?d:1/0);return i.assert(p!==1/0,"No reference point for near distance found"),null!==p&&void 0!==p?p:n}computeFarDistSphericalProj(e,t){i.assert(t.type===r.ProjectionType.Spherical);const n=r.EarthConstants.EQUATORIAL_RADIUS,o=n+this.minElevation,s=n+this.maxElevation,l=e.position.length();a.CameraUtils.getPrincipalPoint(e,this.m_tmpV2);const u=this.m_tmpV2.x<=0?1:-1,h=this.m_tmpV2.y>0,d=c.getProjSphereIntersectionDistance(e,this.m_tmpV2.set(u,1),o),p=h?c.getProjSphereIntersectionDistance(e,this.m_tmpV2.set(u,-1),o):0,m=Math.max(null!==d&&void 0!==d?d:1/0,null!==p&&void 0!==p?p:1/0);return m!==1/0?m:c.getFarDistanceFromElevatedHorizon(e,l,n,s)}applyViewRangeConstraints(e,t,n,r){const{distance:i}=s.MapViewUtils.getTargetAndDistance(n,t,r),a=n.groundDistance(t.position)-this.minElevation,l=i*this.farMaxRatio;e.near=Math.max(e.near,this.nearMin),e.far=o.MathUtils.clamp(e.far,a,l);const c=this.nearFarMarginRatio*(e.near+e.far)/2;return e.near=Math.max(e.near-c/2,this.nearMin),e.far=Math.max(e.far+c/2,e.near+c),e.minimum=this.nearMin,e.maximum=l,e}}t.TiltViewClipPlanesEvaluator=d;t.createDefaultClipPlanesEvaluator=()=>new d},37119:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorCache=void 0;const r=n(534);class i{constructor(){this.m_map=new Map}static get instance(){return this.m_instance}getColor(e){"number"===typeof e&&(e="#"+e.toString(16).padStart(6,"0"));let t=this.m_map.get(e);return void 0!==t||(t=new r.Color(e),this.m_map.set(e,t)),t}get size(){return this.m_map.size}clear(){this.m_map.clear()}}t.ColorCache=i,i.m_instance=new i},12324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConcurrentDecoderFacade=void 0;const r=n(17703),i=n(2391);class o{static getTileDecoder(e,t,n,r){const o=this.getWorkerSet(t,n,r);return new i.WorkerBasedDecoder(o,e)}static getWorkerSet(e,t,n){void 0===e&&(e=this.defaultScriptUrl);let i=this.workerSets[e];if(void 0===i){const o=void 0!==n?1e3*n:void 0;i=new r.ConcurrentWorkerSet({scriptUrl:e,workerCount:null!==t&&void 0!==t?t:this.defaultWorkerCount,workerConnectionTimeout:o}),this.workerSets[e]=i}return i}static destroyWorkerSet(e){const t=this.workerSets[e];void 0!==t&&(t.destroy(),delete this.workerSets[e])}static destroy(){Object.keys(this.workerSets).forEach((e=>{this.workerSets[e].destroy()})),this.workerSets={}}static destroyIfTerminated(){let e=!0;Object.keys(this.workerSets).forEach((t=>{this.workerSets[t].terminated||(e=!1)})),e&&o.destroy()}}t.ConcurrentDecoderFacade=o,o.defaultScriptUrl="./decoder.bundle.js",o.defaultWorkerCount=void 0,o.workerSets={}},58635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConcurrentTilerFacade=void 0;const r=n(17703),i=n(56367);class o{static getTiler(e,t,n,r){const o=this.getWorkerSet(t,n,r);return new i.WorkerBasedTiler(o,e)}static getWorkerSet(e,t,n){void 0===e&&(e=this.defaultScriptUrl);let i=this.workerSets[e];if(void 0===i){const o=void 0!==n?1e3*n:void 0;i=new r.ConcurrentWorkerSet({scriptUrl:e,workerCount:null!==t&&void 0!==t?t:this.defaultWorkerCount,workerConnectionTimeout:o}),this.workerSets[e]=i}return i}static destroyWorkerSet(e){const t=this.workerSets[e];void 0!==t&&(t.destroy(),delete this.workerSets[e])}static destroy(){Object.keys(this.workerSets).forEach((e=>{this.workerSets[e].destroy()})),this.workerSets={}}static destroyIfTerminated(){let e=!0;Object.keys(this.workerSets).forEach((t=>{this.workerSets[t].terminated||(e=!1)})),e&&o.destroy()}}t.ConcurrentTilerFacade=o,o.defaultScriptUrl="./decoder.bundle.js",o.defaultWorkerCount=1,o.workerSets={}},17703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConcurrentWorkerSet=t.DEFAULT_WORKER_INITIALIZATION_TIMEOUT=t.isLoggingMessage=void 0;const r=n(26309),i=n(15739),o=n(534),a=n(53687),s=i.LoggerManager.instance.create("ConcurrentWorkerSet");function l(e){return e&&"number"===typeof e.level&&e.type===i.WORKERCHANNEL_MSG_TYPE}t.isLoggingMessage=l;t.DEFAULT_WORKER_INITIALIZATION_TIMEOUT=1e4;t.ConcurrentWorkerSet=class{constructor(e){this.m_options=e,this.m_workerChannelLogger=i.LoggerManager.instance.create("WorkerChannel"),this.m_eventListeners=new Map,this.m_workers=new Array,this.m_availableWorkers=new Array,this.m_workerPromises=new Array,this.m_readyPromises=new Map,this.m_requests=new Map,this.m_workerRequestQueue=[],this.m_nextMessageId=0,this.m_stopped=!0,this.m_referenceCount=0,this.onWorkerMessage=(e,t)=>{if(r.WorkerServiceProtocol.isResponseMessage(t.data)){const n=t.data;if(null===n.messageId)return void s.error(`[${this.m_options.scriptUrl}]: Bad ResponseMessage: no messageId`);const r=this.m_requests.get(n.messageId);if(void 0===r)return void s.error(`[${this.m_options.scriptUrl}]: Bad ResponseMessage: invalid messageId`);if(e>=0&&e<this.m_workers.length){const t=this.m_workers[e];this.m_availableWorkers.push(t),this.checkWorkerRequestQueue()}else s.error(`[${this.m_options.scriptUrl}]: onWorkerMessage: invalid workerId`);if(void 0!==n.errorMessage){const e=new Error(n.errorMessage);void 0!==n.errorStack&&(e.stack=n.errorStack),r.resolver(e)}else r.resolver(void 0,n.response)}else if(r.WorkerServiceProtocol.isInitializedMessage(t.data)){const e=this.getReadyPromise(t.data.service);++e.count===this.m_workerPromises.length&&e.resolve()}else if(l(t.data))switch(t.data.level){case i.LogLevel.Trace:this.m_workerChannelLogger.trace(...t.data.message);break;case i.LogLevel.Debug:this.m_workerChannelLogger.debug(...t.data.message);break;case i.LogLevel.Log:this.m_workerChannelLogger.log(...t.data.message);break;case i.LogLevel.Info:this.m_workerChannelLogger.info(...t.data.message);break;case i.LogLevel.Warn:this.m_workerChannelLogger.warn(...t.data.message);break;case i.LogLevel.Error:this.m_workerChannelLogger.error(...t.data.message)}else this.eventHandler(t)},this.start()}addReference(){this.m_referenceCount+=1,1===this.m_referenceCount&&this.m_stopped&&this.start()}removeReference(){this.m_referenceCount-=1,0===this.m_referenceCount&&this.destroy()}start(e){if(void 0!==e&&(this.m_options=e),!this.m_stopped)throw new Error("ConcurrentWorker set already started");this.m_workerCount=i.getOptionValue(this.m_options.workerCount,"undefined"!==typeof navigator&&void 0!==navigator.hardwareConcurrency?o.MathUtils.clamp(navigator.hardwareConcurrency-1,1,2):void 0,2);const n=i.getOptionValue(this.m_options.workerConnectionTimeout,t.DEFAULT_WORKER_INITIALIZATION_TIMEOUT);for(let t=0;t<this.m_workerCount;++t){const e=a.WorkerLoader.startWorker(this.m_options.scriptUrl,n).then((e=>{const n=e=>{this.onWorkerMessage(t,e)};return e.addEventListener("message",n),this.m_workers.push(e),this.m_availableWorkers.push(e),{worker:e,listener:n}}));this.m_workerPromises.push(e)}this.m_stopped=!1}get workerCount(){return this.m_workerCount}async stop(){this.m_stopped=!0,await this.waitForAllResponses().then((()=>{this.terminateWorkers()}))}destroy(){this.m_stopped=!0,this.m_requests.forEach((e=>{e.resolver(new Error("worker destroyed"))})),this.m_requests.clear(),this.m_workerRequestQueue=[],this.terminateWorkers(),this.m_eventListeners.clear()}get terminated(){return 0===this.m_workers.length}async connect(e){return this.ensureStarted(),await Promise.all(this.m_workerPromises),await this.getReadyPromise(e).promise}addEventListener(e,t){this.m_eventListeners.set(e,t)}removeEventListener(e){this.m_eventListeners.delete(e)}invokeRequest(e,t,n,i){this.ensureStarted();const o=this.m_nextMessageId++;let a;const s=new Promise(((e,t)=>{a=(n,r)=>{this.m_requests.delete(o),void 0!==n?t(n):e(r)}}));this.m_requests.set(o,{promise:s,resolver:a});const l={service:e,type:r.WorkerServiceProtocol.ServiceMessageName.Request,messageId:o,request:t};return this.postRequestMessage(l,n,i),s}broadcastRequest(e,t,n){const i=[];for(const o of this.m_workers){const a=this.m_nextMessageId++;let s;const l=new Promise(((e,t)=>{s=(n,r)=>{this.m_requests.delete(a),void 0!==n?t(n):e(r)}}));i.push(l),this.m_requests.set(a,{promise:l,resolver:s});const c={service:e,type:r.WorkerServiceProtocol.ServiceMessageName.Request,messageId:a,request:t};void 0!==n?o.postMessage(c,n):o.postMessage(c)}return Promise.all(i)}broadcastMessage(e,t){this.ensureStarted(),void 0!==t?this.m_workers.forEach((n=>n.postMessage(e,t))):this.m_workers.forEach((t=>t.postMessage(e)))}get requestQueueSize(){return this.m_workerRequestQueue.length}get numWorkers(){return this.m_workers.length}get numIdleWorkers(){return this.m_availableWorkers.length}eventHandler(e){"string"===typeof e.data.type&&this.dispatchEvent(e.data.type,e)}postRequestMessage(e,t,n){if(this.ensureStarted(),0===this.m_workers.length)throw new Error("ConcurrentWorkerSet#postMessage: no workers started");if(void 0!==n&&n.signal.aborted){const t=this.m_requests.get(e.messageId);if(void 0===t)return void s.error(`[${this.m_options.scriptUrl}]: Bad RequestMessage: invalid messageId`);const n=new Error("Aborted");return n.name="AbortError",void t.resolver(n,void 0)}if(this.m_availableWorkers.length>0){const n=this.m_availableWorkers.pop();void 0!==t?n.postMessage(e,t):n.postMessage(e)}else void 0===n&&(n=new r.RequestController(0)),0===n.priority&&(n.priority=-this.m_nextMessageId),this.m_workerRequestQueue.unshift({message:e,buffers:t,requestController:n})}ensureStarted(){if(this.m_stopped)throw new Error("ConcurrentWorkerSet stopped")}async waitForAllResponses(){const e=new Array;this.m_requests.forEach((t=>{e.push(t.promise)})),await Promise.all(e)}dispatchEvent(e,t){const n=this.m_eventListeners.get(e);void 0!==n&&n(t)}terminateWorkers(){this.m_workerPromises.forEach((e=>{e.then((e=>{void 0!==e&&(e.worker.removeEventListener("message",e.listener),e.worker.terminate())}))})),this.m_workers=[],this.m_workerPromises=[],this.m_availableWorkers=[],this.m_readyPromises.clear()}getReadyPromise(e){const t=this.m_readyPromises.get(e);if(void 0!==t)return t;const n={count:0,promise:void 0,resolve:()=>{},reject:e=>{n.error=e},error:void 0};return n.promise=new Promise(((e,t)=>{const r=n;void 0!==r.error?t(r.error):r.count===this.m_workerPromises.length&&e(),r.resolve=e,r.reject=t})),this.m_readyPromises.set(e,n),n}checkWorkerRequestQueue(){if(0!==this.m_workerRequestQueue.length&&0!==this.m_availableWorkers.length)for(this.m_workerRequestQueue.sort(((e,t)=>e.requestController.priority-t.requestController.priority));this.m_availableWorkers.length>0&&this.m_workerRequestQueue.length>0;){const e=this.m_workerRequestQueue.pop();this.postRequestMessage(e.message,e.buffers,e.requestController)}}}},87378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0;const r=n(46704),i=n(15739),o=n(534),a=i.LoggerManager.instance.create("DataSource");class s extends o.EventDispatcher{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.UPDATE_EVENT={type:"update"},this.enabled=!0,this.cacheable=!1,this.useGeometryLoader=!1,this.addGroundPlane=!1,this.minDataLevel=1,this.maxDataLevel=20,this.minDisplayLevel=1,this.maxDisplayLevel=20,this.allowOverlappingTiles=!0,this.enablePicking=!0,this.dataSourceOrder=0,this.exprPool=new r.ExprPool,this.m_maxGeometryHeight=0,this.m_minGeometryHeight=0,this.m_storageLevelOffset=0,this.m_featureStateMap=new Map;let{name:t}=e;const{styleSetName:n,languages:i,minZoomLevel:o,maxZoomLevel:a,minDataLevel:l,maxDataLevel:c,minDisplayLevel:u,maxDisplayLevel:h,storageLevelOffset:d,allowOverlappingTiles:p,enablePicking:m,minGeometryHeight:f,maxGeometryHeight:g,dataSourceOrder:v}=e;void 0!==t&&0!==t.length||(t="anonymous-datasource#"+ ++s.uniqueNameCounter),this.name=t,this.styleSetName=n,void 0!==i&&(this.languages=i),void 0!==l&&(this.minDataLevel=l),void 0!==c&&(this.maxDataLevel=c),void 0!==o&&(this.minZoomLevel=o),void 0!==a&&(this.maxZoomLevel=a),void 0!==u&&(this.minDisplayLevel=u),void 0!==h&&(this.maxDisplayLevel=h),void 0!==d&&(this.m_storageLevelOffset=d),void 0!==p&&(this.allowOverlappingTiles=p),void 0!==m&&(this.enablePicking=m),void 0!==f&&(this.minGeometryHeight=f),void 0!==g&&(this.maxGeometryHeight=g),v&&(this.dataSourceOrder=v)}getFeatureState(e){return this.m_featureStateMap.get(e)}clearFeatureState(){this.m_featureStateMap.clear()}setFeatureState(e,t){this.m_featureStateMap.set(e,t)}removeFeatureState(e){this.m_featureStateMap.delete(e)}get styleSetName(){return this.m_styleSetName}set styleSetName(e){e!==this.m_styleSetName&&(this.m_styleSetName=e,this.clearCache(),this.requestUpdate())}dispose(){}clearCache(){}isFullyCovering(){return this.addGroundPlane}ready(){return!0}get mapView(){if(void 0===this.m_mapView)throw new Error("This DataSource was not added to MapView");return this.m_mapView}get projection(){return this.mapView.projection}async connect(){}attach(e){this.m_mapView=e}detach(e){i.assert(this.m_mapView===e),this.m_mapView=void 0}isDetached(){return void 0===this.m_mapView}async setTheme(e,t){}setLanguages(e){this.languages=e}setPoliticalView(e){}updateTile(e){}shouldPreloadTiles(){return!1}get minZoomLevel(){return a.warn("DataSource.minZoomLevel is deprecated. Use minDataLevel and maxDataLevel instead."),this.minDataLevel}set minZoomLevel(e){a.warn("DataSource.minZoomLevel is deprecated. Use minDataLevel and minDisplayLevel instead."),this.minDataLevel=e}get maxZoomLevel(){return a.warn("DataSource.maxZoomLevel is deprecated. Use maxDataLevel and maxDisplayLevel instead."),this.maxDataLevel}set maxZoomLevel(e){a.warn("DataSource.maxZoomLevel is deprecated. Use maxDataLevel and maxDisplayLevel instead."),this.maxDataLevel=e}get maxGeometryHeight(){return this.m_maxGeometryHeight}set maxGeometryHeight(e){this.m_maxGeometryHeight=e}get minGeometryHeight(){return this.m_minGeometryHeight}set minGeometryHeight(e){this.m_minGeometryHeight=e}get storageLevelOffset(){return this.m_storageLevelOffset}set storageLevelOffset(e){this.m_storageLevelOffset=e}setEnableElevationOverlay(e){}getDataZoomLevel(e){return o.MathUtils.clamp(e+this.m_storageLevelOffset,this.minDataLevel,this.maxDataLevel)}isVisible(e){return e>=this.minDisplayLevel&&e<=this.maxDisplayLevel}canGetTile(e,t){return t.level<=e}shouldSubdivide(e,t){return t.level<=e}shouldRenderText(e,t){return!0}requestUpdate(){this.dispatchEvent(this.UPDATE_EVENT)}}t.DataSource=s,s.uniqueNameCounter=0},60396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugContext=t.DebugContext=void 0;const r=n(534),i="undefined"===typeof window;class o extends r.EventDispatcher{constructor(e){super(),this.value=e}set(e,t){this.value=e,this.dispatchEvent({type:o.SET_EVENT_TYPE,name:t,value:e})}}o.SET_EVENT_TYPE="set";class a{constructor(){if(this.m_optionsMap=new Map,!i&&"undefined"!==typeof window&&window){window.__debugContext=this}}setValue(e,t){let n=this.m_optionsMap.get(e);n?n.set(t,e):(n=new o(t),this.m_optionsMap.set(e,n))}getValue(e){const t=this.m_optionsMap.get(e);return t?t.value:void 0}hasOption(e){return void 0!==this.m_optionsMap.get(e)}addEventListener(e,t){const n=this.m_optionsMap.get(e);if(!n)throw Error("Unknown option: "+e);n.addEventListener(o.SET_EVENT_TYPE,t)}hasEventListener(e,t){const n=this.m_optionsMap.get(e);if(n)return n.hasEventListener(o.SET_EVENT_TYPE,t);throw Error("Unknown option: "+e)}removeEventListener(e,t){const n=this.m_optionsMap.get(e);if(!n)throw Error("Unknown option: "+e);n.removeEventListener(o.SET_EVENT_TYPE,t)}get options(){return this.m_optionsMap}clear(){this.m_optionsMap.forEach((e=>{e.set(void 0,"")}))}}t.DebugContext=a,t.debugContext=new a},47857:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateColorProperty=t.applyBaseColorToMaterial=t.applySecondaryColorToMaterial=t.evaluateBaseColorProperty=t.buildMetricValueEvaluator=t.getMaterialConstructor=t.BASE_TECHNIQUE_NON_MATERIAL_PROPS=t.buildObject=t.usesObject3D=t.getBufferAttribute=t.createMaterial=void 0;const r=n(26309),i=n(91753),o=n(85164),a=n(15739),s=n(534),l=n(73224),c=n(58598),u=n(46246),h=n(12918),d=n(4716),p=a.LoggerManager.instance.create("DecodedTileHelpers");function m(e,t,n,r){const i=(new s.TextureLoader).load(e,t,void 0,n);r&&i.addEventListener("dispose",(()=>{URL.revokeObjectURL(e)}))}function f(e,t,n){const r=e.dataTextureProperties;if(r){const n=r.type?d.toTextureDataType(r.type):void 0,i=function(e,t){if(void 0===t)return new Uint8Array(e);switch(t){case s.UnsignedByteType:return new Uint8Array(e);case s.ByteType:return new Int8Array(e);case s.ShortType:return new Int16Array(e);case s.UnsignedShortType:return new Uint16Array(e);case s.IntType:return new Int32Array(e);case s.UnsignedIntType:return new Uint32Array(e);case s.FloatType:return new Float32Array(e);case s.HalfFloatType:return new Uint16Array(e)}throw new Error("Unsupported texture data type")}(e.buffer,n);t(new s.DataTexture(i,r.width,r.height,r.format?d.toPixelFormat(r.format):void 0,n))}else n("no data texture properties provided.")}function g(e,t,n){const i=n.technique;let o=i[t];if(void 0===o)return;return new Promise(((a,l)=>{const c=n=>{!function(e,t){t&&(void 0!==t.wrapS&&(e.wrapS=d.toWrappingMode(t.wrapS)),void 0!==t.wrapT&&(e.wrapT=d.toWrappingMode(t.wrapT)),void 0!==t.magFilter&&(e.magFilter=d.toTextureFilter(t.magFilter)),void 0!==t.minFilter&&(e.minFilter=d.toTextureFilter(t.minFilter)),void 0!==t.flipY&&(e.flipY=t.flipY),void 0!==t.repeatU&&(e.repeat.x=t.repeatU),void 0!==t.repeatV&&(e.repeat.y=t.repeatV))}(n,i[t+"Properties"]),e[t]=n,e.needsUpdate=!0,a(n)},u=e=>{p.error("#createMaterial: Failed to load texture: ",e),l(e)};if(!r.Expr.isExpr(o)||(o=r.getPropertyValue(o,n.env),o))if("string"===typeof o)m(o,c,u,!1);else if(r.isTextureBuffer(o))if("image/raw"===o.type)f(o,c,u);else{const e=new Blob([o.buffer],{type:o.type});m(URL.createObjectURL(e),c,u,!0)}else"object"!==typeof o||"IMG"!==o.nodeName&&"CANVAS"!==o.nodeName||c(new s.CanvasTexture(o));else c(new s.Texture)}))}function v(e,t){if(void 0!==e.name)switch(e.name){case"extruded-line":if(!r.isExtrudedLineTechnique(e))throw new Error("Invalid extruded-line technique");return"standard"===e.shading?o.MapMeshStandardMaterial:o.MapMeshBasicMaterial;case"standard":case"terrain":case"extruded-polygon":return o.MapMeshStandardMaterial;case"dashed-line":case"solid-line":return o.SolidLineMaterial;case"fill":return t?o.MapMeshStandardMaterial:o.MapMeshBasicMaterial;case"squares":return s.PointsMaterial;case"circles":return o.CirclePointsMaterial;case"line":case"segments":return s.LineBasicMaterial;case"shader":return s.ShaderMaterial;case"text":case"labeled-icon":case"line-marker":case"label-rejection-line":return}}function y(e,t){return void 0===e||null===e?e:("string"===typeof e&&(e.endsWith("px")?(t="Pixel",e=Number.parseFloat(e)):e.endsWith("m")&&(e=Number.parseFloat(e))),"Pixel"===t?t=>{var n;return(null!==(n=t.env.lookup("$pixelToMeters"))&&void 0!==n?n:1)*r.getPropertyValue(e,t.env)}:e)}function _(e,t,n){let i=w(t,n);void 0!==i&&(r.ColorUtils.hasAlphaInHex(i)&&(p.warn("Used RGBA value for technique color without transparency support!"),i=r.ColorUtils.removeAlphaFromHex(i)),e.setHex(i))}function x(e,t,n,i,a){const l=w(i,a);if(void 0===l)return;const{r:c,g:u,b:h,a:d}=r.ColorUtils.getRgbaFromHex(l),p=n;let m=d;void 0!==p.opacity&&(m*=b(p.opacity,a)),m=s.MathUtils.clamp(m,0,1),e instanceof o.RawShaderMaterial?e.setOpacity(m):e.opacity=m,t.setRGB(c,u,h);m>=1?o.disableBlending(e):o.enableBlending(e)}function b(e,t){return void 0!==t&&r.Expr.isExpr(e)&&(e=r.getPropertyValue(e,t)),e}function w(e,t){if(void 0!==(e=b(e,t))&&null!==e){if("number"===typeof e)return e;if("string"===typeof e){const t=r.parseStringEncodedColor(e);if(void 0!==t)return t}p.error(`Unsupported color format: '${e}'`)}}function S(e){var t;return null===(t=i.getTechniqueDescriptor(e))||void 0===t?void 0:t.attrTransparencyColor}t.createMaterial=function(e,t,n){const l=t.technique,c=v(l,!0===t.shadowsEnabled),h={};if(void 0===c)return;c.prototype instanceof o.RawShaderMaterial&&(h.rendererCapabilities=e,c!==o.HighPrecisionLineMaterial&&(h.fog=t.fog)),!0===t.shadowsEnabled&&"fill"===l.name&&(h.removeDiffuseLight=!0);const d=new c(h);return void 0!==l.id&&(d.name=l.id),r.isExtrudedPolygonTechnique(l)&&(d.flatShading=!0),d.depthTest=r.isExtrudedPolygonTechnique(l)&&!1!==l.depthTest,r.supportsTextures(l)&&r.TEXTURE_PROPERTY_KEYS.forEach((e=>{const r=g(d,e,t);r&&(null===n||void 0===n||n(r))})),r.isShaderTechnique(l)?function(e,t){e.transparent?o.enableBlending(t):o.disableBlending(t);const n=e.params,i=S(e),a=i&&i in e.params;if(Object.getOwnPropertyNames(n).filter((e=>{if(i===e||a&&r.TRANSPARENCY_PROPERTY_KEYS.includes(e)){return false}const t=e;if(t==="name"){return false}return true})).forEach((e=>{!function(e,t,n,r){const i=e;if(i[t]instanceof s.Color)_(e[t],n,r);else{const e=b(n,r);null!==e&&(i[t]=e)}}(t,e,n[e])})),a){const r=i;x(t,t[r],e,n[r])}}(l,d):u.MapMaterialAdapter.create(d,function(e){var t;const n=i.getTechniqueAutomaticAttrs(e);switch(e.name){case"dashed-line":case"solid-line":{const r=a.pick(e,n);return r.lineWidth=y(null!==(t=e.lineWidth)&&void 0!==t?t:0,e.metricUnit),r.outlineWidth=y(e.outlineWidth,e.metricUnit),r.dashSize=y(e.dashSize,e.metricUnit),r.gapSize=y(e.gapSize,e.metricUnit),r.offset=y(e.offset,e.metricUnit),r}case"fill":case"circles":case"squares":case"line":case"segments":return a.pick(e,n);case"standard":case"terrain":case"extruded-polygon":{const t=a.pick(e,n);return!0!==e.vertexColors&&(t.color=e.color),t}case"extruded-line":return a.pick(e,["color","wireframe","transparent","opacity","polygonOffset","polygonOffsetFactor","polygonOffsetUnits",...n]);default:return{}}}(l)),d},t.getBufferAttribute=function(e){switch(e.type){case"float":return new s.BufferAttribute(new Float32Array(e.buffer),e.itemCount);case"uint8":return new s.BufferAttribute(new Uint8Array(e.buffer),e.itemCount,e.normalized);case"uint16":return new s.BufferAttribute(new Uint16Array(e.buffer),e.itemCount,e.normalized);case"uint32":return new s.BufferAttribute(new Uint32Array(e.buffer),e.itemCount,e.normalized);case"int8":return new s.BufferAttribute(new Int8Array(e.buffer),e.itemCount,e.normalized);case"int16":return new s.BufferAttribute(new Int16Array(e.buffer),e.itemCount,e.normalized);case"int32":return new s.BufferAttribute(new Int32Array(e.buffer),e.itemCount,e.normalized);default:throw new Error(`unsupported buffer of type ${e.type}`)}},t.usesObject3D=function(e){const t=e.name;return void 0!==t&&"text"!==t&&"labeled-icon"!==t&&"line-marker"!==t&&"label-rejection-line"!==t},t.buildObject=function(e,t,n,i,o){switch(a.assert(void 0!==e.name),e.name){case"extruded-line":case"standard":case"extruded-polygon":case"fill":return o?new l.DisplacedMesh(t,n,(()=>({min:i.elevationRange.minElevation,max:i.elevationRange.maxElevation}))):new s.Mesh(t,n);case"terrain":return new s.Mesh(t,n);case"dashed-line":case"solid-line":return o?new l.DisplacedMesh(t,n,(()=>({min:i.elevationRange.minElevation,max:i.elevationRange.maxElevation})),c.SolidLineMesh.raycast):new c.SolidLineMesh(t,n);case"circles":return new h.Circles(t,n);case"squares":return new h.Squares(t,n);case"line":case"segments":return new s.LineSegments(t,n);case"shader":switch(a.assert(r.isShaderTechnique(e),"Invalid technique"),e.primitive){case"line":return new s.Line(t,n);case"segments":return new s.LineSegments(t,n);case"point":return new s.Points(t,n);case"mesh":return new s.Mesh(t,n)}}return a.assert(!1,"Invalid technique"),new s.Object3D},t.BASE_TECHNIQUE_NON_MATERIAL_PROPS=["name","id","renderOrder","transient"],t.getMaterialConstructor=v,t.buildMetricValueEvaluator=y,t.evaluateBaseColorProperty=function(e,t){const n=function(e){const t=S(e);if(void 0!==t){if(r.isShaderTechnique(e)){return e.params[t]}return e[t]}return}(e);if(void 0!==n)return w(n,t)},t.applySecondaryColorToMaterial=_,t.applyBaseColorToMaterial=x,t.evaluateColorProperty=w},17682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDepthPrePassStencil=t.createDepthPrePassMesh=t.isDepthPrePassMesh=t.createDepthPrePassMaterial=t.isRenderDepthPrePassEnabled=t.DEPTH_PRE_PASS_STENCIL_MASK=void 0;const r=n(67538),i=n(85164),o=n(534),a=n(47857);t.DEPTH_PRE_PASS_STENCIL_MASK=1;function s(e){e.depthWrite=!1,e.depthFunc=o.EqualDepth,e.colorWrite=!0,i.enforceBlending(e);const t=e.clone();return t.isDepthPrepassMaterial=!0,t.depthWrite=!0,t.depthTest=!0,t.depthFunc=o.LessDepth,t.colorWrite=!1,t.opacity=1,t.blending=o.NoBlending,t}t.isRenderDepthPrePassEnabled=function(e,t){if(!1===e.enableDepthPrePass)return!1;let n=void 0!==e.opacity&&e.opacity>0&&e.opacity<1;if(!n){const i=a.evaluateBaseColorProperty(e,t);if(void 0!==i){const e=r.ColorUtils.getAlphaFromHex(i);n=e>0&&e<1}}return n},t.createDepthPrePassMaterial=s,t.isDepthPrePassMesh=function(e){if(!0!==e.isMesh)return!1;const t=e;return t.material instanceof Array?t.material.every((e=>!0===e.isDepthPrepassMaterial)):!0===t.material.isDepthPrepassMaterial},t.createDepthPrePassMesh=function(e){const t=e.geometry;if(!(t instanceof o.BufferGeometry))throw new Error("#createDepthPassMesh only BufferGeometry is supported");const n=t.getAttribute("position");if(!n)throw new Error("#createDepthPassMesh position attribute not found");const r=new o.BufferGeometry;r.setAttribute("position",n);const i=t.getAttribute("uv");i&&r.setAttribute("uv",i);const a=t.getAttribute("normal");a&&r.setAttribute("normal",a);const l=t.getAttribute("extrusionAxis");l&&r.setAttribute("extrusionAxis",l),t.index&&r.setIndex(t.index);for(const o of t.groups){const{start:e,count:t,materialIndex:n}=o;r.addGroup(e,t,n)}const c=e.material instanceof Array?e.material.map(s):s(e.material),u=new o.Mesh(r,c);return u.renderOrder=e.renderOrder-1e-6,u},t.setDepthPrePassStencil=function(e,n){function r(e){const n=e;n.stencilWrite=!0,n.stencilFail=o.KeepStencilOp,n.stencilZFail=o.KeepStencilOp,n.stencilZPass=o.ReplaceStencilOp,n.stencilFunc=o.AlwaysStencilFunc,n.stencilRef=255,n.stencilFuncMask=t.DEPTH_PRE_PASS_STENCIL_MASK}function i(e){const n=e;n.stencilWrite=!0,n.stencilFail=o.KeepStencilOp,n.stencilZFail=o.KeepStencilOp,n.stencilZPass=o.ZeroStencilOp,n.stencilFunc=o.EqualStencilFunc,n.stencilRef=255,n.stencilFuncMask=t.DEPTH_PRE_PASS_STENCIL_MASK}e.material instanceof Array?e.material.map(r):r(e.material),n.material instanceof Array?n.material.map(i):i(n.material)}},80821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},41483:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},89644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalculationStatus=void 0,function(e){e[e.PendingApproximate=0]="PendingApproximate",e[e.FinalPrecise=1]="FinalPrecise"}(t.CalculationStatus||(t.CalculationStatus={}))},49046:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;t.EventDispatcher=class{constructor(){this.m_listeners=new Map}dispose(){this.removeAllEventListeners()}hasEventListener(e,t){const n=this.m_listeners.get(e);return void 0!==n&&(void 0===t||n.includes(t))}addEventListener(e,t){let n=this.m_listeners.get(e);void 0===n&&(n=[],this.m_listeners.set(e,n)),n.includes(t)||n.push(t)}removeEventListener(e,t){const n=this.m_listeners.get(e);if(void 0!==n)if(void 0===t)this.m_listeners.delete(e);else{const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&this.m_listeners.delete(e))}}removeAllEventListeners(){const e=Array.from(this.m_listeners.keys());for(const t of e)this.removeEventListener(t)}get eventTypes(){return Array.from(this.m_listeners.keys())}listeners(e){return this.m_listeners.get(e)}dispatchEvent(e){const t=this.m_listeners.get(e.type);if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}},26436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedClipPlanesEvaluator=void 0;t.FixedClipPlanesEvaluator=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.minNear=e,this.minFarOffset=t,this.minFar=e+t,this.m_nearPlane=e,this.m_farPlane=this.minFar}get nearPlane(){return this.m_nearPlane}set nearPlane(e){this.invalidatePlanes(e,this.m_farPlane)}get farPlane(){return this.m_farPlane}set farPlane(e){this.invalidatePlanes(this.m_nearPlane,e)}set minElevation(e){}get minElevation(){return 0}set maxElevation(e){}get maxElevation(){return 0}evaluateClipPlanes(e,t,n){return{near:this.m_nearPlane,far:this.m_farPlane,minimum:this.minNear,maximum:this.m_farPlane}}invalidatePlanes(e,t){const n=Math.max(this.minNear,e),r=Math.max(this.minFar,t,n+this.minFarOffset);this.m_nearPlane=n,this.m_farPlane=r}}},71690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_FOV_RAD=t.MIN_FOV_RAD=t.MAX_FOV_DEG=t.MIN_FOV_DEG=t.DEFAULT_FOV_CALCULATION=void 0;const r=n(534);t.DEFAULT_FOV_CALCULATION={type:"dynamic",fov:40},t.MIN_FOV_DEG=10,t.MAX_FOV_DEG=140,t.MIN_FOV_RAD=r.MathUtils.degToRad(t.MIN_FOV_DEG),t.MAX_FOV_RAD=r.MathUtils.degToRad(t.MAX_FOV_DEG)},95596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrustumIntersection=t.TileKeyEntry=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(89644),s=n(24943),l=n(61563),c=[new o.Vector3,new o.Vector3],u=new o.Vector4;class h{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.tileKey=e,this.area=t,this.offset=n,this.elevationRange=r,this.distance=i}}t.TileKeyEntry=h;t.FrustumIntersection=class{constructor(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:256;this.m_camera=e,this.mapView=t,this.m_extendedFrustumCulling=n,this.m_tileWrappingEnabled=r,this.m_enableMixedLod=i,this.m_tilePixelSize=a,this.m_frustum=new o.Frustum,this.m_viewProjectionMatrix=new o.Matrix4,this.m_rootTileKeys=[],this.m_tileKeyEntries=new Map,this.m_mapTileCuller=new s.MapTileCuller(e)}get camera(){return this.m_camera}get projection(){return this.mapView.projection}updateFrustum(e){this.m_viewProjectionMatrix.multiplyMatrices(void 0!==e?e:this.m_camera.projectionMatrix,this.m_camera.matrixWorldInverse),this.m_frustum.setFromProjectionMatrix(this.m_viewProjectionMatrix),this.m_extendedFrustumCulling&&this.m_mapTileCuller.setup(),this.computeRequiredInitialRootTileKeys(this.m_camera.position)}compute(e,t,n,a){this.m_tileKeyEntries.clear(),i.assert(0!==this.mapView.viewportHeight);const s=Math.pow(this.m_tilePixelSize/this.mapView.viewportHeight,2),l=void 0!==t&&t.getTilingScheme()===e,c=this.mapView.projection.type===r.ProjectionType.Spherical||l,u=new Set(n);let h=0,d=0;a.forEach((e=>{h=Math.min(h,e.minGeometryHeight),d=Math.max(d,e.maxGeometryHeight)}));const p={calculationFinal:!0,tileBounds:c?new r.OrientedBox3:new o.Box3};for(const r of u)this.m_tileKeyEntries.set(r,new Map);for(const i of this.m_rootTileKeys){const n=i.tileKey,o=i.offset,a=this.getTileKeyEntry(n,o,e,p,h,d,l?t:void 0);if(void 0!==a)for(const e of u){this.m_tileKeyEntries.get(e).set(r.TileKeyUtils.getKeyForTileKeyAndOffset(n,o),a)}}const m=[...this.m_rootTileKeys.values()];for(;m.length>0;){const i=m.pop();if(void 0===i)break;const o=i.tileKey,c=i.offset;if(!a.some(((e,t)=>e.shouldSubdivide(n[t],o))))continue;if(this.m_enableMixedLod&&i.area<s)continue;const f=r.TileKeyUtils.getKeyForTileKeyAndOffset(o,c);for(const e of u){if(o.level>=e)continue;this.m_tileKeyEntries.get(e).delete(f)}for(const n of e.getSubTileKeys(o)){const i=this.getTileKeyEntry(n,c,e,p,h,d,l?t:void 0);if(void 0!==i){for(const e of u){if(i.tileKey.level>e)continue;const t=r.TileKeyUtils.getKeyForTileKeyAndOffset(n,c);this.m_tileKeyEntries.get(e).set(t,i)}m.push(i)}}}return{tileKeyEntries:this.m_tileKeyEntries,calculationFinal:p.calculationFinal}}getTileKeyEntry(e,t,n,r,i,o,s){var l,c;const u=function(e,t,n){const r=e.getGeoBox(t),i=360*n;return r.northEast.longitude+=i,r.southWest.longitude+=i,r}(n,e,t);if(void 0!==s){const t=s.getElevationRange(e);u.southWest.altitude=t.minElevation,u.northEast.altitude=t.maxElevation,r.calculationFinal=r.calculationFinal&&t.calculationStatus===a.CalculationStatus.FinalPrecise}u.southWest.altitude=(null!==(l=u.southWest.altitude)&&void 0!==l?l:0)+i,u.northEast.altitude=(null!==(c=u.northEast.altitude)&&void 0!==c?c:0)+o,this.mapView.projection.projectBox(u,r.tileBounds);const{area:d,distance:p}=this.computeTileAreaAndDistance(r.tileBounds);if(d>0)return new h(e,d,t,{minElevation:u.southWest.altitude,maxElevation:u.northEast.altitude},p)}computeTileAreaAndDistance(e){if(e instanceof o.Box3){if(this.m_extendedFrustumCulling&&!this.m_mapTileCuller.frustumIntersectsTileBox(e)||!this.m_frustum.intersectsBox(e))return{area:0,distance:1/0}}else if(!e.intersects(this.m_frustum))return{area:0,distance:1/0};const t=e.getCenter(c[0]),n=u.set(t.x,t.y,t.z,1).applyMatrix4(this.m_viewProjectionMatrix),r=.5*e.getSize(c[1]).length()/n.w;return{area:r*r,distance:n.z<=-n.w?-1:n.z>=n.w?1:n.z/n.w}}computeRequiredInitialRootTileKeys(e){this.m_rootTileKeys=[];const t=r.TileKey.fromRowColumnLevel(0,0,0);if(!(this.mapView.projection.type===r.ProjectionType.Planar)||!this.m_tileWrappingEnabled)return void this.m_rootTileKeys.push(new h(t,1/0,0));const n=this.mapView.projection.unprojectPoint(e),i=Math.round(n.longitude/360),a=this.m_camera,s=l.MapViewUtils.extractAttitude(this.mapView,a).pitch,c=a.aspect>1?a.aspect:1/a.aspect,u=o.MathUtils.degToRad(a.fov*c/2)+s,d=Math.tan(u)*a.position.z-Math.tan(s)*a.position.z,p=new o.Vector3(e.x-d,e.y,e.z),m=this.mapView.projection.unprojectPoint(p),f=o.MathUtils.clamp(Math.ceil(Math.abs((n.longitude-m.longitude)/360)*Math.SQRT2),0,7);for(let r=-f+i;r<=f+i;r++)this.m_rootTileKeys.push(new h(t,1/0,r))}}},44097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileLoaderState=void 0,function(e){e[e.Initialized=0]="Initialized",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Decoding=3]="Decoding",e[e.Ready=4]="Ready",e[e.Canceled=5]="Canceled",e[e.Failed=6]="Failed"}(t.TileLoaderState||(t.TileLoaderState={}))},29001:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapAnchors=void 0;const r=n(31201),i=n(534);t.MapAnchors=class{constructor(){this.m_anchors=[],this.m_priorities=[]}get children(){return this.m_anchors}add(e){this.m_anchors.push(e)}remove(e){const t=this.m_anchors.findIndex((t=>t===e));t>-1&&this.m_anchors.splice(t,1)}clear(){this.m_anchors.length=0}setPriorities(e){this.m_priorities=e}update(e,t,n,o){const a=new i.Vector3;this.m_anchors.forEach((i=>{var s;if(void 0!==i.styleSet){const e=null===(s=this.m_priorities)||void 0===s?void 0:s.findIndex((e=>e.group===i.styleSet&&e.category===i.category));void 0!==e&&-1!==e&&(i.renderOrder=10*(e+1))}const l=void 0!==i.geoPosition?i.geoPosition:i.anchor;void 0!==l&&(r.isVector3Like(l)?a.set(l.x,l.y,l.z):r.isGeoCoordinatesLike(l)&&e.projectPoint(l,a),i.position.copy(a).sub(t)),!0===i.overlay?o.add(i):n.add(i)}))}}},46246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapMaterialAdapter=void 0;const r=n(26309),i=n(85164),o=n(534),a=n(47857);function s(e){return r.TEXTURE_PROPERTY_KEYS.includes(e)}class l{constructor(e,t){this.m_lastUpdateFrameNumber=-1,this.tmpColor=new o.Color,this.material=e,this.styledProperties=t,this.currentStyledProperties={},this.m_dynamicProperties=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const e=t[n];r.Expr.isExpr(e)||"function"===typeof e?this.m_dynamicProperties.push([n,e]):this.currentStyledProperties[n]=e}this.setupStaticProperties()}static get(e){var t;const n=null===(t=e.userData)||void 0===t?void 0:t.mapAdapter;return n instanceof l?n:void 0}static install(e){return e.material.userData||(e.material.userData={}),e.material.userData.mapAdapter=e}static create(e,t){return l.install(new l(e,t))}static ensureUpdated(e,t){var n,r;return null!==(r=null===(n=l.get(e))||void 0===n?void 0:n.ensureUpdated(t))&&void 0!==r&&r}toJSON(){return{styledProperties:this.styledProperties}}ensureUpdated(e){return this.m_lastUpdateFrameNumber!==e.frameNumber&&(this.m_lastUpdateFrameNumber=e.frameNumber,this.updateDynamicProperties(e))}setupStaticProperties(){var e,t;let n=!1;for(const r in this.styledProperties){if(!this.styledProperties.hasOwnProperty(r))continue;const e=this.currentStyledProperties[r];void 0!==e&&null!==e&&("color"===r||"opacity"===r?n=!0:s(r)||this.applyMaterialGenericProp(r,e))}if(n){const n=null!==(e=this.currentStyledProperties.color)&&void 0!==e?e:16711680,r=null!==(t=this.currentStyledProperties.opacity)&&void 0!==t?t:1;this.applyMaterialBaseColor(n,r)}}updateDynamicProperties(e){var t,n;let i=!1;if(this.m_dynamicProperties.length>0){let o=!1;for(const[t,n]of this.m_dynamicProperties){const a=r.Expr.isExpr(n)?r.getPropertyValue(n,e.env):n(e);a!==this.currentStyledProperties[t]&&(this.currentStyledProperties[t]=a,"color"===t||"opacity"===t?o=!0:s(t)?(this.applyMaterialTextureProp(t,a),i=!0):(this.applyMaterialGenericProp(t,a),i=!0))}if(o){const e=null!==(t=this.currentStyledProperties.color)&&void 0!==t?t:16711680,r=null!==(n=this.currentStyledProperties.opacity)&&void 0!==n?n:1;this.applyMaterialBaseColor(e,r),i=!0}}return i}applyMaterialTextureProp(e,t){const n=this.material;if(!n[e]||null===t)return;const r=n[e];let i;if("string"===typeof t)i=(new o.TextureLoader).load(t,(t=>{n[e]=t}));else if("object"===typeof t){const r=t,a="IMG"===r.nodeName,s="CANVAS"===r.nodeName;if(a||s)if(i=new o.CanvasTexture(r),a&&!r.complete){const t=()=>{n[e]=i,r.removeEventListener("load",t)};r.addEventListener("load",t)}else n[e]=i}i&&(i.wrapS=r.wrapS,i.wrapT=r.wrapT,i.magFilter=r.magFilter,i.minFilter=r.minFilter,i.flipY=r.flipY,i.repeat=r.repeat)}applyMaterialGenericProp(e,t){const n=this.material;if(n[e]instanceof o.Color){let e=t;if("number"!==typeof e){const t=a.evaluateColorProperty(e);if(void 0===t)return;e=t}const n=r.ColorUtils.removeAlphaFromHex(e);this.tmpColor.set(n),t=this.tmpColor}n[e]=t}applyMaterialBaseColor(e,t){if("number"!==typeof e){const t=a.evaluateColorProperty(e);if(void 0===t)return;e=t}const{r:n,g:s,b:l,a:c}=r.ColorUtils.getRgbaFromHex(null!==e&&void 0!==e?e:16711680),u=c*o.MathUtils.clamp(null!==t&&void 0!==t?t:1,0,1);this.material instanceof i.RawShaderMaterial?this.material.setOpacity(u):this.material.opacity=u,this.material.color.setRGB(n,s,l);u>=1?i.disableBlending(this.material):i.enableBlending(this.material)}}t.MapMaterialAdapter=l},87213:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapObjectAdapter=void 0;const r=n(26309),i=n(46246);class o{constructor(e,t){var n;this.m_lastUpdateFrameNumber=-1,this.m_notCompletlyTransparent=!0,this.object=e,this.technique=t.technique,this.kind=t.kind,this.dataSource=t.dataSource,this.m_pickability=null!==(n=t.pickability)&&void 0!==n?n:r.Pickability.onlyVisible,this.m_notCompletlyTransparent=this.getObjectMaterials().some((e=>e.opacity>0)),this.level=t.level}static get(e){var t;return(null===(t=e.userData)||void 0===t?void 0:t.mapAdapter)instanceof o?e.userData.mapAdapter:void 0}static install(e){return e.object.userData||(e.object.userData={}),e.object.userData.mapAdapter=e}static create(e,t){return o.install(new o(e,t))}static ensureUpdated(e,t){var n,r;return null!==(r=null===(n=o.get(e))||void 0===n?void 0:n.ensureUpdated(t))&&void 0!==r&&r}toJSON(){return{kind:this.kind,technique:this.technique}}ensureUpdated(e){return this.m_lastUpdateFrameNumber!==e.frameNumber&&(this.m_lastUpdateFrameNumber=e.frameNumber,this.updateMaterials(e))}isVisible(){return this.object.visible&&this.m_notCompletlyTransparent}isPickable(){return this.pickability===r.Pickability.onlyVisible&&this.isVisible()||this.m_pickability===r.Pickability.all}get pickability(){return this.m_pickability}updateMaterials(e){let t=!1;const n=this.getObjectMaterials();for(const r of n){const n=i.MapMaterialAdapter.ensureUpdated(r,e);t=t||n}return t&&(this.m_notCompletlyTransparent=n.some((e=>e.opacity>0))),t}getObjectMaterials(){const e=this.object;return Array.isArray(e.material)?e.material:void 0!==e.material?[e.material]:[]}}t.MapObjectAdapter=o},24943:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapTileCuller=void 0;const r=n(534);t.MapTileCuller=class{constructor(e){this.m_camera=e,this.m_globalFrustumMin=new r.Vector3,this.m_globalFrustumMax=new r.Vector3,this.m_frustumCorners=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3]}setup(){const e=this.getFrustumCorners(),t=this.m_camera.matrixWorld;this.m_globalFrustumMin.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.m_globalFrustumMax.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(const n of e)n.applyMatrix4(t),this.m_globalFrustumMin.x=Math.min(this.m_globalFrustumMin.x,n.x),this.m_globalFrustumMin.y=Math.min(this.m_globalFrustumMin.y,n.y),this.m_globalFrustumMin.z=Math.min(this.m_globalFrustumMin.z,n.z),this.m_globalFrustumMax.x=Math.max(this.m_globalFrustumMax.x,n.x),this.m_globalFrustumMax.y=Math.max(this.m_globalFrustumMax.y,n.y),this.m_globalFrustumMax.z=Math.max(this.m_globalFrustumMax.z,n.z)}frustumIntersectsTileBox(e){const t=this.m_globalFrustumMin,n=this.m_globalFrustumMax;return!(n.x<e.min.x||n.y<e.min.y||n.z<e.min.z||t.x>e.max.x||t.y>e.max.y||t.z>e.max.z)}getFrustumCorners(){const e=this.m_frustumCorners,t=this.m_camera.projectionMatrixInverse;let n=0;function r(r,i,o){e[n++].set(r,i,o).applyMatrix4(t)}return r(-1,-1,-1),r(1,-1,-1),r(-1,1,-1),r(1,1,-1),r(-1,-1,1),r(1,-1,1),r(-1,1,1),r(1,1,1),e}}},65312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapView=t.MapViewPowerPreference=t.MapViewEventNames=t.TileTaskGroups=void 0;const r=n(26309),i=n(31201),o=n(15739),a=n(534),s=n(57721),l=n(49417),c=n(20899),u=n(64172),h=n(45480),d=n(86550),p=n(12324),m=n(58635),f=n(52210),g=n(49046),v=n(71690),y=n(95596),_=n(91649),x=n(47021),b=n(10018),w=n(29001),S=n(31011),M=n(8379),E=n(8246),T=n(92980),C=n(61086),A=n(6549),P=n(13412),O=n(56396),R=n(91422),L=n(91088),D=n(40449),k=n(63402),I=n(61563),F=n(3236);var N;o.LoggerManager.instance.setLogLevelForAll(o.LogLevel.Error),function(e){e.FETCH_AND_DECODE="fetch",e.CREATE="create"}(t.TileTaskGroups||(t.TileTaskGroups={})),function(e){e.Update="update",e.Resize="resize",e.Render="render",e.AfterRender="didrender",e.FirstFrame="first-render",e.FrameComplete="frame-complete",e.ThemeLoaded="theme-loaded",e.AnimationStarted="animation-started",e.AnimationFinished="animation-finished",e.MovementStarted="movement-started",e.MovementFinished="movement-finished",e.DataSourceConnect="datasource-connect",e.CopyrightChanged="copyright-changed",e.ContextLost="webglcontext-lost",e.ContextRestored="webglcontext-restored",e.CameraPositionChanged="camera-changed",e.Dispose="dispose"}(N=t.MapViewEventNames||(t.MapViewEventNames={}));const z=o.LoggerManager.instance.create("MapView"),U=4e6,j={vector2:[new a.Vector2],vector3:[new a.Vector3,new a.Vector3,new a.Vector3],rayCaster:new a.Raycaster,groundPlane:new a.Plane,groundSphere:new a.Sphere(void 0,i.EarthConstants.EQUATORIAL_RADIUS),matrix4:[new a.Matrix4,new a.Matrix4],transform:[{position:new a.Vector3,xAxis:new a.Vector3,yAxis:new a.Vector3,zAxis:new a.Vector3}],color:new a.Color};var B;!function(e){e.Default="default",e.LowPower="low-power",e.HighPerformance="high-performance"}(B=t.MapViewPowerPreference||(t.MapViewPowerPreference={}));const V={projection:i.mercatorProjection,addBackgroundDatasource:!0,maxVisibleDataSourceTiles:100,extendedFrustumCulling:!0,tileCacheSize:200,resourceComputationType:F.ResourceComputationType.EstimationInMb,quadTreeSearchDistanceUp:3,quadTreeSearchDistanceDown:2,pixelRatio:"undefined"!==typeof window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1,target:new i.GeoCoordinates(25,0),zoomLevel:5,tilt:0,heading:0,theme:{},maxTilesPerFrame:0};class G extends g.EventDispatcher{constructor(e){var t,n;super(),this.UPDATE_EVENT={type:N.Update},this.RENDER_EVENT={type:N.Render},this.DID_RENDER_EVENT={type:N.AfterRender},this.FIRST_FRAME_EVENT={type:N.FirstFrame},this.FRAME_COMPLETE_EVENT={type:N.FrameComplete},this.THEME_LOADED_EVENT={type:N.ThemeLoaded},this.ANIMATION_STARTED_EVENT={type:N.AnimationStarted},this.ANIMATION_FINISHED_EVENT={type:N.AnimationFinished},this.MOVEMENT_STARTED_EVENT={type:N.MovementStarted},this.MOVEMENT_FINISHED_EVENT={type:N.MovementFinished},this.CONTEXT_LOST_EVENT={type:N.ContextLost},this.CONTEXT_RESTORED_EVENT={type:N.ContextRestored},this.COPYRIGHT_CHANGED_EVENT={type:N.CopyrightChanged},this.DISPOSE_EVENT={type:N.Dispose},this.m_renderLabels=!0,this.m_visibleTileSetLock=!1,this.m_tileWrappingEnabled=!0,this.m_zoomLevel=1,this.m_minZoomLevel=1,this.m_maxZoomLevel=20,this.m_minCameraHeight=20,this.m_rteCamera=new a.PerspectiveCamera,this.m_yaw=0,this.m_pitch=0,this.m_roll=0,this.m_targetDistance=0,this.m_targetGeoPos=i.GeoCoordinates.fromObject(V.target),this.m_targetWorldPos=new a.Vector3,this.m_viewRanges={near:.1,far:U,minimum:.1,maximum:U},this.m_scene=new a.Scene,this.m_overlayScene=new a.Scene,this.m_sceneRoot=new a.Object3D,this.m_overlaySceneRoot=new a.Object3D,this.m_mapAnchors=new w.MapAnchors,this.m_animationCount=0,this.m_drawing=!1,this.m_updatePending=!1,this.m_frameNumber=0,this.m_forceCameraAspect=void 0,this.m_taskSchedulerTimeout=void 0,this.m_tileDataSources=[],this.m_connectedDataSources=new Set,this.m_failedDataSources=new Set,this.m_enablePolarDataSource=!0,this.m_raycaster=new a.Raycaster,this.m_plane=new a.Plane(new a.Vector3(0,0,1)),this.m_sphere=new a.Sphere(void 0,i.EarthConstants.EQUATORIAL_RADIUS),this.m_firstFrameRendered=!1,this.m_firstFrameComplete=!1,this.m_initialTextPlacementDone=!1,this.m_userImageCache=new b.MapViewImageCache,this.m_env=new r.MapEnv({}),this.m_poiManager=new C.PoiManager(this),this.m_poiTableManager=new A.PoiTableManager(this),this.m_lastTileIds="",this.m_copyrightInfo=[],this.m_disposed=!1,this.onWebGLContextLost=e=>{this.dispatchEvent(this.CONTEXT_LOST_EVENT),z.warn("WebGL context lost",e)},this.onWebGLContextRestored=e=>{this.dispatchEvent(this.CONTEXT_RESTORED_EVENT),void 0!==this.m_renderer&&(this.textElementsRenderer.restoreRenderers(this.m_renderer),this.getTheme().then((e=>{this.m_sceneEnvironment.updateClearColor(e.clearColor,e.clearAlpha),this.update()}))),z.warn("WebGL context restored",e)},this.m_options=Object.assign({},e),this.m_uriResolver=this.m_options.uriResolver,void 0!==this.m_options.minZoomLevel&&(this.m_minZoomLevel=this.m_options.minZoomLevel),void 0!==this.m_options.maxZoomLevel&&(this.m_maxZoomLevel=this.m_options.maxZoomLevel),void 0!==this.m_options.minCameraHeight&&(this.m_minCameraHeight=this.m_options.minCameraHeight),void 0!==this.m_options.maxBounds&&(this.m_geoMaxBounds=this.m_options.maxBounds),void 0!==this.m_options.decoderUrl&&(p.ConcurrentDecoderFacade.defaultScriptUrl=this.m_uriResolver?this.m_uriResolver.resolveUri(this.m_options.decoderUrl):this.m_options.decoderUrl),void 0!==this.m_options.decoderCount&&(p.ConcurrentDecoderFacade.defaultWorkerCount=this.m_options.decoderCount),this.m_visibleTileSetOptions=Object.assign(Object.assign({},V),{clipPlanesEvaluator:void 0!==e.clipPlanesEvaluator?e.clipPlanesEvaluator:h.createDefaultClipPlanesEvaluator()}),void 0!==e.projection&&(this.m_visibleTileSetOptions.projection=e.projection),void 0!==e.extendedFrustumCulling&&(this.m_visibleTileSetOptions.extendedFrustumCulling=e.extendedFrustumCulling),void 0!==e.maxVisibleDataSourceTiles&&(this.m_visibleTileSetOptions.maxVisibleDataSourceTiles=e.maxVisibleDataSourceTiles),void 0!==e.tileCacheSize&&(this.m_visibleTileSetOptions.tileCacheSize=e.tileCacheSize),void 0!==e.resourceComputationType&&(this.m_visibleTileSetOptions.resourceComputationType=e.resourceComputationType),void 0!==e.quadTreeSearchDistanceUp&&(this.m_visibleTileSetOptions.quadTreeSearchDistanceUp=e.quadTreeSearchDistanceUp),void 0!==e.quadTreeSearchDistanceDown&&(this.m_visibleTileSetOptions.quadTreeSearchDistanceDown=e.quadTreeSearchDistanceDown),void 0!==e.enablePolarDataSource&&(this.m_enablePolarDataSource=e.enablePolarDataSource),this.m_pixelRatio=e.pixelRatio,this.m_options.maxFps=null!==(t=this.m_options.maxFps)&&void 0!==t?t:0,this.m_options.enableStatistics=!0===this.m_options.enableStatistics,this.m_languages=this.m_options.languages,this.m_politicalView=this.m_options.politicalView,this.handleRequestAnimationFrame=this.renderLoop.bind(this),void 0!==this.m_options.tileWrappingEnabled&&(this.m_tileWrappingEnabled=this.m_options.tileWrappingEnabled),this.setupStats(this.m_options.enableStatistics),this.canvas.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.m_renderer=new(null!==(n=a.WebGL1Renderer)&&void 0!==n?n:a.WebGLRenderer)({canvas:this.canvas,context:this.m_options.context,antialias:this.nativeWebglAntialiasEnabled,alpha:this.m_options.alpha,preserveDrawingBuffer:!0===this.m_options.preserveDrawingBuffer,powerPreference:void 0===this.m_options.powerPreference?B.Default:this.m_options.powerPreference}),this.m_renderer.autoClear=!1,this.m_renderer.debug.checkShaderErrors=!1,this.m_renderer.info.autoReset=!1,this.m_tileObjectRenderer=new k.TileObjectRenderer(this.m_env,this.m_renderer),this.setupRenderer(this.m_tileObjectRenderer),this.m_options.fovCalculation=void 0===this.m_options.fovCalculation?v.DEFAULT_FOV_CALCULATION:this.m_options.fovCalculation,this.m_options.fovCalculation.fov=a.MathUtils.clamp(this.m_options.fovCalculation.fov,v.MIN_FOV_DEG,v.MAX_FOV_DEG);const{width:l,height:u}=this.getCanvasClientSize(),m=l/u;this.m_camera=new a.PerspectiveCamera(this.m_options.fovCalculation.fov,m,.1,U),this.m_camera.up.set(0,0,1),this.setFovOnCamera(this.m_options.fovCalculation,u),this.projection.projectPoint(this.m_targetGeoPos,this.m_targetWorldPos),this.m_scene.add(this.m_camera),this.m_screenProjector=new O.ScreenProjector(this.m_camera),this.m_taskScheduler=new M.MapViewTaskScheduler(this.maxFps),this.m_tileGeometryManager=new x.TileGeometryManager(this),void 0!==e.enableMixedLod&&(this.m_enableMixedLod=e.enableMixedLod),void 0!==e.lodMinTilePixelSize&&(this.m_lodMinTilePixelSize=e.lodMinTilePixelSize),this.m_visibleTiles=this.createVisibleTileSet(),this.m_sceneEnvironment=new S.MapViewEnvironment(this,e),this.setupCamera(),this.m_pickHandler=new T.PickHandler(this,this.m_rteCamera,!0===this.m_options.enablePickTechnique),this.m_movementDetector=new c.CameraMovementDetector(this.m_options.movementThrottleTimeout,(()=>this.movementStarted()),(()=>this.movementFinished()));const f=this.m_options.customAntialiasSettings;if(this.mapRenderingManager=new d.MapRenderingManager(l,u,this.m_options.dynamicPixelRatio,f),this.m_animatedExtrusionHandler=new s.AnimatedExtrusionHandler(this),this.m_enablePolarDataSource){const t=void 0!==e.polarStyleSetName?e.polarStyleSetName:"polar";this.m_polarDataSource=new P.PolarTileDataSource({styleSetName:t,geometryLevelOffset:e.polarGeometryLevelOffset}),this.updatePolarDataSource()}this.m_taskScheduler.addEventListener(N.Update,(()=>{this.update()})),void 0!==e.throttlingEnabled&&(this.m_taskScheduler.throttlingEnabled=e.throttlingEnabled),this.m_themeManager=new E.MapViewThemeManager(this,this.m_uriResolver),this.m_textElementsRenderer=this.createTextRenderer(),this.setTheme(o.getOptionValue(this.m_options.theme,V.theme)),this.update()}get lights(){return this.m_sceneEnvironment.lights}get taskQueue(){return this.m_taskScheduler.taskQueue}get renderLabels(){return this.m_renderLabels}set renderLabels(e){this.m_renderLabels=e}get delayLabelsUntilMovementFinished(){return this.textElementsRenderer.delayLabelsUntilMovementFinished}set delayLabelsUntilMovementFinished(e){this.textElementsRenderer.delayLabelsUntilMovementFinished=e}get textElementsRenderer(){return this.m_textElementsRenderer}get cameraMovementDetector(){return this.m_movementDetector}get animatedExtrusionHandler(){return this.m_animatedExtrusionHandler}get tileGeometryManager(){return this.m_tileGeometryManager}get enableMixedLod(){return this.m_enableMixedLod}set enableMixedLod(e){this.m_enableMixedLod!==e&&(this.m_enableMixedLod=e,this.createVisibleTileSet(),this.update())}get tileWrappingEnabled(){return this.m_tileWrappingEnabled}set tileWrappingEnabled(e){this.projection.type!==i.ProjectionType.Spherical?(e!==this.m_tileWrappingEnabled&&(this.m_tileWrappingEnabled=e,this.createVisibleTileSet()),this.update()):z.warn("Setting this with spherical projection has no affect. Was this intended?")}dispose(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.DISPOSE_EVENT.time=Date.now(),this.dispatchEvent(this.DISPOSE_EVENT),this.m_disposed=!0,this.m_movementFinishedUpdateTimerId&&(clearTimeout(this.m_movementFinishedUpdateTimerId),this.m_movementFinishedUpdateTimerId=void 0),void 0!==this.m_animationFrameHandle&&(cancelAnimationFrame(this.m_animationFrameHandle),this.m_animationFrameHandle=void 0),this.canvas.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas.removeEventListener("webglcontextrestored",this.onWebGLContextRestored);for(const t of this.m_tileDataSources)t.dispose();this.m_visibleTiles.clearTileCache(),this.m_textElementsRenderer.clearRenderStates(),this.m_renderer.dispose(),e&&this.m_renderer.forceContextLoss(),this.m_themeManager.dispose(),this.m_tileGeometryManager.clear(),this.m_movementDetector.dispose(),p.ConcurrentDecoderFacade.destroyIfTerminated(),m.ConcurrentTilerFacade.destroyIfTerminated(),this.m_taskScheduler.clearQueuedTasks(),super.dispose()}get disposed(){return this.m_disposed}get resourceComputationType(){return this.m_visibleTiles.resourceComputationType}set resourceComputationType(e){this.m_visibleTiles.resourceComputationType=e}getCacheSize(){return this.m_visibleTiles.getDataSourceCacheSize()}setCacheSize(e,t){this.m_visibleTiles.setDataSourceCacheSize(e),t=void 0!==t?t:e/2,this.m_visibleTiles.setNumberOfVisibleTiles(Math.floor(t)),this.m_themeManager.updateCache(),this.m_textElementsRenderer.invalidateCache(),this.update()}get extendedFrustumCulling(){return void 0===this.m_options.extendedFrustumCulling||this.m_visibleTileSetOptions.extendedFrustumCulling}set extendedFrustumCulling(e){this.m_visibleTileSetOptions.extendedFrustumCulling=e}get lockVisibleTileSet(){return this.m_visibleTileSetLock}set lockVisibleTileSet(e){this.m_visibleTileSetLock=e}get pointOfView(){return this.m_pointOfView}set pointOfView(e){this.m_pointOfView=e,this.update()}loadPostEffects(e){fetch(e).then((e=>e.json())).then((e=>{this.m_postEffects=e,this.setPostEffects()}))}get postEffects(){return this.m_postEffects}set postEffects(e){this.m_postEffects=e,this.setPostEffects()}get theme(){return this.m_themeManager.theme}set theme(e){this.setTheme(e)}async setTheme(e){const t=await this.m_themeManager.setTheme(e);return this.THEME_LOADED_EVENT.time=Date.now(),this.dispatchEvent(this.THEME_LOADED_EVENT),this.update(),t}async getTheme(){return await this.m_themeManager.getTheme()}get uriResolver(){return this.m_uriResolver}get forceCameraAspect(){return this.m_forceCameraAspect}set forceCameraAspect(e){this.m_forceCameraAspect=e}get languages(){return this.m_languages}set languages(e){this.m_languages=e,this.m_tileDataSources.forEach((e=>{e.setLanguages(this.m_languages)})),this.update()}get politicalView(){return this.m_politicalView}set politicalView(e){this.m_politicalView!==e&&(this.m_politicalView=e,this.m_tileDataSources.forEach((t=>{t.setPoliticalView(e)})))}get copyrightInfo(){return this.m_copyrightInfo}set disableFading(e){this.m_textElementsRenderer.disableFading=e}get disableFading(){return this.m_textElementsRenderer.disableFading}get frameNumber(){return this.m_frameNumber}resetFrameNumber(){this.m_frameNumber=0,this.m_previousFrameTimeStamp=void 0}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}get canvas(){return this.m_options.canvas}get collisionDebugCanvas(){return this.m_collisionDebugCanvas}get scene(){return this.m_scene}get overlayScene(){return this.m_overlayScene}get sceneEnvironment(){return this.m_sceneEnvironment}get camera(){return this.m_camera}get renderer(){return this.m_renderer}get clearColor(){const e=this.m_renderer.getClearColor(j.color);return void 0!==e?e.getHex():0}set clearColor(e){this.m_renderer.setClearColor(e)}get clearAlpha(){const e=this.m_renderer.getClearAlpha();return void 0!==e?e:0}set clearAlpha(e){this.m_renderer.setClearAlpha(e)}get projection(){return this.m_visibleTileSetOptions.projection}set projection(e){const t=this.tilt,n=this.heading;this.m_visibleTileSetOptions.projection=e,this.updatePolarDataSource(),this.clearTileCache(),this.textElementsRenderer.clearRenderStates(),this.m_visibleTiles=this.createVisibleTileSet(),this.geoMaxBounds=this.geoMaxBounds,this.lookAtImpl({tilt:t,heading:n})}get clipPlanesEvaluator(){return this.m_visibleTileSetOptions.clipPlanesEvaluator}set clipPlanesEvaluator(e){this.m_visibleTileSetOptions.clipPlanesEvaluator=e}get focalLength(){var e;return null!==(e=u.CameraUtils.getFocalLength(this.m_camera))&&void 0!==e?e:0}get target(){return this.m_targetGeoPos}get worldTarget(){return this.m_targetWorldPos}get targetDistance(){return this.m_targetDistance}get viewRanges(){return this.m_viewRanges}get geoCenter(){return this.projection.unprojectPoint(this.m_camera.position).normalized()}set geoCenter(e){if(void 0!==e.altitude)this.projection.projectPoint(e,this.m_camera.position);else{const t=this.geoCenter.altitude;this.projection.projectPoint(new i.GeoCoordinates(e.latitude,e.longitude,t),this.m_camera.position)}this.update()}get mapAnchors(){return this.m_mapAnchors}get worldCenter(){return this.m_camera.position}get pickHandler(){return this.m_pickHandler}get imageCache(){return this.m_themeManager.imageCache}get userImageCache(){return this.m_userImageCache}get poiManager(){return this.m_poiManager}get poiTableManager(){return this.m_poiTableManager}get minCameraHeight(){return this.m_minCameraHeight}get minZoomLevel(){return this.m_minZoomLevel}set minZoomLevel(e){this.m_minZoomLevel=e,this.update()}get maxZoomLevel(){return this.m_maxZoomLevel}set maxZoomLevel(e){this.m_maxZoomLevel=e,this.update()}get geoMaxBounds(){return this.m_geoMaxBounds}set geoMaxBounds(e){this.m_geoMaxBounds=e,this.m_worldMaxBounds=this.m_geoMaxBounds?this.projection.projectBox(this.m_geoMaxBounds,this.projection.type===i.ProjectionType.Planar?new a.Box3:new i.OrientedBox3):void 0}get worldMaxBounds(){return this.m_worldMaxBounds}get zoomLevel(){return this.m_zoomLevel}set zoomLevel(e){this.lookAtImpl({zoomLevel:e})}get tilt(){return a.MathUtils.radToDeg(this.m_pitch)}set tilt(e){this.lookAtImpl({tilt:e})}get heading(){return-a.MathUtils.radToDeg(this.m_yaw)}set heading(e){this.lookAtImpl({heading:e})}get env(){return this.m_env}get storageLevel(){return a.MathUtils.clamp(Math.floor(this.m_zoomLevel),this.m_minZoomLevel,this.m_maxZoomLevel)}get viewportHeight(){return this.canvas.height}get nativeWebglAntialiasEnabled(){return void 0===this.m_options.enableNativeWebglAntialias?this.pixelRatio<2:this.m_options.enableNativeWebglAntialias}get dataSources(){return this.m_tileDataSources}setFovCalculation(e){this.m_options.fovCalculation=e,this.updateCameras()}getDataSourceByName(e){return this.m_tileDataSources.find((t=>t.name===e))}getDataSourcesByStyleSetName(e){return this.m_tileDataSources.filter((t=>t.styleSetName===e))}isDataSourceEnabled(e){return e.enabled&&e.ready()&&this.m_connectedDataSources.has(e.name)&&e.isVisible(this.zoomLevel)}async addDataSource(e){var t,n;if(void 0!==this.getDataSourceByName(e.name))throw new Error(`A DataSource with the name "${e.name}" already exists in this MapView.`);e.attach(this),e.setEnableElevationOverlay(void 0!==this.m_elevationProvider);const r=this.m_tileDataSources.find((e=>!0===e.addGroundPlane&&!(e instanceof l.BackgroundDataSource)));!0===e.addGroundPlane&&void 0!==r&&console.warn(`The DataSources ${e.name} and ${r.name} both have a ground plane added, this will cause problems with the fallback logic, see HARP-14728 & HARP-15488.`),this.m_tileDataSources.push(e),null===(t=this.m_sceneEnvironment)||void 0===t||t.updateBackgroundDataSource();try{await e.connect();if(!this.m_tileDataSources.includes(e))return;e.addEventListener(N.Update,(()=>{this.update()}));const t=await this.getTheme();e.setLanguages(this.m_languages),void 0!==t&&void 0!==t.styles&&await e.setTheme(t),this.m_connectedDataSources.add(e.name),this.dispatchEvent({type:N.DataSourceConnect,dataSourceName:e.name}),this.update()}catch(i){z.error(`Failed to connect to datasource ${e.name}: ${null!==(n=i.message)&&void 0!==n?n:i}`),this.m_failedDataSources.add(e.name),this.dispatchEvent({type:N.DataSourceConnect,dataSourceName:e.name,error:i})}}removeDataSource(e){const t=this.m_tileDataSources.indexOf(e);-1!==t&&(e.detach(this),this.m_visibleTiles.removeDataSource(e),this.m_tileDataSources.splice(t,1),this.m_connectedDataSources.delete(e.name),this.m_failedDataSources.delete(e.name),this.m_sceneEnvironment.updateBackgroundDataSource(),this.update())}get visibleTileSet(){return this.m_visibleTiles}addOverlayText(e){this.m_textElementsRenderer.addOverlayText(e),this.update()}clearOverlayText(){this.m_textElementsRenderer.clearOverlayText()}lookAt(e,t,n,r){if(i.isGeoCoordinatesLike(e)){const i={target:e,zoomLevel:void 0!==t?I.MapViewUtils.calculateZoomLevelFromDistance(this,t):void 0,tilt:n,heading:r};this.lookAtImpl(i)}else"object"===typeof e&&this.lookAtImpl(e)}setCameraGeolocationAndZoom(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.geoCenter=e;let o=Math.min(I.MapViewUtils.MAX_TILT_DEG,r);if(this.projection.type===i.ProjectionType.Spherical){const e=Math.asin(i.EarthConstants.EQUATORIAL_RADIUS/(I.MapViewUtils.calculateDistanceToGroundFromZoomLevel(this,t)+i.EarthConstants.EQUATORIAL_RADIUS)),n=a.MathUtils.radToDeg(e);o=Math.min(o,n)}I.MapViewUtils.zoomOnTargetPosition(this,0,0,t),I.MapViewUtils.setRotation(this,n,o),this.update()}setDynamicProperty(e,t){if(e.startsWith("$"))throw new Error(`failed to update the value of the dynamic property '${e}'`);this.m_env.entries[e]=t,this.update()}removeDynamicProperty(e){if(e.startsWith("$"))throw new Error(`failed to remove the dynamic property '${e}'`);delete this.m_env.entries[e],this.update()}get animating(){return this.m_animationCount>0}beginAnimation(){0===this.m_animationCount++&&(this.update(),this.ANIMATION_STARTED_EVENT.time=Date.now(),this.dispatchEvent(this.ANIMATION_STARTED_EVENT))}endAnimation(){this.m_animationCount>0&&--this.m_animationCount,0===this.m_animationCount&&(this.ANIMATION_FINISHED_EVENT.time=Date.now(),this.dispatchEvent(this.ANIMATION_FINISHED_EVENT))}get cameraIsMoving(){return this.m_movementDetector.cameraIsMoving}get isDynamicFrame(){return this.cameraIsMoving||this.animating||this.m_updatePending||this.m_animatedExtrusionHandler.isAnimating}get pixelToWorld(){if(void 0===this.m_pixelToWorld){o.assert(void 0!==this.m_options.fovCalculation);const e=this.m_targetDistance,t=u.CameraUtils.getFocalLength(this.m_camera);o.assert(void 0!==t),this.m_pixelToWorld=u.CameraUtils.convertScreenToWorldSize(t,e,1)}return this.m_pixelToWorld}get worldToPixel(){return 1/this.pixelToWorld}get pixelRatio(){return void 0!==this.m_pixelRatio?this.m_pixelRatio:"undefined"!==typeof window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1}set pixelRatio(e){this.m_pixelRatio=e,this.renderer.getPixelRatio()!==this.pixelRatio&&this.renderer.setPixelRatio(this.pixelRatio)}set maxFps(e){this.m_options.maxFps=e,this.m_taskScheduler.maxFps=e}get maxFps(){return this.m_options.maxFps}set dynamicPixelRatio(e){this.mapRenderingManager.lowResPixelRatio=e}get dynamicPixelRatio(){return this.mapRenderingManager.lowResPixelRatio}getScreenPosition(e){i.isVector3Like(e)?j.vector3[0].copy(e):this.projection.projectPoint(i.GeoCoordinates.fromObject(e),j.vector3[0]);const t=this.m_screenProjector.project(j.vector3[0]);if(void 0!==t){const{width:e,height:n}=this.getCanvasClientSize();t.x=t.x+e/2,t.y=n-(t.y+n/2)}return t}getWorldPositionAt(e,t,n){this.m_raycaster.setFromCamera(this.getNormalizedScreenCoordinates(e,t),this.m_camera);const r=this.projection.type===i.ProjectionType.Spherical?this.m_raycaster.ray.intersectSphere(this.m_sphere,j.vector3[0]):this.m_raycaster.ray.intersectPlane(this.m_plane,j.vector3[0]);if(null===r&&!0===n){const e=this.m_camera.getWorldDirection(j.vector3[0]).dot(this.m_raycaster.ray.direction);return j.vector3[0].copy(this.m_raycaster.ray.direction).multiplyScalar(this.m_camera.far/e).add(this.m_camera.position)}return r}getGeoCoordinatesAt(e,t,n){const r=this.getWorldPositionAt(e,t,n);if(!r)return null;const o=this.projection.unprojectPoint(r);return this.tileWrappingEnabled||this.projection.type!==i.ProjectionType.Planar||(o.longitude=a.MathUtils.clamp(o.longitude,-180,180)),o}getNormalizedScreenCoordinates(e,t){const{width:n,height:r}=this.getCanvasClientSize();return new a.Vector3(e/n*2-1,-t/r*2+1,0)}intersectMapObjects(e,t,n){return this.m_pickHandler.intersectMapObjects(e,t,n)}resize(e,t){this.m_renderer.setSize(e,t,!1),this.m_renderer.getPixelRatio()!==this.pixelRatio&&this.m_renderer.setPixelRatio(this.pixelRatio),void 0!==this.mapRenderingManager&&this.mapRenderingManager.setSize(e,t),void 0!==this.collisionDebugCanvas&&(this.collisionDebugCanvas.width=e,this.collisionDebugCanvas.height=t),this.updateCameras(),this.update(),this.dispatchEvent({type:N.Resize,size:{width:e,height:t}})}renderSync(e){void 0===e&&(e=o.PerformanceTimer.now()),this.render(e)}update(){this.disposed?z.warn("update(): MapView has been disposed of."):(this.dispatchEvent(this.UPDATE_EVENT),this.m_updatePending||(this.m_updatePending=!0,this.startRenderLoop()))}get updatePending(){return this.m_updatePending}requestUpdateIfNeeded(){this.update()}clearTileCache(e,t){if(void 0!==this.m_visibleTiles){if(void 0!==e){const n=this.getDataSourceByName(e);n&&(this.m_visibleTiles.clearTileCache(n,t),n.clearCache())}else this.m_visibleTiles.clearTileCache(void 0,t),this.m_tileDataSources.forEach((e=>e.clearCache()));void 0!==this.m_elevationProvider&&this.m_elevationProvider.clearCache()}}forEachVisibleTile(e){this.m_visibleTiles.forEachVisibleTile(e)}forEachCachedTile(e){this.m_visibleTiles.forEachCachedTile(e)}markTilesDirty(e,t){this.m_visibleTiles.markTilesDirty(e,t),this.update()}async setElevationSource(e,t,n){this.m_elevationSource&&this.m_elevationSource!==e&&this.removeDataSource(this.m_elevationSource);this.m_tileDataSources.includes(e)||await this.addDataSource(e),this.m_elevationSource=e,this.m_elevationRangeSource=t,this.m_elevationRangeSource.ready()||await this.m_elevationRangeSource.connect(),this.m_elevationProvider=n,this.dataSources.forEach((e=>{e.setEnableElevationOverlay(!0)})),this.m_tileGeometryManager.setTileUpdateCallback((e=>{_.overlayOnElevation(e)})),this.clearTileCache()}clearElevationSource(e){this.removeDataSource(e),this.m_elevationSource=void 0,this.m_elevationRangeSource=void 0,this.m_elevationProvider=void 0,this.dataSources.forEach((e=>{e.setEnableElevationOverlay(!1)})),this.m_tileGeometryManager.setTileUpdateCallback(void 0),this.clearTileCache()}get fog(){return this.m_sceneEnvironment.fog}setPostEffects(){this.mapRenderingManager.bloom.enabled=!1,this.mapRenderingManager.outline.enabled=!1,this.mapRenderingManager.vignette.enabled=!1,this.mapRenderingManager.sepia.enabled=!1,void 0!==this.m_postEffects&&(void 0!==this.m_postEffects.bloom&&(this.mapRenderingManager.bloom=this.m_postEffects.bloom),void 0!==this.m_postEffects.outline&&(this.mapRenderingManager.outline.enabled=this.m_postEffects.outline.enabled,this.mapRenderingManager.updateOutline(this.m_postEffects.outline)),void 0!==this.m_postEffects.vignette&&(this.mapRenderingManager.vignette=this.m_postEffects.vignette),void 0!==this.m_postEffects.sepia&&(this.mapRenderingManager.sepia=this.m_postEffects.sepia))}get elevationProvider(){return this.m_elevationProvider}get throttlingEnabled(){return!0===this.m_taskScheduler.throttlingEnabled}set throttlingEnabled(e){this.m_taskScheduler.throttlingEnabled=e}get shadowsEnabled(){return!0===this.m_options.enableShadows}set shadowsEnabled(e){void 0!==this.m_renderer.shadowMap&&e!==this.m_renderer.shadowMap.enabled&&(this.m_options.enableShadows=e,this.m_renderer.shadowMap.enabled=e,this.m_renderer.shadowMap.type=a.PCFSoftShadowMap,this.clearTileCache())}extractAttitude(){const e=this.m_camera,t=this.projection,n=j.vector3[1],r=j.transform[0],i=j.matrix4[1];n.setFromMatrixPosition(e.matrixWorld),t.localTangentSpace(this.m_targetGeoPos,r),i.makeBasis(r.xAxis,r.yAxis,r.zAxis),j.matrix4[0].copy(i).invert().multiply(e.matrixWorld),r.xAxis.setFromMatrixColumn(j.matrix4[0],0),r.yAxis.setFromMatrixColumn(j.matrix4[0],1),r.zAxis.setFromMatrixColumn(j.matrix4[0],2);let o=0,a=0,s=0;const l=r.zAxis.dot(n.set(0,0,1));return l<1-1e-10?l>1e-10-1?(o=Math.atan2(r.zAxis.x,-r.zAxis.y),a=Math.acos(r.zAxis.z),s=Math.atan2(r.xAxis.x,r.yAxis.z)):(o=-Math.atan2(-r.yAxis.x,r.xAxis.x),a=180,s=0):(o=Math.atan2(-r.yAxis.x,r.xAxis.x),a=0,s=0),{yaw:o,pitch:a,roll:s}}lookAtImpl(e){const t=Math.min(o.getOptionValue(e.tilt,this.tilt),I.MapViewUtils.MAX_TILT_DEG),n=o.getOptionValue(e.heading,this.heading),r=void 0!==e.zoomLevel?I.MapViewUtils.calculateDistanceFromZoomLevel(this,a.MathUtils.clamp(e.zoomLevel,this.m_minZoomLevel,this.m_maxZoomLevel)):void 0!==e.distance?e.distance:this.m_targetDistance;let s;if(void 0!==e.bounds){let o;if(e.bounds instanceof i.GeoBox)s=e.target?i.GeoCoordinates.fromObject(e.target):e.bounds.center,o=I.MapViewUtils.geoBoxToGeoPoints(e.bounds);else if(e.bounds instanceof i.GeoPolygon)s=e.bounds.getCentroid(),o=e.bounds.coordinates;else if(i.isGeoBoxExtentLike(e.bounds)){s=e.target?i.GeoCoordinates.fromObject(e.target):this.target;const t=i.GeoBox.fromCenterAndExtents(s,e.bounds);o=I.MapViewUtils.geoBoxToGeoPoints(t)}else{if(!Array.isArray(e.bounds))throw Error("#lookAt: Invalid 'bounds' value");o=e.bounds,void 0!==e.target&&(s=i.GeoCoordinates.fromObject(e.target))}e.bounds instanceof i.GeoBox||e.bounds instanceof i.GeoPolygon||!this.m_tileWrappingEnabled||this.projection.type!==i.ProjectionType.Planar||(o=I.MapViewUtils.wrapGeoPointsToScreen(o,s));const l=o.map((e=>this.projection.projectPoint(i.GeoCoordinates.fromObject(e),new a.Vector3))),c=new a.Vector3;if(void 0===s){(new a.Box3).setFromPoints(l).getCenter(c),this.projection.scalePointToSurface(c),s=this.projection.unprojectPoint(c)}else this.projection.projectPoint(s,c);return void 0!==e.zoomLevel||void 0!==e.distance?this.lookAtImpl({tilt:t,heading:n,distance:r,target:s}):this.lookAtImpl(I.MapViewUtils.getFitBoundsLookAtParams(s,c,l,{tilt:t,heading:n,minDistance:I.MapViewUtils.calculateDistanceFromZoomLevel(this,this.maxZoomLevel),projection:this.projection,camera:this.camera}))}s=void 0!==e.target?i.GeoCoordinates.fromObject(e.target):this.target,I.MapViewUtils.getCameraRotationAtTarget(this.projection,s,-n,t,this.camera.quaternion),I.MapViewUtils.getCameraPositionFromTargetCoordinates(s,r,-n,t,this.projection,this.camera.position),this.camera.updateMatrixWorld(!0),this.updateLookAtSettings(),this.update()}updatePolarDataSource(){const e=this.m_polarDataSource;if(!0===this.m_enablePolarDataSource&&void 0!==e){const t=this.getDataSourceByName(e.name);this.projection.type===i.ProjectionType.Spherical?void 0===t&&this.addDataSource(e):void 0!==t&&this.removeDataSource(e)}}updateCameras(e){var t;this.m_camera.updateMatrixWorld(!1),this.updateLookAtSettings();const{width:n,height:r}=this.m_renderer.getSize(j.vector2[0]);this.m_camera.aspect=void 0!==this.m_forceCameraAspect?this.m_forceCameraAspect:n/r,this.setFovOnCamera(this.m_options.fovCalculation,r);const i=this.projection.getScaleFactor(this.camera.position),o=i*this.m_tileDataSources.reduce(((e,t)=>Math.max(e,t.maxGeometryHeight)),0),a=i*this.m_tileDataSources.reduce(((e,t)=>Math.min(e,t.minGeometryHeight)),0);Object.assign(this.m_viewRanges,void 0===e?this.m_visibleTiles.updateClipPlanes(o,a):e),this.m_camera.near=this.m_viewRanges.near,this.m_camera.far=this.m_viewRanges.far,this.m_camera.updateProjectionMatrix(),this.m_rteCamera.copy(this.m_camera),this.m_rteCamera.position.setScalar(0),this.m_rteCamera.updateMatrixWorld(!0),null===(t=this.m_textElementsRenderer)||void 0===t||t.updateCamera(),this.m_screenProjector.update(this.camera,n,r),this.m_pixelToWorld=void 0,this.m_sceneEnvironment.update()}updateLookAtSettings(){let{target:e,distance:t,final:n}=I.MapViewUtils.getTargetAndDistance(this.projection,this.camera,this.elevationProvider);n||this.update(),this.geoMaxBounds&&({target:e,distance:t}=I.MapViewUtils.constrainTargetAndDistanceToViewBounds(e,t,this)),this.m_targetWorldPos.copy(e),this.m_targetGeoPos=this.projection.unprojectPoint(this.m_targetWorldPos),this.m_targetDistance=t,this.m_zoomLevel=I.MapViewUtils.calculateZoomLevelFromDistance(this,this.m_targetDistance);const{yaw:r,pitch:i,roll:o}=this.extractAttitude();this.m_yaw=r,this.m_pitch=i,this.m_roll=o}updateEnv(){this.m_env.entries.$zoom=this.m_zoomLevel,this.m_env.entries.$pixelToMeters=this.pixelToWorld,this.m_env.entries.$frameNumber=this.m_frameNumber}ndcToView(e,t){return t.set(e.x,e.y,e.z).applyMatrix4(this.camera.projectionMatrixInverse).applyMatrix4(this.m_rteCamera.matrixWorld),t}renderLoop(e){if(!0!==this.m_options.synchronousRendering&&!this.disposed){if(0===this.maxFps)this.render(e);else{const t=3,n=1e3/this.maxFps;e>=(void 0===this.m_previousFrameTimeStamp?0:this.m_previousFrameTimeStamp)+n-t&&this.render(e)}this.m_updatePending||this.animating?this.m_animationFrameHandle=requestAnimationFrame(this.handleRequestAnimationFrame):this.m_animationFrameHandle=void 0}}startRenderLoop(){void 0!==this.m_animationFrameHandle||this.m_options.synchronousRendering||(this.m_animationFrameHandle=requestAnimationFrame(this.handleRequestAnimationFrame))}getEnabledTileDataSources(){const e=[];for(const t of this.m_tileDataSources)this.isDataSourceEnabled(t)&&e.push(t);return e}render(e){if(this.m_drawing)return;if(this.disposed)return void z.warn("render(): MapView has been disposed of.");let t;this.RENDER_EVENT.time=e,this.dispatchEvent(this.RENDER_EVENT),this.m_tileObjectRenderer.prepareRender(),++this.m_frameNumber;const n=R.PerformanceStatistics.instance,r=n.enabled;if(r){if(t=n.currentFrame,void 0!==this.m_previousFrameTimeStamp){const n=e-this.m_previousFrameTimeStamp;t.setValue("render.fps",1e3/n)}n.storeAndClearFrameInfo(),t=t,t.setValue("renderCount.frameNumber",this.m_frameNumber)}let i,a,s,l,c,u;if(this.m_previousFrameTimeStamp=e,this.m_renderer.info.reset(),this.m_updatePending=!1,this.m_thisFrameTilesChanged=void 0,this.m_drawing=!0,this.m_renderer.getPixelRatio()!==this.pixelRatio&&this.m_renderer.setPixelRatio(this.pixelRatio),this.updateCameras(),this.updateEnv(),this.m_renderer.clear(),this.m_sceneRoot.children.length=0,this.m_overlaySceneRoot.children.length=0,r&&(i=o.PerformanceTimer.now()),!this.lockVisibleTileSet){const e=this.m_visibleTiles.updateRenderList(this.storageLevel,Math.floor(this.zoomLevel),this.getEnabledTileDataSources(),this.m_frameNumber,this.m_elevationRangeSource);e.viewRangesChanged&&this.updateCameras(e.viewRanges)}r&&(a=o.PerformanceTimer.now());const h=this.m_visibleTiles.dataSourceTileList;if(h.forEach((e=>{let{zoomLevel:t,renderedTiles:n}=e;n.forEach((e=>{this.m_tileObjectRenderer.render(e,t,this.zoomLevel,this.m_camera.position,this.m_sceneRoot),e.frameNumLastVisible=this.m_frameNumber}))})),this.m_initialTextPlacementDone||this.m_firstFrameComplete||this.isDynamicFrame||this.m_themeManager.isUpdating()||!this.m_poiTableManager.finishedLoading||!this.m_visibleTiles.allVisibleTilesLoaded||this.m_connectedDataSources.size+this.m_failedDataSources.size!==this.m_tileDataSources.length||this.m_textElementsRenderer.loading||(this.m_initialTextPlacementDone=!0),this.m_mapAnchors.update(this.projection,this.camera.position,this.m_sceneRoot,this.m_overlaySceneRoot),this.m_animatedExtrusionHandler.update(this.zoomLevel),void 0!==t&&(t.addValue("renderCount.numTilesRendered",0),t.addValue("renderCount.numTilesVisible",0),t.addValue("renderCount.numTilesLoading",0),h.forEach((e=>{let{zoomLevel:n,renderedTiles:r,visibleTiles:i,numTilesLoading:o}=e;t.addValue("renderCount.numTilesRendered",r.size),t.addValue("renderCount.numTilesVisible",i.length),t.addValue("renderCount.numTilesLoading",o)}))),this.m_movementDetector.checkCameraMoved(this,e)){const{latitude:e,longitude:t,altitude:n}=this.geoCenter;this.dispatchEvent({type:N.CameraPositionChanged,latitude:e,longitude:t,altitude:n,yaw:this.m_yaw,pitch:this.m_pitch,roll:this.m_roll,tilt:this.tilt,heading:this.heading,zoom:this.zoomLevel})}const d=void 0!==this.m_pointOfView?this.m_pointOfView:this.m_rteCamera;if(this.renderLabels&&!this.m_pointOfView&&this.m_textElementsRenderer.placeText(h,e),r&&(s=o.PerformanceTimer.now()),this.mapRenderingManager.render(this.m_renderer,this.m_scene,d,!this.isDynamicFrame),r&&(l=o.PerformanceTimer.now()),this.renderLabels&&!this.m_pointOfView&&this.m_textElementsRenderer.renderText(this.m_viewRanges.maximum),this.m_overlaySceneRoot.children.length>0&&this.m_renderer.render(this.m_overlayScene,d),r&&(c=o.PerformanceTimer.now()),this.m_firstFrameRendered||(this.m_firstFrameRendered=!0,r&&n.appResults.set("firstFrame",e),this.FIRST_FRAME_EVENT.time=e,this.dispatchEvent(this.FIRST_FRAME_EVENT)),this.m_visibleTiles.disposePendingTiles(),this.m_drawing=!1,this.checkCopyrightUpdates(),void 0!==this.m_taskSchedulerTimeout&&clearTimeout(this.m_taskSchedulerTimeout),this.m_taskSchedulerTimeout=setTimeout((()=>{this.m_taskSchedulerTimeout=void 0,this.m_taskScheduler.processPending(e)}),0),void 0!==t){u=o.PerformanceTimer.now();const r=u-e;t.setValue("render.setupTime",i-e),t.setValue("render.cullTime",a-i),t.setValue("render.textPlacementTime",s-a),t.setValue("render.drawTime",l-s),t.setValue("render.textDrawTime",c-l),t.setValue("render.cleanupTime",u-c),t.setValue("render.frameRenderTime",r),t.setValue("render.fullFrameTime",r),t.setValue("render.geometryCreationTime",0),n.addWebGLInfo(this.m_renderer.info),n.addMemoryInfo()}this.DID_RENDER_EVENT.time=e,this.dispatchEvent(this.DID_RENDER_EVENT),!this.textElementsRenderer.loading&&this.m_visibleTiles.allVisibleTilesLoaded&&this.m_initialTextPlacementDone&&!this.m_animatedExtrusionHandler.isAnimating&&(!1===this.m_firstFrameComplete&&(this.m_firstFrameComplete=!0,r&&n.appResults.set("firstFrameComplete",e)),this.FRAME_COMPLETE_EVENT.time=e,this.dispatchEvent(this.FRAME_COMPLETE_EVENT))}setupCamera(){o.assert(void 0!==this.m_visibleTiles),this.m_options.target=i.GeoCoordinates.fromObject(o.getOptionValue(this.m_options.target,V.target)),this.m_options.target.altitude=0,this.m_options.tilt=o.getOptionValue(this.m_options.tilt,V.tilt),this.m_options.heading=o.getOptionValue(this.m_options.heading,V.heading),this.m_options.zoomLevel=o.getOptionValue(this.m_options.zoomLevel,V.zoomLevel),this.lookAtImpl(this.m_options);const{width:e,height:t}=this.getCanvasClientSize();this.resize(e,t)}createVisibleTileSet(){o.assert(void 0!==this.m_tileGeometryManager),this.m_visibleTiles&&(this.m_visibleTiles.clearTileCache(),this.m_visibleTiles.disposePendingTiles());const e=void 0===this.m_enableMixedLod?this.projection.type===i.ProjectionType.Spherical:this.m_enableMixedLod;return this.m_visibleTiles=new F.VisibleTileSet(new y.FrustumIntersection(this.m_camera,this,this.m_visibleTileSetOptions.extendedFrustumCulling,this.m_tileWrappingEnabled,e,this.m_lodMinTilePixelSize),this.m_tileGeometryManager,this.m_visibleTileSetOptions,this.taskQueue),this.m_visibleTiles}movementStarted(){this.m_textElementsRenderer.movementStarted(),this.MOVEMENT_STARTED_EVENT.time=Date.now(),this.dispatchEvent(this.MOVEMENT_STARTED_EVENT)}movementFinished(){this.m_textElementsRenderer.movementFinished(),this.MOVEMENT_FINISHED_EVENT.time=Date.now(),this.dispatchEvent(this.MOVEMENT_FINISHED_EVENT),this.animating||(void 0!==this.m_movementFinishedUpdateTimerId&&clearTimeout(this.m_movementFinishedUpdateTimerId),this.m_movementFinishedUpdateTimerId=setTimeout((()=>{this.m_movementFinishedUpdateTimerId=void 0,this.update()}),0))}checkIfTilesChanged(){if(void 0!==this.m_thisFrameTilesChanged)return this.m_thisFrameTilesChanged;const e=this.m_visibleTiles.dataSourceTileList,t=[];t.length=0,e.forEach((e=>{let{dataSource:n,renderedTiles:r}=e;r.forEach((e=>{t.push(n.name+"-"+e.tileKey.mortonCode())}))})),t.sort();const n=t.join("#");return n!==this.m_lastTileIds?(this.m_lastTileIds=n,this.m_thisFrameTilesChanged=!0):this.m_thisFrameTilesChanged=!1,this.m_thisFrameTilesChanged}checkCopyrightUpdates(){if(!this.checkIfTilesChanged())return;const e=this.getRenderedTilesCopyrightInfo();if(e!==this.m_copyrightInfo){if(e.length===this.m_copyrightInfo.length){let t=!0;for(let n=0;n<e.length;n++){const r=e[n],i=this.m_copyrightInfo[n];if(r.label!==i.label){t=!1;break}}if(t)return}this.m_copyrightInfo=e,this.dispatchEvent(this.COPYRIGHT_CHANGED_EVENT)}}getRenderedTilesCopyrightInfo(){let e=[];for(const t of this.m_visibleTiles.dataSourceTileList)for(const n of t.renderedTiles.values()){const t=n.copyrightInfo;void 0!==t&&0!==t.length&&(e=f.CopyrightInfo.mergeArrays(e,t))}return e}setupStats(e){new R.PerformanceStatistics(e,1e3)}setupRenderer(e){var t;this.m_scene.add(this.m_sceneRoot),this.m_overlayScene.add(this.m_overlaySceneRoot),this.shadowsEnabled=null!==(t=this.m_options.enableShadows)&&void 0!==t&&t,e.setupRenderer()}createTextRenderer(){return new D.TextElementsRenderer(new L.MapViewState(this,this.checkIfTilesChanged.bind(this)),(()=>{this.update()}),this.m_screenProjector,this.m_poiManager,this.m_renderer,[this.imageCache,this.userImageCache],this.m_options)}async resetTextRenderer(e,t,n){await this.m_textElementsRenderer.updateFontCatalogs(e),await this.m_textElementsRenderer.updateTextStyles(t,n),this.update()}setFovOnCamera(e,t){const n=a.MathUtils.degToRad(e.fov);if("fixed"===e.type)return void u.CameraUtils.setVerticalFov(this.m_camera,n,t);let r=u.CameraUtils.getFocalLength(this.m_camera);void 0===r&&(u.CameraUtils.setVerticalFov(this.m_camera,n,t),r=u.CameraUtils.getFocalLength(this.m_camera)),u.CameraUtils.setFocalLength(this.m_camera,r,t)}getCanvasClientSize(){const{clientWidth:e,clientHeight:t}=this.canvas;if(0===e||0===t||"number"!==typeof e||"number"!==typeof t){const e=this.m_renderer.getPixelRatio();return{width:Math.round(this.canvas.width/e),height:Math.round(this.canvas.height/e)}}return{width:e,height:t}}}t.MapView=G},64873:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewAtmosphere=t.AtmosphereLightMode=void 0;const r=n(31201),i=n(85164),o=n(15739),a=n(534),s=n(45480);var l,c,u;!function(e){e[e.Ground=1]="Ground",e[e.Sky=2]="Sky",e[e.SkyAndGround=3]="SkyAndGround"}(l||(l={})),function(e){e[e.ScatteringShader=0]="ScatteringShader",e[e.SimpleColor=1]="SimpleColor",e[e.Wireframe=2]="Wireframe"}(c||(c={})),function(e){e[e.LightOverhead=0]="LightOverhead",e[e.LightDynamic=1]="LightDynamic"}(u=t.AtmosphereLightMode||(t.AtmosphereLightMode={}));const h={clipPlanes:{near:0,far:0}};class d{constructor(e,t,n,i,o){let u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.SkyAndGround,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.ScatteringShader;this.m_mapAnchors=e,this.m_sceneCamera=t,this.m_projection=n,this.m_rendererCapabilities=i,this.m_updateCallback=o,this.m_atmosphereVariant=u,this.m_materialVariant=h,this.m_enabled=!0,this.m_clipPlanesEvaluator=new s.TiltViewClipPlanesEvaluator(.025*r.EarthConstants.EQUATORIAL_RADIUS,0,1,.05,1e7),this.m_lightDirection=new a.Vector3(0,1,0),this.m_atmosphereVariant&l.Sky&&this.createSkyGeometry(),this.m_atmosphereVariant&l.Ground&&this.createGroundGeometry(),this.addToMapAnchors(this.m_mapAnchors)}static isPresent(e){for(const t of e.children)if(t.name===d.SkyAtmosphereUserName||t.name===d.GroundAtmosphereUserName)return!0;return!1}get skyMesh(){return this.m_skyMesh}get groundMesh(){return this.m_groundMesh}set enabled(e){if(this.disposed)return;if(this.m_enabled===e)return;this.m_enabled=e;const t=d.isPresent(this.m_mapAnchors);e&&!t?this.addToMapAnchors(this.m_mapAnchors):!e&&t&&this.removeFromMapAnchors(this.m_mapAnchors)}get enabled(){return this.m_enabled}set lightMode(e){if(this.m_materialVariant!==c.ScatteringShader)return;const t=e===u.LightDynamic;if(void 0!==this.m_groundMaterial){this.m_groundMaterial.setDynamicLighting(t)}if(void 0!==this.m_skyMaterial){this.m_skyMaterial.setDynamicLighting(t)}}dispose(){var e,t,n,r;this.enabled&&(this.enabled=!1),null===(e=this.m_skyMaterial)||void 0===e||e.dispose(),null===(t=this.m_groundMaterial)||void 0===t||t.dispose(),null===(n=this.m_skyGeometry)||void 0===n||n.dispose(),null===(r=this.m_groundGeometry)||void 0===r||r.dispose(),this.m_skyGeometry=void 0,this.m_groundGeometry=void 0,this.m_skyMaterial=void 0,this.m_groundMaterial=void 0,this.m_skyMesh=void 0,this.m_groundMesh=void 0}reset(e){}get disposed(){return void 0===this.m_skyMesh&&void 0===this.m_groundMesh}addToMapAnchors(e){o.assert(!d.isPresent(e),"Atmosphere already added"),void 0!==this.m_skyMesh&&e.add(p(this.m_skyMesh,Number.MIN_SAFE_INTEGER)),void 0!==this.m_groundMesh&&e.add(p(this.m_groundMesh,Number.MAX_SAFE_INTEGER)),this.m_updateCallback&&this.m_updateCallback()}removeFromMapAnchors(e){if(!d.isPresent(e))return;let t=!1;void 0!==this.m_skyMesh&&(e.remove(this.m_skyMesh),t=!0),void 0!==this.m_groundMesh&&(e.remove(this.m_groundMesh),t=!0),t&&this.m_updateCallback&&this.m_updateCallback()}createSkyGeometry(){if(this.m_projection.type===r.ProjectionType.Spherical)this.m_skyGeometry=new a.SphereGeometry(1.025*r.EarthConstants.EQUATORIAL_RADIUS,256,256);else this.m_skyGeometry=new a.PlaneGeometry(200,200);this.m_skyGeometry.translate(0,0,0),this.m_materialVariant===c.ScatteringShader?this.m_skyMaterial=new i.SkyAtmosphereMaterial({rendererCapabilities:this.m_rendererCapabilities}):this.m_materialVariant===c.SimpleColor?this.m_skyMaterial=new a.MeshBasicMaterial({color:new a.Color(12908781),opacity:.4,transparent:!1,depthTest:!0,depthWrite:!1,side:a.BackSide,blending:a.NormalBlending,fog:!1}):this.m_skyMaterial=new a.MeshStandardMaterial({color:8388607,depthTest:!1,depthWrite:!1,normalScale:new a.Vector2(-1,-1),side:a.BackSide,wireframe:!0}),this.m_skyMesh=new a.Mesh(this.m_skyGeometry,this.m_skyMaterial),this.m_skyMesh.name=d.SkyAtmosphereUserName,this.setupSkyForRendering()}createGroundGeometry(){if(this.m_projection.type===r.ProjectionType.Spherical)this.m_groundGeometry=new a.SphereGeometry(1.0001*r.EarthConstants.EQUATORIAL_RADIUS,256,256);else this.m_groundGeometry=new a.PlaneGeometry(200,200);this.m_groundGeometry.translate(0,0,0),this.m_materialVariant===c.ScatteringShader?this.m_groundMaterial=new i.GroundAtmosphereMaterial({rendererCapabilities:this.m_rendererCapabilities}):this.m_materialVariant===c.SimpleColor?this.m_groundMaterial=new a.MeshBasicMaterial({color:new a.Color(50687),opacity:.4,transparent:!0,depthTest:!1,depthWrite:!1,side:a.FrontSide,blending:a.NormalBlending,fog:!1}):this.m_groundMaterial=new a.MeshStandardMaterial({color:1149338,depthTest:!0,depthWrite:!1,side:a.FrontSide,wireframe:!0}),this.m_groundMesh=new a.Mesh(this.m_groundGeometry,this.m_groundMaterial),this.m_groundMesh.name=d.GroundAtmosphereUserName,this.setupGroundForRendering()}setupSkyForRendering(){if(void 0===this.m_skyMesh)return;let e;e=this.m_materialVariant!==c.ScatteringShader?(e,t)=>{this.overrideClipPlanes(e)}:(e,t)=>{this.overrideClipPlanes(e),o.assert(t instanceof i.SkyAtmosphereMaterial);const n=this.m_skyMaterial;n.updateUniforms(n,this.m_skyMesh,e,this.m_lightDirection)},o.assert(void 0!==this.m_skyMaterial),this.m_skyMesh.onBeforeRender=(t,n,r,i,o,a)=>{e(r,o)},this.m_skyMesh.onAfterRender=(e,t,n,r,i,o)=>{this.revertClipPlanes(n)}}setupGroundForRendering(){void 0!==this.m_groundMesh&&this.m_materialVariant===c.ScatteringShader&&(o.assert(void 0!==this.m_groundMaterial),this.m_groundMesh.onBeforeRender=(e,t,n,r,a,s)=>{o.assert(a instanceof i.GroundAtmosphereMaterial);const l=this.m_groundMaterial;l.updateUniforms(l,this.m_groundMesh,n,this.m_lightDirection)})}overrideClipPlanes(e){const t=this.m_sceneCamera;h.clipPlanes.near=t.near,h.clipPlanes.far=t.far;const n=this.m_clipPlanesEvaluator.evaluateClipPlanes(this.m_sceneCamera,this.m_projection);o.assert(e instanceof a.PerspectiveCamera);const i=e;i.near=n.near,i.far=n.far+.1*r.EarthConstants.EQUATORIAL_RADIUS,i.updateProjectionMatrix()}revertClipPlanes(e){o.assert(e instanceof a.PerspectiveCamera);const t=e;t.near=h.clipPlanes.near,t.far=h.clipPlanes.far,t.updateProjectionMatrix()}}function p(e,t){const n=e;return n.renderOrder=t,n.pickable=!1,n.anchor=new a.Vector3(0,0,0),n}t.MapViewAtmosphere=d,d.SkyAtmosphereUserName="SkyAtmosphere",d.GroundAtmosphereUserName="GroundAtmosphere"},31011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewEnvironment=t.DEFAULT_CLEAR_COLOR=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(49417),s=n(3457),l=n(97229),c=n(4716),u=i.LoggerManager.instance.create("MapViewEnvironment");t.DEFAULT_CLEAR_COLOR=16777215;const h={vector3:[new o.Vector3,new o.Vector3,new o.Vector3],frustumPoints:[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3]};t.MapViewEnvironment=class{constructor(e,t){this.m_mapView=e,this.m_fog=new s.MapViewFog(this.m_mapView.scene),!1!==t.addBackgroundDatasource&&(this.m_backgroundDataSource=new a.BackgroundDataSource,this.m_mapView.addDataSource(this.m_backgroundDataSource)),void 0!==t.backgroundTilingScheme&&void 0!==this.m_backgroundDataSource&&this.m_backgroundDataSource.setTilingScheme(t.backgroundTilingScheme),this.updateClearColor()}get lights(){var e;return null!==(e=this.m_createdLights)&&void 0!==e?e:[]}get fog(){return this.m_fog}updateBackgroundDataSource(){this.m_backgroundDataSource&&this.m_backgroundDataSource.updateStorageLevelOffset()}clearBackgroundDataSource(){void 0!==this.m_backgroundDataSource&&this.m_mapView.clearTileCache(this.m_backgroundDataSource.name)}update(){this.m_fog.update(this.m_mapView,this.m_mapView.viewRanges.maximum),void 0!==this.m_skyBackground&&this.m_mapView.projection.type===r.ProjectionType.Planar&&this.m_skyBackground.updateCamera(this.m_mapView.camera),this.updateLights()}updateClearColor(e,n){void 0!==e?this.m_mapView.renderer.setClearColor(new o.Color(e),n):this.m_mapView.renderer.setClearColor(t.DEFAULT_CLEAR_COLOR,n)}updateSkyBackground(e,t){if(this.m_skyBackground instanceof l.SkyBackground&&void 0!==e)this.updateSkyBackgroundColors(e,t);else{if(void 0===this.m_skyBackground&&void 0!==e)return void this.addNewSkyBackground(e,t);this.m_skyBackground instanceof l.SkyBackground&&void 0===e&&this.removeSkyBackGround()}}updateLighting(e){var t;this.m_createdLights&&this.m_createdLights.forEach((e=>{this.m_mapView.scene.remove(e)})),null===(t=this.m_overlayCreatedLights)||void 0===t||t.forEach((e=>{this.m_mapView.overlayScene.remove(e),e instanceof o.DirectionalLight&&this.m_mapView.overlayScene.remove(e.target)})),void 0!==e&&(this.m_createdLights=[],this.m_overlayCreatedLights=[],e.forEach((e=>{const t=c.createLight(e);if(!t)return void u.warn(`MapView: failed to create light ${e.name} of type ${e.type}`);if(this.m_mapView.scene.add(t),t.isDirectionalLight){const e=t;this.m_mapView.scene.add(e.target)}this.m_createdLights.push(t);const n=t.clone();this.m_mapView.overlayScene.add(n),n instanceof o.DirectionalLight&&this.m_mapView.overlayScene.add(n.target.clone())})))}updateLights(){if(!this.m_mapView.shadowsEnabled||this.m_mapView.projection.type===r.ProjectionType.Spherical||void 0===this.m_createdLights||0===this.m_createdLights.length)return;const e=[{x:-1,y:-1,z:-1},{x:1,y:-1,z:-1},{x:-1,y:1,z:-1},{x:1,y:1,z:-1},{x:-1,y:-1,z:1},{x:1,y:-1,z:1},{x:-1,y:1,z:1},{x:1,y:1,z:1}].map(((e,t)=>this.m_mapView.ndcToView(e,h.frustumPoints[t])));this.m_createdLights.forEach((t=>{const n=t;if(!0===n.isDirectionalLight){const t=h.vector3[0];t.copy(n.target.position),t.sub(n.position),t.normalize();const i=h.vector3[1];this.m_mapView.projection.type===r.ProjectionType.Planar&&i.set(0,0,-1);const a=this.m_mapView.tilt,s=this.m_mapView.targetDistance*Math.cos(o.MathUtils.degToRad(a))/i.dot(t);n.target.position.copy(this.m_mapView.worldTarget).sub(this.m_mapView.camera.position),n.position.copy(this.m_mapView.worldTarget),n.position.addScaledVector(t,-s),n.position.sub(this.m_mapView.camera.position),n.updateMatrixWorld(),n.shadow.updateMatrices(n);const l=n.shadow.camera,c=e.map((e=>this.viewToLightSpace(e.clone(),l))),u=new o.Box3;c.forEach((e=>{u.expandByPoint(e)})),l.left=u.min.x,l.right=u.max.x,l.top=u.max.y,l.bottom=u.min.y,l.near=.95*-u.max.z,l.far=-u.min.z,l.updateProjectionMatrix()}}))}addNewSkyBackground(e,t){"gradient"===e.type&&void 0===e.groundColor&&(e.groundColor=i.getOptionValue(t,"#000000")),this.m_skyBackground=new l.SkyBackground(e,this.m_mapView.projection.type,this.m_mapView.camera),this.m_mapView.scene.background=this.m_skyBackground.texture}removeSkyBackGround(){this.m_mapView.scene.background=null,void 0!==this.m_skyBackground&&(this.m_skyBackground.dispose(),this.m_skyBackground=void 0)}updateSkyBackgroundColors(e,t){var n;"gradient"===e.type&&void 0===e.groundColor&&(e.groundColor=i.getOptionValue(t,"#000000")),void 0!==this.m_skyBackground&&(this.m_skyBackground.updateTexture(e,this.m_mapView.projection.type),this.m_mapView.scene.background=null===(n=this.m_skyBackground)||void 0===n?void 0:n.texture)}viewToLightSpace(e,t){return e.applyMatrix4(t.matrixWorldInverse)}}},3457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewFog=void 0;const r=n(85164),i=n(50470),o=n(15739),a=n(534);t.MapViewFog=class{constructor(e){this.m_scene=e,this.m_enabled=!0,this.m_fog=new a.Fog(0),this.m_fogIsDefined=!1}set enabled(e){this.m_enabled=e,e&&this.m_fogIsDefined&&null===this.m_scene.fog?this.add():e||null===this.m_scene.fog||this.remove()}get enabled(){return this.m_enabled}reset(e){this.m_cachedFog=e,void 0!==e&&void 0!==e.color&&void 0!==e.startRatio?(this.m_fogIsDefined=!0,this.m_fog.color.set(e.color),this.m_enabled&&null===this.m_scene.fog&&this.add()):(this.m_fogIsDefined=!1,null!==this.m_scene.fog&&this.remove())}update(e,t){if(null!==this.m_scene.fog&&void 0!==this.m_cachedFog&&this.m_cachedFog&&void 0!==this.m_cachedFog.startRatio&&(void 0!==e.camera.far||void 0!==t)){const n=void 0!==t?t:e.camera.far,r=1,i=0,s=this.m_cachedFog.startRatio,l=1;o.assert(s<=l);const c=Math.abs(Math.cos(e.tilt)),u=o.MathUtils.smoothStep(r,i,c);this.m_fog.near=a.MathUtils.lerp(n*s,n,1-u),this.m_fog.far=a.MathUtils.lerp(n*l,n,u),this.m_fog.near=Math.min(this.m_fog.near,e.camera.far),this.m_fog.far=Math.min(this.m_fog.far,e.camera.far)}}add(){this.m_scene.fog=this.m_fog,this.setFogInRawShaderMaterials(!0)}remove(){this.m_scene.fog=null,this.setFogInRawShaderMaterials(!1)}setFogInRawShaderMaterials(e){this.m_scene.traverse((t=>{if(t instanceof a.Mesh){const n=t.material;n instanceof a.Material&&!(n instanceof r.HighPrecisionLineMaterial)&&n.fog!==e&&(n.fog=e,n instanceof i.RawShaderMaterial&&n.invalidateFog())}}))}}},12918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Squares=t.Circles=t.MapViewPoints=void 0;const r=n(534);class i extends r.Points{constructor(){super(...arguments),this.enableRayTesting=!0}raycast(e,t){if(!this.enableRayTesting)return;const n=this.geometry,i=this.matrixWorld,a=o(e.ray.origin.clone().add(e.ray.direction).project(e.camera),e),s=(n,r)=>{const s=function(e,t,n){const r=e.clone().applyMatrix4(t),i=r.distanceTo(n.ray.origin),a=r.project(n.camera),s=a.x<1&&a.x>-1&&a.y<1&&a.y>-1;if(s){return{absoluteScreenPosition:o(a,n),pointIsOnScreen:s,distance:i}}return{pointIsOnScreen:s}}(n,i,e);s.pointIsOnScreen&&this.testPoint(n,s.absoluteScreenPosition,a,r,s.distance,t)},l=new r.Vector3,c=n.index,u=n.attributes.position.array;if(null!==c){const e=c.array;for(let t=0,n=e.length;t<n;t++)s(l.fromArray(u,3*e[t]),t)}else for(let r=0,o=u.length/3;r<o;r++)s(l.fromArray(u,3*r),r)}}function o(e,t){return new r.Vector2(e.x+1,1-e.y).divideScalar(2).multiply(t.canvasSize).ceil()}t.MapViewPoints=i;t.Circles=class extends i{testPoint(e,t,n,r,i,o){const a=t.x-n.x,s=t.y-n.y;Math.sqrt(a*a+s*s)<=this.material.size/2&&o.push({point:e,distance:i,index:r,object:this})}};t.Squares=class extends i{testPoint(e,t,n,r,i,o){const a=t.x-n.x,s=t.y-n.y,l=this.material.size/2;Math.abs(a)<=l&&Math.abs(s)<=l&&o.push({point:e,distance:i,index:r,object:this})}}},8379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewTaskScheduler=void 0;const r=n(15739),i=n(534),o=n(65312),a=n(91422),s={type:"update"};class l extends i.EventDispatcher{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;super(),this.m_maxFps=e,this.m_throttlingEnabled=!1,this.m_taskQueue=new r.TaskQueue({groups:[o.TileTaskGroups.FETCH_AND_DECODE,o.TileTaskGroups.CREATE],prioSortFn:(e,t)=>e.getPriority()-t.getPriority()}),this.maxFps=e}set maxFps(e){this.m_maxFps=e<=0?60:e}get maxFps(){return this.m_maxFps}get taskQueue(){return this.m_taskQueue}get throttlingEnabled(){return!0===this.m_throttlingEnabled}set throttlingEnabled(e){this.m_throttlingEnabled=e}requestUpdate(){this.dispatchEvent(s)}processPending(e){const t=a.PerformanceStatistics.instance,n=t.enabled?t.currentFrame:void 0;let i;t.enabled&&(i=r.PerformanceTimer.now()),this.m_taskQueue.update();let s=this.taskQueue.numItemsLeft();if(null===n||void 0===n||n.setValue("TaskScheduler.numPendingTasks",s),this.throttlingEnabled){let t=this.spaceInFrame(e);t=t>2?t-2:t,null===n||void 0===n||n.setValue("TaskScheduler.estimatedAvailableTime",t);let r=0;for(;t>0&&s>0;){function e(e){var n,i;return t-=null!==(i=null===(n=e.estimatedProcessTime)||void 0===n?void 0:n.call(e))&&void 0!==i?i:2,t>0||1===r}r++,[o.TileTaskGroups.CREATE,o.TileTaskGroups.FETCH_AND_DECODE].forEach((t=>{this.m_taskQueue.numItemsLeft(t)&&this.m_taskQueue.processNext(t,e)})),s=this.m_taskQueue.numItemsLeft()}s=this.m_taskQueue.numItemsLeft(),s>0&&(null===n||void 0===n||n.setValue("TaskScheduler.pendingTasksNotYetProcessed",s),this.requestUpdate())}else this.m_taskQueue.processNext(o.TileTaskGroups.CREATE,void 0,this.m_taskQueue.numItemsLeft(o.TileTaskGroups.CREATE)),this.m_taskQueue.processNext(o.TileTaskGroups.FETCH_AND_DECODE,void 0,this.m_taskQueue.numItemsLeft(o.TileTaskGroups.FETCH_AND_DECODE));t.enabled&&(null===n||void 0===n||n.setValue("TaskScheduler.pendingTasksTime",r.PerformanceTimer.now()-i))}clearQueuedTasks(){this.m_taskQueue.clear()}spaceInFrame(e){const t=(performance||Date).now()-e;return Math.max(1e3/this.m_maxFps-t,0)}}t.MapViewTaskScheduler=l},8246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewThemeManager=void 0;const r=n(15739),i=n(10018),o=n(30081),a=r.LoggerManager.instance.create("MapViewThemeManager");t.MapViewThemeManager=class{constructor(e,t){this.m_mapView=e,this.m_uriResolver=t,this.m_abortControllers=[],this.m_theme={},this.m_imageCache=new i.MapViewImageCache}async setTheme(e){return this.isUpdating()&&(a.warn("Formerly set Theme is still updating, update will be canceled"),this.cancelThemeUpdate()),this.m_updatePromise=this.loadTheme(e).then((async e=>{await this.updateTheme(e)})),await this.m_updatePromise,this.m_updatePromise=void 0,this.m_theme}async getTheme(){return this.isUpdating()&&await this.m_updatePromise,this.m_theme}isUpdating(){return void 0!==this.m_updatePromise}get theme(){return this.isUpdating()?{}:this.m_theme}async loadTheme(e){let t={};if("string"!==typeof e&&o.ThemeLoader.isThemeLoaded(e))t=e;else try{t=await o.ThemeLoader.load(e,{uriResolver:this.m_uriResolver,signal:this.createAbortController().signal})}catch(n){"AbortError"===n.name?a.warn(`theme loading was aborted due to: ${n}`):a.error(`failed to load theme: ${n}`)}return t}async updateTheme(e){var t,n;const r=this.m_mapView.sceneEnvironment;this.m_theme.fog=e.fog,this.m_theme.sky=e.sky,r.updateSkyBackground(e.sky),r.fog.reset(e.fog),this.m_theme.lights=e.lights,r.updateLighting(e.lights),this.m_theme.clearColor=e.clearColor,this.m_theme.clearAlpha=e.clearAlpha,r.updateClearColor(e.clearColor,e.clearAlpha),this.m_theme.images=e.images,this.m_theme.imageTextures=e.imageTextures,await this.updateImages(e.images,e.imageTextures),this.m_theme.poiTables=e.poiTables,await this.loadPoiTables(e.poiTables),this.m_theme.textStyles=e.textStyles,this.m_theme.defaultTextStyle=e.defaultTextStyle,this.m_theme.fontCatalogs=e.fontCatalogs,await this.m_mapView.resetTextRenderer(e.fontCatalogs,e.textStyles,e.defaultTextStyle),Array.isArray(e.priorities)&&(this.m_theme.priorities=e.priorities),this.m_mapView.mapAnchors.setPriorities(null!==(t=e.priorities)&&void 0!==t?t:[]),Array.isArray(e.labelPriorities)&&(this.m_theme.labelPriorities=e.labelPriorities),void 0===this.m_theme.styles&&(this.m_theme.styles={}),this.m_theme.styles=null!==(n=e.styles)&&void 0!==n?n:{},this.m_theme.definitions=e.definitions,r.clearBackgroundDataSource();for(const i of this.m_mapView.dataSources)await i.setTheme(this.m_theme)}updateCache(){this.updateImages(this.m_theme.images,this.m_theme.imageTextures),this.m_mapView.sceneEnvironment.updateLighting(this.m_theme.lights),this.m_mapView.sceneEnvironment.updateSkyBackground(this.m_theme.sky,this.m_theme.clearColor)}get imageCache(){return this.m_imageCache}dispose(){this.m_imageCache.clear()}async loadPoiTables(e){this.m_mapView.poiTableManager.clear(),await this.m_mapView.poiTableManager.loadPoiTables(e)}cancelThemeUpdate(){for(var e=0;e<this.m_abortControllers.length;e++)this.m_abortControllers[e].abort();this.m_abortControllers=[],this.m_imageCache.clear(),this.m_mapView.poiManager.clear(),this.m_mapView.poiTableManager.clear()}createAbortController(){return this.m_abortControllers.push(new AbortController),this.m_abortControllers[this.m_abortControllers.length-1]}async updateImages(e,t){if(this.m_imageCache.clear(),this.m_mapView.poiManager.clear(),void 0!==e)for(const n of Object.keys(e)){const t=e[n];this.m_imageCache.addImage(n,t.url,!0===t.preload),"string"===typeof t.atlas&&await this.m_mapView.poiManager.addTextureAtlas(n,t.atlas,this.createAbortController().signal)}void 0!==t&&t.forEach((e=>{this.m_mapView.poiManager.addImageTexture(e)}))}}},60179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathBlockingElement=void 0;const r=n(534);t.PathBlockingElement=class{constructor(e){this.points=e,this.screenSpaceLines=new Array(e.length>=2?e.length-1:0);for(let t=0;t<this.screenSpaceLines.length;t++)this.screenSpaceLines[t]=new r.Line3(new r.Vector3,new r.Vector3)}}},92980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PickHandler=t.PickObjectType=void 0;const r=n(26309),i=n(31201),o=n(534),a=n(12918),s=n(34436),l=n(77569),c=n(61563);var u;!function(e){e[e.Unspecified=0]="Unspecified",e[e.Point=1]="Point",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.Text=4]="Text",e[e.Icon=5]="Icon",e[e.Object3D=6]="Object3D"}(u=t.PickObjectType||(t.PickObjectType={}));const h=new o.Vector3,d=new i.OrientedBox3;function p(e,t,n,r,i){for(const o of e.dependencies){const a=o.mortonCode();if(r.has(a))continue;r.add(a);const s=i.visibleTileSet.getCachedTile(e.dataSource,o,e.offset,i.frameNumber);void 0!==s&&n.intersectObjects(s.objects,!0,t)}}t.PickHandler=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mapView=e,this.camera=t,this.enablePickTechnique=n,this.m_pickingRaycaster=new s.PickingRaycaster(e.renderer.getSize(new o.Vector2))}intersectMapObjects(e,t,n){const r=this.mapView.getNormalizedScreenCoordinates(e,t),i=this.setupRaycaster(e,t),a=new l.PickListener(n);if(void 0!==this.mapView.textElementsRenderer){const{clientWidth:e,clientHeight:t}=this.mapView.canvas,n=r.x*e*.5,i=r.y*t*.5,s=new o.Vector2(n,i);this.mapView.textElementsRenderer.pickTextElements(s,a)}const s=[],c=this.getIntersectedTiles(i),u=new Set;for(const{tile:o,distance:l}of c){if(a.done&&a.furthestResult.distance<l)break;s.length=0,i.intersectObjects(o.objects,!0,s),p(o,s,i,u,this.mapView);for(const e of s)a.addResult(this.createResult(e,o))}s.length=0;for(const o of this.mapView.mapAnchors.children){i.intersectObject(o,!0,s);for(const e of s)a.addResult(this.createResult(e))}return a.finish(),a.results}raycasterFromScreenPoint(e,t){return this.m_pickingRaycaster.setFromCamera(this.mapView.getNormalizedScreenCoordinates(e,t),this.camera),this.mapView.renderer.getSize(this.m_pickingRaycaster.canvasSize),this.m_pickingRaycaster}createResult(e,t){var n,i,o;const a={type:u.Unspecified,point:e.point,distance:e.distance,dataSourceName:null===(n=e.object.userData)||void 0===n?void 0:n.dataSource,dataSourceOrder:null===(i=null===t||void 0===t?void 0:t.dataSource)||void 0===i?void 0:i.dataSourceOrder,intersection:e,tileKey:null===t||void 0===t?void 0:t.tileKey};if(void 0===e.object.userData||void 0===e.object.userData.feature)return a;this.enablePickTechnique&&(a.technique=e.object.userData.technique),a.renderOrder=null===(o=e.object)||void 0===o?void 0:o.renderOrder;const s=e.object.userData.feature;if(this.addObjInfo(s,e,a),a.userData){const e=r.getFeatureId(a.userData);a.featureId=0===e?void 0:e}let l;switch(s.geometryType){case r.GeometryType.Point:case r.GeometryType.Text:l=u.Point;break;case r.GeometryType.Line:case r.GeometryType.ExtrudedLine:case r.GeometryType.SolidLine:case r.GeometryType.TextPath:l=u.Line;break;case r.GeometryType.Polygon:case r.GeometryType.ExtrudedPolygon:l=u.Area;break;case r.GeometryType.Object3D:l=u.Object3D;break;default:l=u.Unspecified}return a.type=l,a}getIntersectedTiles(e){const t=new Array;return this.mapView.visibleTileSet.dataSourceTileList.forEach((n=>{n.dataSource.enablePicking&&n.renderedTiles.forEach((n=>{d.copy(n.boundingBox),d.position.sub(this.mapView.worldCenter);const r=n.computeWorldOffsetX();d.position.x+=r;const i=d.intersectsRay(e.ray);void 0!==i&&t.push({tile:n,distance:i})}))})),t.sort(((e,t)=>e.distance-t.distance)),t}addObjInfo(e,t,n){if(void 0===e.objInfos)return;if(n.intersection.object instanceof a.MapViewPoints)return void(n.userData=e.objInfos[t.index]);if(void 0===e.starts||0===e.starts.length||"number"!==typeof t.faceIndex&&void 0===t.index)return void(1===e.objInfos.length&&(n.userData=e.objInfos[0]));if(1===e.starts.length)return void(n.userData=e.objInfos[0]);const r="number"===typeof t.faceIndex?3*t.faceIndex:t.index;let i=0;for(const o of e.starts){if(o>r)break;i++}n.userData=e.objInfos[i-1]}setupRaycaster(e,t){const n=this.mapView.camera,r=this.raycasterFromScreenPoint(e,t),i=this.mapView.getWorldPositionAt(e,t,!0),o=n.position.distanceTo(i)/this.mapView.camera.getWorldDirection(h).dot(r.ray.direction);return r.params.Line.threshold=c.MapViewUtils.calculateWorldSizeByFocalLength(this.mapView.focalLength,o,1),r}}},77569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PickListener=void 0;const r=n(15739);function i(e,t){var n,r;const i=null!==(n=e.dataSourceOrder)&&void 0!==n?n:0,o=null!==(r=t.dataSourceOrder)&&void 0!==r?r:0;if(i!==o)return o-i;const a=e.distance-t.distance,s=void 0!==e.renderOrder&&void 0!==t.renderOrder;return Math.abs(a)>1e-4||!s?a:t.renderOrder-e.renderOrder}t.PickListener=class{constructor(e){this.m_parameters=e,this.m_results=[],this.m_sorted=!0,this.m_finished=!0}addResult(e){const t=this.m_results.findIndex((t=>{var n,r,i,o;const a=t.type===e.type,s=null===(r=null===(n=e.intersection)||void 0===n?void 0:n.object.userData)||void 0===r?void 0:r.dataSource,l=s&&(null===(o=null===(i=t.intersection)||void 0===i?void 0:i.object.userData)||void 0===o?void 0:o.dataSource)===s,c=void 0!==e.featureId&&t.featureId===e.featureId,u=void 0===e.featureId&&void 0===t.featureId,h=e.userData&&t.userData===e.userData;return a&&l&&(c||u&&h)}));if(t<0)return this.m_sorted=!1,this.m_finished=!1,void this.m_results.push(e);const n=this.m_results[t];i(e,n)<0&&(this.m_results[t]=e,this.m_sorted=!1,this.m_finished=!1)}get done(){return!!this.maxResults&&this.m_results.length>=this.maxResults}finish(){this.sortResults(),this.maxResults&&this.m_results.length>this.maxResults&&(this.m_results.length=this.maxResults),this.m_finished=!0}get results(){return r.assert(this.m_finished,"finish() was not called before getting the results"),this.m_results}get closestResult(){return this.sortResults(),this.m_results.length>0?this.m_results[0]:void 0}get furthestResult(){return this.sortResults(),this.m_results.length>0?this.m_results[this.m_results.length-1]:void 0}get maxResults(){var e,t;const n=null!==(t=null===(e=this.m_parameters)||void 0===e?void 0:e.maxResultCount)&&void 0!==t?t:0;return n>0?n:void 0}sortResults(){if(this.m_sorted)return;const e=[],t=[];this.m_results.sort(i).forEach((n=>(0===n.distance?e:t).push(n))),this.m_results=e.concat(t),this.m_sorted=!0}}},34436:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PickingRaycaster=void 0;const r=n(534),i=n(87213);function o(e,t,n,r){if(e.layers.test(t.layers)&&e.visible){const r=i.MapObjectAdapter.get(e);r&&!r.isPickable()||e.raycast(t,n)}if(!0===r)for(const i of e.children)o(i,t,n,!0)}class a extends r.Raycaster{constructor(e){super(),this.canvasSize=e}intersectObject(e,t,n){const r=null!==n&&void 0!==n?n:[];return o(e,this,r,t),r}intersectObjects(e,t,n){const r=null!==n&&void 0!==n?n:[];for(const i of e)o(i,this,r,t);return r}}t.PickingRaycaster=a},80057:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneViewBounds=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(61563);t.PlaneViewBounds=class{constructor(e,t,n){this.camera=e,this.projection=t,this.m_options=n,this.m_groundPlaneNormal=new o.Vector3(0,0,1),this.m_groundPlane=new o.Plane(this.m_groundPlaneNormal.clone()),i.assert(t.type===r.ProjectionType.Planar)}generate(){const e=[];if(this.addCanvasCornerIntersection(e),4===e.length)return this.createPolygon(e);this.addHorizonIntersection(e);const t=(new o.Frustum).setFromProjectionMatrix((new o.Matrix4).multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse)),n=this.getWorldConers(this.projection);if(this.m_options.tileWrappingEnabled||[n.ne,n.nw,n.se,n.sw].forEach((n=>{this.addPointInFrustum(n,t,e)})),this.m_options.tileWrappingEnabled){const r=(new o.Vector3).subVectors(n.sw,n.se).normalize(),i=(new o.Vector3).subVectors(n.se,n.sw).normalize();[new o.Ray(n.se,r),new o.Ray(n.se,i),new o.Ray(n.ne,r),new o.Ray(n.ne,i)].forEach((n=>{this.addFrustumIntersection(n,t,e)}))}else[new o.Line3(n.sw,n.se),new o.Line3(n.ne,n.nw),new o.Line3(n.se,n.ne),new o.Line3(n.nw,n.sw)].forEach((n=>{this.addFrustumIntersection(n,t,e)}));return this.createPolygon(e)}createPolygon(e){if(e.length>2)return new r.GeoPolygon(e,!0)}getWorldConers(e){const t=e.worldExtent(0,0);return{sw:t.min,se:new o.Vector3(t.max.x,t.min.y,0),nw:new o.Vector3(t.min.x,t.max.y,0),ne:t.max}}addNDCRayIntersection(e,t){e.forEach((e=>{const n=a.MapViewUtils.rayCastWorldCoordinates({camera:this.camera,projection:this.projection},e[0],e[1]);n&&this.validateAndAddToGeoPolygon(n,t)}))}addHorizonIntersection(e){const t=this.getVerticalHorizonPositionInNDC();t&&this.addNDCRayIntersection([[-1,t],[1,t]],e)}addCanvasCornerIntersection(e){this.addNDCRayIntersection([[-1,-1],[1,-1],[1,1],[-1,1]],e)}validateAndAddToGeoPolygon(e,t){this.isInVisibleMap(e)&&t.push(this.projection.unprojectPoint(e))}isInVisibleMap(e){return!(e.y<0||e.y>r.EarthConstants.EQUATORIAL_CIRCUMFERENCE)&&!(!this.m_options.tileWrappingEnabled&&(e.x<0||e.x>r.EarthConstants.EQUATORIAL_CIRCUMFERENCE))}addPointInFrustum(e,t,n){if(t.containsPoint(e)){const t=this.projection.unprojectPoint(e);t.altitude=0,n.push(t)}}addFrustumIntersection(e,t,n){t.planes.forEach((t=>{let r=null;const i=new o.Vector3;if(e instanceof o.Ray&&e.intersectsPlane(t)?r=e.intersectPlane(t,i):e instanceof o.Line3&&t.intersectsLine(e)&&(r=t.intersectLine(e,i)),r&&a.MapViewUtils.closeToFrustum(r,this.camera)){const e=this.projection.unprojectPoint(r);e.altitude=0,n.push(e)}}))}getVerticalHorizonPositionInNDC(){const e=new o.Vector3(-1,-1,1).unproject(this.camera).add(new o.Vector3(1,-1,1).unproject(this.camera)).multiplyScalar(.5),t=new o.Vector3(-1,1,1).unproject(this.camera).add(new o.Vector3(1,1,1).unproject(this.camera)).multiplyScalar(.5),n=new o.Line3(e,t),r=new o.Vector3;if(this.m_groundPlane.intersectLine(n,r))return r.project(this.camera).y}}},13412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolarTileDataSource=void 0;const r=n(26309),i=n(97489),o=n(31201),a=n(534),s=n(87378),l=n(47857),c=n(87213),u=n(30081),h=n(67247);class d extends s.DataSource{constructor(e){let{name:t="polar",styleSetName:n="polar",minDataLevel:r,maxDataLevel:i,minDisplayLevel:s,maxDisplayLevel:l,storageLevelOffset:c=-2,geometryLevelOffset:u=1,debugTiles:h=!1}=e;super({name:t,styleSetName:n,minDataLevel:r,maxDataLevel:i,minDisplayLevel:s,maxDisplayLevel:l,storageLevelOffset:c}),this.m_tilingScheme=o.polarTilingScheme,this.m_maxLatitude=a.MathUtils.radToDeg(o.MercatorConstants.MAXIMUM_LATITUDE),this.m_geometryLevelOffset=u,this.m_debugTiles=h,this.cacheable=!1,this.enablePicking=!1}dispose(){this.m_northPoleEntry&&(this.m_northPoleEntry.material.dispose(),delete this.m_northPoleEntry),this.m_southPoleEntry&&(this.m_southPoleEntry.material.dispose(),delete this.m_southPoleEntry),this.m_styleSetEvaluator&&delete this.m_styleSetEvaluator}createTechiqueEntry(e){if(!this.m_styleSetEvaluator)return;const t=new i.MapEnv({$geometryType:"polygon",$layer:"earth",kind:e}),n=this.m_styleSetEvaluator.getMatchingTechniques(t);if(0===n.length)return;const r=n[0],o=l.createMaterial(this.mapView.renderer.capabilities,{technique:r,env:this.mapView.env});return o?{material:o,technique:r}:void 0}async setTheme(e){let t;e=await u.ThemeLoader.load(e),void 0!==this.styleSetName&&void 0!==e.styles&&(t=e.styles[this.styleSetName]),this.m_styleSetEvaluator=new i.StyleSetEvaluator({styleSet:null!==t&&void 0!==t?t:[],definitions:e.definitions,priorities:e.priorities,labelPriorities:e.labelPriorities}),this.m_northPoleEntry=this.createTechiqueEntry("north_pole"),this.m_southPoleEntry=this.createTechiqueEntry("south_pole"),this.mapView.markTilesDirty(this)}canGetTile(e,t){if(e!==t.level||t.level<1)return!1;const{north:n,south:r}=this.m_tilingScheme.getGeoBox(t);return n>this.m_maxLatitude||r<-this.m_maxLatitude}shouldSubdivide(e,t){if(e<=t.level)return!1;const{north:n,south:r}=this.m_tilingScheme.getGeoBox(t);return n>this.m_maxLatitude||r<-this.m_maxLatitude}getTilingScheme(){return this.m_tilingScheme}getTile(e){const t=new h.Tile(this,e);return this.createTileGeometry(t),t}get geometryLevelOffset(){return this.m_geometryLevelOffset}set geometryLevelOffset(e){this.m_geometryLevelOffset=e}intersectEdge(e,t,n){const r=t.latitude,i=n.latitude;let a=t.longitude,s=n.longitude;90===Math.abs(r)&&(a=s),90===Math.abs(i)&&(s=a);const l=s-a,c=(e-r)/(i-r);return new o.GeoCoordinates(e,a+l*c,0)}createTileGeometry(e){const{north:t,south:n}=e.geoBox,i=t>0&&n>=0,s=i?this.m_northPoleEntry:this.m_southPoleEntry;if(void 0===s)return void e.forceHasGeometry(!0);const l=this.m_tilingScheme.projection,u=this.projection,h=this.m_maxLatitude,d=i?h:-h,p=this.m_tilingScheme.boundingBoxGenerator.getWorldBox(e.tileKey),m=l.unprojectPoint(new a.Vector3(p.min.x,p.min.y,0)),f=l.unprojectPoint(new a.Vector3(p.max.x,p.min.y,0)),g=l.unprojectPoint(new a.Vector3(p.max.x,p.max.y,0)),v=l.unprojectPoint(new a.Vector3(p.min.x,p.max.y,0));let y,_=!1;if(1===e.tileKey.level){const e=0===p.min.x,t=e?p.max.x:p.min.x,n=(p.max.y+p.min.y)/2,r=l.unprojectPoint(new a.Vector3(t,n,0)),o=e?m:f;y=i?e?[r,g,o,f]:[r,m,o,v]:e?[r,f,o,g]:[r,v,o,m],_=!0}else{y=i?[m,f,g,v]:[m,v,g,f];const e=y.map((e=>e.latitude)),t=Math.max(...e),n=Math.min(...e);if(i?t<d:n>d)return;if(_=i?n<d:t>d,_){const r=e.indexOf(i?t:n);if(0!==r)for(let e=0;e<r;e++)y.push(y.shift())}}if(_){const t=(p.min.x+p.max.x)/2,n=(p.min.y+p.max.y)/2,r=l.unprojectPoint(new a.Vector3(t,n,0));o.TransverseMercatorUtils.alignLongitude(y,r);const i=y[0],s=y[1],c=y[2],u=y[3],m=Math.abs(s.latitude)>=h,f=Math.abs(u.latitude)>=h,g=m?this.intersectEdge(d,s,c):this.intersectEdge(d,i,s),v=f?this.intersectEdge(d,u,c):this.intersectEdge(d,i,u);y.splice(m?2:1,4,g);const _=e.tileKey.level-this.storageLevelOffset+this.m_geometryLevelOffset,x=360/(1<<Math.max(0,_)),b=Math.floor((g.longitude+180)/x),w=Math.ceil((v.longitude+180)/x);for(let e=b+1;e<w;e++)y.push(new o.GeoCoordinates(d,e*x-180,0));y.push(v),f&&y.push(u)}const x=new a.BufferGeometry,b=y.map((t=>{const n=u.projectPoint(t,new a.Vector3);return n.sub(e.center),n}));x.setFromPoints(b);const w=[];for(let r=1;r<b.length-1;r++)i?w.push(0,r,r+1):w.push(0,r+1,r);x.setIndex(w);const S=new a.Mesh(x,s.material);if(S.userData={dataSource:this.name,tileKey:e.tileKey},this.m_debugTiles){const t=Math.round(16777215*Math.abs(Math.sin(11*e.tileKey.mortonCode())));S.material=new a.MeshBasicMaterial({color:t,transparent:!0,opacity:.5}),e.objects.push(new a.Mesh(x,new a.MeshBasicMaterial({color:t,wireframe:!0})))}c.MapObjectAdapter.create(S,{dataSource:this,technique:s.technique,kind:[i?r.StandardGeometryKind.Water:r.StandardGeometryKind.Background]}),e.objects.push(S)}}t.PolarTileDataSource=d},59456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenCollisionsDebug=t.ScreenCollisions=t.isLineWithBound=t.DetailedCollisionBox=t.CollisionBox=void 0;const r=n(15739),i=n(534),o=n(60396),a=n(15950),s=r.LoggerManager.instance.create("ScreenCollissions");class l extends r.Math2D.Box{constructor(e){super(),void 0!==e&&this.copy(e)}copy(e){return e instanceof r.Math2D.Box?this.set(e.x,e.y,e.w,e.h):e instanceof i.Box2?this.set(e.min.x,e.min.y,e.max.x-e.min.x,e.max.y-e.min.y):this.set(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY),this}get minX(){return this.x}set minX(e){this.x=e}get maxX(){return this.x+this.w}set maxX(e){this.w=e-this.x}get minY(){return this.y}set minY(e){this.y=e}get maxY(){return this.y+this.h}set maxY(e){this.h=e-this.y}}t.CollisionBox=l;class c extends l{constructor(e,t){super(e),this.detailBoxes=t}}function u(e){return void 0!==e.line}t.DetailedCollisionBox=c,t.isLineWithBound=u;const h=new l;class d{constructor(){this.screenBounds=new r.Math2D.Box,this.rtree=new a}reset(){this.rtree.clear()}update(e,t){this.screenBounds.set(e/-2,t/-2,e,t),this.reset()}allocate(e){const t=e instanceof l?e:new l(e);this.rtree.insert(t)}allocateIBoxes(e){this.rtree.load(e)}search(e){return this.rtree.search(e)}isAllocated(e){const t=e instanceof l?e:h.copy(e),n=this.search(t);return this.intersectsDetails(t,n)}isVisible(e){return this.screenBounds.intersects(e)}isFullyVisible(e){return this.screenBounds.containsBox(e)}intersectsDetails(e,t){for(const n of t)if(n instanceof c){for(const t of n.detailBoxes)if(t.intersects(e))return!0}else{if(!u(n))return!0;{const t=n;if(this.intersectsLine(e,t))return!0}}return!1}intersectsLine(e,t){const n=t.line,r=n.end.x-n.start.x;let i,o,a,s;if(0!==r){const t=n.end.y-n.start.y,l=t,c=-r,u=n.start.y-t/r*n.start.x;i=Math.sign(e.minX*l+(e.minY-u)*c),o=Math.sign(e.maxX*l+(e.minY-u)*c),a=Math.sign(e.minX*l+(e.maxY-u)*c),s=Math.sign(e.maxX*l+(e.maxY-u)*c)}else i=Math.sign(e.minX-n.start.x),o=Math.sign(e.maxX-n.start.x),a=Math.sign(e.minX-n.start.x),s=Math.sign(e.maxX-n.start.x);return i!==o||i!==a||i!==s}}t.ScreenCollisions=d;t.ScreenCollisionsDebug=class extends d{constructor(e){super(),this.m_renderContext=null,this.m_renderingEnabled=!1,this.m_numAllocations=0,this.m_numSuccessfulTests=0,this.m_numFailedTests=0,this.m_numSuccessfulVisibilityTests=0,this.m_numFailedVisibilityTests=0,void 0!==e&&null!==e&&(this.m_renderContext=e.getContext("2d"))}reset(){super.reset(),this.m_numAllocations=0,this.m_numSuccessfulTests=0,this.m_numFailedTests=0,this.m_numSuccessfulVisibilityTests=0,this.m_numFailedVisibilityTests=0}update(e,t){this.m_renderingEnabled&&s.log(`Allocations: ${this.m_numAllocations} Successful Tests: ${this.m_numSuccessfulTests} Failed Tests: ${this.m_numFailedTests}  Successful Visibility Tests: ${this.m_numSuccessfulVisibilityTests}  Failed Visibility Tests: ${this.m_numFailedVisibilityTests} `),super.update(e,t),null!==this.m_renderContext&&(this.m_renderContext.canvas.width=e,this.m_renderContext.canvas.height=t),this.m_renderingEnabled=o.debugContext.getValue("DEBUG_SCREEN_COLLISIONS")}allocate(e){super.allocate(e),this.m_numAllocations++,this.m_renderingEnabled&&null!==this.m_renderContext&&(this.m_renderContext.strokeStyle="#6666ff",this.m_renderContext.strokeRect(e.x-this.screenBounds.x,this.screenBounds.y+this.screenBounds.h-e.y,e.w,-e.h))}allocateIBoxes(e){for(const t of e)this.m_numAllocations++,this.m_renderingEnabled&&null!==this.m_renderContext&&(this.m_renderContext.strokeStyle="#aa2222",this.m_renderContext.strokeRect(t.minX-this.screenBounds.x,this.screenBounds.y+this.screenBounds.h-t.minY,t.maxX-t.minX,-(t.maxY-t.minY)));super.allocateIBoxes(e)}intersectsDetails(e,t){const n=super.intersectsDetails(e,t);if(this.m_renderingEnabled&&null!==this.m_renderContext){const t=n?2:1;this.m_renderContext.strokeStyle=n?"#FF0000":"#00ff00",this.m_renderContext.strokeRect(e.x-this.screenBounds.x-t,this.screenBounds.y+this.screenBounds.h-e.y+t,e.w+2*t,-e.h-2*t)}return n?this.m_numFailedTests++:this.m_numSuccessfulTests++,n}isVisible(e){const t=super.isVisible(e);return t?this.m_numSuccessfulVisibilityTests++:this.m_numFailedVisibilityTests++,t}}},56396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenProjector=void 0;const r=n(534);function i(e){return e.z>-1&&e.z<1}class o{constructor(e){this.m_camera=e,this.m_width=0,this.m_height=0}get width(){return this.m_width}get height(){return this.m_height}project(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Vector2;const n=this.projectVector(e,o.tempV3);return this.ndcToScreen(n,t)}projectToScreen(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Vector2;const n=this.projectVector(e,o.tempV3);if(i(n))return this.ndcToScreen(n,t)}projectAreaToScreen(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.Vector2;t*=2,n*=2;const s=this.projectVector(e,o.tempV3);if(i(s)&&s.x+t>=-1&&s.x-t<=1&&s.y+n>=-1&&s.y-n<=1)return this.ndcToScreen(s,a)}project3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Vector3;const n=this.projectVector(e,o.tempV3);if(n.z>-1&&n.z<1)return t.set(n.x*this.m_width/2,n.y*this.m_height/2,n.z),t}projectVector(e,t){return t.set(e.x,e.y,e.z).project(this.m_camera),t}onScreen(e){const t=this.projectVector(e,o.tempV3);return(n=t).z>-1&&n.z<1&&n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1;var n}update(e,t,n){this.m_camera=e,this.m_width=t,this.m_height=n}ndcToScreen(e,t){return t.set(e.x*this.m_width/2,e.y*this.m_height/2)}}t.ScreenProjector=o,o.tempV2=new r.Vector2,o.tempV3=new r.Vector3},97229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBackground=void 0;const r=n(37958),i=n(65819);t.SkyBackground=class{constructor(e,t,n){switch(this.m_sky=e,this.m_projectionType=t,this.m_sky.type){case"gradient":this.m_skyTexture=new i.SkyGradientTexture(this.m_sky,this.m_projectionType),this.updateCamera(n);break;case"cubemap":this.m_skyTexture=new r.SkyCubemapTexture(this.m_sky)}}dispose(){this.m_skyTexture.dispose()}get texture(){return this.m_skyTexture.texture}updateCamera(e){"gradient"===this.m_sky.type&&this.m_skyTexture.update(e)}updateTexture(e,t){const n=this.m_sky.type===e.type&&this.m_projectionType===t;switch(e.type){case"gradient":n?this.m_skyTexture.updateTexture(e):this.m_skyTexture=new i.SkyGradientTexture(e,t);break;case"cubemap":n?this.m_skyTexture.updateTexture(e):this.m_skyTexture=new r.SkyCubemapTexture(e)}this.m_projectionType=t,this.m_sky=e}}},37958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkyCubemapTexture=t.SkyCubemapFaceId=t.SKY_CUBEMAP_FACE_COUNT=void 0;const r=n(15739),i=n(534),o=r.LoggerManager.instance.create("SkyCubemapTexture");var a;t.SKY_CUBEMAP_FACE_COUNT=6,function(e){e[e.positiveX=0]="positiveX",e[e.negativeX=1]="negativeX",e[e.positiveY=2]="positiveY",e[e.negativeY=3]="negativeY",e[e.positiveZ=4]="positiveZ",e[e.negativeZ=5]="negativeZ"}(a=t.SkyCubemapFaceId||(t.SkyCubemapFaceId={}));t.SkyCubemapTexture=class{constructor(e){const t=this.createCubemapFaceArray(e);this.m_skybox=void 0!==t?(new i.CubeTextureLoader).load(t):new i.CubeTexture}dispose(){this.m_skybox.dispose()}get texture(){return this.m_skybox}updateTexture(e){const t=this.createCubemapFaceArray(e);void 0!==t&&(this.m_skybox=(new i.CubeTextureLoader).load(t))}createCubemapFaceArray(e){const n=[void 0,void 0,void 0,void 0,void 0,void 0];for(let r=0;r<t.SKY_CUBEMAP_FACE_COUNT;++r){const t=e[a[r]];if(void 0===t)return void o.error(`Face "${a[r]}" was not defined.`);n[r]=t}return n}}},65819:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkyGradientTexture=t.DEFAULT_MONOMIAL_POWER=t.DEFAULT_TEXTURE_SIZE=void 0;const r=n(31201),i=n(15739),o=n(534);t.DEFAULT_TEXTURE_SIZE=512,t.DEFAULT_MONOMIAL_POWER=1;const a=[new o.Vector3(1,0,0),new o.Vector3(-1,0,0),new o.Vector3(0,-1,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(0,0,-1)],s=[new o.Vector3(0,0,-1),new o.Vector3(0,0,1),new o.Vector3(1,0,0),new o.Vector3(1,0,0),new o.Vector3(1,0,0),new o.Vector3(-1,0,0)],l=[new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(0,0,-1),new o.Vector3(0,1,0),new o.Vector3(0,1,0)];t.SkyGradientTexture=class{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_TEXTURE_SIZE;this.m_projectionType=n,this.m_height=i;const a=new o.Color(e.topColor),s=new o.Color(e.bottomColor),l=new o.Color(e.groundColor);this.m_width=this.m_projectionType===r.ProjectionType.Planar?1:this.m_height,this.m_faceCount=this.m_projectionType===r.ProjectionType.Planar?1:6,this.m_faces=[];for(let t=0;t<this.m_faceCount;++t){const n=new Uint8Array(3*this.m_width*this.m_height);this.fillTextureData(n,t,a,s,l,e.monomialPower);const r=new o.DataTexture(n,this.m_width,this.m_height,o.RGBFormat);r.needsUpdate=!0,r.unpackAlignment=1,this.m_faces.push(r)}this.m_projectionType===r.ProjectionType.Spherical?(this.m_skybox=new o.CubeTexture(this.m_faces),this.m_skybox.needsUpdate=!0):(this.m_farClipPlaneDividedVertically=new o.Line3,this.m_groundPlane=new o.Plane(new o.Vector3(0,0,1)),this.m_bottomMidFarPoint=new o.Vector3,this.m_topMidFarPoint=new o.Vector3,this.m_horizonPosition=new o.Vector3,this.m_farClipPlaneCorners=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3])}dispose(){for(let e=0;e<this.m_faceCount;++e)this.m_faces[e].dispose();this.m_projectionType===r.ProjectionType.Spherical&&this.m_skybox.dispose()}get texture(){return this.m_projectionType===r.ProjectionType.Planar?this.m_faces[0]:this.m_skybox}update(e){this.m_projectionType===r.ProjectionType.Planar&&(this.setHorizonPosition(e),this.updateTexturePosition())}updateTexture(e){for(let t=0;t<this.m_faceCount;++t)this.fillTextureData(this.m_faces[t].image.data,t,new o.Color(e.topColor),new o.Color(e.bottomColor),new o.Color(e.groundColor),e.monomialPower),this.m_faces[t].needsUpdate=!0;this.m_projectionType===r.ProjectionType.Spherical&&(this.m_skybox.needsUpdate=!0)}fillTextureData(e,n,c,u,h,d){const p=new o.Color,m=new o.Vector3,f=new o.Vector3,g=new o.Vector3,v=new o.Vector3(0,0,1);for(let o=0;o<this.m_height;++o)for(let y=0;y<this.m_width;++y){if(this.m_projectionType===r.ProjectionType.Spherical){const e=f.copy(s[n]).multiplyScalar((y+.5)/this.m_width*2-1),r=g.copy(l[n]).multiplyScalar((o+.5)/this.m_height*2-1);m.copy(a[n]).add(e).add(r).normalize();const _=Math.max(v.dot(m),0);p.copy(h).lerp(u,Math.min(100*_,1)).lerp(c,_**i.getOptionValue(d,t.DEFAULT_MONOMIAL_POWER)).multiplyScalar(255)}else{const e=o/this.m_height;0===o?p.copy(h).multiplyScalar(255):p.copy(u).lerp(c,e**i.getOptionValue(d,t.DEFAULT_MONOMIAL_POWER)).multiplyScalar(255)}e[o*this.m_width*3+3*y]=p.r,e[o*this.m_width*3+3*y+1]=p.g,e[o*this.m_width*3+3*y+2]=p.b}}setHorizonPosition(e){this.m_farClipPlaneCorners[0].set(-1,-1,1).unproject(e),this.m_farClipPlaneCorners[1].set(1,-1,1).unproject(e),this.m_farClipPlaneCorners[2].set(-1,1,1).unproject(e),this.m_farClipPlaneCorners[3].set(1,1,1).unproject(e),this.m_bottomMidFarPoint.copy(this.m_farClipPlaneCorners[0]).add(this.m_farClipPlaneCorners[1]).multiplyScalar(.5),this.m_topMidFarPoint.copy(this.m_farClipPlaneCorners[2]).add(this.m_farClipPlaneCorners[3]).multiplyScalar(.5),this.m_farClipPlaneDividedVertically.set(this.m_bottomMidFarPoint,this.m_topMidFarPoint);this.m_groundPlane.intersectLine(this.m_farClipPlaneDividedVertically,this.m_horizonPosition)||this.m_horizonPosition.set(0,0,0)}updateTexturePosition(){const e=this.m_bottomMidFarPoint.distanceTo(this.m_horizonPosition)/this.m_farClipPlaneDividedVertically.distance(),t=0===this.m_horizonPosition.length()?1:e-2/this.m_height;this.m_faces[0].offset.set(0,this.m_bottomMidFarPoint.z<=0?-t:e)}}},13508:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphereHorizon=t.previousCanvasSide=t.nextCanvasSide=t.CanvasSide=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(64172),s=n(61563),l=2*Math.PI;var c;function u(e){return(e+1)%4}!function(e){e[e.Bottom=0]="Bottom",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Left=3]="Left"}(c=t.CanvasSide||(t.CanvasSide={})),t.nextCanvasSide=u,t.previousCanvasSide=function(e){return(e+3)%4};t.SphereHorizon=class{constructor(e,t){this.m_camera=e,this.m_cornerIntersects=t,this.m_intersections=[],this.m_isFullyVisible=!0;const n=r.EarthConstants.EQUATORIAL_RADIUS*r.EarthConstants.EQUATORIAL_RADIUS,i=(new o.Vector3).setFromMatrixColumn(e.matrixWorld,0).normalize(),a=e.position.clone().normalize(),l=(new o.Vector3).crossVectors(a,i),c=e.position.length();this.m_normalToTangentAngle=Math.asin(r.EarthConstants.EQUATORIAL_RADIUS/c);const u=Math.sqrt(c*c-n);this.m_distanceToHorizonCenter=u*Math.cos(this.m_normalToTangentAngle);const h=c-this.m_distanceToHorizonCenter;this.m_radius=Math.sqrt(n-h*h),this.m_cameraPitch=s.MapViewUtils.extractAttitude({projection:r.sphereProjection},this.m_camera).pitch;const d=(new o.Vector3).copy(a).setLength(h);this.m_matrix=(new o.Matrix4).makeBasis(i,l,a).setPosition(d),this.computeIntersections()}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.Vector3;const i=t*l,a=i+e*((n>=t?n*l:(n+1)*l)-i);return r.set(this.m_radius*Math.cos(a),this.m_radius*Math.sin(a),0),r.applyMatrix4(this.m_matrix),r}getDivisionPoints(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const i=Math.max(Math.ceil(((n<t?1+n:n)-t)*r),1);for(let o=0;o<i;o++)e(this.getPoint(o/i,t,n))}get isFullyVisible(){return this.m_isFullyVisible}getSideIntersections(e){return this.m_intersections[e]}isTangentVisible(e){switch(e){case c.Top:{const e=this.m_normalToTangentAngle-this.m_cameraPitch;return a.CameraUtils.getTopFov(this.m_camera)>=Math.abs(e)}case c.Bottom:{const e=this.m_normalToTangentAngle+this.m_cameraPitch;return a.CameraUtils.getBottomFov(this.m_camera)>=Math.abs(e)}case c.Left:{const e=this.m_normalToTangentAngle;return a.CameraUtils.getLeftFov(this.m_camera)>=Math.abs(e)&&this.m_cameraPitch<=a.CameraUtils.getBottomFov(this.m_camera)}case c.Right:{const e=this.m_normalToTangentAngle;return a.CameraUtils.getRightFov(this.m_camera)>=Math.abs(e)&&this.m_cameraPitch<=a.CameraUtils.getBottomFov(this.m_camera)}}}getTangentOnSide(e){switch(e){case c.Bottom:return.75;case c.Right:return 0;case c.Top:return.25;case c.Left:return.5}}computeIntersections(){const e=this.m_distanceToHorizonCenter*Math.tan(this.m_cameraPitch-a.CameraUtils.getBottomFov(this.m_camera));let t,n;for(let r=c.Bottom;r<4;r++){if(this.isTangentVisible(r)){this.m_intersections.push([this.getTangentOnSide(r)]);continue}const i=new Array;switch(this.m_isFullyVisible=!1,r){case c.Bottom:i.push(...this.computeTBIntersections(e));break;case c.Right:{const r=a.CameraUtils.getRightFov(this.m_camera),o=this.computeLRIntersections(e,r);o&&([t,n]=o,i.push(void 0!==n?1+n:void 0,t));break}case c.Top:{const e=this.m_distanceToHorizonCenter*Math.tan(this.m_cameraPitch+a.CameraUtils.getTopFov(this.m_camera));i.push(...this.computeTBIntersections(e).reverse());break}case c.Left:{const r=a.CameraUtils.getLeftFov(this.m_camera);if(r===a.CameraUtils.getRightFov(this.m_camera))i.push(void 0!==t?.5-t:void 0,void 0!==n?.5-n:void 0);else{const t=this.computeLRIntersections(e,r);t&&i.push(.5-t[0],void 0!==t[1]?.5-t[1]:void 0)}break}}const o=[this.m_cornerIntersects[r],this.m_cornerIntersects[u(r)]];this.m_intersections.push(i.filter(((e,t)=>void 0!==e&&!o[t])))}}computeTBIntersections(e){const t=this.m_radius*this.m_radius,n=Math.sqrt(t-e*e),r=Math.atan2(e,n)/l;return[.5-r,r>0?r:1+r]}computeLRIntersections(e,t){const n=this.m_distanceToHorizonCenter/Math.cos(this.m_cameraPitch),r=this.m_distanceToHorizonCenter*Math.tan(this.m_cameraPitch),o=n*Math.tan(t),s=a.CameraUtils.getBottomFov(this.m_camera),c=o*(this.m_distanceToHorizonCenter*Math.cos(s)/Math.cos(this.m_cameraPitch-s))/n,u=i.Math2D.intersectLineAndCircle(c,e,o,r,this.m_radius);if(!u)return;const h=u.y1;return[Math.atan2(h,u.x1)/l,-h>=e&&void 0!==u.x2?Math.atan2(u.y2,u.x2)/l:void 0]}}},32344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SphereViewBounds=t.computeEdgeDivisions=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(13508),s=n(61563);function l(e,t){const n=Math.abs(t.latitude-e.latitude),r=e.minLongitudeSpanTo(t);return Math.ceil(Math.max(n/20,r/5))}t.computeEdgeDivisions=l;const c=[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}];t.SphereViewBounds=class{constructor(e,t){this.camera=e,this.projection=t,i.assert(t.type===r.ProjectionType.Spherical)}generate(){const e=this.findBoundsIntersections();return this.wrapAroundPoles(e),e.length>2?new r.GeoPolygon(e,!1,!0):void 0}addSideSegmentSubdivisions(e,t,n,r,i){e.push(r);const a=l(r,i);if(a<=1)return;const c=new o.Vector2(n.x-t.x,n.y-t.y).multiplyScalar(1/a),u=new o.Vector2(t.x,t.y);for(let o=0;o<a-1;o++){u.add(c);const t=s.MapViewUtils.rayCastWorldCoordinates({camera:this.camera,projection:this.projection},u.x,u.y);t&&e.push(this.projection.unprojectPoint(t))}}addSideIntersections(e,t,n,r,o){const s=c[t],l=c[a.nextCanvasSide(t)];if(n&&r)return void this.addSideSegmentSubdivisions(e,s,l,n,r);if(!o)return;const u=o.getSideIntersections(t);if(0!==u.length){if(n){const t=o.getPoint(u[u.length-1]),r=this.projection.unprojectPoint(t);this.addSideSegmentSubdivisions(e,s,t.project(this.camera),n,r)}else{const n=a.previousCanvasSide(t);let r=o.getSideIntersections(n);0===r.length&&(r=o.getSideIntersections(a.previousCanvasSide(n))),i.assert(r.length>0),o.getDivisionPoints((t=>{e.push(this.projection.unprojectPoint(t))}),r[r.length-1],u[0])}if(u.length>1){const t=o.getPoint(u[0]),n=o.getPoint(u[1]),r=this.projection.unprojectPoint(t),i=this.projection.unprojectPoint(n);this.addSideSegmentSubdivisions(e,t.project(this.camera),n.project(this.camera),r,i)}if(r){const t=o.getPoint(u[0]),n=this.projection.unprojectPoint(t);this.addSideSegmentSubdivisions(e,t.project(this.camera),l,n,r)}}}findBoundsIntersections(){const e=[],[t,n]=this.addCanvasCornerIntersection(),r=n<4?new a.SphereHorizon(this.camera,t.map((e=>void 0!==e))):void 0;if(0===n&&r.isFullyVisible)return r.getDivisionPoints((t=>{e.push(this.projection.unprojectPoint(t))})),e;for(let i=a.CanvasSide.Bottom;i<4;i++){const n=t[i],o=t[a.nextCanvasSide(i)];this.addSideIntersections(e,i,n,o,r)}return e}wrapAroundPoles(e){const t=new o.Vector3(0,0,r.EarthConstants.EQUATORIAL_RADIUS),n=new o.Vector3(0,0,-r.EarthConstants.EQUATORIAL_RADIUS),i=s.MapViewUtils.closeToFrustum(t,this.camera),a=s.MapViewUtils.closeToFrustum(n,this.camera);if(!i&&!a)return;const l=this.projection.unprojectPoint(this.camera.position).lng,c=i?90:-90,u=i?l+180:l-180,h=new r.GeoCoordinates(c,u),d=h.normalized(),p=d.lng;let m=e[e.length-1].lng,f=!1;const g=e.findIndex((e=>{const t=r.isAntimeridianCrossing(m,e.lng);return Math.sign(p-e.lng)===Math.sign(p-m)===t?(f=t,!0):(m=e.lng,!1)}));if(g<0)return;const v=i?90:-90,y=i?1e-5:-1e-5,_=new r.GeoCoordinates(c,l+v).normalized(),x=new r.GeoCoordinates(c,l).normalized(),b=new r.GeoCoordinates(c,l-v).normalized(),w=new r.GeoCoordinates(c,u+y).normalized(),S=e[(g+e.length-1)%e.length],M=e[g];let E=r.GeoCoordinates.lerp(S,M,.01,f);f&&i?E.longitude-=360:E=E.normalized(),e.splice(g,0,u<-180?h:d,_,x,b,w,E)}addCanvasCornerIntersection(){const e=new Array;let t=0;return c.forEach((n=>{const r=s.MapViewUtils.rayCastWorldCoordinates({camera:this.camera,projection:this.projection},n.x,n.y);r?(e.push(this.projection.unprojectPoint(r)),++t):e.push(void 0)})),[e,t]}}},91422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceStatistics=t.FrameStatsArray=t.FrameStats=t.Statistics=t.MultiStageTimer=t.computeArrayAverage=t.computeArrayStats=t.SampledTimer=t.SimpleTimer=t.RingBuffer=void 0;const r=n(15739),i=r.LoggerManager.instance.create("Statistics");class o{constructor(e){this.capacity=e,this.buffer=new Array(e),this.capacity=e,this.head=this.tail=this.size=0}clear(){this.head=this.tail=this.size=0}enqOne(e){let t=this.head+1;t>=this.capacity&&(t=0),this.size<this.capacity&&this.size++,this.buffer[this.head]=e,this.head=t,this.size===this.capacity&&(this.tail=this.head)}enq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)this.enqOne(r)}deq(){if(0===this.size)throw new Error("Ringbuffer underrun");const e=this.buffer[this.tail];let t=this.tail+1;return t>=this.capacity&&(t=0),this.size>0&&this.size--,this.tail=t,e}get top(){if(0===this.size)throw new Error("Ringbuffer underrun");return this.buffer[this.tail]}get bottom(){if(0===this.size)throw new Error("Ringbuffer underrun");let e=this.head-1;return e<0&&(e=this.capacity-1),this.buffer[e]}iterator(){return new o.Iterator(this)}asArray(){const e=new Array;for(let t=0;t<this.size;t++)e.push(this.buffer[(this.tail+t)%this.capacity]);return e}}t.RingBuffer=o,function(e){e.Iterator=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.m_buffer=e,this.m_index=t}get value(){return this.m_buffer.buffer[(this.m_buffer.tail+this.m_index)%this.m_buffer.capacity]}next(){return this.m_index++,this.m_index<this.m_buffer.size}}}(o=t.RingBuffer||(t.RingBuffer={}));class a{constructor(e,t){this.statistics=e,this.name=t,this.running=!1}get value(){return this.m_currentValue}setValue(e){this.m_currentValue=e}reset(){this.m_currentValue=void 0}start(){if(!this.statistics.enabled)return-1;if(this.running)throw new Error("Timer '"+this.name+"' is already running");return this.running=!0,this.m_currentValue=r.PerformanceTimer.now()}stop(){var e;if(!this.statistics.enabled)return-1;if(this.running){const t=r.PerformanceTimer.now()-(null!==(e=this.m_currentValue)&&void 0!==e?e:0);return this.m_currentValue=t,this.setValue(t),this.running=!1,t}throw new Error("Timer '"+this.name+"' has not been started")}now(){var e;if(!this.statistics.enabled)return-1;if(this.running){return r.PerformanceTimer.now()-(null!==(e=this.m_currentValue)&&void 0!==e?e:0)}throw new Error("Timer '"+this.name+"' has not been started")}}t.SimpleTimer=a;class s extends a{constructor(e,t){super(e,t),this.statistics=e,this.name=t,this.numResets=0,this.maxNumSamples=1e3,this.samples=new o(this.maxNumSamples)}reset(){super.reset(),this.getStats(),this.samples.clear(),this.numResets++}setValue(e){super.setValue(e),void 0!==e&&this.samples.enqOne(e)}getStats(){return l(this.samples.asArray())}}function l(e){if(0===e.length)return;e.sort(((e,t)=>e-t));const t=e[0],n=e[e.length-1];let r,i,o,a,s,l,c;if(1===e.length)i=o=a=s=l=c=r=e[0];else if(2===e.length)r=.5*e[0]+.5*e[1],i=o=a=s=l=c=e[1];else{const t=Math.floor(e.length/2);r=e.length%2===0?.5*e[t-1]+.5*e[t]:e[t];i=e[Math.round(.75*e.length)-1];o=e[Math.round(.9*e.length)-1];a=e[Math.round(.95*e.length)-1];s=e[Math.round(.97*e.length)-1];l=e[Math.round(.99*e.length)-1];c=e[Math.round(.999*e.length)-1]}let u=0;for(let h=0,d=e.length;h<d;h++)u+=e[h];return{min:t,max:n,avg:u/e.length,median:r,median75:i,median90:o,median95:a,median97:s,median99:l,median999:c,numSamples:e.length}}t.SampledTimer=s,t.computeArrayStats=l,t.computeArrayAverage=function(e){if(0===e.length)return;let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n];return t/e.length};t.MultiStageTimer=class{constructor(e,t,n){if(this.statistics=e,this.name=t,this.stages=n,n.length<1)throw new Error("MultiStageTimer needs stages");n.forEach((t=>{if(!e.hasTimer(t))throw new Error("Unknown timer: "+t)}))}get value(){return this.statistics.getTimer(this.stages[this.stages.length-1]).value}reset(){this.statistics.enabled&&this.stages.forEach((e=>{this.statistics.getTimer(e).reset()}))}start(){var e;return this.stage=this.stages[0],null!==(e=this.statistics.getTimer(this.stages[0]).value)&&void 0!==e?e:-1}stop(){return this.stage=void 0,void 0!==this.value?this.value:-1}get stage(){return this.currentStage}set stage(e){this.currentStage!==e&&(this.statistics.enabled&&void 0!==this.currentStage&&this.statistics.getTimer(this.currentStage).stop(),this.currentStage=e,this.statistics.enabled&&void 0!==this.currentStage&&this.statistics.getTimer(this.currentStage).start())}};t.Statistics=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.name=e,this.enabled=t,this.timers=new Map,this.nullTimer=new a(this,"<null>")}createTimer(e){const t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?new s(this,e):new a(this,e);return this.addTimer(t)}addTimer(e){if(void 0!==this.timers.get(e.name))throw new Error("Duplicate timer name: '"+e.name+"'");return this.timers.set(e.name,e),e}getTimer(e){if(!this.enabled)return this.nullTimer;const t=this.timers.get(e);return void 0===t?this.nullTimer:t}hasTimer(e){return void 0!==this.timers.get(e)}reset(){this.timers.forEach((e=>{e.reset()}))}log(e,t){void 0===e&&void 0===this.name||i.log(void 0!==e?e:this.name);let n=0;this.timers.forEach((e=>{n=Math.max(n,e.name.length)}));const r=e=>void 0!==e?e.toFixed(5):"?";this.timers.forEach((e=>{let t=e.name+": "+" ".repeat(n-e.name.length);if(t+=r(e.value),e instanceof s){const n=e.getStats();void 0!==n&&(t+=`  [ min=${r(n.min)}, max=${r(n.max)}, avg=${r(n.avg)}, med=${r(n.median)}, med95=${r(n.median95)}, med99=${r(n.median99)}, N=${r(n.numSamples)} ]`)}i.log(t)})),void 0!==t&&i.log(t)}};class c{constructor(){this.entries=new Map,this.messages=void 0}getValue(e){return this.entries.get(e)}setValue(e,t){this.entries.set(e,t)}addValue(e,t){const n=this.entries.get(e);this.entries.set(e,t+(void 0===n?0:n))}addMessage(e){void 0===this.messages&&(this.messages=[]),this.messages.push(e)}reset(){this.entries.forEach(((e,t)=>{this.entries.set(t,0)})),this.messages=void 0}}t.FrameStats=c;class u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.capacity=e,this.frameEntries=new Map,this.messages=new o(e)}get length(){return this.messages.size}reset(){this.frameEntries.forEach(((e,t)=>{e.clear()})),this.messages.clear()}addFrame(e){const t=this.length,n=this.frameEntries;e.entries.forEach(((e,r)=>{let i=n.get(r);if(void 0===i){i=new o(this.capacity);for(let e=0;e<t;e++)i.enqOne(0);this.frameEntries.set(r,i)}i.enqOne(e)})),this.messages.enq(e.messages)}log(){let e=0;this.frameEntries.forEach(((t,n)=>{e=Math.max(e,n.length)}));const t=e=>void 0!==e?e.toFixed(5):"?";this.frameEntries.forEach(((n,r)=>{let o=r+": "+" ".repeat(e-r.length);const a=l(n.asArray());void 0!==a&&(o+=`  [ min=${t(a.min)}, max=${t(a.max)}, avg=${t(a.avg)}, med=${t(a.median)}, med95=${t(a.median95)}, med99=${t(a.median99)}, N=${t(a.numSamples)} ]`),i.log(o)}))}}t.FrameStatsArray=u;class h{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.enabled=e,this.maxNumFrames=t,this.currentFrame=new c,this.appResults=new Map,this.configs=new Map,h.m_instance=this,this.m_frameEvents=new u(t)}get isFull(){return this.m_frameEvents.length>=this.maxNumFrames}static get instance(){return void 0===h.m_instance&&(h.m_instance=new h(!1,0)),h.m_instance}get frameEvents(){return this.m_frameEvents}clear(){this.clearFrames(),this.configs.clear(),this.appResults.clear()}clearFrames(){this.m_frameEvents.reset(),this.currentFrame.reset()}addWebGLInfo(e){void 0!==e.render&&(this.currentFrame.setValue("gl.numCalls",null===e.render.calls?0:e.render.calls),this.currentFrame.setValue("gl.numPoints",null===e.render.points?0:e.render.points),this.currentFrame.setValue("gl.numLines",null===e.render.lines?0:e.render.lines),this.currentFrame.setValue("gl.numTriangles",null===e.render.triangles?0:e.render.triangles)),void 0!==e.memory&&(this.currentFrame.setValue("gl.numGeometries",null===e.memory.geometries?0:e.memory.geometries),this.currentFrame.setValue("gl.numTextures",null===e.memory.textures?0:e.memory.textures)),void 0!==e.programs&&this.currentFrame.setValue("gl.numPrograms",null===e.programs?0:e.programs.length)}addMemoryInfo(){if(void 0!==window&&void 0!==window.performance){const e=window.performance.memory;void 0!==e&&(this.currentFrame.setValue("memory.totalJSHeapSize",e.totalJSHeapSize),this.currentFrame.setValue("memory.usedJSHeapSize",e.usedJSHeapSize),this.currentFrame.setValue("memory.jsHeapSizeLimit",e.jsHeapSizeLimit))}}storeAndClearFrameInfo(){return!(this.m_frameEvents.length>=this.maxNumFrames)&&(this.m_frameEvents.addFrame(this.currentFrame),this.currentFrame.reset(),!0)}log(e,t){i.log(void 0!==e?e:"PerformanceStatistics");this.appResults.forEach(((e,t)=>{i.log(t,e)}));this.configs.forEach(((e,t)=>{i.log(t,e)})),this.m_frameEvents.log(),void 0!==t&&i.log(t)}getAsPlainObject(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={},n={},r={},i={configs:n,appResults:t,frames:r};this.appResults.forEach(((e,n)=>{t[n]=e}));if(this.configs.forEach(((e,t)=>{n[t]=e})),e)for(const[o,a]of this.m_frameEvents.frameEntries)r[o]=a.bottom;else for(const[o,a]of this.m_frameEvents.frameEntries)r[o]=a.asArray();return i.messages=this.m_frameEvents.messages.asArray(),i}getLastFrameStatistics(){return this.getAsPlainObject(!0)}getAsSimpleFrameStatistics(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new Map,n=new Map,r=new Map,i={configs:t,appResults:n,frames:r,messages:this.m_frameEvents.messages.asArray()};this.appResults.forEach(((e,t)=>{n.set(t,e)}));if(this.configs.forEach(((e,n)=>{t.set(n,e)})),e)for(const[o,a]of this.m_frameEvents.frameEntries)r.set(o,a.bottom);else for(const[o,a]of this.m_frameEvents.frameEntries)r.set(o,a.asArray());return i}}t.PerformanceStatistics=h,h.m_instance=void 0},24856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextureLoader=void 0;const r=n(534);t.TextureLoader=class{constructor(){this.m_textureLoader=new r.TextureLoader}async load(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(void 0===t)return await this.loadWithThreeLoader(e);const o=await fetch(e,{headers:t,signal:n,mode:i?"cors":"no-cors"}),a=await o.blob(),s=await this.loadWithThreeLoader(URL.createObjectURL(a)),l="image/jpeg/"===a.type||e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);return s.format=l?r.RGBFormat:r.RGBAFormat,s}loadWithThreeLoader(e){return new Promise(((t,n)=>{this.m_textureLoader.setCrossOrigin(""),this.m_textureLoader.load(e,(e=>t(e)),void 0,(()=>n(new Error("failed to load texture"))))}))}}},4716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLight=t.toTextureFilter=t.toWrappingMode=t.toTextureDataType=t.toPixelFormat=void 0;const r=n(534);t.toPixelFormat=function(e){switch(e){case"Alpha":return r.AlphaFormat;case"RGB":return r.RGBFormat;case"RGBA":return r.RGBAFormat;case"Luminance":return r.LuminanceFormat;case"LuminanceAlpha":return r.LuminanceAlphaFormat;case"RGBE":return r.RGBEFormat;case"Depth":return r.DepthFormat;case"DepthStencil":return r.DepthStencilFormat;case"Red":return r.RedFormat;default:throw new Error(`invalid pixel format: ${e}`)}},t.toTextureDataType=function(e){switch(e){case"UnsignedByte":return r.UnsignedByteType;case"Byte":return r.ByteType;case"Short":return r.ShortType;case"UnsignedShort":return r.UnsignedShortType;case"Int":return r.IntType;case"UnsignedInt":return r.UnsignedIntType;case"Float":return r.FloatType;case"HalfFloat":return r.HalfFloatType;default:throw new Error(`invalid texture data type: ${e}`)}},t.toWrappingMode=function(e){switch(e){case"clamp":return r.ClampToEdgeWrapping;case"repeat":return r.RepeatWrapping;case"mirror":return r.MirroredRepeatWrapping;default:throw new Error(`invalid wrapping mode: ${e}`)}},t.toTextureFilter=function(e){switch(e){case"nearest":return r.NearestFilter;case"nearestMipMapNearest":return r.NearestMipMapNearestFilter;case"nearestMipMapLinear":return r.NearestMipMapLinearFilter;case"linear":return r.LinearFilter;case"linearMipMapNearest":return r.LinearMipMapNearestFilter;case"linearMipMapLinear":return r.LinearMipMapLinearFilter;default:throw new Error(`invalid texture filter: ${e}`)}},t.createLight=function(e){switch(e.type){case"ambient":{const t=new r.AmbientLight(e.color,e.intensity);return t.name=e.name,t}case"directional":{const t=new r.DirectionalLight(e.color,e.intensity);return t.name=e.name,void 0!==e.castShadow&&(t.castShadow=e.castShadow),t.castShadow&&(t.shadow.bias=1e-5,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024),t.position.set(e.direction.x,e.direction.y,e.direction.z),t.position.normalize(),t}}}},30081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLoader=t.DEFAULT_MAX_THEME_INTHERITANCE_DEPTH=void 0,n(89064);const r=n(26309),i=n(6705),o=n(15739),a=n(37958);t.DEFAULT_MAX_THEME_INTHERITANCE_DEPTH=4;class s{static async load(e,t){var n;if(t=null!==t&&void 0!==t?t:{},"string"===typeof e){const n=t.uriResolver,r=void 0!==n?n.resolveUri(e):e,i=await fetch(r,{signal:t.signal});if(!i.ok)throw new Error(`ThemeLoader#load: cannot load theme: ${i.statusText}`);(e=await i.json()).url=o.resolveReferenceUri(o.getAppBaseUrl(),r),e=this.resolveUrls(e,t)}else void 0===e.url?(e.url=o.getAppBaseUrl(),e=this.resolveUrls(e,t)):e=this.convertFlatTheme(e);if(null===e||void 0===e)throw new Error("ThemeLoader#load: loaded resource is not valid JSON");s.checkTechniqueSupport(e);const r=o.getOptionValue(t.resolveDefinitions,!1);if(e=await s.resolveBaseThemes(e,t),r){const r=new o.ContextLogger(null!==(n=t.logger)&&void 0!==n?n:console,`when processing Theme ${e.url}:`);s.resolveThemeReferences(e,r)}return e}static isThemeLoaded(e){return void 0===e.extends&&!Array.isArray(e.styles)}static async loadAsync(e){return await s.load(e)}static resolveUrls(e,t){if(void 0===(e=s.convertFlatTheme(e)).url)return e;const n=o.composeUriResolvers(null===t||void 0===t?void 0:t.uriResolver,new o.RelativeUriResolver(e.url)),r=void 0===t||!(!1===t.resolveIncludeUris);if(e.extends&&r&&(e.extends=(Array.isArray(e.extends)?e.extends:[e.extends]).map((r=>"string"===typeof r?n.resolveUri(r):void 0!==r.url?r:(r.url=e.url,this.resolveUrls(r,t))))),!s.convertFlatTheme(e))return e;return(void 0===t||!(!1===t.resolveResourceUris))&&s.resolveResources(e,n),e}static checkTechniqueSupport(e){if(void 0!==e.styles)for(const t in e.styles)if(e.styles.hasOwnProperty(t))for(const n of e.styles[t])n.technique}static resolveThemeReferences(e,t){if(void 0!==e.styles)for(const n in e.styles)e.styles.hasOwnProperty(n)&&(t.pushAttr("styles"),t.pushAttr(n),e.styles[n]=s.resolveStyleSet(e.styles[n],e.definitions,t),t.pop(),t.pop());return e}static resolveStyleSet(e,t,n){const r=[];for(let i=0;i<e.length;++i){const o=e[i];n.pushIndex(i);const a=s.resolveStyle(o,t,n);void 0!==a?r.push(a):n.warn("invalid style, ignored"),n.pop()}return r}static resolveStyle(e,t,n){if(Array.isArray(e.when)){n.pushAttr("when");const r=this.resolveExpressionReferences(e.when,t,n);if(n.pop(),void 0===r)return;e.when=r}if(void 0!==e.attr){const r=e.attr;n.pushAttr("attr");for(const e in r){if(!r.hasOwnProperty(e))continue;const i=r[e];if(!Array.isArray(i))continue;n.pushAttr(e);const o=this.resolveExpressionReferences(i,t,n);n.pop(),void 0!==o?r[e]=o:delete r[e]}n.pop()}return e}static resolveExpressionReferences(e,t,n){let o=!1;const a=function e(a){if(i.isJsonExprReference(a)){const e=a[1],i=t&&t[e];return void 0===i?(n.warn(`invalid reference '${e}' - not found`),void(o=!0)):r.isJsonExpr(i)?i:i.value}if(Array.isArray(a)){const t=[...a];for(let n=1;n<t.length;++n)t[n]=e(t[n]);return t}return a}(e);if(!o)return a}static async resolveBaseThemes(e,n){if(n=null!==n&&void 0!==n?n:{},void 0===e.extends)return e;const r=o.getOptionValue(n.maxInheritanceDepth,t.DEFAULT_MAX_THEME_INTHERITANCE_DEPTH);if(r<=0)throw new Error("maxInheritanceDepth reached when attempting to load base theme");const i=Array.isArray(e.extends)?e.extends:[e.extends];delete e.extends;let a={};for(const t of i){const e=await s.load(t,Object.assign(Object.assign({},n),{resolveDefinitions:!1,maxInheritanceDepth:r-1}));a=s.mergeThemes(e,a)}return s.mergeThemes(e,a)}static mergeThemes(e,t){const n=Object.assign(Object.assign({},t.definitions),e.definitions);let r;if(t.styles&&e.styles){const n=Object.keys(t.styles),i=Object.keys(e.styles);r={},n.forEach((n=>{const o=i.indexOf(n);if(-1!==o){const a=t.styles[n],s=[],l=new Map;a.forEach((e=>{"string"===typeof e.id&&l.set(e.id,s.length),s.push(e)}));e.styles[n].forEach((e=>{if("string"===typeof e.extends&&l.has(e.extends)){const t=l.get(e.extends),n=s[t];return s[t]=Object.assign(Object.assign({},n),e),void(s[t].extends=void 0)}if("string"===typeof e.id&&l.has(e.id)){const t=l.get(e.id);s[t]=e}else s.push(e)})),r[n]=s,i.splice(o,1)}else r[n]=t.styles[n]})),i.forEach((t=>{r[t]=e.styles[t]}))}else t.styles?r=Object.assign({},t.styles):e.styles&&(r=Object.assign({},e.styles));return Object.assign(Object.assign(Object.assign(Object.assign({},t),e),s.mergeImageTextures(e,t)),{definitions:n,styles:r})}static mergeImageTextures(e,t){const n=Object.assign(Object.assign({},t.images),e.images);let r=[];return!t.imageTextures&&e.imageTextures?r=e.imageTextures:t.imageTextures&&!e.imageTextures?r=t.imageTextures:t.imageTextures&&e.imageTextures&&(r=e.imageTextures.slice(),t.imageTextures.forEach((e=>{r.find((t=>{let{name:n}=t;return n===e.name}))||r.push(e)}))),{images:n,imageTextures:r}}static convertFlatTheme(e){if(Array.isArray(e.styles)){const t={};e.styles.forEach((e=>{if(r.isJsonExpr(e))throw new Error("invalid usage of theme reference");const n=e.styleSet;if(void 0===n)throw new Error("missing reference to style set");t[n]||(t[n]=[]),t[n].push(e)})),e.styles=t}return e}static resolveResources(e,t){if(e.sky&&"cubemap"===e.sky.type)for(let n=0;n<a.SKY_CUBEMAP_FACE_COUNT;++n){const r=e.sky[a.SkyCubemapFaceId[n]];void 0!==r&&(e.sky[a.SkyCubemapFaceId[n]]=t.resolveUri(r))}if(e.images)for(const n of Object.keys(e.images)){const r=e.images[n];r.url=t.resolveUri(r.url),void 0!==r.atlas&&(r.atlas=t.resolveUri(r.atlas))}if(e.fontCatalogs)for(const n of e.fontCatalogs)n.url=t.resolveUri(n.url);if(e.poiTables)for(const n of e.poiTables)n.url=t.resolveUri(n.url);if(void 0!==e.styles)for(const n in e.styles){if(!e.styles.hasOwnProperty(n))continue;const r=e.styles[n];for(const e of r)e.attr&&["map","normalMap","displacementMap","roughnessMap"].forEach((n=>{const r=e.attr[n];r&&"string"===typeof r&&(e.attr[n]=t.resolveUri(r))}))}}}t.ThemeLoader=s},67247:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tile=t.getFeatureDataSize=void 0;const r=n(31201),i=n(15739),o=n(534),a=n(46273),s=n(52719),l=n(26691),c=n(44097),u=n(91422),h=n(92301),d=n(18386),p=n(52734),m=n(30240),f=i.LoggerManager.instance.create("Tile");t.getFeatureDataSize=function(e){let t=100;return void 0!==e.starts&&(t+=8*e.starts.length),void 0!==e.objInfos&&(t+=16*e.objInfos.length),t};t.Tile=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this.dataSource=e,this.tileKey=t,this.objects=[],this.dependencies=[],this.frameNumLastRequested=-1,this.frameNumVisible=-1,this.frameNumLastVisible=-1,this.numFramesVisible=0,this.visibilityCounter=-1,this.levelOffset=0,this.skipRendering=!1,this.delayRendering=!1,this.m_boundingBox=new r.OrientedBox3,this.m_disposed=!1,this.m_forceHasGeometry=void 0,this.m_textElementGroups=new p.TextElementGroupPriorityList,this.m_pathBlockingElements=[],this.m_worldCenter=new o.Vector3,this.m_visibleArea=0,this.m_elevationRange={minElevation:0,maxElevation:0},this.m_ownedTextures=new WeakSet,this.geoBox=this.dataSource.getTilingScheme().getGeoBox(this.tileKey),this.updateBoundingBox(),this.m_worldCenter.copy(this.boundingBox.position),this.m_localTangentSpace=null!==i&&void 0!==i&&i,this.m_textStyleCache=new m.TileTextStyleCache(this),this.m_offset=n,this.m_uniqueKey=r.TileKeyUtils.getKeyForTileKeyAndOffset(this.tileKey,this.offset),e.useGeometryLoader&&(this.m_tileGeometryLoader=new l.TileGeometryLoader(this,this.mapView.taskQueue),this.attachGeometryLoadedCallback())}get isVisible(){try{return this.frameNumLastRequested>=this.dataSource.mapView.frameNumber-1}catch(e){return f.debug(e),!1}}set isVisible(e){this.frameNumLastRequested=e?this.dataSource.mapView.frameNumber:-1,e||!this.m_tileGeometryLoader||this.m_tileGeometryLoader.isSettled||this.m_tileGeometryLoader.cancel()}get projection(){return this.dataSource.projection}get mapView(){return this.dataSource.mapView}get localTangentSpace(){return this.m_localTangentSpace}get memoryUsage(){return void 0===this.m_resourceInfo&&this.computeResourceInfo(),this.m_resourceInfo.heapSize}get center(){return this.m_worldCenter}get uniqueKey(){return this.m_uniqueKey}get offset(){return this.m_offset}set offset(e){this.m_offset!==e&&(this.m_uniqueKey=r.TileKeyUtils.getKeyForTileKeyAndOffset(this.tileKey,e)),this.m_offset=e}getResourceInfo(){return void 0===this.m_resourceInfo&&this.computeResourceInfo(),this.m_resourceInfo}invalidateResourceInfo(){this.m_resourceInfo=void 0}addOwnedTexture(e){this.m_ownedTextures.add(e)}get userTextElements(){let e=this.m_textElementGroups.groups.get(h.TextElement.HIGHEST_PRIORITY);return void 0===e&&(e=new d.TextElementGroup(h.TextElement.HIGHEST_PRIORITY),this.m_textElementGroups.groups.set(e.priority,e)),e}addUserTextElement(e){e.priority=h.TextElement.HIGHEST_PRIORITY,this.addTextElement(e)}removeUserTextElement(e){return e.priority=h.TextElement.HIGHEST_PRIORITY,this.removeTextElement(e)}addTextElement(e){this.textElementGroups.add(e),!1===this.m_textElementsChanged&&(this.m_textElementGroups=this.textElementGroups.clone()),this.textElementsChanged=!0}addBlockingElement(e){this.m_pathBlockingElements.push(e)}removeTextElement(e){const t=this.textElementGroups;return!!t.remove(e)&&(!1===this.m_textElementsChanged&&(this.m_textElementGroups=t.clone()),this.textElementsChanged=!0,!0)}get textElementGroups(){return this.m_textElementGroups}get textElementsChanged(){var e;return null!==(e=this.m_textElementsChanged)&&void 0!==e&&e}set textElementsChanged(e){this.m_textElementsChanged=e}hasTextElements(){return this.m_textElementGroups.count()>0}get blockingElements(){return this.m_pathBlockingElements}willRender(e){return!this.skipRendering&&!this.delayRendering}didRender(){}get visibleArea(){return this.m_visibleArea}set visibleArea(e){this.m_visibleArea=e,void 0!==this.tileLoader&&(this.tileLoader.priority=e)}get elevationRange(){return this.m_elevationRange}set elevationRange(e){var t;e.minElevation===this.m_elevationRange.minElevation&&e.maxElevation===this.m_elevationRange.maxElevation&&e.calculationStatus===this.m_elevationRange.calculationStatus||(this.m_elevationRange.minElevation=e.minElevation,this.m_elevationRange.maxElevation=e.maxElevation,this.m_elevationRange.calculationStatus=e.calculationStatus,this.elevateGeoBox(),void 0===this.m_maxGeometryHeight&&void 0===this.m_minGeometryHeight||(i.assert(void 0===(null===(t=this.decodedTile)||void 0===t?void 0:t.boundingBox)),this.updateBoundingBox()))}get decodedTile(){return this.m_decodedTile}set decodedTile(e){var t,n;if(this.m_decodedTile=e,this.invalidateResourceInfo(),void 0===e)return;0===e.geometries.length&&this.forceHasGeometry(!0),this.m_maxGeometryHeight=e.boundingBox?void 0:null!==(t=e.maxGeometryHeight)&&void 0!==t?t:0,this.m_minGeometryHeight=e.boundingBox?void 0:null!==(n=e.minGeometryHeight)&&void 0!==n?n:0,this.elevateGeoBox(),this.updateBoundingBox(e.boundingBox);const r=u.PerformanceStatistics.instance;r.enabled&&void 0!==e.decodeTime&&(r.currentFrame.addValue("decode.decodingTime",e.decodeTime),r.currentFrame.addValue("decode.decodedTiles",1)),void 0!==e.copyrightHolderIds&&(this.copyrightInfo=e.copyrightHolderIds.map((e=>({id:e})))),this.dataSource.requestUpdate()}shouldDisposeObjectGeometry(e){return!0}shouldDisposeObjectMaterial(e){return!0}shouldDisposeTexture(e){return this.m_ownedTextures.has(e)}get disposed(){return this.m_disposed}get allGeometryLoaded(){var e,t;return null!==(t=null===(e=this.m_tileGeometryLoader)||void 0===e?void 0:e.isFinished)&&void 0!==t?t:this.hasGeometry}get hasGeometry(){return void 0===this.m_forceHasGeometry?0!==this.objects.length:this.m_forceHasGeometry}forceHasGeometry(e){this.m_forceHasGeometry=e}resetVisibilityCounter(){this.visibilityCounter=-1}get tileLoader(){return this.m_tileLoader}set tileLoader(e){this.m_tileLoader=e}async load(){const e=this.tileLoader;if(void 0===e)return await Promise.resolve();if(this.m_tileGeometryLoader){const e=this.m_tileGeometryLoader.isSettled;this.m_tileGeometryLoader.reset(),e&&this.attachGeometryLoadedCallback()}return await e.loadAndDecode().then((t=>{var n;i.assert(t===c.TileLoaderState.Ready);const o=e.decodedTile;this.decodedTile=o,null===(n=null===o||void 0===o?void 0:o.dependencies)||void 0===n||n.forEach((e=>{this.dependencies.push(r.TileKey.fromMortonCode(e))}))})).catch((e=>{e===c.TileLoaderState.Failed?this.dispose():e!==c.TileLoaderState.Canceled&&f.error("Unknown error"+e)}))}get textStyleCache(){return this.m_textStyleCache}clear(){const e=e=>{Object.getOwnPropertyNames(e).forEach((t=>{const n=e[t];if(void 0!==n&&n instanceof o.Texture){const e=n;this.shouldDisposeTexture(e)&&e.dispose()}})),e.dispose()},t=t=>{if(this.shouldDisposeObjectGeometry(t)&&(void 0!==t.geometry&&t.geometry.dispose(),void 0!==t.geometries))for(const e of t.geometries)e.dispose();void 0!==t.material&&this.shouldDisposeObjectMaterial(t)&&(t.material instanceof Array?t.material.forEach((t=>{void 0!==t&&e(t)})):e(t.material))};this.objects.forEach((e=>{e.traverse((e=>{t(e)})),t(e)})),this.objects.length=0,this.preparedTextPaths&&(this.preparedTextPaths=[]),this.m_textStyleCache.clear(),this.clearTextElements(),this.invalidateResourceInfo()}clearTextElements(){this.hasTextElements()&&(this.textElementsChanged=!0,this.m_pathBlockingElements.splice(0),this.textElementGroups.forEach((e=>{e.dispose()})),this.textElementGroups.clear())}addDisposeCallback(e){this.m_disposeCallback=i.chainCallbacks(this.m_disposeCallback,e)}dispose(){var e;this.m_disposed||(this.m_tileLoader&&(this.m_tileLoader.cancel(),this.m_tileLoader=void 0),this.clear(),this.frameNumLastRequested=0,this.m_disposed=!0,null===(e=this.m_tileGeometryLoader)||void 0===e||e.dispose(),this.m_disposeCallback&&this.m_disposeCallback(this))}computeWorldOffsetX(){return this.projection.worldExtent(0,0).max.x*this.offset}update(e){for(const t of this.objects)t instanceof a.LodMesh&&t.setLevelOfDetail(e-this.tileKey.level)}get boundingBox(){return this.m_boundingBox}updateGeometry(e,t,n){if(!this.m_tileGeometryLoader)return!1;if(this.m_tileGeometryLoader.isSettled)return!0;if(this.dataSource.isDetached())return this.m_tileGeometryLoader.cancel(),!0;if(this.tileLoader){if(!this.tileLoader.isFinished)return!0;if(!this.decodedTile)return this.m_tileGeometryLoader.finish(),!0}return void 0!==e&&(this.m_tileGeometryLoader.priority=e),this.m_tileGeometryLoader.update(t,n),!0}get loadedGeometryKinds(){var e;return null===(e=this.m_tileGeometryLoader)||void 0===e?void 0:e.availableGeometryKinds}loadingFinished(){}attachGeometryLoadedCallback(){i.assert(void 0!==this.m_tileGeometryLoader),this.m_tileGeometryLoader.waitFinished().then((()=>{this.loadingFinished(),this.removeDecodedTile()})).catch((()=>{this.disposed||this.dataSource.isDetached()||this.mapView.visibleTileSet.disposeTile(this)}))}removeDecodedTile(){this.m_decodedTile=void 0,this.invalidateResourceInfo()}updateBoundingBox(e){e?(this.m_boundingBox.copy(e),this.m_worldCenter.copy(this.boundingBox.position)):this.projection.projectBox(this.geoBox,this.boundingBox)}elevateGeoBox(){var e,t;this.geoBox.southWest.altitude=this.m_elevationRange.minElevation+(null!==(e=this.m_minGeometryHeight)&&void 0!==e?e:0),this.geoBox.northEast.altitude=this.m_elevationRange.maxElevation+(null!==(t=this.m_maxGeometryHeight)&&void 0!==t?t:0)}computeResourceInfo(){let e=0,t=0,n=0;const r={heapSize:0,gpuSize:0},i=new Map;for(const o of this.objects)o.visible&&t++,s.Object3DUtils.estimateSize(o,r,i);for(const o of this.textElementGroups.groups)n+=o[1].elements.length;e+=312*n,void 0!==this.m_decodedTile&&void 0!==this.m_decodedTile.tileInfo&&(r.heapSize+=this.m_decodedTile.tileInfo.numBytes),this.m_resourceInfo={heapSize:r.heapSize+e,gpuSize:r.gpuSize,num3dObjects:t,numTextElements:n,numUserTextElements:0}}}},63402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileObjectRenderer=void 0;const r=n(26309),i=n(49417),o=n(58598),a=n(87213);t.TileObjectRenderer=class{constructor(e,t){this.m_env=e,this.m_renderer=t,this.m_renderOrderStencilValues=new Map,this.m_stencilValue=1}render(e,t,n,r,i){const o=e.computeWorldOffsetX();if(e.willRender(t)){for(const s of e.objects){const l=a.MapObjectAdapter.get(s);this.processTileObject(e,t,n,s,l)&&(this.updateStencilRef(s),s.position.copy(e.center),void 0!==s.displacement&&s.position.add(s.displacement),s.position.x+=o,s.position.sub(r),e.localTangentSpace&&s.setRotationFromMatrix(e.boundingBox.getRotationMatrix()),s.frustumCulled=!1,i.add(s))}e.didRender()}}prepareRender(){this.m_stencilValue=1,this.m_renderOrderStencilValues.clear()}setupRenderer(){const e=(e,t)=>e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.object.userData.tileKey&&t.object.userData.tileKey&&e.object.userData.tileKey.mortonCode()!==t.object.userData.tileKey.mortonCode()?e.object.userData.tileKey.mortonCode()-t.object.userData.tileKey.mortonCode():e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id;this.m_renderer.setOpaqueSort(((t,n)=>{var r,o,s,l;const c=a.MapObjectAdapter.get(t.object),u=a.MapObjectAdapter.get(n.object),h=null===(r=null===c||void 0===c?void 0:c.dataSource)||void 0===r?void 0:r.dataSourceOrder,d=null===(o=null===u||void 0===u?void 0:u.dataSource)||void 0===o?void 0:o.dataSourceOrder;if(void 0!==h&&void 0!==d&&h!==d)return h-d;if(t.renderOrder===i.BackgroundDataSource.GROUND_RENDER_ORDER||n.renderOrder===i.BackgroundDataSource.GROUND_RENDER_ORDER)return e(t,n);if(void 0!==(null===c||void 0===c?void 0:c.level)&&void 0!==(null===u||void 0===u?void 0:u.level)){const r=void 0!==(null===(s=c.kind)||void 0===s?void 0:s.find((e=>"building"===e)))||void 0!==(null===(l=u.kind)||void 0===l?void 0:l.find((e=>"building"===e)));return c.level===u.level||r?e(t,n):c.level-u.level}return e(t,n)}))}updateStencilRef(e){if(void 0!==e.renderOrder&&e instanceof o.SolidLineMesh){const t=e.material;Array.isArray(t)?t.forEach((t=>t.stencilRef=this.getStencilValue(e.renderOrder))):t.stencilRef=this.getStencilValue(e.renderOrder)}}allocateStencilValue(e){const t=this.m_stencilValue++;return this.m_renderOrderStencilValues.set(e,t),t}getStencilValue(e){var t;return null!==(t=this.m_renderOrderStencilValues.get(e))&&void 0!==t?t:this.allocateStencilValue(e)}processTileObject(e,t,n,i,o){return!!i.visible&&(!!this.processTileObjectFeatures(e,t,n,i)&&!(o&&(o.ensureUpdated(e.mapView),!o.isVisible()&&o.pickability!==r.Pickability.all)))}processTileObjectFeatures(e,t,n,i){var o,a;const s=i.userData.technique,l=r.getPropertyValue(null===s||void 0===s?void 0:s.minZoomLevel,this.m_env),c=r.getPropertyValue(null===s||void 0===s?void 0:s.maxZoomLevel,this.m_env);if("number"===typeof l&&n<l)return!1;if("number"===typeof c&&n>=c)return!1;if(void 0===(null===s||void 0===s?void 0:s.enabled))return!0;const u=i.userData.feature;if(!u||!r.Expr.isExpr(s.enabled))return Boolean(r.getPropertyValue(s.enabled,this.m_env));const{starts:h,objInfos:d}=u;if(!Array.isArray(d)||!Array.isArray(h))return!0;const p=i.geometry;if(!p||!p.isBufferGeometry)return!0;const m=null!==(a=null===(o=p.getIndex())||void 0===o?void 0:o.count)&&void 0!==a?a:p.attributes.position.count;let f;return p.clearGroups(),d.forEach(((t,n)=>{var i,o;const a=r.getFeatureId(t);let l=!0;if(r.Expr.isExpr(s.enabled)){const n=e.dataSource.getFeatureState(a),i=n?new r.MapEnv(n):null,o="object"===typeof t?new r.MapEnv(t,this.m_env):this.m_env,c=new r.MapEnv({$state:i},o);l=Boolean(r.getPropertyValue(s.enabled,c))}if(!l)return;const c=null!==(i=h[n])&&void 0!==i?i:0,u=(null!==(o=h[n+1])&&void 0!==o?o:m)-c;c===f?p.groups[p.groups.length-1].count+=u:p.addGroup(c,u),f=c+u})),p.groups.length>0}}},61563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileOffsetUtils=t.MapViewUtils=void 0;const r=n(31201),i=n(19573),o=n(15739),a=n(534),s=n(64172),l=n(52719),c=o.LoggerManager.instance.create("MapViewUtils"),u=new a.Vector3(0,0,1),h=new a.Plane(u.clone()),d=new a.Sphere(void 0,i.EarthConstants.EQUATORIAL_RADIUS),p=new a.Raycaster,m={x:new a.Vector3,y:new a.Vector3,z:new a.Vector3},f={x:new a.Vector3,y:new a.Vector3,z:new a.Vector3},g={box3:[new a.Box3],obox3:[new r.OrientedBox3],quaternions:[new a.Quaternion,new a.Quaternion],vector2:[new a.Vector2,new a.Vector2],vector3:[new a.Vector3,new a.Vector3,new a.Vector3,new a.Vector3],matrix4:[new a.Matrix4,new a.Matrix4],transforms:[{xAxis:new a.Vector3,yAxis:new a.Vector3,zAxis:new a.Vector3,position:new a.Vector3}]},v=new a.PerspectiveCamera;!function(e){function t(t,n,i,o,l,u){var h,d,p;const m=s.CameraUtils.getPrincipalPoint(t.camera,g.vector2[0]),f=e.rayCastWorldCoordinates(t,m.x,m.y);if(null===f)return;let v;if("number"===typeof n)v=g.vector2[1].set(n,i);else{const e=n;v=null!==(h=e.center)&&void 0!==h?h:m,o=null!==(d=e.deltaAzimuth)&&void 0!==d?d:0,l=null!==(p=e.deltaTilt)&&void 0!==p?p:0,u=e.maxTiltAngle}const y=v.x===m.x&&v.y===m.y?f:e.rayCastWorldCoordinates(t,v.x,v.y);if(null===y)return;!function(e,t,n){const r=e.camera,i=e.projection.surfaceNormal(t,g.vector3[0]),o=g.quaternions[0].setFromAxisAngle(i,n);r.quaternion.premultiply(o),r.position.sub(t),r.position.applyQuaternion(o),r.position.add(t)}(t,y,-o);const _=new a.Vector3(1,0,0).applyQuaternion(t.camera.quaternion),x=function(e,t,n,i,o,s,l){const c=e.camera,u=e.projection,h=C(u,c,o,l);if(h+n<0)return-h;if(n<=0)return n;if(o.equals(s)||t<0)return r.MathUtils.clamp(n+h,0,i)-h;const d=C(u,c,s,l),p=a.MathUtils.degToRad(89);if(d>p)return 0;let m=0;if(u===r.sphereProjection){const e=u.surfaceNormal(s,g.vector3[0]).projectOnPlane(l).normalize(),t=u.surfaceNormal(o,g.vector3[1]);m=e.angleTo(t)}const f=a.MathUtils.degToRad(90),v=f+m-(2*f-(2*f-(f+m-d+(f+h)))-f-i);return r.MathUtils.clamp(n+d,0,Math.min(v,p))-d}(t,v.y-m.y,l,u,f,y,_);!function(t,n,r,i){const o=t.camera,a=o.position.clone(),s=o.quaternion.clone(),l=g.quaternions[0].setFromAxisAngle(i,r);o.quaternion.premultiply(l),o.position.sub(n),o.position.applyQuaternion(l),o.position.add(n),null===e.rayCastWorldCoordinates(t,0,0)&&(c.warn("Target got invalidated during rotation."),o.position.copy(a),o.quaternion.copy(s))}(t,y,x,_)}function n(e,t,n){const o=g.vector3[0].copy(e.position),s=e.getWorldDirection(g.vector3[1]);p.set(o,s),void 0!==n&&(h.constant-=n,d.radius+=n);const l=new a.Vector3,c=t.type===r.ProjectionType.Planar?p.ray.intersectPlane(h,l):p.ray.intersectSphere(d,l);return void 0!==n&&(h.constant=0,d.radius=i.EarthConstants.EQUATORIAL_RADIUS),c}function u(t,n,i){const o={target:t,distance:n},l=i.worldMaxBounds,c=i.camera,u=i.projection;if(!l)return o;const h=l.getSize(g.vector3[1]),d=i.renderer.getSize(g.vector2[0]),p=s.CameraUtils.convertScreenToWorldSize(i.focalLength,o.distance,d.height),m=p*c.aspect,f=Math.max(m/h.x,p/h.y),v=new a.Vector3(m/2,p/2,0),y={target:o.target.clone(),distance:o.distance};if(u.type===r.ProjectionType.Planar){if(f>1)y.distance/=f,c.getWorldDirection(c.position).multiplyScalar(-y.distance).add(l.getCenter(y.target));else{if(g.box3[0].copy(l).expandByVector(v.multiplyScalar(-1)).clampPoint(o.target,y.target).setZ(o.target.z),y.target.equals(o.target))return o;c.position.x+=y.target.x-o.target.x,c.position.y+=y.target.y-o.target.y}return y}if(f>1)l.getCenter(y.target),y.target.setLength(o.target.length()),y.distance/=f;else{const e=g.obox3[0];e.copy(l),e.position.setLength(o.target.length()),e.extents.sub(v);const t=e.getRotationMatrix(g.matrix4[0]),n=g.vector3[1].copy(y.target).sub(e.position).applyMatrix4(g.matrix4[1].copy(t).transpose()).setZ(0),r=g.vector3[2].copy(n).clamp(g.vector3[3].copy(e.extents).multiplyScalar(-1),e.extents);if(r.equals(n))return o;y.target.copy(r).applyMatrix4(t).add(e.position);const i=e.position.lengthSq(),a=y.target.distanceToSquared(e.position),s=Math.sqrt(i)-Math.sqrt(i-a);y.target.addScaledVector(e.zAxis,-s),y.target.setLength(o.target.length())}return e.panCameraAroundGlobe(i,g.vector3[1].copy(y.target),g.vector3[2].copy(o.target)),c.getWorldDirection(c.position).multiplyScalar(-y.distance).add(y.target),y}function y(e,t,n,o,s){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new a.Vector3;const c=a.MathUtils.degToRad(o),u=Math.cos(c)*t,h=a.MathUtils.degToRad(n);s.projectPoint(e,l);const d=t*Math.sin(c);if(s.type===r.ProjectionType.Planar)l.x=l.x+Math.sin(h)*d,l.y=l.y-Math.cos(h)*d,l.z=l.z+u;else if(s.type===r.ProjectionType.Spherical){f.z.copy(l).normalize(),f.y.set(0,0,1).projectOnPlane(f.z).normalize(),g.quaternions[0].setFromAxisAngle(f.z,h-Math.PI),f.y.applyQuaternion(g.quaternions[0]),f.y.setLength(d);const e=t*Math.cos(c);l.add(f.y).add(f.z.setLength(e));const n=i.EarthConstants.EQUATORIAL_RADIUS+u,r=Math.sin(c)*t,o=Math.sqrt(n*n+r*r);l.setLength(o)}return l}function _(e,t){const n=t.clone().normalize();for(const r of e)if(r.angleTo(t)>Math.PI/2){const e=r.length();r.projectOnPlane(n).setLength(e)}}function x(e,t,n){const r=g.vector3[0].copy(t).sub(n.position).length(),i=s.CameraUtils.getPrincipalPoint(n);let o=r;const a=(e,t)=>Math.abs(e)>1?Math.abs((e-t)/(.99*Math.sign(e)-t)):1;for(const s of e){const e=-g.vector3[0].copy(s).applyMatrix4(n.matrixWorldInverse).z,t=g.vector3[0].applyMatrix4(n.projectionMatrix),l=Math.max(a(t.x,i.x),a(t.y,i.y));if(l>1){const t=r-e,n=Math.abs(e)*l+t;o=Math.max(o,n)}}return o}function b(e,t,n,o){const s=g.vector3[0].set(t,n,0);e.camera.updateMatrixWorld();const l=g.vector3[1].copy(e.camera.position);g.matrix4[0].extractRotation(e.camera.matrixWorld),g.matrix4[1].multiplyMatrices(g.matrix4[0],g.matrix4[1].copy(e.camera.projectionMatrix).invert());const c=s.applyMatrix4(g.matrix4[1]);p.set(l,c.normalize()),void 0!==o&&(h.constant-=o,d.radius+=o);const u=new a.Vector3,m=e.projection.type===r.ProjectionType.Planar?p.ray.intersectPlane(h,u):p.ray.intersectSphere(d,u);return void 0!==o&&(h.constant=0,d.radius=i.EarthConstants.EQUATORIAL_RADIUS),m}function w(e,t,n){e.camera.position.x+=t,e.camera.position.y+=n}function S(e,t,n){g.quaternions[0].setFromUnitVectors(t.normalize(),n.normalize()).invert(),g.matrix4[0].makeRotationFromQuaternion(g.quaternions[0]),e.camera.applyMatrix4(g.matrix4[0]),e.camera.updateMatrixWorld()}function M(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new a.Quaternion;const o=g.transforms[0];return e.localTangentSpace(t,o),g.matrix4[0].makeBasis(o.xAxis,o.yAxis,o.zAxis),i.setFromRotationMatrix(g.matrix4[0]),g.quaternions[0].setFromAxisAngle(g.vector3[1].set(0,0,1),a.MathUtils.degToRad(n)),g.quaternions[1].setFromAxisAngle(g.vector3[1].set(1,0,0),a.MathUtils.degToRad(r)),i.multiply(g.quaternions[0]),i.multiply(g.quaternions[1]),i}function E(t,n){if(n.type===r.ProjectionType.Planar){const e=t.getWorldDirection(g.vector3[0]).normalize(),r=n.surfaceNormal(t.position,g.vector3[1]).negate(),i=e.dot(r);return Math.acos(a.MathUtils.clamp(i,-1,1))}{o.assert(n.type===r.ProjectionType.Spherical);const i=e.getGeoTargetFromCamera(t,n);return null!==i?e.extractTiltAngleFromLocation(n,t,i):(c.warn("MapView camera is pointing in the void, using maxTilt: ",e.MAX_TILT_RAD),e.MAX_TILT_RAD)}}function T(e,t){g.vector3[1].setFromMatrixPosition(t.matrixWorld),e.projection.localTangentSpace(g.vector3[1],{xAxis:f.x,yAxis:f.y,zAxis:f.z,position:g.vector3[0]}),g.matrix4[1].makeBasis(f.x,f.y,f.z),g.matrix4[0].copy(g.matrix4[1]).invert().multiply(t.matrixWorld),m.x.setFromMatrixColumn(g.matrix4[0],0),m.y.setFromMatrixColumn(g.matrix4[0],1),m.z.setFromMatrixColumn(g.matrix4[0],2);let n=0,r=0,i=0;const o=m.z.dot(g.vector3[1].set(0,0,1));return o<1-Number.EPSILON?o>-1+Number.EPSILON?(n=Math.atan2(m.z.x,-m.z.y),r=Math.acos(m.z.z),i=Math.atan2(m.x.z,m.y.z)):(n=-Math.atan2(-m.y.x,m.x.x),r=180,i=0):(n=Math.atan2(-m.y.x,m.x.x),r=0,i=0),{yaw:n,pitch:r,roll:i}}function C(e,t,n,r){e.localTangentSpace(n,{xAxis:f.x,yAxis:f.y,zAxis:f.z,position:g.vector3[0]});const i=g.vector3[2].copy(t.position).sub(g.vector3[0]);r&&(i.projectOnPlane(r),f.z.projectOnPlane(r).normalize());const o=i.length();if(o<1e-5)return c.error("Can not calculate tilt for the zero length vector!"),0;i.divideScalar(o);const s=i.dot(f.z);return s>=1-Number.EPSILON?0:Math.acos(a.MathUtils.clamp(s,-1,1))}function A(e,t){const n=i.EarthConstants.EQUATORIAL_CIRCUMFERENCE/Math.pow(2,t);return e.focalLength*n/256}e.MAX_TILT_DEG=89,e.MAX_TILT_RAD=e.MAX_TILT_DEG*a.MathUtils.DEG2RAD,e.zoomOnTargetPosition=function(n,i,o,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.MAX_TILT_RAD;const{elevationProvider:l,camera:c,projection:h}=n,d=l?l.getHeight(h.unprojectPoint(c.position),4):void 0,p=b(n,i,o,d),m=e.getTargetAndDistance(h,c,l).target,f=A(n,a);if(n.geoMaxBounds){if(u(m,f,n).distance!==f)return a>=n.zoomLevel}if(c.getWorldDirection(c.position).multiplyScalar(-f).add(m),h.type===r.ProjectionType.Spherical){const e=E(c,h)-s;e>0&&t(n,{deltaTilt:e,maxTiltAngle:s})}const g=b(n,i,o,d);return!p||!g||(h.type===r.ProjectionType.Planar?(p.sub(g),w(n,p.x,p.y)):h.type===r.ProjectionType.Spherical&&S(n,p,g),!0)},e.orbitAroundScreenPoint=t,e.getGeoTargetFromCamera=function(e,t,r){const i=n(e,t,r);return null!==i?t.unprojectPoint(i):null},e.getWorldTargetFromCamera=n,e.constrainTargetAndDistanceToViewBounds=u,e.getTargetAndDistance=function(t,o,a){const s=T({projection:t},o).pitch,l=a?a.getHeight(t.unprojectPoint(o.position),4):void 0,c=!a||void 0!==l,u=s<e.MAX_TILT_RAD?n(o,t,l):null;if(null!==u){return{target:u,distance:o.position.distanceTo(u),final:c}}{const n=t.groundDistance(o.position),a=Math.max(n-(null!==l&&void 0!==l?l:0),0),u=t.type===r.ProjectionType.Planar?a/Math.cos(Math.min(s,e.MAX_TILT_RAD)):Math.sqrt(Math.pow(a+i.EarthConstants.EQUATORIAL_RADIUS,2)-Math.pow(i.EarthConstants.EQUATORIAL_RADIUS,2)),h=o.getWorldDirection(g.vector3[0]);h.multiplyScalar(u);const d=g.vector3[1];return d.copy(o.position).add(h),{target:d,distance:u,final:c}}},e.getCameraPositionFromTargetCoordinates=y,e.wrapGeoPointsToScreen=function(e,t){let n=0;void 0===t&&(t=r.GeoCoordinates.fromObject(e[0]),n=1);let i=t.latitude,o=t.latitude,a=r.MathUtils.normalizeLongitudeDeg(t.longitude),s=0,l=t.longitude,c=t.longitude;const u=[];u.push(new r.GeoCoordinates(i,a));for(let h=n;h<e.length;h++){const t=r.GeoCoordinates.fromObject(e[h]);t.latitude>i?i=t.latitude:t.latitude<o&&(o=t.latitude);let n=r.MathUtils.normalizeLongitudeDeg(t.longitude);const d=r.MathUtils.angleDistanceDeg(a,n);n=a-d,d<0&&-d>s/2?(l=Math.max(l,a-d),s=l-c,a=(l+c)/2):d>0&&d>s/2&&(c=Math.min(c,n),s=l-c,a=(l+c)/2),u.push(new r.GeoCoordinates(t.latitude,n))}return u},e.wrapWorldPointsToView=_,e.geoBoxToGeoPoints=function(e){const t=e.center;return[new r.GeoCoordinates(e.north,e.west),new r.GeoCoordinates(e.north,e.east),new r.GeoCoordinates(t.latitude,e.west),new r.GeoCoordinates(t.latitude,e.east),new r.GeoCoordinates(e.south,e.west),new r.GeoCoordinates(e.south,e.east),new r.GeoCoordinates(e.north,t.longitude),new r.GeoCoordinates(e.south,t.longitude)]},e.getFitBoundsDistance=x,e.getFitBoundsLookAtParams=function(e,t,n,i){const{tilt:o,heading:a,projection:s}=i,l=i.minDistance,c=i.camera.clone();return M(s,e,-a,o,c.quaternion),y(e,l,-a,o,s,c.position),c.updateMatrixWorld(!0),s.type===r.ProjectionType.Spherical&&_(n,c.position),{target:e,distance:x(n,t,c),heading:a,tilt:o}},e.getCameraCoordinatesFromTargetCoordinates=function(e,t,n,r,i){return i.projection.unprojectPoint(y(e,t,n,r,i.projection,g.vector3[1]))},e.rayCastWorldCoordinates=b,e.panCameraAboveFlatMap=w,e.panCameraAroundGlobe=S,e.rotate=function(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/4;if(t.camera.rotateOnWorldAxis(t.projection.type===r.ProjectionType.Spherical?g.vector3[0].copy(t.camera.position).normalize():g.vector3[0].set(0,0,1),a.MathUtils.degToRad(-n)),t.camera.updateMatrixWorld(),0===o)return;const l=e.extractAttitude(t,t.camera).pitch;let c=a.MathUtils.clamp(l+a.MathUtils.degToRad(o),0,s);if(t.projection.type===r.ProjectionType.Spherical){const e=Math.asin(i.EarthConstants.EQUATORIAL_RADIUS*Math.sin(Math.PI-s)/t.camera.position.length());c=Math.min(c,e)}t.camera.rotateX(c-l)},e.getCameraRotationAtTarget=M,e.setRotation=function(e,t,n){M(e.projection,e.geoCenter,t,n,e.camera.quaternion)},e.extractCameraTilt=E,e.extractAttitude=T,e.extractSphericalCoordinatesFromLocation=function(e,t,n){e.projection.localTangentSpace(n,{xAxis:f.x,yAxis:f.y,zAxis:f.z,position:g.vector3[0]});let r=0,i=0;return g.vector3[1].copy(t.position).sub(g.vector3[0]).normalize(),g.vector3[1].dot(f.z)>1-Number.EPSILON?(i=Math.PI-T(e,t).yaw,i=Math.atan2(Math.sin(i),Math.cos(i)),r=0,{tilt:r,azimuth:i}):(r=g.vector3[1].angleTo(f.z),g.vector3[1].copy(t.position).sub(g.vector3[0]).projectOnPlane(f.z).normalize(),i=g.vector3[1].angleTo(f.y),g.vector3[1].cross(f.y).dot(f.z)<0&&(i=-i),{tilt:r,azimuth:i})},e.extractTiltAngleFromLocation=C,e.getCameraFrustumPlanes=function(e){const t=e.near,n=e.far;let r=t*Math.tan(a.MathUtils.degToRad(.5*e.fov))/e.zoom,i=2*r,o=e.aspect*i,s=-.5*o;const l=e.view;if(null!==l&&l.enabled){const e=l.fullWidth,t=l.fullHeight;s+=l.offsetX*o/e,r-=l.offsetY*i/t,o*=l.width/e,i*=l.height/t}return s+=0!==e.filmOffset?t*e.filmOffset/e.getFilmWidth():0,{left:s,right:s+o,top:r,bottom:r-i,near:t,far:n}},e.rayCastGeoCoordinates=function(e,t,n){const r=b(e,t,n);return r?e.projection.unprojectPoint(r):null},e.calculateDistanceToGroundFromZoomLevel=function(e,t){const n=T(e,e.camera).pitch,r=i.EarthConstants.EQUATORIAL_CIRCUMFERENCE/Math.pow(2,t);return e.focalLength*r/256*Math.cos(n)},e.calculateDistanceFromZoomLevel=A,e.calculateZoomLevelFromDistance=function(e,t){const n=256*t/e.focalLength;return function(e){const t=Math.ceil(e);return t-e<1e-6?t:e}(a.MathUtils.clamp(Math.log2(i.EarthConstants.EQUATORIAL_CIRCUMFERENCE/n),e.minZoomLevel,e.maxZoomLevel))},e.calculateDepthFromClipDistance=function(e,t){const n=t,r=n.far-n.near,i=e*n.far;return(1-n.near/i)*(n.far/r)},e.cameraToWorldDistance=function(e,t){return e*t.far},e.calculateVerticalFovByHorizontalFov=function(e,t){return 2*Math.atan(Math.tan(e/2)/t)},e.calculateHorizontalFovByVerticalFov=function(e,t){return v.fov=a.MathUtils.radToDeg(e),v.aspect=t,s.CameraUtils.getHorizontalFov(v)},e.calculateFocalLengthByVerticalFov=function(e,t){return s.CameraUtils.setPrincipalPoint(v,new a.Vector2),s.CameraUtils.setVerticalFov(v,e,t),s.CameraUtils.getFocalLength(v)},e.calculateFovByFocalLength=function(e,t){return s.CameraUtils.setPrincipalPoint(v,new a.Vector2),s.CameraUtils.setFocalLength(v,e,t),v.fov},e.calculateScreenSizeByFocalLength=s.CameraUtils.convertWorldToScreenSize,e.calculateWorldSizeByFocalLength=s.CameraUtils.convertScreenToWorldSize,e.estimateObject3dSize=l.Object3DUtils.estimateSize,e.mapViewIsLoading=function(e){let t=0;for(const r of e.visibleTileSet.dataSourceTileList){t+=r.numTilesLoading;for(const e of r.visibleTiles)e.allGeometryLoaded||t++}let n=t>0;return void 0!==e.textElementsRenderer&&(n=n||e.textElementsRenderer.loading),n=n||!e.poiTableManager.finishedLoading||!e.visibleTileSet.allVisibleTilesLoaded,n},e.closeToFrustum=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-13;const r=(new a.Vector3).copy(e).project(t);return Math.abs(r.x)-n<1&&Math.abs(r.y)-n<1&&Math.abs(r.z)-n<1},e.getBrowserLanguages=o.DOMUtils.getBrowserLanguages}(t.MapViewUtils||(t.MapViewUtils={})),function(e){e.getKeyForTileKeyAndOffset=r.TileKeyUtils.getKeyForTileKeyAndOffset,e.extractOffsetAndMortonKeyFromKey=r.TileKeyUtils.extractOffsetAndMortonKeyFromKey,e.getParentKeyFromKey=r.TileKeyUtils.getParentKeyFromKey}(t.TileOffsetUtils||(t.TileOffsetUtils={}))},3236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VisibleTileSet=t.ResourceComputationType=void 0;const r=n(31201),i=n(51106),o=n(15739),a=n(534),s=n(49417),l=n(95596),c=n(65312);var u,h;!function(e){e[e.EstimationInMb=0]="EstimationInMb",e[e.NumberOfTiles=1]="NumberOfTiles"}(u=t.ResourceComputationType||(t.ResourceComputationType={})),function(e){e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.BOTH=3]="BOTH"}(h||(h={}));const d=1/1048576;class p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.EstimationInMb;this.m_disposedTiles=[],this.m_resourceComputationType=t,this.m_tileCache=new i.LRUCache(e,(e=>this.m_resourceComputationType===u.EstimationInMb?e.memoryUsage*d:1)),this.m_tileCache.evictionCallback=(e,t)=>{void 0!==t.tileLoader&&t.tileLoader.cancel(),this.m_disposedTiles.push(t)},this.m_tileCache.canEvict=(e,t)=>!t.isVisible}static getKey(e,t,n){return`${n.name}_${e}_${t}`}static getKeyForTile(e){return p.getKey(e.tileKey.mortonCode(),e.offset,e.dataSource)}get resourceComputationType(){return this.m_resourceComputationType}get capacity(){return this.m_tileCache.capacity}get size(){return this.m_tileCache.size}setCapacity(e,t){this.m_resourceComputationType=t,this.m_tileCache.setCapacityAndMeasure(e,(e=>this.m_resourceComputationType===u.EstimationInMb?e.memoryUsage*d:1))}get(e,t,n){return this.m_tileCache.get(p.getKey(e,t,n))}set(e,t,n,r){this.m_tileCache.set(p.getKey(e,t,n),r)}delete(e){const t=p.getKeyForTile(e);this.deleteByKey(t)}deleteByKey(e){this.m_tileCache.delete(e)}disposeTiles(){this.m_disposedTiles.forEach((e=>{e.dispose()})),this.m_disposedTiles.length=0}shrinkToCapacity(){this.m_tileCache.shrinkToCapacity()}evictAll(){this.m_tileCache.evictAll()}evictSelected(e){this.m_tileCache.evictSelected(e)}forEach(e,t){this.m_tileCache.forEach(((n,r)=>{void 0!==t&&n.dataSource!==t||e(n,r)}))}}const m=(e,t)=>{const n=e.distance-t.distance,r=1e-6*(e.distance+t.distance);return Math.abs(n)<r?e.tileKey.mortonCode()-t.tileKey.mortonCode():n};t.VisibleTileSet=class{constructor(e,t,n,r){var i;this.m_frustumIntersection=e,this.m_tileGeometryManager=t,this.options=n,this.m_taskQueue=r,this.dataSourceTileList=[],this.allVisibleTilesLoaded=!1,this.m_cameraOverride=new a.PerspectiveCamera,this.m_viewRange={near:.1,far:1/0,minimum:.1,maximum:1/0},this.m_coveringMap=new Map,this.m_resourceComputationType=u.EstimationInMb,this.options=n,this.options.maxTilesPerFrame=Math.floor(null!==(i=this.options.maxTilesPerFrame)&&void 0!==i?i:0),this.m_resourceComputationType=void 0===n.resourceComputationType?u.EstimationInMb:n.resourceComputationType,this.m_dataSourceCache=new p(this.options.tileCacheSize,this.m_resourceComputationType)}getDataSourceCacheSize(){return this.options.tileCacheSize}setDataSourceCacheSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.EstimationInMb;this.options.tileCacheSize=e,this.resourceComputationType=t}getNumberOfVisibleTiles(){return this.options.maxVisibleDataSourceTiles}setNumberOfVisibleTiles(e){this.options.maxVisibleDataSourceTiles=e}get maxTilesPerFrame(){return this.options.maxTilesPerFrame}set maxTilesPerFrame(e){if(e<0)throw new Error("Invalid value, this will result in no tiles ever showing");this.options.maxTilesPerFrame=Math.floor(e)}get resourceComputationType(){return this.m_resourceComputationType}set resourceComputationType(e){this.m_resourceComputationType=e,this.m_dataSourceCache.setCapacity(this.options.tileCacheSize,e)}updateClipPlanes(e,t){void 0!==e&&(this.options.clipPlanesEvaluator.maxElevation=e),void 0!==t&&(this.options.clipPlanesEvaluator.minElevation=t);const{camera:n,projection:r,elevationProvider:i}=this.m_frustumIntersection.mapView;return this.m_viewRange=this.options.clipPlanesEvaluator.evaluateClipPlanes(n,r,i),this.m_viewRange}updateRenderList(e,t,n,r,i){let a=!0;const s=this.getVisibleTileKeysForDataSources(t,n,i);this.dataSourceTileList=[],this.m_coveringMap.clear();for(const{dataSource:o,visibleTileKeys:g}of s.tileKeys){g.sort(m);const n=o.getDataZoomLevel(t),i=this.processVisibleTiles(g,o,r,{newTilesPerFrame:0},!0),s=this.processVisibleTiles(i.dependentTiles,o,r,{newTilesPerFrame:0},!1);this.m_tileGeometryManager.updateTiles(i.visibleTiles),this.m_tileGeometryManager.updateTiles(s.visibleTiles),this.dataSourceTileList.push({dataSource:o,storageLevel:e,zoomLevel:n,allVisibleTileLoaded:i.allDataSourceTilesLoaded&&s.allDataSourceTilesLoaded,numTilesLoading:i.numTilesLoading+s.numTilesLoading,visibleTiles:[...i.visibleTiles,...s.visibleTiles],renderedTiles:new Map}),a=a&&i.allDataSourceTilesLoaded}let l,c;this.allVisibleTilesLoaded=a&&s.allBoundingBoxesFinal,this.populateRenderedTiles(),this.forEachCachedTile((e=>{e.isVisible||e.allGeometryLoaded||this.disposeTile(e)})),this.m_dataSourceCache.shrinkToCapacity(),this.dataSourceTileList.forEach((e=>{e.renderedTiles.forEach((t=>{t.update(e.zoomLevel),l=o.MathUtils.min2(l,t.geoBox.minAltitude),c=o.MathUtils.max2(c,t.geoBox.maxAltitude)}))})),void 0===l&&(l=0),void 0===c&&(c=0);let u=!1;const h=this.m_viewRange,d=this.updateClipPlanes(c,l);var p,f;return u=!1===(f=h,(p=d).far===f.far&&p.maximum===f.maximum&&p.minimum===f.minimum&&p.near===f.near),{viewRanges:d,viewRangesChanged:u}}getTile(e,t,n,r){return this.getTileImpl(e,t,n,!1,r)}getCachedTile(e,t,n,r){o.assert(e.cacheable);return this.getTileImpl(e,t,n,!0,r)}getRenderedTile(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.dataSourceTileList.find((t=>t.dataSource===e));if(void 0!==i)return i.renderedTiles.get(r.TileKeyUtils.getKeyForTileKeyAndOffset(t,n))}getRenderedTileAtLocation(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.dataSourceTileList.find((t=>t.dataSource===e));if(void 0===i)return;const o=e.getTilingScheme(),a=i.zoomLevel,s=o.getTileKey(t,a);if(!s)return;let l=i.renderedTiles.get(r.TileKeyUtils.getKeyForTileKeyAndOffset(s,n));if(void 0!==l)return l;const{searchLevelsUp:c,searchLevelsDown:u}=this.getSearchDirection(e,a);let h=s;for(let p=1;p<=c;++p)if(h=h.parent(),l=i.renderedTiles.get(r.TileKeyUtils.getKeyForTileKeyAndOffset(h,n)),void 0!==l)return l;const d=o.projection.projectPoint(t);for(let p=1;p<=u;++p){const e=a+p,t=r.TileKeyUtils.worldCoordinatesToTileKey(o,d,e);if(t&&(l=i.renderedTiles.get(r.TileKeyUtils.getKeyForTileKeyAndOffset(t,n)),void 0!==l))return l}}removeDataSource(e){this.clearTileCache(e),this.dataSourceTileList=this.dataSourceTileList.filter((t=>t.dataSource!==e))}clearTileCache(e,t){void 0!==e?this.m_dataSourceCache.evictSelected(((n,r)=>n.dataSource===e&&(void 0===t||t(n)))):void 0!==t?this.m_dataSourceCache.evictSelected(t):this.m_dataSourceCache.evictAll()}markTilesDirty(e,t){if(void 0===e)this.dataSourceTileList.forEach((e=>{this.markDataSourceTilesDirty(e,t)}));else{const n=this.dataSourceTileList.find((t=>t.dataSource===e));if(void 0===n)return;this.markDataSourceTilesDirty(n,t)}}disposePendingTiles(){this.m_dataSourceCache.disposeTiles()}forEachVisibleTile(e){for(const t of this.dataSourceTileList)t.renderedTiles.forEach(e)}forEachCachedTile(e,t){this.m_dataSourceCache.forEach(((t,n)=>e(t)),t)}disposeTile(e){this.m_dataSourceCache.delete(e),e.dispose()}processVisibleTiles(e,t,n,r,i){var o;let a=!0,s=0;const c=[],u=[];for(let h=0;h<e.length&&c.length<this.options.maxVisibleDataSourceTiles;h++){const d=e[h],p=this.getTile(t,d.tileKey,d.offset,n);if(void 0!==p&&(c.push(p),a=a&&p.allGeometryLoaded,p.allGeometryLoaded?(this.skipOverlappedTiles(t,p),this.processDelayTileRendering(p,r.newTilesPerFrame,n)&&r.newTilesPerFrame++):s++,p.visibleArea=d.area,p.elevationRange=null!==(o=d.elevationRange)&&void 0!==o?o:{minElevation:0,maxElevation:0},i))for(const t of p.dependencies)void 0===e.find((e=>e.tileKey.mortonCode()===t.mortonCode()))&&void 0===u.find((e=>e.tileKey.mortonCode()===t.mortonCode()))&&u.push(new l.TileKeyEntry(t,0))}return{allDataSourceTilesLoaded:a,numTilesLoading:s,visibleTiles:c,dependentTiles:u}}processDelayTileRendering(e,t,n){let r=!1;return 0!==this.options.maxTilesPerFrame&&t>this.options.maxTilesPerFrame&&e.frameNumLastVisible!==n-1?(e.delayRendering=!0,e.mapView.update()):(e.frameNumVisible<0&&(e.frameNumVisible=n,r=!0),e.numFramesVisible++,e.delayRendering=!1),r}skipOverlappedTiles(e,t){if(this.options.projection.type!==r.ProjectionType.Spherical&&e.isFullyCovering()){const n=t.uniqueKey,r=this.m_coveringMap.get(n);void 0===r?(t.skipRendering=!1,this.m_coveringMap.set(n,t)):r.dataSource instanceof s.BackgroundDataSource?r.skipRendering=!0:e instanceof s.BackgroundDataSource&&(t.skipRendering=!0)}}getSearchDirection(e,t){const n=Math.min(this.options.quadTreeSearchDistanceUp,Math.max(0,t-e.minDataLevel)),r=Math.min(this.options.quadTreeSearchDistanceDown,Math.max(0,e.maxDataLevel-t));return{searchDirection:r>0&&n>0?h.BOTH:r>0?h.DOWN:n>0?h.UP:h.NONE,searchLevelsUp:n,searchLevelsDown:r}}populateRenderedTiles(){this.dataSourceTileList.forEach((e=>{const t=e.renderedTiles,n=[];e.visibleTiles.forEach((e=>{e.levelOffset=0,e.hasGeometry&&!e.delayRendering?t.set(e.uniqueKey,e):n.push(e.uniqueKey)}));const r=e.dataSource;if(0===n.length||!1===r.allowOverlappingTiles)return;const i=e.zoomLevel,{searchDirection:o}=this.getSearchDirection(r,i),a=new Map;for(const s of n)(o!==h.BOTH&&o!==h.UP||!this.findUp(s,i,t,a,r))&&(o!==h.BOTH&&o!==h.DOWN||this.findDown(s,i,t,r))}))}findDown(e,t,n,i){const{offset:o,mortonCode:a}=r.TileKeyUtils.extractOffsetAndMortonKeyFromKey(e),s=r.TileKey.fromMortonCode(a),l=i.getTilingScheme();for(const c of l.getSubTileKeys(s)){const e=r.TileKeyUtils.getKeyForTileKeyAndOffset(c,o),a=this.m_dataSourceCache.get(c.mortonCode(),o,i),s=Math.abs(c.level-t);void 0===a||!a.hasGeometry||a.delayRendering?s<this.options.quadTreeSearchDistanceDown&&this.findDown(e,t,n,i):(n.set(e,a),a.levelOffset=s)}}findUp(e,t,n,i,o){const a=r.TileKeyUtils.getParentKeyFromKey(e);if(void 0!==n.get(a))return!0;const s=i.get(a);if(void 0!==s)return s;const{offset:l,mortonCode:c}=r.TileKeyUtils.extractOffsetAndMortonKeyFromKey(a),u=this.m_dataSourceCache.get(c,l,o),h=u?u.tileKey:r.TileKey.fromMortonCode(c),d=Math.abs(t-h.level);if(void 0!==u&&u.hasGeometry&&!u.delayRendering)return i.set(a,!0),n.set(a,u),u.levelOffset=-d,!0;if(i.set(a,!1),d<this.options.quadTreeSearchDistanceUp&&0!==h.level){const e=this.findUp(a,t,n,i,o);if(i.set(a,e),e)return!0}return!1}getTileImpl(e,t,n,r,i){function o(e){e.frameNumLastRequested=i}if(!e.cacheable&&!r){const n=e.getTile(t,!0);return void 0!==n&&(this.addToTaskQueue(n),o(n)),n}const a=this.m_dataSourceCache;let s=a.get(t.mortonCode(),n,e);return void 0!==s&&s.offset===n?(o(s),s):r?void 0:(s=e.getTile(t,!0),void 0!==s&&(this.addToTaskQueue(s),s.offset=n,o(s),a.set(t.mortonCode(),n,e,s)),s)}addToTaskQueue(e){this.m_taskQueue.add({execute:e.load.bind(e),group:c.TileTaskGroups.FETCH_AND_DECODE,getPriority:()=>{var t,n;return null!==(n=null===(t=null===e||void 0===e?void 0:e.tileLoader)||void 0===t?void 0:t.priority)&&void 0!==n?n:0},isExpired:()=>!(null===e||void 0===e?void 0:e.isVisible),estimatedProcessTime:()=>1})}markDataSourceTilesDirty(e,t){const n=this.m_dataSourceCache,r=new Set,i=e=>{var t;const n=p.getKeyForTile(e);r.has(n)||(r.add(n),null===(t=e.tileLoader)||void 0===t||t.cancel(),this.addToTaskQueue(e))};e.visibleTiles.forEach((e=>{(void 0===t||t(e))&&i(e)})),e.renderedTiles.forEach((e=>{(void 0===t||t(e))&&i(e)})),n.forEach(((e,i)=>{void 0!==t&&!t(e)||r.has(i)||(n.deleteByKey(i),e.dispose())}),e.dataSource)}getVisibleTileKeysForDataSources(e,t,n){const r=Array();let i=!0;if(0===t.length)return{tileKeys:r,allBoundingBoxesFinal:i};const o=new Map;t.forEach((e=>{const t=e.getTilingScheme(),n=o.get(t);void 0===n?o.set(t,[e]):n.push(e)})),void 0!==n?(this.m_cameraOverride.copy(this.m_frustumIntersection.camera),this.m_cameraOverride.near=Math.min(this.m_cameraOverride.near,this.m_viewRange.minimum),this.m_cameraOverride.far=Math.max(this.m_cameraOverride.far,this.m_viewRange.maximum),this.m_cameraOverride.updateProjectionMatrix(),this.m_frustumIntersection.updateFrustum(this.m_cameraOverride.projectionMatrix)):this.m_frustumIntersection.updateFrustum();for(const[a,s]of o){const t=s.map((t=>t.getDataZoomLevel(e))),o=this.m_frustumIntersection.compute(a,n,t,s);i=i&&o.calculationFinal;for(const n of s){const t=[],i=n.getDataZoomLevel(e);for(const e of o.tileKeyEntries.get(i).values())n.canGetTile(i,e.tileKey)&&t.push(e);r.push({dataSource:n,visibleTileKeys:t})}}return{tileKeys:r,allBoundingBoxesFinal:i}}}},2391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerBasedDecoder=void 0;const r=n(26309);let i=0;t.WorkerBasedDecoder=class{constructor(e,t){this.workerSet=e,this.decoderServiceType=t,this.m_serviceCreated=!1,this.workerSet.addReference(),this.serviceId=`${this.decoderServiceType}-${i++}`}dispose(){this.m_serviceCreated&&this.workerSet.broadcastRequest(r.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:r.WorkerServiceProtocol.Requests.DestroyService,targetServiceId:this.serviceId}).catch((()=>{})),this.workerSet.removeReference()}async connect(){await this.workerSet.connect(r.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID),this.m_serviceCreated||(await this.workerSet.broadcastRequest(r.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:r.WorkerServiceProtocol.Requests.CreateService,targetServiceType:this.decoderServiceType,targetServiceId:this.serviceId}),this.m_serviceCreated=!0)}decodeTile(e,t,n,i){const o=t.mortonCode(),a={type:r.WorkerDecoderProtocol.Requests.DecodeTileRequest,tileKey:o,data:e,projection:r.getProjectionName(n)},s=e instanceof ArrayBuffer?[e]:void 0;return this.workerSet.invokeRequest(this.serviceId,a,s,i)}getTileInfo(e,t,n,i){const o=t.mortonCode(),a={type:r.WorkerDecoderProtocol.Requests.TileInfoRequest,tileKey:o,data:e,projection:r.getProjectionName(n)},s=e instanceof ArrayBuffer?[e]:void 0;return this.workerSet.invokeRequest(this.serviceId,a,s,i)}configure(e,t){const n=Object.assign(Object.assign({service:this.serviceId,type:r.WorkerDecoderProtocol.DecoderMessageName.Configuration},e),{options:t});this.workerSet.broadcastMessage(n)}get workerCount(){return this.workerSet.workerCount}}},56367:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerBasedTiler=void 0;const r=n(26309);let i=0;t.WorkerBasedTiler=class{constructor(e,t){this.workerSet=e,this.tilerServiceType=t,this.m_serviceCreated=!1,this.workerSet.addReference(),this.serviceId=`${this.tilerServiceType}-${i++}`}dispose(){this.m_serviceCreated&&this.workerSet.broadcastRequest(r.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:r.WorkerServiceProtocol.Requests.DestroyService,targetServiceId:this.serviceId}).catch((()=>{})),this.workerSet.removeReference()}async connect(){await this.workerSet.connect(r.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID),this.m_serviceCreated||(await this.workerSet.broadcastRequest(r.WorkerServiceProtocol.WORKER_SERVICE_MANAGER_SERVICE_ID,{type:r.WorkerServiceProtocol.Requests.CreateService,targetServiceType:this.tilerServiceType,targetServiceId:this.serviceId}),this.m_serviceCreated=!0)}registerIndex(e,t){const n={type:r.WorkerTilerProtocol.Requests.RegisterIndex,id:e,input:t instanceof URL?t.href:t};return this.workerSet.invokeRequest(this.serviceId,n)}updateIndex(e,t){const n={type:r.WorkerTilerProtocol.Requests.UpdateIndex,id:e,input:t instanceof URL?t.href:t};return this.workerSet.invokeRequest(this.serviceId,n)}getTile(e,t){const n=t.mortonCode(),i={type:r.WorkerTilerProtocol.Requests.TileRequest,index:e,tileKey:n};return this.workerSet.invokeRequest(this.serviceId,i)}}},2011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LowResRenderPass=void 0;const r=n(85164),i=n(534),o=n(87585);class a extends o.Pass{constructor(e){super(),this.lowResPixelRatio=e,this.m_renderTarget=null,this.m_localCamera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.m_quadScene=new i.Scene,this.m_quadUniforms=r.CopyShader.uniforms,this.m_quadMaterial=new r.CopyMaterial(this.m_quadUniforms),this.m_quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),this.m_quadMaterial),this.m_savedWidth=0,this.m_savedHeight=0,this.m_quad.frustumCulled=!1,this.m_quadScene.add(this.m_quad),this.m_pixelRatio=e}dispose(){this.m_quadMaterial.dispose(),this.m_quad.geometry.dispose(),null!==this.m_renderTarget&&(this.m_renderTarget.dispose(),this.m_renderTarget=null)}set pixelRatio(e){this.m_pixelRatio=e,this.m_renderTarget&&void 0!==this.pixelRatio&&this.m_renderTarget.setSize(Math.floor(this.m_savedWidth*this.pixelRatio),Math.floor(this.m_savedHeight*this.pixelRatio))}get pixelRatio(){return this.m_pixelRatio}render(e,t,n,r,o){if(!this.enabled||void 0===this.pixelRatio)return;null===this.m_renderTarget&&(this.m_savedWidth=o.width,this.m_savedHeight=o.height,this.m_renderTarget=new i.WebGLRenderTarget(Math.floor(this.m_savedWidth*this.pixelRatio),Math.floor(this.m_savedHeight*this.pixelRatio),{minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,depthBuffer:!0,stencilBuffer:!0}),this.m_renderTarget.texture.name="LowResRenderPass.sample"),this.m_quadUniforms.tDiffuse.value=this.m_renderTarget.texture,this.m_quadUniforms.opacity.value=1;const a=e.getRenderTarget();e.setRenderTarget(this.m_renderTarget),e.clear(),e.render(t,n),e.setRenderTarget(this.renderToScreen?null:r),e.clear(),e.render(this.m_quadScene,this.m_localCamera),e.setRenderTarget(a)}setSize(e,t){this.m_savedWidth=e,this.m_savedHeight=t,this.m_renderTarget&&void 0!==this.pixelRatio&&this.m_renderTarget.setSize(Math.floor(e*this.pixelRatio),Math.floor(t*this.pixelRatio))}}t.LowResRenderPass=a},42773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSAARenderPass=t.MSAASampling=void 0;const r=n(85164),i=n(534),o=n(87585);var a;!function(e){e[e.Level_0=0]="Level_0",e[e.Level_1=1]="Level_1",e[e.Level_2=2]="Level_2",e[e.Level_3=3]="Level_3",e[e.Level_4=4]="Level_4",e[e.Level_5=5]="Level_5"}(a=t.MSAASampling||(t.MSAASampling={}));class s extends o.Pass{constructor(){super(),this.samplingLevel=a.Level_1,this.m_renderTarget=null,this.m_localCamera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.m_quadScene=new i.Scene,this.m_quadUniforms=r.CopyShader.uniforms,this.m_quadMaterial=new r.MSAAMaterial(this.m_quadUniforms),this.m_quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),this.m_quadMaterial),this.m_tmpColor=new i.Color,this.m_quad.frustumCulled=!1,this.m_quadScene.add(this.m_quad)}dispose(){null!==this.m_renderTarget&&(this.m_renderTarget.dispose(),this.m_renderTarget=null)}render(e,t,n,r,o){if(!this.enabled)return;null===this.m_renderTarget&&(this.m_renderTarget=new i.WebGLRenderTarget(o.width,o.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat}),this.m_renderTarget.texture.name="MSAARenderPass.sample"),this.m_quadUniforms.tDiffuse.value=this.m_renderTarget.texture;const a=s.OffsetVectors[this.samplingLevel],l=e.getClearColor(this.m_tmpColor),c=void 0!==l?l.getHex():0,u={enabled:null!==n.view&&n.view.enabled,fullWidth:o.width,fullHeight:o.height,x:0,y:0,width:o.width,height:o.height};u.enabled&&null!==n.view&&(u.fullWidth=n.view.fullWidth,u.fullHeight=n.view.fullHeight,u.x=n.view.offsetX,u.y=n.view.offsetY,u.width=n.view.width,u.height=n.view.height);const h=e.getRenderTarget();for(let i=0;i<a.length;i++){const o=a[i];n.setViewOffset(u.fullWidth,u.fullHeight,u.x+o[0]/16,u.y+o[1]/16,u.width,u.height);const s=(i+.5)/a.length-.5,h=1/a.length+s/32;this.m_quadUniforms.opacity.value=h,e.setRenderTarget(this.m_renderTarget),e.clear(),e.render(t,n),e.setRenderTarget(this.renderToScreen?null:r),0===i&&(e.setClearColor(0),e.clear()),e.render(this.m_quadScene,this.m_localCamera),0===i&&void 0!==l&&e.setClearColor(c)}e.setRenderTarget(h),null!==n.view&&(n.view.enabled=u.enabled,n.view.offsetX=u.x,n.view.offsetY=u.y)}setSize(e,t){this.m_renderTarget&&this.m_renderTarget.setSize(e,t)}}t.MSAARenderPass=s,s.OffsetVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]},53801:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapRenderingManager=void 0;const r=n(85164),i=n(534),o=n(2011),a=n(42773),s=n(17011),l=n(87585),c=n(10711),u=a.MSAASampling.Level_1,h=a.MSAASampling.Level_4;t.MapRenderingManager=class{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{msaaEnabled:!1};this.bloom={enabled:!1,strength:1.5,radius:.4,threshold:.85},this.outline={enabled:!1,thickness:.005,color:"#000000",ghostExtrudedPolygons:!1,needsUpdate:!1},this.vignette={enabled:!1,offset:1,darkness:1},this.sepia={enabled:!1,amount:.5},this.m_width=1,this.m_height=1,this.m_renderPass=new l.RenderPass,this.m_target1=new i.WebGLRenderTarget(1,1),this.m_target2=new i.WebGLRenderTarget(1,1),this.m_sepiaPass=new l.ShaderPass(r.SepiaShader),this.m_vignettePass=new l.ShaderPass(r.VignetteShader),this.m_readBuffer=new i.WebGLRenderTarget(e,t),this.m_msaaPass=new a.MSAARenderPass,this.m_msaaPass.enabled=void 0!==s&&!0===s.msaaEnabled,this.m_dynamicMsaaSamplingLevel=void 0===s.dynamicMsaaSamplingLevel?u:s.dynamicMsaaSamplingLevel,this.m_staticMsaaSamplingLevel=void 0===s.staticMsaaSamplingLevel?h:s.staticMsaaSamplingLevel,this.m_lowResPass=new o.LowResRenderPass(n),this.m_lowResPass.enabled=void 0!==n}updateOutline(e){this.outline.color=e.color,this.outline.thickness=e.thickness,this.outline.ghostExtrudedPolygons=e.ghostExtrudedPolygons,this.outline.needsUpdate=!0}render(e,t,n,r){if(!r&&void 0!==this.m_lowResPass.pixelRatio)return this.m_lowResPass.renderToScreen=!0,void this.m_lowResPass.render(e,t,n,null,this.m_readBuffer);const o=this.bloom.enabled||this.outline.enabled||this.vignette.enabled||this.sepia.enabled;let a=null;if((this.bloom.enabled||this.vignette.enabled||this.sepia.enabled)&&(e.setRenderTarget(this.m_target1),e.clearDepth()),this.m_msaaPass.enabled?(this.m_msaaPass.samplingLevel=r?this.m_staticMsaaSamplingLevel:this.m_dynamicMsaaSamplingLevel,this.m_msaaPass.renderToScreen=!o,this.m_msaaPass.render(e,t,n,null,this.m_readBuffer)):this.bloom.enabled||this.vignette.enabled||this.sepia.enabled?(a=this.m_target1,this.m_renderPass.render(e,t,n,this.m_target1,null)):(!this.outline.enabled||this.outline.enabled&&!this.bloom.enabled)&&e.render(t,n),this.outline.enabled){void 0===this.m_outlineEffect&&(this.m_outlineEffect=new s.OutlineEffect(e)),this.outline.needsUpdate&&(this.m_outlineEffect.color=this.outline.color,this.m_outlineEffect.thickness=this.outline.thickness,this.m_outlineEffect.ghostExtrudedPolygons=this.outline.ghostExtrudedPolygons,this.outline.needsUpdate=!1);const r=this.bloom.enabled||this.vignette.enabled||this.sepia.enabled;r&&(a=this.m_target1),e.setRenderTarget(r?a:null),this.m_outlineEffect.render(t,n)}if(this.bloom.enabled){void 0===this.m_bloomPass&&(this.m_bloomPass=new c.BloomPass(new i.Vector2(this.m_width,this.m_height),this.bloom.strength,this.bloom.radius,this.bloom.threshold));const r=this.vignette.enabled||this.sepia.enabled;this.m_bloomPass.renderToScreen=!r,this.m_bloomPass.radius=this.bloom.radius,this.m_bloomPass.strength=this.bloom.strength,this.m_bloomPass.threshold=this.bloom.threshold,this.m_bloomPass.render(e,t,n,null,a)}else void 0!==this.m_bloomPass&&(this.m_bloomPass.dispose(),this.m_bloomPass=void 0);if(this.vignette.enabled){const r=a,i=this.sepia.enabled;this.m_vignettePass.uniforms.offset.value=this.vignette.offset,this.m_vignettePass.uniforms.darkness.value=this.vignette.darkness,this.m_vignettePass.renderToScreen=!i,i&&(a=a===this.m_target1?this.m_target2:this.m_target1),this.m_vignettePass.render(e,t,n,a,r)}this.sepia.enabled&&(this.m_sepiaPass.renderToScreen=!0,this.m_sepiaPass.uniforms.amount.value=this.sepia.amount,this.m_sepiaPass.render(e,t,n,null,a))}setSize(e,t){this.m_readBuffer.setSize(e,t),this.m_msaaPass.setSize(e,t),void 0!==this.m_bloomPass&&this.m_bloomPass.setSize(e,t),this.m_lowResPass.setSize(e,t),this.m_target1.setSize(e,t),this.m_target2.setSize(e,t),this.m_width=e,this.m_height=t}get lowResPixelRatio(){return this.m_lowResPass.pixelRatio}set lowResPixelRatio(e){this.m_lowResPass.pixelRatio=e,this.m_lowResPass.enabled=void 0!==e}set dynamicMsaaSamplingLevel(e){this.m_dynamicMsaaSamplingLevel=e}get dynamicMsaaSamplingLevel(){return this.m_dynamicMsaaSamplingLevel}set msaaEnabled(e){this.m_msaaPass.enabled=e}get msaaEnabled(){return this.m_msaaPass.enabled}set staticMsaaSamplingLevel(e){this.m_staticMsaaSamplingLevel=e}get staticMsaaSamplingLevel(){return this.m_staticMsaaSamplingLevel}}},17011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineEffect=void 0;const r=n(85164),i=n(15739),o=n(534);t.OutlineEffect=class{constructor(e){this.m_renderer=e,this.enabled=!0,this.m_defaultThickness=.02,this.m_defaultColor=new o.Color(0,0,0),this.m_defaultAlpha=1,this.m_defaultKeepAlive=!1,this.m_ghostExtrudedPolygons=!1,this.m_cache={},this.m_removeThresholdCount=60,this.m_originalMaterials={},this.m_originalOnBeforeRenders={},this.m_shaderIDs={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"},this.m_uniformsChunk={outlineThickness:{value:this.m_defaultThickness},outlineColor:{value:this.m_defaultColor},outlineAlpha:{value:this.m_defaultAlpha}},this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap}set thickness(e){this.m_defaultThickness=e,this.m_uniformsChunk.outlineThickness.value=e,this.m_cache={}}set color(e){this.m_defaultColor.set(e),this.m_cache={}}set ghostExtrudedPolygons(e){this.m_ghostExtrudedPolygons=e}clear(e,t,n){this.m_renderer.clear(e,t,n)}getPixelRatio(){return this.m_renderer.getPixelRatio()}setPixelRatio(e){this.m_renderer.setPixelRatio(e)}getSize(e){return this.m_renderer.getSize(e)}setSize(e,t,n){this.m_renderer.setSize(e,t,n)}setViewport(e,t,n,r){this.m_renderer.setViewport(e,t,n,r)}setScissor(e,t,n,r){this.m_renderer.setScissor(e,t,n,r)}setScissorTest(e){this.m_renderer.setScissorTest(e)}setRenderTarget(e){this.m_renderer.setRenderTarget(e)}render(e,t){if(this.m_ghostExtrudedPolygons){if(!this.enabled)return void this.m_renderer.render(e,t);const n=this.m_renderer.autoClear;this.m_renderer.autoClear=this.autoClear,this.m_renderer.render(e,t),this.m_renderer.autoClear=n}this.renderOutline(e,t)}renderOutline(e,t){const n=this.m_renderer.autoClear,r=e.autoUpdate,i=e.background,o=this.m_renderer.shadowMap.enabled;e.autoUpdate=!1,e.background=null,this.m_renderer.autoClear=!1,this.m_renderer.shadowMap.enabled=!1,e.traverse(this.setOutlineMaterial.bind(this)),this.m_renderer.render(e,t),e.traverse(this.restoreOriginalMaterial.bind(this)),this.cleanupCache(),e.autoUpdate=r,e.background=i,this.m_renderer.autoClear=n,this.m_renderer.shadowMap.enabled=o}createInvisibleMaterial(){return new o.ShaderMaterial({name:"invisible",visible:!1})}createMaterial(e){if(e instanceof r.EdgeMaterial||!0===e.isDepthPrepassMaterial)return this.createInvisibleMaterial();const t=this.m_shaderIDs[e.type];let n,i=void 0!==e.shaderUniforms?e.shaderUniforms:e.uniforms;if(void 0!==t){const e=o.ShaderLib[t];i=e.uniforms,n=e.vertexShader}else if(!0===e.isRawShaderMaterial){if(n=e.vertexShader,!/attribute\s+vec3\s+position\s*;/.test(n)||!/attribute\s+vec3\s+normal\s*;/.test(n))return this.createInvisibleMaterial()}else{if(!0!==e.isShaderMaterial)return this.createInvisibleMaterial();n=e.vertexShader}const a=void 0!==e.shaderUniforms&&void 0!==e.shaderUniforms.extrusionRatio,s=r.FadingFeature.isDefined(e),l=Object.assign(Object.assign({},i),this.m_uniformsChunk),c=n.replace(/void\s+main\s*\(\s*\)/,"\n#ifdef USE_EXTRUSION\n  #ifndef HAS_EXTRUSION_PARS_VERTEX\n    #include <extrusion_pars_vertex>\n  #endif\n#endif\n\n#ifdef USE_FADING\n  #include <fading_pars_vertex>\n#endif\n\nuniform float outlineThickness;\n\nvec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {\n    float thickness = outlineThickness;\n    const float ratio = 1.0;\n    vec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );\n    vec4 norm = normalize( pos - pos2 );\n    return pos + norm * thickness * pos.w * ratio;\n}\nvoid main()").replace(/\}\s*$/,"\n#if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( STANDARD )\n    #ifndef USE_ENVMAP\n        vec3 objectNormal = normalize( normal );\n    #endif\n#endif\n\n#ifdef FLIP_SIDED\n    objectNormal = -objectNormal;\n#endif\n\n#ifdef DECLARE_TRANSFORMED\n    vec3 transformed = vec3( position );\n#endif\n\n#ifdef USE_EXTRUSION\n #ifndef HAS_EXTRUSION_VERTEX\n  #include <extrusion_vertex>\n #endif\n#endif\n\n#ifdef USE_FADING\n  #include <fading_vertex>\n#endif\n\n#ifdef USE_EXTRUSION\n  gl_Position = calculateOutline( projectionMatrix * modelViewMatrix * vec4( transformed, 1.0 ),\n      objectNormal, vec4( transformed, 1.0 ) );\n#else\n  gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );\n#endif\n\n#include <fog_vertex>\n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),u={};/vec3\s+transformed\s*=/.test(n)||/#include\s+<begin_vertex>/.test(n)||(u.DECLARE_TRANSFORMED=!0),a&&(l.extrusionRatio={value:r.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN},u.USE_EXTRUSION=1),s&&(l.fadeNear={value:void 0!==i.fadeNear?i.fadeNear.value:r.FadingFeature.DEFAULT_FADE_NEAR},l.fadeFar={value:void 0!==i.fadeFar?i.fadeFar.value:r.FadingFeature.DEFAULT_FADE_FAR},u.USE_FADING=1);return new o.ShaderMaterial({defines:u,uniforms:l,vertexShader:c,fragmentShader:"\n#include <common>\n#include <fog_pars_fragment>\n\n#ifdef USE_EXTRUSION\n  #include <extrusion_pars_fragment>\n#endif\n\n#ifdef USE_FADING\n  #include <fading_pars_fragment>\n#endif\n\nuniform vec3 outlineColor;\nuniform float outlineAlpha;\n\nvoid main() {\n\n    gl_FragColor = vec4( outlineColor, outlineAlpha );\n\n    #include <fog_fragment>\n\n    #ifdef USE_EXTRUSION\n      #include <extrusion_fragment>\n    #endif\n\n    #ifdef USE_FADING\n      #include <fading_fragment>\n    #endif\n}",side:o.BackSide,morphTargets:!1,morphNormals:!1,fog:!1,blending:o.CustomBlending,blendSrc:o.SrcAlphaFactor,blendDst:o.OneMinusSrcAlphaFactor,blendSrcAlpha:o.OneFactor,blendDstAlpha:o.OneMinusSrcAlphaFactor,transparent:!0,polygonOffset:!0,polygonOffsetFactor:10,polygonOffsetUnits:30})}getOutlineMaterialFromCache(e){let t=this.m_cache[e.uuid];return void 0===t&&(t={material:this.createMaterial(e),used:!0,keepAlive:this.m_defaultKeepAlive,count:0},this.m_cache[e.uuid]=t),t.used=!0,t.material}getOutlineMaterial(e){const t=this.getOutlineMaterialFromCache(e);return this.m_originalMaterials[t.uuid]=e,this.updateOutlineMaterial(t,e),t}setOutlineMaterial(e){if(void 0!==e.material){if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)e.material[t]=this.getOutlineMaterial(e.material[t]);else e.material=this.getOutlineMaterial(e.material);this.m_originalOnBeforeRenders[e.uuid]=e.onBeforeRender,e.onBeforeRender=i.chainCallbacks(e.onBeforeRender,this.onBeforeRender.bind(this))}}restoreOriginalMaterial(e){if(void 0!==e.material){if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)e.material[t]=this.m_originalMaterials[e.material[t].uuid];else e.material=this.m_originalMaterials[e.material.uuid];e.onBeforeRender=this.m_originalOnBeforeRenders[e.uuid]}}onBeforeRender(e,t,n,r,i,o){const a=this.m_originalMaterials[i.uuid];void 0!==a&&this.updateUniforms(i,a)}updateUniforms(e,t){var n;const i=t.userData.outlineParameters,o=e.uniforms;o.outlineAlpha.value=t.opacity;const a=void 0!==t.shaderUniforms?t.shaderUniforms:t.uniforms;if(void 0!==i&&(void 0!==i.thickness&&(o.outlineThickness.value=i.thickness),void 0!==i.color&&o.outlineColor.value.fromArray(i.color),void 0!==i.alpha&&(o.outlineAlpha.value=i.alpha)),void 0!==a&&void 0!==a.extrusionRatio){const n=t.shaderUniforms.extrusionRatio.value;e.extrusionRatio=n,e.uniforms.extrusionRatio.value=void 0!==n?n:r.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN}void 0!==(null===(n=e.defines)||void 0===n?void 0:n.USE_FADING)&&void 0!==a.fadeNear&&void 0!==a.fadeFar&&a.fadeFar.value>=0&&(o.fadeNear.value=a.fadeNear.value,o.fadeFar.value=a.fadeFar.value)}updateOutlineMaterial(e,t){if("invisible"===e.name)return;const n=t.userData.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==n?(e.visible=!1!==t.visible&&(void 0===n.visible||n.visible),void 0!==n.keepAlive&&(this.m_cache[t.uuid].keepAlive=n.keepAlive)):e.visible=t.visible,!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1)}cleanupCache(){let e;e=Object.keys(this.m_originalMaterials);for(let t=0,n=e.length;t<n;t++)this.m_originalMaterials[e[t]]=void 0;e=Object.keys(this.m_originalOnBeforeRenders);for(let t=0,n=e.length;t<n;t++)this.m_originalOnBeforeRenders[e[t]]=void 0;e=Object.keys(this.m_cache);for(const t of e)!1===this.m_cache[t].used?(this.m_cache[t].count++,!1===this.m_cache[t].keepAlive&&this.m_cache[t].count>this.m_removeThresholdCount&&delete this.m_cache[t]):(this.m_cache[t].used=!1,this.m_cache[t].count=0)}}},87585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderPass=t.RenderPass=t.Pass=void 0;const r=n(534);class i{constructor(){this.enabled=!1,this.renderToScreen=!1}setSize(e,t){}render(e,t,n,r,i,o){}}t.Pass=i;t.RenderPass=class extends i{constructor(){super()}render(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:r),e.render(t,n)}};t.ShaderPass=class extends i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tDiffuse";super(),this.textureID=t,e instanceof r.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=r.UniformsUtils.clone(e.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new o(this.material)}render(e,t,n,r,i,o){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,e.setRenderTarget(this.renderToScreen?null:r),this.fsQuad.render(e)}};class o{constructor(e){this.m_camera=new r.OrthographicCamera(-1,1,1,-1,0,1);const t=new r.PlaneBufferGeometry(2,2);this.m_mesh=new r.Mesh(t,e)}get material(){return this.m_mesh.material}set material(e){this.m_mesh.material=e}render(e){e.render(this.m_mesh,this.m_camera)}}},10711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BloomPass=void 0;const r=n(85164),i=n(534),o=n(87585),a=new i.Vector2(1,0),s=new i.Vector2(0,1);class l extends o.Pass{constructor(e,t,n,o){super(),this.resolution=new i.Vector2(256,256),this.m_renderTargetsHorizontal=[],this.m_renderTargetsVertical=[],this.m_nMips=5,this.m_separableBlurMaterials=[],this.m_camera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.m_scene=new i.Scene,this.m_basic=new i.MeshBasicMaterial,this.m_quad=new i.Mesh(new i.PlaneBufferGeometry(2,2)),this.m_bloomTintColors=[new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1)],this.strength=t,this.radius=n,this.threshold=o,this.resolution=e,this.m_quad.frustumCulled=!1,this.m_scene.add(this.m_quad);const a={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat};let s=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.m_renderTargetBright=new i.WebGLRenderTarget(s,l,a),this.m_renderTargetBright.texture.name="UnrealBloomPass.bright",this.m_renderTargetBright.texture.generateMipmaps=!1;for(let r=0;r<this.m_nMips;r++){const e=new i.WebGLRenderTarget(s,l,a);e.texture.name="UnrealBloomPass.h"+r,e.texture.generateMipmaps=!1,this.m_renderTargetsHorizontal.push(e);const t=new i.WebGLRenderTarget(s,l,a);t.texture.name="UnrealBloomPass.v"+r,t.texture.generateMipmaps=!1,this.m_renderTargetsVertical.push(t),s=Math.round(s/2),l=Math.round(l/2)}this.m_highPassUniforms=i.UniformsUtils.clone(r.LuminosityHighPassShader.uniforms),this.m_highPassUniforms.luminosityThreshold.value=o,this.m_highPassUniforms.smoothWidth.value=.01,this.m_materialHighPassFilter=new i.ShaderMaterial({uniforms:this.m_highPassUniforms,vertexShader:r.LuminosityHighPassShader.vertexShader,fragmentShader:r.LuminosityHighPassShader.fragmentShader,defines:{}});const c=[3,5,7,9,11];s=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let r=0;r<this.m_nMips;r++)this.m_separableBlurMaterials.push(this.getSeperableBlurMaterial(c[r])),this.m_separableBlurMaterials[r].uniforms.texSize.value=new i.Vector2(s,l),s=Math.round(s/2),l=Math.round(l/2);this.m_compositeMaterial=this.getCompositeMaterial(this.m_nMips),this.m_compositeMaterial.uniforms.blurTexture1.value=this.m_renderTargetsVertical[0].texture,this.m_compositeMaterial.uniforms.blurTexture2.value=this.m_renderTargetsVertical[1].texture,this.m_compositeMaterial.uniforms.blurTexture3.value=this.m_renderTargetsVertical[2].texture,this.m_compositeMaterial.uniforms.blurTexture4.value=this.m_renderTargetsVertical[3].texture,this.m_compositeMaterial.uniforms.blurTexture5.value=this.m_renderTargetsVertical[4].texture,this.m_compositeMaterial.uniforms.bloomStrength.value=t,this.m_compositeMaterial.uniforms.bloomRadius.value=.1,this.m_compositeMaterial.needsUpdate=!0;this.m_compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.m_compositeMaterial.uniforms.bloomTintColors.value=this.m_bloomTintColors,this.m_copyUniforms=i.UniformsUtils.clone(r.CopyShader.uniforms),this.m_copyUniforms.opacity.value=1,this.m_materialCopy=new i.ShaderMaterial({uniforms:this.m_copyUniforms,vertexShader:r.CopyShader.vertexShader,fragmentShader:r.CopyShader.fragmentShader,blending:i.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0})}dispose(){for(const e of this.m_renderTargetsHorizontal)e.dispose();for(const e of this.m_renderTargetsVertical)e.dispose();this.m_renderTargetBright.dispose()}setSize(e,t){let n=Math.round(e/2),r=Math.round(t/2);this.m_renderTargetBright.setSize(n,r);for(let o=0;o<this.m_nMips;o++)this.m_renderTargetsHorizontal[o].setSize(n,r),this.m_renderTargetsVertical[o].setSize(n,r),this.m_separableBlurMaterials[o].uniforms.texSize.value=new i.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(e,t,n,r,i){this.renderToScreen&&(this.m_quad.material=this.m_basic,this.m_basic.map=i.texture,e.setRenderTarget(null),e.clear(),e.render(this.m_scene,this.m_camera)),this.m_highPassUniforms.tDiffuse.value=i.texture,this.m_highPassUniforms.luminosityThreshold.value=this.threshold,this.m_quad.material=this.m_materialHighPassFilter,e.setRenderTarget(this.m_renderTargetBright),e.clear(),e.render(this.m_scene,this.m_camera);let o=this.m_renderTargetBright;for(let l=0;l<this.m_nMips;l++)this.m_quad.material=this.m_separableBlurMaterials[l],this.m_separableBlurMaterials[l].uniforms.colorTexture.value=o.texture,this.m_separableBlurMaterials[l].uniforms.direction.value=a,e.setRenderTarget(this.m_renderTargetsHorizontal[l]),e.clear(),e.render(this.m_scene,this.m_camera),this.m_separableBlurMaterials[l].uniforms.colorTexture.value=this.m_renderTargetsHorizontal[l].texture,this.m_separableBlurMaterials[l].uniforms.direction.value=s,e.setRenderTarget(this.m_renderTargetsVertical[l]),e.clear(),e.render(this.m_scene,this.m_camera),o=this.m_renderTargetsVertical[l];this.m_quad.material=this.m_compositeMaterial,this.m_compositeMaterial.uniforms.bloomStrength.value=this.strength,this.m_compositeMaterial.uniforms.bloomRadius.value=this.radius,this.m_compositeMaterial.uniforms.bloomTintColors.value=this.m_bloomTintColors,e.setRenderTarget(this.m_renderTargetsHorizontal[0]),e.clear(),e.render(this.m_scene,this.m_camera),this.m_quad.material=this.m_materialCopy,this.m_copyUniforms.tDiffuse.value=this.m_renderTargetsHorizontal[0].texture,this.renderToScreen?(e.setRenderTarget(null),e.render(this.m_scene,this.m_camera)):(e.setRenderTarget(i),e.render(this.m_scene,this.m_camera))}getSeperableBlurMaterial(e){return new i.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new i.Vector2(.5,.5)},direction:{value:new i.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }",fragmentShader:"#include <common>\n            varying vec2 vUv;\n            uniform sampler2D colorTexture;\n            uniform vec2 texSize;\n            uniform vec2 direction;\n\n            float gaussianPdf(in float x, in float sigma) {\n                return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n            }\n            void main() {\n                vec2 invSize = 1.0 / texSize;\n                float fSigma = float(SIGMA);\n                float weightSum = gaussianPdf(0.0, fSigma);\n                vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n                for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n                    float x = float(i);\n                    float w = gaussianPdf(x, fSigma);\n                    vec2 uvOffset = direction * invSize * x;\n                    vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n                    vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n                    diffuseSum += (sample1 + sample2) * w;\n                    weightSum += 2.0 * w;\n                }\n                gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n            }"})}getCompositeMaterial(e){return new i.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"varying vec2 vUv;\n                uniform sampler2D blurTexture1;\n                uniform sampler2D blurTexture2;\n                uniform sampler2D blurTexture3;\n                uniform sampler2D blurTexture4;\n                uniform sampler2D blurTexture5;\n                uniform sampler2D dirtTexture;\n                uniform float bloomStrength;\n                uniform float bloomRadius;\n                uniform float bloomFactors[NUM_MIPS];\n                uniform vec3 bloomTintColors[NUM_MIPS];\n\n                float lerpBloomFactor(const in float factor) {\n                    float mirrorFactor = 1.2 - factor;\n                    return mix(factor, mirrorFactor, bloomRadius);\n                }\n\n                void main() {\n                    gl_FragColor = bloomStrength * (\nlerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\nlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\nlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\nlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\nlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n                }"})}}t.BloomPass=l},86550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSAASampling=t.MSAARenderPass=t.Pass=t.MapRenderingManager=void 0;var r=n(53801);Object.defineProperty(t,"MapRenderingManager",{enumerable:!0,get:function(){return r.MapRenderingManager}});var i=n(87585);Object.defineProperty(t,"Pass",{enumerable:!0,get:function(){return i.Pass}});var o=n(42773);Object.defineProperty(t,"MSAARenderPass",{enumerable:!0,get:function(){return o.MSAARenderPass}}),Object.defineProperty(t,"MSAASampling",{enumerable:!0,get:function(){return o.MSAASampling}})},8140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightCoverageProvider=void 0;const r=n(15739),i=n(15950);t.CopyrightCoverageProvider=class{constructor(){this.logger=r.LoggerManager.instance.create("CopyrightCoverageProvider")}getTree(){return void 0!==this.m_cachedTreePromise||(this.m_cachedTreePromise=this.getCopyrightCoverageData().then((e=>this.initRBush(e))).catch((e=>(this.logger.error(e),new i)))),this.m_cachedTreePromise}async getCopyrights(e,t){const n=[],i=(await this.getTree()).search({minX:e.west,minY:e.south,maxX:e.east,maxY:e.north});for(const o of i){const e=r.getOptionValue(o.minLevel,0),i=r.getOptionValue(o.maxLevel,1/0);t>=e&&t<=i&&void 0===n.find((e=>e.id===o.label))&&n.push({id:o.label})}return n}initRBush(e){const t=new i;if(!e)return this.logger.warn("No copyright coverage data provided"),t;for(const n of e){const{minLevel:e,maxLevel:r,label:i,alt:o}=n;if(n.boxes)for(const a of n.boxes){const[n,s,l,c]=a;t.insert({minX:s,minY:n,maxX:c,maxY:l,minLevel:e,maxLevel:r,label:i,alt:o})}else t.insert({minX:-180,minY:-90,maxX:180,maxY:180,minLevel:e,maxLevel:r,label:i,alt:o})}return t}}},56951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightElementHandler=void 0;const r=n(15739),i=n(65312),o=n(52210);class a{constructor(e,t){if(this.m_defaults=new Map,this.m_mapViews=[],this.update=()=>{var e;const t=this.m_mapViews.map((e=>e.copyrightInfo)).reduce(o.CopyrightInfo.mergeArrays,null!==(e=this.staticInfo)&&void 0!==e?e:[]);if(0===t.length)return void(this.m_element.style.display="none");if(this.m_element.style.display="block",0!==this.m_defaults.size)for(const i of t){const e=this.m_defaults.get(i.id);void 0!==e&&(i.year=r.getOptionValue(i.year,e.year),i.label=r.getOptionValue(i.label,e.label),i.link=r.getOptionValue(i.link,e.link))}const n=o.CopyrightInfo.mergeArrays(t);this.m_element.innerHTML=o.CopyrightInfo.formatAsHtml(n)},"string"===typeof e){const t=document.getElementById(e);if(!t)throw new Error(`CopyrightElementHandler: unable to find DOM element #${e}`);this.m_element=t}else this.m_element=e;void 0!==t&&this.attach(t)}static install(e,t){return new a(e,t)}destroy(){for(const e of this.m_mapViews)e.removeEventListener(i.MapViewEventNames.CopyrightChanged,this.update)}attach(e){return this.m_mapViews.push(e),e.addEventListener(i.MapViewEventNames.CopyrightChanged,this.update),this.update(),this}detach(e){return e.removeEventListener(i.MapViewEventNames.CopyrightChanged,this.update),this.m_mapViews=this.m_mapViews.filter((t=>t!==e)),this.update(),this}setDefaults(e){if(this.m_defaults.clear(),void 0!==e)for(const t of e)this.m_defaults.set(t.id,t);return this}setStaticCopyightInfo(e){return this.staticInfo=e,this}}t.CopyrightElementHandler=a},52210:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyrightInfo=void 0;const r=n(15739);!function(e){e.mergeArrays=function(e,t){const n=[];for(const i of[e,t])if(void 0!==i)for(const e of i){const t=n.find((t=>t.id===e.id||void 0!==t.label&&t.label===e.label));void 0===t?n.push(Object.assign({},e)):(t.year=r.MathUtils.max2(e.year,t.year),t.label=r.getOptionValue(e.label,t.label),t.link=r.getOptionValue(e.link,t.link))}return n},e.formatAsHtml=function(e){if(0===e.length)return"";const t=e.filter((e=>""!==e.label));return 0===t.length?"":"\xa9 "+t.map((e=>{var t;const n=null!==(t=e.label)&&void 0!==t?t:e.id,r=void 0!==e.year?`${e.year} ${n}`:n,i=e.link;return i?`<a href="${i}" target="_blank" rel="noreferrer noopener">${r}</a>`:`${r}`})).join(", ")}}(t.CopyrightInfo||(t.CopyrightInfo={}))},34495:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlCopyrightProvider=void 0;const r=n(99383),i=n(8140);class o extends i.CopyrightCoverageProvider{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.TransferManager.instance();super(),this.m_fetchURL=e,this.m_baseScheme=t,this.m_requestHeaders=n,this.m_transferManager=i}setRequestHeaders(e){this.m_requestHeaders=e}getCopyrightCoverageData(e){return void 0!==this.m_cachedCopyrightResponse||(this.m_cachedCopyrightResponse=this.m_transferManager.downloadJson(this.m_fetchURL,{headers:this.m_requestHeaders,signal:e}).then((e=>e[this.m_baseScheme])).catch((e=>(this.logger.error(e),[])))),this.m_cachedCopyrightResponse}}t.UrlCopyrightProvider=o},23350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGroundPlane=void 0;const r=n(26309),i=n(44317),o=n(80684),a=n(31201),s=n(85164),l=n(534),c=n(46273),u=n(76904),h=n(48052),d=new l.Vector3;function p(e,t,n,r,h,d){const{dataSource:p,projection:f}=e,g=p.getTilingScheme().projection,v=f.type===a.ProjectionType.Spherical,y=!v,_="number"===typeof r?function(e,t,n,r){return t?new s.MapMeshStandardMaterial({color:e,visible:!0,depthWrite:n,removeDiffuseLight:!0,opacity:r}):new s.MapMeshBasicMaterial({color:e,visible:!0,depthWrite:n,opacity:r})}(new l.Color(r),n,f.type===a.ProjectionType.Spherical,d):r,x=function(e,t,n,r){const{dataSource:i,projection:o}=e,a=i.getTilingScheme().projection,s=new l.Vector3,c=new l.BufferGeometry,h=u.projectTilePlaneCorners(e,a),d=[h.sw,h.se,h.nw,h.ne];if(t)for(const l of d)o.reprojectPoint(a,l,l).sub(e.center);const p=t?new Float32Array(12):new Float64Array(12),m=new l.BufferAttribute(p,3).copyVector3sArray(d);if(c.setAttribute("position",m),r){a.surfaceNormal(h.sw,s).negate();const e=new l.BufferAttribute(new Float32Array(12),3).copyVector3sArray(Array(4).fill(s));c.setAttribute("normal",e)}if(c.setIndex(new l.BufferAttribute(new Uint16Array([0,1,2,2,1,3]),1)),n){const e=new l.BufferAttribute(new Float32Array([0,0,1,0,0,1,1,1]),2);c.setAttribute("uv",e)}return c}(e,y,t,n);if(!v)return new l.Mesh(x,_);const b=[],w=new o.SphericalGeometrySubdivisionModifier(l.MathUtils.degToRad(10),g);if(!h)return w.modify(x),m(x,g,e),new l.Mesh(x,_);for(let o=0;o<4;++o){const t=Math.pow(2,o),n=x.clone();if(t>1){new i.EdgeLengthGeometrySubdivisionModifier(t,e.geoBox,i.SubdivisionMode.All,g).modify(n)}w.modify(n),m(n,g,e),b.push(n)}return new c.LodMesh(b,_)}function m(e,t,n){const r=e.getAttribute("position"),i=r.array,o=new Float32Array(i.length);for(let a=0;a<r.array.length;a+=1)d.fromBufferAttribute(r,a),n.projection.reprojectPoint(t,d,d).sub(n.center),d.toArray(o,3*a);r.array=o,r.needsUpdate=!0}t.addGroundPlane=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.mapView.clearColor,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.mapView.shadowsEnabled,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:!1!==e.mapView.enableMixedLod;const l=p(e,o,a,n,s,i);return l.receiveShadow=a,l.renderOrder=t,h.registerTileObject(e,l,r.GeometryKind.Background,{pickability:r.Pickability.transient}),e.objects.push(l),l}},87270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplacedBufferAttribute=void 0;const r=n(15739),i=n(534),o=n(91400);class a extends i.BufferAttribute{constructor(e,t,n,r){super(e.array,e.itemSize,e.normalized),this.originalAttribute=e,this.m_normals=t,this.m_uvs=n,this.m_textureWidth=0,this.m_textureHeight=0,this.m_cache=new o.VertexCache(a.MAX_CACHE_SIZE),this.m_lastPos=new i.Vector3,this.m_tmpNormal=new i.Vector3,this.resetTexture(r)}reset(e,t,n,r){this.array=e.array,this.itemSize=e.itemSize,this.count=this.array.length/this.itemSize,this.normalized=e.normalized,this.originalAttribute=e,this.m_normals=t,this.m_uvs=n,this.m_cache.clear(),this.m_lastBufferIndex=void 0,this.resetTexture(r)}getX(e){return this.getDisplacedCoordinate(e).x}getY(e){return this.getDisplacedCoordinate(e).y}getZ(e){return this.getDisplacedCoordinate(e).z}resetTexture(e){this.m_texture=new Float32Array(e.image.data.buffer),this.m_textureWidth=e.image.width,this.m_textureHeight=e.image.height}getDisplacedCoordinate(e){return e===this.m_lastBufferIndex?this.m_lastPos:(this.m_lastBufferIndex=e,this.m_cache.get(e,this.m_lastPos)||(this.displacePosition(e),this.m_cache.set(e,this.m_lastPos)),this.m_lastPos)}displacePosition(e){this.m_lastPos.fromBufferAttribute(this.originalAttribute,e);const t=this.m_normals;this.m_tmpNormal.fromBufferAttribute(t,e);const n=this.m_uvs,o=i.MathUtils.clamp(n.getX(e),0,1),a=i.MathUtils.clamp(n.getY(e),0,1),s=r.sampleBilinear(this.m_texture,this.m_textureWidth,this.m_textureHeight,o,a);this.m_lastPos.add(this.m_tmpNormal.multiplyScalar(s))}}t.DisplacedBufferAttribute=a,a.MAX_CACHE_SIZE=6},16178:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplacedBufferGeometry=t.displaceBox=void 0;const r=n(534),i=n(87270),o=new r.Vector3,a=new r.Vector3,s=new r.Box3;function l(e,t,n){s.copy(e);const r=o.copy(n),i=a.copy(r);return e.translate(r.multiplyScalar(t.min)).union(s.translate(i.multiplyScalar(t.max))),e}t.displaceBox=l;class c extends r.BufferGeometry{constructor(e,t,n,o){super(),this.originalGeometry=e,this.displacementRange=n,this.m_originalBoundingBox=new r.Box3,this.m_displacedPositions=o||new i.DisplacedBufferAttribute(e.attributes.position,e.attributes.normal,e.attributes.uv,t),this.resetAttributes()}reset(e,t,n){this.originalGeometry=e;const r=e.attributes.position,i=e.attributes.normal,o=e.attributes.uv;this.m_displacedPositions.reset(r,i,o,t);const a=this.displacementRange.min!==n.min||this.displacementRange.max!==n.max;this.displacementRange=n,this.resetAttributes(),this.resetBoundingVolumes(a)}computeBoundingBox(){null===this.originalGeometry.boundingBox&&this.originalGeometry.computeBoundingBox();const e=this.m_originalBoundingBox.copy(this.originalGeometry.boundingBox);null===this.boundingBox?this.boundingBox=e.clone():this.boundingBox.copy(e),l(this.boundingBox,this.displacementRange,o.fromBufferAttribute(this.attributes.normal,0))}computeBoundingSphere(){null===this.boundingBox&&this.computeBoundingBox(),null===this.boundingSphere&&(this.boundingSphere=new r.Sphere),this.boundingBox.getBoundingSphere(this.boundingSphere)}needsBoundingBoxUpdate(e){return e||null!==this.boundingBox&&(!this.originalGeometry.boundingBox||!this.m_originalBoundingBox.equals(this.originalGeometry.boundingBox))}resetBoundingVolumes(e){this.needsBoundingBoxUpdate(e)&&(this.computeBoundingBox(),this.boundingSphere&&this.computeBoundingSphere())}resetAttributes(){this.index=this.originalGeometry.index,this.groups=this.originalGeometry.groups,this.drawRange=this.originalGeometry.drawRange,this.attributes=Object.assign({},this.originalGeometry.attributes),this.attributes.position=this.m_displacedPositions}}t.DisplacedBufferGeometry=c},73224:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplacedMesh=void 0;const r=n(85164),i=n(15739),o=n(534),a=n(87270),s=n(16178);class l extends o.Mesh{constructor(e,t,n,r){super(e,t),this.m_getDisplacementRange=n,this.m_raycastStrategy=r}static getDisplacedPositionAttribute(e,t){return l.displacedPositions?l.displacedPositions.reset(e.attributes.position,e.attributes.normal,e.attributes.uv,t):l.displacedPositions=new a.DisplacedBufferAttribute(e.attributes.position,e.attributes.normal,e.attributes.uv,t),l.displacedPositions}raycast(e,t){const n=this.firstMaterial;if(!function(e){const t=r.hasDisplacementFeature(e);return i.assert(t,"Material does not support displacement maps."),t}(n)||!function(e){if(!e)return!1;const t=e instanceof o.DataTexture;return i.assert(t,"Material does not support displacement maps."),t}(n.displacementMap))return void super.raycast(e,t);const a=n.displacementMap,c=Object.assign({},this.m_getDisplacementRange());i.assert(this.geometry instanceof o.BufferGeometry,"Unsupported geometry type.");const u=this.geometry;this.displacedGeometry?this.displacedGeometry.reset(u,a,c):this.displacedGeometry=new s.DisplacedBufferGeometry(u,a,c,l.getDisplacedPositionAttribute(u,a)),this.geometry=this.displacedGeometry,this.m_raycastStrategy?this.m_raycastStrategy(this,e,t):super.raycast(e,t),super.geometry=this.displacedGeometry.originalGeometry}get firstMaterial(){return Array.isArray(this.material)?this.material[0]:this.material}}t.DisplacedMesh=l},46273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LodMesh=void 0;const r=n(534);class i extends r.Mesh{constructor(e,t){super(void 0,t),this.geometries=e}set geometries(e){this.m_geometries!==e&&this.disposeGeometries(),this.m_geometries=e,this.geometries&&this.m_geometries.length>0&&(this.geometry=this.m_geometries[0])}get geometries(){return this.m_geometries}setLevelOfDetail(e){this.m_geometries&&0!==this.m_geometries.length&&(e=r.MathUtils.clamp(e,0,this.m_geometries.length-1),this.geometry=this.m_geometries[e])}disposeGeometries(){if(this.m_geometries)for(const e of this.m_geometries)e.dispose();this.geometry.dispose()}}t.LodMesh=i},52719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Object3DUtils=void 0;const r=n(85164),i=n(15739),o=n(534),a=n(67247),s=i.LoggerManager.instance.create("Object3DUtils");!function(e){function t(e,t,n){if(null===e||void 0===e||void 0===e.image||null===e.image)return;if(void 0!==e.uuid&&!0===n.get(e.uuid))return;n.set(e.uuid,!0);const r=e.image,i=4*r.width*r.height;t.heapSize+=i,t.gpuSize+=i}function n(e,n,i){if(void 0===e.uuid||!0!==i.get(e.uuid))if(i.set(e.uuid,!0),e instanceof o.RawShaderMaterial||e instanceof o.ShaderMaterial){const r=e;for(const e in r.uniforms)if(void 0!==r.uniforms[e]){const a=r.uniforms[e];a instanceof o.Texture&&t(a,n,i)}}else if(e instanceof o.MeshBasicMaterial||e instanceof r.MapMeshBasicMaterial){const r=e;t(r.map,n,i),t(r.aoMap,n,i),t(r.specularMap,n,i),t(r.alphaMap,n,i),t(r.envMap,n,i)}else if(e instanceof r.MapMeshStandardMaterial){const r=e;t(r.map,n,i),t(r.lightMap,n,i),t(r.aoMap,n,i),t(r.emissiveMap,n,i),t(r.bumpMap,n,i),t(r.normalMap,n,i),t(r.displacementMap,n,i),t(r.roughnessMap,n,i),t(r.metalnessMap,n,i),t(r.alphaMap,n,i),t(r.envMap,n,i)}else e instanceof o.LineBasicMaterial||e instanceof o.LineDashedMaterial||e instanceof o.PointsMaterial||s.warn("estimateMeshSize: unidentified material: ",e)}function i(e,t,n,r){if(void 0===e.uuid&&(e.uuid=o.MathUtils.generateUUID()),!0===r.get(e.uuid))return;r.set(e.uuid,!0);let i=0,a=4;void 0!==e.array.BYTES_PER_ELEMENT&&(a=e.array.BYTES_PER_ELEMENT),e instanceof o.InterleavedBufferAttribute||e instanceof o.BufferAttribute?i=a*e.count*e.itemSize:s.warn("estimateMeshSize: unidentified attribute: ",t),n.heapSize+=i+56,n.gpuSize+=i}function l(e,t,n){if(!(void 0===e.uuid||!0!==n.get(e.uuid)))return;if(n.set(e.uuid,!0),void 0===e)return;const r=e.attributes;if(void 0!==r){for(const e in r)void 0!==r[e]&&i(r[e],e,t,n);null!==e.index&&i(e.index,"index",t,n)}else s.warn("estimateGeometrySize: unidentified geometry: ",e)}e.estimateSize=function e(t,r,i){const c=void 0!==r?r:{heapSize:0,gpuSize:0};if(void 0===i&&(i=new Map),function(e,t,r){if(e.isObject3D&&!(e instanceof o.Scene)&&(void 0===e.uuid||!0!==r.get(e.uuid)))if(r.set(e.uuid,!0),e.isMesh||e.isLine||e.isPoints){let i=1e3;const o=0,s=e;if(void 0!==s.material)if(Array.isArray(s.material)){const e=s.material;for(const i of e)n(i,t,r)}else n(s.material,t,r);if(void 0!==s.geometries)for(const e of s.geometries)l(e,t,r);else void 0!==s.geometry&&l(s.geometry,t,r);const c=void 0!==e.userData?e.userData.feature:void 0;void 0!==c&&(i+=a.getFeatureDataSize(c)),t.heapSize+=i,t.gpuSize+=o}else s.warn("estimateMeshSize: unidentified object",e)}(t,c,i),t.children.length>0)for(const n of t.children)e(n,c,i);return c}}(t.Object3DUtils||(t.Object3DUtils={}))},76904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectTilePlaneCorners=void 0;const r=n(31201),i=n(534);t.projectTilePlaneCorners=function(e,t){const{east:n,west:o,north:a,south:s}=e.geoBox;return{sw:t.projectPoint(new r.GeoCoordinates(s,o),new i.Vector3),se:t.projectPoint(new r.GeoCoordinates(s,n),new i.Vector3),nw:t.projectPoint(new r.GeoCoordinates(a,o),new i.Vector3),ne:t.projectPoint(new r.GeoCoordinates(a,n),new i.Vector3)}}},48052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTileObject=void 0;const r=n(87213);t.registerTileObject=function(e,t,n,i){const o=n instanceof Set?Array.from(n.values()):Array.isArray(n)?n:[n];r.MapObjectAdapter.create(t,Object.assign({dataSource:e.dataSource,kind:o,level:e.tileKey.level},i)),void 0===t.userData&&(t.userData={});const a=t.userData;a.tileKey=e.tileKey,a.dataSource=e.dataSource.name,a.kind=o,e.resetVisibilityCounter()}},58598:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolidLineMesh=void 0;const r=n(31201),i=n(85164),o=n(15739),a=n(534),s=n(16178),l=new a.Sphere,c=new a.Matrix4,u=new a.Ray,h=new a.Line3,d=new a.Box3,p=new r.OrientedBox3,m=new a.Plane,f=new a.Vector3,g=new a.Vector3,v=new a.Vector3,y=new a.Vector3;function _(e,t,n){let r;e instanceof s.DisplacedBufferGeometry&&(r=e.displacementRange,e=e.originalGeometry);const i=e.attributes.position,o=e.index.array,l=new a.Sphere,c=d.makeEmpty(),u=f;for(let a=t;a<n;a+=6)c.expandByPoint(u.fromBufferAttribute(i,o[a])),c.expandByPoint(u.fromBufferAttribute(i,o[a+2]));if(r){const t=g;return t.fromBufferAttribute(e.attributes.normal,0),s.displaceBox(c,r,t).getBoundingSphere(l)}return c.getBoundingSphere(l)}function x(e,t,n,r,i,o,s,l){if(s.equals(e.origin)&&0===e.direction.dot(o.normal)){const i=function(e,t,n,r,i){var o;const a=p;return t.getCenter(a.position),t.delta(a.xAxis).normalize(),a.yAxis.copy(n),a.zAxis.copy(r),a.extents.set(t.distance()/2,i,i),a.contains(e.origin)?0:null!==(o=a.intersectsRay(e))&&void 0!==o?o:1/0}(e,t,n,o.normal,r),s=function(e,t,n){const r=new a.Sphere(t.start,n),i=r.containsPoint(e.origin)?0:e.intersectSphere(r,y)?y.sub(e.origin).length():1/0;r.center.copy(t.end);const o=r.containsPoint(e.origin)?0:e.intersectSphere(r,y)?y.sub(e.origin).length():1/0;return Math.min(i,o)}(e,t,r),c=Math.min(i,s);return c!==1/0&&(e.at(c,l),!0)}return!(s.distanceToSquared(t.closestPointToPoint(s,!0,y))>i)&&(l.copy(s),!0)}function b(e,t,n,r,i,o,a,s,c,u){const d=f,p=m,y=g,_=h,b=e.geometry,w=b.attributes,S=w.position,M=w.bitangent,E=b.index.array;if(l.copy(c),l.applyMatrix4(e.matrixWorld),l.radius+=r,t.ray.intersectsSphere(l))for(let l=a;l<s;l+=6){const r=E[l],a=E[l+2];if(_.start.fromBufferAttribute(S,r),_.end.fromBufferAttribute(S,a),d.set(M.getX(r),M.getY(r),M.getZ(r)).normalize(),p.setFromCoplanarPoints(_.start,v.copy(_.start).add(d),_.end),0===p.normal.manhattanLength())continue;if(!n.intersectPlane(p,y))continue;const s=v;if(!x(n,_,d,i,o,p,y,s))continue;const c=s.applyMatrix4(e.matrixWorld),h=t.ray.origin.distanceTo(c);h<t.near||h>t.far||u.push({distance:h,point:c.clone(),index:l,object:e})}}const w=[0],S=.01;function M(e,t,n,r,s,l,c){var u;const h=e.userData.feature.boundingVolumes;o.assert(e.geometry instanceof a.BufferGeometry,"Unsupported geometry type.");const d=e.geometry;o.assert(function(e){return Array.isArray(e)?e.every((e=>e instanceof i.SolidLineMaterial)):e instanceof i.SolidLineMaterial}(t),"Unsupported material type");const p=t,m=(p.lineWidth+p.outlineWidth)/2;o.assert(Math.abs(1-e.scale.x/e.scale.y)<S),o.assert(Math.abs(1-e.scale.x/e.scale.z)<S),o.assert(Math.abs(1-e.scale.y/e.scale.z)<S);const f=m/((e.scale.x+e.scale.y+e.scale.z)/3),g=f*f,v=null!==(u=e.userData.feature.starts)&&void 0!==u?u:w;let y=s,x=v[y];const M=v.length-1;for(;x<l;){const t=y,i=y<M?v[++y]:l;t>=h.length&&h.push(_(d,x,i)),b(e,n,r,m,f,g,x,i,h[t],c),x=i}return y}class E extends a.Mesh{static raycast(e,t,n){o.assert(e.geometry instanceof a.BufferGeometry,"Unsupported geometry type");const r=e.geometry;o.assert(null!==r.index,"Geometry does not have indices");const i=e.matrixWorld;c.copy(i).invert();const s=u.copy(t.ray).applyMatrix4(c);void 0===e.userData.feature&&(e.userData.feature={});const l=r.attributes.position,h=e.userData.feature.attributeInfo;(void 0===h||void 0===e.userData.feature.boundingVolumes||function(e,t){const n=!0===e.isBufferAttribute?e:e.data;return void 0===t||t.data!==n||e.isBufferAttribute&&t.version!==n.version}(l,h))&&(e.userData.feature.boundingVolumes=[],e.userData.feature.attributeInfo=function(e){const t=!0===e.isBufferAttribute?e:e.data;return{data:t,version:t.version}}(l));const d=r.index.array;if(Array.isArray(e.material)){let i=0;for(const o of r.groups){i=M(e,e.material[o.materialIndex],t,s,i,o.start+o.count,n)}}else M(e,e.material,t,s,0,d.length,n)}constructor(e,t){super(e,t)}raycast(e,t){E.raycast(this,e,t)}}t.SolidLineMesh=E},56300:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileDataAccessor=void 0;const r=n(26309),i=n(15739),o=n(27555),a=i.LoggerManager.instance.create("TileDataAccessor");t.TileDataAccessor=class{constructor(e,t,n){this.tile=e,this.visitor=t;const r=!0===n.wantsAll;this.m_wantsPoints=r||!(!1===n.wantsPoints),this.m_wantsLines=r||!(!1===n.wantsLines),this.m_wantsAreas=r||!(!1===n.wantsAreas),this.m_wantsObject3D=r||!(!1===n.wantsObject3D)}visitAll(){const e=this.tile.objects;for(const t of e)this.visitObject(t)}visitObject(e){const t=void 0!==e.userData?e.userData.feature:void 0;if(void 0===t||void 0!==t.objInfos&&1===t.objInfos.length&&!this.visitor.wantsFeature(r.getFeatureId(t.objInfos[0])))return;const n=t.geometryType;if(void 0===n)return void a.warn("#visitObject: visiting object failed, no geometryType",e);switch(i.assert(void 0!==t.objInfos,"featureData.ids missing"),i.assert(void 0!==t.starts,"featureData.starts missing"),i.assert(Array.isArray(t.starts),"featureData.starts is not an array"),void 0!==t.objInfos&&void 0!==t.starts&&i.assert(t.objInfos.length===t.starts.length,"featureData.ids and featureData.starts have unequal length"),n){case r.GeometryType.Point:case r.GeometryType.Text:if(!this.m_wantsPoints)return;break;case r.GeometryType.SolidLine:case r.GeometryType.ExtrudedLine:case r.GeometryType.TextPath:if(!this.m_wantsLines)return;break;case r.GeometryType.Polygon:case r.GeometryType.ExtrudedPolygon:if(!this.m_wantsAreas)return;break;case r.GeometryType.Object3D:if(!this.m_wantsObject3D)return;break;default:a.warn("#visitObject: invalid geometryType")}if("Mesh"!==e.type)return void a.warn("#visitObject: visiting object failed, not of type 'Mesh'",e);const o=e;this.visitMesh(o,t)}getBufferGeometry(e){const t=e.geometry;if("BufferGeometry"!==t.type)return void a.warn("#visitObject: object does not have BufferGeometry");const n=t;if(n.getAttribute("position"))return n;a.warn("#visitLines: BufferGeometry has no position attribute")}getGeometryAccessor(e,t,n){switch(e){case r.GeometryType.Point:case r.GeometryType.Text:return;case r.GeometryType.SolidLine:case r.GeometryType.ExtrudedLine:case r.GeometryType.TextPath:return new o.BufferedGeometryLineAccessor(t,e,n);case r.GeometryType.Polygon:case r.GeometryType.ExtrudedPolygon:return;case r.GeometryType.Object3D:return new o.BufferedGeometryObject3dAccessor(t,e,n);default:a.warn("#getGeometryAccessor: invalid geometryType")}}getIndexedGeometryAccessor(e,t,n){switch(e){case r.GeometryType.Point:case r.GeometryType.Text:return;case r.GeometryType.SolidLine:case r.GeometryType.ExtrudedLine:case r.GeometryType.TextPath:return new o.IndexedBufferedGeometryLineAccessor(t,e,n);case r.GeometryType.Polygon:case r.GeometryType.ExtrudedPolygon:case r.GeometryType.Object3D:return;default:a.warn("#getIndexedGeometryAccessor: invalid geometryType")}}visitMesh(e,t){const{objInfos:n,starts:s}=t,l=t.geometryType;if(void 0===n||void 0===s||void 0===l)return;let c;for(let u=0;u<n.length;u++){const t=r.getFeatureId(n[u]);if(!this.visitor.wantsFeature(t))continue;const h=s[u];let d=-1;if(void 0===c){const t=this.getBufferGeometry(e);if(void 0===t)continue;if(c=null!==t.index?this.getIndexedGeometryAccessor(l,e,t):this.getGeometryAccessor(l,e,t),void 0===c){a.warn("#visitObject: no accessor geometryType",l);continue}}switch(d=u<s.length-1?s[u+1]:c.getCount(),c.setRange(h,d),l){case r.GeometryType.Point:case r.GeometryType.Text:this.visitor.visitPoint(t);break;case r.GeometryType.SolidLine:case r.GeometryType.ExtrudedLine:case r.GeometryType.TextPath:i.assert(o.isLineAccessor(c)),this.visitor.visitLine(t,c);break;case r.GeometryType.Polygon:case r.GeometryType.ExtrudedPolygon:this.visitor.visitArea(t);break;case r.GeometryType.Object3D:i.assert(o.isObject3dAccessor(c)),this.visitor.visitObject3D(t,c);break;default:a.warn("#visitObject: invalid geometryType")}}}}},27555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedBufferedGeometryLineAccessor=t.IndexedBufferedGeometryAccessor=t.BufferedGeometryObject3dAccessor=t.BufferedGeometryLineAccessor=t.BufferedGeometryAccessor=t.BufferedGeometryAccessorBase=t.isObject3dAccessor=t.isLineAccessor=void 0;const r=n(26309),i=n(63266),o=n(15739),a=o.LoggerManager.instance.create("TileGeometry");t.isLineAccessor=function(e){return"function"===typeof e.isLineAccessor&&!0===e.isLineAccessor()},t.isObject3dAccessor=function(e){return"function"===typeof e.isObject3dAccessor&&!0===e.isObject3dAccessor()};class s{constructor(e,t,n){this.object=e,this.geometryType=t,this.bufferGeometry=n,this.start=-1,this.end=-1,this.startCapSize=0,this.endCapSize=0,o.assert(!!e),"BufferGeometry"!==n.type&&a.error("IndexedBufferedGeometryAccessor#constructor: BufferGeometry has wrong type"),o.assert("BufferGeometry"===n.type,"IndexedBufferedGeometryAccessor#constructor: BufferGeometry has wrong type"),this.position=this.bufferGeometry.getAttribute("position"),this.itemSize=this.position.itemSize,this.position||a.warn("BufferedGeometryAccessor#constructor: BufferGeometry has no position attribute"),this.position.array.constructor!==Float32Array&&a.warn("BufferedGeometryAccessor#constructor: BufferGeometry.position: unsupported ArrayBuffer")}getCount(){return this.position.count}get renderOrder(){return this.object.renderOrder}setRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o.assert(e>=0),o.assert(t>=0),o.assert(e<=t),this.start=e,this.end=t,this.startCapSize=n,this.endCapSize=r}get color(){const e=e=>{const t=e;if("MeshBasicMaterial"===t.type||"MeshStandardMaterial"===t.type)return t.color;if("RawShaderMaterial"===t.type){const t=e;if("SolidLineMaterial"===t.name)return t.uniforms.diffuse.value;a.warn("BufferedGeometryAccessor#color: unknown shader material name",t.name)}else a.warn("BufferedGeometryAccessor#color: unknown material type",t.type)};if(Array.isArray(this.object.material)){const t=new Array,n=this.object.material;for(const r of n)t.push(e(r));return t}return e(this.object.material)}}t.BufferedGeometryAccessorBase=s;class l extends s{constructor(e,t,n,r){super(e,t,n),this.object=e,this.geometryType=t,this.bufferGeometry=n,this.stride=r}clear(){o.assert(this.checkSetUp(),"BufferedGeometryAccessor not setup");const e=this.position.array,t=this.start*this.itemSize,n=this.end*this.itemSize;for(let r=t;r<n;r++)e[r]=0;this.position.needsUpdate=!0}getVertices(){o.assert(this.checkSetUp(),"BufferedGeometryAccessor not setup");const e=this.start,t=this.end;return this.position.array.subarray(e*this.itemSize,t*this.itemSize)}checkSetUp(){return void 0!==this.position&&void 0!==this.start&&void 0!==this.end&&this.start>=0&&this.end<=this.position.count&&this.start<=this.end}}t.BufferedGeometryAccessor=l;t.BufferedGeometryLineAccessor=class extends l{constructor(e,t,n){super(e,t,n,3),this.object=e,this.geometryType=t,this.bufferGeometry=n}isLineAccessor(){return!0}get width(){o.assert(this.checkSetUp(),"RoBufferedGeometryLineAccessor not setup")}};t.BufferedGeometryObject3dAccessor=class extends l{constructor(e,t,n){super(e,t,n,1),this.object=e,this.geometryType=t,this.bufferGeometry=n}isObject3dAccessor(){return!0}getVertices(){return super.getVertices()}};class c extends s{constructor(e,t,n,r,i){super(e,t,n),this.object=e,this.geometryType=t,this.bufferGeometry=n,this.indices=null!==this.bufferGeometry.index?this.bufferGeometry.index.array:void 0,this.indices?this.indices instanceof Uint32Array||(a.warn("IndexedBufferedGeometryAccessor#constructor: BufferGeometry index has wrong type"),o.assert(this.indices instanceof Uint32Array)):(a.warn("IndexedBufferedGeometryAccessor#constructor: BufferGeometry has no index"),o.assert(!!this.indices))}getCount(){return this.indices.length}checkSetUp(){return!!this.indices&&void 0!==this.start&&void 0!==this.end&&this.start>=0&&this.end<=this.indices.length&&this.start<=this.end}}t.IndexedBufferedGeometryAccessor=c;t.IndexedBufferedGeometryLineAccessor=class extends c{constructor(e,t,n){super(e,t,n,3),this.object=e,this.geometryType=t,this.bufferGeometry=n}isLineAccessor(){return!0}get width(){if(o.assert(this.checkSetUp(),"RoIndexedBufferedGeometryLineAccessor not setup"),this.geometryType===r.GeometryType.ExtrudedLine){const e=this.start+this.startCapSize,t=this.position.array;return i.reconstructLineWidth(t,e)}}clear(){o.assert(this.checkSetUp(),"RoIndexedBufferedGeometryLineAccessor not setup");const e=this.start,t=this.end;for(let n=e;n<t;n++)this.indices[n]=0;null!==this.bufferGeometry.index&&(this.bufferGeometry.index.needsUpdate=!0)}getVertices(){o.assert(this.checkSetUp(),"RoIndexedBufferedGeometryLineAccessor not setup");const e=this.itemSize,t=this.start,n=this.end,r=new Float32Array((n-t)*e),i=this.position.array;if(2===e)for(let o=t,a=0;o<n;o++,a+=e){const t=this.indices[o];r[a+0]=i[t*e+0],r[a+1]=i[t*e+1]}if(3===e)for(let o=t,a=0;o<n;o++,a+=e){const t=this.indices[o];r[a+0]=i[t*e+0],r[a+1]=i[t*e+1],r[a+2]=i[t*e+2]}else for(let o=t,a=0;o<n;o++,a++){const t=this.indices[o];for(let n=0;n<e;n++)r[a*e+n]=i[t*e+n]}return r}}},15663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileGeometryCreator=void 0;const r=n(26309),i=n(31201),o=n(85164),a=n(15739),s=n(534),l=n(47857),c=n(17682),u=n(46246),h=n(60179),d=n(21910),p=n(23350),m=n(48052),f=a.LoggerManager.instance.create("TileGeometryCreator"),g=new s.Vector3,v=new s.Vector2;class y{constructor(){this.bufferAttributes=new Map,this.interleavedAttributes=new Map}}class _ extends r.CallExpr{constructor(e){super("memo",[e]),this.m_cachedProperties=[],this.m_deps=Array.from(e.dependencies().properties),this.descriptor=this}call(e){let t=!1;return this.m_deps.forEach(((n,r)=>{const i=e.env.lookup(n);t||i===this.m_cachedProperties[r]||(t=!0),t&&(this.m_cachedProperties[r]=i)})),(t||void 0===this.m_cachedValue)&&(this.m_cachedValue=e.evaluate(this.args[0])),this.m_cachedValue}}class x{constructor(e,t,n){this.geometry=e,this.info=t,this.cache=n}getBufferAttribute(e){if(this.cache.bufferAttributes.has(e))return this.cache.bufferAttributes.get(e);const t=l.getBufferAttribute(e);return this.cache.bufferAttributes.set(e,t),t}getInterleavedBufferAttributes(e){const t=this.cache.interleavedAttributes.get(e);if(t)return t;const n=new(r.getArrayConstructor(e.type))(e.buffer),i=new s.InterleavedBuffer(n,e.stride),o=e.attributes.map((e=>{const t=new s.InterleavedBufferAttribute(i,e.itemSize,e.offset,!1);return{name:e.name,attribute:t}}));return this.cache.interleavedAttributes.set(e,o),o}}function b(e,t){if(Array.isArray(e)){const n=e;t.push(...n)}else t.push(e)}class w{constructor(){}static get instance(){return this.m_instance||(this.m_instance=new w)}initDecodedTile(e,t,n){for(const r of e.techniques){const e=r.kind;void 0===e||e instanceof Set&&0===e.size?r._kindState=!0:r._kindState=!(void 0!==n&&n.hasOrIntersects(e))||void 0!==t&&t.hasOrIntersects(e)}for(const r of e.geometries)for(const e of r.groups)e.createdOffsets=[]}createAllGeometries(e,t){const n=e=>!1!==e._kindState;let o=Promise.resolve();this.createObjects(e,t,(t=>{o=Promise.all([o,t.then((t=>(e.addOwnedTexture(t),t.image?new Promise((n=>{t.onUpdate=()=>{t.onUpdate=null,n()},e.mapView.renderer.initTexture(t)})):Promise.resolve()))).catch((()=>{}))])}),n),this.preparePois(e,t);return this.createTextElements(e,t,(e=>!!(r.isPoiTechnique(e)||r.isLineMarkerTechnique(e)||r.isTextTechnique(e))&&n(e))),this.createLabelRejectionElements(e,t),e.dataSource.addGroundPlane&&e.projection.type===i.ProjectionType.Planar&&p.addGroundPlane(e,-1),o}createLabelRejectionElements(e,t){if(void 0!==t.pathGeometries)for(const n of t.pathGeometries)e.addBlockingElement(new h.PathBlockingElement(n.path))}processTechniques(e,t,n){const i=e.decodedTile;if(void 0===i)return;this.initDecodedTile(i,t,n);const o=e.dataSource.exprPool;i.techniques.forEach((e=>{for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n];if(r.isJsonExpr(i)&&"kind"!==n)try{let t=r.Expr.fromJSON(i);!0!==t.dependencies().volatile&&(t=new _(r.Expr.fromJSON(i))),e[n]=t.intern(o)}catch(t){f.error("Failed to compile expression:",t)}}}))}prepareTextPaths(e,t,n){const i=new Array,o=e.slice();for(;o.length>0;){const e=o.pop();if(void 0===e)break;const a=t.techniques[e.technique];r.isTextTechnique(a)&&(void 0===n||n(a))&&i.push(e)}return i}createTextElements(e,t,n){var i;const o=e.mapView,a=e.computeWorldOffsetX(),l=Math.floor(o.zoomLevel),c=new r.MapEnv({$zoom:l},o.env),u=new d.TextElementBuilder(c,e.textStyleCache,e.dataSource.dataSourceOrder);if(void 0!==t.textPathGeometries){const i=this.prepareTextPaths(t.textPathGeometries,t,n);for(const o of i){const i=t.techniques[o.technique];if(!1===i._kindState||!r.isTextTechnique(i)||void 0!==n&&!n(i))continue;const l=[];for(let e=0;e<o.path.length;e+=3)l.push(new s.Vector3(o.path[e]+a,o.path[e+1],o.path[e+2]));const c=u.withTechnique(i).build(o.text,l,e.offset,e.dataSource.name,e.dataSource.dataSourceOrder,o.objInfos,o.pathLengthSqr);e.addTextElement(c)}}if(void 0!==t.textGeometries)for(const h of t.textGeometries){if(void 0===h.technique||void 0===h.stringCatalog)continue;const o=t.techniques[h.technique];if(!1===o._kindState||!r.isTextTechnique(o)||void 0!==n&&!n(o))continue;const l=new s.BufferAttribute(new Float64Array(h.positions.buffer),h.positions.itemCount),c=l.count;if(!(c<1)){u.withTechnique(o);for(let t=0;t<c;++t){const n=l.getX(t)+a,r=l.getY(t),o=l.getZ(t),c=h.stringCatalog[h.texts[t]];if(void 0===c)continue;const d=null===(i=h.objInfos)||void 0===i?void 0:i[t],p=new s.Vector3(n,r,o),m=u.build(c,p,e.offset,e.dataSource.name,e.dataSource.dataSourceOrder,d);e.addTextElement(m)}}}}createObjects(e,t,n,h){var d,p,f,y,_,x;const w=e.mapView,S=[],M=[],E=w.animatedExtrusionHandler,T=Math.floor(w.zoomLevel),C=new r.MapEnv({$zoom:T},w.env),A=e.objects,P=w.viewRanges,O=void 0!==w.elevationProvider;for(const R of this.getAttachments(t)){const T=R.geometry,L=R.info.groups,D=L.length;for(let k=0;k<D;){const I=L[k++],F=I.start,N=I.technique,z=t.techniques[N];if(void 0===I.createdOffsets&&(I.createdOffsets=[]),I.createdOffsets.includes(e.offset)||!1===z._kindState||void 0!==h&&!h(z))continue;let U=I.count;for(I.createdOffsets.push(e.offset);k<D&&L[k].technique===N&&F+U===L[k].start;++k)U+=L[k].count,L[k].createdOffsets.push(e.offset);if(!l.usesObject3D(z))continue;const j=null!==(d=null===E||void 0===E?void 0:E.setAnimationProperties(z,C))&&void 0!==d&&d;let B=S[N];if(void 0===B){if(B=l.createMaterial(w.renderer.capabilities,{technique:z,env:w.env,fog:null!==w.scene.fog,shadowsEnabled:w.shadowsEnabled},n),void 0===B)continue;j&&o.hasExtrusionFeature(B)&&b(B,M),S[N]=B}const V=z.kind;r.isTerrainTechnique(z)&&this.setupTerrainMaterial(z,B,e.mapView.clearColor);const G=new s.BufferGeometry;null===(p=T.vertexAttributes)||void 0===p||p.forEach((e=>{const t=R.getBufferAttribute(e);G.setAttribute(e.name,t)})),null===(f=T.interleavedVertexAttributes)||void 0===f||f.forEach((e=>{R.getInterleavedBufferAttributes(e).forEach((e=>{let{name:t,attribute:n}=e;return G.setAttribute(t,n)}))}));const H=null!==(y=R.info.index)&&void 0!==y?y:T.index;if(H&&G.setIndex(R.getBufferAttribute(H)),!G.getAttribute("normal")&&r.needsVertexNormals(z)&&G.computeVertexNormals(),G.addGroup(F,U),r.isSolidLineTechnique(z)){a.assert(!o.isHighPrecisionLineMaterial(B));const t=B;!0===z.clipping&&e.projection.type===i.ProjectionType.Planar&&(e.boundingBox.getSize(g),v.set(g.x,g.y),t.clipTileSize=v),G.getAttribute("color")&&o.setShaderMaterialDefine(t,"USE_COLOR",!0)}const W=r.isSolidLineTechnique(z)&&void 0!==z.secondaryWidth,q=r.Expr.isExpr(z.enabled)&&T.featureStarts&&T.featureStarts.length>0,Z=l.buildObject(z,G,q?[B]:B,e,O);if(Z.renderOrder=r.getPropertyValue(z.renderOrder,w.env),void 0!==R.info.uuid&&(Z.uuid=R.info.uuid,Z.userData.geometryId=R.info.uuid),(r.isCirclesTechnique(z)||r.isSquaresTechnique(z))&&void 0!==z.enablePicking&&(Z.enableRayTesting=z.enablePicking),r.isLineTechnique(z)||r.isSegmentsTechnique(z)){const e=this.getFadingParams(C,z);o.FadingFeature.addRenderHelper(Z,P,e.fadeNear,e.fadeFar,!1)}if(r.isSolidLineTechnique(z)){const e=this.getFadingParams(C,z);o.FadingFeature.addRenderHelper(Z,P,e.fadeNear,e.fadeFar,!1)}if(r.isExtrudedLineTechnique(z)&&void 0!==z.fadeFar){const e=this.getFadingParams(w.env,z);o.FadingFeature.addRenderHelper(Z,P,e.fadeNear,e.fadeFar,!0)}if(this.addUserData(e,T,z,Z),r.isExtrudedPolygonTechnique(z)?(Z.castShadow=w.shadowsEnabled,Z.receiveShadow=w.shadowsEnabled):(r.isStandardTechnique(z)||r.isFillTechnique(z))&&(Z.receiveShadow=w.shadowsEnabled),(r.isExtrudedPolygonTechnique(z)||r.isStandardTechnique(z)||r.isFillTechnique(z))&&void 0!==z.fadeFar){const e=this.getFadingParams(C,z);o.FadingFeature.addRenderHelper(Z,P,e.fadeNear,e.fadeFar,!0)}if(r.isExtrudedPolygonTechnique(z)&&c.isRenderDepthPrePassEnabled(z,C)){const t=c.createDepthPrePassMesh(Z);this.addUserData(e,T,z,t),m.registerTileObject(e,t,V,{technique:z,pickability:r.Pickability.transient}),A.push(t),j&&b(t.material,M),c.setDepthPrePassStencil(t,Z)}const $=r.transientToPickability(r.getPropertyValue(z.transient,w.env));if(m.registerTileObject(e,Z,V,{technique:z,pickability:W?r.Pickability.transient:$}),A.push(Z),r.isExtrudedPolygonTechnique(z)&&void 0!==R.info.edgeIndex){const t=r.Expr.isExpr(z.enabled)&&T.edgeFeatureStarts&&T.edgeFeatureStarts.length>0,n=z,i=new s.BufferGeometry;i.setAttribute("position",G.getAttribute("position"));const a=G.getAttribute("color");void 0!==a&&i.setAttribute("color",a);const l=G.getAttribute("extrusionAxis");void 0!==l&&i.setAttribute("extrusionAxis",l);const c=G.getAttribute("normal");void 0!==c&&i.setAttribute("normal",c);const h=G.getAttribute("uv");void 0!==h&&i.setAttribute("uv",h),i.setIndex(R.getBufferAttribute(R.info.edgeIndex));const d=z,p=this.getPolygonFadingParams(C,d),f={color:p.color,colorMix:p.colorMix,fadeNear:p.lineFadeNear,fadeFar:p.lineFadeFar,extrusionRatio:j?0:void 0,vertexColors:!!G.getAttribute("color"),rendererCapabilities:w.renderer.capabilities},g=new o.EdgeMaterial(f),v=new s.LineSegments(i,t?[g]:g);this.addUserData(e,T,z,v),v.renderOrder=Z.renderOrder+.1,o.FadingFeature.addRenderHelper(v,P,p.lineFadeNear,p.lineFadeFar,!1),j&&b(v.material,M),m.registerTileObject(e,v,V,{technique:z,pickability:r.Pickability.transient}),u.MapMaterialAdapter.create(g,{color:n.lineColor,objectColor:n.color,opacity:n.opacity,lineWidth:e=>{const t=r.getPropertyValue(n.lineWidth,e.env);return"number"===typeof t?s.MathUtils.clamp(t,0,1):0}}),A.push(v)}if(r.isExtrudedPolygonTechnique(z)&&j&&(Z.customDepthMaterial=new o.MapMeshDepthMaterial({depthPacking:s.RGBADepthPacking}),b(Z.customDepthMaterial,M)),r.isFillTechnique(z)&&R.info.edgeIndex){const t=r.Expr.isExpr(z.enabled)&&T.edgeFeatureStarts&&T.edgeFeatureStarts.length>0,n=new s.BufferGeometry;n.setAttribute("position",G.getAttribute("position")),n.setIndex(R.getBufferAttribute(R.info.edgeIndex));const i=z,a=this.getPolygonFadingParams(w.env,i),l={color:a.color,colorMix:a.colorMix,fadeNear:a.lineFadeNear,fadeFar:a.lineFadeFar,vertexColors:!!G.getAttribute("color"),rendererCapabilities:w.renderer.capabilities},c=new o.EdgeMaterial(l),h=new s.LineSegments(n,t?[c]:c);h.renderOrder=Z.renderOrder+.1,o.FadingFeature.addRenderHelper(h,P,a.lineFadeNear,a.lineFadeFar,!1),this.addUserData(e,T,z,h),m.registerTileObject(e,h,V,{technique:z,pickability:$}),u.MapMaterialAdapter.create(c,{color:i.lineColor,objectColor:i.color,opacity:i.opacity}),A.push(h)}if(W){const t=z,n=B.clone();l.applyBaseColorToMaterial(n,n.color,t,null!==(_=t.secondaryColor)&&void 0!==_?_:0,C),void 0!==t.secondaryCaps&&(n.caps=r.getPropertyValue(t.secondaryCaps,w.env));const i=l.buildObject(z,G,n,e,O);i.renderOrder=(null!==(x=r.getPropertyValue(t.secondaryRenderOrder,w.env))&&void 0!==x?x:0)-1e-7,this.addUserData(e,T,z,i);const a=this.getFadingParams(C,z);o.FadingFeature.addRenderHelper(i,P,a.fadeNear,a.fadeFar,!1);const s=l.buildMetricValueEvaluator(t.secondaryWidth,t.metricUnit);m.registerTileObject(e,i,V,{technique:z});const c=u.MapMaterialAdapter.get(B),h=u.MapMaterialAdapter.create(n,{color:t.secondaryColor,opacity:t.opacity,caps:t.secondaryCaps,lineWidth:e=>{if(!c)return;c.ensureUpdated(e);const t=c.currentStyledProperties.lineWidth,n=r.getPropertyValue(s,w.env),i=h.currentStyledProperties.opacity;return"number"===typeof t&&"number"===typeof n?n<=t&&(null===i||void 0===i||1===i)?0:n:0}});A.push(i)}}}M.length>0&&w.animatedExtrusionHandler.add(e,M)}preparePois(e,t){void 0!==t.poiGeometries&&e.mapView.poiManager.addPois(e,t)}*getAttachments(e){const t=new y;for(const n of e.geometries){const e={index:n.index,edgeIndex:n.edgeIndex,uuid:n.uuid,groups:n.groups};if(yield new x(n,e,t),n.attachments)for(const r of n.attachments)yield new x(n,r,t)}}setupTerrainMaterial(e,t,n){if(!e.map||!e.displacementMap){const e=t;return e.color.set(n),void o.setDisplacementMapToMaterial(null,e)}t.onBeforeCompile=e=>{e.fragmentShader=e.fragmentShader.replace("#include <map_pars_fragment>","#include <map_pars_fragment>\n    uniform sampler2D displacementMap;\n    uniform float displacementScale;\n    uniform float displacementBias;"),e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",`#ifdef USE_MAP\n    float minElevation = ${i.EarthConstants.MIN_ELEVATION.toFixed(1)};\n    float maxElevation = ${i.EarthConstants.MAX_ELEVATION.toFixed(1)};\n    float elevationRange = maxElevation - minElevation;\n\n    float disp = texture2D( displacementMap, vUv ).x * displacementScale + displacementBias;\n    vec4 texelColor = texture2D( map, vec2((disp - minElevation) / elevationRange, 0.0) );\n    texelColor = mapTexelToLinear( texelColor );\n    diffuseColor *= texelColor;\n#endif`),e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","")},t.displacementMap.needsUpdate=!0}addUserData(e,t,n,i){if(r.isTerrainTechnique(n)){a.assert(0===Object.keys(i.userData).length,"Unexpected user data in terrain object"),a.assert("object"===typeof t.objInfos[0],"Wrong attribute map type for terrain geometry");const n=t.objInfos[0],r={tileKey:e.tileKey,texture:new s.DataTexture(n.buffer,n.xCountVertices,n.yCountVertices,s.LuminanceFormat,s.FloatType),displacementMap:n,geoBox:e.geoBox};i.userData=r}else{const e="LineSegments"===i.type&&(r.isExtrudedPolygonTechnique(n)||r.isFillTechnique(n)),o={geometryType:t.type,starts:e?t.edgeFeatureStarts:t.featureStarts,objInfos:t.objInfos};i.userData.feature=o,i.userData.technique=n}}getFadingParams(e,t){return{fadeNear:void 0!==t.fadeNear?r.getPropertyValue(t.fadeNear,e):o.FadingFeature.DEFAULT_FADE_NEAR,fadeFar:void 0!==t.fadeFar?r.getPropertyValue(t.fadeFar,e):o.FadingFeature.DEFAULT_FADE_FAR}}getPolygonFadingParams(e,t){let n,i=o.EdgeMaterial.DEFAULT_COLOR_MIX;if(void 0!==t.lineColor&&(n=r.getPropertyValue(t.lineColor,e),r.isExtrudedPolygonTechnique(t))){const e=t;i=void 0!==e.lineColorMix?e.lineColorMix:o.EdgeMaterial.DEFAULT_COLOR_MIX}const a=void 0!==t.fadeNear?r.getPropertyValue(t.fadeNear,e):o.FadingFeature.DEFAULT_FADE_NEAR,s=void 0!==t.fadeFar?r.getPropertyValue(t.fadeFar,e):o.FadingFeature.DEFAULT_FADE_FAR,l=void 0!==t.lineFadeNear?r.getPropertyValue(t.lineFadeNear,e):a,c=void 0!==t.lineFadeFar?r.getPropertyValue(t.lineFadeFar,e):s;return void 0===n&&(n=o.EdgeMaterial.DEFAULT_COLOR),{color:n,colorMix:i,fadeNear:a,fadeFar:s,lineFadeNear:l,lineFadeFar:c}}}t.TileGeometryCreator=w},26691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileGeometryLoader=t.TileGeometryLoaderState=void 0;const r=n(26309),i=n(15739),o=n(65312),a=n(91422),s=n(15663);function l(e){const t=a.PerformanceStatistics.instance;if(t.enabled){const n=e.dataSource.name,r=e.tileKey.level,i=e.tileKey.column,o=e.tileKey.row,a=e.disposed?"disposed":"invisible";t.currentFrame.addMessage(`Decoded tile: ${n} # lvl=${r} col=${i} row=${o} DISCARDED - ${a}`)}}var c;!function(e){e[e.Initialized=0]="Initialized",e[e.CreationQueued=1]="CreationQueued",e[e.CreatingGeometry=2]="CreatingGeometry",e[e.Finished=3]="Finished",e[e.Canceled=4]="Canceled",e[e.Disposed=5]="Disposed"}(c=t.TileGeometryLoaderState||(t.TileGeometryLoaderState={}));class u{constructor(e,t){this.m_tile=e,this.m_taskQueue=t,this.m_priority=0,this.m_state=c.Initialized,this.m_finishedPromise=new Promise(((e,t)=>{this.m_resolveFinishedPromise=e,this.m_rejectFinishedPromise=t}))}static prepareAvailableGeometryKinds(e){const t=new r.GeometryKindSet;for(const n of e.techniques){const e=u.compileGeometryKind(n);if(e instanceof Set)for(const n of e)t.add(n);else t.add(e)}return t}static compileGeometryKind(e){let t=e.kind;return void 0===t?(t=r.isFillTechnique(e)?r.GeometryKind.Area:r.isLineTechnique(e)||r.isSolidLineTechnique(e)||r.isSegmentsTechnique(e)||r.isExtrudedLineTechnique(e)?r.GeometryKind.Line:r.isExtrudedPolygonTechnique(e)?r.GeometryKind.Building:r.isPoiTechnique(e)||r.isLineMarkerTechnique(e)||r.isTextTechnique(e)?r.GeometryKind.Label:r.GeometryKind.All,e.kind=t):Array.isArray(t)&&(t=e.kind=new r.GeometryKindSet(t)),t}set priority(e){this.m_priority=e}getPriority(){return this.m_priority}get tile(){return this.m_tile}get hasDecodedTile(){return void 0!==this.m_decodedTile}get isFinished(){return this.m_state===c.Finished}get isSettled(){return this.isFinished||this.isCanceled||this.isDisposed}waitFinished(){return this.m_finishedPromise}setDecodedTile(e){return this.m_decodedTile=e,this.hasDecodedTile&&(this.m_availableGeometryKinds=u.prepareAvailableGeometryKinds(this.m_decodedTile)),this.m_decodedTile}get availableGeometryKinds(){return this.m_availableGeometryKinds}update(e,t){const n=this.tile;this.tile.hasGeometry&&!this.compareGeometryKinds(e,t)&&this.reset(),this.m_state!==c.Initialized&&this.m_state!==c.Canceled||void 0===n.decodedTile||(this.m_state===c.Initialized&&(s.TileGeometryCreator.instance.processTechniques(n,e,t),this.setGeometryKinds(e,t),this.setDecodedTile(n.decodedTile)),this.queueGeometryCreation(e,t))}cancel(){var e;l(this.tile),this.m_state=c.Canceled,null===(e=this.m_rejectFinishedPromise)||void 0===e||e.call(this)}dispose(){var e;l(this.tile),this.clear(),this.m_state=c.Disposed,null===(e=this.m_rejectFinishedPromise)||void 0===e||e.call(this)}reset(){this.clear(),this.isSettled&&(this.m_finishedPromise=new Promise(((e,t)=>{this.m_resolveFinishedPromise=e,this.m_rejectFinishedPromise=t}))),this.m_state=c.Initialized}finish(){var e;this.m_decodedTile=void 0,this.m_state=c.Finished,null===(e=this.m_resolveFinishedPromise)||void 0===e||e.call(this)}clear(){var e,t,n;null===(e=this.m_availableGeometryKinds)||void 0===e||e.clear(),null===(t=this.m_enabledKinds)||void 0===t||t.clear(),null===(n=this.m_disabledKinds)||void 0===n||n.clear(),this.m_decodedTile=void 0}queueGeometryCreation(e,t){this.m_state!==c.CreationQueued&&(this.m_taskQueue.add({execute:this.createGeometry.bind(this,e,t),group:o.TileTaskGroups.CREATE,getPriority:this.getPriority.bind(this),isExpired:()=>this.m_state!==c.CreationQueued,estimatedProcessTime:()=>{var e,t;return(null!==(t=null===(e=this.tile.decodedTile)||void 0===e?void 0:e.decodeTime)&&void 0!==t?t:30)/6}}),this.m_state=c.CreationQueued)}async createGeometry(e,t){if(this.m_state===c.CreatingGeometry)return;this.m_state=c.CreatingGeometry;const n=this.tile,r=this.m_decodedTile;if(void 0===r)return void this.finish();const o=a.PerformanceStatistics.instance;let l=0;o.enabled&&(l=i.PerformanceTimer.now());const u=s.TileGeometryCreator.instance;n.clear(),u.initDecodedTile(r,e,t),await u.createAllGeometries(n,r),o.enabled&&this.addStats(o,l),this.finish(),n.dataSource.requestUpdate()}addStats(e,t){const n=this.tile,r=this.m_decodedTile;if(void 0===r)return;const o=i.PerformanceTimer.now()-t,a=e.currentFrame;a.addValue("render.fullFrameTime",o),a.addValue("render.geometryCreationTime",o),a.addValue("geometry.geometryCreationTime",o),a.addValue("geometryCount.numGeometries",r.geometries.length),a.addValue("geometryCount.numTechniques",r.techniques.length),a.addValue("geometryCount.numPoiGeometries",void 0!==r.poiGeometries?r.poiGeometries.length:0),a.addValue("geometryCount.numTextGeometries",void 0!==r.textGeometries?r.textGeometries.length:0),a.addValue("geometryCount.numTextPathGeometries",void 0!==r.textPathGeometries?r.textPathGeometries.length:0),a.addValue("geometryCount.numPathGeometries",void 0!==r.pathGeometries?r.pathGeometries.length:0),a.addMessage(`Decoded tile: ${n.dataSource.name} # lvl=${n.tileKey.level} col=${n.tileKey.column} row=${n.tileKey.row}`)}setGeometryKinds(e,t){var n,i;void 0!==e&&(this.m_enabledKinds=Object.assign(null!==(n=this.m_enabledKinds)&&void 0!==n?n:new r.GeometryKindSet,e)),void 0!==t&&(this.m_disabledKinds=Object.assign(null!==(i=this.m_disabledKinds)&&void 0!==i?i:new r.GeometryKindSet,t))}compareGeometryKinds(e,t){const n=this.m_enabledKinds===e,r=this.m_disabledKinds===t;if(n&&r)return!0;const i=(void 0===this.m_enabledKinds||0===this.m_enabledKinds.size)&&(void 0===e||0===e.size),o=(void 0===this.m_disabledKinds||0===this.m_disabledKinds.size)&&(void 0===t||0===t.size);if(i&&o||n&&o||r&&i)return!0;if(!i){if(void 0===e||void 0===this.m_enabledKinds)return!1;if(!e.has(this.m_enabledKinds))return!1}if(!o){if(void 0===t||void 0===this.m_disabledKinds)return!1;if(!t.has(this.m_disabledKinds))return!1}return!0}get isCanceled(){return this.m_state===c.Canceled}get isDisposed(){return this.m_state===c.Disposed}}t.TileGeometryLoader=u},47021:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileGeometryManager=void 0;const r=n(26309),i=n(87213);t.TileGeometryManager=class{constructor(e){this.mapView=e,this.enableFilterByKind=!0,this.enabledKinds=new r.GeometryKindSet,this.disabledKinds=new r.GeometryKindSet,this.hiddenKinds=new r.GeometryKindSet,this.m_visibilityCounter=1}get enabledGeometryKinds(){return this.enabledKinds}set enabledGeometryKinds(e){this.enabledKinds=e}get disabledGeometryKinds(){return this.disabledKinds}set disabledGeometryKinds(e){this.disabledKinds=e}get hiddenGeometryKinds(){return this.hiddenKinds}set hiddenGeometryKinds(e){this.hiddenKinds=e,this.incrementVisibilityCounter()}get visibilityCounter(){return this.m_visibilityCounter}updateTiles(e){let t=0;for(const n of e){const e=t++;n.updateGeometry(e,this.enableFilterByKind?this.enabledGeometryKinds:void 0,this.enableFilterByKind?this.disabledGeometryKinds:void 0)&&this.m_tileUpdateCallback&&this.m_tileUpdateCallback(n)}this.updateTileObjectVisibility(e)&&this.mapView.update()}clear(){this.enabledKinds.clear(),this.disabledKinds.clear(),this.hiddenKinds.clear()}enableKind(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enableDisableKinds(this.enabledKinds,e,t)}disableKind(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.enableDisableKinds(this.disabledKinds,e,t)}hideKind(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1;if(Array.isArray(e)||e instanceof Set)for(const r of e){const e=this.addRemove(this.hiddenKinds,r,t);n=n||e}else n=this.addRemove(this.hiddenKinds,e,t);n&&this.incrementVisibilityCounter()}getAvailableKinds(e){const t=new r.GeometryKindSet;for(const n of e){const e=n.loadedGeometryKinds;if(void 0!==e)for(const n of e)t.add(n)}return t}updateTileObjectVisibility(e){let t=!1;for(const n of e)if(0!==n.objects.length&&n.visibilityCounter!==this.visibilityCounter){n.visibilityCounter=this.visibilityCounter;for(const e of n.objects){const n=i.MapObjectAdapter.get(e),r=null===n||void 0===n?void 0:n.kind;if(void 0!==r){const n=!r.some((e=>this.hiddenKinds.has(e)));t=t||e.visible!==n,e.visible=n}}}return t}setTileUpdateCallback(e){this.m_tileUpdateCallback=e}incrementVisibilityCounter(){return++this.m_visibilityCounter}enableDisableKinds(e,t,n){if(Array.isArray(t))for(const r of t)this.addRemove(e,r,n);else if(t instanceof Set){const r=t;for(const t of r)this.addRemove(e,t,n)}else void 0!==t&&this.addRemove(e,t,n)}addRemove(e,t,n){if(n){if(!e.has(t))return e.add(t),!0}else if(e.has(t))return e.delete(t),!0;return!1}}},91400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexCache=void 0;const r=n(15739);var i;!function(e){e[e.VertexId=0]="VertexId",e[e.OlderIdx=1]="OlderIdx",e[e.NewerIdx=2]="NewerIdx",e[e.X=3]="X",e[e.Y=4]="Y",e[e.Z=5]="Z",e[e.Count=6]="Count"}(i||(i={}));const o=-1;t.VertexCache=class{constructor(e){this.maxVertexCount=e,this.m_cache=[],this.m_vertexCount=0,this.m_oldestIdx=0,this.m_newestIdx=0,this.m_cache.length=this.maxVertexCount*i.Count,this.clear()}clear(){this.m_cache.fill(o),this.m_vertexCount=0}get(e,t){const n=this.find(e);return void 0!==n&&(this.promoteEntry(n),this.getVertex(n,t),!0)}set(e,t){let n=o;this.m_vertexCount<this.maxVertexCount?(n=this.m_vertexCount*i.Count,this.m_vertexCount++):n=this.m_oldestIdx,1===this.m_vertexCount?this.m_oldestIdx=this.m_newestIdx=n:this.promoteEntry(n),this.setVertex(n,e,t)}find(e){const t=this.m_cache.length;for(let n=0;n<t;n+=i.Count)if(this.m_cache[n]===e)return n}promoteEntry(e){if(e===this.m_newestIdx)return;const t=this.getNewerIdx(e),n=this.getOlderIdx(e);t!==o&&(r.assert(this.getOlderIdx(t)===e),this.setOlderIdx(t,n)),n!==o&&(r.assert(this.getNewerIdx(n)===e),this.setNewerIdx(n,t)),e===this.m_oldestIdx&&(this.m_oldestIdx=t),this.setNewerIdx(e,o),this.setOlderIdx(e,this.m_newestIdx),r.assert(this.m_newestIdx!==o),r.assert(this.getNewerIdx(this.m_newestIdx)===o),this.setNewerIdx(this.m_newestIdx,e),this.m_newestIdx=e}getOlderIdx(e){return this.m_cache[e+i.OlderIdx]}setOlderIdx(e,t){this.m_cache[e+i.OlderIdx]=t}getNewerIdx(e){return this.m_cache[e+i.NewerIdx]}setNewerIdx(e,t){this.m_cache[e+i.NewerIdx]=t}getVertex(e,t){t.x=this.m_cache[e+i.X],t.y=this.m_cache[e+i.Y],t.z=this.m_cache[e+i.Z]}setVertex(e,t,n){this.m_cache[e]=t,this.m_cache[e+i.X]=n.x,this.m_cache[e+i.Y]=n.y,this.m_cache[e+i.Z]=n.z}}},91649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overlayOnElevation=t.overlayTextElement=void 0;const r=n(26309),i=n(85164),o=n(15739);function a(e,t){if(!("material"in e))return;const n=i.setDisplacementMapToMaterial.bind(null,t),r=e.material;Array.isArray(r)?r.forEach(n):r&&n(r)}function s(e,t,n,r){const i=r.unprojectPoint(e);if(n.geoBox.contains(i))i.altitude=t.sampleHeight(i,n);else if(i.altitude=t.getHeight(i,n.tileKey.level),void 0===i.altitude)return!1;return r.projectPoint(i,e),!0}t.overlayTextElement=function(e,t,n,r){o.assert(!e.elevated),n&&(e.elevated=e.path?function(e,t,n,r){for(const i of e)if(!s(i,t,n,r))return!1;return!0}(e.path,t,n,r):s(e.position,t,n,r))},t.overlayOnElevation=function(e){const t=e.mapView.elevationProvider;if(void 0===t||0===e.objects.length)return;const n=e.objects[0];if(!n.userData||!n.userData.kind||!n.userData.kind.find((e=>e!==r.GeometryKind.All&&e!==r.GeometryKind.Terrain)))return;const i=t.getDisplacementMap(e.tileKey);if(void 0!==i)for(const r of e.objects)a(r,i.texture)}},21317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageItem=void 0;const r=n(15739),i=n(534),o=n(1870),a=r.LoggerManager.instance.create("loadImage"),s=new o.MipMapGenerator;t.ImageItem=class{constructor(e,t){this.url=e,this.image=t}get loaded(){return void 0!==this.image&&void 0!==this.mipMaps}get loading(){return void 0!==this.loadingPromise}loadImage(){return this.loaded?Promise.resolve(this):(this.loading||(this.loadingPromise=new Promise(((e,t)=>{if(this.image){const n=this.image;n instanceof HTMLImageElement&&!n.complete?(n.addEventListener("load",this.finalizeImage.bind(this,n,e)),n.addEventListener("error",t)):this.finalizeImage(this.image,e)}else a.debug(`Loading image: ${this.url}`),!0===this.cancelled?(a.debug(`Cancelled loading image: ${this.url}`),e(void 0)):(new i.ImageLoader).load(this.url,(t=>{if(!0===this.cancelled)return a.debug(`Cancelled loading image: ${this.url}`),void e(void 0);this.finalizeImage(t,e)}),void 0,(e=>{a.error(`... loading image failed: ${this.url} : ${e}`),this.loadingPromise=void 0,t(`... loading image failed: ${this.url} : ${e}`)}))}))),this.loadingPromise)}finalizeImage(e,t){this.image=e,this.mipMaps=s.generateTextureAtlasMipMap(this),this.loadingPromise=void 0,t(this)}}},89849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageCache=void 0;const r=n(21317);class i{constructor(){this.m_images=new Map}static get instance(){return void 0===i.m_instance&&(i.m_instance=new i),i.m_instance}static dispose(){i.m_instance=void 0}registerImage(e,t,n){let i=this.findImageCacheItem(t);return i?(void 0===e||i.owners.includes(e)||i.owners.push(e),i.imageItem):(i={imageItem:new r.ImageItem(t,n),owners:[e]},this.m_images.set(t,i),i.imageItem)}removeImage(e,t){const n=this.m_images.get(e);return void 0!==n&&(this.unlinkCacheItem(n,t),!0)}findImage(e){const t=this.m_images.get(e);if(void 0!==t)return t.imageItem}clear(e){this.m_images.forEach((t=>{this.unlinkCacheItem(t,e)}))}get size(){return this.m_images.size}findImageCacheItem(e){return this.m_images.get(e)}cancelLoading(e){e.loading&&(e.cancelled=!0)}unlinkCacheItem(e,t){const n=e.owners.indexOf(t);n>=0&&e.owners.splice(n,1),0===e.owners.length&&(this.m_images.delete(e.imageItem.url),this.cancelLoading(e.imageItem))}}t.ImageCache=i},10018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewImageCache=void 0;const r=n(15739),i=n(89849);t.MapViewImageCache=class{constructor(){this.m_name2Url=new Map,this.m_urlNameCount=new Map}addImage(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("string"===typeof t){const r=t,i=this.registerImage(e,r);return n?i.loadImage():i}const r=t;return this.registerImage(e,void 0,r)}removeImage(e){const t=this.m_name2Url.get(e);if(void 0!==t){this.m_name2Url.delete(e);let n=1;if(e!==t){const e=this.m_urlNameCount.get(t);r.assert(void 0!==e),n=e,r.assert(n>0)}return n>1?this.m_urlNameCount.set(t,n-1):(this.m_urlNameCount.delete(t),i.ImageCache.instance.removeImage(t,this)),!0}return!1}findImageByName(e){const t=this.m_name2Url.get(e);if(void 0!==t)return i.ImageCache.instance.findImage(t)}clear(){i.ImageCache.instance.clear(this),this.m_name2Url.clear(),this.m_urlNameCount.clear()}registerImage(e,t,n){var o;if(this.hasName(e))throw new Error("duplicate name in cache");if(void 0===t&&(r.assert(void 0!==n),t=e),t!==e){const e=null!==(o=this.m_urlNameCount.get(t))&&void 0!==o?o:0;this.m_urlNameCount.set(t,e+1)}return this.m_name2Url.set(e,t),i.ImageCache.instance.registerImage(this,t,n)}hasName(e){return void 0!==this.m_name2Url.get(e)}}},1870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MipMapGenerator=void 0;const r=n(534),i="undefined"===typeof window;class o{constructor(){i||(this.m_paddingCanvas=document.createElement("canvas"),this.m_paddingContext=this.m_paddingCanvas.getContext("2d"),this.m_resizeCanvas=document.createElement("canvas"),this.m_resizeContext=this.m_resizeCanvas.getContext("2d"))}static getPaddedSize(e,t){return{width:r.MathUtils.ceilPowerOfTwo(e),height:r.MathUtils.ceilPowerOfTwo(t)}}generateTextureAtlasMipMap(e){if(i)throw new Error("MipMapGenerator only works in browser.");if(void 0===e.image)throw new Error("Can not generate mip maps. Image data not loaded!");const t=e.image,n=[],{width:r,height:a}=o.getPaddedSize(t.width,t.height);this.copyImageWithPadding(t,r,a),n.push(this.m_paddingContext.getImageData(0,0,r,a));let s=.5*r,l=.5*a;for(;s>=1||l>=1;){const e=n[n.length-1];n.push(this.resizeImage(e,Math.max(s,1),Math.max(l,1))),s*=.5,l*=.5}return n}copyImageWithPadding(e,t,n){return this.m_paddingCanvas.width=t,this.m_paddingCanvas.height=n,this.m_paddingContext.clearRect(0,0,t,n),e instanceof ImageData?this.m_paddingContext.putImageData(e,0,0):this.m_paddingContext.drawImage(e,0,0),e.width!==t&&this.m_paddingContext.drawImage(this.m_paddingCanvas,e.width-1,0,1,e.height,e.width,0,t-e.width,e.height),e.height!==n&&this.m_paddingContext.drawImage(this.m_paddingCanvas,0,e.height-1,t,1,0,e.height,t,n-e.height),this.m_paddingCanvas}resizeImage(e,t,n){const r=this.copyImageWithPadding(e,e.width,e.height);return this.m_resizeCanvas.width=t,this.m_resizeCanvas.height=n,this.m_resizeContext.clearRect(0,0,t,n),this.m_resizeContext.drawImage(r,0,0,t,n),this.m_resizeContext.getImageData(0,0,t,n)}}t.MipMapGenerator=o},87094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoxBuffer=t.BoxBufferMesh=void 0;const r=n(15739),i=n(534),o=n(2159);class a extends i.Mesh{constructor(e,t){super(e,t),this.type="BoxBufferMesh"}get isEmpty(){if(void 0===this.geometry)return!0;{const e=this.geometry;return null===e.index||0===e.index.count}}}t.BoxBufferMesh=a;class s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32768;this.m_material=e,this.m_renderOrder=t,this.m_maxElementCount=r,this.m_size=0,this.resizeBuffer(n),this.m_pickInfos=new Array}clone(){return new s(this.m_material,this.m_renderOrder)}dispose(){void 0!==this.m_geometry&&(this.m_geometry.dispose(),this.m_geometry=void 0),this.m_mesh=void 0}get size(){return this.m_size}reset(){void 0!==this.m_positionAttribute&&(this.m_positionAttribute.count=0,this.m_colorAttribute.count=0,this.m_uvAttribute.count=0,this.m_indexAttribute.count=0,this.m_pickInfos.length=0)}canAddElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.m_indexAttribute;if(t.count+6*e>=t.array.length){if(t.array.length>=6*this.m_maxElementCount)return!1;const e=Math.min(this.m_maxElementCount,0===this.size?256:2*this.size);this.resize(e)}return!0}saveState(){return{positionAttributeCount:this.m_positionAttribute.count,colorAttributeCount:this.m_colorAttribute.count,uvAttributeCount:this.m_uvAttribute.count,indexAttributeCount:this.m_indexAttribute.count,pickInfoCount:this.m_pickInfos.length}}restoreState(e){this.m_positionAttribute.count=e.positionAttributeCount,this.m_colorAttribute.count=e.colorAttributeCount,this.m_uvAttribute.count=e.uvAttributeCount,this.m_indexAttribute.count=e.indexAttributeCount,this.m_pickInfos.length=e.pickInfoCount}addBox(e,t,n,r,i,o){if(!this.canAddElements())return!1;const{s0:a,t0:s,s1:l,t1:c}=t,{x:u,y:h,w:d,h:p}=e,m=Math.round(n.r*r*255),f=Math.round(n.g*r*255),g=Math.round(n.b*r*255),v=Math.round(255*r),y=this.m_positionAttribute,_=this.m_colorAttribute,x=this.m_uvAttribute,b=this.m_indexAttribute,w=y.count,S=b.count;return y.setXYZ(w,u,h,i),y.setXYZ(w+1,u+d,h,i),y.setXYZ(w+2,u,h+p,i),y.setXYZ(w+3,u+d,h+p,i),_.setXYZW(w,m,f,g,v),_.setXYZW(w+1,m,f,g,v),_.setXYZW(w+2,m,f,g,v),_.setXYZW(w+3,m,f,g,v),x.setXY(w,a,s),x.setXY(w+1,l,s),x.setXY(w+2,a,c),x.setXY(w+3,l,c),b.setX(S,w),b.setX(S+1,w+1),b.setX(S+2,w+2),b.setX(S+3,w+2),b.setX(S+4,w+1),b.setX(S+5,w+3),y.count+=4,_.count+=4,x.count+=4,b.count+=6,this.m_pickInfos.push(o),!0}updateBufferGeometry(){const e=this.m_positionAttribute,t=this.m_colorAttribute,n=this.m_uvAttribute,r=this.m_indexAttribute;e.count>0&&(e.needsUpdate=!0,e.updateRange.offset=0,e.updateRange.count=4*e.count),t.count>0&&(t.needsUpdate=!0,t.updateRange.offset=0,t.updateRange.count=4*t.count),n.count>0&&(n.needsUpdate=!0,n.updateRange.offset=0,n.updateRange.count=4*n.count),r.count>0&&(r.needsUpdate=!0,r.updateRange.offset=0,r.updateRange.count=r.count),void 0!==this.m_geometry&&(this.m_geometry.clearGroups(),this.m_geometry.addGroup(0,this.m_indexAttribute.count))}cleanUp(){0===this.m_indexAttribute.count&&this.size>0&&this.clearAttributes()}get isEmpty(){return this.m_mesh.isEmpty}get mesh(){return void 0===this.m_mesh&&this.resize(),this.m_mesh}pickBoxes(e,t,n){const i=this.m_pickInfos.length,o=this.m_pickInfos,a=this.m_positionAttribute,s=e.x,l=e.y;for(let c=0;c<i;c++){const e=4*c,i=a.getX(e);if(s<i)continue;const u=a.getX(e+1);if(s>u)continue;const h=a.getY(e);if(l<h)continue;const d=a.getY(e+2);if(l>d)continue;const p=new r.Math2D.Box(i,h,u-i,d-h);void 0!==n&&void 0!==o[c].poiInfo&&void 0!==o[c].poiInfo.uvBox&&this.isPixelTransparent(n,s,l,p,o[c].poiInfo.uvBox,document.createElement("canvas"))||void 0!==o[c]&&t(o[c])}}resize(e,t){return void 0!==this.m_geometry&&this.m_geometry.dispose(),this.m_geometry=new i.BufferGeometry,void 0!==e&&(!0===t||e>this.size)&&this.resizeBuffer(e),this.m_geometry.setAttribute("position",this.m_positionAttribute),this.m_geometry.setAttribute("color",this.m_colorAttribute),this.m_geometry.setAttribute("uv",this.m_uvAttribute),this.m_geometry.setIndex(this.m_indexAttribute),this.m_geometry.addGroup(0,this.m_indexAttribute.count),void 0===this.m_mesh?(this.m_mesh=new a(this.m_geometry,this.m_material),this.m_mesh.renderOrder=this.m_renderOrder):this.m_mesh.geometry=this.m_geometry,this.m_mesh}updateMemoryUsage(e){const t=3*this.m_positionAttribute.count*4+4*this.m_colorAttribute.count+4*this.m_uvAttribute.count*4+4*this.m_indexAttribute.count;e.heapSize+=t,e.gpuSize+=t}isPixelTransparent(e,t,n,r,i,a){const{u:s,v:l}=o.screenToUvCoordinates(t,n,r,i),{width:c,height:u}=e instanceof SVGImageElement?e.getBBox():e,h=c*s,d=u*l,p=o.getPixelFromImage(h,d,e,a);return void 0!==p&&0===p[3]}clearAttributes(){this.m_positionAttribute=void 0,this.m_colorAttribute=void 0,this.m_uvAttribute=void 0,this.m_indexAttribute=void 0,this.resize(0,!0)}resizeBuffer(e){const t=new Float32Array(4*e*3);if(void 0!==this.m_positionAttribute&&this.m_positionAttribute.array.length>0){const e=this.m_positionAttribute.count;t.set(this.m_positionAttribute.array),this.m_positionAttribute.array=t,this.m_positionAttribute.count=e}else this.m_positionAttribute=new i.BufferAttribute(t,3),this.m_positionAttribute.count=0,this.m_positionAttribute.setUsage(i.DynamicDrawUsage);const n=new Uint8Array(4*e*4);if(void 0!==this.m_colorAttribute){const e=this.m_colorAttribute.count;n.set(this.m_colorAttribute.array),this.m_colorAttribute.array=n,this.m_colorAttribute.count=e}else this.m_colorAttribute=new i.BufferAttribute(n,4,!0),this.m_colorAttribute.count=0,this.m_colorAttribute.setUsage(i.DynamicDrawUsage);const r=new Float32Array(4*e*4);if(void 0!==this.m_uvAttribute){const e=this.m_uvAttribute.count;r.set(this.m_uvAttribute.array),this.m_uvAttribute.array=r,this.m_uvAttribute.count=e}else this.m_uvAttribute=new i.BufferAttribute(r,4),this.m_uvAttribute.count=0,this.m_uvAttribute.setUsage(i.DynamicDrawUsage);const o=6*e*1,a=o>65535?new Uint32Array(o):new Uint16Array(o);if(void 0!==this.m_indexAttribute){const e=this.m_indexAttribute.count;a.set(this.m_indexAttribute.array),this.m_indexAttribute.array=a,this.m_indexAttribute.count=e}else this.m_indexAttribute=new i.BufferAttribute(a,1),this.m_indexAttribute.count=0,this.m_indexAttribute.setUsage(i.DynamicDrawUsage);this.m_size=e}}t.BoxBuffer=s},2159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPixelFromImageData=t.getPixelFromCanvasImageSource=t.screenToUvCoordinates=t.getPixelFromImage=void 0;const r=n(15739);function i(e,t,n,r){const{width:i,height:o}=e instanceof SVGImageElement?e.getBBox():e;if(t>i||t<0||n>o||n<0)return;let a;r.width=i,r.height=o;const s=r.getContext("2d");return null!==s&&(s.drawImage(e,0,0),a=s.getImageData(t,n,1,1).data),a}function o(e,t,n,r){if(!(t>e.width||t<0||n>e.height||n<0))return((e,t,n)=>{const r=t*n,i=e.data,o=new Uint8ClampedArray(n);for(let a=0;a<n;a++)o[0]=i[r+a];return o})(e,n*e.width+t,r)}t.getPixelFromImage=function(e,t,n,r){if(n instanceof ImageData){return o(n,e,t,n.data.length/(n.height*n.width))}return r||(r=document.createElement("canvas")),i(n,e,t,r)},t.screenToUvCoordinates=function(e,t,n,i){const o=n.x,a=n.x+n.w,s=n.y,l=n.y+n.h;return{u:r.MathUtils.map(e,o,a,i.s0,i.s1),v:r.MathUtils.map(t,s,l,i.t0,i.t1)}},t.getPixelFromCanvasImageSource=i,t.getPixelFromImageData=o},79977:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoiBuilder=void 0;const r=n(26309),i=n(15739),o=n(37119),a=i.LoggerManager.instance.create("PoiBuilder");t.PoiBuilder=class{constructor(e){this.m_env=e}withTechnique(e){var t,n,i,o,a,s,l,c;return this.m_imageTextureName=function(e,t){return void 0!==e.imageTexture?r.composeTechniqueTextureName(r.getPropertyValue(e.imageTexture,t),e):void 0}(e,this.m_env),this.m_iconMinZoomLevel=null!==(n=r.getPropertyValue(null!==(t=e.iconMinZoomLevel)&&void 0!==t?t:e.minZoomLevel,this.m_env))&&void 0!==n?n:void 0,this.m_iconMaxZoomLevel=null!==(o=r.getPropertyValue(null!==(i=e.iconMaxZoomLevel)&&void 0!==i?i:e.maxZoomLevel,this.m_env))&&void 0!==o?o:void 0,this.m_textMinZoomLevel=null!==(s=r.getPropertyValue(null!==(a=e.textMinZoomLevel)&&void 0!==a?a:e.minZoomLevel,this.m_env))&&void 0!==s?s:void 0,this.m_textMaxZoomLevel=null!==(c=r.getPropertyValue(null!==(l=e.textMaxZoomLevel)&&void 0!==l?l:e.maxZoomLevel,this.m_env))&&void 0!==c?c:void 0,this.m_technique=e,this}withIcon(e,t){return void 0!==e&&(this.m_imageTextureName=e),this.m_shieldGroupIndex=t,this}build(e){var t,n,s,l,c;i.assert(void 0!==this.m_technique);const u=this.m_technique,h=this.m_env,d=this.m_imageTextureName,p=void 0!==u.poiTable?null!==(t=u.poiName)&&void 0!==t?t:d:void 0;if(void 0!==d&&void 0!==p&&a.warn("Possible duplicate POI icon definition via imageTextureName and poiTable!"),void 0===d&&void 0===p)return e.minZoomLevel=null!==(n=e.minZoomLevel)&&void 0!==n?n:this.m_textMinZoomLevel,void(e.maxZoomLevel=null!==(s=e.maxZoomLevel)&&void 0!==s?s:this.m_textMaxZoomLevel);const m=!0===u.textIsOptional,f=!0===u.iconIsOptional,g=!(!1===u.renderTextDuringMovements),v=null!==(l=u.iconMayOverlap)&&void 0!==l?l:u.textMayOverlap,y=null!==(c=u.iconReserveSpace)&&void 0!==c?c:u.textReserveSpace,_=r.getPropertyValue(u.iconColor,h),x=null!==_?o.ColorCache.instance.getColor(_):void 0;return{technique:u,imageTextureName:d,poiTableName:u.poiTable,poiName:p,shieldGroupIndex:this.m_shieldGroupIndex,textElement:e,textIsOptional:m,iconIsOptional:f,renderTextDuringMovements:g,mayOverlap:v,reserveSpace:y,iconBrightness:u.iconBrightness,iconColor:x,iconMinZoomLevel:this.m_iconMinZoomLevel,iconMaxZoomLevel:this.m_iconMaxZoomLevel,textMinZoomLevel:this.m_textMinZoomLevel,textMaxZoomLevel:this.m_textMaxZoomLevel}}}},61086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoiManager=void 0;const r=n(26309),i=n(15739),o=n(534),a=n(21910),s=i.LoggerManager.instance.create("PoiManager");function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.imageTextures){const n=e.imageTextures[t];if(n>=0)return i.assert(e.imageTextures.length>t),e.stringCatalog[n]}}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.objInfos?e.objInfos[t]:void 0}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=(new o.Vector3).fromBufferAttribute(e,n);return r.x+=t,r}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;i.assert(e.texts.length>t);const r=e.texts[t];return i.assert(e.stringCatalog.length>r),null!==(n=e.stringCatalog[r])&&void 0!==n?n:""}class d{constructor(e){this.mapView=e,this.m_imageTextures=new Map,this.m_poiShieldGroups=new Map}static notifyMissingPoiTable(e,t){void 0===e&&(e="undefined"),void 0===d.m_missingPoiTableName.get(e)&&(d.m_missingPoiTableName.set(e,!0),void 0===t||t.loadedOk?s.error(`updatePoiFromPoiTable: No POI table with name '${e}' found!`):s.error(`updatePoiFromPoiTable: Could not load POI table '${e}'!`))}static notifyMissingPoi(e,t){void 0===e&&(e="undefined");const n=`${t}[${e}]`;void 0===d.m_missingPoiName.get(n)&&(d.m_missingPoiName.set(n,!0),s.warn(`updatePoiFromPoiTable: Cannot find POI info for '${e}' in table '${t}'.`))}addPois(e,t){const n=i.assertExists(t.poiGeometries),s=e.computeWorldOffsetX(),l=e.mapView,c=Math.floor(l.zoomLevel),u=new r.MapEnv({$zoom:c},l.env),h=new a.TextElementBuilder(u,e.textStyleCache,e.dataSource.dataSourceOrder);for(const a of n){i.assert(void 0!==a.technique);const n=i.assertExists(a.technique),l=t.techniques[n];if(!1===l._kindState||!r.isLineMarkerTechnique(l)&&!r.isPoiTechnique(l))continue;if(!1===l.showOnMap)continue;const c=new o.BufferAttribute(new Float64Array(a.positions.buffer),a.positions.itemCount);h.withTechnique(l),r.isLineMarkerTechnique(l)&&c.count>0?this.addLineMarker(h,e,a,c,s):r.isPoiTechnique(l)&&this.addPoi(h,e,a,c,s)}}async addTextureAtlas(e,t,n){const r=await fetch(t,{signal:n});if(!r.ok)throw new Error(`addTextureAtlas: Cannot load textureAtlas: ${r.statusText}`);try{const n=await r.json();if(void 0===n)return void s.info(`addTextureAtlas: TextureAtlas empty: ${t}`);s.debug(`addTextureAtlas: Loading textureAtlas '${t}' for image '${e}'`);for(const t of Object.getOwnPropertyNames(n)){const r=n[t],i={name:t,image:e,xOffset:r.x,yOffset:r.y,width:r.width,height:r.height};this.addImageTexture(i)}this.mapView.update()}catch(i){s.error(`addTextureAtlas: Failed to load textureAtlas '${t}' : ${i}`)}}addImageTexture(e){void 0!==e.name?(void 0!==this.m_imageTextures.get(e.name)&&s.warn(`addImageTexture: Name already used: ${e.name} (overriding it)`),this.m_imageTextures.set(e.name,e)):s.error("addImageTexture: Name required",e)}getImageTexture(e){return this.m_imageTextures.get(e)}updatePoiFromPoiTable(e){var t,n,i,o,s,l;const c=e.poiInfo;if(!c||void 0===c.poiTableName||void 0===c.poiName)return!0;const u=c.poiTableName,h=this.mapView.poiTableManager.getPoiTable(u);if(h&&h.isLoading)return!1;if(c.poiTableName=void 0,!h||!h.loadedOk)return d.notifyMissingPoiTable(u,h),!0;const p=c.poiName,m=h.getEntry(p);return m?(void 0!==m.iconName&&m.iconName.length>0&&(c.imageTextureName=r.composeTechniqueTextureName(m.iconName,c.technique)),e.visible=null!==(t=m.visible)&&void 0!==t?t:e.visible,e.priority=null!==(n=m.priority)&&void 0!==n?n:e.priority,c.iconMinZoomLevel=null!==(i=m.iconMinLevel)&&void 0!==i?i:c.iconMinZoomLevel,c.iconMaxZoomLevel=null!==(o=m.iconMaxLevel)&&void 0!==o?o:c.iconMaxZoomLevel,c.textMinZoomLevel=null!==(s=m.textMinLevel)&&void 0!==s?s:c.textMinZoomLevel,c.textMaxZoomLevel=null!==(l=m.textMaxLevel)&&void 0!==l?l:c.textMaxZoomLevel,a.TextElementBuilder.alignZoomLevelRanges(e),!0):(d.notifyMissingPoi(p,u),!0)}clear(){this.m_imageTextures.clear(),this.m_poiShieldGroups.clear()}addLineMarker(e,t,n,r,i){const o=h(n),a=l(n),s=a+"-"+o;let d=this.m_poiShieldGroups.get(s);void 0===d&&(d=this.m_poiShieldGroups.size,this.m_poiShieldGroups.set(s,d));const p=[];for(let l=0;l<r.count;l+=3)p.push(u(r,i,l));const m=e.withIcon(a,d).build(o,p,t.offset,t.dataSource.name,t.dataSource.dataSourceOrder,c(n));t.addTextElement(m)}addPoi(e,t,n,r,i){var o,a;for(let s=0;s<r.count;++s){const d=null!==(a=null===(o=n.offsetDirections)||void 0===o?void 0:o[s])&&void 0!==a?a:0,p=e.withIcon(l(n,s)).build(h(n,s),u(r,i,s),t.offset,t.dataSource.name,t.dataSource.dataSourceOrder,c(n,s),void 0,d);t.addTextElement(p)}}}t.PoiManager=d,d.m_missingPoiTableName=new Map,d.m_missingPoiName=new Map},1830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoiRenderer=t.PoiBatchRegistry=t.PoiBuffer=void 0;const r=n(26309),i=n(85164),o=n(15739),a=n(534),s=n(1870),l=n(87094),c=o.LoggerManager.instance.create("PoiRenderer"),u=new a.Color(1,1,1),h=new a.Color;class d{constructor(e,t,n){this.buffer=e,this.layer=t,this.m_onDispose=n,this.m_refCount=0}increaseRefCount(){return++this.m_refCount,this}decreaseRefCount(){return o.assert(this.m_refCount>0),0===--this.m_refCount&&this.dispose(),this}dispose(){this.layer.scene.remove(this.buffer.mesh),this.buffer.dispose(),this.m_onDispose()}}t.PoiBuffer=d;class p{constructor(e,t,n){this.m_rendererCapabilities=e,this.imageItem=t,this.m_onDispose=n;const r=new a.Texture(this.imageItem.image,a.UVMapping,void 0,void 0,(p.trilinear,a.LinearFilter),p.trilinear?a.LinearMipMapLinearFilter:a.LinearFilter,a.RGBAFormat);p.trilinear&&this.imageItem.mipMaps&&(r.mipmaps=this.imageItem.mipMaps,r.image=r.mipmaps[0]),r.flipY=!1,r.premultiplyAlpha=!0,r.needsUpdate=!0,this.m_material=new i.IconMaterial({rendererCapabilities:this.m_rendererCapabilities,map:r}),this.m_poiBuffers=new Map}getBuffer(e){let t=this.m_poiBuffers.get(e.id);if(t)return t.increaseRefCount();const n=new l.BoxBuffer(this.m_material,e.id),r=n.mesh;return r.frustumCulled=!1,e.scene.add(r),t=new d(n,e,(()=>{this.disposeBuffer(e.id)})),this.m_poiBuffers.set(e.id,t),t.increaseRefCount()}reset(){for(const e of this.m_poiBuffers.values())e.buffer.reset()}update(){for(const e of this.m_poiBuffers.values())e.buffer.updateBufferGeometry()}pickBoxes(e,t,n){for(const r of this.m_poiBuffers.values())r.buffer.pickBoxes(e,t,n)}updateMemoryUsage(e){if(void 0!==this.imageItem.image){const t=this.imageItem.image.width*this.imageItem.image.height*4;e.heapSize+=t,e.gpuSize+=t}for(const t of this.m_poiBuffers.values())t.buffer.updateMemoryUsage(e)}dispose(){this.m_poiBuffers.clear(),this.m_material.map.dispose(),this.m_material.dispose(),this.m_onDispose()}disposeBuffer(e){o.assert(this.m_poiBuffers.size>0),this.m_poiBuffers.delete(e),0===this.m_poiBuffers.size&&this.dispose()}}p.trilinear=!0;class m{constructor(e){this.m_rendererCapabilities=e,this.m_batchMap=new Map}registerPoi(e,t){var n;const{imageItem:r,imageTexture:i}=e;if(!r)return;o.assert(void 0!==e.imageTextureName);const a=null!==(n=null===i||void 0===i?void 0:i.image)&&void 0!==n?n:e.imageTextureName;let s=this.m_batchMap.get(a);return void 0===s&&(s=new p(this.m_rendererCapabilities,r,(()=>{this.deleteBatch(a)})),this.m_batchMap.set(a,s)),s.getBuffer(t)}addPoi(e,t,n,r){if(!1===e.isValid||!e.buffer)return void c.warn("PoiBatchRegistry: trying to add poiInfo without buffer prepared: ",e.poiName);let i;o.assert(void 0!==e.uvBox),void 0!==e.iconBrightness?(i=h.setScalar(e.iconBrightness),void 0!==e.iconColor&&(i=h.multiply(e.iconColor))):i=void 0!==e.iconColor?e.iconColor:u,e.buffer.buffer.addBox(t,e.uvBox,i,r,n,e.textElement)}reset(){for(const e of this.m_batchMap.values())e.reset()}update(){for(const e of this.m_batchMap.values())e.update()}pickTextElements(e,t){for(const n of this.m_batchMap.values())n.pickBoxes(e,t,n.imageItem.image)}updateMemoryUsage(e){for(const t of this.m_batchMap.values())t.updateMemoryUsage(e)}deleteBatch(e){this.m_batchMap.delete(e)}}t.PoiBatchRegistry=m;const f=new Map;class g{constructor(e,t,n){this.m_renderer=e,this.m_poiManager=t,this.m_imageCaches=n,this.m_tempScreenBox=new o.Math2D.Box,this.m_layers=[],this.m_poiBatchRegistry=new m(this.renderer.capabilities)}static computeIconScreenBox(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new o.Math2D.Box;o.assert(void 0!==e.buffer);const s=e.computedWidth*n,l=e.computedHeight*n,c=e.technique,u=r.getPropertyValue(c.iconXOffset,i),h=r.getPropertyValue(c.iconYOffset,i),d=t.x+("number"===typeof u?u:0)*n,p=t.y+("number"===typeof h?h:0)*n;return a.x=d-s/2,a.y=p-l/2,a.w=s,a.h=l,a}get renderer(){return this.m_renderer}prepareRender(e,t){const n=e.poiInfo;return void 0!==n&&(void 0===n.buffer&&this.preparePoi(e,t),void 0!==n.buffer)}reset(){this.m_poiBatchRegistry.reset()}addPoi(e,t,n,r,i,a,s,l){o.assert(void 0!==e.buffer),g.computeIconScreenBox(e,t,i,l,this.m_tempScreenBox),a&&n.allocate(this.m_tempScreenBox),s>0&&(e.buffer||this.preparePoi(e.textElement,l),this.m_poiBatchRegistry.addPoi(e,this.m_tempScreenBox,r,s))}update(){this.m_poiBatchRegistry.update()}addLayer(e){let t=this.getLayer(e);return void 0===t&&(t={id:e,scene:new a.Scene},this.m_layers.push(t),this.m_layers.sort(((e,t)=>e.id-t.id))),t}getLayer(e){return this.m_layers.find((t=>t.id===e))}get layers(){return this.m_layers}render(e,t){this.m_renderer.render(t.scene,e)}pickTextElements(e,t){this.m_poiBatchRegistry.pickTextElements(e,t)}getMemoryUsage(e){this.m_poiBatchRegistry.updateMemoryUsage(e)}preparePoi(e,t){const n=e.poiInfo;if(!n||!e.visible)return;if(void 0!==n.buffer||!1===n.isValid)return;if(void 0!==n.poiTableName){if(!this.m_poiManager.updatePoiFromPoiTable(e))return;if(!e.visible)return}const r=n.imageTextureName;if(void 0===r)return void(n.isValid=!1);const i=this.m_poiManager.getImageTexture(r),a=function(e,t,n){var r;o.assert(void 0!==e.imageTextureName);const i=n?n.image:e.imageTextureName;for(const o of t){const e=o.findImageByName(i);if(e)return f.delete(i),e}const a=f.get(i);f.set(i,a?a+1:0),5===f.get(i)&&c.error(`PoiRenderer::findImageItem: No imageItem found with name:\n            '${null!==(r=null===n||void 0===n?void 0:n.image)&&void 0!==r?r:i}'\n            after 5 attempts.`)}(n,this.m_imageCaches,i);a&&(a.loaded?this.setupPoiInfo(n,a,t,i):a.loading||a.loadImage().then((e=>{(null===e||void 0===e?void 0:e.image)&&this.setupPoiInfo(n,e,t,i)})).catch((e=>{c.error(`preparePoi: Failed to load imageItem: '${a.url}`,e),n.isValid=!1})))}setupPoiInfo(e,t,n,i){if(o.assert(void 0===e.uvBox),!t.image)return c.error("setupPoiInfo: No imageItem/imageData found"),void(e.isValid=!1);const a=e.technique,l=t.image.width,u=t.image.height,h=s.MipMapGenerator.getPaddedSize(l,u),d=p.trilinear&&t.mipMaps,m=d?h.width:l,f=d?h.height:u,g=void 0!==(null===i||void 0===i?void 0:i.width)?i.width:l,v=void 0!==(null===i||void 0===i?void 0:i.height)?i.height:u,y=void 0!==(null===i||void 0===i?void 0:i.width)?i.width:l,_=void 0!==(null===i||void 0===i?void 0:i.height)?i.height:u,x=void 0!==(null===i||void 0===i?void 0:i.xOffset)?i.xOffset:0,b=void 0!==(null===i||void 0===i?void 0:i.yOffset)?i.yOffset:0,w=x/m,S=(x+y)/m,M=b/f,E=(b+_)/f;let T=void 0!==a.iconScale?a.iconScale:1,C=void 0!==a.iconScale?a.iconScale:1;const A=r.getPropertyValue(a.screenWidth,n);void 0!==A&&null!==A&&(C=T=A/g);const P=r.getPropertyValue(a.screenHeight,n);void 0!==P&&null!==P&&(C=P/v,void 0!==A&&(T=C)),e.computedWidth=g*T,e.computedHeight=v*C,e.uvBox={s0:w,t0:E,s1:S,t1:M},e.imageItem=t,e.imageTexture=i,e.buffer=this.m_poiBatchRegistry.registerPoi(e,this.addLayer(e.renderOrder)),e.isValid=!0}}t.PoiRenderer=g},6549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoiTableManager=t.PoiTable=void 0;const r=n(26309),i=n(15739).LoggerManager.instance.create("PoiTable");class o{static verifyJSON(e){let t="string"===typeof e.name&&e.name.length>0&&(void 0===e.altNames||Array.isArray(e.altNames))&&(void 0===e.stackMode||"yes"===e.stackMode||"no"===e.stackMode||"parent"===e.stackMode)&&(void 0===e.visible||"boolean"===typeof e.visible)&&(void 0===e.priority||"number"===typeof e.priority)&&(void 0===e.iconMinLevel||"number"===typeof e.iconMinLevel)&&(void 0===e.iconMaxLevel||"number"===typeof e.iconMaxLevel)&&(void 0===e.textMinLevel||"number"===typeof e.textMinLevel)&&(void 0===e.textMaxLevel||"number"===typeof e.textMaxLevel);if(t&&void 0!==e.altNames){const n=e.altNames;for(const e in n)if("string"!==typeof e){t=!1;break}}return t}setup(e){switch(this.name=e.name,this.altNames=e.altNames,this.iconName=e.iconName,this.visible=e.visible,this.priority=e.priority,this.iconMinLevel=e.iconMinLevel,this.iconMaxLevel=e.iconMaxLevel,this.textMinLevel=e.textMinLevel,this.textMaxLevel=e.textMaxLevel,e.stackMode){case"yes":this.stackMode=r.PoiStackMode.Show;break;case"no":this.stackMode=r.PoiStackMode.Hide;break;case"parent":this.stackMode=r.PoiStackMode.ShowParent}}}class a{constructor(e,t){this.name=e,this.useAltNamesForKey=t,this.poiList=new Array,this.poiDict=new Map,this.m_isLoading=!1,this.m_loadedOk=void 0}get isLoading(){return this.m_isLoading}get loadedOk(){return!0===this.m_loadedOk}getEntry(e){const t=this.poiDict.get(e);if(void 0!==t){if(t<this.poiList.length)return this.poiList[t];throw new Error("Poi table entry index out of stored list!")}}async load(e,t){if(void 0!==this.m_loadedOk)return!0;this.m_loadedOk=!1;const n=await fetch(e,{signal:t});if(!n.ok)throw new Error(`load: Cannot load POI table at ${e}: ${n.statusText}`);const r=await n.json();if(void 0===r)return i.info(`load: TextureAtlas empty: ${e}`),!0;this.startLoading();try{if(i.debug(`load: Loading POI table '${e}' for table '${this.name}'`),void 0!==r.poiList&&Array.isArray(r.poiList))for(const t of r.poiList)if(o.verifyJSON(t)){const n=new o;n.setup(t);const r=this.poiList.push(n)-1;if(this.useAltNamesForKey)if(void 0!==n.altNames&&n.altNames.length>0)for(const e of n.altNames)this.poiDict.set(e,r);else i.debug(`load: Invalid entry in POI table '${e}' : No alternative names set in entry: ${JSON.stringify(t)}.`);else void 0===n.name?i.warn(`load: Invalid entry in POI table '${e}' : . No name set in entry: ${t}.`):this.poiDict.set(n.name,r)}else i.warn(`load: Invalid entry in POI table '${e}' : ${JSON.stringify(t)}`);this.m_loadedOk=!0,this.finishedLoading()}catch(a){return i.error(`load: Failed to load POI table '${e}' : ${a}`),this.m_loadedOk=!1,this.finishedLoading(),!1}return!0}startLoading(){this.m_isLoading=!0}finishedLoading(){this.m_isLoading=!1}}t.PoiTable=a;t.PoiTableManager=class{constructor(e){this.mapView=e,this.m_isLoading=!1,this.m_poiTables=new Map,this.m_abortControllers=new Map}async loadPoiTables(e){return new Promise((t=>{if(this.clear(),void 0!==e){this.startLoading();const n=new Array;e.forEach((e=>{var t;if(void 0!==e&&void 0!==e.name&&"string"===typeof e.name){const r=new a(e.name,!1!==e.useAltNamesForKey);void 0!==e.url&&"string"===typeof e.url?(this.addTable(r),this.m_abortControllers.set(e.name,new AbortController),n.push(r.load(e.url,null===(t=this.m_abortControllers.get(e.name))||void 0===t?void 0:t.signal))):i.error(`POI table definition has no valid url: ${e}`)}else i.error(`POI table definition has no valid name: ${e}`)})),n.length>0?Promise.all(n).finally((()=>{this.finishLoading(),t()})):(this.finishLoading(),t())}else this.finishLoading(),t()}))}clear(){this.m_poiTables=new Map,this.m_abortControllers.forEach(((e,t)=>{e.abort(),this.m_abortControllers.delete(t)}))}get poiTables(){return this.m_poiTables}addTable(e){this.m_poiTables.set(e.name,e)}getPoiTable(e){return void 0===e?void 0:this.m_poiTables.get(e)}get finishedLoading(){return!this.m_isLoading}startLoading(){this.m_isLoading=!0}finishLoading(){this.m_isLoading=!1}}},3757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFontCatalog=void 0;const r=n(21690),i=n(15739).LoggerManager.instance.create("FontCatalogLoader");t.loadFontCatalog=async function(e,t,n){return await r.FontCatalog.load(e.url,1024).then(t.bind(void 0,e.name)).catch((t=>{i.error("Failed to load FontCatalog: ",e.name,t),n&&n(t)}))}},3422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutState=void 0;const r=n(21690);t.LayoutState=class{constructor(e){this.m_hAlign=r.DefaultTextStyle.DEFAULT_HORIZONTAL_ALIGNMENT,this.m_vAlign=r.DefaultTextStyle.DEFAULT_VERTICAL_ALIGNMENT,this.textPlacement=e}set textPlacement(e){this.m_hAlign=r.hAlignFromPlacement(e.h),this.m_vAlign=r.vAlignFromPlacement(e.v)}get textPlacement(){return{h:r.hPlacementFromAlignment(this.m_hAlign),v:r.vPlacementFromAlignment(this.m_vAlign)}}reset(e){this.m_hAlign=e.horizontalAlignment,this.m_vAlign=e.verticalAlignment}get horizontalAlignment(){return this.m_hAlign}get verticalAlignment(){return this.m_vAlign}}},91088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewState=void 0;const r=n(534);t.MapViewState=class{constructor(e,t){this.m_mapView=e,this.m_renderedTilesChangeCheck=t,this.m_lookAtVector=new r.Vector3}get worldCenter(){return this.m_mapView.worldCenter}get cameraIsMoving(){return this.m_mapView.cameraIsMoving}get maxVisibilityDist(){return this.m_mapView.viewRanges.maximum}get zoomLevel(){return this.m_mapView.zoomLevel}get env(){return this.m_mapView.env}get frameNumber(){return this.m_mapView.frameNumber}get lookAtVector(){return this.m_mapView.camera.getWorldDirection(this.m_lookAtVector)}get lookAtDistance(){return this.m_mapView.targetDistance}get isDynamic(){return this.m_mapView.isDynamicFrame}get hiddenGeometryKinds(){return void 0===this.m_mapView.tileGeometryManager?void 0:this.m_mapView.tileGeometryManager.hiddenGeometryKinds}get renderedTilesChanged(){return this.m_renderedTilesChangeCheck()}get projection(){return this.m_mapView.projection}get elevationProvider(){return this.m_mapView.elevationProvider}}},30202:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWorldPosition=t.isPathLabelTooSmall=t.placePathLabel=t.placePointLabel=t.placeIcon=t.PlacementResult=t.newPointLabelTextMarginPercent=t.persistentPointLabelTextMargin=t.checkReadyForPlacement=t.PrePlacementResult=t.getMaxViewDistance=t.pointToPlaneDistance=t.computeViewDistance=void 0;const r=n(26309),i=n(31201),o=n(21690),a=n(15739),s=n(534),l=n(1830),c=n(59456),u=n(92301),h=n(25557),d=new s.Vector3(0,0,0),p=new s.Vector3(0,0,0),m=new s.Vector3(0,0,0);function f(e,t,n,r){let i;const o=e.path;if(o&&o.length>1)if(void 0!==t&&o&&o.length>t)i=g(o[t],n,r);else{const e=g(o[0],n,r),t=g(o[o.length-1],n,r);i=Math.min(e,t)}else i=g(e.position,n,r);return i}function g(e,t,n){return m.copy(e).sub(t).dot(n)}var v;t.computeViewDistance=f,t.pointToPlaneDistance=g,t.getMaxViewDistance=function(e,t){return e.maxVisibilityDist*t},function(e){e[e.Ok=0]="Ok",e[e.NotReady=1]="NotReady",e[e.Invisible=2]="Invisible",e[e.TooFar=3]="TooFar",e[e.Duplicate=4]="Duplicate",e[e.Count=5]="Count"}(v=t.PrePlacementResult||(t.PrePlacementResult={}));const y=new s.Vector3;t.checkReadyForPlacement=function(e,t,n,r,o){let s;return e.visible?r.updatePoiFromPoiTable(e)?e.visible&&n.zoomLevel!==e.maxZoomLevel&&a.MathUtils.isClamped(n.zoomLevel,e.minZoomLevel,e.maxZoomLevel)?(s=void 0===o?f(e,t,n.worldCenter,n.lookAtVector):function(e,t,n,r,o,a){const s=f(e,t,n,r);return o!==i.ProjectionType.Spherical?s<=a?s:void 0:(d.copy(e.position).normalize(),p.copy(n).normalize(),d.dot(p)>.5877852522924731&&s<=a?s:void 0)}(e,t,n.worldCenter,n.lookAtVector,n.projection.type,o),void 0===s?{result:v.TooFar,viewDistance:s}:{result:v.Ok,viewDistance:s}):{result:v.Invisible,viewDistance:s}:{result:v.NotReady,viewDistance:s}:{result:v.Invisible,viewDistance:s}};const _=new s.Box2,x=new s.Box2,b=[],w={},S=[],M=new c.CollisionBox,E=new s.Vector2,T=new s.Vector2,C=new a.Math2D.Box,A=new s.Vector2,P=new s.Vector2;var O;function R(e,t,n,r,i,o,s){a.assert(void 0!==e.element.layoutStyle);const l=e.element,c=e.visible,u=e.textPlacement,h=l.layoutStyle.placements,d=h.length,p=h.findIndex((e=>e.h===u.h&&e.v===u.v));a.assert(p>=0);let m=!0;for(let a=p;a<d+p;++a){const l=a===p&&c,u=D(e,t,h[a%d],n,r,i,o,!l,y);if(u===O.Ok)return s.copy(y),O.Ok;l&&s.copy(y),m=m&&u===O.Invisible}return m?O.Invisible:O.Rejected}function L(e,t,n,r,i,o,s){a.assert(void 0!==e.element.layoutStyle);return D(e,t,e.textPlacement,n,r,i,o,!e.visible,s)}function D(e,n,i,l,c,d,p,m,f){const g=e.element;a.assert(void 0!==g.glyphs),a.assert(void 0!==g.layoutStyle);const v=!g.bounds||m,y=v?x:g.bounds;v&&(k(c,i),w.outputCharacterBounds=void 0,w.path=void 0,w.pathOverflow=!1,w.letterCaseArray=g.glyphCaseArray,c.measureText(g.glyphs,y,w));const b=function(e,t,n,i,l){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new s.Vector2;switch(a.assert(e.type===h.TextElementType.PoiLabel||e.type===h.TextElementType.LineMarker),a.assert(void 0!==e.layoutStyle),c.x=e.xOffset,c.y=e.yOffset,n.h){case o.HorizontalPlacement.Left:c.x-=t.max.x;break;case o.HorizontalPlacement.Right:c.x-=t.min.x}switch(n.v){case o.VerticalPlacement.Top:c.y-=t.min.y;break;case o.VerticalPlacement.Center:c.y-=.5*(t.max.y+t.min.y);break;case o.VerticalPlacement.Bottom:c.y-=t.max.y}if(void 0!==e.poiInfo&&u.poiIsRenderable(e.poiInfo)){a.assert(void 0!==e.poiInfo.computedWidth),a.assert(void 0!==e.poiInfo.computedHeight),c.x+=e.poiInfo.computedWidth*(.5+n.h),c.y+=e.poiInfo.computedHeight*(.5+n.v);const t=o.hPlacementFromAlignment(e.layoutStyle.horizontalAlignment),i=o.vPlacementFromAlignment(e.layoutStyle.verticalAlignment);if(t!==n.h||i!==n.v){const a=e.poiInfo.technique;let s=r.getPropertyValue(a.iconXOffset,l),u=r.getPropertyValue(a.iconYOffset,l);s="number"===typeof s?s:0,u="number"===typeof u?u:0;const h=t-n.h,d=i-n.v,p=s-e.xOffset,m=u-e.yOffset;t===o.HorizontalPlacement.Center||i===o.VerticalPlacement.Center?(c.x+=2*Math.abs(h)*p,c.y-=2*d*Math.abs(p),c.y+=2*Math.abs(d)*m,c.x-=2*h*Math.abs(m)):(c.x+=2*Math.min(Math.abs(h),.5)*p,c.y-=2*Math.sign(d)*Math.min(Math.abs(d),.5)*Math.abs(p),c.y+=2*Math.min(Math.abs(d),.5)*m,c.x-=2*Math.sign(h)*Math.min(Math.abs(h),.5)*Math.abs(m))}}return c.multiplyScalar(i),c}(g,y,i,l,d,T).add(n);return f.set(b.x,b.y,e.renderDistance),_.copy(y).expandByVector(t.persistentPointLabelTextMargin).translate(b),_.getCenter(A),_.getSize(P),P.multiplyScalar(l),C.set(A.x-P.x/2,A.y-P.y/2,P.x,P.y),p.isVisible(C)?(v&&(_.getSize(P),P.multiplyScalar(l*(1+t.newPointLabelTextMarginPercent)),C.set(A.x-P.x/2,A.y-P.y/2,P.x,P.y)),!g.textMayOverlap&&p.isAllocated(C)?O.Rejected:(g.textReservesSpace&&p.allocate(C),v?(g.textBufferObject=void 0,g.bounds=g.bounds?g.bounds.copy(y):y.clone()):k(c,i),e.textPlacement=i,O.Ok)):O.Invisible}function k(e,t){e.textLayoutStyle.horizontalAlignment=o.hAlignFromPlacement(t.h),e.textLayoutStyle.verticalAlignment=o.vAlignFromPlacement(t.v)}t.persistentPointLabelTextMargin=new s.Vector2(2,2),t.newPointLabelTextMarginPercent=.1,function(e){e[e.Ok=0]="Ok",e[e.Rejected=1]="Rejected",e[e.Invisible=2]="Invisible"}(O=t.PlacementResult||(t.PlacementResult={})),t.placeIcon=function(e,t,n,r,i,o){return l.PoiRenderer.computeIconScreenBox(t,n,r,i,C),o.isVisible(C)?!0===t.mayOverlap||!o.isAllocated(C)?O.Ok:O.Rejected:O.Invisible},t.placePointLabel=function(e,t,n,r,i,o,s){let l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];a.assert(void 0!==e.element.layoutStyle);const c=e.element.layoutStyle;return l=l&&void 0!==c.placements&&c.placements.length>1,l?R(e,t,n,r,i,o,s):L(e,t,n,r,i,o,s)},t.placePathLabel=function(e,t,n,r,i){if(w.path=t,w.outputCharacterBounds=b,w.letterCaseArray=e.element.glyphCaseArray,!r.measureText(e.element.glyphs,_,w))return O.Rejected;if(M.copy(_.translate(n)),!i.isVisible(M))return O.Invisible;let o,a=!1;e.element.textMayOverlap||(o=i.search(M),a=o.length>0),S.length=b.length;for(let s=0;s<b.length;++s){const e=b[s].translate(n);let t=S[s];if(void 0===t?(t=new c.CollisionBox(e),S[s]=t):t.copy(e),a&&i.intersectsDetails(t,o))return O.Rejected}if(e.element.textReservesSpace){const e=new c.DetailedCollisionBox(M,S.slice());S.length=0,i.allocate(e)}return O.Ok},t.isPathLabelTooSmall=function(e,t,n){a.assert(e.type===h.TextElementType.PathLabel),n.length=0;let r=!1;for(const o of e.points){void 0!==(r?t.project(o,E):t.projectToScreen(o,E))&&(r=!0,n.push(E.clone()))}if(!r)return!0;const i=5*e.text.length;return _.setFromPoints(n),_.max.sub(_.min).lengthSq()<i*i&&(e.dbgPathTooSmall=!0,!0)};const I=new i.OrientedBox3;t.getWorldPosition=function(e,t,n,i){var o,a;const l=r.getPropertyValue(null===(a=null===(o=e.poiInfo)||void 0===o?void 0:o.technique)||void 0===a?void 0:a.worldOffset,n);if(null===i||void 0===i||i.copy(e.position),null!==l&&void 0!==l&&void 0!==e.offsetDirection){t.localTangentSpace(e.position,I);const n=I.yAxis,r=s.MathUtils.degToRad(e.offsetDirection);n.applyAxisAngle(I.zAxis.negate(),r),i.addScaledVector(I.yAxis,l)}return i}},60294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlacementStats=void 0;t.PlacementStats=class{constructor(e){this.m_logger=e,this.totalGroups=0,this.resortedGroups=0,this.total=0,this.uninitialized=0,this.tooFar=0,this.numNotVisible=0,this.numPathTooSmall=0,this.numCannotAdd=0,this.numRenderedPoiIcons=0,this.numRenderedPoiTexts=0,this.numPoiTextsInvisible=0,this.numRenderedTextElements=0}clear(){this.totalGroups=0,this.resortedGroups=0,this.total=0,this.uninitialized=0,this.tooFar=0,this.numNotVisible=0,this.numPathTooSmall=0,this.numCannotAdd=0,this.numRenderedPoiIcons=0,this.numRenderedPoiTexts=0,this.numPoiTextsInvisible=0,this.numRenderedTextElements=0}log(){const e=this.uninitialized+this.numPoiTextsInvisible+this.tooFar+this.numNotVisible+this.numCannotAdd;this.m_logger.debug("Total groups",this.totalGroups),this.m_logger.debug("Resorted groups",this.resortedGroups),this.m_logger.debug("Total labels",this.total),this.m_logger.debug("Rendered labels",this.numRenderedTextElements),this.m_logger.debug("Rejected labels",e),this.m_logger.debug("Unitialized labels",this.uninitialized),this.m_logger.debug("Rendered poi icons",this.numRenderedPoiIcons),this.m_logger.debug("Rendered poi texts",this.numRenderedPoiTexts),this.m_logger.debug("Poi text invisible",this.numPoiTextsInvisible),this.m_logger.debug("Too far",this.tooFar),this.m_logger.debug("Not visible",this.numNotVisible),this.m_logger.debug("Path too small",this.numPathTooSmall),this.m_logger.debug("Rejected, max glyphs reached",this.numCannotAdd)}}},60923:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderState=t.DEFAULT_FADE_TIME=t.FadingState=void 0;const r=n(15739),i=n(534);var o;!function(e){e[e.Undefined=0]="Undefined",e[e.FadingIn=1]="FadingIn",e[e.FadedIn=2]="FadedIn",e[e.FadingOut=-1]="FadingOut",e[e.FadedOut=-2]="FadedOut"}(o=t.FadingState||(t.FadingState={})),t.DEFAULT_FADE_TIME=800;t.RenderState=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_FADE_TIME;this.fadeTime=e,this.value=0,this.startTime=0,this.opacity=0,this.m_state=o.Undefined}reset(){this.m_state=o.Undefined,this.value=0,this.startTime=0,this.opacity=0}isUndefined(){return this.m_state===o.Undefined}isFading(){return this.m_state===o.FadingIn||this.m_state===o.FadingOut}isFadingIn(){return this.m_state===o.FadingIn}isFadingOut(){return this.m_state===o.FadingOut}isFadedIn(){return this.m_state===o.FadedIn}isFadedOut(){return this.m_state===o.FadedOut}isVisible(){return this.m_state!==o.FadedOut&&this.m_state!==o.Undefined&&this.opacity>0}startFadeIn(e,t){if(this.m_state!==o.FadingIn&&this.m_state!==o.FadedIn){if(!0===t)return this.value=1,this.opacity=1,this.m_state=o.FadedIn,void(this.startTime=e);this.m_state===o.FadingOut?(this.value=1-this.value,this.startTime=e-this.value*this.fadeTime):(this.startTime=e,this.value=0,this.opacity=0),this.m_state=o.FadingIn}}startFadeOut(e){this.m_state!==o.FadingOut&&this.m_state!==o.FadedOut&&this.m_state!==o.Undefined&&(this.m_state===o.FadingIn?(this.startTime=e-this.value*this.fadeTime,this.value=1-this.value):(this.startTime=e,this.value=0,this.opacity=1),this.m_state=o.FadingOut)}updateFading(e,t){if(this.m_state!==o.FadingIn&&this.m_state!==o.FadingOut)return;0===this.startTime&&(this.startTime=e);const n=e-this.startTime,a=this.m_state===o.FadingIn?0:1,s=this.m_state===o.FadingIn?1:0;t||n>=this.fadeTime?(this.value=1,this.opacity=s,this.m_state=this.m_state===o.FadingIn?o.FadedIn:o.FadedOut):(this.value=n/this.fadeTime,this.opacity=i.MathUtils.clamp(r.MathUtils.smootherStep(a,s,this.value),0,1),r.assert(this.isFading()))}}},47095:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimplePath=t.PathParam=t.SimpleLineCurve=void 0;const r=n(534);class i extends r.LineCurve{constructor(e,t){super(e,t)}getLengths(){return void 0===this.m_lengths&&(this.m_lengths=[0,this.v2.distanceTo(this.v1)]),this.m_lengths}}t.SimpleLineCurve=i;class o{constructor(e,t,n){this.path=e,this.index=t,this.t=n}get curve(){return this.path.curves[this.index]}get point(){return void 0===this.m_point&&(this.m_point=this.curve.getPoint(this.t)),this.m_point}}t.PathParam=o;class a extends r.Path{constructor(){super()}getLengths(){if(this.m_cache)return this.m_cache;let e=0;const t=new Array;return t.push(0),this.curves.forEach((n=>{const r=n;e+=r.v1.distanceTo(r.v2),t.push(e)})),this.m_cache=t,t}getParamAt(e){const t=e*this.getLength(),n=this.getCurveLengths();for(let r=0;r<n.length;++r){if(n[r]<t)continue;const e=n[r]-t,i=this.curves[r].getLength();return new o(this,r,0===i?0:1-e/i)}return null}}t.SimplePath=a},67711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextCanvasFactory=void 0;const r=n(21690),i=n(15739);t.TextCanvasFactory=class{constructor(e){this.m_renderer=e,this.m_minGlyphCount=0,this.m_maxGlyphCount=0}setGlyphCountLimits(e,t){this.m_minGlyphCount=e,this.m_maxGlyphCount=t}createTextCanvas(e,t){return i.assert(this.m_maxGlyphCount>0),new r.TextCanvas({renderer:this.m_renderer,fontCatalog:e,minGlyphCount:this.m_minGlyphCount,maxGlyphCount:this.m_maxGlyphCount,name:t})}}},92301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElement=t.LoadingState=t.poiIsRenderable=void 0;const r=n(21690),i=n(534),o=n(25557);t.poiIsRenderable=function(e){return void 0!==e.buffer},function(e){e[e.Requested=0]="Requested",e[e.Loaded=1]="Loaded",e[e.Initialized=2]="Initialized"}(t.LoadingState||(t.LoadingState={}));class a{constructor(e,t,n,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,v=arguments.length>14?arguments[14]:void 0;this.text=e,this.points=t,this.renderParams=n,this.layoutParams=a,this.priority=s,this.xOffset=l,this.yOffset=c,this.featureId=u,this.style=h,this.fadeNear=d,this.fadeFar=p,this.tileOffset=m,this.offsetDirection=f,this.dataSourceName=g,this.dataSourceOrder=v,this.visible=!0,this.distanceScale=.5,this.renderOrder=0,this.elevated=!1,n instanceof r.TextRenderStyle&&(this.renderStyle=n),a instanceof r.TextLayoutStyle&&(this.layoutStyle=a),this.type=t instanceof i.Vector3?o.TextElementType.PoiLabel:o.TextElementType.PathLabel}get position(){if(this.points instanceof Array){return this.points[0]}return this.points}get path(){if(this.points instanceof Array)return this.points}get textMayOverlap(){return!0===this.mayOverlap}set textMayOverlap(e){this.mayOverlap=e}get textReservesSpace(){return!1!==this.reserveSpace}set textReservesSpace(e){this.reserveSpace=e}get poiInfo(){return this.m_poiInfo}set poiInfo(e){if(this.m_poiInfo=e,void 0!==e){void 0!==this.path&&(this.type=o.TextElementType.LineMarker);const t=void 0!==this.renderOrder?this.renderOrder:0;e.renderOrder=t}}get renderStyle(){return this.m_renderStyle}set renderStyle(e){this.m_renderStyle=e}get layoutStyle(){return this.m_layoutStyle}set layoutStyle(e){this.m_layoutStyle=e}hasFeatureId(){return void 0!==this.featureId&&("number"===typeof this.featureId?0!==this.featureId:this.featureId.length>0)}dispose(){var e;const t=null===(e=this.poiInfo)||void 0===e?void 0:e.buffer;t&&t.decreaseRefCount()}}t.TextElement=a,a.HIGHEST_PRIORITY=Number.MAX_SAFE_INTEGER},21910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementBuilder=void 0;const r=n(26309),i=n(21690),o=n(15739),a=n(79977),s=n(92301),l=n(40449),c=o.LoggerManager.instance.create("TextElementBuilder");class u{constructor(e,t,n){if(this.m_env=e,this.m_styleCache=t,this.m_baseRenderOrder=n,this.m_distanceScale=l.DEFAULT_TEXT_DISTANCE_SCALE,this.m_renderOrder=n,Number.isInteger(n))this.renderOrderUpBound=u.RENDER_ORDER_UP_BOUND;else{const e=Math.abs(n);this.renderOrderUpBound=(e-Math.floor(e))*u.RENDER_ORDER_UP_BOUND}this.isValidRenderOrder(n)||c.warn(`Large base render order (${n}) might cause precision issues.`)}static alignZoomLevelRanges(e){var t,n;if(!e.poiInfo)return;const r=e.poiInfo;e.minZoomLevel=null!==(t=e.minZoomLevel)&&void 0!==t?t:o.MathUtils.min2(r.iconMinZoomLevel,r.textMinZoomLevel),e.maxZoomLevel=null!==(n=e.maxZoomLevel)&&void 0!==n?n:o.MathUtils.max2(r.iconMaxZoomLevel,r.textMaxZoomLevel)}static composeRenderOrder(e,t){return e*u.RENDER_ORDER_UP_BOUND+t}withTechnique(e){var t,n,i,a,s,h,d;this.m_technique=e,this.m_priority=null!==(t=r.getPropertyValue(e.priority,this.m_env))&&void 0!==t?t:0,this.m_fadeNear=null!==(n=r.getPropertyValue(e.fadeNear,this.m_env))&&void 0!==n?n:void 0,this.m_fadeFar=null!==(i=r.getPropertyValue(e.fadeFar,this.m_env))&&void 0!==i?i:void 0,this.m_minZoomLevel=null!==(a=r.getPropertyValue(e.minZoomLevel,this.m_env))&&void 0!==a?a:void 0,this.m_maxZoomLevel=null!==(s=r.getPropertyValue(e.maxZoomLevel,this.m_env))&&void 0!==s?s:void 0,this.m_distanceScale=null!==(h=e.distanceScale)&&void 0!==h?h:l.DEFAULT_TEXT_DISTANCE_SCALE,this.m_renderStyle=this.m_styleCache.getRenderStyle(e),this.m_layoutStype=this.m_styleCache.getLayoutStyle(e),this.m_xOffset=r.getPropertyValue(e.xOffset,this.m_env),this.m_yOffset=r.getPropertyValue(e.yOffset,this.m_env);const p=null!==(d=r.getPropertyValue(e.renderOrder,this.m_env))&&void 0!==d?d:0;if(!this.isValidRenderOrder(p)){const e=`Unsupported large render order (${p})`;c.error(e),o.assert(!1,e)}return this.m_renderOrder=u.composeRenderOrder(this.m_baseRenderOrder,p),r.isTextTechnique(e)?this.withTextTechnique(e):this.withPoiTechnique(e),this}withIcon(e,t){return o.assert(void 0!==this.m_poiBuilder),this.m_poiBuilder.withIcon(e,t),this}build(e,t,n,a,l,c,h,d){var p;const m=r.getFeatureId(c);o.assert(void 0!==this.m_technique),o.assert(void 0!==this.m_renderStyle),o.assert(void 0!==this.m_layoutStype);const f=this.m_technique,g=this.m_renderStyle,v=this.m_layoutStype,y=new s.TextElement(i.ContextualArabicConverter.instance.convert(e),t,g,v,this.m_priority,this.m_xOffset,this.m_yOffset,m,f.style,this.m_fadeNear,this.m_fadeFar,n,d,a,l);return y.minZoomLevel=this.m_minZoomLevel,y.maxZoomLevel=this.m_maxZoomLevel,y.distanceScale=this.m_distanceScale,y.mayOverlap=this.m_mayOverlap,y.reserveSpace=this.m_reserveSpace,y.kind=f.kind,y.userData=c,y.textFadeTime=void 0!==f.textFadeTime?1e3*f.textFadeTime:void 0,y.pathLengthSqr=h,y.alwaysOnTop=this.m_alwaysOnTop,y.renderOrder=this.m_renderOrder,y.poiInfo=null===(p=this.m_poiBuilder)||void 0===p?void 0:p.build(y),u.alignZoomLevelRanges(y),y}withTextTechnique(e){this.m_mayOverlap=!0===e.mayOverlap,this.m_reserveSpace=!1!==e.reserveSpace,this.m_poiBuilder=void 0}withPoiTechnique(e){this.m_mayOverlap=!0===e.textMayOverlap,this.m_reserveSpace=!1!==e.textReserveSpace,this.m_alwaysOnTop=!0===e.alwaysOnTop,this.m_poiBuilder||(this.m_poiBuilder=new a.PoiBuilder(this.m_env)),this.m_poiBuilder.withTechnique(e)}isValidRenderOrder(e){return Math.abs(e)<this.renderOrderUpBound}}t.TextElementBuilder=u,u.RENDER_ORDER_UP_BOUND=1e7},18386:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementGroup=void 0;const r=n(15739);class i extends r.PriorityListGroup{}t.TextElementGroup=i},52734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementGroupPriorityList=void 0;const r=n(15739);class i extends r.GroupedPriorityList{}t.TextElementGroupPriorityList=i},68051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementGroupState=void 0;const r=n(15739),i=n(98559),o=n(25557);t.TextElementGroupState=class{constructor(e,t,n){this.group=e,this.tileKey=t,this.m_visited=!1,r.assert(e.elements.length>0);const a=e.elements.length;this.m_textElementStates=[],this.m_visited=!0;for(let r=0;r<a;++r){const t=e.elements[r];if(t.type===o.TextElementType.LineMarker&&void 0!==t.path){const e=t.path.length;for(let r=0;r<e;r++){const e=new i.TextElementState(t,r),o=n(e);e.update(o),this.m_textElementStates.push(e)}}else{const e=new i.TextElementState(t),r=n(e);e.update(r),this.m_textElementStates.push(e)}}}get visited(){return this.m_visited}set visited(e){this.m_visited=e}get priority(){return this.group.priority}updateFading(e,t){for(const n of this.m_textElementStates)void 0!==n&&n.updateFading(e,t)}traverseVisibleElements(e){for(const t of this.m_textElementStates)void 0!==t&&t.visible&&e(t)}updateElements(e){for(const t of this.m_textElementStates){const n=e(t);t.update(n)}}get size(){return this.m_textElementStates.length}get textElementStates(){return this.m_textElementStates}}},98559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLineMarkerElementState=t.TextElementState=void 0;const r=n(21690),i=n(15739),o=n(3422),a=n(60923),s=n(25557);t.TextElementState=class{constructor(e,t){this.element=e,this.m_lineMarkerIndex=t}get initialized(){return void 0!==this.m_textRenderState||void 0!==this.m_iconRenderState}get visible(){if(void 0!==this.m_textRenderState&&this.m_textRenderState.isVisible())return!0;const e=this.iconRenderState;return!(void 0===e||!e.isVisible())}get textPlacement(){const e=this.element.layoutStyle,t=this.m_textLayoutState;return void 0!==t?t.textPlacement:{h:r.hPlacementFromAlignment(e.horizontalAlignment),v:r.vPlacementFromAlignment(e.verticalAlignment)}}set textPlacement(e){void 0===this.m_textLayoutState&&!0===this.isBaseTextPlacement(e)||(void 0===this.m_textLayoutState?this.m_textLayoutState=new o.LayoutState(e):this.m_textLayoutState.textPlacement=e)}isBaseTextPlacement(e){const t=this.element.layoutStyle;if(void 0!==t)return r.hAlignFromPlacement(e.h)===t.horizontalAlignment&&r.vAlignFromPlacement(e.v)===t.verticalAlignment}reset(){void 0!==this.m_textRenderState&&this.m_textRenderState.reset(),void 0!==this.m_textLayoutState&&(void 0!==this.element.layoutStyle?this.m_textLayoutState.reset(this.element.layoutStyle):this.m_textLayoutState=void 0),this.iconRenderState&&this.m_iconRenderState.reset(),this.m_viewDistance=void 0,this.element.textBufferObject=void 0,this.element.bounds=void 0}replace(e){this.m_textRenderState=e.m_textRenderState,this.m_textLayoutState=e.m_textLayoutState,this.m_iconRenderState=e.m_iconRenderState,e.m_textRenderState=void 0,e.m_textLayoutState=void 0,e.m_iconRenderState=void 0,void 0===this.element.glyphs&&(this.element.glyphs=e.element.glyphs,this.element.glyphCaseArray=e.element.glyphCaseArray),this.element.bounds=void 0,this.element.textBufferObject=void 0}get viewDistance(){return this.m_viewDistance}update(e){this.initialized||void 0===e||this.initializeRenderStates(),this.setViewDistance(e)}setViewDistance(e){this.m_viewDistance=e}get renderDistance(){return!0===this.element.alwaysOnTop?0:void 0!==this.m_viewDistance?-this.m_viewDistance:0}get textRenderState(){return this.m_textRenderState}get iconRenderState(){return this.m_iconRenderState}get lineMarkerIndex(){return this.m_lineMarkerIndex}get position(){return void 0!==this.element.path&&void 0!==this.m_lineMarkerIndex?this.element.path[this.m_lineMarkerIndex]:this.element.position}updateFading(e,t){void 0!==this.m_textRenderState&&this.m_textRenderState.updateFading(e,t),void 0!==this.iconRenderState&&this.iconRenderState.updateFading(e,t)}initializeRenderStates(){var e;i.assert(void 0===this.m_textRenderState),i.assert(void 0===this.m_textLayoutState),i.assert(void 0===this.m_iconRenderState);const{textFadeTime:t}=this.element;if(this.m_textRenderState=new a.RenderState(t),this.element.type===s.TextElementType.PoiLabel||this.element.type===s.TextElementType.LineMarker){const n=null===(e=this.element.poiInfo)||void 0===e?void 0:e.technique.iconFadeTime,r=void 0!==n?1e3*n:t;this.m_iconRenderState=new a.RenderState(r)}}},t.isLineMarkerElementState=function(e){return void 0!==e.m_lineMarkerIndex}},85616:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementStateCache=void 0;const r=n(15739),i=n(68051),o=n(98559),a=n(25557),s=r.LoggerManager.instance.create("TextElementsStateCache",{level:r.LogLevel.Log});const l={entries:[],index:-1};function c(e){return e.hasFeatureId()?e.featureId:e.text}function u(e,t,n,r){return void 0!==e.pathLengthSqr&&(void 0!==n.pathLengthSqr&&e.pathLengthSqr>n.pathLengthSqr)}function h(e,t,n,r){return t<r}function d(e,t,n){const r=e.element,i=function(e){return 100<<(Math.min(4,13-Math.min(13,Math.floor(e)))<<2)}(n),s=t.length,l=e.position,c=e.visible,d=o.isLineMarkerElementState(e);let p,m=-1,f=1/0;const g=r.type===a.TextElementType.PathLabel?u:h;for(let a=0;a<s;++a){const e=t[a],n=e.element,s=r.type!==n.type||d!==o.isLineMarkerElementState(e),u=c&&e.visible;if(s||u)continue;const h=l.distanceToSquared(n.position);h>i||(void 0===p||g(n,h,p,f))&&(m=a,p=n,f=h)}return m}t.TextElementStateCache=class{constructor(){this.m_referenceMap=new Map,this.m_textMap=new Map}getOrSet(e,t,n){let r=this.get(e);return void 0!==r?(r.updateElements(n),[r,!0]):(r=new i.TextElementGroupState(e,t,n),this.set(e,r),[r,!1])}get size(){return this.m_referenceMap.size}get cacheSize(){return this.m_textMap.size}get sortedGroupStates(){return void 0===this.m_sortedGroupStates&&(this.m_sortedGroupStates=Array.from(this.m_referenceMap.values()),this.m_sortedGroupStates.sort(((e,t)=>t.group.priority-e.group.priority))),r.assert(this.m_referenceMap.size===this.m_sortedGroupStates.length),this.m_sortedGroupStates}update(e,t,n,r){const i=n?this.replaceElement.bind(this,r):void 0;let o=!1;for(const[a,s]of this.m_referenceMap.entries())s.visited?s.updateFading(e,t):(n&&s.traverseVisibleElements(i),this.m_referenceMap.delete(a),this.m_sortedGroupStates=void 0,o=!0);return o}clearVisited(){for(const e of this.m_referenceMap.values())e.visited=!1}clearTextCache(){this.m_textMap.clear()}clear(){this.m_referenceMap.clear(),this.m_sortedGroupStates=void 0,this.m_textMap.clear()}deduplicateElement(e,t){const n=this.findDuplicate(t,e);if(void 0===n)return this.m_textMap.set(c(t.element),[t]),!0;if(-1===n.index)return n.entries.push(t),!0;const r=n.entries[n.index];return!(r.visible||!t.visible)&&(n.entries[n.index]=t,r.reset(),!0)}replaceElement(e,t){r.assert(t.visible);const n=this.findDuplicate(t,e);if(void 0===n||-1===n.index)return!1;const i=n.entries[n.index];return r.assert(!i.visible),i.replace(t),!0}get(e){const t=this.m_referenceMap.get(e);return void 0!==t&&(t.visited=!0),t}set(e,t){r.assert(e.elements.length>0),this.m_referenceMap.set(e,t),this.m_sortedGroupStates=void 0}findDuplicate(e,t){const n=e.element,i=this.m_textMap.get(c(n));if(void 0===i)return;l.entries=i;const o=n.hasFeatureId()?function(e,t){const n=e.element,i=t.findIndex((e=>e.element.tileOffset===n.tileOffset));if(-1===i)return-1;const o=t[i].element;if(r.assert(n.featureId===o.featureId),o.text===n.text)return i;s.debug(`Text feature id ${n.featureId} collision between "${n.text} and              ${o.text}`)}(e,i):d(e,i,t);return void 0===o?(n.featureId=void 0,this.findDuplicate(e,t)):(l.index=o,l)}}},25557:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementType=void 0,function(e){e[e.PoiLabel=0]="PoiLabel",e[e.PathLabel=1]="PathLabel",e[e.LineMarker=2]="LineMarker"}(t.TextElementType||(t.TextElementType={}))},40449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementsRenderer=t.DEFAULT_TEXT_DISTANCE_SCALE=t.DEFAULT_FONT_CATALOG_NAME=void 0;const r=n(21690),i=n(15739),o=n(534),a=n(60396),s=n(91649),l=n(92980),c=n(1830),u=n(59456),h=n(3757),d=n(30202),p=(n(60294),n(47095)),m=n(67711),f=n(92301),g=n(94814),v=n(85616),y=n(25557),_=n(4509);n(4520);var x;!function(e){e[e.PersistentLabels=0]="PersistentLabels",e[e.NewLabels=1]="NewLabels"}(x||(x={})),t.DEFAULT_FONT_CATALOG_NAME="default",t.DEFAULT_TEXT_DISTANCE_SCALE=.5;const b=i.LoggerManager.instance.create("TextElementsRenderer",{level:i.LogLevel.Log}),w=void 0,S=void 0,M=new o.Vector3,E=new o.Vector2,T=[],C=new o.Vector2,A={},P={},O={},R={vector2:[new o.Vector2]};class L{constructor(e,t){this.tile=e,this.group=t}}class D{constructor(e){this.lists=e}get priority(){return i.assert(this.lists.length>0),this.lists[0].group.priority}count(){let e=0;for(const t of this.lists)e+=t.group.elements.length;return e}}function k(e,t,n,r,i){P.path=r,P.pathOverflow=i,P.layer=e.renderOrder,P.letterCaseArray=e.glyphCaseArray,P.pickingData=e.userData?e:void 0,t.addText(e.glyphs,n,P)}function I(e){if(void 0===e)return!1;return i.PerformanceTimer.now()-e>10&&(b.debug("Placement time limit exceeded."),!0)}t.TextElementsRenderer=class{constructor(e,t,n,r,i,a,s,l,h,d){this.m_viewState=e,this.m_viewUpdateCallback=t,this.m_screenProjector=n,this.m_poiManager=r,this.m_renderer=i,this.m_imageCaches=a,this.m_loadPromisesCount=0,this.m_textCanvases=new Map,this.m_tmpVector=new o.Vector2,this.m_tmpVector3=new o.Vector3,this.m_cameraLookAt=new o.Vector3,this.m_overloaded=!1,this.m_cacheInvalidated=!1,this.m_forceNewLabelsPass=!1,this.m_addNewLabels=!0,this.m_textElementStateCache=new v.TextElementStateCache,this.m_camera=new o.OrthographicCamera(-1,1,1,-1),this.m_textStyleCache=new _.TextStyleCache,this.m_screenCollisions=new u.ScreenCollisions,this.m_options=Object.assign({},s),g.initializeDefaultOptions(this.m_options),d?this.m_screenCollisions=d:void 0!==this.m_options.collisionDebugCanvas&&null!==this.m_options.collisionDebugCanvas&&(this.m_screenCollisions=new u.ScreenCollisionsDebug(this.m_options.collisionDebugCanvas)),this.m_textCanvasFactory=null!==l&&void 0!==l?l:new m.TextCanvasFactory(this.m_renderer),this.m_textCanvasFactory.setGlyphCountLimits(this.m_options.minNumGlyphs,this.m_options.maxNumGlyphs),this.m_poiRenderer=null!==h&&void 0!==h?h:new c.PoiRenderer(this.m_renderer,this.m_poiManager,this.m_imageCaches),this.initializeCamera(),this.initializeDefaultFontCatalog(),this.m_textStyleCache.updateTextCanvases(this.m_textCanvases)}set disableFading(e){this.m_options.disableFading=e}get disableFading(){return!0===this.m_options.disableFading}get styleCache(){return this.m_textStyleCache}get delayLabelsUntilMovementFinished(){return!0===this.m_options.delayLabelsUntilMovementFinished}set delayLabelsUntilMovementFinished(e){this.m_options.delayLabelsUntilMovementFinished=e}get showReplacementGlyphs(){return!0===this.m_options.showReplacementGlyphs}set showReplacementGlyphs(e){this.m_options.showReplacementGlyphs=e,this.m_textCanvases.forEach((t=>{(null===t||void 0===t?void 0:t.fontCatalog)&&(t.fontCatalog.showReplacementGlyphs=e)}))}restoreRenderers(e){this.m_renderer=e,this.m_poiRenderer=new c.PoiRenderer(this.m_renderer,this.m_poiManager,this.m_imageCaches)}async updateFontCatalogs(e){if(this.m_defaultFontCatalogConfig&&(e&&-1!==e.findIndex((e=>e.name===t.DEFAULT_FONT_CATALOG_NAME))?this.m_textCanvases.has(t.DEFAULT_FONT_CATALOG_NAME)&&this.m_textCanvases.delete(t.DEFAULT_FONT_CATALOG_NAME):(e||(e=[]),e.unshift(this.m_defaultFontCatalogConfig))),e&&e.length>0){for(const[t]of this.m_textCanvases)e.findIndex((e=>e.name===t))<0&&this.m_textCanvases.delete(t);for(const t of e)await this.addTextCanvas(t)}else this.m_textCanvases.clear();this.m_textStyleCache.updateTextCanvases(this.m_textCanvases)}async updateTextStyles(e,t){this.m_textStyleCache.updateTextStyles(e,t),await this.waitLoaded(),this.m_textStyleCache.updateTextCanvases(this.m_textCanvases)}renderText(e){let t;this.m_camera.far=e,this.updateGlyphDebugMesh(),this.m_poiRenderer.update();for(const n of this.m_poiRenderer.layers){for(const[,e]of this.m_textCanvases)null===e||void 0===e||e.render(this.m_camera,null===t||void 0===t?void 0:t.id,n.id,void 0,!1);this.m_poiRenderer.render(this.m_camera,n),t=n}for(const[,n]of this.m_textCanvases)null===n||void 0===n||n.render(this.m_camera,null===t||void 0===t?void 0:t.id,void 0,void 0,!1)}invalidateCache(){this.m_cacheInvalidated=!0}movementStarted(){this.delayLabelsUntilMovementFinished&&(this.m_addNewLabels=!1)}movementFinished(){this.invalidateCache(),this.delayLabelsUntilMovementFinished&&(this.m_addNewLabels=!0)}get overloaded(){return this.m_overloaded}placeText(e,t){const n=function(e){let t=!1;return e.forEach((e=>{let{renderedTiles:n}=e;n.forEach((e=>{e.textElementsChanged&&(e.textElementsChanged=!1,t=!0)}))})),t}(e),r=this.hasOverlayText()||n||function(e){for(let t=0;t<e.length;t++)for(const[n,r]of e[t].renderedTiles)if(r.hasTextElements())return!0;return!1}(e);if(!r&&!this.m_cacheInvalidated&&!this.m_viewState.renderedTilesChanged)return;const i=this.m_cacheInvalidated||n||this.m_viewState.renderedTilesChanged,o=i&&this.m_addNewLabels;o&&(this.m_textElementStateCache.clearVisited(),this.updateTextElements(e));const a=this.m_textElementStateCache.update(t,this.m_options.disableFading,o,this.m_viewState.zoomLevel);this.reset(),this.m_addNewLabels&&this.prepopulateScreenWithBlockingElements(e);const s=(i||a)&&this.m_addNewLabels;this.placeTextElements(t,s),this.placeOverlayTextElements()}addOverlayText(e){0!==e.length&&(this.m_overlayTextElements=void 0===this.m_overlayTextElements?e.slice():this.m_overlayTextElements.concat(e))}clearOverlayText(){this.m_overlayTextElements=[]}hasOverlayText(){return void 0!==this.m_overlayTextElements&&this.m_overlayTextElements.length>0}get overlayText(){return this.m_overlayTextElements}pickTextElements(e,t){const n=(n,r)=>{if(void 0===n)return;const i=n,o={type:r,point:e,distance:0,renderOrder:i.renderOrder,featureId:i.featureId,userData:i.userData,dataSourceName:i.dataSourceName,dataSourceOrder:i.dataSourceOrder,text:i.text};t.addResult(o)};for(const[,r]of this.m_textCanvases)null===r||void 0===r||r.pickText(e,(e=>{n(e,l.PickObjectType.Text)}));this.m_poiRenderer.pickTextElements(e,(e=>{n(e,l.PickObjectType.Icon)}))}get loading(){return this.m_loadPromisesCount>0}async waitLoaded(){if(void 0!==this.m_loadPromise)return await this.m_loadPromise}clearRenderStates(){this.m_textElementStateCache.clear()}getMemoryUsage(){const e={heapSize:0,gpuSize:0};for(const[,t]of this.m_textCanvases)null===t||void 0===t||t.getMemoryUsage(e);return this.m_poiRenderer.getMemoryUsage(e),e}async addDefaultTextCanvas(){!this.m_textCanvases.has(t.DEFAULT_FONT_CATALOG_NAME)&&this.m_defaultFontCatalogConfig&&(await this.addTextCanvas(this.m_defaultFontCatalogConfig),this.m_textStyleCache.updateTextCanvases(this.m_textCanvases))}reset(){this.m_cameraLookAt.copy(this.m_viewState.lookAtVector),this.m_screenCollisions.reset();for(const[,e]of this.m_textCanvases)null===e||void 0===e||e.clear();this.m_poiRenderer.reset()}prepopulateScreenWithBlockingElements(e){const t=[];e.forEach((e=>{const n=new o.Vector3,r=new o.Vector3;for(const i of e.renderedTiles.values())for(const e of i.blockingElements)if(!(e.points.length<2)){this.m_screenProjector.project3(e.points[0],n);for(let i=1;i<e.points.length;i++){this.m_screenProjector.project3(e.points[i],r);const o=e.screenSpaceLines[i-1];o.start.copy(n),o.end.copy(r);const a={minX:Math.min(n.x,r.x),maxX:Math.max(n.x,r.x),minY:Math.min(n.y,r.y),maxY:Math.max(n.y,r.y),line:o};t.push(a),n.copy(r)}}})),this.m_screenCollisions.allocateIBoxes(t)}placeTextElementGroup(e,t,n,o){var a;i.assert(e.visited);const l=[],c=this.m_viewState.hiddenGeometryKinds,u=this.m_viewState.projection,h=this.m_viewState.elevationProvider,p=null===h||void 0===h?void 0:h.getDisplacementMap(e.tileKey);for(const i of e.textElementStates){if(o===x.PersistentLabels)S&&++S.total;else if(void 0!==n&&t.numRenderedTextElements>=n)return b.debug("Placement label limit exceeded."),!1;if(!i.initialized){S&&++S.uninitialized;continue}if(void 0===i.viewDistance||i.viewDistance<0){S&&++S.tooFar;continue}const e=i.visible;if(o===x.PersistentLabels&&!e||o===x.NewLabels&&e)continue;const m=i.element,f=this.m_textStyleCache.getTextElementStyle(m.style),g=f.textCanvas;if(void 0!==c&&void 0!==m.kind&&c.hasOrIntersects(m.kind))continue;if(void 0!==h&&!m.elevated){if(!p){this.m_viewUpdateCallback(),this.m_forceNewLabelsPass=!0;continue}s.overlayTextElement(m,h,p,u)}const v=m.type;if(v===y.TextElementType.PathLabel&&d.isPathLabelTooSmall(m,this.m_screenProjector,T)){S&&S.numNotVisible++,!0===m.dbgPathTooSmall&&S&&S.numPathTooSmall++,i.reset();continue}const _=!0;if(g){if(!this.initializeGlyphs(m,f,_))continue;const e=g.getLayer(null!==(a=m.renderOrder)&&void 0!==a?a:r.DEFAULT_TEXT_CANVAS_LAYER);if(void 0!==e&&e.storage.drawCount+m.glyphs.length>e.storage.capacity){S&&++S.numCannotAdd,b.warn("layer glyph storage capacity exceeded.");continue}g.textRenderStyle=m.renderStyle,g.textLayoutStyle=m.layoutStyle}switch(v){case y.TextElementType.PoiLabel:this.addPoiLabel(i,g,t);break;case y.TextElementType.LineMarker:this.addLineMarkerLabel(i,l,g,t);break;case y.TextElementType.PathLabel:g&&this.addPathLabel(i,T,g,t)}}return!0}initializeGlyphs(e,t,n){if(e.loadingState===f.LoadingState.Initialized)return void 0!==e.glyphs;i.assert(void 0!==t.textCanvas);const o=t.textCanvas;if(void 0===e.loadingState)if(e.loadingState=f.LoadingState.Requested,void 0===e.renderStyle&&(e.renderStyle=new r.TextRenderStyle(Object.assign(Object.assign({},t.renderParams),e.renderParams))),void 0===e.layoutStyle&&(e.layoutStyle=new r.TextLayoutStyle(Object.assign(Object.assign({},t.layoutParams),e.layoutParams))),""===e.text)e.loadingState=f.LoadingState.Loaded;else{const t=o.fontCatalog.loadCharset(e.text,e.renderStyle).then((()=>{--this.m_loadPromisesCount,e.loadingState=f.LoadingState.Loaded,this.m_forceNewLabelsPass=this.m_forceNewLabelsPass||n,this.m_viewUpdateCallback()}));0===this.m_loadPromisesCount&&(this.m_loadPromise=void 0),++this.m_loadPromisesCount,this.m_loadPromise=void 0===this.m_loadPromise?t:Promise.all([this.m_loadPromise,t])}return e.loadingState===f.LoadingState.Loaded&&(o.textRenderStyle=e.renderStyle,o.textLayoutStyle=e.layoutStyle,e.glyphCaseArray=[],e.bounds=void 0,e.glyphs=o.fontCatalog.getGlyphs(e.text,o.textRenderStyle,e.glyphCaseArray),e.loadingState=f.LoadingState.Initialized),void 0!==e.glyphs}initializeCamera(){this.m_camera.position.z=1,this.m_camera.near=0}updateCamera(){const{width:e,height:t}=this.m_renderer.getSize(R.vector2[0]);this.m_camera.left=e/-2,this.m_camera.right=e/2,this.m_camera.bottom=t/-2,this.m_camera.top=t/2,this.m_camera.updateProjectionMatrix(),this.m_camera.updateMatrixWorld(!1),this.m_screenCollisions.update(e,t)}initializeDefaultFontCatalog(){var e;this.m_options.fontCatalog&&(this.m_defaultFontCatalogConfig=(e=this.m_options.fontCatalog,{name:t.DEFAULT_FONT_CATALOG_NAME,url:e}),this.addDefaultTextCanvas())}async addTextCanvas(e){const t=(e,t)=>{if(this.m_textCanvases.has(e)){const n=this.m_textCanvasFactory.createTextCanvas(t,e);t.showReplacementGlyphs=this.showReplacementGlyphs,this.m_textCanvases.set(e,n)}},n=()=>{this.m_textCanvases.delete(e.name)};if(this.m_textCanvases.has(e.name))return Promise.resolve();{this.m_textCanvases.set(e.name,void 0);const r=h.loadFontCatalog(e,t,n).then((()=>{--this.m_loadPromisesCount,this.m_viewUpdateCallback()})).catch((e=>{b.info("rendering without font catalog, only icons possible",e),--this.m_loadPromisesCount}));return 0===this.m_loadPromisesCount&&(this.m_loadPromise=void 0),++this.m_loadPromisesCount,this.m_loadPromise=void 0===this.m_loadPromise?r:Promise.all([this.m_loadPromise,r]),r}}updateGlyphDebugMesh(){const e=a.debugContext.getValue("DEBUG_GLYPHS");void 0!==e&&(e&&void 0===this.m_debugGlyphTextureCacheMesh&&this.initializeGlyphDebugMesh(),i.assert(void 0!==this.m_debugGlyphTextureCacheMesh),i.assert(void 0!==this.m_debugGlyphTextureCacheWireMesh),this.m_debugGlyphTextureCacheMesh.visible=e,this.m_debugGlyphTextureCacheWireMesh.visible=e)}initializeGlyphDebugMesh(){if(0===this.m_textCanvases.size)return;const e=this.m_textCanvases.values().next().value,t=e.fontCatalog,n=new o.PlaneGeometry(t.textureSize.width/2.5,t.textureSize.height/2.5,t.textureSize.width/t.maxWidth,t.textureSize.height/t.maxHeight),i=new o.MeshBasicMaterial({transparent:!0,depthWrite:!1,depthTest:!1,map:t.texture});this.m_debugGlyphTextureCacheMesh=new o.Mesh(n,i),this.m_debugGlyphTextureCacheMesh.renderOrder=1e4,this.m_debugGlyphTextureCacheMesh.visible=!1,this.m_debugGlyphTextureCacheMesh.name="glyphDebug";const a=new o.WireframeGeometry(n),s=new o.LineBasicMaterial({transparent:!0,color:10066329,depthWrite:!1,depthTest:!1});this.m_debugGlyphTextureCacheWireMesh=new o.LineSegments(a,s),this.m_debugGlyphTextureCacheWireMesh.renderOrder=9999,this.m_debugGlyphTextureCacheWireMesh.visible=!1,this.m_debugGlyphTextureCacheWireMesh.name="glyphDebug",e.getLayer(r.DEFAULT_TEXT_CANVAS_LAYER).storage.scene.add(this.m_debugGlyphTextureCacheMesh,this.m_debugGlyphTextureCacheWireMesh)}updateTextElements(e){w&&w.clear(),this.m_textElementStateCache.clearTextCache(),this.m_cacheInvalidated=!1,this.checkIfOverloaded(e);const t=this.overloaded&&this.m_viewState.isDynamic?i.PerformanceTimer.now():void 0;e.forEach((e=>{this.updateTextElementsFromSource(e.dataSource,e.storageLevel,Array.from(e.renderedTiles.values()),t)})),w&&w.log()}updateTextElementsFromSource(e,t,n,r){w&&(w.tiles+=n.length);const o=n;o.sort(((e,t)=>e.tileKey.mortonCode()-t.tileKey.mortonCode()));const a=[];this.createSortedGroupsForSorting(e,t,o,a);let s=0;for(const l of a)if(this.selectTextElementsToUpdateByDistance(l),void 0!==r){if(i.PerformanceTimer.now()-r>5){b.debug("Update time limit exceeded.");break}if(s+=l.count(),s>=100){b.debug("Update label limit exceeded.");break}}}prepareTextElementGroup(e,t,n){if(0===e.elements.length)return;const[,r]=this.m_textElementStateCache.getOrSet(e,t,(e=>{let{result:t,viewDistance:r}=d.checkReadyForPlacement(e.element,e.element.type===y.TextElementType.LineMarker?e.lineMarkerIndex:void 0,this.m_viewState,this.m_poiManager,n);return t!==d.PrePlacementResult.Ok||this.m_textElementStateCache.deduplicateElement(this.m_viewState.zoomLevel,e)||(t=d.PrePlacementResult.Duplicate,r=void 0),w&&(w.totalLabels++,w.results[t]++),r}));w&&(++w.totalGroups,r||++w.newGroups)}createSortedGroupsForSorting(e,t,n,r){if(0===n.length)return;const i=[];for(const a of n)e.shouldRenderText(t,a.tileKey)&&i.push(a);const o=new Map;for(const a of i)for(const e of a.textElementGroups.groups.values()){if(0===e.elements.length)continue;const t=o.get(e.priority);void 0===t?o.set(e.priority,new D([new L(a,e)])):t.lists.push(new L(a,e))}if(0===o.size)return;for(const a of o){const e=a[1];r.push(e)}r.sort(((e,t)=>t.priority-e.priority))}selectTextElementsToUpdateByDistance(e){const t=Math.max(this.m_options.maxDistanceRatioForTextLabels,this.m_options.maxDistanceRatioForPoiLabels),n=d.getMaxViewDistance(this.m_viewState,t);for(const r of e.lists)this.prepareTextElementGroup(r.group,r.tile.tileKey,n)}placeTextElements(e,t){const n={numRenderedTextElements:0,fadeAnimationRunning:!1,time:e},r=this.overloaded&&this.m_viewState.isDynamic?i.PerformanceTimer.now():void 0;if(S&&S.clear(),0===this.m_textElementStateCache.size)return void b.debug("Text element cache empty.");const o=this.m_forceNewLabelsPass||t;this.m_forceNewLabelsPass&&(this.m_forceNewLabelsPass=!1);const a=this.m_options.maxNumVisibleLabels,s=this.m_textElementStateCache.sortedGroupStates;let l=s[0].priority,c=0;for(let i=0;i<s.length;++i){const e=s[i];S&&++S.totalGroups;const t=e.priority;if(o&&l!==t){if(this.placeNewTextElements(c,i,n),I(r))break;l=t,c=i}if(!this.placeTextElementGroup(e,n,a,x.PersistentLabels))break;if(I(r))break}o&&this.placeNewTextElements(c,s.length,n),S&&(S.numRenderedTextElements=n.numRenderedTextElements,S.log()),n.fadeAnimationRunning&&this.m_viewUpdateCallback()}placeNewTextElements(e,t,n){const r=this.m_textElementStateCache.sortedGroupStates;for(let i=e;i<t&&this.placeTextElementGroup(r[i],n,this.m_options.maxNumVisibleLabels,x.NewLabels);++i);}placeOverlayTextElements(){var e;if(void 0===this.m_overlayTextElements||0===this.m_overlayTextElements.length)return;const t=this.m_tmpVector.set(this.m_screenProjector.width,this.m_screenProjector.height),n=-t.width/2,i=t.height/2;for(const a of this.m_overlayTextElements){const s=this.m_textStyleCache.getTextElementStyle(a.style),l=s.textCanvas;if(void 0===l)continue;const c=!1;if(this.initializeGlyphs(a,s,c),a.loadingState!==f.LoadingState.Initialized)continue;const u=l.getLayer(null!==(e=a.renderOrder)&&void 0!==e?e:r.DEFAULT_TEXT_CANVAS_LAYER);if(void 0!==u&&u.storage.drawCount+a.glyphs.length>u.storage.capacity)continue;let h;if(l.textRenderStyle=a.renderStyle,l.textLayoutStyle=a.layoutStyle,a.type!==y.TextElementType.PathLabel)E.x=n+a.position.x*t.width,E.y=i-a.position.y*t.height,void 0!==a.xOffset&&(E.x+=a.xOffset),void 0!==a.yOffset&&(E.y-=a.yOffset),M.x=E.x,M.y=E.y,M.z=0,k(a,l,M);else{E.x=n,E.y=i,void 0!==a.xOffset&&(E.x+=a.xOffset),void 0!==a.yOffset&&(E.y-=a.yOffset);const e=[];for(const n of a.path){const r=E.x+n.x*t.width,i=E.y-n.y*t.height;e.push(new o.Vector2(r,i))}h=new p.SimplePath;for(let t=0;t<e.length-1;++t)h.add(new o.LineCurve(e[t],e[t+1]));k(a,l,M,h,!0)}}}getDistanceScalingFactor(e,t,n){let r=n/t;return r=1+(r-1)*e.distanceScale,r=Math.max(r,this.m_options.labelDistanceScaleMin),r=Math.min(r,this.m_options.labelDistanceScaleMax),r}getDistanceFadingFactor(e,t,n){let r=1;const i=t.viewDistance;if(void 0!==i&&void 0!==e.fadeFar&&e.fadeFar>0){const t=void 0===e.fadeNear?0:e.fadeNear,a=e.fadeFar;a>t&&(r=1-o.MathUtils.clamp((i/n-t)/(a-t),0,1))}return r}addPointLabel(e,t,n,r,o){var a;const s=e.element,l=e.textRenderState,c=s.type===y.TextElementType.LineMarker,u=e.iconRenderState;i.assert(void 0!==u),E.x=C.x=n.x,E.y=C.y=n.y;const h=d.pointToPlaneDistance(t,this.m_viewState.worldCenter,this.m_cameraLookAt);if(void 0!==s.fadeFar&&(s.fadeFar<=0||s.fadeFar*this.m_viewState.maxVisibilityDist<h))return S&&++S.tooFar,!1;e.setViewDistance(h);const p=s.poiInfo;let m=!1;const f=void 0!==p&&i.MathUtils.isClamped(this.m_viewState.zoomLevel,p.iconMinZoomLevel,p.iconMaxZoomLevel)&&!1!==p.isValid,g=this.getDistanceScalingFactor(s,h,this.m_viewState.lookAtDistance),v=f&&this.m_poiRenderer.prepareRender(s,this.m_viewState.env);let _=!1;if(v){const e=d.placeIcon(u,p,C,g,this.m_viewState.env,this.m_screenCollisions);_=e===d.PlacementResult.Invisible,m=e===d.PlacementResult.Rejected,_&&u.reset()}else f&&!1!==p.isValid&&(this.m_forceNewLabelsPass=!0,this.m_viewUpdateCallback());const x=this.getDistanceFadingFactor(s,e,this.m_viewState.maxVisibilityDist);if(r&&function(e,t,n){const r=e.textRenderState,o=e.element,a=o.poiInfo;if(i.assert(o.type!==y.TextElementType.PathLabel),!(void 0!==r&&""!==o.text))return!1;if(void 0!==a&&!i.MathUtils.isClamped(t.zoomLevel,a.textMinZoomLevel,a.textMaxZoomLevel))return!1;const s=d.getMaxViewDistance(t,n.maxDistanceRatioForPoiLabels);return!!(!0===o.ignoreDistance||void 0===e.viewDistance||e.viewDistance<s&&e.viewDistance>0)&&(!a||!0===a.isValid||!0===a.iconIsOptional)}(e,this.m_viewState,this.m_options)){const t=!e.visible,n=m&&t?d.PlacementResult.Rejected:d.placePointLabel(e,E,g,r,this.m_viewState.env,this.m_screenCollisions,M,!c),i=n===d.PlacementResult.Invisible;if(i){if(S&&S.numPoiTextsInvisible++,!f||_)return e.reset(),!1;l.reset()}const u=!0===(null===p||void 0===p?void 0:p.iconIsOptional),h=m&&v&&!u||n===d.PlacementResult.Rejected;if(!m&&!_){const e=!0===(null===(a=s.poiInfo)||void 0===a?void 0:a.textIsOptional);m=h&&!e}h&&l.startFadeOut(o.time);const y=!i&&(!h&&function(e,t){const n=e.element.poiInfo;return!t.cameraIsMoving||void 0===n||!0===n.renderTextDuringMovements}(e,this.m_viewState)||l.isFading());y&&(h||l.startFadeIn(o.time,this.m_options.disableFading),o.fadeAnimationRunning=o.fadeAnimationRunning||l.isFading(),function(e,t,n,r,i){const o=e.element,a=e.textRenderState.opacity*r*o.renderStyle.opacity;if(0===a)return!1;A.letterCaseArray=o.glyphCaseArray,void 0===o.textBufferObject&&(o.textBufferObject=t.createTextBufferObject(o.glyphs,A));const s=o.renderStyle.backgroundOpacity>0&&t.textRenderStyle.fontSize.backgroundSize>0;return O.layer=o.renderOrder,O.position=n,O.scale=i,O.opacity=a,O.backgroundOpacity=s?O.opacity*o.renderStyle.backgroundOpacity:0,O.pickingData=o.userData?o:void 0,t.addTextBufferObject(o.textBufferObject,O),!0}(e,r,M,x,g)&&S&&S.numRenderedPoiTexts++)}if(v&&!_){m?u.startFadeOut(o.time):u.startFadeIn(o.time,this.m_options.disableFading),o.fadeAnimationRunning=o.fadeAnimationRunning||u.isFading();const t=u.opacity*x;if(t>0){const n=!1!==p.reserveSpace&&!m;this.m_poiRenderer.addPoi(p,C,this.m_screenCollisions,e.renderDistance,g,n,t,this.m_viewState.env),S&&S.numRenderedPoiIcons++}}return o.numRenderedTextElements++,!0}addPoiLabel(e,t,n){const r=d.getWorldPosition(e.element,this.m_viewState.projection,this.m_viewState.env,this.m_tmpVector3);return!!this.labelPotentiallyVisible(r,E)&&this.addPointLabel(e,r,E,t,n)}addLineMarkerLabel(e,t,n,r){var o;const a=e.element,s=a.poiInfo;if(!(null===(o=this.m_poiRenderer)||void 0===o?void 0:o.prepareRender(a,this.m_viewState.env)))return;let l;void 0!==s.shieldGroupIndex&&(l=t[s.shieldGroupIndex],void 0===l&&(l=[],t[s.shieldGroupIndex]=l));const c=s.technique,u=void 0!==c.minDistance?c.minDistance*c.minDistance:0;if(u>0&&void 0!==l){let t=0;const o=e.position;if(this.labelPotentiallyVisible(o,E)){let a=!1;for(let e=0;e<l.length;e+=2){if(a=i.Math2D.distSquared(l[e],l[e+1],E.x,E.y)<u,a)break}a||this.addPointLabel(e,o,E,n,r)&&(l.push(E.x,E.y),t++)}0===t&&e.reset()}else{const t=e.position;this.labelPotentiallyVisible(t,E)&&this.addPointLabel(e,t,E,n,r)}}addPathLabel(e,t,n,r){const i=d.getMaxViewDistance(this.m_viewState,this.m_options.maxDistanceRatioForTextLabels),a=e.element;if(!(!0===a.ignoreDistance||void 0===e.viewDistance||e.viewDistance<i))return S&&++S.tooFar,e.textRenderState.reset(),!1;if(void 0!==a.fadeFar&&(a.fadeFar<=0||a.fadeFar*this.m_viewState.maxVisibilityDist<e.renderDistance))return S&&++S.tooFar,e.textRenderState.reset(),!1;let s=new o.Path;E.copy(t[0]);for(let o=0;o<t.length-1;++o)s.add(new p.SimpleLineCurve(t[o],t[o+1]));if(s.getPoint(.5).x-s.getPoint(.51).x>0){E.copy(t[t.length-1]),s=new o.Path;for(let e=t.length-1;e>0;--e)s.add(new p.SimpleLineCurve(t[e],t[e-1]))}e.setViewDistance(d.computeViewDistance(a,void 0,this.m_viewState.worldCenter,this.m_cameraLookAt));const l=-e.renderDistance,c=this.getDistanceScalingFactor(a,l,this.m_viewState.lookAtDistance),u=n.textRenderStyle.fontSize.size;if(n.textRenderStyle.fontSize.size*=c,d.placePathLabel(e,s,E,n,this.m_screenCollisions)!==d.PlacementResult.Ok)return n.textRenderStyle.fontSize.size=u,S&&++S.numNotVisible,e.textRenderState.reset(),!1;e.textRenderState.startFadeIn(r.time,this.m_options.disableFading);let h=a.renderStyle.opacity;if(e.textRenderState.isFading()&&(h*=e.textRenderState.opacity,r.fadeAnimationRunning=!0),0===e.textRenderState.opacity)return n.textRenderStyle.fontSize.size=u,!1;const m=n.textRenderStyle.opacity,f=n.textRenderStyle.backgroundOpacity,g=this.getDistanceFadingFactor(a,e,this.m_viewState.maxVisibilityDist);return n.textRenderStyle.opacity=h*g,n.textRenderStyle.backgroundOpacity=n.textRenderStyle.opacity*a.renderStyle.backgroundOpacity,M.z=e.renderDistance,k(a,n,M,s),r.numRenderedTextElements++,n.textRenderStyle.fontSize.size=u,n.textRenderStyle.opacity=m,n.textRenderStyle.backgroundOpacity=f,!0}checkIfOverloaded(e){let t=0;e.forEach((e=>{for(const n of e.renderedTiles.values())t+=n.textElementGroups.count()}));const n=t>2e4;return n&&!this.m_overloaded&&b.debug("Overloaded Mode enabled."),this.m_overloaded=n,this.m_overloaded}labelPotentiallyVisible(e,t){var n;const r=o.MathUtils.clamp(null!==(n=this.m_options.maxPoiDistanceToBorder)&&void 0!==n?n:0,0,1);return void 0!==this.m_screenProjector.projectAreaToScreen(e,r,r,t)}}},94814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeDefaultOptions=void 0;t.initializeDefaultOptions=function(e){void 0===e.minNumGlyphs&&(e.minNumGlyphs=1024),void 0===e.maxNumGlyphs&&(e.maxNumGlyphs=32768),void 0===e.labelDistanceScaleMin&&(e.labelDistanceScaleMin=.7),void 0===e.labelDistanceScaleMax&&(e.labelDistanceScaleMax=1.5),void 0===e.maxDistanceRatioForTextLabels&&(e.maxDistanceRatioForTextLabels=.99),void 0===e.maxDistanceRatioForPoiLabels&&(e.maxDistanceRatioForPoiLabels=.99),void 0===e.disableFading&&(e.disableFading=!1),void 0===e.delayLabelsUntilMovementFinished&&(e.delayLabelsUntilMovementFinished=!0),void 0===e.showReplacementGlyphs&&(e.showReplacementGlyphs=!1),void 0===e.maxPoiDistanceToBorder&&(e.maxPoiDistanceToBorder=.2)}},4509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextStyleCache=void 0;const r=n(26309),i=n(21690),o=n(15739),a=n(37119),s=n(47857),l=n(40449),c=o.LoggerManager.instance.create("TextStyleCache"),u=new i.TextRenderStyle({fontSize:{unit:i.FontUnit.Pixel,size:32,backgroundSize:8},color:a.ColorCache.instance.getColor("#6d7477"),opacity:1,backgroundColor:a.ColorCache.instance.getColor("#f7fbfd"),backgroundOpacity:.5}),h=new i.TextLayoutStyle({verticalAlignment:i.VerticalAlignment.Center,horizontalAlignment:i.HorizontalAlignment.Center,placements:[]}),d="default";function p(e,t,n){const o=n?function(e){const t=[];return(e?e.toUpperCase().replace(" ","").split(","):[]).forEach((e=>{const n=function(e){if(e.length<1||e.length>2)return;const t={h:i.HorizontalPlacement.Center,v:i.VerticalPlacement.Center};let n=e.charAt(0),o=!0;switch(n){case r.PlacementToken.Top:case r.PlacementToken.North:t.v=i.VerticalPlacement.Top;break;case r.PlacementToken.Bottom:case r.PlacementToken.South:t.v=i.VerticalPlacement.Bottom;break;default:if(o=!1,2===e.length)return}if(o&&1===e.length)return t;switch(n=1===e.length?e.charAt(0):e.charAt(1),n){case r.PlacementToken.Right:case r.PlacementToken.East:t.h=i.HorizontalPlacement.Right;break;case r.PlacementToken.Left:case r.PlacementToken.West:t.h=i.HorizontalPlacement.Left;break;default:return}return t}(e);void 0!==n&&t.push(n)})),t}(n):void 0;return i.resolvePlacementAndAlignment(function(e){return"Left"===e||"Center"===e||"Right"===e?i.HorizontalAlignment[e]:h.horizontalAlignment}(e),function(e){return"Above"===e||"Center"===e||"Below"===e?i.VerticalAlignment[e]:h.verticalAlignment}(t),o)}t.TextStyleCache=class{constructor(){this.m_textStyles=new Map,this.m_defaultStyle={name:d,fontCatalog:void 0,renderParams:u.params,layoutParams:h.params},this.updateDefaultTextStyle()}updateTextStyles(e,t){this.m_textStyles.clear(),null===e||void 0===e||e.forEach((e=>{this.m_textStyles.set(e.name,this.createTextElementStyle(e,e.name))})),this.updateDefaultTextStyle(t,e)}updateTextCanvases(e){this.initializeTextCanvas(this.m_defaultStyle,e);for(const[,t]of this.m_textStyles)this.initializeTextCanvas(t,e)}getTextElementStyle(e){let t;return void 0===e?t=this.m_defaultStyle:(t=this.m_textStyles.get(e),void 0===t&&(t=this.m_defaultStyle)),t}createRenderStyle(e,t){const n=e.mapView,l=n.zoomLevel,c=Math.floor(l),u=new r.MapEnv({$zoom:c},n.env),h=this.m_defaultStyle.renderParams,d=o.getOptionValue(h.opacity,1);let p,m=r.getPropertyValue(o.getOptionValue(t.opacity,d),u);if(void 0!==t.color){let e=s.evaluateColorProperty(t.color,u);if(void 0!==e){if(r.ColorUtils.hasAlphaInHex(e)){m*=r.ColorUtils.getAlphaFromHex(e),e=r.ColorUtils.removeAlphaFromHex(e)}p=a.ColorCache.instance.getColor(e)}}const f=o.getOptionValue(h.fontSize.backgroundSize,0),g=r.getPropertyValue(o.getOptionValue(t.backgroundSize,f),u),v=void 0!==t.backgroundColor&&void 0!==t.backgroundSize&&g>0,y=o.getOptionValue(h.backgroundOpacity,0);let _,x=r.getPropertyValue(o.getOptionValue(t.backgroundOpacity,v?1:y),u);if(void 0!==t.backgroundColor){let e=s.evaluateColorProperty(t.backgroundColor,u);if(void 0!==e){if(r.ColorUtils.hasAlphaInHex(e)){x*=r.ColorUtils.getAlphaFromHex(e),e=r.ColorUtils.removeAlphaFromHex(e)}_=a.ColorCache.instance.getColor(e)}}const b={fontName:o.getOptionValue(t.fontName,h.fontName),fontSize:{unit:i.FontUnit.Pixel,size:r.getPropertyValue(o.getOptionValue(t.size,h.fontSize.size),u),backgroundSize:g},fontStyle:"Regular"===t.fontStyle||"Bold"===t.fontStyle||"Italic"===t.fontStyle||"BoldItalic"===t.fontStyle?i.FontStyle[t.fontStyle]:h.fontStyle,fontVariant:"Regular"===t.fontVariant||"AllCaps"===t.fontVariant||"SmallCaps"===t.fontVariant?i.FontVariant[t.fontVariant]:h.fontVariant,rotation:o.getOptionValue(t.rotation,h.rotation),color:o.getOptionValue(p,o.getOptionValue(h.color,i.DefaultTextStyle.DEFAULT_COLOR)),backgroundColor:o.getOptionValue(_,o.getOptionValue(h.backgroundColor,i.DefaultTextStyle.DEFAULT_BACKGROUND_COLOR)),opacity:m,backgroundOpacity:x},w=this.getTextElementStyle(t.style).renderParams;return new i.TextRenderStyle(Object.assign(Object.assign({},w),b))}createLayoutStyle(e,t){var n,o,a,s,l,c;const u=e.mapView,h=Math.floor(e.mapView.zoomLevel),d=new r.MapEnv({$zoom:h},u.env),m=this.m_defaultStyle.layoutParams,f=r.getPropertyValue(t.hAlignment,d),g=r.getPropertyValue(t.vAlignment,d),v=r.isPoiTechnique(t)?r.getPropertyValue(t.placements,d):null,{horizontalAlignment:y,verticalAlignment:_,placements:x}=p(f,g,v),b=r.getPropertyValue(t.wrappingMode,d),w="None"===b||"Character"===b||"Word"===b?i.WrappingMode[b]:m.wrappingMode,S={tracking:null!==(n=r.getPropertyValue(t.tracking,d))&&void 0!==n?n:m.tracking,leading:null!==(o=r.getPropertyValue(t.leading,d))&&void 0!==o?o:m.leading,maxLines:null!==(a=r.getPropertyValue(t.maxLines,d))&&void 0!==a?a:m.maxLines,lineWidth:null!==(s=r.getPropertyValue(t.lineWidth,d))&&void 0!==s?s:m.lineWidth,canvasRotation:null!==(l=r.getPropertyValue(t.canvasRotation,d))&&void 0!==l?l:m.canvasRotation,lineRotation:null!==(c=r.getPropertyValue(t.lineRotation,d))&&void 0!==c?c:m.lineRotation,wrappingMode:w,horizontalAlignment:y,verticalAlignment:_,placements:x},M=this.getTextElementStyle(t.style);return new i.TextLayoutStyle(Object.assign(Object.assign({},M),S))}updateDefaultTextStyle(e,t){var n,r;this.m_defaultStyle.fontCatalog=void 0;const i=null!==(r=null!==(n=null===t||void 0===t?void 0:t.find((e=>e.name===d)))&&void 0!==n?n:e)&&void 0!==r?r:null===t||void 0===t?void 0:t[0];i&&(this.m_defaultStyle=this.createTextElementStyle(i,d)),this.m_defaultStyle.textCanvas=void 0}initializeTextCanvas(e,t){var n;if(!e.textCanvas){if(void 0!==e.fontCatalog){const n=t.get(e.fontCatalog);if(e.textCanvas=n,t.has(e.fontCatalog)&&!n)return void c.info(`fontCatalog(${e.fontCatalog}), not yet loaded`)}if(void 0===e.textCanvas){void 0!==e.fontCatalog&&e.fontCatalog!==l.DEFAULT_FONT_CATALOG_NAME&&c.warn(`FontCatalog '${e.fontCatalog}' set in TextStyle\n                     '${e.name}' not found`);let r=t.get(l.DEFAULT_FONT_CATALOG_NAME);if(!r&&t.size>0)for(const[,e]of t)if(e){r=e;break}r&&(e.textCanvas=r,void 0!==e.fontCatalog&&c.info(`fontCatalog: '${e.fontCatalog}' not found,\n                      using default fontCatalog(${null===(n=e.textCanvas)||void 0===n?void 0:n.name}).`))}}}createTextElementStyle(e,t){var n;const{horizontalAlignment:r,verticalAlignment:s,placements:l}=p(e.hAlignment,e.vAlignment,e.placements);return{name:t,fontCatalog:o.getOptionValue(e.fontCatalogName,this.m_defaultStyle.fontCatalog),renderParams:{fontName:e.fontName,fontSize:{unit:i.FontUnit.Pixel,size:32,backgroundSize:null!==(n=e.backgroundSize)&&void 0!==n?n:8},fontStyle:"Regular"===e.fontStyle||"Bold"===e.fontStyle||"Italic"===e.fontStyle||"BoldItalic"===e.fontStyle?i.FontStyle[e.fontStyle]:void 0,fontVariant:"Regular"===e.fontVariant||"AllCaps"===e.fontVariant||"SmallCaps"===e.fontVariant?i.FontVariant[e.fontVariant]:void 0,rotation:e.rotation,color:void 0!==e.color?a.ColorCache.instance.getColor(e.color):void 0,backgroundColor:void 0!==e.backgroundColor?a.ColorCache.instance.getColor(e.backgroundColor):void 0,opacity:e.opacity,backgroundOpacity:e.backgroundOpacity},layoutParams:{tracking:e.tracking,leading:e.leading,maxLines:e.maxLines,lineWidth:e.lineWidth,canvasRotation:e.canvasRotation,lineRotation:e.lineRotation,wrappingMode:"None"===e.wrappingMode||"Character"===e.wrappingMode||"Word"===e.wrappingMode?i.WrappingMode[e.wrappingMode]:i.WrappingMode.Word,verticalAlignment:s,horizontalAlignment:r,placements:l}}}}},30240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileTextStyleCache=void 0;t.TileTextStyleCache=class{constructor(e){this.textRenderStyles=[],this.textLayoutStyles=[],this.tile=e}clear(){this.textRenderStyles.length=0,this.textLayoutStyles.length=0}getRenderStyle(e){let t=this.textRenderStyles[e._index];return void 0===t&&(t=this.textRenderStyles[e._index]=this.tile.mapView.textElementsRenderer.styleCache.createRenderStyle(this.tile,e)),t}getLayoutStyle(e){let t=this.textLayoutStyles[e._index];return void 0===t&&(t=this.textLayoutStyles[e._index]=this.tile.mapView.textElementsRenderer.styleCache.createLayoutStyle(this.tile,e)),t}}},4520:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateStats=void 0;const r=n(30202);t.UpdateStats=class{constructor(e){this.m_logger=e,this.tiles=0,this.totalGroups=0,this.newGroups=0,this.totalLabels=0,this.results=new Array(r.PrePlacementResult.Count),this.results.fill(0)}clear(){this.tiles=0,this.totalGroups=0,this.newGroups=0,this.totalLabels=0,this.results.fill(0)}log(){this.m_logger.debug("Tiles",this.tiles),this.m_logger.debug("Total groups",this.totalGroups),this.m_logger.debug("New groups",this.newGroups),this.m_logger.debug("Total labels",this.totalLabels),this.m_logger.debug("Placed labels",this.results[r.PrePlacementResult.Ok]),this.m_logger.debug("Invisible",this.results[r.PrePlacementResult.Invisible]),this.m_logger.debug("Poi not ready",this.results[r.PrePlacementResult.NotReady]),this.m_logger.debug("Too far",this.results[r.PrePlacementResult.TooFar]),this.m_logger.debug("Duplicate",this.results[r.PrePlacementResult.Duplicate])}}},14194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWorkerBootstrapResponse=t.isWorkerBootstrapRequest=void 0,t.isWorkerBootstrapRequest=function(e){return e&&"worker-bootstrap-request"===e.type&&Array.isArray(e.dependencies)},t.isWorkerBootstrapResponse=function(e){return e&&"worker-bootstrap-response"===e.type&&Array.isArray(e.resolvedDependencies)}},53687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerLoader=void 0,n(89064);const r=n(15739),i=n(14194),o=r.LoggerManager.instance.create("WorkerLoader");class a{static startWorker(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return e.startsWith("blob:")?this.startWorkerImmediately(e,t):this.directlyFallbackToBlobBasedLoading?this.startWorkerBlob(e,t):this.startWorkerImmediately(e,t).catch((n=>{if("undefined"!==typeof window){const i=window.location.href,s=new URL(e,i).href;if(r.getUrlOrigin(s)===r.getUrlOrigin(i))throw n;return o.log("#startWorker: cross-origin worker construction failed, trying load with blob"),this.directlyFallbackToBlobBasedLoading=!0,a.startWorkerBlob(e,t)}throw n}))}static startWorkerImmediately(e,t){try{const n=new Worker(e);return this.waitWorkerInitialized(n,t)}catch(n){return Promise.reject(n)}}static startWorkerBlob(e,t){return this.fetchScriptSourceToBlobUrl(e).then((e=>this.startWorkerImmediately(e,t)))}static fetchScriptSourceToBlobUrl(e){let t=this.sourceLoaderCache.get(e);return void 0!==t||(t=fetch(e).then((e=>e.text())).catch((e=>{throw new Error(`WorkerLoader#fetchScriptSourceToBlob: failed to load worker script: ${e}`)})).then((t=>{this.sourceLoaderCache.delete(e);const n=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(n)})),this.sourceLoaderCache.set(e,t)),t}static waitWorkerInitialized(e,t){return new Promise(((n,r)=>{const o=t=>{const o=t.data;if(i.isWorkerBootstrapRequest(o)){const t=o.dependencies,n=[];for(const e of t){const t=this.dependencyUrlMapping[e];if(!t)return s(),void r(new Error(`#waitWorkerInitialized: Unable to resolve '${e}' as needed by worker script.`));n.push(t)}const i={type:"worker-bootstrap-response",resolvedDependencies:n};e.postMessage(i)}else s(),n(e),setTimeout((()=>{e.dispatchEvent(t)}),0)},a=e=>{s();let t="Error during worker initialization";e.message&&(t+=`: ${e.message}`),"string"===typeof e.filename&&"number"===typeof e.lineno&&(t+=` in ${e.filename}:${e.lineno}`),r(new Error(t))},s=()=>{clearTimeout(l),e.removeEventListener("message",o),e.removeEventListener("error",a)};e.addEventListener("error",a),e.addEventListener("message",o);const l=setTimeout((()=>{s(),r(new Error("Timeout exceeded when waiting for first message from worker."))}),t)}))}}t.WorkerLoader=a,a.directlyFallbackToBlobBasedLoading=!1,a.sourceLoaderCache=new Map,a.dependencyUrlMapping={}},85164:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(72686),t),i(n(35531),t),i(n(6798),t),i(n(82058),t),i(n(83982),t),i(n(62170),t),i(n(82067),t),i(n(76161),t),i(n(57506),t),i(n(32116),t),i(n(67129),t),i(n(14969),t),i(n(50470),t),i(n(84047),t),i(n(10657),t),i(n(59702),t),i(n(85070),t),i(n(3879),t)},72686:function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.CirclePointsMaterial=void 0;const i=n(534),o=n(50470),a=n(85070);class s extends o.RawShaderMaterial{constructor(e){const t=new i.Color;let n,o,l,c;if(e){const{size:a,color:u,opacity:h}=e,d=r(e,["size","color","opacity"]);n=a,o=u,l=h,d.name="CirclePointsMaterial",d.vertexShader="\nuniform float size;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec3 position;\n\nvoid main() {\n    vec3 transformed = vec3(position);\n    vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\n    gl_Position = projectionMatrix * mvPosition;\n    gl_PointSize = size;\n}\n",d.fragmentShader="\nprecision highp float;\nprecision highp int;\n\nuniform vec3 diffuse;\nuniform float opacity;\n\nvoid main() {\n    float alpha = opacity;\n\n    float radius = 0.5;\n    vec2 coords = gl_PointCoord.xy - vec2(0.5);\n    float len = length(coords);\n    float falloff = fwidth(len);\n    float threshold = 1.0 - smoothstep(radius - falloff, radius, len);\n    alpha *= threshold;\n\n    gl_FragColor = vec4(diffuse, alpha);\n}",d.uniforms=i.UniformsUtils.merge([{size:new i.Uniform(s.DEFAULT_CIRCLE_SIZE),diffuse:new i.Uniform(t),opacity:new i.Uniform(1)},i.UniformsLib.fog]),d.depthTest=!1,d.extensions=Object.assign(Object.assign({},d.extensions),{derivatives:!0}),c=d}super(c),a.enforceBlending(this),this.type="CirclePointsMaterial",this.setOpacity(1),void 0!==n&&(this.size=n),void 0!==o&&(this.color=o),void 0!==l&&this.setOpacity(l)}get size(){return this.uniforms.size.value}set size(e){this.uniforms.size.value=e}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value.copy(e)}}t.CirclePointsMaterial=s,s.DEFAULT_CIRCLE_SIZE=1},35531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyMaterial=t.CopyShader=void 0;const r=n(534);t.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform float opacity;\n    uniform sampler2D tDiffuse;\n    varying vec2 vUv;\n    void main() {\n        vec4 texel = texture2D( tDiffuse, vUv );\n        gl_FragColor = opacity * texel;\n    }"};class i extends r.ShaderMaterial{constructor(e){super({name:"CopyMaterial",uniforms:e,vertexShader:t.CopyShader.vertexShader,fragmentShader:t.CopyShader.fragmentShader,premultipliedAlpha:!0,transparent:!1,blending:r.NoBlending,depthTest:!1,depthWrite:!1})}}t.CopyMaterial=i},6798:(e,t)=>{"use strict";function n(e){return"displacementMap"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.setDisplacementMapToMaterial=t.hasDisplacementFeature=void 0,t.hasDisplacementFeature=n,t.setDisplacementMapToMaterial=function(e,t){n(t)&&t.displacementMap!==e&&(t.displacementMap=e,t.needsUpdate=!0,null!==t.displacementMap&&(t.displacementMap.needsUpdate=!0))}},82058:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeMaterial=void 0;const r=n(534),i=n(67129),o=n(32116),a=n(50470),s=n(85070);class l extends a.RawShaderMaterial{constructor(e){var t;let n;if(e){const a={},c=void 0!==e.extrusionRatio&&e.extrusionRatio>=o.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN&&e.extrusionRatio<o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX;e.displacementMap&&s.setShaderDefine(a,"USE_DISPLACEMENTMAP",!0),c&&s.setShaderDefine(a,"USE_EXTRUSION",!0),!0===e.vertexColors&&s.setShaderDefine(a,"USE_COLOR",!0),n={name:"EdgeMaterial",vertexShader:"\n#define EDGE_DEPTH_OFFSET 0.0001\n\n#ifdef USE_COLOR\nattribute vec4 color;\n#else\nuniform vec3 color;\n#endif\n\n// SHADER_NAME may be defined by THREE.JS own shaders in which case these attributes & uniforms are\n// already defined\n#ifndef SHADER_NAME\nattribute vec3 position;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\n#endif\n\nuniform vec3 edgeColor;\nuniform float edgeColorMix;\n\n#ifdef USE_DISPLACEMENTMAP\nattribute vec3 normal;\nattribute vec2 uv;\nuniform sampler2D displacementMap;\n#endif\n\nvarying vec3 vColor;\n\n#ifdef USE_EXTRUSION\n#include <extrusion_pars_vertex>\n#endif\n\n#ifdef USE_FADING\n#include <fading_pars_vertex>\n#endif\n\nvoid main() {\n\n    vColor = mix(edgeColor.rgb, color.rgb, edgeColorMix);\n\n    vec3 transformed = vec3( position );\n\n    #ifdef USE_EXTRUSION\n    #include <extrusion_vertex>\n    #endif\n\n    #ifdef USE_DISPLACEMENTMAP\n    transformed += normalize( normal ) * texture2D( displacementMap, uv ).x;\n    #endif\n\n    vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n    gl_Position = projectionMatrix * mvPosition;\n    // After projection gl_Position contains clip space coordinates of each vertex\n    // before perspective division (1 / w), thus only vertexes with -w < z < w should\n    // be displayed and offset. We offset only those edges which z coordinate in NDC\n    // space is between: -inf < z < 1\n    float depthOffset = step(-1.0, -gl_Position.z / gl_Position.w) * EDGE_DEPTH_OFFSET;\n    gl_Position.z -= depthOffset;\n\n    #ifdef USE_FADING\n    #include <fading_vertex>\n    #endif\n}",fragmentShader:"\nprecision highp float;\nprecision highp int;\n\nvarying vec3 vColor;\n\n#ifdef USE_EXTRUSION\n#include <extrusion_pars_fragment>\n#endif\n\n#ifdef USE_FADING\n#include <fading_pars_fragment>\n#endif\n\nvoid main() {\n    float alphaValue = 1.0;\n    gl_FragColor = vec4(vColor, alphaValue);\n\n    #ifdef USE_EXTRUSION\n    #include <extrusion_fragment>\n    #endif\n\n    #ifdef USE_FADING\n    #include <fading_fragment>\n    #endif\n}",uniforms:{color:new r.Uniform(new r.Color(l.DEFAULT_COLOR)),edgeColor:new r.Uniform(new r.Color(l.DEFAULT_COLOR)),edgeColorMix:new r.Uniform(l.DEFAULT_COLOR_MIX),fadeNear:new r.Uniform(i.FadingFeature.DEFAULT_FADE_NEAR),fadeFar:new r.Uniform(i.FadingFeature.DEFAULT_FADE_FAR),extrusionRatio:new r.Uniform(o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX),displacementMap:new r.Uniform(null!==(t=e.displacementMap)&&void 0!==t?t:new r.Texture)},depthWrite:!1,defines:a,rendererCapabilities:e.rendererCapabilities}}super(n),s.enforceBlending(this),i.FadingFeature.patchGlobalShaderChunks(),i.ExtrusionFeature.patchGlobalShaderChunks(),void 0!==e&&(void 0!==e.color&&this.color.set(e.color),void 0!==e.colorMix&&(this.colorMix=e.colorMix),void 0!==e.fadeNear&&(this.fadeNear=e.fadeNear),void 0!==e.fadeFar&&(this.fadeFar=e.fadeFar),void 0!==e.displacementMap&&(this.displacementMap=e.displacementMap),void 0!==e.extrusionRatio&&(this.extrusionRatio=e.extrusionRatio))}get objectColor(){return this.uniforms.color.value}set objectColor(e){this.uniforms.color.value.copy(e)}get color(){return this.uniforms.edgeColor.value}set color(e){this.uniforms.edgeColor.value.copy(e)}get lineWidth(){return this.linewidth}set lineWidth(e){this.linewidth=e,this.linewidth<=0?this.visible=!1:this.visible=!0}get colorMix(){return this.uniforms.edgeColorMix.value}set colorMix(e){this.uniforms.edgeColorMix.value!==e&&(this.uniforms.edgeColorMix.value=e)}get fadeNear(){return this.uniforms.fadeNear.value}set fadeNear(e){this.uniforms.fadeNear.value=e}get fadeFar(){return this.uniforms.fadeFar.value}set fadeFar(e){this.uniforms.fadeFar.value!==e&&(this.uniforms.fadeFar.value=e,s.setShaderMaterialDefine(this,"USE_FADING",e>0))}get extrusionRatio(){return this.uniforms.extrusionRatio.value}set extrusionRatio(e){if(this.uniforms.extrusionRatio.value===e)return;this.uniforms.extrusionRatio.value=e;const t=e>=o.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN;s.setShaderMaterialDefine(this,"USE_EXTRUSION",t)}get displacementMap(){return this.uniforms.displacementMap.value}set displacementMap(e){if(this.uniforms.displacementMap.value===e)return;this.uniforms.displacementMap.value=e;const t=null!==e;t&&(this.uniforms.displacementMap.value.needsUpdate=!0),s.setShaderMaterialDefine(this,"USE_DISPLACEMENTMAP",t)}}t.EdgeMaterial=l,l.DEFAULT_COLOR=0,l.DEFAULT_COLOR_MIX=0},83982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroundAtmosphereMaterial=t.GroundAtmosphereShader=void 0;const r=n(534),i=n(50470),o=n(7893),a=n(85070);t.GroundAtmosphereShader={uniforms:{u_eyePositionWorld:new r.Uniform(new r.Vector3),u_lightDirectionWorld:new r.Uniform(new r.Vector3(0,1,0)),u_modelViewProjection:new r.Uniform(new r.Matrix4),u_atmosphereEnv:new r.Uniform(new r.Vector3(6384515.136999999,6537590.425,0)),u_hsvCorrection:new r.Uniform(new r.Vector3(0,0,0)),topColor:new r.Uniform(new r.Color(30719)),bottomColor:new r.Uniform(new r.Color(16777215)),offset:new r.Uniform(33),exponent:new r.Uniform(.6),fogColor:new r.Uniform(new r.Color(30719)),fogNear:new r.Uniform(new r.Color(30719)),fogFar:new r.Uniform(new r.Color(16777215))},vertexShader:`\n\n    #define IMPROVE_INTERSECT_PRECISION 1\n    #define IMPROVE_DOT_PRECISION 1\n\n    precision highp float;\n    precision highp int;\n\n    attribute vec4 position;\n\n    // Base mandatory uniforms\n    uniform mat4 u_modelViewProjection;\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_hsvCorrection;\n\n    const float Pi = 3.141592653589793;\n    const float Kr = 0.0025;\n    const float Km = 0.0015;\n    const float Kr4PI = Kr * 4.0 * Pi;\n    const float Km4PI = Km * 4.0 * Pi;\n    const float ESun = 25.0; // should be 15.0\n    const float KmESun = Km * ESun;\n    const float KrESun = Kr * ESun;\n    const vec3 InvWavelength = vec3(\n        1.0 / pow(0.650, 4.0), // Red\n        1.0 / pow(0.570, 4.0), // Green\n        1.0 / pow(0.475, 4.0)); // Blue\n\n    const int nSamples = 2;\n    const float fSamples = 2.0;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n    varying vec3 v_vertToOrigin;\n\n    ${o.default.atmosphere_vertex_utils}\n\n    //\n    // Computes rayleight and mia atmosphere factors for ground.\n    //\n    // Code based on GPU Gems article.\n    //\n    // Author: Sean O'Neil\n    //\n    // Copyright (c) 2004 Sean O'Neil\n    //\n    // https://developer.nvidia.com/gpugems/gpugems2/part-ii-shading-lighting-and-shadows/chapter-16-accurate-atmospheric-scattering\n    //\n    // Further modifications by HERE.\n    //\n    AtmosphereColor computeGroundAtmosphere(vec3 v3Pos, vec3 vLightDir)\n    {\n        // Retrieve environment variables\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        // All that may be moved to const or define(s) at further optimizations:\n        float fScale = 1.0 / (fOuterRadius - fInnerRadius);\n        float fScaleOverScaleDepth = fScale / RayleighScaleDepth;\n        float fCameraHeight2 = fCameraHeight * fCameraHeight;\n        float fOuterRadius2 = fOuterRadius * fOuterRadius;\n\n        // Get the ray from the camera to the vertex and its length (which is the far point of the ray passing through the atmosphere)\n        vec3 v3Ray = v3Pos - u_eyePositionWorld;\n        float fFar = length(v3Ray);\n        v3Ray /= fFar;\n\n#if !defined(IMPROVE_DOT_PRECISION)\n        vec3 v3Dir = normalize(v3Pos);\n#endif\n\n#ifdef CAMERA_IN_SPACE\n\n        // Calculate first point of camera ray and sphere intersection.\n        float fNear = getNearSphereIntersect(u_eyePositionWorld, v3Ray, fCameraHeight2, fOuterRadius2);\n        // Make far relative to first atmosphere intersection, setting it to\n        // the length of ray passed through atmosphere\n        fFar -= fNear;\n\n        // Compute the ray's starting position within the atmosphere, then\n        // calculate its scattering offset\n        vec3 v3Start = u_eyePositionWorld + v3Ray * fNear;\n        float fDepth = exp((fInnerRadius - fOuterRadius) / RayleighScaleDepth);\n\n#else // CAMERA_IN_ATMOSPHERE\n\n        // The ray starts already in atmosphere\n        vec3 v3Start = u_eyePositionWorld;\n        // Virtually fNear is just at eye position, so ray passing through atmosphere does not shorten\n        // fFar -= 0.0;\n        float fDepth = exp((fInnerRadius - fCameraHeight) / RayleighScaleDepth);\n#endif\n\n#if defined(IMPROVE_DOT_PRECISION)\n        float fCameraAngle = dot(-v3Ray, v3Pos) / length(v3Pos);\n#else\n        float fCameraAngle = dot(-v3Ray, v3Dir);\n#endif\n        float fCameraScale = scale(fCameraAngle);\n\n#ifdef DYNAMIC_LIGHT\n        // When we want the atmosphere to be uniform over the globe so it is set to 1.0.\n        #if defined(IMPROVE_DOT_PRECISION)\n            // The light angle for given light source may be calculated as:\n            // angle = dot(vLightDir, v3Dir) / length(v3Dir);\n            // where v3Dir holds normalized vertex position, but for precision issues we v3Pos (un-normalized)\n            float fLightAngle = dot(vLightDir, v3Pos) / length(v3Pos);\n        #else\n            float fLightAngle = dot(vLightDir, v3Dir);\n        #endif\n#else\n        float fLightAngle = 1.0;\n#endif\n        float fLightScale = scale(fLightAngle);\n\n        float fCameraOffset = fDepth * fCameraScale;\n        float fTemp = (fLightScale + fCameraScale);\n\n        // Initialize the scattering loop variables\n        float fSampleLength = fFar / fSamples;\n        float fScaledLength = fSampleLength * fScale;\n        vec3 v3SampleRay = v3Ray * fSampleLength;\n        vec3 v3SamplePoint = v3Start + v3SampleRay * 0.5;\n\n        // Now loop through the sample rays\n        vec3 v3BaseColor = vec3(0.0);\n        vec3 v3Attenuate = vec3(0.0);\n        for(int i = 0; i < nSamples; i++)\n        {\n            float fHeight = length(v3SamplePoint);\n            float fDepth = exp(fScaleOverScaleDepth * (fInnerRadius - fHeight));\n            float fScatter = fDepth * fTemp - fCameraOffset;\n            // Compute color factors\n            v3Attenuate = exp(-fScatter * (InvWavelength * Kr4PI + Km4PI));\n            v3BaseColor += v3Attenuate * (fDepth * fScaledLength);\n            // Move to the next point\n            v3SamplePoint += v3SampleRay;\n        }\n\n        AtmosphereColor color;\n        color.mie = v3BaseColor * (InvWavelength * KrESun + KmESun);\n        // Calculate the attenuation factor for the ground\n        color.rayleigh = v3Attenuate;\n\n        return color;\n    }\n\n    void main(void)\n    {\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        AtmosphereColor atmColor = computeGroundAtmosphere(position.xyz, vLightDir);\n        v_mieColor = atmColor.mie;\n        v_rayleighColor = atmColor.rayleigh;\n        v_vertToCamera = u_eyePositionWorld - position.xyz;\n        v_vertToOrigin = normalize(position.xyz);\n\n        gl_Position = u_modelViewProjection * position;\n    }\n    `,fragmentShader:`\n\n    // Exposure correction gives more subtle gradients on the ground.\n    #define CORRECT_EXPOSURE 1\n    #define FADE_DEPTH 1\n    #define NIGHT_LOCAL 1\n\n    precision highp float;\n    precision highp int;\n\n    #ifdef CORRECT_COLOR\n    uniform vec3 u_hsvCorrection; // Hue, saturation, brightness\n    #endif\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    const float g = -0.95;\n    const float g2 = g * g;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n    varying vec3 v_vertToOrigin;\n\n    ${o.default.atmosphere_fragment_utils}\n\n    void main(void)\n    {\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        // GPU gems mix of ground solution, with custom alpha settings\n        vec3 cRgb = v_mieColor + 0.25 * v_rayleighColor;\n\n        // Not needed for HDR frame buffer\n    #if !defined(HDR_FRAME_BUFFER) && defined(CORRECT_EXPOSURE)\n        // Interesting results with exposure factor: 2.0, 3.5, 4.0\n        cRgb = correctExposure(cRgb, 3.0);\n    #endif\n\n    #ifdef CORRECT_COLOR\n        cRgb = correctColor(cRgb, u_hsvCorrection);\n    #endif\n\n        // Base atmosphere opacity\n        float fAtmosphereAlpha = 1.0;\n\n        // Factor based on the distance of camera atmosphere and ground, results are:\n        // 0.0 = camera on the ground surface,\n        // 1.0 = at the outer edge of the atmosphere.\n        float fDepthFactor = clamp((fCameraHeight - fInnerRadius) /\n            (fOuterRadius - fInnerRadius), 0.0, 1.0);\n    #ifdef FADE_DEPTH\n        // Fade alpha based on the distance of camera between atmosphere layers\n        #ifdef FADE_DEPTH_LINEAR\n            fAtmosphereAlpha *= fDepthFactor;\n        #else\n            fAtmosphereAlpha *= pow(fDepthFactor, 1.5);\n        #endif\n    #endif\n\n#if defined(FADE_NIGHT) || defined(DARKEN_NIGHT)\n    #ifdef DYNAMIC_LIGHT\n        // Adjust factor based on time of day, results are:\n        // 0.0 = night,\n        // 1.0 = day.\n        #ifdef NIGHT_GLOBAL\n            // Global night fade based on camera and light orientation\n            float fNightFactor = clamp(dot(normalize(u_eyePositionWorld), vLightDir), 0.0, 1.0);\n            fNightFactor = pow(fNightFactor, 0.5);\n        #else // NIGHT_LOCAL\n            float fNightFactor =\n                clamp(dot(v_vertToOrigin, vLightDir) / length(v_vertToOrigin), 0.0, 1.0);\n            fNightFactor = pow(fNightFactor, 0.8);\n        #endif\n    #else\n        float fNightFactor = 1.0;\n    #endif\n#endif\n\n    #ifdef FADE_NIGHT\n        // Adjust alpha for night side of the globe\n        fAtmosphereAlpha *= fNightFactor;\n    #endif\n\n    #ifdef DARKEN_NIGHT\n        // Change the brightness depending on night / day side.\n        // NOTE: Darkening should be rather applied in HSV space, without loss on saturation,\n        // but it is much more GPU consuming.\n        const float minBrightness = 0.5;\n        float fDarkenFactor = clamp(fNightFactor, minBrightness, 1.0);\n        cRgb *= fDarkenFactor;\n    #endif\n\n    #ifdef EXPOSURE_DEPTH\n        // Control exposure depending from ground distance\n        float exposureBoost = 3.0 - fDepthFactor;\n        cRgb = correctExposure(cRgb, exposureBoost);\n    #endif\n\n        // Experimental fading out of focus point - similar to fresnel effect in top view.\n        // This fade is handy to better expose cartographic/map features in screen center.\n        float fFocusFactor = 1.0 - clamp(dot(normalize(v_vertToCamera), v_vertToOrigin), 0.0, 1.0) + 0.1;\n        fFocusFactor = pow(fFocusFactor, 2.5);\n        fAtmosphereAlpha *= fFocusFactor;\n\n        // Integrate all features\n        gl_FragColor = vec4(cRgb, fAtmosphereAlpha);\n    }\n    `};class s extends i.RawShaderMaterial{constructor(e){let n;if(e){n={name:"GroundAtmosphereMaterial",vertexShader:t.GroundAtmosphereShader.vertexShader,fragmentShader:t.GroundAtmosphereShader.fragmentShader,uniforms:t.GroundAtmosphereShader.uniforms,transparent:!0,depthTest:!1,depthWrite:!1,side:r.FrontSide,blending:r.NormalBlending,fog:!1,rendererCapabilities:e.rendererCapabilities}}super(n)}setDynamicLighting(e){a.setShaderMaterialDefine(this,"DYNAMIC_LIGHT",e)}set outerRadius(e){this.uniforms.u_atmosphereEnv.value.y=e}get outerRadius(){return this.uniforms.u_atmosphereEnv.value.y}set innerRadius(e){this.uniforms.u_atmosphereEnv.value.x=e}get innerRadius(){return this.uniforms.u_atmosphereEnv.value.x}updateUniforms(e,t,n,r){const i=this.getCameraInfo(t,n);if(void 0===e||!e.isMaterial)throw Error("Wrong object used, only Material objects are supported");if(!(e.uniforms&&e.uniforms.u_atmosphereEnv&&e.uniforms.u_hsvCorrection&&e.uniforms.u_eyePositionWorld&&e.uniforms.u_modelViewProjection&&e.uniforms.u_lightDirectionWorld))throw Error("Atmosphere material has missing uniforms");{const t=i.eyePos,n=i.modelViewProjection,o=i.eyeHeight;e.uniforms.u_eyePositionWorld.value.copy(t),e.uniforms.u_modelViewProjection.value.copy(n),e.uniforms.u_atmosphereEnv.value.z=o,e.uniforms.u_lightDirectionWorld.value=r.clone();const s=o>this.outerRadius,l=a.setShaderDefine(e.defines,"CAMERA_IN_SPACE",s),c=a.setShaderDefine(e.defines,"CAMERA_IN_ATMOSPHERE",!s);e.needsUpdate=e.needsUpdate||l||c}}getCameraInfo(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const n=(new r.Matrix4).identity(),i=(new r.Matrix4).copy(e.matrixWorld).invert().transpose(),o=t.projectionMatrix,a=new r.Matrix4;a.multiplyMatrices(i,n),a.multiplyMatrices(o,a);const s=new r.Vector3;e.getWorldPosition(s);const l=new r.Vector3;t.getWorldPosition(l);return{modelViewProjection:a,eyePos:s,eyeHeight:l.distanceTo(s)}}{const n=e.matrixWorld,i=t.matrixWorldInverse,o=t.projectionMatrix,a=new r.Matrix4;a.multiplyMatrices(i,n),a.multiplyMatrices(o,a);const s=new r.Vector3;t.getWorldPosition(s);const l=new r.Vector3;e.getWorldPosition(l);const c=l.distanceTo(s);return s.sub(l),{modelViewProjection:a,eyePos:s,eyeHeight:c}}}}t.GroundAtmosphereMaterial=s},62170:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHighPrecisionLineMaterial=t.HighPrecisionLineMaterial=void 0;const r=n(534),i=n(50470),o=n(43937);class a extends i.RawShaderMaterial{constructor(e){Object.assign(r.ShaderChunk,o.default);const t=e?{name:"HighPrecisionLineMaterial",vertexShader:"\n#ifdef USE_COLOR\nattribute vec4 color;\nvarying vec3 vColor;\n#endif\n\n// uniforms to implement double-precision\nuniform mat4 u_mvp;             // combined modelView and projection matrix\nuniform vec3 u_eyepos;          // eye position major\nuniform vec3 u_eyepos_lowpart;  // eye position minor ((double) eyepos - (float) eyepos)\n\n// vertex attributes\nattribute vec3 position;        // high part\nattribute vec3 positionLow;     // low part\n\n#include <high_precision_vert_func>\n\nvoid main() {\n    #ifdef USE_COLOR\n    vColor = color.rgb;\n    #endif\n\n    vec3 pos = subtractDblEyePos(position);\n    gl_Position = u_mvp * vec4(pos, 1.0);\n}",fragmentShader:"\nprecision highp float;\nprecision highp int;\n\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifdef USE_COLOR\nvarying vec3 color;\n#endif\n\nvoid main() {\n    #ifdef USE_COLOR\n    gl_FragColor = vec4( diffuse * vColor, opacity );\n    #else\n    gl_FragColor = vec4( diffuse, opacity );\n    #endif\n}",uniforms:{diffuse:new r.Uniform(new r.Color(a.DEFAULT_COLOR)),opacity:new r.Uniform(a.DEFAULT_OPACITY),u_mvp:new r.Uniform(new r.Matrix4),u_eyepos:new r.Uniform(new r.Vector3),u_eyepos_lowpart:new r.Uniform(new r.Vector3)},rendererCapabilities:e.rendererCapabilities}:void 0;Object.assign(t,e),super(t),this.type="HighPrecisionLineMaterial",this.isHighPrecisionLineMaterial=!0,e&&(void 0!==e.color&&this.color.set(e.color),void 0!==e.opacity&&(this.opacity=e.opacity)),this.updateTransparencyFeature()}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value.copy(e)}updateTransparencyFeature(){this.transparent=this.opacity<1}}t.HighPrecisionLineMaterial=a,a.DEFAULT_COLOR=80,a.DEFAULT_OPACITY=1,t.isHighPrecisionLineMaterial=function(e){return void 0!==e&&!0===e.isHighPrecisionLineMaterial}},82067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHighPrecisionPointMaterial=t.HighPrecisionPointMaterial=void 0;const r=n(534),i=n(43937);class o extends r.PointsMaterial{constructor(e){Object.assign(r.ShaderChunk,i.default);super(e),this.type="HighPrecisionPointMaterial",this.vertexShader="\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n\nuniform float size;\n\n// uniforms to implement double-precision\nuniform mat4 u_mvp;             // combined modelView and projection matrix\nuniform vec3 u_eyepos;          // eye position major\nuniform vec3 u_eyepos_lowpart;  // eye position minor ((double) eyepos - (float) eyepos)\n\n// vertex attributes\nattribute vec3 positionLow;     // low part\n\n#include <high_precision_vert_func>\n\nvoid main() {\n    #ifdef USE_COLOR\n    vColor = color.rgb;\n    #endif\n\n    vec3 pos = subtractDblEyePos(position);\n    gl_Position = u_mvp * vec4(pos, 1.0);\n\n    // ignore sizeAttenuation for now!\n    gl_PointSize = size;\n}",this.fragmentShader=r.ShaderChunk.points_frag,this.fog=!1,this.uniforms={diffuse:new r.Uniform(new r.Color(o.DEFAULT_COLOR)),opacity:new r.Uniform(o.DEFAULT_OPACITY),size:new r.Uniform(o.DEFAULT_SIZE),scale:new r.Uniform(o.DEFAULT_SCALE),map:new r.Uniform(new r.Texture),uvTransform:new r.Uniform(new r.Matrix3),u_mvp:new r.Uniform(new r.Matrix4),u_eyepos:new r.Uniform(new r.Vector3),u_eyepos_lowpart:new r.Uniform(new r.Vector3)},this.isHighPrecisionPointMaterial=!0,void 0!==e&&(void 0!==e.color&&this.color.set(e.color),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.size&&(this.size=e.size),void 0!==e.scale&&(this.scale=e.scale),void 0!==e.uvTransform&&(this.uvTransform=e.uvTransform),void 0!==e.map&&(this.map=e.map))}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}get uvTransform(){return this.uniforms.uvTransform.value}set uvTransform(e){this.uniforms.uvTransform.value=e}}t.HighPrecisionPointMaterial=o,o.DEFAULT_COLOR=80,o.DEFAULT_OPACITY=1,o.DEFAULT_SIZE=1,o.DEFAULT_SCALE=1,t.isHighPrecisionPointMaterial=function(e){return void 0!==e&&!0===e.isHighPrecisionPointMaterial}},76161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconMaterial=void 0;const r=n(534),i=n(50470);class o extends i.RawShaderMaterial{constructor(e){super(e?{name:"IconMaterial",vertexShader:"\nattribute vec4 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec4 vColor;\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    vColor = color;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xyz, 1.0);\n}",fragmentShader:"\nprecision highp float;\nprecision highp int;\n\nuniform sampler2D map;\n\nvarying vec4 vColor;\nvarying vec2 vUv;\n\nvoid main() {\n\n    vec4 color = texture2D(map, vUv.xy);\n    color *= vColor;\n    if (color.a < 0.05) {\n        discard;\n    }\n    gl_FragColor = color;\n}",uniforms:{map:new r.Uniform(e.map)},depthTest:!1,depthWrite:!1,transparent:!0,vertexColors:!0,premultipliedAlpha:!0,rendererCapabilities:e.rendererCapabilities}:void 0)}get map(){return this.uniforms.map.value}}t.IconMaterial=o},57506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LuminosityHighPassShader=void 0;const r=n(534);t.LuminosityHighPassShader={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new r.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform vec3 defaultColor;\n    uniform float defaultOpacity;\n    uniform float luminosityThreshold;\n    uniform float smoothWidth;\n    varying vec2 vUv;\n    void main() {\n        vec4 texel = texture2D( tDiffuse, vUv );\n        vec3 luma = vec3( 0.299, 0.587, 0.114 );\n        float v = dot( texel.xyz, luma );\n        vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n        float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n        gl_FragColor = mix( outputColor, texel, alpha );\n    }"}},14969:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSAAMaterial=void 0;const r=n(534),i=n(35531);class o extends r.ShaderMaterial{constructor(e){super({uniforms:e,vertexShader:i.CopyShader.vertexShader,fragmentShader:i.CopyShader.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1})}}t.MSAAMaterial=o},67129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapMeshStandardMaterial=t.MapMeshDepthMaterial=t.MapMeshBasicMaterial=t.ExtrusionFeatureMixin=t.ExtrusionFeature=t.FadingFeatureMixin=t.FadingFeature=t.DisplacementFeatureMixin=t.hasExtrusionFeature=void 0;const r=n(15739),i=n(534),o=n(32116),a=n(99918),s=n(6599),l=n(35234),c=n(85070),u=new i.Texture;function h(e,t){return e*t.maximum}function d(e,t){void 0===t.defines&&(t.defines={}),e.shaderDefines=t.defines,void 0===e.shaderUniforms&&(e.shaderUniforms={})}function p(e,t){Object.assign(t.uniforms,e.shaderUniforms),e.shaderUniforms=t.uniforms}var m,f,g;t.hasExtrusionFeature=function(e){return"extrusionRatio"in e},function(e){function t(e){return null!==e.displacementMap}e.isEnabled=t,e.updateDisplacementFeature=function(e){r.assert(void 0!==e.shaderDefines),r.assert(void 0!==e.shaderUniforms);const n=t(e),i=c.setShaderDefine(e.shaderDefines,"USE_DISPLACEMENTMAP",n);if(e.needsUpdate=i,n){const t=e.displacementMap;t.needsUpdate=!0,e.shaderUniforms.displacementMap.value=t}else i&&(e.shaderUniforms.displacementMap.value=u)},e.onBeforeCompile=function(e,n){t(e)&&(r.assert(void 0!==e.shaderUniforms),p(e,n),n.vertexShader=n.vertexShader.replace("#include <skinbase_vertex>","#include <skinbase_vertex>\n#ifndef USE_ENVMAP\n    vec3 objectNormal = vec3( normal );\n#endif"),n.vertexShader=c.insertShaderInclude(n.vertexShader,"uv2_pars_vertex","displacementmap_pars_vertex"),n.vertexShader=c.insertShaderInclude(n.vertexShader,"skinning_vertex","displacementmap_vertex",!0))}}(m||(m={}));class v{constructor(){this.m_displacementMap=null}get displacementMap(){return this.m_displacementMap}set displacementMap(e){this.setDisplacementMap(e)}getDisplacementMap(){return this.m_displacementMap}setDisplacementMap(e){e!==this.m_displacementMap&&(this.m_displacementMap=e,m.updateDisplacementFeature(this))}addDisplacementProperties(){Object.defineProperty(this,"displacementMap",{get:()=>this.getDisplacementMap(),set:e=>{this.setDisplacementMap(e)}})}applyDisplacementParameters(e){d(this,this),r.assert(void 0!==this.shaderDefines),r.assert(void 0!==this.shaderUniforms);const t=this.shaderUniforms;t.displacementMap=new i.Uniform(u),t.displacementScale=new i.Uniform(1),t.displacementBias=new i.Uniform(0),void 0!==e&&void 0!==e.displacementMap&&this.setDisplacementMap(e.displacementMap),this.onBeforeCompile=r.chainCallbacks(this.onBeforeCompile,(e=>{m.onBeforeCompile(this,e)})),this.needsUpdate=m.isEnabled(this)}copyDisplacementParameters(e){return this.setDisplacementMap(e.displacementMap),this}}t.DisplacementFeatureMixin=v,function(e){function t(e){return void 0!==e.fadeNear&&void 0!==e.fadeFar&&e.fadeFar>0}e.DEFAULT_FADE_NEAR=-1,e.DEFAULT_FADE_FAR=-1,e.isEnabled=t,e.isDefined=function(e){return void 0!==e.fadeNear&&void 0!==e.fadeFar},e.patchGlobalShaderChunks=function(){void 0===i.ShaderChunk.fading_pars_vertex&&Object.assign(i.ShaderChunk,s.default)},e.updateFadingFeature=function(n){r.assert(void 0!==n.shaderDefines),r.assert(void 0!==n.shaderUniforms);const i=t(n),o=c.setShaderDefine(n.shaderDefines,"FADING_MATERIAL",i);n.needsUpdate=o,r.assert(void 0!==n.shaderUniforms.fadeNear&&void 0!==n.shaderUniforms.fadeFar),i?(n.shaderUniforms.fadeNear.value=n.fadeNear,n.shaderUniforms.fadeFar.value=n.fadeFar,o&&c.enableBlending(n)):o&&(n.shaderUniforms.fadeNear.value=e.DEFAULT_FADE_NEAR,n.shaderUniforms.fadeFar.value=e.DEFAULT_FADE_FAR,c.disableBlending(n))},e.onBeforeCompile=function(e,n){t(e)&&(r.assert(void 0!==e.shaderUniforms),p(e,n),n.vertexShader=c.insertShaderInclude(n.vertexShader,"fog_pars_vertex","fading_pars_vertex"),n.vertexShader=c.insertShaderInclude(n.vertexShader,"fog_vertex","fading_vertex",!0),n.fragmentShader=c.insertShaderInclude(n.fragmentShader,"fog_pars_fragment","fading_pars_fragment"),n.fragmentShader=c.insertShaderInclude(n.fragmentShader,"fog_fragment","fading_fragment",!0))},e.addRenderHelper=function(t,n,i,o,a,s){t.onBeforeRender=r.chainCallbacks(t.onBeforeRender,((t,r,a,l,c,u)=>{const d=c;d.fadeNear=void 0===i||i===e.DEFAULT_FADE_NEAR?e.DEFAULT_FADE_NEAR:h(i,n),d.fadeFar=void 0===o||o===e.DEFAULT_FADE_FAR?e.DEFAULT_FADE_FAR:h(o,n),void 0!==s&&s(t,c)}))}}(f=t.FadingFeature||(t.FadingFeature={}));class y{constructor(){this.m_fadeNear=f.DEFAULT_FADE_NEAR,this.m_fadeFar=f.DEFAULT_FADE_FAR}getFadeNear(){return this.m_fadeNear}setFadeNear(e){e!==this.m_fadeNear&&(this.m_fadeNear=e,f.updateFadingFeature(this))}getFadeFar(){return this.m_fadeFar}setFadeFar(e){e!==this.m_fadeFar&&(this.m_fadeFar=e,f.updateFadingFeature(this))}addFadingProperties(){Object.defineProperty(this,"fadeNear",{get:()=>this.getFadeNear(),set:e=>{this.setFadeNear(e)}}),Object.defineProperty(this,"fadeFar",{get:()=>this.getFadeFar(),set:e=>{this.setFadeFar(e)}})}applyFadingParameters(e){d(this,this),r.assert(void 0!==this.shaderDefines),r.assert(void 0!==this.shaderUniforms),this.shaderUniforms.fadeNear=new i.Uniform(f.DEFAULT_FADE_NEAR),this.shaderUniforms.fadeFar=new i.Uniform(f.DEFAULT_FADE_FAR),void 0!==e&&(void 0!==e.fadeNear&&this.setFadeNear(e.fadeNear),void 0!==e.fadeFar&&this.setFadeFar(e.fadeFar)),this.onBeforeCompile=r.chainCallbacks(this.onBeforeCompile,(e=>{f.onBeforeCompile(this,e)})),this.needsUpdate=f.isEnabled(this)}copyFadingParameters(e){return this.setFadeNear(void 0===e.fadeNear?f.DEFAULT_FADE_NEAR:e.fadeNear),this.setFadeFar(void 0===e.fadeFar?f.DEFAULT_FADE_FAR:e.fadeFar),this}}t.FadingFeatureMixin=y,function(e){function t(e){return void 0!==e.extrusionRatio&&e.extrusionRatio>=o.ExtrusionFeatureDefs.DEFAULT_RATIO_MIN}e.isEnabled=t,e.patchGlobalShaderChunks=function(){void 0===i.ShaderChunk.extrusion_pars_vertex&&Object.assign(i.ShaderChunk,a.default)},e.updateExtrusionFeature=function(e){r.assert(void 0!==e.shaderDefines),r.assert(void 0!==e.shaderUniforms);const n=t(e),i=c.setShaderDefine(e.shaderDefines,"EXTRUSION_MATERIAL",n);e.needsUpdate=i,n?e.shaderUniforms.extrusionRatio.value=e.extrusionRatio:i&&(e.shaderUniforms.extrusionRatio.value=o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX)},e.onBeforeCompile=function(e,n){t(e)&&(r.assert(void 0!==e.shaderUniforms),p(e,n),n.vertexShader=c.insertShaderInclude(n.vertexShader,"common","extrusion_pars_vertex"),n.vertexShader=c.insertShaderInclude(n.vertexShader,"begin_vertex","extrusion_vertex",!0),n.fragmentShader=c.insertShaderInclude(n.fragmentShader,"fog_pars_fragment","extrusion_pars_fragment"),n.fragmentShader=n.fragmentShader.replace("#include <normal_fragment_begin>","#include <extrusion_normal_fragment_begin>"),n.fragmentShader=c.insertShaderInclude(n.fragmentShader,"fog_fragment","extrusion_fragment",!0))}}(g=t.ExtrusionFeature||(t.ExtrusionFeature={}));class _{constructor(){this.m_extrusion=o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX}getExtrusionRatio(){return this.m_extrusion}setExtrusionRatio(e){e!==this.m_extrusion&&(this.m_extrusion=e,g.updateExtrusionFeature(this))}addExtrusionProperties(){Object.defineProperty(this,"extrusionRatio",{get:()=>this.getExtrusionRatio(),set:e=>{this.setExtrusionRatio(e)}})}applyExtrusionParameters(e){d(this,this),r.assert(void 0!==this.shaderDefines),r.assert(void 0!==this.shaderUniforms),e&&!0===e.zFightingWorkaround&&(this.shaderDefines.ZFIGHTING_WORKAROUND=""),this.shaderUniforms.extrusionRatio=new i.Uniform(o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX),void 0!==e&&void 0!==e.extrusionRatio&&this.setExtrusionRatio(e.extrusionRatio),this.onBeforeCompile=r.chainCallbacks(this.onBeforeCompile,(e=>{g.onBeforeCompile(this,e)})),this.needsUpdate=g.isEnabled(this)}copyExtrusionParameters(e){return void 0!==e.extrusionRatio&&this.setExtrusionRatio(e.extrusionRatio),this}}t.ExtrusionFeatureMixin=_;class x extends i.MeshBasicMaterial{constructor(e){super(e),f.patchGlobalShaderChunks(),this.addFadingProperties(),this.applyFadingParameters(e),g.patchGlobalShaderChunks(),this.addExtrusionProperties(),this.applyExtrusionParameters(Object.assign(Object.assign({},e),{zFightingWorkaround:!0})),this.addDisplacementProperties(),this.applyDisplacementParameters(e)}clone(){return(new x).copy(this)}copy(e){return super.copy(e),this.copyFadingParameters(e),this.copyExtrusionParameters(e),this.copyDisplacementParameters(e),this}get fadeNear(){return f.DEFAULT_FADE_NEAR}set fadeNear(e){}get fadeFar(){return f.DEFAULT_FADE_FAR}set fadeFar(e){}get extrusionRatio(){return o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX}set extrusionRatio(e){}get displacementMap(){return null}set displacementMap(e){}setDisplacementMap(e){}addFadingProperties(){}applyFadingParameters(e){}copyFadingParameters(e){}addExtrusionProperties(){}applyExtrusionParameters(e){}copyExtrusionParameters(e){}addDisplacementProperties(){}applyDisplacementParameters(e){}copyDisplacementParameters(e){}}t.MapMeshBasicMaterial=x;class b extends i.MeshDepthMaterial{constructor(e){super(e),g.patchGlobalShaderChunks(),this.addExtrusionProperties(),this.applyExtrusionParameters(Object.assign(Object.assign({},e),{zFightingWorkaround:!1}))}get extrusionRatio(){return o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX}set extrusionRatio(e){}addExtrusionProperties(){}applyExtrusionParameters(e){}copyExtrusionParameters(e){}}t.MapMeshDepthMaterial=b;class w extends i.MeshStandardMaterial{constructor(e){super(e),f.patchGlobalShaderChunks(),this.addFadingProperties(),this.applyFadingParameters(e),g.patchGlobalShaderChunks(),this.addExtrusionProperties(),this.applyExtrusionParameters(Object.assign(Object.assign({},e),{zFightingWorkaround:!0})),!0===(null===e||void 0===e?void 0:e.removeDiffuseLight)&&(this.onBeforeCompile=r.chainCallbacks(this.onBeforeCompile,(e=>{e.fragmentShader=i.ShaderChunk.meshphysical_frag.replace("#include <lights_physical_pars_fragment>",l.simpleLightingShadowChunk)})))}clone(){return(new w).copy(this)}copy(e){return super.copy(e),this.copyFadingParameters(e),this.copyExtrusionParameters(e),this}get fadeNear(){return f.DEFAULT_FADE_NEAR}set fadeNear(e){}get fadeFar(){return f.DEFAULT_FADE_FAR}set fadeFar(e){}get extrusionRatio(){return o.ExtrusionFeatureDefs.DEFAULT_RATIO_MAX}set extrusionRatio(e){}get removeDiffuseLight(){return!1}set removeDiffuseLight(e){}addFadingProperties(){}applyFadingParameters(e){}copyFadingParameters(e){}addExtrusionProperties(){}applyExtrusionParameters(e){}copyExtrusionParameters(e){}}t.MapMeshStandardMaterial=w,r.applyMixinsWithoutProperties(x,[y]),r.applyMixinsWithoutProperties(w,[y]),r.applyMixinsWithoutProperties(x,[_]),r.applyMixinsWithoutProperties(w,[_]),r.applyMixinsWithoutProperties(b,[_]),r.applyMixinsWithoutProperties(x,[v])},32116:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrusionFeatureDefs=void 0,function(e){e.DEFAULT_RATIO_MIN=0,e.DEFAULT_RATIO_MAX=1,e.MIN_BUILDING_HEIGHT=.1}(t.ExtrusionFeatureDefs||(t.ExtrusionFeatureDefs={}))},50470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawShaderMaterial=void 0;const r=n(15739),i=n(534),o=n(85070);class a extends i.RawShaderMaterial{constructor(e){const t=!0===(null===e||void 0===e?void 0:e.rendererCapabilities.isWebGL2),n=e?Object.assign(Object.assign({},e),{glslVersion:t?i.GLSL3:i.GLSL1,vertexShader:t&&e.vertexShader?r.convertVertexShaderToWebGL2(e.vertexShader):e.vertexShader,fragmentShader:t&&e.fragmentShader?r.convertFragmentShaderToWebGL2(e.fragmentShader):e.fragmentShader}):void 0;n&&delete n.rendererCapabilities,super(n),this.invalidateFog(),this.setOpacity(null===n||void 0===n?void 0:n.opacity)}invalidateFog(){void 0!==this.defines&&this.fog!==o.getShaderMaterialDefine(this,"USE_FOG")&&o.setShaderMaterialDefine(this,"USE_FOG",this.fog)}setOpacity(e){var t;void 0!==e&&(this.opacity=e,(null===(t=this.uniforms)||void 0===t?void 0:t.opacity)&&(this.uniforms.opacity.value=e))}}t.RawShaderMaterial=a},84047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SepiaShader=void 0,t.SepiaShader={uniforms:{tDiffuse:{value:null},amount:{value:1}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }",fragmentShader:"\n        uniform float amount;\n        uniform sampler2D tDiffuse;\n        varying vec2 vUv;\n        void main() {\n            vec4 color = texture2D( tDiffuse, vUv );\n            vec3 c = color.rgb;\n            color.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );\n            color.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );\n            color.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );\n            gl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );\n        }"}},7893:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={atmosphere_vertex_utils:"\n\n    const float RayleighScaleDepth = 0.25;\n\n    struct AtmosphereColor\n    {\n        vec3 mie;\n        vec3 rayleigh;\n    };\n\n    float scale(float cosAngle)\n    {\n        float x = 1.0 - cosAngle;\n        return RayleighScaleDepth  * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n    }\n\n    float getNearSphereIntersect(vec3 v3Pos, vec3 v3Ray, float fCameraHeight2, float fOuterRadius2) {\n        // Solve simple square equation for the x0 (first point of intersection).\n#if defined(IMPROVE_INTERSECT_PRECISION)\n        // To improve precision instead of simple projection: b = 2.0 * dot(vPos, v3Ray),\n        // we change the equation that gives better results especially around the poles.\n        float fB = 2.0 * length(v3Pos) * dot(normalize(v3Pos), v3Ray);\n#else\n        float fB = 2.0 * dot(v3Pos, v3Ray);\n#endif\n        float fC = fCameraHeight2 - fOuterRadius2;\n        // det = b^2 - 4*a*c, where a = 1\n        float fDet = max(0.0, fB * fB - 4.0 * fC);\n        // Intersection points distances are defined as follows:\n        // x0 = (-b - sqrt(det)) / 2*a ^ x1 = (-b + sqrt(det)) / 2*a\n        // we search for x0:\n        return 0.5 * (-fB - sqrt(fDet));\n    }\n\n    float getFarSphereIntersect(vec3 v3Pos, vec3 v3Ray, float fCameraHeight2, float fOuterRadius2) {\n        // Solve simple square equation for the x1 (second point of intersection).\n#if defined(IMPROVE_INTERSECT_PRECISION)\n        float fB = 2.0 * length(v3Pos) * dot(normalize(v3Pos), v3Ray);\n#else\n        float fB = 2.0 * dot(v3Pos, v3Ray);\n#endif\n        float fC = fCameraHeight2 - fOuterRadius2;\n        // det = b^2 - 4*a*c, where a = 1\n        float fDet = max(0.0, fB * fB - 4.0 * fC);\n        // Compute second intersection distance:\n        // x1 = (-b + sqrt(det)) / 2*a\n        return 0.5 * (-fB + sqrt(fDet));\n    }\n    ",atmosphere_fragment_utils:"\n\n    // Branch free RGB to HSV conversion.\n    // Based on article:\n    // http://lolengine.net/blog/2013/01/13/fast-rgb-to-hsv\n    // and optimized OpenGL SL algorithm\n    // http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\n    vec3 rgb2Hsv(vec3 c)\n    {\n        const vec4 RGB_HSV_CONV = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n        // Ternary operator may be used explicitly if compiler can use fast conditional move.\n        // vec4 p = c.g < c.b ? vec4(c.bg, RGB_HSV_CONV.wz) : vec4(c.gb, RGB_HSV_CONV.xy);\n        vec4 p = mix(vec4(c.bg, RGB_HSV_CONV.wz), vec4(c.gb, RGB_HSV_CONV.xy), step(c.b, c.g));\n        // vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n        vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n        float d = q.x - min(q.w, q.y);\n        float e = 1.0e-10;\n        return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n    }\n\n    // Branch free HSV to RGB conversion\n    vec3 hsv2Rgb(vec3 c)\n    {\n        const vec4 HSV_RGB_CONV = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + HSV_RGB_CONV.xyz) * 6.0 - HSV_RGB_CONV.www);\n        return c.z * mix(HSV_RGB_CONV.xxx, clamp(p - HSV_RGB_CONV.xxx, 0.0, 1.0), c.y);\n    }\n\n    vec3 correctExposure(vec3 rgb, float exposure)\n    {\n        const vec3 fullColor = vec3(1.0);\n        return fullColor - exp(-exposure * rgb);\n    }\n\n    vec3 correctColor(vec3 rgb, vec3 hsvShift)\n    {\n        const float e = 0.0000001;\n        // Convert rgb color to hsv\n        vec3 hsv = rgb2Hsv(rgb);\n        // Shift hue value with angle wrapping\n        hsv.x = mod(hsv.x + hsvShift.x, 1.0);\n        // Shift and clamp saturation\n        hsv.y = clamp(hsv.y + hsvShift.y, 0.0, 1.0);\n        // Change value if it is significant (greater then epsilon)\n        hsv.z = hsv.z > e ? clamp(hsv.z + hsvShift.z, 0.0, 1.0) : 0.0;\n        // Convert shifted hsv back to rgb\n        return hsv2Rgb(hsv);\n    }\n    "}},99918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32116),i=r.ExtrusionFeatureDefs.MIN_BUILDING_HEIGHT*r.ExtrusionFeatureDefs.MIN_BUILDING_HEIGHT;t.default={extrusion_pars_vertex:"\n// Add define so we can check for it in the outline effect (see Outline.ts).\n#define HAS_EXTRUSION_PARS_VERTEX\n// Extrusion axis (xyz: vector, w: factor).\nattribute vec4 extrusionAxis;\nuniform float extrusionRatio;\n#ifdef FLAT_SHADED\nvarying vec4 vExtrusionAxis;\n#endif\n#ifdef ZFIGHTING_WORKAROUND\nvarying float vExtrusionRatio;\n#endif\n",extrusion_vertex:`\n#define HAS_EXTRUSION_VERTEX\n#ifdef ZFIGHTING_WORKAROUND\n// Cancel extrusionRatio (meaning, force to 1) if extrusionAxisLen < MIN_BUILDING_HEIGHT.\nconst float MIN_BUILDING_HEIGHT_SQUARED = ${i};\nfloat extrusionAxisLenSquared = dot(extrusionAxis.xyz, extrusionAxis.xyz);\nvExtrusionRatio = (extrusionAxisLenSquared < MIN_BUILDING_HEIGHT_SQUARED) ? 1.0 : extrusionRatio;\n#else\nfloat vExtrusionRatio = extrusionRatio;\n#endif\ntransformed = transformed + extrusionAxis.xyz * (vExtrusionRatio - 1.0);\n#ifdef FLAT_SHADED\nvExtrusionAxis = vec4(normalMatrix * extrusionAxis.xyz, extrusionAxis.w);\n#endif\n`,extrusion_normal_fragment_begin:"\n#ifdef FLAT_SHADED\n    // Flattened this divergent path to prevent undefined behaviour in the following derivatives\n    // functions. For more info:\n    // http://www.aclockworkberry.com/shader-derivative-functions/#Derivatives_and_branches\n\n    // Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n    vec3 fdx = vec3(dFdx(vViewPosition.x), dFdx(vViewPosition.y), dFdx(vViewPosition.z));\n    vec3 fdy = vec3(dFdy(vViewPosition.x), dFdy(vViewPosition.y), dFdy(vViewPosition.z));\n    vec3 normal = cross( fdx, fdy );\n    if (vExtrusionAxis.w > 0.999999) {\n        normal = vExtrusionAxis.xyz;\n    }\n    normal = normalize(normal);\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t\t\tbitangent = bitangent * (float(gl_FrontFacing) * 2.0 - 1.0);\n\t\t#endif\n\t#endif\n#endif\n// non perturbed normal for clearcoat among others\nvec3 geometryNormal = normal;\n",extrusion_pars_fragment:"\n#ifdef ZFIGHTING_WORKAROUND\nvarying float vExtrusionRatio;\n#else\nuniform float extrusionRatio;\n#endif\nvarying vec4 vExtrusionAxis;\n",extrusion_fragment:"\n#ifndef ZFIGHTING_WORKAROUND\nfloat vExtrusionRatio = extrusionRatio;\n#endif\ngl_FragColor.a *= smoothstep( 0.0, 0.25, vExtrusionRatio );\n"}},6599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fading_pars_vertex:"\nvarying float fadingDepth;\n",fading_vertex:"\nfadingDepth = -mvPosition.z;\n",fading_pars_fragment:"\nvarying float fadingDepth;\nuniform float fadeNear;\nuniform float fadeFar;\n",fading_fragment:'\n\n// lerp with "hard" edges\n//float fadingFactor = 1.0 - clamp((fadingDepth - fadeNear) / (fadeFar - fadeNear), 0.0, 1.0);\n\n// smooth transitions\nfloat fadingFactor = smoothstep( fadeNear, fadeFar, fadingDepth );\n\ngl_FragColor.a *= 1.0 - fadingFactor;\n\n// debugging color:\n// gl_FragColor = vec4(1., fadingFactor, fadingFactor, 1.0);\n'}},43937:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LineCapsModes=void 0,function(e){e[e.CAPS_NONE=0]="CAPS_NONE",e[e.CAPS_SQUARE=1]="CAPS_SQUARE",e[e.CAPS_ROUND=2]="CAPS_ROUND",e[e.CAPS_TRIANGLE_IN=3]="CAPS_TRIANGLE_IN",e[e.CAPS_TRIANGLE_OUT=4]="CAPS_TRIANGLE_OUT"}(n=t.LineCapsModes||(t.LineCapsModes={})),t.default={extrude_line_vert_func:"\nvec3 extrudeLine(\n        in vec3 vertexPosition,\n        in float linePosition,\n        in float extrusionWidth,\n        in vec4 bitangent,\n        in vec3 tangent,\n        in float tanHalfAngle,\n        inout vec2 uv\n    ) {\n    vec3 result = vertexPosition;\n    // Retrieve the angle between this segment and the previous one (stored in the bitangent w\n    // component).\n    float angle = bitangent.w;\n    // Extrude according to the angle between segments to properly render narrow joints...\n    if (angle != 0.0) {\n        result += uv.y * extrusionWidth * bitangent.xyz / cos(angle / 2.0);\n        uv.x = linePosition + uv.x * extrusionWidth * uv.y * tanHalfAngle;\n    }\n    // ... or extrude in a simple manner for segments that keep the same direction.\n    else {\n        result += uv.y * extrusionWidth * bitangent.xyz + uv.x * extrusionWidth * tangent;\n        uv.x = linePosition + uv.x * extrusionWidth;\n    }\n    uv.y *= extrusionWidth;\n    return result;\n}\n",round_edges_and_add_caps:`\n#define CAPS_NONE ${n.CAPS_NONE}\n#define CAPS_SQUARE ${n.CAPS_SQUARE}\n#define CAPS_ROUND ${n.CAPS_ROUND}\n#define CAPS_TRIANGLE_IN ${n.CAPS_TRIANGLE_IN}\n#define CAPS_TRIANGLE_OUT ${n.CAPS_TRIANGLE_OUT}\n\nfloat roundEdgesAndAddCaps(in vec4 coords, in vec3 range) {\n    // Compute the line's width to length ratio.\n    float widthRatio = range.y / range.x;\n\n    // Compute the inner segment distance (same for all cap mode).\n    float dist = abs(coords.y);\n    float segmentBeginMask = clamp(ceil(coords.z - coords.x), 0.0, 1.0);\n    float segmentEndMask = clamp(ceil(coords.x - coords.w), 0.0, 1.0);\n    dist = max(dist, segmentBeginMask * length(vec2((coords.x - coords.z) / widthRatio, coords.y)));\n    dist = max(dist, segmentEndMask * length(vec2((coords.x - coords.w) / widthRatio, coords.y)));\n\n    #if CAPS_MODE != CAPS_ROUND\n    // Compute the caps mask.\n    float capRangeMask = clamp(1.0 - ceil(range.z - drawRange.y), 0.0, 1.0);\n    float beginCapMask = clamp(ceil(drawRange.x - coords.x), 0.0, 1.0);\n    float endCapMask = clamp(ceil(coords.x - drawRange.y), 0.0, 1.0);\n    float capMask = capRangeMask * max(beginCapMask, endCapMask);\n\n    // Compute the outer segment distance (specific for each cap mode).\n    float capDist = max(coords.x - drawRange.y, drawRange.x - coords.x) / widthRatio;\n    #if CAPS_MODE == CAPS_NONE\n    dist = mix(dist, max(abs(coords.y), (capDist + 0.1) / 0.1), capMask);\n    #elif CAPS_MODE == CAPS_SQUARE\n    dist = mix(dist, max(abs(coords.y), capDist), capMask);\n    #elif CAPS_MODE == CAPS_TRIANGLE_OUT\n    dist = mix(dist, abs(coords.y) + capDist, capMask);\n    #elif CAPS_MODE == CAPS_TRIANGLE_IN\n    dist = mix(dist, max(abs(coords.y), (capDist - abs(coords.y)) + capDist), capMask);\n    #endif\n    #endif // CAPS_MODE != CAPS_ROUND\n\n    return dist;\n}\n`,tile_clip_func:"\nvoid tileClip(vec2 tilePos, vec2 tileSize) {\n    if (tileSize.x > 0.0 && (tilePos.x < -tileSize.x / 2.0 || tilePos.x > tileSize.x / 2.0))\n        discard;\n    if (tileSize.y > 0.0 && (tilePos.y < -tileSize.y / 2.0 || tilePos.y > tileSize.y / 2.0))\n        discard;\n}\n",high_precision_vert_func:"\nvec3 subtractDblEyePos( const in vec3 pos ) {\n    vec3 t1 = positionLow - u_eyepos_lowpart;\n    vec3 e = t1 - positionLow;\n    vec3 t2 = ((-u_eyepos_lowpart - e) + (positionLow - (t1 - e))) + pos - u_eyepos;\n    vec3 high_delta = t1 + t2;\n    vec3 low_delta = t2 - (high_delta - t1);\n    return (high_delta + low_delta);\n}\n"}},35234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleLightingShadowChunk=void 0,t.simpleLightingShadowChunk="\n    struct PhysicalMaterial {\n        vec3\tdiffuseColor;\n        float\tspecularRoughness;\n        vec3\tspecularColor;\n    };\n\n    #define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n    void RE_Direct_Physical( const in IncidentLight directLight,\n        const in GeometricContext geometry,\n        const in PhysicalMaterial material,\n        inout ReflectedLight reflectedLight ) {\n        // directLight.color is the light color * shadow, internally three.js uses a step function, so\n        // this value is either the light color or black. in order to lighten up the shadows, we\n        // take add 50% of the color to grey (to give us either pure white or grey) and multiply this to\n        // the material's diffuse color.\n        #if defined(USE_SHADOWMAP)\n            reflectedLight.directDiffuse = (0.5 * directLight.color +\n                vec3(0.5,0.5,0.5)) * material.diffuseColor;\n        #else\n            reflectedLight.directDiffuse = material.diffuseColor;\n        #endif\n    }\n\n    void RE_IndirectDiffuse_Physical( const in vec3 irradiance,\n        const in GeometricContext geometry,\n        const in PhysicalMaterial material,\n        inout ReflectedLight reflectedLight ) {\n            // Disable influence of indirect light (it is handled in the RE_Direct_Physical function)\n    }\n\n    void RE_IndirectSpecular_Physical( const in vec3 radiance,\n        const in vec3 irradiance,\n        const in vec3 clearcoatRadiance,\n        const in GeometricContext geometry,\n        const in PhysicalMaterial material,\n        inout ReflectedLight reflectedLight) {\n            // Disable specular reflection of light.\n    }\n\n    #define RE_Direct               RE_Direct_Physical\n    #define RE_IndirectDiffuse      RE_IndirectDiffuse_Physical\n    #define RE_IndirectSpecular     RE_IndirectSpecular_Physical\n"},10657:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkyAtmosphereMaterial=t.SkyAtmosphereShader=void 0;const r=n(534),i=n(50470),o=n(7893),a=n(85070),s=6378137;t.SkyAtmosphereShader={uniforms:{u_eyePositionWorld:new r.Uniform(new r.Vector3),u_lightDirectionWorld:new r.Uniform(new r.Vector3(0,1,0)),u_modelViewProjection:new r.Uniform(new r.Matrix4),u_atmosphereEnv:new r.Uniform(new r.Vector3(s,6537590.425,0)),u_hsvCorrection:new r.Uniform(new r.Vector3(0,0,0)),topColor:new r.Uniform(new r.Color(30719)),bottomColor:new r.Uniform(new r.Color(16777215)),offset:new r.Uniform(33),exponent:new r.Uniform(.6),fogColor:new r.Uniform(new r.Color(30719)),fogNear:new r.Uniform(new r.Color(30719)),fogFar:new r.Uniform(new r.Color(16777215))},vertexShader:`\n    precision highp float;\n    precision highp int;\n\n    attribute vec4 position;\n\n    uniform mat4 u_modelViewProjection;\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_hsvCorrection;\n\n    const float Pi = 3.141592653589793;\n    const float Kr = 0.0025;\n    const float Kr4PI = Kr * 4.0 * Pi;\n    const float Km = 0.0015;\n    const float Km4PI = Km * 4.0 * Pi;\n    const float ESun = 15.0; // should be 15.0\n    const float KmESun = Km * ESun;\n    const float KrESun = Kr * ESun;\n    const vec3 InvWavelength = vec3(\n        5.60204474633241,  // Red = 1.0 / Math.pow(0.650, 4.0)\n        9.473284437923038, // Green = 1.0 / Math.pow(0.570, 4.0)\n        19.643802610477206); // Blue = 1.0 / Math.pow(0.475, 4.0)\n\n    const int nSamples = 2;\n    const float fSamples = 2.0;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n\n    ${o.default.atmosphere_vertex_utils}\n\n    //\n    // Computes rayleight and mia atmosphere factors for sky.\n    //\n    // Code based on GPU Gems article.\n    //\n    // Author: Sean O'Neil\n    //\n    // Copyright (c) 2004 Sean O'Neil\n    //\n    // https://developer.nvidia.com/gpugems/gpugems2/part-ii-shading-lighting-and-shadows/chapter-16-accurate-atmospheric-scattering\n    //\n    // Further modifications by HERE\n    //\n    AtmosphereColor computeSkyAtmosphere(vec3 v3Pos, vec3 vLightDir)\n    {\n        // Unpack attributes\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        // All that may be const or define(s) at further optimization:\n        float fScale = 1.0 / (fOuterRadius - fInnerRadius);\n        float fScaleOverScaleDepth = (fScale / RayleighScaleDepth);\n        float fCameraHeight2 = fCameraHeight * fCameraHeight;\n        float fOuterRadius2 = fOuterRadius * fOuterRadius;\n\n        // Get the ray from the camera to the vertex and its length (which is the far point of the ray passing through the atmosphere)\n        vec3 v3Ray = v3Pos - u_eyePositionWorld;\n        float fFar = length(v3Ray);\n        v3Ray /= fFar;\n\n    #ifdef CAMERA_IN_SPACE\n\n        // Calculate the closest intersection of the ray with the outer\n        // atmosphere, this is the first point of the ray passing through the atmosphere dome.\n        float fNear = getNearSphereIntersect(u_eyePositionWorld, v3Ray, fCameraHeight2, fOuterRadius2);\n        // Make far relative to first atmosphere intersection\n        fFar -= fNear;\n\n        // Compute the ray's starting position within the atmosphere, then\n        // calculate its scattering offset\n        vec3 v3Start = u_eyePositionWorld + v3Ray * fNear;\n\n        float fStartAngle = dot(v3Ray, v3Start) / fOuterRadius;\n        float fStartDepth = exp(-1.0 / RayleighScaleDepth );\n        float fStartOffset = fStartDepth * scale(fStartAngle);\n\n    #else // CAMERA_IN_ATMOSPHERE\n\n        // The ray starts already in atmosphere\n        vec3 v3Start = u_eyePositionWorld;\n        float height = length(v3Start);\n        float depth = exp(fScaleOverScaleDepth * (fInnerRadius - fCameraHeight));\n        float fStartAngle = dot(v3Ray, v3Start) / height;\n        float fStartOffset = depth * scale(fStartAngle);\n\n    #endif\n\n        // Initialize the scattering loop variables\n        float fSampleLength = fFar / fSamples;\n        float fScaledLength = fSampleLength * fScale;\n        vec3 v3SampleRay = v3Ray * fSampleLength;\n        vec3 v3SamplePoint = v3Start + v3SampleRay * 0.5;\n\n        // Now loop through the sample rays\n        vec3 v3BaseColor = vec3(0.0);\n        vec3 v3Attenuate = vec3(0.0);\n        for(int i=0; i < nSamples; i++)\n        {\n            float height = length(v3SamplePoint);\n            float depth = exp(fScaleOverScaleDepth * (fInnerRadius - height));\n            float fLightAngle = dot(vLightDir, v3SamplePoint) / height;\n            float fCameraAngle = dot(v3Ray, v3SamplePoint) / height;\n            float fScatter = (fStartOffset + depth * (scale(fLightAngle) - scale(fCameraAngle)));\n            v3Attenuate = exp(-fScatter * (InvWavelength * Kr4PI + Km4PI));\n            v3BaseColor += v3Attenuate * (depth * fScaledLength);\n            v3SamplePoint += v3SampleRay;\n        }\n\n        // Scale the Mie and Rayleigh colors and set up output of the function\n        AtmosphereColor color;\n        color.mie = v3BaseColor * KmESun;\n        color.rayleigh = v3BaseColor * (InvWavelength * KrESun);\n        return color;\n    }\n\n    void main(void)\n    {\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        AtmosphereColor atmColor = computeSkyAtmosphere(position.xyz, vLightDir);\n        v_mieColor = atmColor.mie;\n        v_rayleighColor = atmColor.rayleigh;\n        v_vertToCamera = u_eyePositionWorld - position.xyz;\n\n        gl_Position = u_modelViewProjection * position;\n    }\n    `,fragmentShader:`\n    // Because of harsh light distribution the exposure correction is always enabled for the sky.\n    #define CORRECT_EXPOSURE 1\n\n    precision highp float;\n    precision highp int;\n\n    #ifdef CORRECT_COLOR\n    uniform vec3 u_hsvCorrection; // Hue, saturation, brightness\n    #endif\n\n    uniform vec3 u_atmosphereEnv; // Atmosphere inner and outer radius, camera height\n    uniform vec3 u_eyePositionWorld;\n    uniform vec3 u_lightDirectionWorld;\n\n    const float g = -0.95;\n    const float g2 = g * g;\n\n    varying vec3 v_rayleighColor;\n    varying vec3 v_mieColor;\n    varying vec3 v_vertToCamera;\n\n    ${o.default.atmosphere_fragment_utils}\n\n    void main(void)\n    {\n        float fInnerRadius = u_atmosphereEnv.x;\n        float fOuterRadius = u_atmosphereEnv.y;\n        float fCameraHeight = u_atmosphereEnv.z;\n\n        #ifdef DYNAMIC_LIGHT\n            vec3 vLightDir = u_lightDirectionWorld;\n            // Alter alpha based on time of day (0.0 = night , 1.0 = day)\n            float fNightAlpha = clamp(dot(normalize(u_eyePositionWorld), vLightDir), 0.0, 1.0);\n        #else\n            vec3 vLightDir = u_eyePositionWorld;\n            float fNightAlpha = 1.0;\n        #endif\n        vLightDir = normalize(vLightDir);\n\n        // NOTE:\n        // For better precision normalization may be added on fragment (for mobile devices)\n        // while in vertex shader may be left un-normalized\n        // dot(vLightDir, normalize(v_vertToCamera)) / length(v_vertToCamera);\n        float fCosAngle = dot(vLightDir, v_vertToCamera) / length(v_vertToCamera);\n        float fRayleighPhase = 0.75 * (1.0 + fCosAngle * fCosAngle);\n        float fMiePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + fCosAngle * fCosAngle) / pow(1.0 + g2 - 2.0 * g * fCosAngle, 1.5);\n\n        vec3 cRgb = fRayleighPhase * v_rayleighColor + fMiePhase * v_mieColor;\n\n        // Sky produces very harsh lighting effect so exposure correction is always enabled.\n    #if !defined(HDR_FRAME_BUFFER) && defined(CORRECT_EXPOSURE)\n        // Exposure factor may be exposed to uniform variable.\n        cRgb = correctExposure(cRgb, 2.0);\n    #endif\n\n    #ifdef CORRECT_COLOR\n        cRgb = correctColor(cRgb, u_hsvCorrection);\n    #endif\n\n        // Alter alpha based on how close the viewer is to the ground (1.0 = on ground, 0.0 = at edge of atmosphere)\n        float fAtmosphereAlpha = clamp((fOuterRadius - fCameraHeight) /\n            (fOuterRadius - fInnerRadius), 0.0, 1.0);\n        fAtmosphereAlpha *= pow(fNightAlpha, 0.5);\n\n        gl_FragColor = vec4(cRgb, mix(cRgb.b, 1.0, fAtmosphereAlpha));\n    }\n    `};class l extends i.RawShaderMaterial{constructor(e){let n;if(e){n={name:"SkyAtmosphereMaterial",vertexShader:t.SkyAtmosphereShader.vertexShader,fragmentShader:t.SkyAtmosphereShader.fragmentShader,uniforms:t.SkyAtmosphereShader.uniforms,transparent:!0,depthTest:!0,depthWrite:!1,side:r.BackSide,blending:r.NormalBlending,fog:!1,rendererCapabilities:e.rendererCapabilities}}super(n)}setDynamicLighting(e){a.setShaderMaterialDefine(this,"DYNAMIC_LIGHT",e)}set outerRadius(e){this.uniforms.u_atmosphereEnv.value.y=e}get outerRadius(){return this.uniforms.u_atmosphereEnv.value.y}set innerRadius(e){this.uniforms.u_atmosphereEnv.value.x=e}get innerRadius(){return this.uniforms.u_atmosphereEnv.value.x}updateUniforms(e,t,n,r){const i=this.getCameraInfo(t,n);if(void 0===e||!e.isMaterial)throw Error("Wrong object used, only Material objects are supported");if(!(e.uniforms&&e.uniforms.u_atmosphereEnv&&e.uniforms.u_hsvCorrection&&e.uniforms.u_eyePositionWorld&&e.uniforms.u_modelViewProjection&&e.uniforms.u_lightDirectionWorld))throw Error("Atmosphere material has missing uniforms");{const t=i.eyePos,n=i.modelViewProjection,o=i.eyeHeight;e.uniforms.u_eyePositionWorld.value.copy(t),e.uniforms.u_modelViewProjection.value.copy(n),e.uniforms.u_atmosphereEnv.value.z=o,e.uniforms.u_lightDirectionWorld.value=r.clone();const s=o>this.outerRadius,l=a.setShaderDefine(e.defines,"CAMERA_IN_SPACE",s),c=a.setShaderDefine(e.defines,"CAMERA_IN_ATMOSPHERE",!s);e.needsUpdate=e.needsUpdate||l||c}}getCameraInfo(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const n=(new r.Matrix4).identity(),i=(new r.Matrix4).copy(e.matrixWorld).invert().transpose(),o=t.projectionMatrix,a=new r.Matrix4;a.multiplyMatrices(i,n),a.multiplyMatrices(o,a);const s=new r.Vector3;e.getWorldPosition(s);const l=new r.Vector3;t.getWorldPosition(l);return{modelViewProjection:a,eyePos:s,eyeHeight:l.distanceTo(s)}}{const n=e.matrixWorld,i=t.matrixWorldInverse,o=t.projectionMatrix,a=new r.Matrix4;a.multiplyMatrices(i,n),a.multiplyMatrices(o,a);const s=new r.Vector3;t.getWorldPosition(s);const l=new r.Vector3;e.getWorldPosition(l);const c=l.distanceTo(s);return s.sub(l),{modelViewProjection:a,eyePos:s,eyeHeight:c}}}}t.SkyAtmosphereMaterial=l},59702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolidLineMaterial=t.LineDashesModes=void 0;const r=n(534),i=n(67129),o=n(50470),a=n(43937),s=n(85070),l={None:a.LineCapsModes.CAPS_NONE,Square:a.LineCapsModes.CAPS_SQUARE,Round:a.LineCapsModes.CAPS_ROUND,TriangleIn:a.LineCapsModes.CAPS_TRIANGLE_IN,TriangleOut:a.LineCapsModes.CAPS_TRIANGLE_OUT},c=Object.keys(l).reduce(((e,t)=>{const n=t;return e[l[n]]=n,e}),{});var u;!function(e){e[e.DASHES_SQUARE=0]="DASHES_SQUARE",e[e.DASHES_ROUND=1]="DASHES_ROUND",e[e.DASHES_DIAMOND=2]="DASHES_DIAMOND"}(u=t.LineDashesModes||(t.LineDashesModes={}));const h={Square:u.DASHES_SQUARE,Round:u.DASHES_ROUND,Diamond:u.DASHES_DIAMOND},d=Object.keys(h).reduce(((e,t)=>{const n=t;return e[h[n]]=n,e}),{}),p=new r.Color,m=`\nprecision highp float;\nprecision highp int;\n\nuniform vec3 diffuse;\nuniform vec3 outlineColor;\nuniform float opacity;\nuniform float extrusionWidth;\nuniform float outlineWidth;\nuniform vec2 tileSize;\nuniform vec2 drawRange;\n\n#ifdef USE_DASHED_LINE\nuniform float dashSize;\nuniform float gapSize;\nuniform vec3 dashColor;\n\n#define DASHES_SQUARE ${u.DASHES_SQUARE}\n#define DASHES_ROUND ${u.DASHES_ROUND}\n#define DASHES_DIAMOND ${u.DASHES_DIAMOND}\n#endif\n\n#ifdef USE_TILE_CLIP\nvarying vec3 vPosition;\n#endif\n\nvarying vec3 vRange;\nvarying vec4 vCoords;\n#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif\n\n#include <round_edges_and_add_caps>\n#include <tile_clip_func>\n\n#ifdef USE_FADING\n#include <fading_pars_fragment>\n#endif\n\n#include <fog_pars_fragment>\n\nvoid main() {\n    float alpha = opacity;\n    vec3 outputDiffuse = diffuse;\n\n    #ifdef USE_TILE_CLIP\n    tileClip(vPosition.xy, tileSize);\n    #endif\n\n    // Calculate distance to center (0.0: lineCenter, 1.0: lineEdge).\n    float distToCenter = roundEdgesAndAddCaps(vCoords, vRange);\n    // Calculate distance to edge (-1.0: lineCenter, 0.0: lineEdge).\n    float distToEdge = distToCenter - (extrusionWidth + outlineWidth) / extrusionWidth;\n\n    // Decrease the line opacity by the distToEdge, making the transition steeper when the slope\n    // of distToChange increases (i.e. the line is further away).\n    float width = fwidth(distToEdge);\n\n    float s = opacity < 0.98\n        ? clamp((distToEdge + width) / (2.0 * width), 0.0, 1.0) // prefer a boxstep\n        : smoothstep(-width, width, distToEdge);\n\n    if (opacity < 0.98 && 1.0 - s < opacity) {\n        // drop the fragment when the line is using opacity.\n        discard;\n    }\n\n    alpha *= 1.0 - s;\n\n    #ifdef USE_DASHED_LINE\n    // Compute the distance to the dash origin (0.0: dashOrigin, 1.0: dashEnd, (d+g)/d: gapEnd).\n    float d = dashSize / vRange.x;\n    float g = gapSize / vRange.x;\n    float distToDashOrigin = mod(vCoords.x, d + g) / d;\n\n    // Compute distance to dash edge (0.5: dashCenter, 0.0: dashEdge) and compute the\n    // dashBlendFactor similarly on how we did it for the line opacity.\n    float distToDashEdge = 0.5 - distance(distToDashOrigin, (d + g) / d * 0.5);\n    #if DASHES_MODE == DASHES_ROUND\n    distToDashEdge = 0.5 - distance(vec2(distToCenter * 0.5, distToDashEdge), vec2(0.0, 0.5));\n    #elif DASHES_MODE == DASHES_DIAMOND\n    distToDashEdge -= distToCenter * 0.5;\n    #endif\n    float dashWidth = fwidth(distToDashEdge);\n    float dashBlendFactor = 1.0 - smoothstep(-dashWidth, dashWidth, distToDashEdge);\n\n    #ifdef USE_DASH_COLOR\n    outputDiffuse = mix(diffuse, dashColor, dashBlendFactor);\n    #endif\n    #endif\n\n    #ifdef USE_OUTLINE\n    // Calculate distance to outline (0.0: lineEdge, outlineWidth/lineWidth: outlineEdge) and\n    // compute the outlineBlendFactor (used to mix line and outline colors).\n    float distToOutline = distToCenter - 1.0;\n    float outlineWidth = fwidth(distToOutline);\n    float outlineBlendFactor = smoothstep(-outlineWidth, outlineWidth, distToOutline);\n\n    // Mix the colors using the different computed factors.\n    #if defined(USE_DASHED_LINE) && !defined(USE_DASH_COLOR)\n    float colorBlendFactor = smoothstep(-1.0, 1.0, dashBlendFactor - outlineBlendFactor);\n    outputDiffuse = mix(\n      mix(\n        mix(outlineColor, diffuse, colorBlendFactor),\n        outputDiffuse,\n        dashBlendFactor\n      ),\n      outlineColor,\n      outlineBlendFactor\n    );\n    #else\n    outputDiffuse = mix(outputDiffuse, outlineColor, outlineBlendFactor);\n    #endif\n    #endif\n\n    #if defined(USE_DASHED_LINE) && !defined(USE_DASH_COLOR)\n    // Multiply the alpha by the dashBlendFactor.\n    #if defined(USE_OUTLINE)\n    alpha *= clamp(dashBlendFactor + outlineBlendFactor, 0.0, 1.0);\n    #else\n    alpha *= 1.0 - dashBlendFactor;\n    #endif\n    #endif\n\n    #ifdef USE_COLOR\n    gl_FragColor = vec4( outputDiffuse * vColor, alpha );\n    #else\n    gl_FragColor = vec4( outputDiffuse, alpha );\n    #endif\n\n    #include <fog_fragment>\n\n    #ifdef USE_FADING\n    #include <fading_fragment>\n    #endif\n}`;class f extends o.RawShaderMaterial{constructor(e){var t;Object.assign(r.ShaderChunk,a.default),i.FadingFeature.patchGlobalShaderChunks();const n={CAPS_MODE:a.LineCapsModes.CAPS_ROUND,DASHES_MODE:u.DASHES_SQUARE};let o,l,c=!0,h=1;if(e){c=!0===e.fog,c&&s.setShaderDefine(n,"USE_FOG",!0),h=void 0!==e.opacity?e.opacity:h,o=e.displacementMap,void 0!==o&&s.setShaderDefine(n,"USE_DISPLACEMENTMAP",!0);void 0!==e.outlineWidth&&e.outlineWidth>0&&s.setShaderDefine(n,"USE_OUTLINE",!0),l={name:"SolidLineMaterial",vertexShader:"\n#define SEGMENT_OFFSET 0.1\n\nattribute vec3 extrusionCoord;\nattribute vec3 position;\nattribute vec4 bitangent;\nattribute vec3 tangent;\nattribute vec2 uv;\nattribute vec3 normal;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float extrusionWidth;\nuniform float outlineWidth;\nuniform float offset;\nuniform vec2 drawRange;\n\n#ifdef USE_DISPLACEMENTMAP\nuniform sampler2D displacementMap;\n#endif\n\n#ifdef USE_TILE_CLIP\nvarying vec3 vPosition;\n#endif\nvarying vec3 vRange;\nvarying vec4 vCoords;\n#ifdef USE_COLOR\nattribute vec3 color;\nvarying vec3 vColor;\n#endif\n\n#ifdef USE_FADING\n#include <fading_pars_vertex>\n#endif\n\n#include <fog_pars_vertex>\n\n#include <extrude_line_vert_func>\n\nvoid main() {\n    // Calculate the segment.\n    vec2 segment = abs(extrusionCoord.xy) - SEGMENT_OFFSET;\n    float segmentPos = sign(extrusionCoord.x) / 2.0 + 0.5;\n\n    // Calculate the vertex position inside the line (segment) and extrusion direction and factor.\n    float linePos = mix(segment.x, segment.y, segmentPos);\n    vec2 extrusionDir = sign(extrusionCoord.xy);\n    // Precompute to avoid computing multiple times\n    float tanHalfAngle = tan(bitangent.w / 2.0);\n    float extrusionFactor = extrusionDir.y * tanHalfAngle;\n\n    // Calculate the extruded vertex position (and scale the extrusion direction).\n    vec3 pos = extrudeLine(\n        position, linePos, extrusionWidth + outlineWidth, bitangent, tangent, tanHalfAngle,\n        extrusionDir);\n\n    // Store the normalized extrusion coordinates in vCoords (with their ranges in vRange).\n    vRange = vec3(extrusionCoord.z, extrusionWidth, extrusionFactor);\n    vCoords = vec4(extrusionDir / vRange.xy, segment / vRange.x);\n\n    // Adjust the segment to fit the drawRange.\n    float capDist = (extrusionWidth + outlineWidth) / extrusionCoord.z;\n    if ((vCoords.w + capDist) < drawRange.x || (vCoords.z - capDist) > drawRange.y) {\n        vCoords.zw += 1.0;\n    }\n    if (vCoords.z < drawRange.x) {\n        vCoords.zw += vec2(drawRange.x - vCoords.z, 0.0);\n    }\n    if (vCoords.w > drawRange.y) {\n        vCoords.zw -= vec2(0.0, vCoords.w - drawRange.y);\n    }\n\n    // Transform position.\n    #ifdef USE_DISPLACEMENTMAP\n    pos += normalize( normal ) * texture2D( displacementMap, uv ).x;\n    #endif\n\n    // Shift the line based on the offset, where the bitangent is the cross product of the average\n    // of the two direction vectors (the previous and next segment directions) and the normal of\n    // the line (facing into the sky). The w component is the angle between the two segments.\n    // Note, we need to take the angle into consideration, so we use trigonometry to calculate how\n    // much we need to extend the offset. Note, orthough this looks complicated we are doing this\n    // in the vertex shader, so it should not cause a performance issue.\n    pos += bitangent.xyz * offset * sqrt(1.0 + pow(abs(tanHalfAngle), 2.0));\n\n    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n\n    // Pass extruded position to fragment shader.\n    #ifdef USE_TILE_CLIP\n    vPosition = pos;\n    #endif\n\n    #ifdef USE_COLOR\n    // Pass vertex color to fragment shader.\n    vColor = color;\n    #endif\n\n    #ifdef USE_FADING\n    #include <fading_vertex>\n    #endif\n\n    #include <fog_vertex>\n}",fragmentShader:m,uniforms:r.UniformsUtils.merge([{diffuse:new r.Uniform(new r.Color(f.DEFAULT_COLOR)),dashColor:new r.Uniform(new r.Color(f.DEFAULT_COLOR)),outlineColor:new r.Uniform(new r.Color(f.DEFAULT_COLOR)),extrusionWidth:new r.Uniform(f.DEFAULT_WIDTH),outlineWidth:new r.Uniform(f.DEFAULT_OUTLINE_WIDTH),offset:new r.Uniform(f.DEFAULT_OFFSET),opacity:new r.Uniform(f.DEFAULT_OPACITY),tileSize:new r.Uniform(new r.Vector2),fadeNear:new r.Uniform(i.FadingFeature.DEFAULT_FADE_NEAR),fadeFar:new r.Uniform(i.FadingFeature.DEFAULT_FADE_FAR),displacementMap:new r.Uniform(void 0!==o?o:new r.Texture),drawRange:new r.Uniform(new r.Vector2(f.DEFAULT_DRAW_RANGE_START,f.DEFAULT_DRAW_RANGE_END)),dashSize:new r.Uniform(f.DEFAULT_DASH_SIZE),gapSize:new r.Uniform(f.DEFAULT_GAP_SIZE)},r.UniformsLib.fog]),defines:n,fog:c,opacity:h,rendererCapabilities:e.rendererCapabilities}}super(l),this.fog=c,this.setOpacity(h),this.stencilFunc=r.NotEqualStencilFunc,this.stencilZPass=r.ReplaceStencilOp,this.stencilRef=1,this.stencilWrite=!1,s.enforceBlending(this),this.extensions.derivatives=!0,e&&(void 0!==e.color&&(p.set(e.color),this.color=p),void 0!==e.outlineColor&&(p.set(e.outlineColor),this.outlineColor=p),void 0!==e.lineWidth&&(this.lineWidth=e.lineWidth),void 0!==e.outlineWidth&&(this.outlineWidth=e.outlineWidth),void 0!==e.opacity&&this.setOpacity(e.opacity),void 0!==e.depthTest&&(this.depthTest=e.depthTest),void 0!==e.depthWrite&&(this.depthWrite=e.depthWrite),void 0!==e.fadeNear&&(this.fadeNear=e.fadeNear),void 0!==e.fadeFar&&(this.fadeFar=e.fadeFar),void 0!==e.displacementMap&&(this.displacementMap=e.displacementMap),void 0!==e.caps&&(this.caps=e.caps),void 0!==e.drawRangeStart&&(this.drawRangeStart=e.drawRangeStart),void 0!==e.drawRangeEnd&&(this.drawRangeEnd=e.drawRangeEnd),void 0!==e.dashes&&(this.dashes=e.dashes),void 0!==e.dashColor&&(p.set(e.dashColor),this.dashColor=p),void 0!==e.dashSize&&(this.dashSize=e.dashSize),void 0!==e.gapSize&&(this.gapSize=e.gapSize),void 0!==e.fog&&(this.fog=e.fog,this.invalidateFog()),this.offset=null!==(t=e.offset)&&void 0!==t?t:0)}set offset(e){this.uniforms.offset.value=e}get offset(){return this.uniforms.offset.value}set outline(e){s.setShaderMaterialDefine(this,"USE_OUTLINE",e)}get outline(){return!0===s.getShaderMaterialDefine(this,"USE_OUTLINE")}setOpacity(e){super.setOpacity(e),void 0!==e&&(this.stencilWrite=e<.98)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value.copy(e)}get outlineColor(){return this.uniforms.outlineColor.value}set outlineColor(e){this.uniforms.outlineColor.value.copy(e)}get dashColor(){return this.uniforms.dashColor.value}set dashColor(e){this.uniforms.dashColor.value.copy(e),s.setShaderMaterialDefine(this,"USE_DASH_COLOR",!0)}get lineWidth(){return 2*this.uniforms.extrusionWidth.value}set lineWidth(e){this.uniforms.extrusionWidth.value=e/2}get outlineWidth(){return this.uniforms.outlineWidth.value}set outlineWidth(e){this.uniforms.outlineWidth.value=e,this.outline=e>0}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){var t,n;this.uniforms.gapSize.value=e,s.setShaderMaterialDefine(this,"USE_DASHED_LINE",e>0),0===(null===(n=null===(t=this.uniforms)||void 0===t?void 0:t.gapSize)||void 0===n?void 0:n.value)&&(this.stencilWrite=this.opacity<.98)}get caps(){let e="Round";const t=s.getShaderMaterialDefine(this,"CAPS_MODE");return"number"===typeof t&&c.hasOwnProperty(t)&&(e=c[t]),e}set caps(e){l.hasOwnProperty(e)&&s.setShaderMaterialDefine(this,"CAPS_MODE",l[e])}get dashes(){let e="Square";const t=s.getShaderMaterialDefine(this,"DASHES_MODE");return"number"===typeof t&&d.hasOwnProperty(t)&&(e=d[t]),e}set dashes(e){h.hasOwnProperty(e)&&s.setShaderMaterialDefine(this,"DASHES_MODE",h[e])}get fadeNear(){return this.uniforms.fadeNear.value}set fadeNear(e){this.uniforms.fadeNear.value=e}get fadeFar(){return this.uniforms.fadeFar.value}set fadeFar(e){this.uniforms.fadeFar.value=e,s.setShaderMaterialDefine(this,"USE_FADING",e>0)}get displacementMap(){return this.uniforms.displacementMap.value}set displacementMap(e){if(this.uniforms.displacementMap.value===e)return;this.uniforms.displacementMap.value=e;const t=null!==e;t&&(this.uniforms.displacementMap.value.needsUpdate=!0),s.setShaderMaterialDefine(this,"USE_DISPLACEMENTMAP",t)}get drawRangeStart(){return this.uniforms.drawRange.value.x}set drawRangeStart(e){this.uniforms.drawRange.value.x=e}get drawRangeEnd(){return this.uniforms.drawRange.value.y}set drawRangeEnd(e){this.uniforms.drawRange.value.y=e}set clipTileSize(e){this.uniforms.tileSize.value.copy(e);const t=e.x>0&&e.y>0;s.setShaderMaterialDefine(this,"USE_TILE_CLIP",t)}get clipTileSize(){return this.uniforms.tileSize.value}copy(e){return super.copy(e),this.invalidateFog(),this.setOpacity(e.opacity),this}}t.SolidLineMaterial=f,f.DEFAULT_COLOR=16711680,f.DEFAULT_WIDTH=1,f.DEFAULT_OUTLINE_WIDTH=0,f.DEFAULT_OPACITY=1,f.DEFAULT_DRAW_RANGE_START=0,f.DEFAULT_DRAW_RANGE_END=1,f.DEFAULT_DASH_SIZE=1,f.DEFAULT_GAP_SIZE=1,f.DEFAULT_OFFSET=0},85070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShaderDefine=t.setShaderDefine=t.getShaderMaterialDefine=t.setShaderMaterialDefine=t.disableBlending=t.enableBlending=t.enforceBlending=t.insertShaderInclude=t.DEFINE_BOOL_FALSE=t.DEFINE_BOOL_TRUE=void 0;const r=n(15739),i=n(534);function o(e){!0!==e.transparent&&!0!==e.forcedBlending&&(e.blending=i.CustomBlending,!0===e.premultipliedAlpha?(e.blendSrc=i.OneFactor,e.blendDst=i.OneMinusSrcAlphaFactor,e.blendSrcAlpha=i.OneFactor,e.blendDstAlpha=i.OneMinusSrcAlphaFactor):(e.blendSrc=i.SrcAlphaFactor,e.blendDst=i.OneMinusSrcAlphaFactor,e.blendSrcAlpha=i.OneFactor,e.blendDstAlpha=i.OneMinusSrcAlphaFactor))}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0===e.defines?n:l(e.defines,t)}function s(e,n,r){let i=!1;return"number"===typeof r?(i=e[n]!==r,e[n]=r):!0===r?(i=e[n]!==t.DEFINE_BOOL_TRUE,e[n]=t.DEFINE_BOOL_TRUE):!1===r&&void 0!==e[n]&&(delete e[n],i=!0),i}function l(e,n){const r=e[n];return r!==t.DEFINE_BOOL_FALSE&&(r===t.DEFINE_BOOL_TRUE||r)}t.DEFINE_BOOL_TRUE="",t.DEFINE_BOOL_FALSE=void 0,t.insertShaderInclude=function(e,t,n,r){const i=!0===r?"\t":"";return e.replace(`#include <${t}>`,`#include <${t}>\n${i}#include <${n}>`)},t.enforceBlending=function(e){e.transparent||(o(e),e.forcedBlending=!0)},t.enableBlending=o,t.disableBlending=function(e){!0!==e.transparent&&!0!==e.forcedBlending&&(e.blending=i.NormalBlending)},t.setShaderMaterialDefine=function(e,t,n){r.assert(void 0!==e.defines,"Do not use this function in ShaderMaterial derived c-tor.");const i=n!==a(e,t);return!!i&&(s(e.defines,t,n),e.needsUpdate=i,!0)},t.getShaderMaterialDefine=a,t.setShaderDefine=s,t.getShaderDefine=l},3879:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VignetteShader=void 0,t.VignetteShader={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }",fragmentShader:"\n        uniform float offset;\n        uniform float darkness;\n        uniform sampler2D tDiffuse;\n        varying vec2 vUv;\n        void main() {\n            vec4 texel = texture2D( tDiffuse, vUv );\n            vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\n            gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );\n        }"}},21690:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(43869),t),i(n(45709),t),i(n(80549),t),i(n(68275),t),i(n(18067),t),i(n(59616),t),i(n(11153),t),i(n(76729),t),i(n(67747),t)},18067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextCanvas=t.DEFAULT_TEXT_CANVAS_LAYER=void 0;const r=n(534),i=n(68275),o=n(30903),a=n(80549),s=n(95529),l=n(64584),c=n(11153),u=new r.Vector3,h={array:[new r.Box2],offset:0};let d=new Float32Array;t.DEFAULT_TEXT_CANVAS_LAYER=0;class p{constructor(e){this.m_renderer=e.renderer,this.m_fontCatalog=e.fontCatalog,this.minGlyphCount=e.minGlyphCount,this.maxGlyphCount=e.maxGlyphCount,this.name=e.name,void 0===e.material?(this.m_ownsMaterial=!0,this.m_material=c.createSdfTextMaterial({fontCatalog:e.fontCatalog,rendererCapabilities:this.m_renderer.capabilities})):(this.m_ownsMaterial=!1,this.m_material=e.material),void 0===e.backgroundMaterial?(this.m_ownsBgMaterial=!0,this.m_bgMaterial=c.createSdfTextMaterial({fontCatalog:e.fontCatalog,isBackground:!0,rendererCapabilities:this.m_renderer.capabilities})):(this.m_ownsBgMaterial=!1,this.m_bgMaterial=e.backgroundMaterial),this.m_defaultLayer={id:t.DEFAULT_TEXT_CANVAS_LAYER,storage:new o.TextGeometry(new r.Scene,this.m_material,this.m_bgMaterial,this.minGlyphCount,this.maxGlyphCount)},this.m_layers=[this.m_defaultLayer],this.m_currentTextRenderStyle=(new a.TextRenderStyle).copy(p.defaultTextRenderStyle),this.m_currentTextLayoutStyle=(new a.TextLayoutStyle).copy(p.defaultTextLayoutStyle),this.m_lineTypesetter=new s.LineTypesetter,this.m_pathTypesetter=new l.PathTypesetter}get fontCatalog(){return this.m_fontCatalog}set fontCatalog(e){this.m_fontCatalog=e;const t=this.m_material;t.uniforms.sdfTexture.value=this.m_fontCatalog.texture,t.uniforms.sdfParams.value=new r.Vector4(this.m_fontCatalog.textureSize.x,this.m_fontCatalog.textureSize.y,this.m_fontCatalog.size,this.m_fontCatalog.distanceRange),t.defines.MSDF="msdf"===this.m_fontCatalog.type?1:0;const n=this.m_bgMaterial;n.uniforms.sdfTexture.value=this.m_fontCatalog.texture,n.uniforms.sdfParams.value=new r.Vector4(this.m_fontCatalog.textureSize.x,this.m_fontCatalog.textureSize.y,this.m_fontCatalog.size,this.m_fontCatalog.distanceRange),n.defines.MSDF="msdf"===this.m_fontCatalog.type?1:0}get material(){return this.m_material}set material(e){this.m_ownsMaterial&&(this.m_material.dispose(),this.m_ownsMaterial=!1),this.m_material=e;for(const t of this.m_layers)t.storage.mesh.material=this.m_material}get backgroundMaterial(){return this.m_bgMaterial}set backgroundMaterial(e){this.m_ownsBgMaterial&&(this.m_bgMaterial.dispose(),this.m_ownsBgMaterial=!1),this.m_bgMaterial=e;for(const t of this.m_layers)t.storage.backgroundMesh.material=this.m_bgMaterial}get textRenderStyle(){return this.m_currentTextRenderStyle}set textRenderStyle(e){this.m_currentTextRenderStyle.copy(e)}get textLayoutStyle(){return this.m_currentTextLayoutStyle}set textLayoutStyle(e){this.m_currentTextLayoutStyle.copy(e)}clear(){for(const e of this.m_layers)e.storage.clear();this.m_currentTextRenderStyle.copy(p.defaultTextRenderStyle),this.m_currentTextLayoutStyle.copy(p.defaultTextLayoutStyle)}render(e,t,n,r,i){this.m_fontCatalog.update(this.m_renderer);let o=null;void 0!==r&&(o=this.m_renderer.getRenderTarget(),this.m_renderer.setRenderTarget(r)),!0===i&&this.m_renderer.clear(!0);for(let a=0;a<this.m_layers.length;a++){const r=this.m_layers[a];if(r.id>=(null!==t&&void 0!==t?t:0)){if(!(void 0===n||r.id<n))break;r.storage.update(),this.m_renderer.render(r.storage.scene,e)}}void 0!==r&&this.m_renderer.setRenderTarget(o)}addLayer(e){let t=this.getLayer(e);return void 0===t&&(t={id:e,storage:new o.TextGeometry(new r.Scene,this.m_material,this.m_bgMaterial,this.minGlyphCount,this.maxGlyphCount)},this.m_layers.push(t),this.m_layers.sort(((e,t)=>e.id-t.id))),t}getLayer(e){return this.m_layers.find((t=>t.id===e))}getAllLayers(){return this.m_layers}measureText(e,t,n){let r,i,o,a;if(u.set(0,0,0),void 0!==n){if(r=n.path,i=n.pathOverflow,a=n.outputCharacterBounds,void 0!==n.path){const e=n.path.getPoint(0);if(null===e)return!1;u.set(e.x,e.y,0)}n.letterCaseArray&&(o=n.letterCaseArray)}return this.placeText({input:e,layer:this.m_defaultLayer,textPath:r,textPathOverflow:i,bounds:t,individualBounds:a,letterCaseArray:o})}addText(e,t,n){let r,i,o;u.copy(t);let a=this.m_defaultLayer;if(void 0!==n){if(r=n.path,i=n.pathOverflow,void 0!==n.layer){let e=this.getLayer(n.layer);void 0===e&&(e=this.addLayer(n.layer)),a=e}void 0!==n.path&&u.set(0,0,u.z),n.letterCaseArray&&(o=n.letterCaseArray)}const s=a.storage.drawCount,l=this.placeText({input:e,textPath:r,textPathOverflow:i,layer:a,letterCaseArray:o});return l&&void 0!==n?(!0===n.updatePosition&&t.copy(u),void 0!==n.pickingData&&a.storage.addPickingData(s,a.storage.drawCount,n.pickingData)):l||(a.storage.m_drawCount=s),l}createTextBufferObject(e,t){let n,o;u.set(0,0,0);const s=this.m_currentTextRenderStyle.fontVariant===a.FontVariant.SmallCaps;if("string"!==typeof e)n=e,void 0!==t&&t.letterCaseArray&&(o=t.letterCaseArray);else if(o=[],n=this.m_fontCatalog.getGlyphs(e,this.m_currentTextRenderStyle,s?o:void 0),void 0===n)return;let l,c,h,p,m,f;return void 0!==t&&(l=t.path,c=t.pathOverflow,!0===t.outputBounds&&(h=new r.Box2),!0===t.outputCharacterBounds&&(p=[]),!0===t.storeStyles&&(m=this.m_currentTextRenderStyle.clone(),f=this.m_currentTextLayoutStyle.clone())),this.placeText({input:e,layer:this.m_defaultLayer,computeTextBuffer:!0,textPath:l,textPathOverflow:c,bounds:h,individualBounds:p,letterCaseArray:o}),new i.TextBufferObject(n,new Float32Array(d),h,p,m,f)}addTextBufferObject(e,t){var n;let r,i,o,a,s,l,c,u=this.m_defaultLayer;if(void 0!==t){if(void 0!==t.layer){let e=this.getLayer(t.layer);void 0===e&&(e=this.addLayer(t.layer)),u=e}r=null===(n=t.position)||void 0===n?void 0:n.clone(),i=t.scale,o=t.rotation,a=t.color,s=t.opacity,l=t.backgroundColor,c=t.backgroundOpacity}const h=u.storage.drawCount,d=u.storage.addTextBufferObject(e,r,i,o,a,s,l,c);return d&&void 0!==t?void 0!==t.pickingData&&u.storage.addPickingData(h,u.storage.drawCount,t.pickingData):d||(u.storage.m_drawCount=h),d}pickText(e,t){for(const n of this.m_layers)n.storage.pick(e,t)}getMemoryUsage(e){this.m_fontCatalog.updateMemoryUsage(e);for(const t of this.m_layers)t.storage.updateMemoryUsage(e)}placeText(e){if(0===e.input.length||0===this.m_currentTextLayoutStyle.maxLines)return void 0!==e.bounds&&(e.bounds.min.set(0,0),e.bounds.max.set(0,0)),void 0!==e.individualBounds&&(e.individualBounds.length=0),!0;let t,n;const r=this.m_currentTextRenderStyle.fontVariant===a.FontVariant.SmallCaps;if("string"!==typeof e.input)t=e.input,e.letterCaseArray&&(n=e.letterCaseArray);else if(n=[],t=this.m_fontCatalog.getGlyphs(e.input,this.m_currentTextRenderStyle,r?n:void 0),void 0===t)return!1;let i;void 0!==e.individualBounds&&(h.array=e.individualBounds,h.offset=0,i=h),void 0!==e.bounds&&(e.bounds.min.set(1/0,1/0),e.bounds.max.set(-1/0,-1/0)),!0===e.computeTextBuffer&&(d=new Float32Array(t.length*o.QUAD_VERTEX_MEMORY_FOOTPRINT));const s=void 0!==e.textPath,l={glyphs:t,fontCatalog:this.m_fontCatalog,textRenderStyle:this.m_currentTextRenderStyle,textLayoutStyle:this.m_currentTextLayoutStyle,position:u,geometry:e.layer.storage,smallCapsArray:r?n:void 0,globalBounds:e.bounds,individualBounds:i,vertexBuffer:!0===e.computeTextBuffer?d:void 0};let c=!0;return s?(Object.assign(l,{path:e.textPath,pathOverflow:!0===e.textPathOverflow}),c=this.m_pathTypesetter.arrangeGlyphs(l)):c=this.m_lineTypesetter.arrangeGlyphs(l),void 0!==i&&(i.array.length=i.offset),c}}t.TextCanvas=p,p.defaultTextRenderStyle=new a.TextRenderStyle,p.defaultTextLayoutStyle=new a.TextLayoutStyle},43869:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontCatalog=void 0;const r=n(534),i=n(67747),o=n(45709),a=n(85329),s=n(80549),l="_BoldAssets/",c="_ItalicAssets/";class u{constructor(e,t,n,r,i,o,s,l,c,u,h){this.url=e,this.name=t,this.type=n,this.size=r,this.maxWidth=i,this.maxHeight=o,this.distanceRange=s,this.fonts=l,this.unicodeBlocks=c,this.maxCodePointCount=u,this.m_replacementGlyph=h,this.showReplacementGlyphs=!1,this.m_glyphTextureCache=new a.GlyphTextureCache(u,this.maxWidth+1,this.maxHeight+1),this.m_loadingJson=new Map,this.m_loadingPages=new Map,this.m_loadingGlyphs=new Map,this.m_loadedJson=new Map,this.m_loadedPages=new Map,this.m_loadedGlyphs=new Map}static async load(e,t){const n=new URL(e,window.location.href),i=await u.loadJSON(n.href),a=new URL(`${i.name}_Assets/Extra/`,n),s=await u.loadJSON(a.href+"Specials.json"),l=await u.loadTexture(a.href+"Specials.png");l.wrapS=r.ClampToEdgeWrapping,l.wrapT=r.ClampToEdgeWrapping,l.minFilter=r.NearestFilter,l.needsUpdate=!0;const c=i.fonts.find((e=>"Extra"===e.name)),h=new o.GlyphData(65533,"Specials",s.chars[0].width,s.chars[0].height,s.chars[0].xadvance,s.chars[0].xoffset,s.chars[0].yoffset,0,0,1,1,l,c,!0);return new u(n.href.substr(0,n.href.lastIndexOf("/")),i.name,i.type,i.size,i.maxWidth,i.maxHeight,i.distanceRange,i.fonts,i.supportedBlocks,t,h)}static async loadTexture(e){return await new Promise((t=>{(new r.TextureLoader).load(e,t)}))}static async loadJSON(e){const t=await fetch(e);if(!t.ok)throw new Error(`${e} Status Text:  ${t.statusText}`);const n=await t.text();return JSON.parse(n)}dispose(){this.fonts.length=0,this.unicodeBlocks.length=0,this.m_glyphTextureCache.dispose(),this.m_loadingJson.clear(),this.m_loadingPages.clear(),this.m_loadingGlyphs.clear(),this.m_loadedJson.clear(),this.m_loadedPages.clear(),this.m_loadedGlyphs.clear()}clear(){this.m_glyphTextureCache.clear(),this.m_loadingJson.clear(),this.m_loadingPages.clear(),this.m_loadingGlyphs.clear(),this.m_loadedJson.clear(),this.m_loadedPages.clear(),this.m_loadedGlyphs.clear()}update(e){this.m_glyphTextureCache.update(e)}get texture(){return this.m_glyphTextureCache.texture}get textureSize(){return this.m_glyphTextureCache.textureSize}get isLoading(){return this.m_loadingJson.size>0||this.m_loadingPages.size>0||this.m_loadingGlyphs.size>0}async loadBlock(e,t,n,r){const i=this.getAssetsPath(n,t),o=`${i}/${e.name.replace(/ /g,"_")}.json`;let a=this.m_loadedJson.get(o);if(void 0===a){let e=this.m_loadingJson.get(o);if(void 0===e)try{e=u.loadJSON(o),this.m_loadingJson.set(o,e),a=await e,this.m_loadingJson.delete(o),this.m_loadedJson.set(o,a)}catch(l){console.error(l),this.m_loadingJson.delete(o)}else a=await e}const s=[];if(!0===r)for(const c of a.pages)s.push(this.loadPage(`${i}/${c}`));return await Promise.all(s),a}removeBlock(e,t,n){const r=this.getAssetsPath(n,t),i=`${r}/${e.name.replace(/ /g,"_")}.json`,o=this.m_loadedJson.get(i);if(void 0!==o){for(const e of o.pages){const t=`${r}/${e}`;this.m_loadingPages.delete(t),this.m_loadedPages.delete(t)}this.m_loadingJson.delete(i),this.m_loadedJson.delete(i)}}async loadCharset(e,t){const n=t.fontName,r=t.fontStyle,i=(t.fontVariant===s.FontVariant.AllCaps||t.fontVariant===s.FontVariant.SmallCaps?e.toUpperCase():e).replace(/[\s\S](?=([\s\S]+))/g,((e,t)=>t.indexOf(e)+1?"":e)),o=[];for(const a of i){const e=a.codePointAt(0),t=this.getFont(e,n),i=`${t.name}_${r}`,s=`${i}_${e}`;let l=this.m_loadedGlyphs.get(i);void 0===l&&(l=new Map,this.m_loadedGlyphs.set(i,l));const c=l.get(e);if(void 0===c){let n=this.m_loadingGlyphs.get(s);if(void 0===n){if(!t.charset.includes(String.fromCodePoint(e))){const n=this.createReplacementGlyph(e,a,t);l.set(e,n),this.m_glyphTextureCache.add(s,n);continue}let i;for(const t of this.unicodeBlocks)if(e>=t.min&&e<=t.max){i=t;break}n=this.loadAssets(e,r,i,t),this.m_loadingGlyphs.set(s,n),n.then((t=>{this.m_loadingGlyphs.delete(s),l.set(e,t),this.m_glyphTextureCache.add(s,t)}))}o.push(n)}else this.m_glyphTextureCache.has(s)||(o.push(Promise.resolve(c)),this.m_glyphTextureCache.add(s,c))}return Promise.all(o)}getGlyph(e,t,n){const r=this.m_loadedGlyphs.get(`${t.name}_${n}`);if(void 0!==r)return r.get(e)}getGlyphs(e,t,n){const r=[],i=t.fontName,o=t.fontStyle,a=t.fontVariant,l=a===s.FontVariant.AllCaps||a===s.FontVariant.SmallCaps;for(const s of e){const e=l?s.toUpperCase():s;for(const t of e){const e=t.codePointAt(0),a=this.getFont(e,i),l=this.getGlyph(e,a,o);if(void 0===l||l.isReplacement&&!this.showReplacementGlyphs)return;r.push(l),void 0!==n&&n.push(t!==s)}}return r}getFont(e,t){let n=this.fonts[0].name;for(const r of this.unicodeBlocks)if(e>=r.min&&e<=r.max){n=void 0!==t&&void 0!==r.fonts.find((e=>e===t))?t:r.fonts[0];break}return this.fonts.find((e=>e.name===n))}updateMemoryUsage(e){let t=0;for(const r of this.unicodeBlocks)t+=2*(r.max-r.min);let n=this.m_glyphTextureCache.textureSize.x*this.m_glyphTextureCache.textureSize.y*4;for(const r in this.m_loadedPages.entries)if(void 0!==this.m_loadedPages.get(r)){const e=this.m_loadedPages.get(r);void 0!==e&&(n+=e.image.width*e.image.height*4)}e.heapSize+=t+n,e.gpuSize+=n}createReplacementGlyph(e,t,n){const r=this.m_replacementGlyph.clone();return r.codePoint=e,r.character=t,r.font=n,r.isReplacement=i.UnicodeUtils.isPrintable(e),r}async loadAssets(e,t,n,r){const i=await this.loadBlock(n,r,t);if(void 0===i)return this.m_replacementGlyph;const a=i.chars.find((t=>t.id===e)),s=`${this.getAssetsPath(t,r)}/${i.pages[a.page]}`,l=await this.loadPage(s);return new o.GlyphData(a.id,n.name,a.width,a.height,a.xadvance,a.xoffset,a.yoffset,a.x/l.image.width,1-(a.y+a.height)/l.image.height,(a.x+a.width)/l.image.width,1-a.y/l.image.height,l,r)}async loadPage(e){let t=this.m_loadedPages.get(e);if(void 0===t){let n=this.m_loadingPages.get(e);void 0===n?(n=u.loadTexture(e),this.m_loadingPages.set(e,n),t=await n,t.wrapS=r.ClampToEdgeWrapping,t.wrapT=r.ClampToEdgeWrapping,t.minFilter=r.NearestFilter,t.needsUpdate=!0,this.m_loadingPages.delete(e)&&this.m_loadedPages.set(e,t),this.m_loadingPages.delete(e)):t=await n}return t}getAssetsPath(e,t){let n="_Assets/";switch(e){case s.FontStyle.Bold:void 0!==t.bold&&(n=l);break;case s.FontStyle.Italic:void 0!==t.italic&&(n=c);break;case s.FontStyle.BoldItalic:void 0!==t.boldItalic?n="_BoldItalicAssets/":void 0!==t.italic?n=c:void 0!==t.bold&&(n=l)}return`${this.url}/${this.name}${n}${t.name}`}}t.FontCatalog=u},45709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphData=void 0;const r=n(534),i=n(67747);class o{constructor(e,t,n,o,a,s,l,c,u,h,d,p,m){let f=arguments.length>13&&void 0!==arguments[13]&&arguments[13];this.codePoint=e,this.block=t,this.width=n,this.height=o,this.advanceX=a,this.offsetX=s,this.offsetY=l,this.texture=p,this.font=m,this.isReplacement=f,this.positions=[],this.sourceTextureCoordinates=[],this.dynamicTextureCoordinates=[],this.copyIndex=0,this.isInCache=!1,this.character=String.fromCodePoint(e),this.direction=i.UnicodeUtils.getDirection(e,t);const g=this.offsetX,v=g+this.width,y=m.metrics.lineHeight-this.offsetY,_=y-this.height;this.positions.push(new r.Vector3(g,_,1),new r.Vector3(v,_,1),new r.Vector3(g,y,1),new r.Vector3(v,y,1)),this.sourceTextureCoordinates.push(new r.Vector2(c,u),new r.Vector2(h,u),new r.Vector2(c,d),new r.Vector2(h,d)),this.dynamicTextureCoordinates.push(new r.Vector2(0,0),new r.Vector2(1,0),new r.Vector2(0,1),new r.Vector2(1,1))}clone(){return new o(this.codePoint,this.block,this.width,this.height,this.advanceX,this.offsetX,this.offsetY,this.sourceTextureCoordinates[0].x,this.sourceTextureCoordinates[0].y,this.sourceTextureCoordinates[3].x,this.sourceTextureCoordinates[3].y,this.texture,this.font,this.isReplacement)}}t.GlyphData=o},85329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphTextureCache=void 0;const r=n(51106),i=n(534),o=n(45709),a=n(9499),s=4096;t.GlyphTextureCache=class{constructor(e,t,n){this.capacity=e,this.entryWidth=t,this.entryHeight=n;const o=Math.floor(Math.sqrt(e));this.m_cacheHeight=o*o<e?o+1:o,this.m_cacheWidth=o*this.m_cacheHeight<e?o+1:o,this.m_textureSize=new i.Vector2(this.m_cacheWidth*t,this.m_cacheHeight*n),(this.m_textureSize.y>s||this.m_textureSize.x>s)&&console.warn("GlyphTextureCache texture size ("+this.m_textureSize.x+", "+this.m_textureSize.y+") exceeds WebGL's widely supported MAX_TEXTURE_SIZE ("+"4096).\nThis could result in rendering errors on some devices.\nPlease consider reducing its capacity or input assets size."),this.m_entryCache=new r.LRUCache(e),this.initCacheEntries(),this.m_scene=new i.Scene,this.m_camera=new i.OrthographicCamera(0,this.m_textureSize.x,this.m_textureSize.y,0),this.m_camera.position.z=1,this.m_camera.updateMatrixWorld(!1),this.m_rt=new i.WebGLRenderTarget(this.m_textureSize.x,this.m_textureSize.y,{wrapS:i.ClampToEdgeWrapping,wrapT:i.ClampToEdgeWrapping,depthBuffer:!1,stencilBuffer:!1}),this.m_copyTextureSet=new Set,this.m_copyTransform=new i.Matrix3,this.m_copyPositions=[],this.m_copyPositions.push(new i.Vector2,new i.Vector2,new i.Vector2,new i.Vector2),this.m_copyVertexBuffer=new i.InterleavedBuffer(new Float32Array(20*e),5),this.m_copyVertexBuffer.setUsage(i.DynamicDrawUsage),this.m_copyPositionAttribute=new i.InterleavedBufferAttribute(this.m_copyVertexBuffer,3,0),this.m_copyUVAttribute=new i.InterleavedBufferAttribute(this.m_copyVertexBuffer,2,3),this.m_copyGeometry=new i.BufferGeometry,this.m_copyGeometry.setAttribute("position",this.m_copyPositionAttribute),this.m_copyGeometry.setAttribute("uv",this.m_copyUVAttribute);const a=new i.BufferAttribute(new Uint32Array(6*e),1);a.setUsage(i.DynamicDrawUsage),this.m_copyGeometry.setIndex(a),this.m_copyMesh=new i.Mesh(this.m_copyGeometry),this.m_copyMesh.frustumCulled=!1,this.m_copyGeometryDrawCount=0,this.m_clearPositionAttribute=new i.BufferAttribute(new Float32Array(8*e),2),this.m_clearPositionAttribute.setUsage(i.DynamicDrawUsage),this.m_clearGeometry=new i.BufferGeometry,this.m_clearGeometry.setAttribute("position",this.m_clearPositionAttribute);const l=new i.BufferAttribute(new Uint32Array(6*e),1);l.setUsage(i.DynamicDrawUsage),this.m_clearGeometry.setIndex(l),this.m_clearMesh=new i.Mesh(this.m_clearGeometry),this.m_clearMesh.frustumCulled=!1,this.m_clearGeometryDrawCount=0,this.m_scene.add(this.m_clearMesh,this.m_copyMesh)}dispose(){var e,t;this.m_entryCache.clear(),this.m_scene.remove(this.m_clearMesh,this.m_copyMesh),this.m_rt.dispose(),null===(e=this.m_clearMaterial)||void 0===e||e.dispose(),null===(t=this.m_copyMaterial)||void 0===t||t.dispose(),this.m_copyTextureSet.clear(),this.m_clearGeometry.dispose(),this.m_copyGeometry.dispose()}get texture(){return this.m_rt.texture}get textureSize(){return this.m_textureSize}add(e,t){if(void 0!==this.m_entryCache.get(e))return;const n=this.m_entryCache.oldest;if(null===n)throw new Error("GlyphTextureCache is uninitialized!");this.clearCacheEntry(n.value),this.copyGlyphToCache(e,t,n.value.location)}has(e){return this.m_entryCache.has(e)}get(e){return this.m_entryCache.get(e)}clear(){this.m_copyGeometryDrawCount=0,this.m_clearGeometryDrawCount=0,this.m_entryCache.clear(),this.m_copyTextureSet.clear(),this.initCacheEntries()}update(e){let t=null;const n=this.m_clearGeometryDrawCount>0,r=this.m_copyGeometryDrawCount>0;if((n||r)&&(t=e.getRenderTarget(),e.setRenderTarget(this.m_rt)),n){if(this.m_clearMaterial||(this.m_clearMaterial=new a.GlyphClearMaterial({rendererCapabilities:e.capabilities}),this.m_clearMesh.material=this.m_clearMaterial),null===this.m_clearGeometry.index)throw new Error("GlyphTextureCache clear geometry index is uninitialized!");this.m_clearPositionAttribute.needsUpdate=!0,this.m_clearPositionAttribute.updateRange.offset=0,this.m_clearPositionAttribute.updateRange.count=8*this.m_clearGeometryDrawCount,this.m_clearGeometry.index.needsUpdate=!0,this.m_clearGeometry.index.updateRange.offset=0,this.m_clearGeometry.index.updateRange.count=6*this.m_clearGeometryDrawCount,this.m_clearGeometry.setDrawRange(0,6*this.m_clearGeometryDrawCount),this.m_clearMesh.visible=!0,this.m_copyMesh.visible=!1,e.render(this.m_scene,this.m_camera),this.m_clearGeometryDrawCount=0,this.m_clearMesh.visible=!1}if(r){if(this.m_copyMaterial||(this.m_copyMaterial=new a.GlyphCopyMaterial({rendererCapabilities:e.capabilities}),this.m_copyMesh.material=this.m_copyMaterial),null===this.m_copyGeometry.index)throw new Error("GlyphTextureCache copy geometry index is uninitialized!");this.m_copyVertexBuffer.needsUpdate=!0,this.m_copyVertexBuffer.updateRange.offset=0,this.m_copyVertexBuffer.updateRange.count=20*this.m_copyGeometryDrawCount,this.m_copyGeometry.index.needsUpdate=!0,this.m_copyGeometry.index.updateRange.offset=0,this.m_copyGeometry.index.updateRange.count=6*this.m_copyGeometryDrawCount,this.m_copyGeometry.setDrawRange(0,6*this.m_copyGeometryDrawCount),this.m_copyMesh.visible=!0;const t=Array.from(this.m_copyTextureSet),n=Math.ceil(this.m_copyTextureSet.size/8);for(let r=0;r<n;r++){const n=8*r;this.m_copyMaterial.uniforms.pageOffset.value=n;for(let e=0;e<8;e++){const r=n+e;r<this.m_copyTextureSet.size&&(this.m_copyMaterial.uniforms["page"+e].value=t[r])}e.render(this.m_scene,this.m_camera)}this.m_copyTextureSet.clear(),this.m_copyGeometryDrawCount=0}(n||r)&&e.setRenderTarget(t)}initCacheEntries(){const e={name:"",metrics:{size:0,distanceRange:0,base:0,lineHeight:0,lineGap:0,capHeight:0,xHeight:0},charset:""},t=new o.GlyphData(0,"",0,0,0,0,0,0,0,0,0,i.Texture.DEFAULT_IMAGE,e);for(let n=0;n<this.m_cacheHeight;n++)for(let e=0;e<this.m_cacheWidth;e++){const r={glyphData:t,location:new i.Vector2(e,n)};this.m_entryCache.set(`Dummy_${n*this.m_cacheHeight+e}`,r)}}copyGlyphToCache(e,t,n){this.m_copyTextureSet.add(t.texture);let r=0;for(const u of this.m_copyTextureSet.values()){if(u===t.texture)break;r++}t.copyIndex=r,this.m_copyTransform.set(1,0,n.x*this.entryWidth-t.offsetX,0,1,n.y*this.entryHeight-t.positions[0].y,0,0,0);for(let u=0;u<4;++u)this.m_copyPositions[u].set(t.positions[u].x,t.positions[u].y),this.m_copyPositions[u].applyMatrix3(this.m_copyTransform);if(this.m_copyGeometryDrawCount>=this.capacity)return;const i=4*this.m_copyGeometryDrawCount,o=6*this.m_copyGeometryDrawCount;for(let u=0;u<4;++u)this.m_copyPositionAttribute.setXYZ(i+u,this.m_copyPositions[u].x,this.m_copyPositions[u].y,t.copyIndex),this.m_copyUVAttribute.setXY(i+u,t.sourceTextureCoordinates[u].x,t.sourceTextureCoordinates[u].y);if(null===this.m_copyGeometry.index)throw new Error("GlyphTextureCache copy geometry index is uninitialized!");this.m_copyGeometry.index.setX(o,i),this.m_copyGeometry.index.setX(o+1,i+1),this.m_copyGeometry.index.setX(o+2,i+2),this.m_copyGeometry.index.setX(o+3,i+2),this.m_copyGeometry.index.setX(o+4,i+1),this.m_copyGeometry.index.setX(o+5,i+3),++this.m_copyGeometryDrawCount;const a=this.m_copyPositions[0].x/this.m_textureSize.x,s=this.m_copyPositions[0].y/this.m_textureSize.y,l=this.m_copyPositions[3].x/this.m_textureSize.x,c=this.m_copyPositions[3].y/this.m_textureSize.y;t.dynamicTextureCoordinates[0].set(a,s),t.dynamicTextureCoordinates[1].set(l,s),t.dynamicTextureCoordinates[2].set(a,c),t.dynamicTextureCoordinates[3].set(l,c),t.isInCache=!0,this.m_entryCache.set(e,{glyphData:t,location:n})}clearCacheEntry(e){if(e.glyphData.isInCache=!1,this.m_copyPositions[0].set(e.location.x*this.entryWidth,e.location.y*this.entryHeight),this.m_copyPositions[1].set((e.location.x+1)*this.entryWidth,e.location.y*this.entryHeight),this.m_copyPositions[2].set(e.location.x*this.entryWidth,(e.location.y+1)*this.entryHeight),this.m_copyPositions[3].set((e.location.x+1)*this.entryWidth,(e.location.y+1)*this.entryHeight),this.m_clearGeometryDrawCount>=this.capacity)return;const t=4*this.m_clearGeometryDrawCount,n=6*this.m_clearGeometryDrawCount;for(let r=0;r<4;++r)this.m_clearPositionAttribute.setXY(t+r,this.m_copyPositions[r].x,this.m_copyPositions[r].y);if(null===this.m_clearGeometry.index)throw new Error("GlyphTextureCache clear geometry index is uninitialized!");this.m_clearGeometry.index.setX(n,t),this.m_clearGeometry.index.setX(n+1,t+1),this.m_clearGeometry.index.setX(n+2,t+2),this.m_clearGeometry.index.setX(n+3,t+2),this.m_clearGeometry.index.setX(n+4,t+1),this.m_clearGeometry.index.setX(n+5,t+3),++this.m_clearGeometryDrawCount}}},68275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextBufferObject=void 0;t.TextBufferObject=class{constructor(e,t,n,r,i,o){this.glyphs=e,this.buffer=t,this.bounds=n,this.characterBounds=r,this.textRenderStyle=i,this.textLayoutStyle=o}}},30903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextGeometry=t.QUAD_INDEX_MEMORY_FOOTPRINT=t.QUAD_VERTEX_MEMORY_FOOTPRINT=t.INDICES_PER_QUAD=t.VERTICES_PER_QUAD=t.INDEX_BUFFER_STRIDE=t.VERTEX_BUFFER_STRIDE=t.MAX_CAPACITY=void 0;const r=n(534);t.MAX_CAPACITY=65536,t.VERTEX_BUFFER_STRIDE=16,t.INDEX_BUFFER_STRIDE=1,t.VERTICES_PER_QUAD=4,t.INDICES_PER_QUAD=6,t.QUAD_VERTEX_MEMORY_FOOTPRINT=t.VERTICES_PER_QUAD*t.VERTEX_BUFFER_STRIDE,t.QUAD_INDEX_MEMORY_FOOTPRINT=t.INDICES_PER_QUAD*t.INDEX_BUFFER_STRIDE;t.TextGeometry=class{constructor(e,n,i,o,a){this.scene=e,this.m_pickingDataArray=[],this.capacity=Math.min(a,t.MAX_CAPACITY),this.m_currentCapacity=Math.min(o,a),this.m_drawCount=0,this.m_updateOffset=0,this.m_vertexBuffer=new r.InterleavedBuffer(new Float32Array(this.m_currentCapacity*t.QUAD_VERTEX_MEMORY_FOOTPRINT),t.VERTEX_BUFFER_STRIDE),this.m_vertexBuffer.setUsage(r.DynamicDrawUsage),this.m_positionAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,0),this.m_uvAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,4),this.m_colorAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,8),this.m_bgColorAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,12),this.m_indexBuffer=new r.BufferAttribute(new Uint32Array(this.m_currentCapacity*t.QUAD_INDEX_MEMORY_FOOTPRINT),t.INDEX_BUFFER_STRIDE),this.m_indexBuffer.setUsage(r.DynamicDrawUsage),this.m_geometry=new r.BufferGeometry,this.m_geometry.setAttribute("position",this.m_positionAttribute),this.m_geometry.setAttribute("uv",this.m_uvAttribute),this.m_geometry.setAttribute("color",this.m_colorAttribute),this.m_geometry.setAttribute("bgColor",this.m_bgColorAttribute),this.m_geometry.setIndex(this.m_indexBuffer),this.m_mesh=new r.Mesh(this.m_geometry,n),this.m_bgMesh=new r.Mesh(this.m_geometry,i),this.m_mesh.renderOrder=Number.MAX_SAFE_INTEGER,this.m_bgMesh.renderOrder=Number.MAX_SAFE_INTEGER-1,this.m_mesh.frustumCulled=!1,this.m_bgMesh.frustumCulled=!1,this.scene.add(this.m_bgMesh,this.m_mesh)}get drawCount(){return this.m_drawCount}get mesh(){return this.m_mesh}get backgroundMesh(){return this.m_bgMesh}dispose(){this.scene.remove(this.m_bgMesh,this.m_mesh),this.m_geometry.dispose()}clear(){this.m_drawCount=0,this.m_updateOffset=0,this.m_pickingDataArray.length=0}update(){this.drawCount>this.m_updateOffset&&(this.m_vertexBuffer.needsUpdate=!0,this.m_vertexBuffer.updateRange.offset=this.m_updateOffset*t.QUAD_VERTEX_MEMORY_FOOTPRINT,this.m_vertexBuffer.updateRange.count=(this.m_drawCount-this.m_updateOffset)*t.QUAD_VERTEX_MEMORY_FOOTPRINT,this.m_indexBuffer.needsUpdate=!0,this.m_indexBuffer.updateRange.offset=this.m_updateOffset*t.QUAD_INDEX_MEMORY_FOOTPRINT,this.m_indexBuffer.updateRange.count=(this.m_drawCount-this.m_updateOffset)*t.QUAD_INDEX_MEMORY_FOOTPRINT),this.m_updateOffset=this.m_drawCount,this.m_geometry.setDrawRange(0,this.m_drawCount*t.INDICES_PER_QUAD)}add(e,n,r,i,o,a){if(this.m_drawCount>=this.capacity)return!1;if(this.m_drawCount>=this.m_currentCapacity){const e=Math.min(2*this.m_currentCapacity,this.capacity);this.resizeBuffers(e)}const s=this.m_drawCount*t.VERTICES_PER_QUAD,l=this.m_drawCount*t.INDICES_PER_QUAD;for(let c=0;c<t.VERTICES_PER_QUAD;++c){this.m_positionAttribute.setXYZW(s+c,n[c].x,n[c].y,n[c].z,(o?-1:1)*a.rotation);const t=o?(c+1)%2+2*Math.floor(c/2):c;this.m_uvAttribute.setXYZW(s+c,e.dynamicTextureCoordinates[t].x,e.dynamicTextureCoordinates[t].y,r,i),this.m_colorAttribute.setXYZW(s+c,a.color.r,a.color.g,a.color.b,a.opacity),this.m_bgColorAttribute.setXYZW(s+c,a.backgroundColor.r,a.backgroundColor.g,a.backgroundColor.b,a.backgroundOpacity)}return this.m_indexBuffer.setX(l,s),this.m_indexBuffer.setX(l+1,s+1),this.m_indexBuffer.setX(l+2,s+2),this.m_indexBuffer.setX(l+3,s+2),this.m_indexBuffer.setX(l+4,s+1),this.m_indexBuffer.setX(l+5,s+3),++this.m_drawCount,!0}addToBuffer(e,n,r,i,o,a,s,l){for(let c=0;c<t.VERTICES_PER_QUAD;++c){const u=n+t.VERTEX_BUFFER_STRIDE*c;e[u]=i[c].x,e[u+1]=i[c].y,e[u+2]=i[c].z,e[u+3]=(s?-1:1)*l.rotation;const h=s?(c+1)%2+2*Math.floor(c/2):c;e[u+4]=r.dynamicTextureCoordinates[h].x,e[u+5]=r.dynamicTextureCoordinates[h].y,e[u+6]=o,e[u+7]=a,e[u+8]=l.color.r,e[u+9]=l.color.g,e[u+10]=l.color.b,e[u+11]=l.opacity,e[u+12]=l.backgroundColor.r,e[u+13]=l.backgroundColor.g,e[u+14]=l.backgroundColor.b,e[u+15]=l.backgroundOpacity}}addTextBufferObject(e,n,r,i,o,a,s,l){if(this.m_drawCount+e.glyphs.length>=this.capacity)return!1;if(this.m_drawCount+e.glyphs.length>=this.m_currentCapacity){const e=Math.min(2*this.m_currentCapacity,this.capacity);this.resizeBuffers(e)}const c=null!==r&&void 0!==r?r:1,u=null!==i&&void 0!==i?i:0,h=Math.cos(u),d=Math.sin(u),p=void 0!==n?n.x:0,m=void 0!==n?n.y:0,f=e.buffer,g=f[3]<0?-1:1,v=void 0!==o?o.r:f[8],y=void 0!==o?o.g:f[9],_=void 0!==o?o.b:f[10],x=void 0!==a?a:f[11],b=void 0!==s?s.r:f[12],w=void 0!==s?s.g:f[13],S=void 0!==s?s.b:f[14],M=void 0!==l?l:f[15],E=this.m_drawCount*t.VERTICES_PER_QUAD;for(let T=0;T<e.glyphs.length;++T){const n=T*t.QUAD_VERTEX_MEMORY_FOOTPRINT,r=e.glyphs[T];if(!r.isInCache)return!1;const i=f[n+4]>f[n+t.VERTEX_BUFFER_STRIDE+4],o=f[n+6],a=f[n+7];for(let e=0;e<t.VERTICES_PER_QUAD;++e){const s=f[n+e*t.VERTEX_BUFFER_STRIDE],l=f[n+e*t.VERTEX_BUFFER_STRIDE+1];this.m_positionAttribute.setXYZW(E+T*t.VERTICES_PER_QUAD+e,s*c*h+l*c*-d+p,s*c*d+l*c*h+m,f[n+e*t.VERTEX_BUFFER_STRIDE+2]+0,f[n+e*t.VERTEX_BUFFER_STRIDE+3]+g*u);const C=i?(e+1)%2+2*Math.floor(e/2):e;this.m_uvAttribute.setXYZW(E+T*t.VERTICES_PER_QUAD+e,r.dynamicTextureCoordinates[C].x,r.dynamicTextureCoordinates[C].y,o,(a-o)/c+o),this.m_colorAttribute.setXYZW(E+T*t.VERTICES_PER_QUAD+e,v,y,_,x),this.m_bgColorAttribute.setXYZW(E+T*t.VERTICES_PER_QUAD+e,b,w,S,M)}this.m_indexBuffer.setX((this.m_drawCount+T)*t.INDICES_PER_QUAD,(this.m_drawCount+T)*t.VERTICES_PER_QUAD),this.m_indexBuffer.setX((this.m_drawCount+T)*t.INDICES_PER_QUAD+1,(this.m_drawCount+T)*t.VERTICES_PER_QUAD+1),this.m_indexBuffer.setX((this.m_drawCount+T)*t.INDICES_PER_QUAD+2,(this.m_drawCount+T)*t.VERTICES_PER_QUAD+2),this.m_indexBuffer.setX((this.m_drawCount+T)*t.INDICES_PER_QUAD+3,(this.m_drawCount+T)*t.VERTICES_PER_QUAD+2),this.m_indexBuffer.setX((this.m_drawCount+T)*t.INDICES_PER_QUAD+4,(this.m_drawCount+T)*t.VERTICES_PER_QUAD+1),this.m_indexBuffer.setX((this.m_drawCount+T)*t.INDICES_PER_QUAD+5,(this.m_drawCount+T)*t.VERTICES_PER_QUAD+3)}return this.m_drawCount+=e.glyphs.length,!0}addPickingData(e,t,n){return!(this.m_pickingDataArray.length>=this.m_currentCapacity)&&(this.m_pickingDataArray.push({start:Math.min(e,this.capacity),end:Math.min(t,this.capacity),data:n}),!0)}pick(e,n){for(const r of this.m_pickingDataArray){if(void 0===r)return;for(let i=r.start;i<r.end;++i){const o=i*t.VERTICES_PER_QUAD,a=Math.min(this.m_positionAttribute.getX(o+2),this.m_positionAttribute.getX(o+1));if(e.x<a)continue;const s=Math.max(this.m_positionAttribute.getX(o+2),this.m_positionAttribute.getX(o+1));if(e.x>s)continue;const l=Math.min(this.m_positionAttribute.getY(o+2),this.m_positionAttribute.getY(o+1));if(e.y<l)continue;const c=Math.max(this.m_positionAttribute.getY(o+2),this.m_positionAttribute.getY(o+1));if(!(e.y>c)){n(r.data);break}}}}updateMemoryUsage(e){const t=4*this.m_vertexBuffer.count+4*this.m_indexBuffer.count;e.heapSize+=t,e.gpuSize+=t}resizeBuffers(e){this.m_currentCapacity=e;const n=new Float32Array(e*t.QUAD_VERTEX_MEMORY_FOOTPRINT);n.set(this.m_vertexBuffer.array),this.m_vertexBuffer=new r.InterleavedBuffer(n,t.VERTEX_BUFFER_STRIDE),this.m_vertexBuffer.setUsage(r.DynamicDrawUsage),this.m_positionAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,0),this.m_uvAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,4),this.m_colorAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,8),this.m_bgColorAttribute=new r.InterleavedBufferAttribute(this.m_vertexBuffer,4,12);const i=new Uint32Array(e*t.QUAD_INDEX_MEMORY_FOOTPRINT);i.set(this.m_indexBuffer.array),this.m_indexBuffer=new r.BufferAttribute(i,t.INDEX_BUFFER_STRIDE),this.m_indexBuffer.setUsage(r.DynamicDrawUsage),this.m_geometry.dispose(),this.m_geometry=new r.BufferGeometry,this.m_geometry.setAttribute("position",this.m_positionAttribute),this.m_geometry.setAttribute("uv",this.m_uvAttribute),this.m_geometry.setAttribute("color",this.m_colorAttribute),this.m_geometry.setAttribute("bgColor",this.m_bgColorAttribute),this.m_geometry.setIndex(this.m_indexBuffer),this.m_pickingDataArray.length=this.m_currentCapacity,this.scene.remove(this.m_bgMesh,this.m_mesh),this.m_mesh=new r.Mesh(this.m_geometry,this.m_mesh.material),this.m_bgMesh=new r.Mesh(this.m_geometry,this.m_bgMesh.material),this.m_mesh.renderOrder=Number.MAX_SAFE_INTEGER,this.m_bgMesh.renderOrder=Number.MAX_SAFE_INTEGER-1,this.m_mesh.frustumCulled=!1,this.m_bgMesh.frustumCulled=!1,this.scene.add(this.m_bgMesh,this.m_mesh)}}},9499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdfTextMaterial=t.GlyphCopyMaterial=t.GlyphClearMaterial=void 0;const r=n(15739),i=n(534),o={sdf_attributes:"\n        attribute vec4 position;\n        attribute vec4 uv;\n        attribute vec4 color;\n        attribute vec4 bgColor;\n        ",sdf_varying:"\n        varying vec4 vColor;\n        varying float vWeight;\n        varying vec2 vUv;\n        varying float vRotation;\n        ",sdf_varying_computation:"\n        #if BG_TEXT\n        vColor = bgColor;\n        vWeight = uv.w;\n        #else\n        vColor = color;\n        vWeight = uv.z;\n        #endif\n        vUv = vec2(uv.xy);\n        vRotation = position.w;\n        ",sdf_frag_uniforms:"\n        uniform sampler2D sdfTexture;\n        uniform vec4 sdfParams;\n        ",sdf_sampling_functions:"\n        float median(float r, float g, float b) {\n            return max(min(r, g), min(max(r, g), b));\n        }\n\n        float getDistance(vec2 uvOffset) {\n            vec3 texSample = texture2D(sdfTexture, vUv.xy + uvOffset).rgb;\n            #if MSDF\n            return median(texSample.r, texSample.g, texSample.b);\n            #else\n            return texSample.r;\n            #endif\n        }\n\n        float getOpacity(vec2 uvOffset, float weight) {\n            vec2 uv = vUv + uvOffset;\n            vec2 rotatedUVs = abs(vec2(\n                cos(vRotation) * uv.x - sin(vRotation) * uv.y,\n                sin(vRotation) * uv.x + cos(vRotation) * uv.y));\n\n            float dx = dFdx(rotatedUVs.x) * sdfParams.x;\n            float dy = dFdy(rotatedUVs.y) * sdfParams.y;\n            float toPixels = sdfParams.w * inversesqrt( dx * dx + dy * dy );\n\n            float dist = getDistance(uvOffset) + min(weight, 0.5 - 1.0 / sdfParams.w) - 0.5;\n            return clamp(dist * toPixels + 0.5, 0.0, 1.0);\n        }\n        "};Object.assign(i.ShaderChunk,o);class a extends i.RawShaderMaterial{constructor(e){const t=!0===(null===e||void 0===e?void 0:e.rendererCapabilities.isWebGL2),n=e?Object.assign(Object.assign({},e),{glslVersion:t?i.GLSL3:i.GLSL1,vertexShader:t&&e.vertexShader?r.convertVertexShaderToWebGL2(e.vertexShader):e.vertexShader,fragmentShader:t&&e.fragmentShader?r.convertFragmentShaderToWebGL2(e.fragmentShader):e.fragmentShader}):void 0;n&&delete n.rendererCapabilities,super(n)}}t.GlyphClearMaterial=class extends a{constructor(e){super(e?{name:"GlyphClearMaterial",vertexShader:"\n    attribute vec2 position;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    void main() {\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xy, 0.0, 1.0);\n    }",fragmentShader:"\n    precision highp float;\n    precision highp int;\n\n    void main() {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }",uniforms:{},depthTest:!1,depthWrite:!1,rendererCapabilities:e.rendererCapabilities}:void 0)}};t.GlyphCopyMaterial=class extends a{constructor(e){super(e?{name:"GlyphCopyMaterial",vertexShader:"\n    attribute vec3 position;\n    attribute vec2 uv;\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    varying vec3 vUv;\n\n    void main() {\n        vUv = vec3(uv.xy, position.z);\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xy, 0.0, 1.0);\n    }",fragmentShader:"\n    precision highp float;\n    precision highp int;\n\n    uniform float pageOffset;\n    uniform sampler2D page0;\n    uniform sampler2D page1;\n    uniform sampler2D page2;\n    uniform sampler2D page3;\n    uniform sampler2D page4;\n    uniform sampler2D page5;\n    uniform sampler2D page6;\n    uniform sampler2D page7;\n\n    varying vec3 vUv;\n\n    void main() {\n        vec4 texSample = vec4(0.0);\n        if (vUv.z < pageOffset || vUv.z > (pageOffset + 7.0)) discard;\n        else if (vUv.z < pageOffset + 1.0) texSample = texture2D(page0, vUv.xy);\n        else if (vUv.z < pageOffset + 2.0) texSample = texture2D(page1, vUv.xy);\n        else if (vUv.z < pageOffset + 3.0) texSample = texture2D(page2, vUv.xy);\n        else if (vUv.z < pageOffset + 4.0) texSample = texture2D(page3, vUv.xy);\n        else if (vUv.z < pageOffset + 5.0) texSample = texture2D(page4, vUv.xy);\n        else if (vUv.z < pageOffset + 6.0) texSample = texture2D(page5, vUv.xy);\n        else if (vUv.z < pageOffset + 7.0) texSample = texture2D(page6, vUv.xy);\n        else texSample = texture2D(page7, vUv.xy);\n\n        gl_FragColor = texSample;\n    }",uniforms:{pageOffset:new i.Uniform(0),page0:new i.Uniform(i.Texture.DEFAULT_IMAGE),page1:new i.Uniform(i.Texture.DEFAULT_IMAGE),page2:new i.Uniform(i.Texture.DEFAULT_IMAGE),page3:new i.Uniform(i.Texture.DEFAULT_IMAGE),page4:new i.Uniform(i.Texture.DEFAULT_IMAGE),page5:new i.Uniform(i.Texture.DEFAULT_IMAGE),page6:new i.Uniform(i.Texture.DEFAULT_IMAGE),page7:new i.Uniform(i.Texture.DEFAULT_IMAGE)},depthTest:!1,depthWrite:!1,rendererCapabilities:e.rendererCapabilities}:void 0)}};t.SdfTextMaterial=class extends a{constructor(e){super(e?{name:"SdfTextMaterial",vertexShader:void 0!==e.vertexSource?e.vertexSource:"\n    #include <sdf_attributes>\n    #include <sdf_varying>\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n\n    void main() {\n        #include <sdf_varying_computation>\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position.xyz, 1.0);\n    }",fragmentShader:void 0!==e.fragmentSource?e.fragmentSource:"\n    precision highp float;\n    precision highp int;\n\n    #include <sdf_varying>\n    #include <sdf_frag_uniforms>\n    #include <sdf_sampling_functions>\n\n    void main() {\n        vec4 color = vColor;\n        color.a *= getOpacity(vec2(0.0), vWeight);\n        if (color.a < 0.05) {\n            discard;\n        }\n        gl_FragColor = color;\n    }",uniforms:{sdfTexture:new i.Uniform(e.texture),sdfParams:new i.Uniform(new i.Vector4(e.textureSize.x,e.textureSize.y,e.size,e.distanceRange))},defines:{MSDF:e.isMsdf?1:0,BG_TEXT:e.isBackground?1:0},depthTest:!0,depthWrite:!1,side:i.DoubleSide,transparent:!0,rendererCapabilities:e.rendererCapabilities}:void 0),this.extensions.derivatives=!0}}},80549:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePlacementAndAlignment=t.TextLayoutStyle=t.TextRenderStyle=t.DefaultTextStyle=t.vPlacementFromAlignment=t.hPlacementFromAlignment=t.vAlignFromPlacement=t.hAlignFromPlacement=t.WrappingMode=t.HorizontalPlacement=t.VerticalPlacement=t.HorizontalAlignment=t.VerticalAlignment=t.FontVariant=t.FontStyle=t.FontUnit=void 0;const r=n(534);var i,o,a,s,l,c,u;function h(e){return e}function d(e){return e}!function(e){e[e.Em=0]="Em",e[e.Pixel=1]="Pixel",e[e.Point=2]="Point",e[e.Percent=3]="Percent"}(i=t.FontUnit||(t.FontUnit={})),function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.BoldItalic=3]="BoldItalic"}(o=t.FontStyle||(t.FontStyle={})),function(e){e[e.Regular=0]="Regular",e[e.AllCaps=1]="AllCaps",e[e.SmallCaps=2]="SmallCaps"}(a=t.FontVariant||(t.FontVariant={})),function(e){e[e.Above=0]="Above",e[e.Center=-.5]="Center",e[e.Below=-1]="Below"}(s=t.VerticalAlignment||(t.VerticalAlignment={})),function(e){e[e.Left=0]="Left",e[e.Center=-.5]="Center",e[e.Right=-1]="Right"}(l=t.HorizontalAlignment||(t.HorizontalAlignment={})),function(e){e[e.Top=0]="Top",e[e.Center=-.5]="Center",e[e.Bottom=-1]="Bottom"}(t.VerticalPlacement||(t.VerticalPlacement={})),function(e){e[e.Left=-1]="Left",e[e.Center=-.5]="Center",e[e.Right=0]="Right"}(t.HorizontalPlacement||(t.HorizontalPlacement={})),function(e){e[e.None=0]="None",e[e.Character=1]="Character",e[e.Word=2]="Word"}(c=t.WrappingMode||(t.WrappingMode={})),t.hAlignFromPlacement=h,t.vAlignFromPlacement=d,t.hPlacementFromAlignment=function(e){return e},t.vPlacementFromAlignment=function(e){return e},function(e){e.DEFAULT_FONT_NAME="",e.DEFAULT_FONT_SIZE={unit:Object.freeze(i.Pixel),size:Object.freeze(16),backgroundSize:Object.freeze(0)},e.DEFAULT_FONT_STYLE=o.Regular,e.DEFAULT_FONT_VARIANT=a.Regular,e.DEFAULT_ROTATION=0,e.DEFAULT_COLOR=new r.Color(0),e.DEFAULT_OPACITY=1,e.DEFAULT_BACKGROUND_COLOR=new r.Color(0),e.DEFAULT_BACKGROUND_OPACITY=0,e.DEFAULT_TRACKING=0,e.DEFAULT_LEADING=0,e.DEFAULT_MAX_LINES=1/0,e.DEFAULT_LINE_WIDTH=1/0,e.DEFAULT_CANVAS_ROTATION=0,e.DEFAULT_LINE_ROTATION=0,e.DEFAULT_WRAPPING_MODE=c.Word,e.DEFAULT_VERTICAL_ALIGNMENT=s.Above,e.DEFAULT_HORIZONTAL_ALIGNMENT=l.Left,e.DEFAULT_PLACEMENTS=[]}(u=t.DefaultTextStyle||(t.DefaultTextStyle={}));class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.m_params={fontName:void 0!==e.fontName?e.fontName:u.DEFAULT_FONT_NAME,fontSize:void 0!==e.fontSize?Object.assign({},e.fontSize):{unit:u.DEFAULT_FONT_SIZE.unit,size:u.DEFAULT_FONT_SIZE.size,backgroundSize:u.DEFAULT_FONT_SIZE.backgroundSize},fontStyle:void 0!==e.fontStyle?e.fontStyle:u.DEFAULT_FONT_STYLE,fontVariant:void 0!==e.fontVariant?e.fontVariant:u.DEFAULT_FONT_VARIANT,rotation:void 0!==e.rotation?e.rotation:u.DEFAULT_ROTATION,color:void 0!==e.color?e.color.clone():u.DEFAULT_COLOR.clone(),opacity:void 0!==e.opacity?e.opacity:u.DEFAULT_OPACITY,backgroundColor:void 0!==e.backgroundColor?e.backgroundColor.clone():u.DEFAULT_BACKGROUND_COLOR.clone(),backgroundOpacity:void 0!==e.backgroundOpacity?e.backgroundOpacity:u.DEFAULT_BACKGROUND_OPACITY}}get params(){return this.m_params}set params(e){this.m_params=Object.assign(Object.assign({},this.m_params),e)}get fontName(){return this.m_params.fontName}set fontName(e){this.m_params.fontName=e}get fontSize(){return this.m_params.fontSize}set fontSize(e){this.m_params.fontSize=Object.assign({},e)}get fontStyle(){return this.m_params.fontStyle}set fontStyle(e){this.m_params.fontStyle=e}get fontVariant(){return this.m_params.fontVariant}set fontVariant(e){this.m_params.fontVariant=e}get rotation(){return this.m_params.rotation}set rotation(e){this.m_params.rotation=e}get color(){return this.m_params.color}set color(e){this.m_params.color.copy(e)}get backgroundColor(){return this.m_params.backgroundColor}set backgroundColor(e){this.m_params.backgroundColor.copy(e)}get opacity(){return this.m_params.opacity}set opacity(e){this.m_params.opacity=e}get backgroundOpacity(){return this.m_params.backgroundOpacity}set backgroundOpacity(e){this.m_params.backgroundOpacity=e}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p(Object.assign(Object.assign({},this.m_params),e))}copy(e){return this.m_params.fontName=e.fontName,this.m_params.fontSize=Object.assign({},e.fontSize),this.m_params.fontStyle=e.fontStyle,this.m_params.fontVariant=e.fontVariant,this.m_params.rotation=e.rotation,this.m_params.color.copy(e.color),this.m_params.backgroundColor.copy(e.backgroundColor),this.m_params.opacity=e.opacity,this.m_params.backgroundOpacity=e.backgroundOpacity,this}}t.TextRenderStyle=p;class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{horizontalAlignment:t,verticalAlignment:n,placements:r}=f(e.horizontalAlignment,e.verticalAlignment,e.placements);this.m_params={tracking:void 0!==e.tracking?e.tracking:u.DEFAULT_TRACKING,leading:void 0!==e.leading?e.leading:u.DEFAULT_LEADING,maxLines:void 0!==e.maxLines?e.maxLines:u.DEFAULT_MAX_LINES,lineWidth:void 0!==e.lineWidth?e.lineWidth:u.DEFAULT_LINE_WIDTH,canvasRotation:void 0!==e.canvasRotation?e.canvasRotation:u.DEFAULT_CANVAS_ROTATION,lineRotation:void 0!==e.lineRotation?e.lineRotation:u.DEFAULT_LINE_ROTATION,wrappingMode:void 0!==e.wrappingMode?e.wrappingMode:u.DEFAULT_WRAPPING_MODE,verticalAlignment:n,horizontalAlignment:t,placements:r}}get params(){return this.m_params}set params(e){this.m_params=Object.assign(Object.assign({},this.m_params),e)}get tracking(){return this.m_params.tracking}set tracking(e){this.m_params.tracking=e}get leading(){return this.m_params.leading}set leading(e){this.m_params.leading=e}get maxLines(){return this.m_params.maxLines}set maxLines(e){this.m_params.maxLines=e}get lineWidth(){return this.m_params.lineWidth}set lineWidth(e){this.m_params.lineWidth=e}get canvasRotation(){return this.m_params.canvasRotation}set canvasRotation(e){this.m_params.canvasRotation=e}get lineRotation(){return this.m_params.lineRotation}set lineRotation(e){this.m_params.lineRotation=e}get wrappingMode(){return this.m_params.wrappingMode}set wrappingMode(e){this.m_params.wrappingMode=e}get verticalAlignment(){return this.m_params.verticalAlignment}set verticalAlignment(e){this.m_params.verticalAlignment=e}get horizontalAlignment(){return this.m_params.horizontalAlignment}set horizontalAlignment(e){this.m_params.horizontalAlignment=e}get placements(){return this.m_params.placements}set placements(e){const{horizontalAlignment:t,verticalAlignment:n,placements:r}=f(this.horizontalAlignment,this.verticalAlignment,e);this.m_params.horizontalAlignment=t,this.m_params.verticalAlignment=n,this.m_params.placements=r}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new m(Object.assign(Object.assign({},this.m_params),e))}copy(e){return this.params=Object.assign({},e.params),this}}function f(e,t,n){var r;const i=null!==(r=null===n||void 0===n?void 0:n.map((e=>Object.assign({},e))))&&void 0!==r?r:u.DEFAULT_PLACEMENTS.map((e=>Object.assign({},e)));return{horizontalAlignment:i.length>0?i[0].h:null!==e&&void 0!==e?e:u.DEFAULT_HORIZONTAL_ALIGNMENT,verticalAlignment:i.length>0?i[0].v:null!==t&&void 0!==t?t:u.DEFAULT_VERTICAL_ALIGNMENT,placements:i}}t.TextLayoutStyle=m,t.resolvePlacementAndAlignment=f},95529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineTypesetter=void 0;const r=n(534),i=n(30903),o=n(80549),a=n(76729),s=n(67747);t.LineTypesetter=class{constructor(){this.m_tempTransform=new r.Matrix3,this.m_tempCorners=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3],this.m_tempLineDirection=s.UnicodeUtils.Direction.LTR,this.m_tempRunDirection=s.UnicodeUtils.Direction.LTR,this.m_tempPixelSize=1,this.m_tempPixelBgSize=1,this.m_tempScale=1,this.m_tempSmallCaps=!1}arrangeGlyphs(e){this.m_currentParams=e,this.m_tempLineDirection=a.TypesettingUtils.getDirection(this.m_currentParams.glyphs,0),this.m_tempRunDirection=this.m_tempLineDirection,this.m_tempPixelSize=a.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.size,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_tempScale=this.m_tempPixelSize/this.m_currentParams.fontCatalog.size,this.m_tempPixelBgSize=Math.min(a.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.backgroundSize,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_currentParams.fontCatalog.distanceRange*this.m_tempScale),this.m_tempSmallCaps=void 0!==this.m_currentParams.smallCapsArray,this.m_currentParams.position.y+=this.m_currentParams.textLayoutStyle.verticalAlignment*this.m_currentParams.glyphs[0].font.metrics.capHeight*this.m_tempScale;const t=void 0!==this.m_currentParams.globalBounds&&void 0===this.m_currentParams.vertexBuffer,n=this.m_currentParams.position.x,r=this.m_currentParams.glyphs[0].font.metrics.lineHeight+this.m_currentParams.textLayoutStyle.leading;let i=0,l=0,c=0,u=0,h=0,d=0,p=0,m=0,f=!1;for(let g=0;g<this.m_currentParams.glyphs.length&&!(m>this.m_currentParams.textLayoutStyle.maxLines-1);++g){const e=this.m_currentParams.glyphs[g];if(!e.isInCache&&!t)return!1;const v=s.UnicodeUtils.isNewLine(e.codePoint),y=s.UnicodeUtils.isWhiteSpace(e.codePoint);if(f||e.direction!==-this.m_tempLineDirection||(f=!0),s.UnicodeUtils.isPrintable(e.codePoint)&&(h+=(e.advanceX+this.m_currentParams.textLayoutStyle.tracking)*this.m_tempScale*(this.m_tempSmallCaps?a.TypesettingUtils.getSmallCapsScale(this.m_currentParams.glyphs,this.m_currentParams.smallCapsArray,g,this.m_currentParams.textRenderStyle.fontVariant):1)),g===i&&(u=h,d=h,p=h),v||this.m_currentParams.textLayoutStyle.wrappingMode===o.WrappingMode.Character&&h>this.m_currentParams.textLayoutStyle.lineWidth||this.m_currentParams.textLayoutStyle.wrappingMode===o.WrappingMode.Word&&h>this.m_currentParams.textLayoutStyle.lineWidth&&p!==u){if(this.m_currentParams.textLayoutStyle.wrappingMode!==o.WrappingMode.None){let e=l,t=d;this.m_currentParams.textLayoutStyle.wrappingMode===o.WrappingMode.Word&&p!==u&&(e=c,t=p),h=t,g=Math.min(v?i===g?e:g:e,this.m_currentParams.glyphs.length-1)}const e=this.m_tempLineDirection===s.UnicodeUtils.Direction.RTL&&f?1+this.m_currentParams.textLayoutStyle.horizontalAlignment:this.m_currentParams.textLayoutStyle.horizontalAlignment;if(this.m_currentParams.position.x=this.m_currentParams.position.x+h*e,!this.placeLine(i,g,this.m_tempLineDirection,f))return!1;for(this.m_currentParams.position.y-=r*this.m_tempScale,this.m_currentParams.position.x=n;g!==i&&g+1<this.m_currentParams.glyphs.length&&s.UnicodeUtils.isWhiteSpace(this.m_currentParams.glyphs[g+1].codePoint);)++g;if(i=g+1,i===this.m_currentParams.glyphs.length)break;v&&(this.m_tempLineDirection=a.TypesettingUtils.getDirection(this.m_currentParams.glyphs,i),this.m_tempRunDirection=this.m_tempLineDirection),u=0,h=0,l=i,d=0,c=i,p=0,f=!1,m++}else this.m_currentParams.textLayoutStyle.wrappingMode===o.WrappingMode.None||y||(l=g,d=h,this.m_currentParams.textLayoutStyle.wrappingMode===o.WrappingMode.Word&&g+1<this.m_currentParams.glyphs.length&&(s.UnicodeUtils.isWhiteSpace(this.m_currentParams.glyphs[g+1].codePoint)||s.UnicodeUtils.isNewLine(this.m_currentParams.glyphs[g+1].codePoint))&&(c=g,p=h))}if(m<=this.m_currentParams.textLayoutStyle.maxLines-1&&i<=this.m_currentParams.glyphs.length-1){const e=this.m_tempLineDirection===s.UnicodeUtils.Direction.RTL&&f?1+this.m_currentParams.textLayoutStyle.horizontalAlignment:this.m_currentParams.textLayoutStyle.horizontalAlignment;if(this.m_currentParams.position.setX(this.m_currentParams.position.x+h*e),!this.placeLine(i,this.m_currentParams.glyphs.length-1,this.m_tempLineDirection,f))return!1}return!0}placeLine(e,t,n,r){if(!r)return this.placeRun(e,t,n);const i=this.m_currentParams.glyphs,o=this.m_currentParams.smallCapsArray,l=this.m_currentParams.textRenderStyle,c=this.m_currentParams.textLayoutStyle,u=this.m_currentParams.position,h=n===s.UnicodeUtils.Direction.RTL,d=u.x;let p=0,m=e;for(let f=e;f<=t;++f){const e=i[f];if(e.direction===-this.m_tempRunDirection){if(h&&(u.x=d+p),!this.placeRun(m,f-1,this.m_tempRunDirection))return!1;h||(u.x=d+p),m=f,this.m_tempRunDirection*=-1}else if(e.direction===s.UnicodeUtils.Direction.Neutral&&this.m_tempRunDirection===-n){let e=f;for(;e+1<i.length&&1!==Math.abs(i[e].direction);)++e;if(i[e].direction!==this.m_tempRunDirection){if(h&&(u.x=d+p),!this.placeRun(m,f-1,this.m_tempRunDirection))return!1;h||(u.x=d+p),m=f,this.m_tempRunDirection*=-1}}p+=(e.advanceX+c.tracking)*this.m_tempScale*(this.m_tempSmallCaps?a.TypesettingUtils.getSmallCapsScale(i,o,f,l.fontVariant):1)*n}if(m<=t){if(h&&(u.x=d+p),!this.placeRun(m,t,this.m_tempRunDirection))return!1;h||(u.x=d+p)}return!0}placeRun(e,t,n){const r=this.m_currentParams.glyphs,l=this.m_currentParams.smallCapsArray,c=this.m_currentParams.fontCatalog,u=this.m_currentParams.textRenderStyle,h=this.m_currentParams.textLayoutStyle,d=this.m_currentParams.position,p=this.m_currentParams.geometry,m=this.m_currentParams.globalBounds,f=this.m_currentParams.individualBounds,g=this.m_currentParams.vertexBuffer,v=n===s.UnicodeUtils.Direction.LTR?e:t,y=n===s.UnicodeUtils.Direction.LTR?t:e;for(let _=v;n===s.UnicodeUtils.Direction.RTL?_>=y:_<=y;_+=n){const v=r[_];if(!s.UnicodeUtils.isPrintable(v.codePoint))continue;if(e!==t&&0!==_&&n===s.UnicodeUtils.Direction.RTL&&v.direction===s.UnicodeUtils.Direction.Weak){let t=_,n=r[t-1];for(;t!==e&&(n.direction===s.UnicodeUtils.Direction.Weak||n.direction===s.UnicodeUtils.Direction.Neutral&&!s.UnicodeUtils.isWhiteSpace(n.codePoint));)--t,n=r[t-1];this.placeRun(Math.max(t,e),_,s.UnicodeUtils.Direction.LTR),_=t;continue}const y=v.font,x=y.metrics,b=u.fontStyle,w=b===o.FontStyle.Bold&&void 0===y.bold||b===o.FontStyle.BoldItalic&&void 0===y.bold&&void 0===y.boldItalic,S=b===o.FontStyle.Italic&&void 0===y.italic||b===o.FontStyle.BoldItalic&&void 0===y.italic&&void 0===y.boldItalic,M=!!this.m_tempSmallCaps&&(l[_]&&u.fontVariant===o.FontVariant.SmallCaps),E=M?x.xHeight/x.capHeight:1,T=this.m_tempScale*E,C=((w?.02:0)+(M?.01:0))*(c.size/c.distanceRange),A=.5*this.m_tempPixelBgSize/(c.distanceRange*Math.max(T,1)),P=s.UnicodeUtils.isRtlMirrored(v.codePoint)&&n===s.UnicodeUtils.Direction.RTL,O=x.lineHeight-x.base-.5*x.distanceRange;a.TypesettingUtils.computeGlyphTransform(this.m_tempTransform,d,T,h.canvasRotation,u.rotation);for(let e=0;e<4;++e){const t=v.positions[e],n=S&&e>1?a.TypesettingUtils.OBLIQUE_OFFSET*x.size:0;this.m_tempCorners[e].set(t.x+n,t.y-O,t.z),this.m_tempCorners[e].applyMatrix3(this.m_tempTransform)}if(void 0===m&&void 0===g){if(!p.add(v,this.m_tempCorners,C,C+A,P,u))return!1}else void 0!==m&&a.TypesettingUtils.updateBounds(this.m_tempCorners,m,f),void 0!==g&&p.addToBuffer(g,_*i.QUAD_VERTEX_MEMORY_FOOTPRINT,v,this.m_tempCorners,C,C+A,P,u);d.set(d.x+(v.advanceX+h.tracking)*T*Math.cos(h.lineRotation),d.y+(v.advanceX+h.tracking)*T*Math.sin(h.lineRotation),d.z)}return!0}}},64584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathTypesetter=void 0;const r=n(534),i=n(30903),o=n(80549),a=n(76729),s=n(67747);t.PathTypesetter=class{constructor(){this.m_tempTransform=new r.Matrix3,this.m_tempCorners=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3],this.m_tempLineDirection=s.UnicodeUtils.Direction.LTR,this.m_tempRunDirection=s.UnicodeUtils.Direction.LTR,this.m_tempPixelSize=1,this.m_tempPixelBgSize=1,this.m_tempScale=1,this.m_tempSmallCaps=!1,this.m_tempPathPosition=new r.Vector3,this.m_tempPathLength=0,this.m_tempPathOffset=0}arrangeGlyphs(e){this.m_currentParams=e,this.m_tempLineDirection=a.TypesettingUtils.getDirection(this.m_currentParams.glyphs,0),this.m_tempRunDirection=this.m_tempLineDirection,this.m_tempPixelSize=a.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.size,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_tempScale=this.m_tempPixelSize/this.m_currentParams.fontCatalog.size,this.m_tempPixelBgSize=Math.min(a.TypesettingUtils.getPixelSize(this.m_currentParams.textRenderStyle.fontSize.backgroundSize,this.m_currentParams.textRenderStyle.fontSize.unit,this.m_currentParams.fontCatalog.size),this.m_currentParams.fontCatalog.distanceRange*this.m_tempScale),this.m_tempSmallCaps=void 0!==this.m_currentParams.smallCapsArray,this.m_tempPathLength=this.m_currentParams.path.getLength(),this.m_tempPathOffset=0;const t=void 0!==this.m_currentParams.globalBounds&&void 0===this.m_currentParams.vertexBuffer;let n=!1,r=0;for(let i=0;i<this.m_currentParams.glyphs.length;++i){const e=this.m_currentParams.glyphs[i];if(!e.isInCache&&!t)return!1;s.UnicodeUtils.isPrintable(e.codePoint)&&(n||e.direction!==-this.m_tempLineDirection||(n=!0),r+=(e.advanceX+this.m_currentParams.textLayoutStyle.tracking)*this.m_tempScale*(this.m_tempSmallCaps?a.TypesettingUtils.getSmallCapsScale(this.m_currentParams.glyphs,this.m_currentParams.smallCapsArray,i,this.m_currentParams.textRenderStyle.fontVariant):1))}return this.m_tempPathOffset=Math.min(Math.max(-this.m_currentParams.textLayoutStyle.horizontalAlignment+this.m_currentParams.textLayoutStyle.horizontalAlignment*r/this.m_tempPathLength,0),1),this.placeLine(this.m_tempLineDirection,n)}placeLine(e,t){if(!t)return this.placeRun(0,this.m_currentParams.glyphs.length-1,e);const n=this.m_currentParams.glyphs;let r=0;for(let i=r;i<n.length;++i){const t=n[i];if(t.direction===-this.m_tempRunDirection){if(!this.placeRun(r,i-1,this.m_tempRunDirection))return!1;r=i,this.m_tempRunDirection*=-1}else if(t.direction===s.UnicodeUtils.Direction.Neutral&&this.m_tempRunDirection===-e){let e=i;for(;e+1<n.length&&1!==Math.abs(n[e].direction);)++e;if(n[e].direction!==this.m_tempRunDirection){if(!this.placeRun(r,i-1,this.m_tempRunDirection))return!1;r=i,this.m_tempRunDirection*=-1}}}return!(r<n.length&&!this.placeRun(r,n.length-1,this.m_tempRunDirection))}placeRun(e,t,n){const l=this.m_currentParams.glyphs,c=this.m_currentParams.smallCapsArray,u=this.m_currentParams.fontCatalog,h=this.m_currentParams.textRenderStyle,d=this.m_currentParams.textLayoutStyle,p=this.m_currentParams.position,m=this.m_currentParams.geometry,f=this.m_currentParams.globalBounds,g=this.m_currentParams.individualBounds,v=this.m_currentParams.vertexBuffer,y=this.m_currentParams.path,_=h.rotation,x=d.verticalAlignment*l[0].font.metrics.capHeight*this.m_tempScale,b=n===s.UnicodeUtils.Direction.LTR?e:t,w=n===s.UnicodeUtils.Direction.LTR?t:e;for(let S=b;n===s.UnicodeUtils.Direction.RTL?S>=w:S<=w;S+=n){const b=l[S];if(!s.UnicodeUtils.isPrintable(b.codePoint))continue;if(e!==t&&0!==S&&n===s.UnicodeUtils.Direction.RTL&&b.direction===s.UnicodeUtils.Direction.Weak){let t=S,n=l[t-1];for(;t!==e&&(n.direction===s.UnicodeUtils.Direction.Weak||n.direction===s.UnicodeUtils.Direction.Neutral&&!s.UnicodeUtils.isWhiteSpace(n.codePoint));)--t,n=l[t-1];this.placeRun(Math.max(t,e),S,s.UnicodeUtils.Direction.LTR),S=t;continue}const w=b.font,M=w.metrics,E=h.fontStyle,T=E===o.FontStyle.Bold&&void 0===w.bold||E===o.FontStyle.BoldItalic&&void 0===w.bold&&void 0===w.boldItalic,C=E===o.FontStyle.Italic&&void 0===w.italic||E===o.FontStyle.BoldItalic&&void 0===w.italic&&void 0===w.boldItalic,A=!!this.m_tempSmallCaps&&(c[S]&&h.fontVariant===o.FontVariant.SmallCaps),P=A?M.xHeight/M.capHeight:1,O=this.m_tempScale*P,R=((T?.02:0)+(A?.01:0))*(u.size/u.distanceRange),L=.5*this.m_tempPixelBgSize/(u.distanceRange*Math.max(O,1)),D=s.UnicodeUtils.isRtlMirrored(b.codePoint)&&n===s.UnicodeUtils.Direction.RTL,k=M.lineHeight-M.base-.5*M.distanceRange,I=y.getPoint(this.m_tempPathOffset);if(null===I)return this.m_currentParams.pathOverflow;const F=y.getTangent(this.m_tempPathOffset),N=new r.Vector2(-F.y,F.x).multiplyScalar(x),z=Math.atan2(F.y,F.x);this.m_tempPathPosition.set(N.x+I.x,N.y+I.y,p.z),h.rotation=_+z,a.TypesettingUtils.computeGlyphTransform(this.m_tempTransform,this.m_tempPathPosition,O,0,h.rotation);for(let e=0;e<4;++e){const t=b.positions[e],n=C&&e>1?a.TypesettingUtils.OBLIQUE_OFFSET*M.size:0;this.m_tempCorners[e].set(t.x+n,t.y-k,t.z),this.m_tempCorners[e].applyMatrix3(this.m_tempTransform),this.m_tempCorners[e].x-=p.x,this.m_tempCorners[e].y-=p.y}if(void 0===f&&void 0===v){if(!m.add(b,this.m_tempCorners,R,R+L,D,h))return!1}else void 0!==f&&a.TypesettingUtils.updateBounds(this.m_tempCorners,f,g),void 0!==v&&m.addToBuffer(v,S*i.QUAD_VERTEX_MEMORY_FOOTPRINT,b,this.m_tempCorners,R,R+L,D,h);h.rotation=_,this.m_tempPathOffset+=(b.advanceX+d.tracking)*O/this.m_tempPathLength}return!0}}},59616:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ContextualArabicConverter=void 0,function(e){e[e.Initial=0]="Initial",e[e.Medial=1]="Medial",e[e.Final=2]="Final"}(n||(n={})),function(e){e[e.Isolated=0]="Isolated",e[e.Connected=1]="Connected"}(r||(r={}));class i{constructor(){this.m_singleCharactersMap=new Map,this.m_combinedCharactersMap=new Map,this.m_singleCharactersMap.set(1569,[void 0,void 0,void 0]),this.m_singleCharactersMap.set(1570,[void 0,void 0,65154]),this.m_singleCharactersMap.set(1571,[void 0,void 0,65156]),this.m_singleCharactersMap.set(1572,[void 0,void 0,65158]),this.m_singleCharactersMap.set(1573,[void 0,void 0,65160]),this.m_singleCharactersMap.set(1574,[65163,65164,65162]),this.m_singleCharactersMap.set(1575,[void 0,void 0,65166]),this.m_singleCharactersMap.set(1576,[65169,65170,65168]),this.m_singleCharactersMap.set(1577,[void 0,void 0,65172]),this.m_singleCharactersMap.set(1578,[65175,65176,65174]),this.m_singleCharactersMap.set(1579,[65179,65180,65178]),this.m_singleCharactersMap.set(1580,[65183,65184,65182]),this.m_singleCharactersMap.set(1581,[65187,65188,65186]),this.m_singleCharactersMap.set(1582,[65191,65192,65190]),this.m_singleCharactersMap.set(1583,[void 0,void 0,65194]),this.m_singleCharactersMap.set(1584,[void 0,void 0,65196]),this.m_singleCharactersMap.set(1585,[void 0,void 0,65198]),this.m_singleCharactersMap.set(1586,[void 0,void 0,65200]),this.m_singleCharactersMap.set(1587,[65203,65204,65202]),this.m_singleCharactersMap.set(1588,[65207,65208,65206]),this.m_singleCharactersMap.set(1589,[65211,65212,65210]),this.m_singleCharactersMap.set(1590,[65215,65216,65214]),this.m_singleCharactersMap.set(1591,[65219,65220,65218]),this.m_singleCharactersMap.set(1592,[65223,65224,65222]),this.m_singleCharactersMap.set(1593,[65227,65228,65226]),this.m_singleCharactersMap.set(1594,[65231,65232,65230]),this.m_singleCharactersMap.set(1600,[1600,1600,1600]),this.m_singleCharactersMap.set(1601,[65235,65236,65234]),this.m_singleCharactersMap.set(1602,[65239,65240,65238]),this.m_singleCharactersMap.set(1603,[65243,65244,65242]),this.m_singleCharactersMap.set(1604,[65247,65248,65246]),this.m_singleCharactersMap.set(1605,[65251,65252,65250]),this.m_singleCharactersMap.set(1606,[65255,65256,65254]),this.m_singleCharactersMap.set(1607,[65259,65260,65258]),this.m_singleCharactersMap.set(1608,[void 0,void 0,65262]),this.m_singleCharactersMap.set(1609,[void 0,void 0,65264]),this.m_singleCharactersMap.set(1610,[65267,65268,65266]),this.m_singleCharactersMap.set(1662,[64344,64345,64343]),this.m_singleCharactersMap.set(1740,[64510,64511,64509]),this.m_singleCharactersMap.set(1670,[64380,64381,64379]),this.m_singleCharactersMap.set(1705,[64400,64401,64399]),this.m_singleCharactersMap.set(1711,[64404,64405,64403]),this.m_singleCharactersMap.set(1688,[void 0,void 0,64395]),this.m_combinedCharactersMap.set(1604,new Map),this.m_combinedCharactersMap.get(1604).set(1570,[65269,65270]),this.m_combinedCharactersMap.get(1604).set(1571,[65271,65272]),this.m_combinedCharactersMap.get(1604).set(1573,[65273,65274]),this.m_combinedCharactersMap.get(1604).set(1575,[65275,65276]),this.m_neutralCharacters=[1552,1554,1555,1556,1557,1611,1612,1613,1614,1615,1616,1617,1618,1619,1620,1621,1622,1623,1624,1648,1750,1751,1752,1753,1754,1755,1756,1759,1760,1761,1762,1763,1764,1767,1768,1770,1771,1772,1773]}static get instance(){return void 0===this.m_instance&&(this.m_instance=new i),this.m_instance}convert(e){let t="";for(let i=0;i<e.length;++i){const o=e.charCodeAt(i);if(this.isArabicCharacter(o)){let a=i-1;for(;a>=0&&this.isNeutral(e.charCodeAt(a));--a);let s=a>=0?e.charCodeAt(a):void 0;if(void 0!==s){const e=this.getCharacterMap(s);(void 0===e||void 0===e[n.Initial]&&void 0===e[n.Medial])&&(s=void 0)}let l=i+1;for(;l<e.length&&this.isNeutral(e.charCodeAt(l));++l);let c=l<e.length?e.charCodeAt(l):void 0;if(void 0!==c){const e=this.getCharacterMap(c);(void 0===e||void 0===e[n.Medial]&&void 0===e[n.Final])&&(c=void 0)}if(1604===o&&void 0!==c&&(1570===c||1571===c||1573===c||1575===c)){const e=this.getCombinedCharacterMap(o,c);t+=void 0!==s?String.fromCharCode(e[r.Connected]):String.fromCharCode(e[r.Isolated]),++i;continue}const u=this.getCharacterMap(o);void 0!==s&&void 0!==c&&void 0!==u[n.Medial]?t+=String.fromCharCode(u[n.Medial]):void 0!==s&&void 0!==u[n.Final]?t+=String.fromCharCode(u[n.Final]):void 0!==c&&void 0!==u[n.Initial]?t+=String.fromCharCode(u[n.Initial]):t+=String.fromCharCode(o)}else t+=String.fromCharCode(o)}return t}isArabicCharacter(e){return this.m_singleCharactersMap.has(e)}getCharacterMap(e){return this.m_singleCharactersMap.get(e)}getCombinedCharacterMap(e,t){const n=this.m_combinedCharactersMap.get(e);if(void 0!==n)return n.get(t)}isNeutral(e){for(const t of this.m_neutralCharacters)if(t===e)return!0;return!1}}t.ContextualArabicConverter=i},11153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSdfTextMaterial=void 0;const r=n(9499);t.createSdfTextMaterial=function(e){return new r.SdfTextMaterial({texture:e.fontCatalog.texture,textureSize:e.fontCatalog.textureSize,size:e.fontCatalog.size,distanceRange:e.fontCatalog.distanceRange,isMsdf:"msdf"===e.fontCatalog.type,isBackground:!0===e.isBackground,vertexSource:e.vertexSource,fragmentSource:e.fragmentSource,rendererCapabilities:e.rendererCapabilities})}},76729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypesettingUtils=void 0;const r=n(534),i=n(80549),o=n(67747);!function(e){e.EM_TO_PX=16,e.PT_TO_PX=1.25,e.OBLIQUE_ANGLE=.174533,e.OBLIQUE_OFFSET=Math.tan(e.OBLIQUE_ANGLE),e.getPixelSize=function(t,n,r){let o=t;switch(n){case i.FontUnit.Em:o*=e.EM_TO_PX;break;case i.FontUnit.Point:o*=e.PT_TO_PX;break;case i.FontUnit.Percent:o*=.01*r}return o},e.getSmallCapsScale=function(e,t,n,r){return t[n]&&r===i.FontVariant.SmallCaps?e[n].font.metrics.xHeight/e[n].font.metrics.capHeight:1},e.getDirection=function(e,t){let n=o.UnicodeUtils.Direction.LTR,r=t;for(;e[r].direction!==o.UnicodeUtils.Direction.LTR&&e[r].direction!==o.UnicodeUtils.Direction.RTL&&r<e.length-1;)++r;return 1===Math.abs(e[r].direction)&&(n=e[r].direction),n},e.computeGlyphTransform=function(e,t,n,r,i){const o=Math.cos(r),a=Math.sin(r),s=Math.cos(i),l=Math.sin(i);e.set(n*s,n*-l,o*t.x-a*t.y,n*l,n*s,a*t.x+o*t.y,0,0,1)},e.updateBounds=function(e,t,n){const i=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),o=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),a=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),s=Math.max(e[0].y,e[1].y,e[2].y,e[3].y);void 0!==n&&(void 0!==n.array[n.offset]?(n.array[n.offset].min.set(i,a),n.array[n.offset].max.set(o,s)):n.array.push(new r.Box2(new r.Vector2(i,a),new r.Vector2(o,s))),++n.offset),t.min.set(Math.min(t.min.x,i),Math.min(t.min.y,a)),t.max.set(Math.max(t.max.x,o),Math.max(t.max.y,s))}}(t.TypesettingUtils||(t.TypesettingUtils={}))},67747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeUtils=void 0,function(e){let t;e.whiteSpaceRanges=[[9,9],[32,32],[5760,5760],[8192,8198],[8200,8202],[8287,12288],[6158,6158],[8203,8205]],e.isWhiteSpace=function(t){for(const n of e.whiteSpaceRanges)if(t>=n[0]&&t<=n[1])return!0;return!1},e.newLineRanges=[[10,13],[133,133],[8232,8233]],e.isNewLine=function(t){for(const n of e.newLineRanges)if(t>=n[0]&&t<=n[1])return!0;return!1},e.nonPrintableRanges=[[0,31],[127,159]],e.isPrintable=function(t){for(const n of e.nonPrintableRanges)if(t>=n[0]&&t<=n[1])return!1;return!0},function(e){e[e.Neutral=0]="Neutral",e[e.Weak=.5]="Weak",e[e.LTR=1]="LTR",e[e.RTL=-1]="RTL"}(t=e.Direction||(e.Direction={})),e.rtlBlocks=["Hebrew","Alphabetic Presentation Forms","Arabic","Arabic Supplement","Arabic Extended-A","Arabic Presentation Forms-A","Arabic Presentation Forms-B","Arabic Mathematical Alphabetic Symbols","Indic Siyaq Numbers","Rumi Numeral Symbols","Syriac","Syriac Supplement","Samaritan","Mandaic","Thaana","Mende Kikakui","NKo","Adlam","Hanifi Rohingya"],e.neutralBidirectionalRanges=[[32,47],[58,64],[91,96],[123,126]],e.weakBidirectionalRanges=[[48,57],[1632,1641],[1776,1785]],e.getDirection=function(n,r){for(const i of e.weakBidirectionalRanges)if(n>=i[0]&&n<=i[1])return t.Weak;for(const i of e.neutralBidirectionalRanges)if(n>=i[0]&&n<=i[1])return t.Neutral;return void 0!==e.rtlBlocks.find((e=>e===r))?t.RTL:t.LTR},e.rtlMirroredCodePoints=[40,41,60,62,91,93,123,125],e.isRtlMirrored=function(t){return void 0!==e.rtlMirroredCodePoints.find((e=>e===t))}}(t.UnicodeUtils||(t.UnicodeUtils={}))},99383:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67014),t)},8237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=void 0;t.DeferredPromise=class{constructor(e){this.executor=e,this.promise=new Promise(((e,t)=>{this.resolveFunc=e,this.rejectFunc=t}))}exec(){this.executor().then((e=>this.resolveFunc(e))).catch((e=>this.rejectFunc(e)))}}},67014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferManager=void 0,n(89064);const r=n(8237);class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fetch,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.fetchFunction=e,this.maxRetries=t,this.activeDownloadCount=0,this.downloadQueue=new Array,this.activeDownloads=new Map}static instance(){return i.defaultInstance}static async fetchRepeatedly(e,t,n,r,o){try{if(!(t<n))throw new Error("Max number of retries reached");{const i=await e(r,o);if(200===i.status||204===i.status)return i;if(i.status>=400&&i.status<500){t=n;const e=await i.text();throw new Error(e)}}}catch(a){if(a.hasOwnProperty("isCancelled")||"AbortError"===a.name||t>=n)throw a}return await i.waitFor(i.retryTimeout*t).then((()=>i.fetchRepeatedly(e,t+1,n,r,o)))}static waitFor(e){return new Promise((t=>setTimeout(t,e)))}downloadJson(e,t){return this.downloadAs((e=>e.json()),e,t)}downloadArrayBuffer(e,t){return this.download(e,t).then((e=>e.arrayBuffer()))}download(e,t){if(this.activeDownloadCount>=i.maxParallelDownloads){const n=new r.DeferredPromise((()=>this.doDownload(e,t)));return this.downloadQueue.push(n),n.promise}return this.doDownload(e,t)}async doDownload(e,t){try{++this.activeDownloadCount;const n=await i.fetchRepeatedly(this.fetchFunction,0,this.maxRetries,e,t);return this.onDownloadDone(),n}catch(n){throw this.onDownloadDone(),n}}onDownloadDone(){--this.activeDownloadCount,this.execDeferredDownload()}execDeferredDownload(){const e=this.downloadQueue.pop();void 0!==e&&e.exec()}downloadAs(e,t,n){const r=t,i=this.activeDownloads.get(r);if(void 0!==i)return Promise.resolve(i);const o=this.download(t,n).then((t=>{if(this.activeDownloads.delete(r),t.ok)return e(t);throw new Error(JSON.stringify(t))})).catch((e=>{throw this.activeDownloads.delete(r),e}));return this.activeDownloads.set(r,o),o}}t.TransferManager=i,i.retryTimeout=500,i.maxParallelDownloads=16,i.defaultInstance=new i},90087:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67705),t),i(n(31101),t),i(n(85004),t),i(n(69087),t),i(n(64085),t),i(n(48524),t),i(n(28972),t),i(n(45606),t),i(n(31062),t),i(n(21180),t),i(n(83204),t),i(n(7522),t),i(n(26295),t),i(n(2001),t),i(n(78326),t),i(n(84551),t),i(n(81413),t),i(n(85737),t),i(n(82869),t)},15739:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90087),t),i(n(25131),t)},85737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45606:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},31062:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextLogger=void 0;t.ContextLogger=class{constructor(e,t){this.m_logger=e,this.headerMessage=t,this.context=[],this.m_headerLogged=!1,this.warn=this.createLogMethod("warn"),this.info=this.createLogMethod("info"),this.error=this.createLogMethod("error")}pushAttr(e){this.context.push(`${this.context.length>0?".":""}${e}`)}pushIndex(e){this.context.push(`[${e}]`)}pop(){this.context.pop()}createLogMethod(e){var t=this;return function(n){t.m_headerLogged||(t.m_logger.info(t.headerMessage),t.m_headerLogged=!0);for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.m_logger[e](`${t.context.join("")}: ${n}`,...i)}}}},67705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMUtils=void 0,function(e){function t(e){return e.substring(0,2)}e.getBrowserLanguages=function(){if(void 0!==navigator.languages&&navigator.languages.length>0){const e=[];for(const n of navigator.languages)e.push(t(n));return e}if(void 0!==navigator.language)return[t(navigator.language)]}}(t.DOMUtils||(t.DOMUtils={}))},84551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainCallbacks=void 0,t.chainCallbacks=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e&&e.apply(this,r),t.apply(this,r)}}},82869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFragmentShaderToWebGL2=t.convertVertexShaderToWebGL2=void 0,t.convertVertexShaderToWebGL2=function(e){return["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+e},t.convertFragmentShaderToWebGL2=function(e){return["#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+e}},31101:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupedPriorityList=t.PriorityListGroup=void 0;class n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array;this.priority=e,this.elements=t}clone(){return new n(this.priority,this.elements.slice())}remove(e){const t=this.elements.indexOf(e);return-1!==t&&(this.elements.splice(t,1),!0)}}t.PriorityListGroup=n;class r{constructor(){this.groups=new Map}add(e){this.getGroup(e.priority).elements.push(e)}remove(e){const t=this.findGroup(e.priority);return!(void 0===t||!t.remove(e))&&(0===t.elements.length&&this.groups.delete(t.priority),!0)}clear(){this.groups.clear()}merge(e){for(const t of e.groups){const e=this.findGroup(t[1].priority);void 0!==e?e.elements=e.elements.concat(t[1].elements):this.groups.set(Math.floor(t[1].priority),t[1].clone())}return this}clone(){const e=new r;for(const[t,n]of this.groups)e.groups.set(t,n.clone());return e}forEach(e){for(const t of this.groups)t[1].elements.forEach(e)}count(){let e=0;for(const t of this.groups)e+=t[1].elements.length;return e}findGroup(e){const t=Math.floor(e);return this.groups.get(t)}getGroup(e){let t=this.findGroup(e);if(void 0===t){const r=Math.floor(e);t=new n(r),this.groups.set(t.priority,t)}return t}}t.GroupedPriorityList=r},27738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleChannel=void 0;t.ConsoleChannel=class{error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.error(e,...n)}debug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.debug(e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.info(e,...n)}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(e,...n)}trace(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.trace(e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.warn(e,...n)}}},2302:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerOptions=t.LogLevel=void 0,function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Log=2]="Log",e[e.Info=3]="Info",e[e.Warn=4]="Warn",e[e.Error=5]="Error",e[e.None=6]="None"}(t.LogLevel||(t.LogLevel={}));t.LoggerOptions=class{}},22612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const r=n(6312);t.Logger=class{constructor(e,t,n){this.name=e,this.m_channel=t,this.enabled=!0,this.level=r.LogLevel.Trace,void 0!==n&&this.update(n)}error(e){if(this.enabled&&this.level<=r.LogLevel.Error){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.m_channel.error(this.prefix,e,...n)}}debug(e){if(this.enabled&&this.level<=r.LogLevel.Debug){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.m_channel.debug(this.prefix,e,...n)}}info(e){if(this.enabled&&this.level<=r.LogLevel.Info){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.m_channel.info(this.prefix,e,...n)}}log(e){if(this.enabled&&this.level<=r.LogLevel.Log){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.m_channel.log(this.prefix,e,...n)}}trace(e){if(this.enabled&&this.level<=r.LogLevel.Trace){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.m_channel.trace(this.prefix,e,...n)}}warn(e){if(this.enabled&&this.level<=r.LogLevel.Warn){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.m_channel.warn(this.prefix,e,...n)}}update(e){this.enabled=void 0===e.enabled?this.enabled:e.enabled,this.level=void 0===e.level?this.level:e.level}get prefix(){return this.name+":"}}},10623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerManager=void 0;const r=n(51563);t.LoggerManager=class{static get instance(){return this.m_instance||(this.m_instance=new r.LoggerManagerImpl)}}},51563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerManagerImpl=void 0;const r=n(27738),i=n(22612),o=n(19153);t.LoggerManagerImpl=class{constructor(){this.m_loggers=[],this.channel="undefined"===typeof self||"undefined"!==typeof self.document?new r.ConsoleChannel:new o.WorkerChannel}getLoggerNames(){return this.m_loggers.map((e=>e.name))}getLogger(e){return this.m_loggers.find((t=>t.name===e))}create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0!==this.m_levelSetForAll&&(void 0===t.level||t.level<this.m_levelSetForAll)&&(t.level=this.m_levelSetForAll);const n=new i.Logger(e,this.channel,t);return this.m_loggers.push(n),n}dispose(e){const t=this.m_loggers.indexOf(e);if(t<0)throw new Error(`Cannot unregister "${e}" : no such logger registered.`);this.m_loggers.splice(t,1)}updateAll(e){for(const t of this.m_loggers)t.update(e)}update(e,t){for(const n of this.m_loggers)n.name===e&&n.update(t)}enableAll(e){for(const t of this.m_loggers)t.enabled=e}enable(e,t){this.update(e,{enabled:t})}setLogLevelForAll(e){this.m_levelSetForAll=e;for(const t of this.m_loggers)t.level=e}setLogLevel(e,t){this.update(e,{level:t})}setChannel(e){this.channel=e}}},24945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiChannel=void 0;t.MultiChannel=class{constructor(){this.channels=[];for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.channels=t}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of this.channels)i.error(e,...n)}debug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of this.channels)i.debug(e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of this.channels)i.info(e,...n)}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of this.channels)i.log(e,...n)}trace(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of this.channels)i.trace(e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of this.channels)i.warn(e,...n)}}},19153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerChannel=t.WORKERCHANNEL_MSG_TYPE=void 0;const r=n(6312);t.WORKERCHANNEL_MSG_TYPE="worker-channel-message";t.WorkerChannel=class{error(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a={message:[e,...i],type:t.WORKERCHANNEL_MSG_TYPE,level:r.LogLevel.Error};self.postMessage(a)}debug(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a={message:[e,...i],type:t.WORKERCHANNEL_MSG_TYPE,level:r.LogLevel.Debug};self.postMessage(a)}info(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a={message:[e,...i],type:t.WORKERCHANNEL_MSG_TYPE,level:r.LogLevel.Info};self.postMessage(a)}log(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a={message:[e,...i],type:t.WORKERCHANNEL_MSG_TYPE,level:r.LogLevel.Log};self.postMessage(a)}trace(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a={message:[e,...i],type:t.WORKERCHANNEL_MSG_TYPE,level:r.LogLevel.Trace};self.postMessage(a)}warn(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const a={message:[e,...i],type:t.WORKERCHANNEL_MSG_TYPE,level:r.LogLevel.Warn};self.postMessage(a)}}},85004:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(27738),t),i(n(2302),t),i(n(6312),t),i(n(22612),t),i(n(10623),t),i(n(24945),t),i(n(19153),t)},69087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Math2D=void 0,function(e){function t(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)}e.Box=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.x=e,this.y=t,this.w=n,this.h=r}set(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}copy(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}contains(e,t){return this.x<=e&&this.x+this.w>=e&&this.y<=t&&this.y+this.h>=t}containsBox(e){const t=e.x+e.w,n=e.y+e.h;return this.contains(e.x,e.y)&&this.contains(t,e.y)&&this.contains(e.x,n)&&this.contains(t,n)}intersects(e){return this.x<=e.x+e.w&&this.x+this.w>=e.x&&this.y<=e.y+e.h&&this.y+this.h>=e.y}},e.distSquared=t,e.computeSquaredLineLength=function(e){let t=0;const n=e.length-4;for(let r=0;r<n;r+=3){const n=e[r+3]-e[r],i=e[r+4]-e[r+1];t+=n*n+i*i}return t},e.distToSegmentSquared=function(e,n,r,i,o,a){const s=t(r,i,o,a);if(0===s)return t(e,n,r,i);let l=((e-r)*(o-r)+(n-i)*(a-i))/s;return l=Math.max(0,Math.min(1,l)),t(e,n,r+l*(o-r),i+l*(a-i))},e.intersectLineAndCircle=function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=1e-10,l=n-e,c=r-t,u=l*l+c*c,h=i*i,d=e*r-n*t,p=d-c*o+l*a,m=h*u-p*p;if(m<-s)return;const f=p*c,g=-p*l;if(m<s)return{x1:o+f/u,y1:a+g/u};const v=Math.sqrt(m),y=c<0?-1:1,_=Math.abs(c),x=y*l*v,b=_*v;return{x1:o+(f+x)/u,y1:a+(g+b)/u,x2:o+(f-x)/u,y2:a+(g-b)/u}},e.intersectLines=function(e,t,n,r,i,o,a,s){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{x:0,y:0};const c=(e-n)*(o-s)-(t-r)*(i-a);if(0===c)return;const u=((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/c,h=((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/c;return l.x=u,l.y=h,l}}(t.Math2D||(t.Math2D={}))},64085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0,function(e){function t(e,t,n){return e<t?t:e>n?n:e}e.clamp=t,e.smoothStep=function(e,n,r){return(r=t((r-e)/(n-e),0,1))*r*(3-2*r)},e.smootherStep=function(e,n,r){return(r=t((r-e)/(n-e),0,1))*r*r*(r*(6*r-15)+10)},e.map=function(e,t,n,r,i){return(e-t)*(i-r)/(n-t)+r},e.min2=function(e,t){let n;return void 0!==e&&(n=e),void 0!==t&&(n=void 0===n?t:Math.min(n,t)),n},e.max2=function(e,t){let n;return void 0!==e&&(n=e),void 0!==t&&(n=void 0===n?t:Math.max(n,t)),n},e.isClamped=function(e,t,n){return!(void 0!==t&&e<t)&&!(void 0!==n&&e>n)},e.easeInOutCubic=function(e,t,n){return e+(t-e)*(n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1)}}(t.MathUtils||(t.MathUtils={}))},48524:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixinsWithoutProperties=t.applyMixins=void 0,t.applyMixins=function(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((n=>{e.prototype[n]=t.prototype[n]}))}))},t.applyMixinsWithoutProperties=function(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((n=>{const r=Object.getOwnPropertyDescriptor(t.prototype,n);void 0!==r&&void 0===r.get&&"constructor"!==n&&(e.prototype[n]=t.prototype[n])}))}))}},83204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pick=t.cloneDeep=void 0,t.cloneDeep=function(e){const t=new Map,n=function e(n){if(null===n)return null;if("object"===typeof n){const r=t.get(n);if(void 0!==r)return r;if(Array.isArray(n)){const r=[];t.set(n,r),r.length=n.length;for(let t=0;t<r.length;++t)r[t]=e(n[t]);return r}if(n instanceof Date){const e=new Date(n.getTime());return t.set(n,e),e}if(n instanceof RegExp){const e=new RegExp(n.source,n.flags);return t.set(n,e),e}if(n.constructor!==Object)throw new Error("cloneDeep doesn't support objects with custom prototypes");{const r={};t.set(n,r);for(const t in n)n.hasOwnProperty(t)&&(r[t]=e(n[t]));return r}}return n}(e);return t.clear(),n},t.pick=function(e,t){const n={};for(const r of t)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}},7522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOptionValue=void 0,t.getOptionValue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)if(void 0!==r&&null!==r)return r}},21180:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceTimer=void 0;class n{static now(){return n.nowFunc()}static getNowFunc(){return"undefined"!==typeof performance&&"undefined"!==typeof performance.now?()=>performance.now():()=>(new Date).getTime()}}t.PerformanceTimer=n,n.instance=new n,n.nowFunc=n.getNowFunc()},81413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleBilinear=void 0,t.sampleBilinear=function(e,t,n,r,i){const o=t-1,a=n-1,s=r*o,l=Math.floor(s),c=i*a,u=Math.floor(c),h=u*t+l,d=l<o?h+1:h,p=u<a?h+t:h,m=l<o?p+1:p,f=e[h],g=e[d],v=e[p],y=e[m],_=Number.isInteger(s)?0:s-l,x=1-_,b=Number.isInteger(c)?0:c-u,w=1-b;return f*x*w+g*_*w+v*x*b+y*_*b}},26295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskQueue=void 0;t.TaskQueue=class{constructor(e){var t;this.m_options=e,this.m_taskLists=new Map,null===(t=this.m_options.groups)||void 0===t||t.forEach((e=>{this.m_taskLists.set(e,[])})),this.m_options.prioSortFn&&(this.sort=this.m_options.prioSortFn)}update(e){if(void 0===e)this.m_taskLists.forEach((e=>{this.updateTaskList(e)}));else{const t=this.getTaskList(e);t&&this.updateTaskList(t)}}add(e){var t;if(this.m_taskLists.has(e.group)){const n=this.m_taskLists.get(e.group);if(!(null===n||void 0===n?void 0:n.includes(e)))return null===(t=this.m_taskLists.get(e.group))||void 0===t||t.push(e),!0}return!1}remove(e){var t,n;if(this.m_taskLists.has(e.group)){const r=null===(t=this.m_taskLists.get(e.group))||void 0===t?void 0:t.indexOf(e);if(-1!==r)return null===(n=this.m_taskLists.get(e.group))||void 0===n||n.splice(r,1),!0}return!1}numItemsLeft(e){var t,n;let r=0;return void 0===e?this.m_taskLists.forEach((e=>{r+=e.length})):r+=null!==(n=null===(t=this.getTaskList(e))||void 0===t?void 0:t.length)&&void 0!==n?n:0,r}processNext(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!this.getTaskList(e)||this.numItemsLeft(e)<=0)return!1;for(let r=0;r<n&&this.numItemsLeft(e)>0;r++){const n=this.pull(e,!0);void 0!==n&&(!t||(null===t||void 0===t?void 0:t(n))?n.execute():this.add(n))}return!0}clear(){this.m_taskLists.clear()}pull(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;let i;return this.getTaskList(e)&&(i=null===(n=this.getTaskList(e))||void 0===n?void 0:n.pop(),t&&i&&(null===(r=i.isExpired)||void 0===r?void 0:r.call(i)))?this.pull(e,t):i}sort(e,t){return t.getPriority()-e.getPriority()}getTaskList(e){return this.m_taskLists.get(e)}updateTaskList(e){var t;for(let n=0;n<e.length;n++){const r=e[n];(null===(t=null===r||void 0===r?void 0:r.isExpired)||void 0===t?void 0:t.call(r))&&(e.splice(n,1),n--)}e.sort(this.sort)}}},2001:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeUriResolvers=t.RelativeUriResolver=t.PrefixMapUriResolver=void 0;const r=n(78326);t.PrefixMapUriResolver=class{constructor(e){this.definitions=e}resolveUri(e){return Object.keys(this.definitions).reduce(((e,t)=>{if(t.endsWith("/")&&e.startsWith(t)){return this.definitions[t]+e.substr(t.length)}return e===t?this.definitions[t]:e}),e)}};t.RelativeUriResolver=class{constructor(e){this.parentUri=e}resolveUri(e){return r.resolveReferenceUri(this.parentUri,e)}},t.composeUriResolvers=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{resolveUri:e=>t.reduce(((e,t)=>void 0!==t?t.resolveUri(e):e),e)}}},25131:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppBaseUrl=void 0;const r=n(78326);t.getAppBaseUrl=function(){return"undefined"===typeof window?`file://${process.cwd()}/`:r.baseUrl(window.location.href)}},78326:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlHostAndProtocol=t.getUrlOrigin=t.baseUrl=t.resolveReferenceUri=void 0,t.resolveReferenceUri=function(e,t){if(n.test(t))return t;if(t.startsWith("/")){return i(e)+t}return t.startsWith("./")&&(t=t.substr(2)),r(e)+t};const n=new RegExp("^(((?:[a-z]+:)?//)|(file:/)|(data:))","i");function r(e){if(void 0===e)return"./";let t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),t=e.indexOf("?"),-1!==t&&(e=e.slice(0,t)),t=e.lastIndexOf("/"),-1===t?"./":e.substring(0,t+1)}function i(e){if(void 0===e)return"";const t=o(e);return"file:"===t.protocol?"file://":t.host&&t.protocol?t.protocol+"//"+t.host:t.host?"//"+t.host:t.protocol?t.protocol+"//":""}function o(e){const t=new RegExp(/^(?:([a-z]+:))?\/\/([^\/]*)/,"i"),n=e.match(t);if(!n)throw new Error(`getUrlHostAndProtocol: unable to parse URL '${e}'`);return{protocol:n[1],host:n[2]}}t.baseUrl=r,t.getUrlOrigin=i,t.getUrlHostAndProtocol=o},28972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertExists=t.assert=void 0;t.assert=function(e,t){0},t.assertExists=function(e,t){return e}},91490:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(72766),t),i(n(42138),t),i(n(11586),t),i(n(3290),t),i(n(79717),t),i(n(59483),t)},59483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoJsonDataProvider=void 0,n(89064);const r=n(26309),i=n(48991),o=n(36676),a=n(15739),s=n(11586),l=a.LoggerManager.instance.create("GeoJsonDataProvider"),c="invalidated";let u=!1;class h extends o.DataProvider{constructor(e,t,n){var r;super(),this.name=e,this.input=t,this.m_registered=!1,this.m_tiler=null!==(r=null===n||void 0===n?void 0:n.tiler)&&void 0!==r?r:i.ConcurrentTilerFacade.getTiler(s.GEOJSON_TILER_SERVICE_TYPE,null===n||void 0===n?void 0:n.workerTilerUrl,null===n||void 0===n?void 0:n.workerConnectionTimeout)}async connect(){try{await this.m_tiler.connect()}catch(e){throw r.WorkerServiceProtocol.isUnknownServiceError(e)&&!u&&(l.info("Unable to start GeoJson tiler service in worker. Use  'OmvTilerService.start();' in decoder script."),u=!0),e}await this.m_tiler.registerIndex(this.name,this.input),this.m_registered=!0}updateInput(e){this.input=e,this.m_tiler.updateIndex(this.name,this.input),this.dispatchEvent({type:c})}ready(){return this.m_registered}async getTile(e){return await this.m_tiler.getTile(this.name,e)}onDidInvalidate(e){return this.addEventListener(c,e),()=>this.removeEventListener(c,e)}dispose(){this.m_tiler.dispose()}}t.GeoJsonDataProvider=h},72766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OmvGenericFeatureModifier=t.ComposedDataFilter=t.OmvGenericFeatureFilter=t.OmvFeatureFilterDescriptionBuilder=void 0;const r=n(26309),i=n(11586);t.OmvFeatureFilterDescriptionBuilder=class{constructor(e){this.m_processLayersDefault=!0,this.m_processPointsDefault=!0,this.m_processLinesDefault=!0,this.m_processPolygonsDefault=!0,this.m_layersToProcess=new Array,this.m_layersToIgnore=new Array,this.m_pointsToProcess=new Array,this.m_ignoredPoints=new Array,this.m_linesToProcess=new Array,this.m_linesToIgnore=new Array,this.m_polygonsToProcess=new Array,this.m_polygonsToIgnore=new Array,this.m_kindsToProcess=[],this.m_kindsToIgnore=[],e&&(this.m_processLayersDefault=void 0===e.processLayersDefault||e.processLayersDefault,this.m_processPointsDefault=void 0===e.processPointsDefault||e.processPointsDefault,this.m_processLinesDefault=void 0===e.processLinesDefault||e.processLinesDefault,this.m_processPolygonsDefault=void 0===e.processPolygonsDefault||e.processPolygonsDefault)}processLayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.OmvFilterString.StringMatch.Match,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.m_layersToProcess.push({name:{value:e,match:t},minLevel:n,maxLevel:r})}ignoreLayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.OmvFilterString.StringMatch.Match,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.m_layersToIgnore.push({name:{value:e,match:t},minLevel:n,maxLevel:r})}processPoint(e){this.addItem(this.m_pointsToProcess,e)}processPoints(e){this.addItems(this.m_pointsToProcess,e)}ignorePoint(e){this.addItem(this.m_ignoredPoints,e)}ignorePoints(e){this.addItems(this.m_ignoredPoints,e)}processLine(e){this.addItem(this.m_linesToProcess,e)}processLines(e){this.addItems(this.m_linesToProcess,e)}ignoreLine(e){this.addItem(this.m_linesToIgnore,e)}ignoreLines(e){this.addItems(this.m_linesToIgnore,e)}processPolygon(e){this.addItem(this.m_polygonsToProcess,e)}processPolygons(e){this.addItems(this.m_polygonsToProcess,e)}ignorePolygon(e){this.addItem(this.m_polygonsToIgnore,e)}ignorePolygons(e){this.addItems(this.m_polygonsToIgnore,e)}processKinds(e){this.m_kindsToProcess=this.m_kindsToProcess.concat(e)}ignoreKinds(e){this.m_kindsToIgnore=this.m_kindsToIgnore.concat(e)}createDescription(){return{processLayersDefault:this.m_processLayersDefault,processPointsDefault:this.m_processPointsDefault,processLinesDefault:this.m_processLinesDefault,processPolygonsDefault:this.m_processPolygonsDefault,layersToProcess:this.m_layersToProcess,layersToIgnore:this.m_layersToIgnore,pointsToProcess:this.m_pointsToProcess,pointsToIgnore:this.m_ignoredPoints,linesToProcess:this.m_linesToProcess,linesToIgnore:this.m_linesToIgnore,polygonsToProcess:this.m_polygonsToProcess,polygonsToIgnore:this.m_polygonsToIgnore,kindsToProcess:this.m_kindsToProcess,kindsToIgnore:this.m_kindsToIgnore}}addItem(e,t){(void 0===t.minLevel||isNaN(t.minLevel))&&(t.minLevel=0),(void 0===t.maxLevel||isNaN(t.maxLevel))&&(t.maxLevel=1/0);const n={layerName:{value:t.layer,match:void 0===t.matchLayer?i.OmvFilterString.StringMatch.Match:t.matchLayer},geometryTypes:void 0!==t.geomType?Array.isArray(t.geomType)?t.geomType:[t.geomType]:void 0,classes:[{value:t.featureClass,match:void 0===t.matchClass?i.OmvFilterString.StringMatch.Match:t.matchClass}],minLevel:t.minLevel,maxLevel:t.maxLevel,featureAttribute:t.featureAttribute};e.push(n)}addItems(e,t){(void 0===t.minLevel||isNaN(t.minLevel))&&(t.minLevel=0),(void 0===t.maxLevel||isNaN(t.maxLevel))&&(t.maxLevel=1/0);const n={layerName:{value:t.layer,match:void 0===t.matchLayer?i.OmvFilterString.StringMatch.Match:t.matchLayer},geometryTypes:void 0!==t.geomTypes?Array.isArray(t.geomTypes)?t.geomTypes:[t.geomTypes]:void 0,classes:t.featureClasses,minLevel:t.minLevel,maxLevel:t.maxLevel,featureAttribute:t.featureAttribute};e.push(n)}};class o{constructor(e){this.description=e,this.description.kindsToProcess.length>0&&(this.enabledKinds=new r.GeometryKindSet(this.description.kindsToProcess)),this.description.kindsToIgnore.length>0&&(this.disabledKinds=new r.GeometryKindSet(this.description.kindsToIgnore))}static matchLayer(e,t,n){for(const r of t)if(!(n<r.minLevel||n>r.maxLevel)&&i.OmvFilterString.matchString(e,r.name))return!0;return!1}wantsLayer(e,t){return!!o.matchLayer(e,this.description.layersToProcess,t)||!o.matchLayer(e,this.description.layersToIgnore,t)&&this.description.processLayersDefault}wantsPointFeature(e,t,n){return this.wantsFeature(this.description.pointsToProcess,this.description.pointsToIgnore,e,t,n,this.description.processPointsDefault)}wantsLineFeature(e,t,n){return this.wantsFeature(this.description.linesToProcess,this.description.linesToIgnore,e,t,n,this.description.processLinesDefault)}wantsPolygonFeature(e,t,n){return this.wantsFeature(this.description.polygonsToProcess,this.description.polygonsToIgnore,e,t,n,this.description.processPolygonsDefault)}wantsKind(e){return void 0===e||(!(void 0!==this.disabledKinds&&this.disabledKinds.hasOrIntersects(e))||void 0!==this.enabledKinds&&this.enabledKinds.hasOrIntersects(e))}get hasKindFilter(){return void 0!==this.enabledKinds||void 0!==this.disabledKinds}wantsFeature(e,t,n,r,o,a){for(const s of e)if(!(o<s.minLevel||o>s.maxLevel)&&i.OmvFilterString.matchString(n,s.layerName)&&void 0!==s.geometryTypes&&s.geometryTypes.includes(r))return!0;for(const s of t)if(i.OmvFilterString.matchString(n,s.layerName)&&void 0!==s.geometryTypes&&s.geometryTypes.includes(r))return!1;return a}}t.OmvGenericFeatureFilter=o;t.ComposedDataFilter=class{constructor(e){this.filters=e}get hasKindFilter(){return this.filters.reduce(((e,t)=>e||t.hasKindFilter),!0)}wantsLayer(e,t){return this.filters.reduce(((n,r)=>n&&r.wantsLayer(e,t)),!0)}wantsPointFeature(e,t,n){return this.filters.reduce(((r,i)=>r&&i.wantsPointFeature(e,t,n)),!0)}wantsLineFeature(e,t,n){return this.filters.reduce(((r,i)=>r&&i.wantsLineFeature(e,t,n)),!0)}wantsPolygonFeature(e,t,n){return this.filters.reduce(((r,i)=>r&&i.wantsPolygonFeature(e,t,n)),!0)}wantsKind(e){return this.filters.reduce(((t,n)=>t&&n.wantsKind(e)),!0)}};class a{constructor(e){this.description=e}static matchItems(e,t,n){for(const r of n)if(void 0!==r.classes){if(!i.OmvFilterString.matchString(e,r.layerName))continue;for(const e of r.classes)if(i.OmvFilterString.matchString(t,e))return!0}return!1}static matchAttribute(e,t,n){for(const r of n)if(void 0!==r.featureAttribute&&i.OmvFilterString.matchString(e,r.layerName)&&t.lookup(r.featureAttribute.key)===r.featureAttribute.value)return!0;return!1}doProcessPointFeature(e,t){return this.doProcessFeature(this.description.pointsToProcess,this.description.pointsToIgnore,e,t,this.description.processPointsDefault)}doProcessLineFeature(e,t){return this.doProcessFeature(this.description.linesToProcess,this.description.linesToIgnore,e,t,this.description.processLinesDefault)}doProcessPolygonFeature(e,t){return this.doProcessFeature(this.description.polygonsToProcess,this.description.polygonsToIgnore,e,t,this.description.processPolygonsDefault)}doProcessFeature(e,t,n,r,i){if(void 0===n||0===e.length&&0===t.length)return i;let o;const s=r.lookup("class");return void 0!==s&&null!==s&&(o=s.toString()),!(!o||!a.matchItems(n,o,e))||(!o||!a.matchItems(n,o,t))&&(!!a.matchAttribute(n,r,e)||!a.matchAttribute(n,r,t)&&i)}}t.OmvGenericFeatureModifier=a},3290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OmvDebugLabelsTile=void 0;const r=n(26309),i=n(48991),o=n(60396),a=n(15663),s=n(25557),l=n(21690),c=n(534),u=new c.LineBasicMaterial({color:0,linewidth:1,depthTest:!1,depthFunc:c.NeverDepth}),h=new c.MeshBasicMaterial({color:16711680,depthTest:!1,depthFunc:c.NeverDepth});new c.MeshBasicMaterial({color:16711680,depthTest:!1,depthFunc:c.NeverDepth}).wireframe=!0;new c.MeshBasicMaterial({color:8421631,depthTest:!1,depthFunc:c.NeverDepth}).wireframe=!0;const d=new c.MeshBasicMaterial({color:0,depthTest:!1,depthFunc:c.NeverDepth}),p=new c.MeshBasicMaterial({color:255,depthTest:!1,depthFunc:c.NeverDepth,opacity:.75,transparent:!0}),m=new c.MeshBasicMaterial({color:10514432,depthTest:!1,depthFunc:c.NeverDepth,opacity:.75,transparent:!0}),f=new l.TextRenderStyle,g=new l.TextLayoutStyle;f.fontSize={unit:l.FontUnit.Point,size:9,backgroundSize:0},f.opacity=.75,f.backgroundOpacity=.75,f.color=new c.Color(.8,.2,.2);const v=Number.MAX_SAFE_INTEGER;class y{constructor(){this.geometry=new c.BufferGeometry,this.indices=new Array,this.positions=new Array}}function _(e,t,n,r,i){i.positions.push(e,t-r,n),i.positions.push(e+r,t,n),i.positions.push(e,t+r,n),i.positions.push(e-r,t,n);const o=i.positions.length/3;i.indices.push(o-4),i.indices.push(o-3),i.indices.push(o-2),i.indices.push(o-4),i.indices.push(o-2),i.indices.push(o-1)}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(t.indices.length>0){t.geometry.addGroup(0,t.indices.length,0),t.geometry.setAttribute("position",new c.BufferAttribute(new Float32Array(t.positions),3)),t.geometry.setIndex(new c.BufferAttribute(new Uint32Array(t.indices),1));const i=r(t.geometry);i.renderOrder=v-n,e.push(i)}}class b extends i.Tile{constructor(e,t){super(e,t)}loadingFinished(){var e,t,n;const b=o.debugContext.getValue("DEBUG_TEXT_PATHS"),w=o.debugContext.getValue("DEBUG_TEXT_PATHS_FULL"),S=o.debugContext.getValue("DEBUG_TEXT_POIS_FULL"),M=o.debugContext.getValue("DEBUG_TEXT_LINE_MARKER");if(!(b||w||M)||void 0===this.decodedTile)return;const E=a.TileGeometryCreator.instance,T=this.decodedTile,C=new Map,A=o.debugContext.getValue("DEBUG_TEXT_PATHS.FILTER.TEXT"),P=o.debugContext.getValue("DEBUG_TEXT_PATHS.FILTER.INDEX"),O=this.mapView.env;void 0!==T.textPathGeometries&&(this.preparedTextPaths=E.prepareTextPaths(T.textPathGeometries,T));const R=this.center.x,L=this.center.y,D=this.center.z,k=this.mapView.pixelToWorld,I=this.computeWorldOffsetX();let F=0;if(this.textElementGroups.count()>0){const e=new y,t=new y,n=[];this.textElementGroups.forEach((r=>{if(r.type!==s.TextElementType.LineMarker&&r.type!==s.TextElementType.PoiLabel)return;const o=r.type===s.TextElementType.LineMarker?t:e,a=5*k,u=(e,t,s)=>{if(_(e,t,s,a,o),S||M){const o=.5*a,u=`${r.text} [${F}]`,h=new i.TextElement(l.ContextualArabicConverter.instance.convert(u),new c.Vector3(e+I+R+o,t+L+o,s+D),f,g,v,0,0);h.minZoomLevel=0,h.mayOverlap=!0,h.reserveSpace=!1,h.alwaysOnTop=!0,h.ignoreDistance=!0,h.priority=i.TextElement.HIGHEST_PRIORITY,h._isDebug=!0,n.push(h)}F++};if(void 0!==r.path&&Array.isArray(r.path))for(let e=0;e<r.path.length;e++){const t=r.path[e];u(t.x-R,t.y-L,10+t.z+5*e-D)}else if(S){u(r.position.x-R,r.position.y-L,5-D)}}));for(const r of n)this.addTextElement(r);x(this.objects,e,0,(e=>new c.Mesh(e,p))),x(this.objects,t,0,(e=>new c.Mesh(e,m)))}if(void 0!==this.preparedTextPaths){const o=new y,a=new y,s=new y;let p=0;for(const u of this.preparedTextPaths){const h=T.techniques[u.technique];if(!r.isTextTechnique(h)||void 0!==u._isDebug)continue;void 0!==h.color&&C.set(u.technique,new c.Color(r.getPropertyValue(h.color,O))),p=o.positions.length/3;const d=u.text,m=this.preparedTextPaths.indexOf(u);if((!A||d&&d.includes(A))&&(void 0===P||P===m)){for(let p=0;p<u.path.length;p+=3){const m=p/3,v=u.path[p]-R,y=u.path[p+1]-L,x=10+u.path[p+2]+p/3-D;b&&o.positions.push(v,y,x);const S=0===p&&b;if(w||S){if(_(v,y,x,k*(S?6:4),S?a:s),w){const o=null!==(e=h.xOffset)&&void 0!==e?e:0,a=null!==(t=h.yOffset)&&void 0!==t?t:0,s=h.minZoomLevel,u=m%5===0?d+":"+m:Number(m).toString(),p=new i.TextElement(l.ContextualArabicConverter.instance.convert(u),new c.Vector3(v+I+R,y+L,x+D),f,g,r.getPropertyValue(null!==(n=h.priority)&&void 0!==n?n:0,O),o,a);p.minZoomLevel=r.getPropertyValue(s,O),p.mayOverlap=!0,p.reserveSpace=!1,p.alwaysOnTop=!0,p.ignoreDistance=!0,p.priority=i.TextElement.HIGHEST_PRIORITY,this.addTextElement(p)}}}const m=u.path.length/3;for(let e=0;e<m;++e)e>0&&o.indices.push(p+e),e+1<m&&o.indices.push(p+e)}}x(this.objects,o,-2,(e=>new c.LineSegments(e,u))),x(this.objects,a,0,(e=>new c.Mesh(e,h))),x(this.objects,s,-1,(e=>new c.Mesh(e,d)))}}}t.OmvDebugLabelsTile=b},11586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GEOJSON_TILER_SERVICE_TYPE=t.VECTOR_TILE_DECODER_SERVICE_TYPE=t.OmvGeometryType=t.OmvFilterString=t.FeatureModifierId=void 0,function(e){e[e.default=0]="default"}(t.FeatureModifierId||(t.FeatureModifierId={})),function(e){let t;!function(e){e[e.Any=0]="Any",e[e.Match=1]="Match",e[e.StartsWith=2]="StartsWith",e[e.Contains=3]="Contains",e[e.EndsWith=4]="EndsWith"}(t=e.StringMatch||(e.StringMatch={})),e.matchString=function(t,n){switch(n.match){case e.StringMatch.Any:return!0;case e.StringMatch.Match:return t===n.value;case e.StringMatch.StartsWith:return n.value.startsWith(t);case e.StringMatch.EndsWith:return n.value.endsWith(t);default:return t.includes(n.value)}}}(t.OmvFilterString||(t.OmvFilterString={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.POINT=1]="POINT",e[e.LINESTRING=2]="LINESTRING",e[e.POLYGON=3]="POLYGON"}(t.OmvGeometryType||(t.OmvGeometryType={})),t.VECTOR_TILE_DECODER_SERVICE_TYPE="vector-tile-decoder",t.GEOJSON_TILER_SERVICE_TYPE="geojson-tiler"},79717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OmvRestClient=t.AuthenticationTypeAccessToken=t.AuthenticationTypeTomTomV1=t.AuthenticationTypeBearer=t.AuthenticationMethod=t.APIFormat=void 0,n(89064);const r=n(36676),i=n(99383),o=n(15739).LoggerManager.instance.create("OmvRestClient");var a,s;!function(e){e[e.HereV1=0]="HereV1",e[e.MapboxV4=1]="MapboxV4",e[e.XYZMVT=2]="XYZMVT",e[e.XYZJson=3]="XYZJson",e[e.XYZOMV=4]="XYZOMV",e[e.TomtomV1=5]="TomtomV1",e[e.XYZSpace=6]="XYZSpace"}(a=t.APIFormat||(t.APIFormat={})),function(e){e[e.QueryString=0]="QueryString",e[e.AuthorizationHeader=1]="AuthorizationHeader"}(s=t.AuthenticationMethod||(t.AuthenticationMethod={})),t.AuthenticationTypeBearer={method:s.AuthorizationHeader,name:"Bearer"},t.AuthenticationTypeTomTomV1={method:s.QueryString,name:"key"},t.AuthenticationTypeAccessToken={method:s.QueryString,name:"access_token"};class l extends r.DataProvider{constructor(e){super(),this.params=e,this.downloadManager=void 0===e.downloadManager?i.TransferManager.instance():e.downloadManager,this.urlParams=void 0===e.urlParams?{}:e.urlParams}async connect(){}ready(){return!0}async getTile(e,t){const n={signal:t};let r=this.dataUrl(e);const i=await this.getActualAuthenticationCode();return r=this.applyAuthCode(r,n,i),r=this.addQueryParams(r,this.urlParams),this.params.apiFormat===a.XYZJson?await this.downloadManager.downloadJson(r,n):await this.downloadManager.downloadArrayBuffer(r,n)}dispose(){}async getActualAuthenticationCode(){return"string"===typeof this.params.authenticationCode?this.params.authenticationCode:void 0!==this.params.authenticationCode?await this.params.authenticationCode():void 0!==this.params.getBearerToken?await this.params.getBearerToken():void 0}getDefaultAuthMethod(){if(void 0!==this.params.getBearerToken)return t.AuthenticationTypeBearer;switch(this.params.apiFormat){case a.HereV1:return t.AuthenticationTypeBearer;case a.MapboxV4:case a.XYZOMV:case a.XYZMVT:case a.XYZSpace:case a.XYZJson:return t.AuthenticationTypeAccessToken;case a.TomtomV1:return t.AuthenticationTypeTomTomV1;default:return void o.warn(`#getDefaultAuthMethod: Not supported API format: ${this.params.apiFormat}`)}}applyAuthCode(e,t,n){var r,i,o;if(void 0===n)return e;const a=null!==(r=this.params.authenticationMethod)&&void 0!==r?r:this.getDefaultAuthMethod();if(void 0===a)return e;if(a.method===s.AuthorizationHeader){void 0===t.headers&&(t.headers=new Headers);const e=null!==(i=a.name)&&void 0!==i?i:"Bearer";t.headers.append("Authorization",`${e} ${n}`)}else if(a.method===s.QueryString){const t={};t[null!==(o=a.name)&&void 0!==o?o:"access_token"]=n,e=this.addQueryParams(e,t)}return e}dataUrl(e){if(void 0!==this.params.url)return this.params.url.replace("{x}",String(e.column)).replace("{y}",String(e.row)).replace("{z}",String(e.level));let t=[`/${e.level}`,e.column,e.row].join(this.params.apiFormat===a.XYZSpace||this.params.apiFormat===a.XYZJson?"_":"/");switch(this.params.apiFormat){case a.HereV1:case a.XYZOMV:t+="/omv";break;case a.MapboxV4:case a.XYZMVT:t+=".mvt";break;case a.XYZJson:break;case a.XYZSpace:t+=".mvt";break;case a.TomtomV1:t+=".pbf";break;default:o.warn(`Not supported API format: ${this.params.apiFormat}`)}return this.params.baseUrl+t}addQueryParams(e,t){let n="",r=e.includes("?")?"&":"?";for(const i in t)t.hasOwnProperty(i)&&(n+=`${r}${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`,"?"===r&&(r="&"));return e+n}}t.OmvRestClient=l},42138:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTileDataSource=void 0;const r=n(26309),i=n(31201),o=n(48991),a=n(36676),s=n(15739),l=n(11586),c=n(79717),u=s.LoggerManager.instance.create("VectorTileDataSource");function h(e){var t;if(e.dataProvider)return e.dataProvider;if(null!==(t=e.baseUrl)&&void 0!==t?t:e.url)return new c.OmvRestClient(e);throw new Error("OmvDataSource: missing url, baseUrl or dataProvider params")}let d=!1;const p="https://vector.hereapi.com/v2/vectortiles/base/mc",m={baseUrl:p,apiFormat:c.APIFormat.XYZOMV,styleSetName:"tilezen",authenticationMethod:{method:c.AuthenticationMethod.QueryString,name:"apikey"},copyrightInfo:[{id:"here.com",year:(new Date).getFullYear(),label:"HERE",link:"https://legal.here.com/terms"}]},f=new Map([[p,m]]);class g extends a.TileDataSource{constructor(e){var t,n,r,u,d,m,g,v;super(null!==(t=e.tileFactory)&&void 0!==t?t:new a.TileFactory(o.Tile),Object.assign({styleSetName:null!==(n=e.styleSetName)&&void 0!==n?n:"omv",concurrentDecoderServiceName:null!==(r=e.concurrentDecoderServiceName)&&void 0!==r?r:l.VECTOR_TILE_DECODER_SERVICE_TYPE,minDataLevel:null!==(u=e.minDataLevel)&&void 0!==u?u:1,maxDataLevel:null!==(d=e.maxDataLevel)&&void 0!==d?d:17,storageLevelOffset:null!==(m=e.storageLevelOffset)&&void 0!==m?m:-1},function(e){var t;if(void 0===e.dataProvider&&void 0===e.url){const n=null!==(t=e.baseUrl)&&void 0!==t?t:p,r=Object.assign(Object.assign({},f.get(n)),e);return Object.assign(Object.assign({},r),{tilingScheme:i.webMercatorTilingScheme,dataProvider:new c.OmvRestClient(r)})}return Object.assign(Object.assign({},e),{tilingScheme:i.webMercatorTilingScheme,dataProvider:h(e)})}(e))),this.m_params=e,this.cacheable=!0,this.addGroundPlane=void 0===e.addGroundPlane||!0===e.addGroundPlane;let y=e.roundUpCoordinatesIfNeeded;void 0===y&&(null===(g=e)||void 0===g?void 0:g.baseUrl)===p&&(y=!0),this.m_decoderOptions={showMissingTechniques:!0===this.m_params.showMissingTechniques,filterDescription:this.m_params.filterDescr,gatherFeatureAttributes:!0===this.m_params.gatherFeatureAttributes,featureModifiers:this.m_params.featureModifierId?[this.m_params.featureModifierId]:void 0,politicalView:this.m_params.politicalView,skipShortLabels:this.m_params.skipShortLabels,storageLevelOffset:null!==(v=e.storageLevelOffset)&&void 0!==v?v:-1,enableElevationOverlay:!0===this.m_params.enableElevationOverlay,roundUpCoordinatesIfNeeded:y},this.maxGeometryHeight=s.getOptionValue(e.maxGeometryHeight,i.EarthConstants.MAX_BUILDING_HEIGHT),this.minGeometryHeight=s.getOptionValue(e.minGeometryHeight,0)}async connect(){try{await super.connect()}catch(e){throw e.message&&r.WorkerServiceProtocol.isUnknownServiceError(e)&&!d&&(u.info("Unable to create decoder service in worker. Use  'OmvTileDecoderService.start();' in decoder script."),d=!0),"string"===typeof e?new Error(e):e}this.configureDecoder(void 0,this.m_decoderOptions)}removeDataFilter(){this.configureDecoder(void 0,{filterDescription:null})}setDataFilter(e){this.m_decoderOptions.filterDescription=null!==e?e:void 0,this.configureDecoder(void 0,{filterDescription:e,featureModifiers:this.m_decoderOptions.featureModifiers,politicalView:this.m_decoderOptions.politicalView})}shouldPreloadTiles(){return!0}setPoliticalView(e){e=null===e||void 0===e?void 0:e.toLowerCase(),this.m_decoderOptions.politicalView!==e&&(this.m_decoderOptions.politicalView=e,this.configureDecoder(void 0,{filterDescription:this.m_decoderOptions.filterDescription,featureModifiers:this.m_decoderOptions.featureModifiers,politicalView:void 0!==e?e:""}))}get storageLevelOffset(){return super.storageLevelOffset}set storageLevelOffset(e){super.storageLevelOffset=e,this.m_decoderOptions.storageLevelOffset=this.storageLevelOffset,this.configureDecoder(void 0,{storageLevelOffset:this.storageLevelOffset})}setEnableElevationOverlay(e){this.m_decoderOptions.enableElevationOverlay!==e&&(this.m_decoderOptions.enableElevationOverlay=e,this.configureDecoder(void 0,{enableElevationOverlay:e}))}configureDecoder(e,t){this.clearCache(),this.decoder.configure(e,t),this.mapView.markTilesDirty(this)}}t.VectorTileDataSource=g},90767:(e,t,n)=>{"use strict";function r(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>(r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e)),[]).join(" ")})),r}n.d(t,{Z:()=>r})},87125:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},95159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(87125);const i={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function o(e,t){return i[t]||`${r.Z.generate(e)}-${t}`}},30208:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(95159);function i(e,t){const n={};return t.forEach((t=>{n[t]=(0,r.Z)(e,t)})),n}},77907:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),o=n(80184),a=(0,i.default)((0,o.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");t.Z=a},98937:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),o=n(80184),a=(0,i.default)((0,o.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");t.Z=a},14642:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),o=n(80184),a=(0,i.default)((0,o.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");t.Z=a},59737:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),o=n(80184),a=(0,i.default)((0,o.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");t.Z=a},8529:(e,t,n)=>{"use strict";var r=n(95318);t.Z=void 0;var i=r(n(45649)),o=n(80184),a=(0,i.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}),"ZoomOut");t.Z=a},45649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(54421)},81314:(e,t,n)=>{"use strict";n.d(t,{x9:()=>s,ZP:()=>u});var r=n(63366),i=n(87462);const o=["duration","easing","delay"],a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return`${Math.round(e)}ms`}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.Z)({},a,e.easing),n=(0,i.Z)({},s,e.duration);return(0,i.Z)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:a=n.standard,easing:s=t.easeInOut,delay:c=0}=i;(0,r.Z)(i,o);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof a?a:l(a)} ${s} ${"string"===typeof c?c:l(c)}`)).join(",")}},e,{easing:t,duration:n})}},99691:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(87462),i=n(63366),o=n(82466),a=n(85080);function s(e,t,n){return(0,r.Z)({toolbar:{minHeight:56,[`${e.up("xs")} and (orientation: landscape)`]:{minHeight:48},[e.up("sm")]:{minHeight:64}}},n)}var l=n(46189),c=n(12065);const u={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},f={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y=["mode","contrastThreshold","tonalOffset"],_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function b(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,i):"dark"===t&&(e.dark=(0,c._j)(e.main,o)))}function w(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,s=(0,i.Z)(e,y),w=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[200],light:f[50],dark:f[400]}:{main:f[700],light:f[400],dark:f[800]}}(t),S=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(t),M=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(t),E=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[700],light:g[500],dark:g[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[800],light:v[500],dark:v[900]}}(t),C=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function A(e){return(0,c.mi)(e,x.text.primary)>=n?x.text.primary:_.text.primary}const P=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=e;if(t=(0,r.Z)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,l.Z)(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error((0,l.Z)(12,n?` (${n})`:"",JSON.stringify(t.main)));return b(t,"light",o,a),b(t,"dark",s,a),t.contrastText||(t.contrastText=A(t.main)),t},O={dark:x,light:_};return(0,o.Z)((0,r.Z)({common:u,mode:t,primary:P({color:w,name:"primary"}),secondary:P({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:M,name:"error"}),warning:P({color:C,name:"warning"}),info:P({color:E,name:"info"}),success:P({color:T,name:"success"}),grey:h,contrastThreshold:n,getContrastText:A,augmentColor:P,tonalOffset:a},O[t]),s)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const M={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function T(e,t){const n="function"===typeof t?t(e):t,{fontFamily:a=E,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:p,pxToRem:m}=n,f=(0,i.Z)(n,S);const g=s/14,v=m||(e=>e/d*g+"rem"),y=(e,t,n,i,o)=>{return(0,r.Z)({fontFamily:a,fontWeight:e,fontSize:v(t),lineHeight:n},a===E?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},o,p);var s},_={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,M),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,M)};return(0,o.Z)((0,r.Z)({htmlFontSize:d,pxToRem:v,fontFamily:a,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:h},_),f,{clone:!1})}function C(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const A=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)];var P=n(81314);const O={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},R=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:l={},typography:c={}}=e,u=(0,i.Z)(e,R),h=w(n),d=(0,a.Z)(e);let p=(0,o.Z)(d,{mixins:s(d.breakpoints,d.spacing,t),palette:h,shadows:A.slice(),typography:T(h,c),transitions:(0,P.ZP)(l),zIndex:(0,r.Z)({},O)});p=(0,o.Z)(p,u);for(var m=arguments.length,f=new Array(m>1?m-1:0),g=1;g<m;g++)f[g-1]=arguments[g];return p=f.reduce(((e,t)=>(0,o.Z)(e,t)),p),p}const D=L()},86481:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>ke,FO:()=>Re,Dz:()=>Le});var r=n(87462),i=n(63366),o=n(72791),a=n(50620),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const l=(0,a.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var c=n(91672),u=n(95438),h=n(84804),d=l,p=function(e){return"theme"!==e},m=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:p},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(){return null};const v=function e(t,n){var i,a,s=t.__emotion_real===t,l=s&&t.__emotion_base||t;void 0!==n&&(i=n.label,a=n.target);var d=f(t,n,s),p=d||m(l),v=!p("as");return function(){var y=arguments,_=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&_.push("label:"+i+";"),null==y[0]||void 0===y[0].raw)_.push.apply(_,y);else{0,_.push(y[0][0]);for(var x=y.length,b=1;b<x;b++)_.push(y[b],y[0][b])}var w=(0,c.w)((function(e,t,n){var r=v&&e.as||l,i="",s=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=(0,o.useContext)(c.T)}"string"===typeof e.className?i=(0,u.f)(t.registered,s,e.className):null!=e.className&&(i=e.className+" ");var x=(0,h.O)(_.concat(s),t.registered,f);(0,u.M)(t,x,"string"===typeof r);i+=t.key+"-"+x.name,void 0!==a&&(i+=" "+a);var b=v&&void 0===d?m(r):p,w={};for(var S in e)v&&"as"===S||b(S)&&(w[S]=e[S]);w.className=i,w.ref=n;var M=(0,o.createElement)(r,w),E=(0,o.createElement)(g,null);return(0,o.createElement)(o.Fragment,null,E,M)}));return w.displayName=void 0!==i?i:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=l,w.__emotion_styles=_,w.__emotion_forwardProp=d,Object.defineProperty(w,"toString",{value:function(){return"."+a}}),w.withComponent=function(t,i){return e(t,(0,r.Z)({},n,i,{shouldForwardProp:f(w,i,!0)})).apply(void 0,_)},w}};var y=v.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){y[e]=y(e)}));const _=y;function x(e,t){return _(e,t)}var b=n(85080),w=n(98247),S=n(18529);const M=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,w.Z)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var E=n(45682),T=n(51184);function C(e){return"number"!==typeof e?e:`${e}px solid`}const A=(0,S.Z)({prop:"border",themeKey:"borders",transform:C}),P=(0,S.Z)({prop:"borderTop",themeKey:"borders",transform:C}),O=(0,S.Z)({prop:"borderRight",themeKey:"borders",transform:C}),R=(0,S.Z)({prop:"borderBottom",themeKey:"borders",transform:C}),L=(0,S.Z)({prop:"borderLeft",themeKey:"borders",transform:C}),D=(0,S.Z)({prop:"borderColor",themeKey:"palette"}),k=(0,S.Z)({prop:"borderTopColor",themeKey:"palette"}),I=(0,S.Z)({prop:"borderRightColor",themeKey:"palette"}),F=(0,S.Z)({prop:"borderBottomColor",themeKey:"palette"}),N=(0,S.Z)({prop:"borderLeftColor",themeKey:"palette"}),z=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,E.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,E.NA)(t,e)});return(0,T.k9)(e,e.borderRadius,n)}return null};z.propTypes={},z.filterProps=["borderRadius"];const U=M(A,P,O,R,L,D,k,I,F,N,z),j=M((0,S.Z)({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),(0,S.Z)({prop:"display"}),(0,S.Z)({prop:"overflow"}),(0,S.Z)({prop:"textOverflow"}),(0,S.Z)({prop:"visibility"}),(0,S.Z)({prop:"whiteSpace"})),B=M((0,S.Z)({prop:"flexBasis"}),(0,S.Z)({prop:"flexDirection"}),(0,S.Z)({prop:"flexWrap"}),(0,S.Z)({prop:"justifyContent"}),(0,S.Z)({prop:"alignItems"}),(0,S.Z)({prop:"alignContent"}),(0,S.Z)({prop:"order"}),(0,S.Z)({prop:"flex"}),(0,S.Z)({prop:"flexGrow"}),(0,S.Z)({prop:"flexShrink"}),(0,S.Z)({prop:"alignSelf"}),(0,S.Z)({prop:"justifyItems"}),(0,S.Z)({prop:"justifySelf"})),V=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,E.eI)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,E.NA)(t,e)});return(0,T.k9)(e,e.gap,n)}return null};V.propTypes={},V.filterProps=["gap"];const G=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,E.eI)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,E.NA)(t,e)});return(0,T.k9)(e,e.columnGap,n)}return null};G.propTypes={},G.filterProps=["columnGap"];const H=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,E.eI)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,E.NA)(t,e)});return(0,T.k9)(e,e.rowGap,n)}return null};H.propTypes={},H.filterProps=["rowGap"];const W=M(V,G,H,(0,S.Z)({prop:"gridColumn"}),(0,S.Z)({prop:"gridRow"}),(0,S.Z)({prop:"gridAutoFlow"}),(0,S.Z)({prop:"gridAutoColumns"}),(0,S.Z)({prop:"gridAutoRows"}),(0,S.Z)({prop:"gridTemplateColumns"}),(0,S.Z)({prop:"gridTemplateRows"}),(0,S.Z)({prop:"gridTemplateAreas"}),(0,S.Z)({prop:"gridArea"})),q=M((0,S.Z)({prop:"position"}),(0,S.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,S.Z)({prop:"top"}),(0,S.Z)({prop:"right"}),(0,S.Z)({prop:"bottom"}),(0,S.Z)({prop:"left"})),Z=M((0,S.Z)({prop:"color",themeKey:"palette"}),(0,S.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,S.Z)({prop:"backgroundColor",themeKey:"palette"})),$=(0,S.Z)({prop:"boxShadow",themeKey:"shadows"});function X(e){return e<=1&&0!==e?100*e+"%":e}const K=(0,S.Z)({prop:"width",transform:X}),Y=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||T.VO[t]||X(t)}};return(0,T.k9)(e,e.maxWidth,t)}return null};Y.filterProps=["maxWidth"];const Q=(0,S.Z)({prop:"minWidth",transform:X}),J=(0,S.Z)({prop:"height",transform:X}),ee=(0,S.Z)({prop:"maxHeight",transform:X}),te=(0,S.Z)({prop:"minHeight",transform:X}),ne=((0,S.Z)({prop:"size",cssProperty:"width",transform:X}),(0,S.Z)({prop:"size",cssProperty:"height",transform:X}),M(K,Y,Q,J,ee,te,(0,S.Z)({prop:"boxSizing"}))),re=(0,S.Z)({prop:"fontFamily",themeKey:"typography"}),ie=(0,S.Z)({prop:"fontSize",themeKey:"typography"}),oe=(0,S.Z)({prop:"fontStyle",themeKey:"typography"}),ae=(0,S.Z)({prop:"fontWeight",themeKey:"typography"}),se=(0,S.Z)({prop:"letterSpacing"}),le=(0,S.Z)({prop:"lineHeight"}),ce=(0,S.Z)({prop:"textAlign"}),ue=M((0,S.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),re,ie,oe,ae,se,le,ce),he={borders:U.filterProps,display:j.filterProps,flexbox:B.filterProps,grid:W.filterProps,positions:q.filterProps,palette:Z.filterProps,shadows:$.filterProps,sizing:ne.filterProps,spacing:E.ZP.filterProps,typography:ue.filterProps},de={borders:U,display:j,flexbox:B,grid:W,positions:q,palette:Z,shadows:$,sizing:ne,spacing:E.ZP,typography:ue},pe=Object.keys(he).reduce(((e,t)=>(he[t].forEach((n=>{e[n]=de[t]})),e)),{});const me=function(e,t,n){const r={[e]:t,theme:n},i=pe[e];return i?i(r):{[e]:t}};function fe(e){const{sx:t,theme:n={}}=e||{};if(!t)return null;function r(e){let t=e;if("function"===typeof e)t=e(n);else if("object"!==typeof e)return e;const r=(0,T.W8)(n.breakpoints),i=Object.keys(r);let o=r;return Object.keys(t).forEach((e=>{const r=(i=t[e],a=n,"function"===typeof i?i(a):i);var i,a;if(null!==r&&void 0!==r)if("object"===typeof r)if(pe[e])o=(0,w.Z)(o,me(e,r,n));else{const t=(0,T.k9)({theme:n},r,(t=>({[e]:t})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(t,r)?o=(0,w.Z)(o,t):o[e]=fe({sx:r,theme:n})}else o=(0,w.Z)(o,me(e,r,n))})),(0,T.L7)(i,o)}return Array.isArray(t)?t.map(r):r(t)}fe.filterProps=["sx"];const ge=fe;var ve=n(27312);const ye=["variant"];function _e(e){return 0===e.length}function xe(e){const{variant:t}=e,n=(0,i.Z)(e,ye);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?_e(r)?e[t]:(0,ve.Z)(e[t]):`${_e(r)?t:(0,ve.Z)(t)}${(0,ve.Z)(e[t].toString())}`})),r}const be=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],we=["theme"],Se=["theme"];function Me(e){return 0===Object.keys(e).length}const Ee=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,Te=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=xe(e.props);r[t]=e.style})),r},Ce=(e,t,n,r)=>{var i,o;const{ownerState:a={}}=e,s=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{a[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[xe(n.props)])})),s};function Ae(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Pe=(0,b.Z)();var Oe=n(99691);const Re=e=>Ae(e)&&"classes"!==e,Le=Ae,De=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:t=Pe,rootShouldForwardProp:n=Ae,slotShouldForwardProp:o=Ae}=e;return function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{name:s,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:h}=a,d=(0,i.Z)(a,be),p=void 0!==c?c:l&&"Root"!==l||!1,m=u||!1;let f;let g=Ae;"Root"===l?g=n:l&&(g=o);const v=x(e,(0,r.Z)({shouldForwardProp:g,label:f},d)),y=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];const l=o?o.map((e=>"function"===typeof e&&e.__emotion_real!==e?n=>{let{theme:o}=n,a=(0,i.Z)(n,we);return e((0,r.Z)({theme:Me(o)?t:o},a))}:e)):[];let c=e;s&&h&&l.push((e=>{const n=Me(e.theme)?t:e.theme,r=Ee(s,n);return r?h(e,r):null})),s&&!p&&l.push((e=>{const n=Me(e.theme)?t:e.theme;return Ce(e,Te(s,n),n,s)})),m||l.push((e=>{const n=Me(e.theme)?t:e.theme;return ge((0,r.Z)({},e,{theme:n}))}));const u=l.length-o.length;if(Array.isArray(e)&&u>0){const t=new Array(u).fill("");c=[...e,...t],c.raw=[...e.raw,...t]}else"function"===typeof e&&(c=n=>{let{theme:o}=n,a=(0,i.Z)(n,Se);return e((0,r.Z)({theme:Me(o)?t:o},a))});const d=v(c,...l);return d};return y}}({defaultTheme:Oe.Z,rootShouldForwardProp:Re}),ke=De},10551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(87462);function i(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){const n=(0,r.Z)({},t);return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,i):i}var o=n(30418);var a=n(99691);function s(e){let{props:t,name:n}=e;return function(e){let{props:t,name:n,defaultTheme:r}=e;return i({theme:(0,o.Z)(r),name:n,props:t})}({props:t,name:n,defaultTheme:a.Z})}},14036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(27312).Z},76189:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(87462),i=n(72791),o=n(63366),a=(n(52007),n(28182)),s=n(90767),l=n(14036),c=n(10551),u=n(86481),h=n(95159);function d(e){return(0,h.Z)("MuiSvgIcon",e)}(0,n(30208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(80184);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],f=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${(0,l.Z)(n.color)}`],t[`fontSize${(0,l.Z)(n.fontSize)}`]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:t.transitions.create("fill",{duration:t.transitions.duration.shorter}),fontSize:{inherit:"inherit",small:t.typography.pxToRem(20),medium:t.typography.pxToRem(24),large:t.typography.pxToRem(35)}[n.fontSize],color:null!=(r=null==(i=t.palette[n.color])?void 0:i.main)?r:{action:t.palette.action.active,disabled:t.palette.action.disabled,inherit:void 0}[n.color]}})),g=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:i,className:u,color:h="inherit",component:g="svg",fontSize:v="medium",htmlColor:y,inheritViewBox:_=!1,titleAccess:x,viewBox:b="0 0 24 24"}=n,w=(0,o.Z)(n,m),S=(0,r.Z)({},n,{color:h,component:g,fontSize:v,inheritViewBox:_,viewBox:b}),M={};_||(M.viewBox=b);const E=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&`color${(0,l.Z)(t)}`,`fontSize${(0,l.Z)(n)}`]};return(0,s.Z)(i,d,r)})(S);return(0,p.jsxs)(f,(0,r.Z)({as:g,className:(0,a.Z)(E.root,u),ownerState:S,focusable:"false",color:y,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},M,w,{children:[i,x?(0,p.jsx)("title",{children:x}):null]}))}));g.muiName="SvgIcon";const v=g;function y(e,t){const n=(n,i)=>(0,p.jsx)(v,(0,r.Z)({"data-testid":`${t}Icon`,ref:i},n,{children:e}));return n.muiName=v.muiName,i.memo(i.forwardRef(n))}},83199:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(93981).Z},54421:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>r.Z,createChainedFunction:()=>i,createSvgIcon:()=>o.Z,debounce:()=>a.Z,deprecatedPropType:()=>s,isMuiElement:()=>l.Z,ownerDocument:()=>c.Z,ownerWindow:()=>u.Z,requirePropFactory:()=>h,setRef:()=>d,unstable_ClassNameGenerator:()=>x.Z,unstable_useEnhancedEffect:()=>p.Z,unstable_useId:()=>m.Z,unsupportedProp:()=>f,useControlled:()=>g.Z,useEventCallback:()=>v.Z,useForkRef:()=>y.Z,useIsFocusVisible:()=>_.Z});var r=n(14036);const i=n(78949).Z;var o=n(76189),a=n(83199);const s=function(e,t){return()=>null};var l=n(19103),c=n(98301),u=n(17602);n(87462);const h=function(e,t){return()=>null};const d=n(62971).Z;var p=n(40162),m=n(67384);const f=function(e,t,n,r,i){return null};var g=n(98278),v=n(89683),y=n(42071),_=n(23031),x=n(87125)},19103:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(72791);const i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},98301:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(99723).Z},17602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(27979).Z},98278:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(58959).Z},40162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(75721).Z},89683:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(58956).Z},42071:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(47563).Z},67384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(96248).Z},23031:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(72791);let i,o=!0,a=!1;const s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function u(){"hidden"===this.visibilityState&&a&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const d=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,window.clearTimeout(i),i=window.setTimeout((()=>{a=!1}),100),t.current=!1,!0)},ref:e}}},51184:(e,t,n)=>{"use strict";n.d(t,{VO:()=>r,k9:()=>o,W8:()=>a,L7:()=>s});n(52007);const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${r[e]}px)`};function o(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const e=o.breakpoints||i;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=o.breakpoints||i;return Object.keys(t).reduce(((i,o)=>{if(-1!==Object.keys(e.values||r).indexOf(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const n=null==e||null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return n||{}}function s(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},12065:(e,t,n)=>{"use strict";n.d(t,{mi:()=>l,Fq:()=>c,_j:()=>u,$n:()=>h});var r=n(46189);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));let i,a=e.substring(t+1,e.length-1);if("color"===n){if(a=a.split(" "),i=a.shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return a=a.map((e=>parseFloat(e))),{type:n,values:a,colorSpace:i}}function a(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function s(e){let t="hsl"===(e=o(e)).type?o(function(e){e=o(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let c="rgb";const u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),a({type:c,values:u})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e,t){const n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=o(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,a(e)}function u(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function h(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return a(e)}},85080:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(87462),i=n(63366),o=n(82466);const a=["values","unit","step"];function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,s=(0,i.Z)(e,a),l=Object.keys(t);function c(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function u(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-o/100}${n})`}function h(e,r){const i=l.indexOf(r);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"===typeof t[l[i]]?t[l[i]]:r)-o/100}${n})`}return(0,r.Z)({keys:l,values:t,up:c,down:u,between:h,only:function(e){return l.indexOf(e)+1<l.length?h(e,l[l.indexOf(e)+1]):c(e)},not:function(e){const t=l.indexOf(e);return 0===t?c(l[1]):t===l.length-1?u(l[t]):h(e,l[l.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},s)}const l={borderRadius:4};var c=n(45682);function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,c.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=0===n.length?[1]:n;return i.map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const h=["breakpoints","palette","spacing","shape"];const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:a,shape:c={}}=e,d=(0,i.Z)(e,h),p=s(t),m=u(a);let f=(0,o.Z)({breakpoints:p,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},n),spacing:m,shape:(0,r.Z)({},l,c)},d);for(var g=arguments.length,v=new Array(g>1?g-1:0),y=1;y<g;y++)v[y-1]=arguments[y];return f=v.reduce(((e,t)=>(0,o.Z)(e,t)),f),f}},98247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(82466);const i=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},45682:(e,t,n)=>{"use strict";n.d(t,{hB:()=>m,eI:()=>p,ZP:()=>b,NA:()=>f});var r=n(51184),i=n(18529),o=n(98247);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=a[t],i=s[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function p(e,t,n,r){const o=(0,i.D)(e,t)||n;return"number"===typeof o?e=>"string"===typeof e?e:o*e:Array.isArray(o)?e=>"string"===typeof e?e:o[e]:"function"===typeof o?o:()=>{}}function m(e){return p(e,"spacing",8)}function f(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:`-${n}`}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=f(t,n),e)),{})}(c(n),i),a=e[n];return(0,r.k9)(e,a,o)}function v(e,t){const n=m(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.Z,{})}function y(e){return v(e,u)}function _(e){return v(e,h)}function x(e){return v(e,d)}y.propTypes={},y.filterProps=u,_.propTypes={},_.filterProps=h,x.propTypes={},x.filterProps=d;const b=x},18529:(e,t,n)=>{"use strict";n.d(t,{D:()=>o,Z:()=>s});var r=n(27312),i=n(51184);function o(e,t){return t&&"string"===typeof t?t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e):null}function a(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,s)||{};return(0,i.k9)(e,c,(e=>{let i=a(u,l,e);return e===i&&"string"===typeof e&&(i=a(u,l,`${t}${"default"===e?"":(0,r.Z)(e)}`,e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},30418:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(85080),i=n(27301);const o=(0,r.Z)();const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,i.Z)(e)}},27301:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(72791);const i=r.createContext(null);function o(){return r.useContext(i)}function a(e){return 0===Object.keys(e).length}const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=o();return!t||a(t)?e:t}},27312:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(46189);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},78949:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{Z:()=>r})},93981:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];const a=()=>{e.apply(this,i)};clearTimeout(t),t=setTimeout(a,n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{Z:()=>r})},82466:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(87462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=o(e[r],t[r],n):a[r]=t[r])})),a}},46189:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:()=>r})},99723:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:()=>r})},27979:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(99723);function i(e){return(0,r.Z)(e).defaultView||window}},62971:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:()=>r})},58959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(72791);function i(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:a}=r.useRef(void 0!==t),[s,l]=r.useState(n);return[a?t:s,r.useCallback((e=>{a||l(e)}),[])]}},75721:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(72791);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},58956:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(72791),i=n(75721);function o(e){const t=r.useRef(e);return(0,i.Z)((()=>{t.current=e})),r.useCallback((function(){return(0,t.current)(...arguments)}),[])}},47563:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(72791),i=n(62971);function o(e,t){return r.useMemo((()=>null==e&&null==t?null:n=>{(0,i.Z)(e,n),(0,i.Z)(t,n)}),[e,t])}},96248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(72791);let i=0;function o(e){const[t,n]=r.useState(e),o=e||t;return r.useEffect((()=>{null==t&&(i+=1,n(`mui-${i}`))}),[t]),o}},88926:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y,Easing:()=>r,Group:()=>o,Interpolation:()=>a,Sequence:()=>s,Tween:()=>c,VERSION:()=>u,add:()=>f,getAll:()=>p,nextId:()=>h,now:()=>i,remove:()=>g,removeAll:()=>m,update:()=>v});var r={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-r.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*r.Bounce.In(2*e):.5*r.Bounce.Out(2*e-1)+.5}}},i="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},o=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=i()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var o=this._tweens[n[r]],a=!t;o&&!1===o.update(e,a)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),a={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=a.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[n],e[n-1],n-r):o(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,o=a.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*o(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=a.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=a.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},s=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),l=new o,c=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=r.Linear.None,this._interpolationFunction=a.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=s.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?i()+parseFloat(e):e:i(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var o=e[i],a=Array.isArray(o),s=a?"array":typeof o,l=!a&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(l){var c=n[i];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(c)}if("object"!==s&&!a||!o||l)"undefined"===typeof t[i]&&(t[i]=o),a||(t[i]*=1),r[i]=l?n[i].slice().reverse():t[i]||0;else{for(var u in t[i]=a?[]:{},o)t[i][u]=o[u];r[i]=a?[]:{},this._setupProperties(o,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=i()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=i()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=i()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var a=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var o=t[i]||0,a=n[i],s=Array.isArray(e[i]),l=Array.isArray(a);!s&&l?e[i]=this._interpolationFunction(a,r):"object"===typeof a&&a?this._updateProperties(e[i],o,a,r):"number"===typeof(a=this._handleRelativeValue(o,a))&&(e[i]=o+(a-o)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),u="18.6.4",h=s.nextId,d=l,p=d.getAll.bind(d),m=d.removeAll.bind(d),f=d.add.bind(d),g=d.remove.bind(d),v=d.update.bind(d);const y={Easing:r,Group:o,Interpolation:a,now:i,Sequence:s,nextId:h,Tween:c,VERSION:u,getAll:p,removeAll:m,add:f,remove:g,update:v}},81694:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},28182:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:()=>i})},74890:e=>{var t={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:2*Math.PI},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}};e.exports=function(e,n,r,i){if(!t.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!t[r].hasOwnProperty(n))throw new Error("Cannot convert from "+n+" to "+r);var o=t[r][n]*e;return!1!==i?(i=Math.pow(10,parseInt(i)||5),Math.round(o*i)/i):o}},10173:(e,t)=>{var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function o(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function a(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=i.indexOf("("),c=i.indexOf(")");if(-1!==l&&c+1===i.length){var u=i.substr(0,l),h=i.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),d];case"hsla":if(4!==h.length)return null;d=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,m=a(h[1]),f=a(h[2]),g=f<=.5?f*(m+1):f+m-f*m,v=2*f-g;return[r(255*s(v,g,p+1/3)),r(255*s(v,g,p)),r(255*s(v,g,p-1/3)),d];default:return null}}return null}}catch(l){}},4234:function(e,t,n){var r;!function(i){"use strict";var o,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l=!0,c="[DecimalError] ",u=c+"Invalid argument: ",h=c+"Exponent out of range: ",d=Math.floor,p=Math.pow,m=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,g=9007199254740991,v=d(1286742750677284.5),y={};function _(e,t){var n,r,i,o,a,s,c,u,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),l?P(t,d):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),o=a-i){for(o<0?(r=c,o=-o,s=u.length):(r=u,i=a,s=c.length),o>(s=(a=Math.ceil(d/7))>s?a+1:s+1)&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((s=c.length)-(o=u.length)<0&&(o=s,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/f|0,c[o]%=f;for(n&&(c.unshift(n),++i),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=i,l?P(t,d):t}function x(e,t,n){if(e!==~~e||e<t||e>n)throw Error(u+e)}function b(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=T(n)),o+=r;(n=7-(r=(a=e[t])+"").length)&&(o+=T(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return P(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return M(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(o))throw Error(c+"NaN");if(n.s<1)throw Error(c+(n.s?"NaN":"-Infinity"));return n.eq(o)?new r(0):(l=!1,t=w(C(n,a),C(e,a),a),l=!0,P(t,i))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?O(t,e):_(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(c+"NaN");return n.s?(l=!1,t=w(n,e,0,1).times(e),l=!0,n.minus(t)):P(new r(n),i)},y.naturalExponential=y.exp=function(){return S(this)},y.naturalLogarithm=y.ln=function(){return C(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_(t,e):O(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(u+e);if(t=M(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(c+"NaN")}for(e=M(s),l=!1,0==(i=Math.sqrt(+s))||i==1/0?(((t=b(s.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(o=r).plus(w(s,o,a+2)).times(.5),b(o.d).slice(0,a)===(t=b(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(P(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if("9999"!=t)break;a+=4}return l=!0,P(r,n)},y.times=y.mul=function(e){var t,n,r,i,o,a,s,c,u,h=this,d=h.constructor,p=h.d,m=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(c=p.length)<(u=m.length)&&(o=p,p=m,m=o,a=c,c=u,u=a),o=[],r=a=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)s=o[i]+m[r]*p[i-r-1]+t,o[i--]=s%f|0,t=s/f|0;o[i]=(o[i]+t)%f|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,l?P(e,d.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(x(e,0,a),void 0===t?t=r.rounding:x(t,0,8),P(n,e+M(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=R(r,!0):(x(e,0,a),void 0===t?t=i.rounding:x(t,0,8),n=R(r=P(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?R(i):(x(e,0,a),void 0===t?t=o.rounding:x(t,0,8),n=R((r=P(new o(i),e+M(i)+1,t)).abs(),!1,e+M(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return P(new t(e),M(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,i,a,s,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(o);if(!(u=new h(u)).s){if(e.s<1)throw Error(c+"Infinity");return u}if(u.eq(o))return u;if(r=h.precision,e.eq(o))return P(u,r);if(s=(t=e.e)>=(n=e.d.length-1),a=u.s,s){if((n=p<0?-p:p)<=g){for(i=new h(o),t=Math.ceil(r/7+4),l=!1;n%2&&L((i=i.times(u)).d,t),0!==(n=d(n/2));)L((u=u.times(u)).d,t);return l=!0,e.s<0?new h(o).div(i):P(i,r)}}else if(a<0)throw Error(c+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,l=!1,i=e.times(C(u,r+12)),l=!0,(i=S(i)).s=a,i},y.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?r=R(i,(n=M(i))<=o.toExpNeg||n>=o.toExpPos):(x(e,1,a),void 0===t?t=o.rounding:x(t,0,8),r=R(i=P(new o(i),e,t),e<=(n=M(i))||n<=o.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(x(e,1,a),void 0===t?t=n.rounding:x(t,0,8)),P(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=M(e),n=e.constructor;return R(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var s,l,u,h,d,p,m,g,v,y,_,x,b,w,S,E,T,C,A=r.constructor,O=r.s==i.s?1:-1,R=r.d,L=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(c+"Division by zero");for(l=r.e-i.e,T=L.length,S=R.length,g=(m=new A(O)).d=[],u=0;L[u]==(R[u]||0);)++u;if(L[u]>(R[u]||0)&&--l,(x=null==o?o=A.precision:a?o+(M(r)-M(i))+1:o)<0)return new A(0);if(x=x/7+2|0,u=0,1==T)for(h=0,L=L[0],x++;(u<S||h)&&x--;u++)b=h*f+(R[u]||0),g[u]=b/L|0,h=b%L|0;else{for((h=f/(L[0]+1)|0)>1&&(L=e(L,h),R=e(R,h),T=L.length,S=R.length),w=T,y=(v=R.slice(0,T)).length;y<T;)v[y++]=0;(C=L.slice()).unshift(0),E=L[0],L[1]>=f/2&&++E;do{h=0,(s=t(L,v,T,y))<0?(_=v[0],T!=y&&(_=_*f+(v[1]||0)),(h=_/E|0)>1?(h>=f&&(h=f-1),1==(s=t(d=e(L,h),v,p=d.length,y=v.length))&&(h--,n(d,T<p?C:L,p))):(0==h&&(s=h=1),d=L.slice()),(p=d.length)<y&&d.unshift(0),n(v,d,y),-1==s&&(s=t(L,v,T,y=v.length))<1&&(h++,n(v,T<y?C:L,y)),y=v.length):0===s&&(h++,v=[0]),g[u++]=h,s&&v[0]?v[y++]=R[w]||0:(v=[R[w]],y=1)}while((w++<S||void 0!==v[0])&&x--)}return g[0]||g.shift(),m.e=l,P(m,a?o+M(m)+1:o)}}();function S(e,t){var n,r,i,a,s,c=0,u=0,d=e.constructor,m=d.precision;if(M(e)>16)throw Error(h+M(e));if(!e.s)return new d(o);for(null==t?(l=!1,s=m):s=t,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(s+=Math.log(p(2,u))/Math.LN10*2+5|0,n=r=i=new d(o),d.precision=s;;){if(r=P(r.times(e),s),n=n.times(++c),b((a=i.plus(w(r,n,s))).d).slice(0,s)===b(i.d).slice(0,s)){for(;u--;)i=P(i.times(i),s);return d.precision=m,null==t?(l=!0,P(i,m)):i}i=a}}function M(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw l=!0,n&&(e.precision=n),Error(c+"LN10 precision limit exceeded");return P(new e(e.LN10),t)}function T(e){for(var t="";e--;)t+="0";return t}function C(e,t){var n,r,i,a,s,u,h,d,p,m=1,f=e,g=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(c+(f.s?"NaN":"-Infinity"));if(f.eq(o))return new v(0);if(null==t?(l=!1,d=y):d=t,f.eq(10))return null==t&&(l=!0),E(v,d);if(d+=10,v.precision=d,r=(n=b(g)).charAt(0),a=M(f),!(Math.abs(a)<15e14))return h=E(v,d+2,y).times(a+""),f=C(new v(r+"."+n.slice(1)),d-10).plus(h),v.precision=y,null==t?(l=!0,P(f,y)):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((f=f.times(e)).d)).charAt(0),m++;for(a=M(f),r>1?(f=new v("0."+n),a++):f=new v(r+"."+n.slice(1)),u=s=f=w(f.minus(o),f.plus(o),d),p=P(f.times(f),d),i=3;;){if(s=P(s.times(p),d),b((h=u.plus(w(s,new v(i),d))).d).slice(0,d)===b(u.d).slice(0,d))return u=u.times(2),0!==a&&(u=u.plus(E(v,d+2,y).times(a+""))),u=w(u,new v(m),d),v.precision=y,null==t?(l=!0,P(u,y)):u;u=h,i+=2}}function A(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),l&&(e.e>v||e.e<-v))throw Error(h+n)}else e.s=0,e.e=0,e.d=[0];return e}function P(e,t,n){var r,i,o,a,s,c,u,m,g=e.d;for(a=1,o=g[0];o>=10;o/=10)a++;if((r=t-a)<0)r+=7,i=t,u=g[m=0];else{if((m=Math.ceil((r+1)/7))>=(o=g.length))return e;for(u=o=g[m],a=1;o>=10;o/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(s=u/(o=p(10,a-i-1))%10|0,c=t<0||void 0!==g[m+1]||u%o,c=n<4?(s||c)&&(0==n||n==(e.s<0?3:2)):s>5||5==s&&(4==n||c||6==n&&(r>0?i>0?u/p(10,a-i):0:g[m-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return c?(o=M(e),g.length=1,t=t-o-1,g[0]=p(10,(7-t%7)%7),e.e=d(-t/7)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(0==r?(g.length=m,o=1,m--):(g.length=m+1,o=p(10,7-r),g[m]=i>0?(u/p(10,a-i)%p(10,i)|0)*o:0),c)for(;;){if(0==m){(g[0]+=o)==f&&(g[0]=1,++e.e);break}if(g[m]+=o,g[m]!=f)break;g[m--]=0,o=1}for(r=g.length;0===g[--r];)g.pop();if(l&&(e.e>v||e.e<-v))throw Error(h+M(e));return e}function O(e,t){var n,r,i,o,a,s,c,u,h,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),l?P(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r){for((h=a<0)?(n=c,a=-a,s=d.length):(n=d,r=u,s=c.length),a>(i=Math.max(Math.ceil(m/7),s)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=c.length)<(s=d.length))&&(s=i),i=0;i<s;i++)if(c[i]!=d[i]){h=c[i]<d[i];break}a=0}for(h&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,i=d.length-s;i>0;--i)c[s++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(o=i;o&&0===c[--o];)c[o]=f-1;--c[o],c[i]+=f}c[i]-=d[i]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,l?P(t,m):t):new p(0)}function R(e,t,n){var r,i=M(e),o=b(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+T(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+T(-i-1)+o,n&&(r=n-a)>0&&(o+=T(r))):i>=a?(o+=T(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+T(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=T(r))),e.s<0?"-"+o:o}function L(e,t){if(e.length>t)return e.length=t,!0}function D(e){if(!e||"object"!==typeof e)throw Error(c+"Object expected");var t,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(d(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(u+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(u+n+": "+r);this[n]=new this(r)}return this}s=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(u+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!==typeof e)throw Error(u+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!m.test(e))throw Error(u+e);A(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=D,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(s),s.default=s.Decimal=s,o=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},97143:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},25244:function(e,t){!function(e){"use strict";var t="function"===typeof WeakSet,n=Object.keys;function r(e,t){return e===t||e!==e&&t!==t}function i(e){return e.constructor===Object||null==e.constructor}function o(e){return!!e&&"function"===typeof e.then}function a(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var l=t?function(){return new WeakSet}:s;function c(e){return function(t){var n=e||t;return function(e,t,r){void 0===r&&(r=l());var i=!!e&&"object"===typeof e,o=!!t&&"object"===typeof t;if(i||o){var a=i&&r.has(e),s=o&&r.has(t);if(a||s)return a&&s;i&&r.add(e),o&&r.add(t)}return n(e,t,r)}}}function u(e,t,n,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n(e[i],t[i],r))return!1;return!0}function h(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var o={};e.forEach((function(e,a){if(i){var s=!1,l=0;t.forEach((function(t,i){s||o[l]||(s=n(a,i,r)&&n(e,t,r))&&(o[l]=!0),l++})),i=s}}))}return i}var d="_owner",p=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function m(e,t,r,i){var o=n(e),s=o.length;if(n(t).length!==s)return!1;if(s)for(var l=void 0;s-- >0;){if((l=o[s])===d){var c=a(e),u=a(t);if((c||u)&&c!==u)return!1}if(!p(t,l)||!r(e[l],t[l],i))return!1}return!0}function f(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}function g(e,t,n,r){var i=e.size===t.size;if(i&&e.size){var o={};e.forEach((function(e){if(i){var a=!1,s=0;t.forEach((function(t){a||o[s]||(a=n(e,t,r))&&(o[s]=!0),s++})),i=a}}))}return i}var v="function"===typeof Map,y="function"===typeof Set;function _(e){var t="function"===typeof e?e(n):n;function n(e,n,a){if(e===n)return!0;if(e&&n&&"object"===typeof e&&"object"===typeof n){if(i(e)&&i(n))return m(e,n,t,a);var s=Array.isArray(e),l=Array.isArray(n);return s||l?s===l&&u(e,n,t,a):(s=e instanceof Date,l=n instanceof Date,s||l?s===l&&r(e.getTime(),n.getTime()):(s=e instanceof RegExp,l=n instanceof RegExp,s||l?s===l&&f(e,n):o(e)||o(n)?e===n:v&&(s=e instanceof Map,l=n instanceof Map,s||l)?s===l&&h(e,n,t,a):y&&(s=e instanceof Set,l=n instanceof Set,s||l)?s===l&&g(e,n,t,a):m(e,n,t,a)))}return e!==e&&n!==n}return n}var x=_(),b=_((function(){return r})),w=_(c()),S=_(c(r));e.circularDeepEqual=w,e.circularShallowEqual=S,e.createCustomEqual=_,e.deepEqual=x,e.sameValueZeroEqual=r,e.shallowEqual=b,Object.defineProperty(e,"__esModule",{value:!0})}(t)},62110:(e,t,n)=>{"use strict";var r=n(48309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(m){var i=p(n);i&&i!==m&&e(t,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),f=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!f||!f[v])&&(!s||!s[v])){var y=d(n,v);try{c(t,v,y)}catch(_){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case f:case l:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=f,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||b(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===o},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===f},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===_||e.$$typeof===x||e.$$typeof===v)},t.typeOf=b},48309:(e,t,n)=>{"use strict";e.exports=n(746)},50908:(e,t,n)=>{var r=n(68136)(n(97009),"DataView");e.exports=r},29676:(e,t,n)=>{var r=n(85403),i=n(62747),o=n(16037),a=n(94154),s=n(77728);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},38384:(e,t,n)=>{var r=n(43894),i=n(8699),o=n(64957),a=n(87184),s=n(87109);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},95797:(e,t,n)=>{var r=n(68136)(n(97009),"Map");e.exports=r},78059:(e,t,n)=>{var r=n(34086),i=n(9255),o=n(29186),a=n(13423),s=n(73739);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},78319:(e,t,n)=>{var r=n(68136)(n(97009),"Promise");e.exports=r},23924:(e,t,n)=>{var r=n(68136)(n(97009),"Set");e.exports=r},20692:(e,t,n)=>{var r=n(78059),i=n(35774),o=n(41596);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},22854:(e,t,n)=>{var r=n(38384),i=n(20511),o=n(50835),a=n(90707),s=n(18832),l=n(35077);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},87197:(e,t,n)=>{var r=n(97009).Symbol;e.exports=r},46219:(e,t,n)=>{var r=n(97009).Uint8Array;e.exports=r},7091:(e,t,n)=>{var r=n(68136)(n(97009),"WeakMap");e.exports=r},13665:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},18573:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},84903:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},59055:(e,t,n)=>{var r=n(24842);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},32683:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},47538:(e,t,n)=>{var r=n(86478),i=n(34963),o=n(93629),a=n(5174),s=n(26800),l=n(19102),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),d=!n&&!u&&!h&&l(e),p=n||u||h||d,m=p?r(e.length,String):[],f=m.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||m.push(g);return m}},68950:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},41705:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},47897:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},54622:e=>{e.exports=function(e){return e.split("")}},27112:(e,t,n)=>{var r=n(29231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},32526:(e,t,n)=>{var r=n(48528);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},87927:(e,t,n)=>{var r=n(15358),i=n(67056)(r);e.exports=i},39863:(e,t,n)=>{var r=n(87927);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},43079:(e,t,n)=>{var r=n(70152);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,c=a}return c}},2045:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},55182:(e,t,n)=>{var r=n(41705),i=n(73529);e.exports=function e(t,n,o,a,s){var l=-1,c=t.length;for(o||(o=i),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},85099:(e,t,n)=>{var r=n(30372)();e.exports=r},15358:(e,t,n)=>{var r=n(85099),i=n(12742);e.exports=function(e,t){return e&&r(e,t,i)}},98667:(e,t,n)=>{var r=n(43082),i=n(69793);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},61986:(e,t,n)=>{var r=n(41705),i=n(93629);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},39066:(e,t,n)=>{var r=n(87197),i=n(81587),o=n(43581),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},81954:e=>{e.exports=function(e,t){return e>t}},90529:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},24842:(e,t,n)=>{var r=n(2045),i=n(50505),o=n(77167);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},4906:(e,t,n)=>{var r=n(39066),i=n(43141);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},71848:(e,t,n)=>{var r=n(93355),i=n(43141);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},93355:(e,t,n)=>{var r=n(22854),i=n(15305),o=n(92206),a=n(88078),s=n(88383),l=n(93629),c=n(5174),u=n(19102),h="[object Arguments]",d="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,g,v){var y=l(e),_=l(t),x=y?d:s(e),b=_?d:s(t),w=(x=x==h?p:x)==p,S=(b=b==h?p:b)==p,M=x==b;if(M&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(M&&!w)return v||(v=new r),y||u(e)?i(e,t,n,f,g,v):o(e,t,x,n,f,g,v);if(!(1&n)){var E=w&&m.call(e,"__wrapped__"),T=S&&m.call(t,"__wrapped__");if(E||T){var C=E?e.value():e,A=T?t.value():t;return v||(v=new r),g(C,A,n,f,v)}}return!!M&&(v||(v=new r),a(e,t,n,f,g,v))}},8856:(e,t,n)=>{var r=n(22854),i=n(71848);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=n[a])[0],h=e[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var p=new r;if(o)var m=o(h,d,u,e,t,p);if(!(void 0===m?i(d,h,3,o,p):m))return!1}}return!0}},50505:e=>{e.exports=function(e){return e!==e}},26703:(e,t,n)=>{var r=n(74786),i=n(257),o=n(8092),a=n(27907),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},68150:(e,t,n)=>{var r=n(39066),i=n(24635),o=n(43141),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},56025:(e,t,n)=>{var r=n(97080),i=n(24322),o=n(2100),a=n(93629),s=n(10038);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},43654:(e,t,n)=>{var r=n(62936),i=n(75964),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},92580:e=>{e.exports=function(e,t){return e<t}},53849:(e,t,n)=>{var r=n(87927),i=n(21473);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},97080:(e,t,n)=>{var r=n(8856),i=n(79091),o=n(50284);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},24322:(e,t,n)=>{var r=n(71848),i=n(26181),o=n(75658),a=n(25823),s=n(25072),l=n(50284),c=n(69793);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},93226:(e,t,n)=>{var r=n(68950),i=n(98667),o=n(56025),a=n(53849),s=n(19179),l=n(16194),c=n(94480),u=n(2100),h=n(93629);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var d=-1;t=r(t,l(o));var p=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return s(p,(function(e,t){return c(e,t,n)}))}},9586:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4084:(e,t,n)=>{var r=n(98667);e.exports=function(e){return function(t){return r(t,e)}}},7255:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},58794:(e,t,n)=>{var r=n(2100),i=n(64262),o=n(79156);e.exports=function(e,t){return o(i(e,t,r),e+"")}},7532:(e,t,n)=>{var r=n(71547),i=n(48528),o=n(2100),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},2646:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},59204:(e,t,n)=>{var r=n(87927);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},19179:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},86478:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2446:(e,t,n)=>{var r=n(87197),i=n(68950),o=n(93629),a=n(70152),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},20821:(e,t,n)=>{var r=n(26050),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},16194:e=>{e.exports=function(e){return function(t){return e(t)}}},39602:(e,t,n)=>{var r=n(20692),i=n(59055),o=n(32683),a=n(60075),s=n(77730),l=n(22230);e.exports=function(e,t,n){var c=-1,u=i,h=e.length,d=!0,p=[],m=p;if(n)d=!1,u=o;else if(h>=200){var f=t?null:s(e);if(f)return l(f);d=!1,u=a,m=new r}else m=t?[]:p;e:for(;++c<h;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,d&&v===v){for(var y=m.length;y--;)if(m[y]===v)continue e;t&&m.push(v),p.push(g)}else u(m,v,n)||(m!==p&&m.push(v),p.push(g))}return p}},60075:e=>{e.exports=function(e,t){return e.has(t)}},43082:(e,t,n)=>{var r=n(93629),i=n(25823),o=n(10170),a=n(63518);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},69813:(e,t,n)=>{var r=n(2646);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},88558:(e,t,n)=>{var r=n(70152);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,a=r(e),s=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&e<t||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},94480:(e,t,n)=>{var r=n(88558);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},65525:(e,t,n)=>{var r=n(97009)["__core-js_shared__"];e.exports=r},67056:(e,t,n)=>{var r=n(21473);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},30372:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},10322:(e,t,n)=>{var r=n(69813),i=n(47302),o=n(27580),a=n(63518);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},95481:(e,t,n)=>{var r=n(56025),i=n(21473),o=n(12742);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[l?t[c]:c]:void 0}}},56381:(e,t,n)=>{var r=n(7255),i=n(3195),o=n(91495);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},77730:(e,t,n)=>{var r=n(23924),i=n(19694),o=n(22230),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},48528:(e,t,n)=>{var r=n(68136),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},15305:(e,t,n)=>{var r=n(20692),i=n(47897),o=n(60075);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var m=-1,f=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++m<u;){var v=e[m],y=t[m];if(a)var _=c?a(y,v,m,t,e,l):a(v,y,m,e,t,l);if(void 0!==_){if(_)continue;f=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||s(v,e,n,a,l)))return g.push(t)}))){f=!1;break}}else if(v!==y&&!s(v,y,n,a,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},92206:(e,t,n)=>{var r=n(87197),i=n(46219),o=n(29231),a=n(15305),s=n(90234),l=n(22230),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var m=1&r;if(p||(p=l),e.size!=t.size&&!m)return!1;var f=d.get(e);if(f)return f==t;r|=2,d.set(e,t);var g=a(p(e),p(t),r,c,h,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},88078:(e,t,n)=>{var r=n(38248),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in t:i.call(t,d)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var f=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<u;){var v=e[d=c[h]],y=t[d];if(o)var _=l?o(y,v,d,t,e,s):o(v,y,d,e,t,s);if(!(void 0===_?v===y||a(v,y,n,o,s):_)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var x=e.constructor,b=t.constructor;x==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(f=!1)}return s.delete(e),s.delete(t),f}},31032:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},38248:(e,t,n)=>{var r=n(61986),i=n(65918),o=n(12742);e.exports=function(e){return r(e,o,i)}},32799:(e,t,n)=>{var r=n(55964);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},79091:(e,t,n)=>{var r=n(25072),i=n(12742);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},68136:(e,t,n)=>{var r=n(26703),i=n(30040);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},81587:(e,t,n)=>{var r=n(87197),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},65918:(e,t,n)=>{var r=n(84903),i=n(68174),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},88383:(e,t,n)=>{var r=n(50908),i=n(95797),o=n(78319),a=n(23924),s=n(7091),l=n(39066),c=n(27907),u="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",m="[object DataView]",f=c(r),g=c(i),v=c(o),y=c(a),_=c(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=m||i&&x(new i)!=u||o&&x(o.resolve())!=h||a&&x(new a)!=d||s&&x(new s)!=p)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return m;case g:return u;case v:return h;case y:return d;case _:return p}return t}),e.exports=x},30040:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},86417:(e,t,n)=>{var r=n(43082),i=n(34963),o=n(93629),a=n(26800),s=n(24635),l=n(69793);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,h=!1;++c<u;){var d=l(t[c]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&s(u)&&a(d,u)&&(o(e)||i(e))}},47302:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},85403:(e,t,n)=>{var r=n(49620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},62747:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},16037:(e,t,n)=>{var r=n(49620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},94154:(e,t,n)=>{var r=n(49620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},77728:(e,t,n)=>{var r=n(49620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},73529:(e,t,n)=>{var r=n(87197),i=n(34963),o=n(93629),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},26800:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},3195:(e,t,n)=>{var r=n(29231),i=n(21473),o=n(26800),a=n(8092);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},25823:(e,t,n)=>{var r=n(93629),i=n(70152),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},55964:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:(e,t,n)=>{var r=n(65525),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},62936:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},25072:(e,t,n)=>{var r=n(8092);e.exports=function(e){return e===e&&!r(e)}},43894:e=>{e.exports=function(){this.__data__=[],this.size=0}},8699:(e,t,n)=>{var r=n(27112),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},64957:(e,t,n)=>{var r=n(27112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},87184:(e,t,n)=>{var r=n(27112);e.exports=function(e){return r(this.__data__,e)>-1}},87109:(e,t,n)=>{var r=n(27112);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},34086:(e,t,n)=>{var r=n(29676),i=n(38384),o=n(95797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},9255:(e,t,n)=>{var r=n(32799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},29186:(e,t,n)=>{var r=n(32799);e.exports=function(e){return r(this,e).get(e)}},13423:(e,t,n)=>{var r=n(32799);e.exports=function(e){return r(this,e).has(e)}},73739:(e,t,n)=>{var r=n(32799);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},90234:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},50284:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},14634:(e,t,n)=>{var r=n(49151);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},49620:(e,t,n)=>{var r=n(68136)(Object,"create");e.exports=r},75964:(e,t,n)=>{var r=n(12709)(Object.keys,Object);e.exports=r},49494:(e,t,n)=>{e=n.nmd(e);var r=n(31032),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},43581:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},12709:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},64262:(e,t,n)=>{var r=n(13665),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(l),r(e,this,c)}}},97009:(e,t,n)=>{var r=n(31032),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},35774:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},41596:e=>{e.exports=function(e){return this.__data__.has(e)}},22230:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},79156:(e,t,n)=>{var r=n(7532),i=n(83197)(r);e.exports=i},83197:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},20511:(e,t,n)=>{var r=n(38384);e.exports=function(){this.__data__=new r,this.size=0}},50835:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},90707:e=>{e.exports=function(e){return this.__data__.get(e)}},18832:e=>{e.exports=function(e){return this.__data__.has(e)}},35077:(e,t,n)=>{var r=n(38384),i=n(95797),o=n(78059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},77167:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},27580:(e,t,n)=>{var r=n(54622),i=n(47302),o=n(42110);e.exports=function(e){return i(e)?o(e):r(e)}},10170:(e,t,n)=>{var r=n(14634),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},69793:(e,t,n)=>{var r=n(70152);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},27907:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},26050:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},42110:e=>{var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+r+")"+"?",l="[\\ufe0e\\ufe0f]?",c=l+s+("(?:\\u200d(?:"+[i,o,a].join("|")+")"+l+s+")*"),u="(?:"+[i+n+"?",n,o,a,t].join("|")+")",h=RegExp(r+"(?="+r+")|"+u+c,"g");e.exports=function(e){return e.match(h)||[]}},71547:e=>{e.exports=function(e){return function(){return e}}},48573:(e,t,n)=>{var r=n(8092),i=n(50072),o=n(42582),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,h,d,p,m=0,f=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,m=t,h=e.apply(r,n)}function _(e){return m=e,d=setTimeout(b,t),f?y(e):h}function x(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-m>=u}function b(){var e=i();if(x(e))return w(e);d=setTimeout(b,function(e){var n=t-(e-p);return g?s(n,u-(e-m)):n}(e))}function w(e){return d=void 0,v&&l?y(e):(l=c=void 0,h)}function S(){var e=i(),n=x(e);if(l=arguments,c=this,p=e,n){if(void 0===d)return _(p);if(g)return clearTimeout(d),d=setTimeout(b,t),y(p)}return void 0===d&&(d=setTimeout(b,t)),h}return t=o(t)||0,r(n)&&(f=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==d&&clearTimeout(d),m=0,l=p=c=d=void 0},S.flush=function(){return void 0===d?h:w(i())},S}},29231:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},82730:(e,t,n)=>{var r=n(18573),i=n(39863),o=n(56025),a=n(93629),s=n(3195);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},61211:(e,t,n)=>{var r=n(95481)(n(51475));e.exports=r},51475:(e,t,n)=>{var r=n(2045),i=n(56025),o=n(39753),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},5008:(e,t,n)=>{var r=n(55182),i=n(72034);e.exports=function(e,t){return r(i(e,t),1)}},26181:(e,t,n)=>{var r=n(98667);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},75658:(e,t,n)=>{var r=n(90529),i=n(86417);e.exports=function(e,t){return null!=e&&i(e,t,r)}},2100:e=>{e.exports=function(e){return e}},34963:(e,t,n)=>{var r=n(4906),i=n(43141),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},93629:e=>{var t=Array.isArray;e.exports=t},21473:(e,t,n)=>{var r=n(74786),i=n(24635);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},65127:(e,t,n)=>{var r=n(39066),i=n(43141);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},5174:(e,t,n)=>{e=n.nmd(e);var r=n(97009),i=n(49488),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},18111:(e,t,n)=>{var r=n(71848);e.exports=function(e,t){return r(e,t)}},74786:(e,t,n)=>{var r=n(39066),i=n(8092);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},24635:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},82066:(e,t,n)=>{var r=n(30298);e.exports=function(e){return r(e)&&e!=+e}},42854:e=>{e.exports=function(e){return null==e}},30298:(e,t,n)=>{var r=n(39066),i=n(43141);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},8092:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},43141:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},26769:(e,t,n)=>{var r=n(39066),i=n(93629),o=n(43141);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},70152:(e,t,n)=>{var r=n(39066),i=n(43141);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},19102:(e,t,n)=>{var r=n(68150),i=n(16194),o=n(49494),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},12742:(e,t,n)=>{var r=n(47538),i=n(43654),o=n(21473);e.exports=function(e){return o(e)?r(e):i(e)}},15727:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},72034:(e,t,n)=>{var r=n(68950),i=n(56025),o=n(53849),a=n(93629);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},37702:(e,t,n)=>{var r=n(32526),i=n(15358),o=n(56025);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},29627:(e,t,n)=>{var r=n(43079),i=n(81954),o=n(2100);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},49151:(e,t,n)=>{var r=n(78059);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},66452:(e,t,n)=>{var r=n(43079),i=n(92580),o=n(2100);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},19694:e=>{e.exports=function(){}},50072:(e,t,n)=>{var r=n(97009);e.exports=function(){return r.Date.now()}},10038:(e,t,n)=>{var r=n(9586),i=n(4084),o=n(25823),a=n(69793);e.exports=function(e){return o(e)?r(a(e)):i(e)}},66222:(e,t,n)=>{var r=n(56381)();e.exports=r},14064:(e,t,n)=>{var r=n(47897),i=n(56025),o=n(59204),a=n(93629),s=n(3195);e.exports=function(e,t,n){var l=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},64286:(e,t,n)=>{var r=n(55182),i=n(93226),o=n(58794),a=n(3195),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},68174:e=>{e.exports=function(){return[]}},49488:e=>{e.exports=function(){return!1}},33038:(e,t,n)=>{var r=n(48573),i=n(8092);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},91495:(e,t,n)=>{var r=n(42582),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},39753:(e,t,n)=>{var r=n(91495);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},42582:(e,t,n)=>{var r=n(20821),i=n(8092),o=n(70152),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},63518:(e,t,n)=>{var r=n(2446);e.exports=function(e){return null==e?"":r(e)}},66339:(e,t,n)=>{var r=n(56025),i=n(39602);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},52085:(e,t,n)=>{var r=n(10322)("toUpperCase");e.exports=r},31725:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},48872:function(e){(function(){var t,n,r,i,o,a;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-o)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),a=1e9*process.uptime(),o=i-a):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},80888:(e,t,n)=>{"use strict";var r=n(79047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},52007:(e,t,n)=>{e.exports=n(80888)()},79047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},55475:(e,t,n)=>{for(var r=n(48872),i="undefined"===typeof window?n.g:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],l=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!l){var u=0,h=0,d=[];s=function(e){if(0===d.length){var t=r(),n=Math.max(0,16.666666666666668-(t-u));u=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return d.push({handle:++h,callback:e,cancelled:!1}),h},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}},15950:function(e){e.exports=function(){"use strict";function e(e,r,i,o,a){!function e(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}var d=n[r],p=i,m=o;for(t(n,i,r),a(n[o],d)>0&&t(n,i,o);p<m;){for(t(n,p,m),p++,m--;a(n[p],d)<0;)p++;for(;a(n[m],d)>0;)m--}0===a(n[i],d)?t(n,i,m):t(n,++m,o),m<=r&&(i=m+1),r<=m&&(o=m-1)}}(e,r,i||0,o||e.length-1,a||n)}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}var r=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];s(i,e.leaf?r(a):a)}return i}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(t,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;e(t,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(e){var t=this.data,n=[];if(!p(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?r(a):a;p(e,s)&&(t.leaf?n.push(a):d(e,s)?this._all(a,n):i.push(a))}t=i.pop()}return n},r.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],o=t.leaf?this.toBBox(i):i;if(p(e,o)){if(t.leaf||d(e,o))return!0;n.push(i)}}t=n.pop()}return!1},r.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},r.prototype.clear=function(){return this.data=m([]),this},r.prototype.remove=function(e,t){if(!e)return this;for(var n,r,o,a=this.data,s=this.toBBox(e),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=i(e,a.children,t);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(e){return e},r.prototype.compareMinX=function(e,t){return e.minX-t.minX},r.prototype.compareMinY=function(e,t){return e.minY-t.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(e){return this.data=e,this},r.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},r.prototype._build=function(e,t,n,r){var i,a=n-t+1,s=this._maxEntries;if(a<=s)return o(i=m(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=m([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));f(e,t,n,c,this.compareMinX);for(var u=t;u<=n;u+=c){var h=Math.min(u+c-1,n);f(e,u,h,l,this.compareMinY);for(var d=u;d<=h;d+=l){var p=Math.min(d+l-1,h);i.children.push(this._build(e,d,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],c=u(l),h=(d=e,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);h<o?(o=h,i=c<i?c:i,a=l):h===o&&c<i&&(i=c,a=l)}t=a||t.children[0]}var d,p;return t},r.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],o=this._chooseSubtree(r,this.data,t,i);for(o.children.push(e),s(o,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},r.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=m(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(e,t,n){for(var r,i,o,s,l,c,h,d=1/0,p=1/0,m=t;m<=n-t;m++){var f=a(e,0,m,this.toBBox),g=a(e,m,n,this.toBBox),v=(i=f,o=g,s=void 0,l=void 0,c=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),y=u(f)+u(g);v<d?(d=v,r=m,p=y<p?y:p):v===d&&y<p&&(p=y,r=m)}return r||n-t},r.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:l,i=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},r.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,o=a(e,0,t,i),l=a(e,n-t,n,i),c=h(o)+h(l),u=t;u<n-t;u++){var d=e.children[u];s(o,e.leaf?i(d):d),c+=h(o)}for(var p=n-t-1;p>=t;p--){var m=e.children[p];s(l,e.leaf?i(m):m),c+=h(l)}return c},r.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},r.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},r}()},34463:(e,t,n)=>{"use strict";var r=n(72791),i=n(31725),o=n(45296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,m={},f={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(f,e)||!p.call(m,e)&&(d.test(e)?f[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,M=60107,E=60108,T=60114,C=60109,A=60110,P=60112,O=60113,R=60120,L=60115,D=60116,k=60121,I=60128,F=60129,N=60130,z=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;w=U("react.element"),S=U("react.portal"),M=U("react.fragment"),E=U("react.strict_mode"),T=U("react.profiler"),C=U("react.provider"),A=U("react.context"),P=U("react.forward_ref"),O=U("react.suspense"),R=U("react.suspense_list"),L=U("react.memo"),D=U("react.lazy"),k=U("react.block"),U("react.scope"),I=U("react.opaque.id"),F=U("react.debug_trace_mode"),N=U("react.offscreen"),z=U("react.legacy_hidden")}var j,B="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function G(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G(e):""}function q(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case M:return"Fragment";case S:return"Portal";case T:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return Z(e.type);case k:return Z(e._render);case D:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function $(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ce(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,ge,ve=(ge=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(_e).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ae=null,Pe=null;function Oe(e){if(e=ri(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=oi(t),Ce(e.stateNode,e.type,t))}}function Re(e){Ae?Pe?Pe.push(e):Pe=[e]:Ae=e}function Le(){if(Ae){var e=Ae,t=Pe;if(Pe=Ae=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function De(e,t){return e(t)}function ke(e,t,n,r,i){return e(t,n,r,i)}function Ie(){}var Fe=De,Ne=!1,ze=!1;function Ue(){null===Ae&&null===Pe||(Ie(),Le())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Be=!1;if(h)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ge){Be=!1}function Ge(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var He=!1,We=null,qe=!1,Ze=null,$e={onError:function(e){He=!0,We=e}};function Xe(e,t,n,r,i,o,a,s,l){He=!1,We=null,Ge.apply($e,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ke(e)!==e)throw Error(a(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qe(i),e;if(o===r)return Qe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,lt=null,ct=null,ut=new Map,ht=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=mt(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=ni(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function _t(e,t,n){yt(e)&&n.delete(t)}function xt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&yt(st)&&(st=null),null!==lt&&yt(lt)&&(lt=null),null!==ct&&yt(ct)&&(ct=null),ut.forEach(_t),ht.forEach(_t)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xt)))}function wt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&bt(st,e),null!==lt&&bt(lt,e),null!==ct&&bt(ct,e),ut.forEach(t),ht.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)vt(n),null===n.blockedOn&&dt.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Et={},Tt={};function Ct(e){if(Et[e])return Et[e];if(!Mt[e])return e;var t,n=Mt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Mt.animationend.animation,delete Mt.animationiteration.animation,delete Mt.animationstart.animation),"TransitionEvent"in window||delete Mt.transitionend.transition);var At=Ct("animationend"),Pt=Ct("animationiteration"),Ot=Ct("animationstart"),Rt=Ct("transitionend"),Lt=new Map,Dt=new Map,kt=["abort","abort",At,"animationEnd",Pt,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function It(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Lt.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Ft=8;function Nt(e){if(0!==(1&e))return Ft=15,1;if(0!==(2&e))return Ft=14,2;if(0!==(4&e))return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):0!==(32&e)?(Ft=11,32):0!==(t=192&e)?(Ft=10,t):0!==(256&e)?(Ft=9,256):0!==(t=3584&e)?(Ft=8,t):0!==(4096&e)?(Ft=7,4096):0!==(t=4186112&e)?(Ft=6,t):0!==(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):0!==(134217728&e)?(Ft=3,134217728):0!==(t=805306368&e)?(Ft=2,t):0!==(1073741824&e)?(Ft=1,1073741824):(Ft=8,e)}function zt(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Ft=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=Nt(l),i=Ft):0!==(s&=o)&&(r=Nt(s),i=Ft)}else 0!==(o=n&~a)?(r=Nt(o),i=Ft):0!==s&&(r=Nt(s),i=Ft);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Nt(t),i<=Ft)return t;Ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?jt(10,t):e;case 10:return 0===(e=Bt(192&~t))?jt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Bt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/qt|0)|0},Wt=Math.log,qt=Math.LN2;var Zt=o.unstable_UserBlockingPriority,$t=o.unstable_runWithPriority,Xt=!0;function Kt(e,t,n,r){Ne||Ie();var i=Qt,o=Ne;Ne=!0;try{ke(i,e,t,n,r)}finally{(Ne=o)||Ue()}}function Yt(e,t,n,r){$t(Zt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var i;if(Xt)if((i=0===(4&t))&&0<at.length&&-1<pt.indexOf(e))e=mt(null,e,t,n,r),at.push(e);else{var o=Jt(e,t,n,r);if(null===o)i&&ft(e,r);else{if(i){if(-1<pt.indexOf(e))return e=mt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=gt(st,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ut.set(o,gt(ut.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ht.set(o,gt(ht.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;ft(e,r)}Ir(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var o=Ke(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Ye(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ir(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function ln(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var cn,un,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=ln(dn),mn=i({},dn,{view:0,detail:0}),fn=ln(mn),gn=i({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,un=e.screenY-hn.screenY):un=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=ln(gn),yn=ln(i({},gn,{dataTransfer:0})),_n=ln(i({},mn,{relatedTarget:0})),xn=ln(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=ln(bn),Sn=ln(i({},dn,{data:0})),Mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function An(){return Cn}var Pn=i({},mn,{key:function(e){if(e.key){var t=Mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=ln(Pn),Rn=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=ln(i({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Dn=ln(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=ln(kn),Fn=[9,13,27,32],Nn=h&&"CompositionEvent"in window,zn=null;h&&"documentMode"in document&&(zn=document.documentMode);var Un=h&&"TextEvent"in window&&!zn,jn=h&&(!Nn||zn&&8<zn&&11>=zn),Bn=String.fromCharCode(32),Vn=!1;function Gn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function $n(e,t,n,r){Re(r),0<(t=Nr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Kn=null;function Yn(e){Pr(e,0)}function Qn(e){if(Y(ii(e)))return e}function Jn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Xn&&(Xn.detachEvent("onpropertychange",or),Kn=Xn=null)}function or(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];if($n(t,Kn,e,Te(e)),e=Yn,Ne)e(t);else{Ne=!0;try{De(e,t)}finally{Ne=!1,Ue()}}}}function ar(e,t,n){"focusin"===e?(ir(),Kn=n,(Xn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function lr(e,t){if("click"===e)return Qn(t)}function cr(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function dr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,_r=null,xr=null,br=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==_r||_r!==Q(r)||("selectionStart"in(r=_r)&&vr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&dr(br,r)||(br=r,0<(r=Nr(xr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_r)))}It("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),It("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),It(kt,2);for(var Mr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Mr.length;Er++)Dt.set(Mr[Er],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Ar(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,c){if(Xe.apply(this,arguments),He){if(!He)throw Error(a(198));var u=We;He=!1,We=null,qe||(qe=!0,Ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Ar(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Ar(i,s,c),o=l}}}if(qe)throw e=Ze,qe=!1,Ze=null,e}function Or(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(kr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Cr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ai(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),kr(o,e,i,t),a.add(s))}function kr(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=Kt;break;case 1:i=Yt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ir(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(ze)return e(t,n);ze=!0;try{Fe(e,t,n)}finally{ze=!1,Ue()}}((function(){var r=o,i=Te(n),a=[];e:{var s=Lt.get(e);if(void 0!==s){var l=pn,c=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":l=On;break;case"focusin":c="focus",l=_n;break;case"focusout":c="blur",l=_n;break;case"beforeblur":case"afterblur":l=_n;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case At:case Pt:case Ot:l=xn;break;case Rt:l=Dn;break;case"scroll":l=fn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==d&&(null!=(f=je(m,d))&&u.push(Fr(m,f,p)))),h)break;m=m.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=Ke(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=vn,f="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,f="onPointerLeave",d="onPointerEnter",m="pointer"),h=null==l?s:ii(l),p=null==c?s:ii(c),(s=new u(f,m+"leave",l,n,i)).target=h,s.relatedTarget=p,f=null,ni(i)===r&&((u=new u(d,m+"enter",c,n,i)).target=p,u.relatedTarget=h,f=u),h=f,l&&c)e:{for(d=c,m=0,p=u=l;p;p=zr(p))m++;for(p=0,f=d;f;f=zr(f))p++;for(;0<m-p;)u=zr(u),m--;for(;0<p-m;)d=zr(d),p--;for(;m--;){if(u===d||null!==d&&u===d.alternate)break e;u=zr(u),d=zr(d)}u=null}else u=null;null!==l&&Ur(a,s,l,u,!1),null!==c&&null!==h&&Ur(a,h,c,u,!0)}if("select"===(l=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(Zn(s))if(er)g=cr;else{g=sr;var v=ar}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=lr);switch(g&&(g=g(e,r))?$n(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ie(s,"number",s.value)),v=r?ii(r):window,e){case"focusin":(Zn(v)||"true"===v.contentEditable)&&(_r=v,xr=r,br=null);break;case"focusout":br=xr=_r=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(a,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Wn?Gn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Wn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(v=Nr(r,_)).length&&(_=new Sn(_,e,null,n,i),a.push({event:_,listeners:v}),y?_.data=y:null!==(y=Hn(n))&&(_.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Nn&&Gn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Nr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Pr(a,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(Fr(e,o,i)),null!=(o=je(e,t))&&r.push(Fr(e,o,i))),e=e.return}return r}function zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=je(n,o))&&a.unshift(Fr(n,l,s)):i||null!=(l=je(n,o))&&a.push(Fr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function jr(){}var Br=null,Vr=null;function Gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,qr="function"===typeof clearTimeout?clearTimeout:void 0;function Zr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function $r(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Kr=0;var Yr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Yr,Jr="__reactProps$"+Yr,ei="__reactContainer$"+Yr,ti="__reactEvents$"+Yr;function ni(e){var t=e[Qr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Qr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[Qr])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Qr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function oi(e){return e[Jr]||null}function ai(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],li=-1;function ci(e){return{current:e}}function ui(e){0>li||(e.current=si[li],si[li]=null,li--)}function hi(e,t){li++,si[li]=e.current,e.current=t}var di={},pi=ci(di),mi=ci(!1),fi=di;function gi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ui(mi),ui(pi)}function _i(e,t,n){if(pi.current!==di)throw Error(a(168));hi(pi,t),hi(mi,n)}function xi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,Z(t)||"Unknown",o));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,fi=pi.current,hi(pi,e),hi(mi,mi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=xi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,ui(mi),ui(pi),hi(pi,e)):ui(mi),hi(mi,n)}var Si=null,Mi=null,Ei=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Ai=o.unstable_shouldYield,Pi=o.unstable_requestPaint,Oi=o.unstable_now,Ri=o.unstable_getCurrentPriorityLevel,Li=o.unstable_ImmediatePriority,Di=o.unstable_UserBlockingPriority,ki=o.unstable_NormalPriority,Ii=o.unstable_LowPriority,Fi=o.unstable_IdlePriority,Ni={},zi=void 0!==Pi?Pi:function(){},Ui=null,ji=null,Bi=!1,Vi=Oi(),Gi=1e4>Vi?Oi:function(){return Oi()-Vi};function Hi(){switch(Ri()){case Li:return 99;case Di:return 98;case ki:return 97;case Ii:return 96;case Fi:return 95;default:throw Error(a(332))}}function Wi(e){switch(e){case 99:return Li;case 98:return Di;case 97:return ki;case 96:return Ii;case 95:return Fi;default:throw Error(a(332))}}function qi(e,t){return e=Wi(e),Ei(e,t)}function Zi(e,t,n){return e=Wi(e),Ti(e,t,n)}function $i(){if(null!==ji){var e=ji;ji=null,Ci(e)}Xi()}function Xi(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Li,$i),n}finally{Bi=!1}}}var Ki=b.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Qi=ci(null),Ji=null,eo=null,to=null;function no(){to=eo=Ji=null}function ro(e){var t=Qi.current;ui(Qi),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Ji=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Na=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Ji)throw Error(a(308));eo=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mo(e,t,n,r){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?a=u:s.next=u,s=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==a){for(d=o.baseState,s=0,h=u=c=null;;){l=a.lane;var p=a.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,f=a;switch(l=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,l);break e}d=m;break e;case 3:m.flags=-4097&m.flags|64;case 0:if(null===(l="function"===typeof(m=f.payload)?m.call(p,d,l):m)||void 0===l)break e;d=i({},d,l);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(c=d),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,Bs|=s,e.lanes=s,e.memoizedState=d}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var go=(new r.Component).refs;function vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dl(),i=pl(e),o=uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),ml(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dl(),i=pl(e),o=uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),ml(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),r=pl(e),i=uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ho(e,i),ml(e,r,n)}};function _o(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,o))}function xo(e,t,n){var r=!1,i=di,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=vi(t)?fi:pi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):di),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function bo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=go,lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=vi(t)?fi:pi.current,i.context=gi(e,o)),mo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&yo.enqueueReplaceState(i,i.state,null),mo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var So=Array.isArray;function Mo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===go&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Eo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function To(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Kl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Mo(e,t,n),r.return=e,r):((r=Zl(n.type,n.key,n.props,null,e.mode,r)).ref=Mo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=$l(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Kl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Zl(t.type,t.key,t.props,null,e.mode,n)).ref=Mo(e,null,t),n.return=e,n;case S:return(t=Yl(t,e.mode,n)).return=e,t}if(So(t)||V(t))return(t=$l(t,e.mode,n,null)).return=e,t;Eo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===M?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null}if(So(n)||V(n))return null!==i?null:h(e,t,n,r,null);Eo(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===M?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||V(r))return h(t,e=e.get(n)||null,r,i,null);Eo(t,r)}return null}function f(i,a,s,l){for(var c=null,u=null,h=a,f=a=0,g=null;null!==h&&f<s.length;f++){h.index>f?(g=h,h=null):g=h.sibling;var v=p(i,h,s[f],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),a=o(v,a,f),null===u?c=v:u.sibling=v,u=v,h=g}if(f===s.length)return n(i,h),c;if(null===h){for(;f<s.length;f++)null!==(h=d(i,s[f],l))&&(a=o(h,a,f),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);f<s.length;f++)null!==(g=m(h,i,f,s[f],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?f:g.key),a=o(g,a,f),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,s,l,c){var u=V(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,f=s,g=s=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var _=p(i,f,y.value,c);if(null===_){null===f&&(f=v);break}e&&f&&null===_.alternate&&t(i,f),s=o(_,s,g),null===h?u=_:h.sibling=_,h=_,f=v}if(y.done)return n(i,f),u;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return u}for(f=r(i,f);!y.done;g++,y=l.next())null!==(y=m(f,i,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&f.forEach((function(e){return t(i,e)})),u}return function(e,r,o,l){var c="object"===typeof o&&null!==o&&o.type===M&&null===o.key;c&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case w:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(o.type===M){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=Mo(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===M?((r=$l(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Zl(o.type,o.key,o.props,null,e.mode,l)).ref=Mo(e,r,o),l.return=e,e=l)}return s(e);case S:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Yl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Kl(o,e.mode,l)).return=e,e=r),s(e);if(So(o))return f(e,r,o,l);if(V(o))return g(e,r,o,l);if(u&&Eo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,Z(e.type)||"Component"))}return n(e,r)}}var Co=To(!0),Ao=To(!1),Po={},Oo=ci(Po),Ro=ci(Po),Lo=ci(Po);function Do(e){if(e===Po)throw Error(a(174));return e}function ko(e,t){switch(hi(Lo,t),hi(Ro,e),hi(Oo,Po),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:me(null,"");break;default:t=me(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Oo),hi(Oo,t)}function Io(){ui(Oo),ui(Ro),ui(Lo)}function Fo(e){Do(Lo.current);var t=Do(Oo.current),n=me(t,e.type);t!==n&&(hi(Ro,e),hi(Oo,n))}function No(e){Ro.current===e&&(ui(Oo),ui(Ro))}var zo=ci(0);function Uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=null,Bo=null,Vo=!1;function Go(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wo(e){if(Vo){var t=Bo;if(t){var n=t;if(!Ho(e,t)){if(!(t=$r(n.nextSibling))||!Ho(e,t))return e.flags=-1025&e.flags|2,Vo=!1,void(jo=e);Go(jo,n)}jo=e,Bo=$r(t.firstChild)}else e.flags=-1025&e.flags|2,Vo=!1,jo=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jo=e}function Zo(e){if(e!==jo)return!1;if(!Vo)return qo(e),Vo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Bo;t;)Go(e,t),t=$r(t.nextSibling);if(qo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Bo=$r(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Bo=null}}else Bo=jo?$r(e.stateNode.nextSibling):null;return!0}function $o(){Bo=jo=null,Vo=!1}var Xo=[];function Ko(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var Yo=b.ReactCurrentDispatcher,Qo=b.ReactCurrentBatchConfig,Jo=0,ea=null,ta=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,i,o){if(Jo=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yo.current=null===e||null===e.memoizedState?Da:ka,e=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,Yo.current=Ia,e=n(r,i)}while(ia)}if(Yo.current=La,t=null!==ta&&null!==ta.next,Jo=0,na=ta=ea=null,ra=!1,t)throw Error(a(300));return e}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function ca(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ua(e,t){return"function"===typeof t?t(e):t}function ha(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,c=i;do{var u=c.lane;if((Jo&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=h,o=r):l=l.next=h,ea.lanes|=u,Bs|=u}c=c.next}while(null!==c&&c!==i);null===l?o=r:l.next=s,ur(r,t.memoizedState)||(Na=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function da(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);ur(o,t.memoizedState)||(Na=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function pa(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Jo&e)===e)&&(t._workInProgressVersionPrimary=r,Xo.push(t))),e)return n(t._source);throw Xo.push(t),Error(a(350))}function ma(e,t,n,r){var i=Ds;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Yo.current,c=l.useState((function(){return pa(i,t,n)})),u=c[1],h=c[0];c=na;var d=e.memoizedState,p=d.refs,m=p.getSnapshot,f=d.source;d=d.subscribe;var g=ea;return e.memoizedState={refs:p,source:t,subscribe:r},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=u;var e=o(t._source);if(!ur(s,e)){e=n(t._source),ur(h,e)||(u(e),e=pl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-Ht(a),c=1<<l;r[l]|=e,a&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),ur(m,n)&&ur(f,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ua,lastRenderedState:h}).dispatch=u=Ra.bind(null,ea,e),c.queue=e,c.baseQueue=null,h=pa(i,t,n),c.memoizedState=c.baseState=h),h}function fa(e,t,n){return ma(ca(),e,t,n)}function ga(e){var t=la();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e}).dispatch=Ra.bind(null,ea,e),[t.memoizedState,e]}function va(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ya(e){return e={current:e},la().memoizedState=e}function _a(){return ca().memoizedState}function xa(e,t,n,r){var i=la();ea.flags|=e,i.memoizedState=va(1|t,n,void 0,void 0===r?null:r)}function ba(e,t,n,r){var i=ca();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void va(t,n,o,r)}ea.flags|=e,i.memoizedState=va(1|t,n,o,r)}function wa(e,t){return xa(516,4,e,t)}function Sa(e,t){return ba(516,4,e,t)}function Ma(e,t){return ba(4,2,e,t)}function Ea(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ta(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,Ea.bind(null,t,e),n)}function Ca(){}function Aa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Oa(e,t){var n=Hi();qi(98>n?98:n,(function(){e(!0)})),qi(97<n?97:n,(function(){var n=Qo.transition;Qo.transition=1;try{e(!1),t()}finally{Qo.transition=n}}))}function Ra(e,t,n){var r=dl(),i=pl(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ia=ra=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,ur(l,s))return}catch(c){}ml(e,i,r)}}var La={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},Da={readContext:ao,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xa(4,2,Ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xa(4,2,e,t)},useMemo:function(e,t){var n=la();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=la();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ra.bind(null,ea,e),[r.memoizedState,e]},useRef:ya,useState:ga,useDebugValue:Ca,useDeferredValue:function(e){var t=ga(e),n=t[0],r=t[1];return wa((function(){var t=Qo.transition;Qo.transition=1;try{r(e)}finally{Qo.transition=t}}),[e]),n},useTransition:function(){var e=ga(!1),t=e[0];return ya(e=Oa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=la();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ma(r,e,t,n)},useOpaqueIdentifier:function(){if(Vo){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Kr++).toString(36))),Error(a(355))})),n=ga(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,va(5,(function(){n("r:"+(Kr++).toString(36))}),void 0,null)),t}return ga(t="r:"+(Kr++).toString(36)),t},unstable_isNewReconciler:!1},ka={readContext:ao,useCallback:Aa,useContext:ao,useEffect:Sa,useImperativeHandle:Ta,useLayoutEffect:Ma,useMemo:Pa,useReducer:ha,useRef:_a,useState:function(){return ha(ua)},useDebugValue:Ca,useDeferredValue:function(e){var t=ha(ua),n=t[0],r=t[1];return Sa((function(){var t=Qo.transition;Qo.transition=1;try{r(e)}finally{Qo.transition=t}}),[e]),n},useTransition:function(){var e=ha(ua)[0];return[_a().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ha(ua)[0]},unstable_isNewReconciler:!1},Ia={readContext:ao,useCallback:Aa,useContext:ao,useEffect:Sa,useImperativeHandle:Ta,useLayoutEffect:Ma,useMemo:Pa,useReducer:da,useRef:_a,useState:function(){return da(ua)},useDebugValue:Ca,useDeferredValue:function(e){var t=da(ua),n=t[0],r=t[1];return Sa((function(){var t=Qo.transition;Qo.transition=1;try{r(e)}finally{Qo.transition=t}}),[e]),n},useTransition:function(){var e=da(ua)[0];return[_a().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return da(ua)[0]},unstable_isNewReconciler:!1},Fa=b.ReactCurrentOwner,Na=!1;function za(e,t,n,r){t.child=null===e?Ao(t,null,n,r):Co(t,e.child,n,r)}function Ua(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=sa(e,t,n,r,o,i),null===e||Na?(t.flags|=1,za(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function ja(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Wl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Zl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ba(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=ql(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ba(e,t,n,r,i,o){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Na=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Na=!0)}return Ha(e,t,n,r,o)}function Va(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wl(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(t,e),null;t.memoizedState={baseLanes:0},wl(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wl(t,r);return za(e,t,i,n),t.child}function Ga(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ha(e,t,n,r,i){var o=vi(n)?fi:pi.current;return o=gi(t,o),oo(t,i),n=sa(e,t,n,r,o,i),null===e||Na?(t.flags|=1,za(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Wa(e,t,n,r,i){if(vi(n)){var o=!0;bi(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),xo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ao(c):c=gi(t,c=vi(n)?fi:pi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&bo(t,a,r,c),so=!1;var d=t.memoizedState;a.state=d,mo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||mi.current||so?("function"===typeof u&&(vo(t,n,u,r),l=t.memoizedState),(s=so||_o(t,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,co(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Yi(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ao(l):l=gi(t,l=vi(n)?fi:pi.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&bo(t,a,r,l),so=!1,d=t.memoizedState,a.state=d,mo(t,r,a,i);var m=t.memoizedState;s!==h||d!==m||mi.current||so?("function"===typeof p&&(vo(t,n,p,r),m=t.memoizedState),(c=so||_o(t,n,c,r,d,m,l))?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return qa(e,t,n,r,o,i)}function qa(e,t,n,r,i,o){Ga(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,Fa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):za(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Za(e){var t=e.stateNode;t.pendingContext?_i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_i(0,t.context,!1),ko(e,t.containerInfo)}var $a,Xa,Ka,Ya={dehydrated:null,retryLane:0};function Qa(e,t,n){var r,i=t.pendingProps,o=zo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),hi(zo,1&o),null===e?(void 0!==i.fallback&&Wo(t),e=i.children,o=i.fallback,a?(e=Ja(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ya,e):"number"===typeof i.unstable_expectedLoadTime?(e=Ja(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ya,t.lanes=33554432,e):((n=Xl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ya,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Ja(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Xl(t,i,0,null),n=$l(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=ql(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=ql(a,s),null!==e?r=ql(e,r):(r=$l(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(za(e,t,r.children,n),0!==(2&(r=zo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(zo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Vo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vi(t.type)&&yi(),null;case 3:return Io(),ui(mi),ui(pi),Ko(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:No(t);var o=Do(Lo.current);if(n=t.type,null!==e&&null!=t.stateNode)Xa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Do(Oo.current),Zo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Qr]=t,r[Jr]=s,n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Or(Tr[e],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":ee(r,s),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Or("invalid",r);break;case"textarea":le(r,s),Or("invalid",r)}for(var c in Me(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Or("scroll",r));switch(n){case"input":K(r),re(r,s,!0);break;case"textarea":K(r),ue(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Qr]=t,e[Jr]=r,$a(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Or("cancel",e),Or("close",e),o=r;break;case"iframe":case"object":case"embed":Or("load",e),o=r;break;case"video":case"audio":for(o=0;o<Tr.length;o++)Or(Tr[o],e);o=r;break;case"source":Or("error",e),o=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),o=r;break;case"details":Or("toggle",e),o=r;break;case"input":ee(e,r),o=J(e,r),Or("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Or("invalid",e);break;case"textarea":le(e,r),o=se(e,r),Or("invalid",e);break;default:o=r}Me(n,o);var u=o;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ve(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Or("scroll",e):null!=h&&x(e,s,h,c))}switch(n){case"input":K(e),re(e,r,!1);break;case"textarea":K(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=jr)}Gr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ka(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Do(Lo.current),Do(Oo.current),Zo(t)?(r=t.stateNode,n=t.memoizedProps,r[Qr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=t,t.stateNode=r)}return null;case 13:return ui(zo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Zo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zo.current)?0===zs&&(zs=3):(0!==zs&&3!==zs||(zs=4),null===Ds||0===(134217727&Bs)&&0===(134217727&Vs)||yl(Ds,Is))),(r||n)&&(t.flags|=4),null);case 4:return Io(),null===e&&Lr(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(ui(zo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)as(r,!1);else{if(0!==zs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Uo(e))){for(t.flags|=64,as(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(zo,1&zo.current|2),t.child}e=e.sibling}null!==r.tail&&Gi()>qs&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Uo(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>qs&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,t=zo.current,hi(zo,s?1&t|2:1&t),n):null;case 23:case 24:return Sl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ls(e){switch(e.tag){case 1:vi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Io(),ui(mi),ui(pi),Ko(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return No(e),null;case 13:return ui(zo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(zo),null;case 4:return Io(),null;case 10:return ro(e),null;case 23:case 24:return Sl(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}$a=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Do(Oo.current);var a,s=null;switch(n){case"input":o=J(e,o),r=J(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(h in Me(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Or("scroll",e),s||c===u||(s=[])):"object"===typeof u&&null!==u&&u.$$typeof===I?u.toString():(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Ka=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Ys=r),us(0,t)},n}function ps(e,t,n){(n=uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return us(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this),us(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ms="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){jl(e,n)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Zr(t.stateNode.containerInfo))}throw Error(a(163))}function vs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nl(n,e),Fl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Gr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _s(e,t){if(Mi&&"function"===typeof Mi.onCommitFiberUnmount)try{Mi.onCommitFiberUnmount(Si,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Nl(t,n);else{r=t;try{i()}catch(o){jl(r,o)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){jl(t,o)}break;case 5:fs(t);break;case 4:Es(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bs(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(bs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):Ms(e,n,t)}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Ms(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ms(e,t,n),e=e.sibling;null!==e;)Ms(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,c=l;;)if(_s(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(_s(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?we(n,l):"dangerouslySetInnerHTML"===s?ve(n,l):"children"===s?ye(n,l):x(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=Gi(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(a(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ms),t.forEach((function(t){var r=Vl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function As(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ps=Math.ceil,Os=b.ReactCurrentDispatcher,Rs=b.ReactCurrentOwner,Ls=0,Ds=null,ks=null,Is=0,Fs=0,Ns=ci(0),zs=0,Us=null,js=0,Bs=0,Vs=0,Gs=0,Hs=null,Ws=0,qs=1/0;function Zs(){qs=Gi()+500}var $s,Xs=null,Ks=!1,Ys=null,Qs=null,Js=!1,el=null,tl=90,nl=[],rl=[],il=null,ol=0,al=null,sl=-1,ll=0,cl=0,ul=null,hl=!1;function dl(){return 0!==(48&Ls)?Gi():-1!==sl?sl:sl=Gi()}function pl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===ll&&(ll=js),0!==Ki.transition){0!==cl&&(cl=null!==Hs?Hs.pendingLanes:0),e=ll;var t=4186112&~cl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Ls)&&98===e?e=jt(12,ll):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function ml(e,t,n){if(50<ol)throw ol=0,al=null,Error(a(185));if(null===(e=fl(e,t)))return null;Gt(e,t,n),e===Ds&&(Vs|=t,4===zs&&yl(e,Is));var r=Hi();1===t?0!==(8&Ls)&&0===(48&Ls)?_l(e):(gl(e,n),0===Ls&&(Zs(),$i())):(0===(4&Ls)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),gl(e,n)),Hs=e}function fl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ht(s),c=1<<l,u=o[l];if(-1===u){if(0===(c&r)||0!==(c&i)){u=t,Nt(c);var h=Ft;o[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);s&=~c}if(r=zt(e,e===Ds?Is:0),t=Ft,0===r)null!==n&&(n!==Ni&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ni&&Ci(n)}15===t?(n=_l.bind(null,e),null===Ui?(Ui=[n],ji=Ti(Li,Xi)):Ui.push(n),n=Ni):14===t?n=Zi(99,_l.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Zi(n,vl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vl(e){if(sl=-1,cl=ll=0,0!==(48&Ls))throw Error(a(327));var t=e.callbackNode;if(Il()&&e.callbackNode!==t)return null;var n=zt(e,e===Ds?Is:0);if(0===n)return null;var r=n,i=Ls;Ls|=16;var o=Tl();for(Ds===e&&Is===r||(Zs(),Ml(e,r));;)try{Pl();break}catch(l){El(e,l)}if(no(),Os.current=o,Ls=i,null!==ks?r=0:(Ds=null,Is=0,r=zs),0!==(js&Vs))Ml(e,0);else if(0!==r){if(2===r&&(Ls|=64,e.hydrate&&(e.hydrate=!1,Zr(e.containerInfo)),0!==(n=Ut(e))&&(r=Cl(e,n))),1===r)throw t=Us,Ml(e,0),yl(e,n),gl(e,Gi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ll(e);break;case 3:if(yl(e,n),(62914560&n)===n&&10<(r=Ws+500-Gi())){if(0!==zt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ll.bind(null,e),r);break}Ll(e);break;case 4:if(yl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Gi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ps(n/1960))-n)){e.timeoutHandle=Wr(Ll.bind(null,e),n);break}Ll(e);break;default:throw Error(a(329))}}return gl(e,Gi()),e.callbackNode===t?vl.bind(null,e):null}function yl(e,t){for(t&=~Gs,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function _l(e){if(0!==(48&Ls))throw Error(a(327));if(Il(),e===Ds&&0!==(e.expiredLanes&Is)){var t=Is,n=Cl(e,t);0!==(js&Vs)&&(n=Cl(e,t=zt(e,t)))}else n=Cl(e,t=zt(e,0));if(0!==e.tag&&2===n&&(Ls|=64,e.hydrate&&(e.hydrate=!1,Zr(e.containerInfo)),0!==(t=Ut(e))&&(n=Cl(e,t))),1===n)throw n=Us,Ml(e,0),yl(e,t),gl(e,Gi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ll(e),gl(e,Gi()),null}function xl(e,t){var n=Ls;Ls|=1;try{return e(t)}finally{0===(Ls=n)&&(Zs(),$i())}}function bl(e,t){var n=Ls;Ls&=-2,Ls|=8;try{return e(t)}finally{0===(Ls=n)&&(Zs(),$i())}}function wl(e,t){hi(Ns,Fs),Fs|=t,js|=t}function Sl(){Fs=Ns.current,ui(Ns)}function Ml(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Io(),ui(mi),ui(pi),Ko();break;case 5:No(r);break;case 4:Io();break;case 13:case 19:ui(zo);break;case 10:ro(r);break;case 23:case 24:Sl()}n=n.return}Ds=e,ks=ql(e.current,null),Is=Fs=js=t,zs=0,Us=null,Gs=Vs=Bs=0}function El(e,t){for(;;){var n=ks;try{if(no(),Yo.current=La,ra){for(var r=ea.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if(Jo=0,na=ta=ea=null,ia=!1,Rs.current=null,null===n||null===n.return){zs=1,Us=t,ks=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Is,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&zo.current),d=a;do{var p;if(p=13===d.tag){var m=d.memoizedState;if(null!==m)p=null!==m.dehydrated;else{var f=d.memoizedProps;p=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var v=new Set;v.add(c),d.updateQueue=v}else g.add(c);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=uo(-1,1);y.tag=2,ho(s,y)}s.lanes|=1;break e}l=void 0,s=t;var _=o.pingCache;if(null===_?(_=o.pingCache=new hs,l=new Set,_.set(c,l)):void 0===(l=_.get(c))&&(l=new Set,_.set(c,l)),!l.has(s)){l.add(s);var x=Bl.bind(null,o,c,s);c.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((Z(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==zs&&(zs=2),l=cs(l,s),d=a;do{switch(d.tag){case 3:o=l,d.flags|=4096,t&=-t,d.lanes|=t,po(d,ds(0,o,t));break e;case 1:o=l;var b=d.type,w=d.stateNode;if(0===(64&d.flags)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Qs||!Qs.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,po(d,ps(d,o,t));break e}}d=d.return}while(null!==d)}Rl(n)}catch(S){t=S,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function Tl(){var e=Os.current;return Os.current=La,null===e?La:e}function Cl(e,t){var n=Ls;Ls|=16;var r=Tl();for(Ds===e&&Is===t||Ml(e,t);;)try{Al();break}catch(i){El(e,i)}if(no(),Ls=n,Os.current=r,null!==ks)throw Error(a(261));return Ds=null,Is=0,zs}function Al(){for(;null!==ks;)Ol(ks)}function Pl(){for(;null!==ks&&!Ai();)Ol(ks)}function Ol(e){var t=$s(e.alternate,e,Fs);e.memoizedProps=e.pendingProps,null===t?Rl(e):ks=t,Rs.current=null}function Rl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Fs)))return void(ks=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Fs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ls(t)))return n.flags&=2047,void(ks=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===zs&&(zs=5)}function Ll(e){var t=Hi();return qi(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{Il()}while(null!==el);if(0!==(48&Ls))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var c=31-Ht(o),u=1<<c;i[c]=0,s[c]=-1,l[c]=-1,o&=~u}if(null!==il&&0===(24&r)&&il.has(e)&&il.delete(e),e===Ds&&(ks=Ds=null,Is=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ls,Ls|=32,Rs.current=null,Br=Xt,vr(s=gr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,o=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(T){l=null;break e}var h=0,d=-1,p=-1,m=0,f=0,g=s,v=null;t:for(;;){for(var y;g!==l||0!==o&&3!==g.nodeType||(d=h+o),g!==c||0!==u&&3!==g.nodeType||(p=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break t;if(v===l&&++m===o&&(d=h),v===c&&++f===u&&(p=h),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Vr={focusedElem:s,selectionRange:l},Xt=!1,ul=null,hl=!1,Xs=r;do{try{kl()}catch(T){if(null===Xs)throw Error(a(330));jl(Xs,T),Xs=Xs.nextEffect}}while(null!==Xs);ul=null,Xs=r;do{try{for(s=e;null!==Xs;){var _=Xs.flags;if(16&_&&ye(Xs.stateNode,""),128&_){var x=Xs.alternate;if(null!==x){var b=x.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&_){case 2:ws(Xs),Xs.flags&=-3;break;case 6:ws(Xs),Xs.flags&=-3,Ts(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Ts(Xs.alternate,Xs);break;case 4:Ts(Xs.alternate,Xs);break;case 8:Es(s,l=Xs);var w=l.alternate;xs(l),null!==w&&xs(w)}Xs=Xs.nextEffect}}catch(T){if(null===Xs)throw Error(a(330));jl(Xs,T),Xs=Xs.nextEffect}}while(null!==Xs);if(b=Vr,x=gr(),_=b.focusedElem,s=b.selectionRange,x!==_&&_&&_.ownerDocument&&fr(_.ownerDocument.documentElement,_)){null!==s&&vr(_)&&(x=s.start,void 0===(b=s.end)&&(b=x),"selectionStart"in _?(_.selectionStart=x,_.selectionEnd=Math.min(b,_.value.length)):(b=(x=_.ownerDocument||document)&&x.defaultView||window).getSelection&&(b=b.getSelection(),l=_.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!b.extend&&w>s&&(l=s,s=w,w=l),l=mr(_,w),o=mr(_,s),l&&o&&(1!==b.rangeCount||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==o.node||b.focusOffset!==o.offset)&&((x=x.createRange()).setStart(l.node,l.offset),b.removeAllRanges(),w>s?(b.addRange(x),b.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),b.addRange(x))))),x=[];for(b=_;b=b.parentNode;)1===b.nodeType&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<x.length;_++)(b=x[_]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Xt=!!Br,Vr=Br=null,e.current=n,Xs=r;do{try{for(_=e;null!==Xs;){var S=Xs.flags;if(36&S&&vs(_,Xs.alternate,Xs),128&S){x=void 0;var M=Xs.ref;if(null!==M){var E=Xs.stateNode;Xs.tag,x=E,"function"===typeof M?M(x):M.current=x}}Xs=Xs.nextEffect}}catch(T){if(null===Xs)throw Error(a(330));jl(Xs,T),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,zi(),Ls=i}else e.current=n;if(Js)Js=!1,el=e,tl=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((S=Xs).sibling=null,S.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&(Qs=null),1===r?e===al?ol++:(ol=0,al=e):ol=0,n=n.stateNode,Mi&&"function"===typeof Mi.onCommitFiberRoot)try{Mi.onCommitFiberRoot(Si,n,void 0,64===(64&n.current.flags))}catch(T){}if(gl(e,Gi()),Ks)throw Ks=!1,e=Ys,Ys=null,e;return 0!==(8&Ls)||$i(),null}function kl(){for(;null!==Xs;){var e=Xs.alternate;hl||null===ul||(0!==(8&Xs.flags)?et(Xs,ul)&&(hl=!0):13===Xs.tag&&As(e,Xs)&&et(Xs,ul)&&(hl=!0));var t=Xs.flags;0!==(256&t)&&gs(e,Xs),0===(512&t)||Js||(Js=!0,Zi(97,(function(){return Il(),null}))),Xs=Xs.nextEffect}}function Il(){if(90!==tl){var e=97<tl?97:tl;return tl=90,qi(e,zl)}return!1}function Fl(e,t){nl.push(t,e),Js||(Js=!0,Zi(97,(function(){return Il(),null})))}function Nl(e,t){rl.push(t,e),Js||(Js=!0,Zi(97,(function(){return Il(),null})))}function zl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Ls))throw Error(a(331));var t=Ls;Ls|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));jl(o,c)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(c){if(null===o)throw Error(a(330));jl(o,c)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ls=t,$i(),!0}function Ul(e,t,n){ho(e,t=ds(0,t=cs(n,t),1)),t=dl(),null!==(e=fl(e,1))&&(Gt(e,1,t),gl(e,t))}function jl(e,t){if(3===e.tag)Ul(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ul(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){var i=ps(n,e=cs(t,e),1);if(ho(n,i),i=dl(),null!==(n=fl(n,1)))Gt(n,1,i),gl(n,i);else if("function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Bl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Is&n)===n&&(4===zs||3===zs&&(62914560&Is)===Is&&500>Gi()-Ws?Ml(e,0):Gs|=n),gl(e,t)}function Vl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===ll&&(ll=js),0===(t=Bt(62914560&~ll))&&(t=4194304))),n=dl(),null!==(e=fl(e,t))&&(Gt(e,t,n),gl(e,n))}function Gl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,n,r){return new Gl(e,t,n,r)}function Wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Wl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case M:return $l(n.children,i,o,t);case F:s=8,i|=16;break;case E:s=8,i|=1;break;case T:return(e=Hl(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=o,e;case O:return(e=Hl(13,n,t,i)).type=O,e.elementType=O,e.lanes=o,e;case R:return(e=Hl(19,n,t,i)).elementType=R,e.lanes=o,e;case N:return Xl(n,i,o,t);case z:return(e=Hl(24,n,t,i)).elementType=z,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case A:s=9;break e;case P:s=11;break e;case L:s=14;break e;case D:s=16,r=null;break e;case k:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Hl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function $l(e,t,n,r){return(e=Hl(7,e,r,t)).lanes=n,e}function Xl(e,t,n,r){return(e=Hl(23,e,r,t)).elementType=N,e.lanes=n,e}function Kl(e,t,n){return(e=Hl(6,e,null,t)).lanes=n,e}function Yl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Jl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,o=dl(),s=pl(i);e:if(n){t:{if(Ke(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=xi(n,c,l);break e}}n=l}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=uo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ho(i,t),ml(i,s,o),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ql(e,t,null!=n&&!0===n.hydrate),t=Hl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,lo(t),e[ei]=n.current,Lr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(a);s.call(e)}}ec(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var l=i;i=function(){var e=tc(a);l.call(e)}}bl((function(){ec(t,a,e,i)}))}return tc(a)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(a(200));return Jl(e,t,null,n)}$s=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||mi.current)Na=!0;else{if(0===(n&r)){switch(Na=!1,t.tag){case 3:Za(t),$o();break;case 5:Fo(t);break;case 1:vi(t.type)&&bi(t);break;case 4:ko(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Qa(e,t,n):(hi(zo,1&zo.current),null!==(t=os(e,t,n))?t.sibling:null);hi(zo,1&zo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(zo,zo.current),r)break;return null;case 23:case 24:return t.lanes=0,Va(e,t,n)}return os(e,t,n)}Na=0!==(16384&e.flags)}else Na=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,pi.current),oo(t,n),i=sa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(r)){var o=!0;bi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&vo(t,r,s,e),i.updater=yo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=qa(null,t,r,!0,o,n)}else t.tag=0,za(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Wl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===L)return 14}return 2}(i),e=Yi(i,e),o){case 0:t=Ha(null,t,i,e,n);break e;case 1:t=Wa(null,t,i,e,n);break e;case 11:t=Ua(null,t,i,e,n);break e;case 14:t=ja(null,t,i,Yi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Za(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,co(e,t),mo(t,r,null,n),(r=t.memoizedState.element)===i)$o(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Bo=$r(t.stateNode.containerInfo.firstChild),jo=t,o=Vo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Xo.push(o);for(n=Ao(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else za(e,t,r,n),$o();t=t.child}return t;case 5:return Fo(t),null===e&&Wo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==o&&Hr(r,o)&&(t.flags|=16),Ga(e,t),za(e,t,s,n),t.child;case 6:return null===e&&Wo(t),null;case 13:return Qa(e,t,n);case 4:return ko(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):za(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ua(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return za(e,t,t.pendingProps,n),t.child;case 8:case 12:return za(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(hi(Qi,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=ur(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!mi.current){t=os(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&o)){1===l.tag&&((u=uo(-1,n&-n)).tag=2,ho(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),io(l.return,n),c.lanes|=n;break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}za(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.flags|=1,za(e,t,r,n),t.child;case 14:return o=Yi(i=t.type,t.pendingProps),ja(e,t,i,o=Yi(i.type,o),r,n);case 15:return Ba(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,vi(r)?(e=!0,bi(t)):e=!1,oo(t,n),xo(t,r,i),wo(t,r,i,n),qa(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Va(e,t,n)}throw Error(a(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ml(e,4,dl()),rc(e,4))},nt=function(e){13===e.tag&&(ml(e,67108864,dl()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=dl(),n=pl(e);ml(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(a(90));Y(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},De=xl,ke=function(e,t,n,r,i){var o=Ls;Ls|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(Ls=o)&&(Zs(),$i())}},Ie=function(){0===(49&Ls)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gl(e,Gi())}))}$i()}(),Il())},Fe=function(e,t){var n=Ls;Ls|=2;try{return e(t)}finally{0===(Ls=n)&&(Zs(),$i())}};var lc={Events:[ri,ii,oi,Re,Le,Il,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Si=hc.inject(uc),Mi=hc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ls;if(0!==(48&n))return e(t);Ls|=1;try{if(e)return qi(99,e.bind(null,t))}finally{Ls=n,$i()}},t.hydrate=function(e,t,n){if(!oc(t))throw Error(a(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!oc(t))throw Error(a(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!oc(e))throw Error(a(40));return!!e._reactRootContainer&&(bl((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=xl,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},54164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(34463)},11372:(e,t)=>{"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,c=60112,u=60113,h=60120,d=60115,p=60116,m=60121,f=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),i=_("react.fragment"),o=_("react.strict_mode"),a=_("react.profiler"),s=_("react.provider"),l=_("react.context"),c=_("react.forward_ref"),u=_("react.suspense"),h=_("react.suspense_list"),d=_("react.memo"),p=_("react.lazy"),m=_("react.block"),f=_("react.server.block"),g=_("react.fundamental"),v=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case o:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===v||e===o||e===u||e===h||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===d||e.$$typeof===s||e.$$typeof===l||e.$$typeof===c||e.$$typeof===g||e.$$typeof===m||e[0]===f)},t.typeOf=x},57441:(e,t,n)=>{"use strict";e.exports=n(11372)},23688:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>a}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},17719:(e,t,n)=>{"use strict";var r=n(90474),i=n(72791),o=n(54164);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var l=a(r),c=s(i),u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},u(e,t)};function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};function p(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};var f=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},g="object"==typeof m&&m&&m.Object===Object&&m,v="object"==typeof self&&self&&self.Object===Object&&self,y=g||v||Function("return this")(),_=y,x=function(){return _.Date.now()},b=/\s/;var w=function(e){for(var t=e.length;t--&&b.test(e.charAt(t)););return t},S=/^\s+/;var M=function(e){return e?e.slice(0,w(e)+1).replace(S,""):e},E=y.Symbol,T=E,C=Object.prototype,A=C.hasOwnProperty,P=C.toString,O=T?T.toStringTag:void 0;var R=function(e){var t=A.call(e,O),n=e[O];try{e[O]=void 0;var r=!0}catch(o){}var i=P.call(e);return r&&(t?e[O]=n:delete e[O]),i},L=Object.prototype.toString;var D=R,k=function(e){return L.call(e)},I=E?E.toStringTag:void 0;var F=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?D(e):k(e)},N=function(e){return null!=e&&"object"==typeof e};var z=M,U=f,j=function(e){return"symbol"==typeof e||N(e)&&"[object Symbol]"==F(e)},B=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,G=/^0o[0-7]+$/i,H=parseInt;var W=f,q=x,Z=function(e){if("number"==typeof e)return e;if(j(e))return NaN;if(U(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=U(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=z(e);var n=V.test(e);return n||G.test(e)?H(e.slice(2),n?2:8):B.test(e)?NaN:+e},$=Math.max,X=Math.min;var K=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function m(e){return c=e,s=setTimeout(g,t),u?p(e):a}function f(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function g(){var e=q();if(f(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return h?X(n,o-(e-c)):n}(e))}function v(e){return s=void 0,d&&r?p(e):(r=i=void 0,a)}function y(){var e=q(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return m(l);if(h)return clearTimeout(s),s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=Z(t)||0,W(n)&&(u=!!n.leading,o=(h="maxWait"in n)?$(Z(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:v(q())},y},Y=K,Q=f;var J=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Q(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Y(e,t,{leading:r,maxWait:t,trailing:i})},ee=function(e,t,n,r){switch(t){case"debounce":return K(e,n,r);case"throttle":return J(e,n,r);default:return e}},te=function(e){return"function"===typeof e},ne=function(){return"undefined"===typeof window},re=function(e){return e instanceof Element||e instanceof HTMLDocument},ie=function(e,t,n,r){return function(i){var o=i.width,a=i.height;t((function(t){return t.width===o&&t.height===a||t.width===o&&!r||t.height===a&&!n?t:(e&&te(e)&&e(o,a),{width:o,height:a})}))}},oe=function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!ne()){t&&t.current&&(n.targetRef.current=t.current);var i=n.getElement();i&&(n.observableElement&&n.observableElement===i||(n.observableElement=i,n.resizeObserver.observe(i,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(ne())return null;if(t)return document.querySelector(t);if(r&&re(r))return r;if(n.targetRef&&re(n.targetRef.current))return n.targetRef.current;var i=o.findDOMNode(n);if(!i)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return i;default:return i.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,i=void 0===r||r,o=t.handleHeight,a=void 0===o||o,s=t.onResize;if(i||a){var l=ie(s,n.setState.bind(n),i,a);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,i=t.height;!n.skipOnMount&&!ne()&&l({width:r,height:i}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,r=e.children;return te(t)?"renderProp":te(r)?"childFunction":i.isValidElement(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,a=t.refreshMode,s=t.refreshRate,c=void 0===s?1e3:s,u=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=r,n.targetRef=i.createRef(),n.observableElement=null,ne()||(n.resizeHandler=ee(n.createResizeHandler,a,c,u),n.resizeObserver=new l.default(n.resizeHandler)),n}return h(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){ne()||(this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,n=t.render,r=t.children,o=t.nodeType,a=void 0===o?"div":o,s=this.state,l={width:s.width,height:s.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return n&&n(l);case"childFunction":return(e=r)(l);case"child":if((e=r).type&&"string"===typeof e.type){var u=p(l,["targetRef"]);return i.cloneElement(e,u)}return i.cloneElement(e,l);case"childArray":return(e=r).map((function(e){return!!e&&i.cloneElement(e,l)}));default:return c.createElement(a,null)}},t}(i.PureComponent);var ae=ne()?i.useEffect:i.useLayoutEffect;t.ZP=oe},62690:(e,t,n)=>{"use strict";var r=n(95318);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(80019));e.exports=t.default},80019:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},60891:e=>{"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"===typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},59745:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(52007));var r=s(n(62690)),i=s(n(60891)),o=s(n(72791)),a=s(n(55580));n(74987);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))},h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),c(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,o=n?r+" "+i:i;t.removeClasses(e,n?"appear":"enter"),c(e,o),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),c(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),c(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{className:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&u(e,r),i&&u(e,i),o&&u(e,o)},i.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,c(e,t))},i.render=function(){var e=l({},this.props);return delete e.classNames,o.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);h.defaultProps={classNames:""},h.propTypes={};var d=h;t.default=d,e.exports=t.default},66492:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;a(n(52007));var r=a(n(72791)),i=n(54164),o=a(n(42584));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(o=s.props)[e].apply(o,n),this.props[e]&&this.props[e]((0,i.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},55580:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(52007)),i=s(n(72791)),o=s(n(54164)),a=n(23688);n(74987);function s(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var c="exited";t.EXITED=c;var u="entering";t.ENTERING=u;var h="entered";t.ENTERED=h;var d="exiting";t.EXITING=d;var p=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=c,r.appearStatus=u):i=h:i=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==u&&n!==h&&(t=u):n!==u&&n!==h||(t=d)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);t===u?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},a.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts(),a=i?o.appear:o.enter;t||r?(this.props.onEnter(e,i),this.safeSetState({status:u},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:h},(function(){n.props.onEntered(e,i)}))}))}))):this.safeSetState({status:h},(function(){n.props.onEntered(e)}))},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:d},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(e)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function m(){}p.contextTypes={transitionGroup:r.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;var f=(0,a.polyfill)(p);t.default=f},42584:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(52007)),i=s(n(72791)),o=n(23688),a=n(46970);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},h=function(e){var t,n;function r(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(c(c(r)));return r.state={handleExited:i,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},o.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=l({},t.children);return delete n[e.key],{children:n}})))},o.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","childFactory"]),o=u(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:i.default.createElement(t,r,o)},r}(i.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,o.polyfill)(h);t.default=d,e.exports=t.default},25937:(e,t,n)=>{"use strict";var r=s(n(59745)),i=s(n(66492)),o=s(n(42584)),a=s(n(55580));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},46970:(e,t,n)=>{"use strict";t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=o,t.getInitialChildMapping=function(e,t){return i(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=i(e.children),l=o(t,s);return Object.keys(l).forEach((function(i){var o=l[i];if((0,r.isValidElement)(o)){var c=i in t,u=i in s,h=t[i],d=(0,r.isValidElement)(h)&&!h.props.in;!u||c&&!d?u||!c||d?u&&c&&(0,r.isValidElement)(h)&&(l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:h.props.in,exit:a(o,"exit",e),enter:a(o,"enter",e)})):l[i]=(0,r.cloneElement)(o,{in:!1}):l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",e),enter:a(o,"enter",e)})}})),l};var r=n(72791);function i(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function o(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},74987:(e,t,n)=>{"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(52007))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},66374:(e,t,n)=>{"use strict";n(31725);var r=n(72791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},59117:(e,t,n)=>{"use strict";var r=n(31725),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f={};function g(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||m}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var _=y.prototype=new v;_.constructor=y,r(_,g.prototype),_.isPureReactComponent=!0;var x={current:null},b=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)b.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:x.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case o:l=!0}}if(l)return a=a(l=e),e=""===r?"."+T(l,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(M(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+T(s=e[c],c);l+=C(s,t,n,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=C(s=s.value,t,n,u=r+T(s,c++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var O={current:null};function R(){var e=O.current;if(null===e)throw Error(p(321));return e}var L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)b.call(t,u)&&!w.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},72791:(e,t,n)=>{"use strict";e.exports=n(59117)},80184:(e,t,n)=>{"use strict";e.exports=n(66374)},89609:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case f:case l:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.isFragment=function(e){return b(e)===o}},8493:(e,t,n)=>{"use strict";e.exports=n(89609)},72692:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(40082)),i=n(7905),o=s(n(34849)),a=s(n(94170));function s(e){return e&&e.__esModule?e:{default:e}}var l=/((?:\-[a-z]+\-)?calc)/;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(0,r.default)(e).walk((function(e){if("function"===e.type&&l.test(e.value)){var n=r.default.stringify(e.nodes);if(!(n.indexOf("constant")>=0||n.indexOf("env")>=0)){var s=i.parser.parse(n),c=(0,o.default)(s,t);e.type="word",e.value=(0,a.default)(e.value,c,t)}}}),!0).toString()},e.exports=t.default},78334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(74890),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){switch(e.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return function(e,t,n){t.type===e.type&&(t={type:e.type,value:(0,o.default)(t.value,t.unit,e.unit,n),unit:e.unit});return{left:e,right:t}}(e,t,n);default:return{left:e,right:t}}},e.exports=t.default},34849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flip=c;var r,i=n(78334),o=(r=i)&&r.__esModule?r:{default:r};function a(e,t){return"MathExpression"===e.type?function(e,t){switch(e=function(e,t){var n=(0,o.default)(e.left,e.right,t),r=a(n.left,t),i=a(n.right,t);"MathExpression"===r.type&&"MathExpression"===i.type&&("/"===r.operator&&"*"===i.operator||"-"===r.operator&&"+"===i.operator||"*"===r.operator&&"/"===i.operator||"+"===r.operator&&"-"===i.operator)&&(s(r.right,i.right)?n=(0,o.default)(r.left,i.left,t):s(r.right,i.left)&&(n=(0,o.default)(r.left,i.right,t)),r=a(n.left,t),i=a(n.right,t));return e.left=r,e.right=i,e}(e,t),e.operator){case"+":case"-":return function(e,t){var n=e,r=n.left,i=n.right,o=n.operator;if("CssVariable"===r.type||"CssVariable"===i.type)return e;if(0===i.value)return r;if(0===r.value&&"+"===o)return i;if(0===r.value&&"-"===o)return u(i);r.type===i.type&&l(r.type)&&((e=Object.assign({},r)).value="+"===o?r.value+i.value:r.value-i.value);if(l(r.type)&&("+"===i.operator||"-"===i.operator)&&"MathExpression"===i.type){if(r.type===i.left.type)return(e=Object.assign({},e)).left=a({type:"MathExpression",operator:o,left:r,right:i.left},t),e.right=i.right,e.operator="-"===o?c(i.operator):i.operator,a(e,t);if(r.type===i.right.type)return(e=Object.assign({},e)).left=a({type:"MathExpression",operator:"-"===o?c(i.operator):i.operator,left:r,right:i.right},t),e.right=i.left,a(e,t)}if("MathExpression"===r.type&&("+"===r.operator||"-"===r.operator)&&l(i.type)){if(i.type===r.left.type)return(e=Object.assign({},r)).left=a({type:"MathExpression",operator:o,left:r.left,right:i},t),a(e,t);if(i.type===r.right.type)return e=Object.assign({},r),"-"===r.operator?(e.right=a({type:"MathExpression",operator:"-"===o?"+":"-",left:i,right:r.right},t),e.operator="-"===o?"-":"+"):e.right=a({type:"MathExpression",operator:o,left:r.right,right:i},t),e.right.value<0&&(e.right.value*=-1,e.operator="-"===e.operator?"+":"-"),a(e,t)}return e}(e,t);case"/":return function(e,t){if(!l(e.right.type))return e;if("Value"!==e.right.type)throw new Error('Cannot divide by "'+e.right.unit+'", number expected');if(0===e.right.value)throw new Error("Cannot divide by zero");if("MathExpression"===e.left.type)return l(e.left.left.type)&&l(e.left.right.type)?(e.left.left.value/=e.right.value,e.left.right.value/=e.right.value,a(e.left,t)):e;if(l(e.left.type))return e.left.value/=e.right.value,e.left;return e}(e,t);case"*":return function(e){if("MathExpression"===e.left.type&&"Value"===e.right.type){if(l(e.left.left.type)&&l(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(l(e.left.type)&&"Value"===e.right.type)return e.left.value*=e.right.value,e.left;if("Value"===e.left.type&&"MathExpression"===e.right.type){if(l(e.right.left.type)&&l(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if("Value"===e.left.type&&l(e.right.type))return e.right.value*=e.left.value,e.right}return e}(e)}return e}(e,t):"Calc"===e.type?a(e.value,t):e}function s(e,t){return e.type===t.type&&e.value===t.value}function l(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function c(e){return"+"===e?"-":"+"}function u(e){return l(e.type)?e.value=-e.value:"MathExpression"==e.type&&(e.left=u(e.left),e.right=u(e.right)),e}t.default=a},94170:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=a(t,n);return"MathExpression"===t.type&&(r=e+"("+r+")"),r};var r=n(34849),i={"*":0,"/":0,"+":1,"-":1};function o(e,t){if(!1!==t){var n=Math.pow(10,t);return Math.round(e*n)/n}return e}function a(e,t){switch(e.type){case"MathExpression":var n=e.left,s=e.right,l=e.operator,c="";return"MathExpression"===n.type&&i[l]<i[n.operator]?c+="("+a(n,t)+")":c+=a(n,t),c+=" "+e.operator+" ","MathExpression"===s.type&&i[l]<i[s.operator]?c+="("+a(s,t)+")":"MathExpression"===s.type&&"-"===l&&["+","-"].includes(s.operator)?(s.operator=(0,r.flip)(s.operator),c+=a(s,t)):c+=a(s,t),c;case"Value":return o(e.value,t);case"CssVariable":return e.fallback?"var("+e.value+", "+a(e.fallback,t)+")":"var("+e.value+")";case"Calc":return e.prefix?"-"+e.prefix+"-calc("+a(e.value,t)+")":"calc("+a(e.value,t)+")";default:return o(e.value,t)+e.unit}}e.exports=t.default},7905:(e,t)=>{var n=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}function t(e,t,n){n=n||0;for(var r=0;r<t;r++)this.push(e),e+=n}function n(e,t){for(t+=e=this.length-e;e<t;e++)this.push(this[e])}function r(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];"function"===typeof i?(n++,i.apply(t,e[n])):t.push(i)}return t}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonParserError";var i={trace:function(){},JisonParserError:e,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(e){return'"'+e+'"'},getSymbolName:function(e){if(this.terminals_[e])return this.terminals_[e];var t=this.symbols_;for(var n in t)if(t[n]===e)return n;return null},describeSymbol:function(e){if(e!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[e])return this.terminal_descriptions_[e];if(e===this.EOF)return"end of input";var t=this.getSymbolName(e);return t?this.quoteName(t):null},collect_expected_token_set:function(e,t){var n=this.TERROR,r=[],i={};if(!t&&this.state_descriptions_&&this.state_descriptions_[e])return[this.state_descriptions_[e]];for(var o in this.table[e])if((o=+o)!==n){var a=t?o:this.describeSymbol(o);a&&!i[a]&&(r.push(a),i[a]=!0)}return r},productions_:function(e){for(var t=[],n=e.pop,r=e.rule,i=0,o=n.length;i<o;i++)t.push([n[i],r[i]]);return t}({pop:r([29,t,[30,10],31,31,32,32,t,[33,15]]),rule:r([2,t,[3,5],4,7,t,[1,4],2,4,6,t,[1,14],2])}),performAction:function(e,t,n){var r=this.yy;r.parser,r.lexer;switch(e){case 0:case 6:this.$=n[t-1];break;case 1:return this.$=n[t-1],n[t-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:n[t-1],left:n[t-2],right:n[t]};break;case 7:this.$={type:"Calc",value:n[t-1]};break;case 8:this.$={type:"Calc",value:n[t-1],prefix:n[t-5]};break;case 9:case 10:case 11:this.$=n[t];break;case 12:this.$={type:"Value",value:parseFloat(n[t])};break;case 13:this.$={type:"Value",value:-1*parseFloat(n[t])};break;case 14:this.$={type:"CssVariable",value:n[t-1]};break;case 15:this.$={type:"CssVariable",value:n[t-3],fallback:n[t-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(n[t]),unit:/[a-z]+/.exec(n[t])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(n[t]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(n[t]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(n[t]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(n[t]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(n[t]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(n[t]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(n[t]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(n[t]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(n[t]),unit:"%"};break;case 30:var i=n[t];i.value*=-1,this.$=i}},table:function(e){for(var t=[],n=e.len,r=e.symbol,i=e.type,o=e.state,a=e.mode,s=e.goto,l=0,c=n.length;l<c;l++){for(var u=n[l],h={},d=0;d<u;d++){var p=r.shift();switch(i.shift()){case 2:h[p]=[a.shift(),s.shift()];break;case 0:h[p]=o.shift();break;default:h[p]=[3]}}t.push(h)}return t}({len:r([24,1,5,23,1,18,t,[0,3],1,t,[0,16],t,[23,4],n,[28,3],0,0,16,1,6,6,t,[0,3],5,1,2,n,[37,3],n,[20,3],5,0,0]),symbol:r([4,7,9,11,12,t,[15,19,1],1,1,t,[3,4,1],n,[30,19],n,[29,4],7,4,10,11,n,[22,14],n,[19,3],n,[43,22],n,[23,69],n,[139,4],8,n,[51,24],4,n,[138,15],13,n,[186,5],8,n,[6,6],n,[5,5],9,8,14,n,[159,47],n,[60,10]]),type:r([t,[2,19],t,[0,5],1,t,[2,24],t,[0,4],n,[22,19],n,[43,42],n,[23,70],n,[28,25],n,[45,25],n,[113,54]]),state:r([1,2,8,6,7,30,n,[4,3],33,37,n,[5,3],38,n,[4,3],39,n,[4,3],40,n,[4,3],42,n,[21,4],50,n,[5,3],51,n,[4,3]]),mode:r([t,[1,179],t,[2,3],n,[5,5],n,[6,4],t,[1,57]]),goto:r([5,3,4,24,t,[9,15,1],t,[25,5,1],n,[24,19],31,35,32,34,n,[18,14],36,n,[38,19],n,[19,57],n,[118,4],41,n,[24,19],43,35,n,[16,14],44,t,[2,3],28,29,2,t,[3,3],28,29,3,n,[53,4],t,[45,5,1],n,[100,42],52,n,[5,4],53])}),defaultActions:function(e){for(var t={},n=e.idx,r=e.goto,i=0,o=n.length;i<o;i++){t[n[i]]=r[i]}return t}({idx:r([6,7,8,t,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:r([9,10,11,t,[16,14,1],12,1,30,13,t,[4,4,1],14,15,8])}),parseError:function(e,t,n){if(!t.recoverable)throw"function"===typeof this.trace&&this.trace(e),n||(n=this.JisonParserError),new n(e,t);"function"===typeof this.trace&&this.trace(e),t.destroy()},parse:function(e){var t,n=this,r=new Array(128),i=new Array(128),o=new Array(128),a=this.table,s=0,l=0,c=(this.TERROR,this.EOF),u=(this.options.errorRecoveryTokenDiscardCount,[0,54]);t=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var h={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};function d(){var e=t.fastLex();return"number"!==typeof e&&(e=n.symbols_[e]||e),e||c}"function"!==typeof assert||assert,this.yyGetSharedState=function(){return h},function(e,t){for(var n in t)"undefined"===typeof e[n]&&Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}(h,this.yy),h.lexer=t,h.parser=this,"function"===typeof h.parseError?this.parseError=function(e,t,n){return n||(n=this.JisonParserError),h.parseError.call(this,e,t,n)}:this.parseError=this.originalParseError,"function"===typeof h.quoteName?this.quoteName=function(e){return h.quoteName.call(this,e)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(e,n,a){var l,c;n&&((h.post_parse||this.post_parse)&&(c=this.constructParseErrorInfo(null,null,null,!1)),h.post_parse&&"undefined"!==typeof(l=h.post_parse.call(this,h,e,c))&&(e=l),this.post_parse&&"undefined"!==typeof(l=this.post_parse.call(this,h,e,c))&&(e=l),c&&c.destroy&&c.destroy());if(this.__reentrant_call_depth>1)return e;if(t.cleanupAfterLex&&t.cleanupAfterLex(a),h&&(h.lexer=void 0,h.parser=void 0,t.yy===h&&(t.yy=void 0)),h=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,r.length=0,i.length=0,o.length=0,s=0,!a){for(var u=this.__error_infos.length-1;u>=0;u--){var d=this.__error_infos[u];d&&"function"===typeof d.destroy&&d.destroy()}this.__error_infos.length=0}return e},this.constructParseErrorInfo=function(e,n,a,c){var u={errStr:e,exception:n,text:t.match,value:t.yytext,token:this.describeSymbol(l)||l,token_id:l,line:t.yylineno,expected:a,recoverable:c,state:p,action:m,new_state:x,symbol_stack:r,state_stack:i,value_stack:o,stack_pointer:s,yy:h,lexer:t,parser:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(u),u};var p,m,f,g,v,y,_,x,b=function(){var e=t.lex();return"number"!==typeof e&&(e=n.symbols_[e]||e),e||c},w={$:!0,_$:void 0,yy:h},S=!1;try{if(this.__reentrant_call_depth++,t.setInput(e,h),"function"===typeof t.canIUse)t.canIUse().fastLex&&(b=d);for(o[s]=null,i[s]=0,r[s]=0,++s,this.pre_parse&&this.pre_parse.call(this,h),h.pre_parse&&h.pre_parse.call(this,h),x=i[s-1];;){if(p=x,this.defaultActions[p])m=2,x=this.defaultActions[p];else if(l||(l=b()),g=a[p]&&a[p][l]||u,x=g[1],!(m=g[0])){var M,E=this.describeSymbol(l)||l,T=this.collect_expected_token_set(p);M="number"===typeof t.yylineno?"Parse error on line "+(t.yylineno+1)+": ":"Parse error: ","function"===typeof t.showPosition&&(M+="\n"+t.showPosition(69,10)+"\n"),T.length?M+="Expecting "+T.join(", ")+", got unexpected "+E:M+="Unexpected "+E,v=this.constructParseErrorInfo(M,null,T,!1),"undefined"!==typeof(f=this.parseError(v.errStr,v,this.JisonParserError))&&(S=f);break}switch(m){default:if(m instanceof Array){v=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+p+", token: "+l,null,null,!1),"undefined"!==typeof(f=this.parseError(v.errStr,v,this.JisonParserError))&&(S=f);break}v=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),"undefined"!==typeof(f=this.parseError(v.errStr,v,this.JisonParserError))&&(S=f);break;case 1:r[s]=l,o[s]=t.yytext,i[s]=x,++s,l=0;continue;case 2:if(y=(_=this.productions_[x-1])[1],"undefined"!==typeof(f=this.performAction.call(w,x,s-1,o))){S=f;break}s-=y;var C=_[0];r[s]=C,o[s]=w.$,x=a[i[s-1]][C],i[s]=x,++s;continue;case 3:-2!==s&&(S=!0,s--,"undefined"!==typeof o[s]&&(S=o[s]))}break}}catch(A){if(A instanceof this.JisonParserError)throw A;if(t&&"function"===typeof t.JisonLexerError&&A instanceof t.JisonLexerError)throw A;v=this.constructParseErrorInfo("Parsing aborted due to exception.",A,null,!1),S=!1,"undefined"!==typeof(f=this.parseError(v.errStr,v,this.JisonParserError))&&(S=f)}finally{S=this.cleanupAfterParse(S,!0,!0),this.__reentrant_call_depth--}return S}};i.originalParseError=i.parseError,i.originalQuoteName=i.quoteName;var o=function(){function e(e,t){var n;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,n=r.stack}n||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):n=new Error(e).stack),n&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:n})}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonLexerError";var t={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(e,t,n){if(e=""+e,void 0==n&&(n=!(e.indexOf("\n")>0&&e.indexOf("^")>0)),this.yylloc&&n)if("function"===typeof this.prettyPrintRange){this.prettyPrintRange(this.yylloc);/\n\s*$/.test(e)||(e+="\n"),e+="\n  Erroneous area:\n"+this.prettyPrintRange(this.yylloc)}else if("function"===typeof this.showPosition){var r=this.showPosition();r&&(e.length&&"\n"!==e[e.length-1]&&"\n"!==r[0]?e+="\n"+r:e+=r)}var i={errStr:e,recoverable:!!t,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(i),i},parseError:function(e,t,n){if(n||(n=this.JisonLexerError),this.yy){if(this.yy.parser&&"function"===typeof this.yy.parser.parseError)return this.yy.parser.parseError.call(this,e,t,n)||this.ERROR;if("function"===typeof this.yy.parseError)return this.yy.parseError.call(this,e,t,n)||this.ERROR}throw new n(e,t)},yyerror:function(e){var t="";this.yylloc&&(t=" on line "+(this.yylineno+1));var n=this.constructLexErrorInfo("Lexical error"+t+": "+e,this.options.lexerErrorsAreRecoverable),r=Array.prototype.slice.call(arguments,1);return r.length&&(n.extra_error_attributes=r),this.parseError(n.errStr,n,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(e){if(this.setInput("",{}),!e){for(var t=this.__error_infos.length-1;t>=0;t--){var n=this.__error_infos[t];n&&"function"===typeof n.destroy&&n.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var e=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:e,last_line:this.yylineno+1,last_column:e,range:[this.offset,this.offset]}},setInput:function(e,t){if(this.yy=t||this.yy||{},!this.__decompressed){for(var n=this.rules,r=0,i=n.length;r<i;r++){"number"===typeof(d=n[r])&&(n[r]=n[d])}var o=this.conditions;for(var a in o){var s=o[a],l=s.rules,c=(i=l.length,new Array(i+1)),u=new Array(i+1);for(r=0;r<i;r++){var h=l[r],d=n[h];c[r+1]=d,u[r+1]=h}s.rules=u,s.__rule_regexes=c,s.__rule_count=i}this.__decompressed=!0}return this._input=e||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(e,t){var n=e.call(this,this._input,t);return"string"!==typeof n?n&&(this._input=""+n):this._input=n,this},input:function(){if(!this._input)return null;var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=1,n=!1;if("\n"===e)n=!0;else if("\r"===e){n=!0;var r=this._input[1];"\n"===r&&(t++,e+=r,this.yytext+=r,this.yyleng++,this.offset++,this.match+=r,this.matched+=r,this.yylloc.range[1]++)}return n?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(t),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);if(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.yyleng=this.yytext.length,this.offset-=t,this.match=this.match.substr(0,this.match.length-t),this.matched=this.matched.substr(0,this.matched.length-t),n.length>1){this.yylineno-=n.length-1,this.yylloc.last_line=this.yylineno+1;var r=this.match,i=r.split(/(?:\r\n?|\n)/g);1===i.length&&(i=(r=this.matched).split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=i[i.length-1].length}else this.yylloc.last_column-=t;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var e="";this.yylloc&&(e=" on line "+(this.yylineno+1));var t=this.constructLexErrorInfo("Lexical error"+e+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(e){return this.unput(this.match.slice(e))},pastInput:function(e,t){var n=this.matched.substring(0,this.matched.length-this.match.length);e<0?e=n.length:e||(e=20),t<0?t=n.length:t||(t=1);var r=(n=n.substr(2*-e-2)).replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(-t)).join("\n")).length>e&&(n="..."+n.substr(-e)),n},upcomingInput:function(e,t){var n=this.match;e<0?e=n.length+this._input.length:e||(e=20),t<0?t=e:t||(t=1),n.length<2*e+2&&(n+=this._input.substring(0,2*e+2));var r=n.replace(/\r\n|\r/g,"\n").split("\n");return(n=(r=r.slice(0,t)).join("\n")).length>e&&(n=n.substring(0,e)+"..."),n},showPosition:function(e,t){var n=this.pastInput(e).replace(/\s/g," "),r=new Array(n.length+1).join("-");return n+this.upcomingInput(t).replace(/\s/g," ")+"\n"+r+"^"},deriveLocationInfo:function(e,t,n,r){var i={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return e&&(i.first_line=0|e.first_line,i.last_line=0|e.last_line,i.first_column=0|e.first_column,i.last_column=0|e.last_column,e.range&&(i.range[0]=0|e.range[0],i.range[1]=0|e.range[1])),(i.first_line<=0||i.last_line<i.first_line)&&(i.first_line<=0&&t&&(i.first_line=0|t.last_line,i.first_column=0|t.last_column,t.range&&(i.range[0]=0|e.range[1])),(i.last_line<=0||i.last_line<i.first_line)&&n&&(i.last_line=0|n.first_line,i.last_column=0|n.first_column,n.range&&(i.range[1]=0|e.range[0])),i.first_line<=0&&r&&(i.last_line<=0||r.last_line<=i.last_line)&&(i.first_line=0|r.first_line,i.first_column=0|r.first_column,r.range&&(i.range[0]=0|r.range[0])),i.last_line<=0&&r&&(i.first_line<=0||r.first_line>=i.first_line)&&(i.last_line=0|r.last_line,i.last_column=0|r.last_column,r.range&&(i.range[1]=0|r.range[1]))),i.last_line<=0&&(i.first_line<=0?(i.first_line=this.yylloc.first_line,i.last_line=this.yylloc.last_line,i.first_column=this.yylloc.first_column,i.last_column=this.yylloc.last_column,i.range[0]=this.yylloc.range[0],i.range[1]=this.yylloc.range[1]):(i.last_line=this.yylloc.last_line,i.last_column=this.yylloc.last_column,i.range[1]=this.yylloc.range[1])),i.first_line<=0&&(i.first_line=i.last_line,i.first_column=0,i.range[1]=i.range[0]),i.first_column<0&&(i.first_column=0),i.last_column<0&&(i.last_column=i.first_column>0?i.first_column:80),i},prettyPrintRange:function(e,t,n){e=this.deriveLocationInfo(e,t,n);var r=(this.matched+this._input).split("\n"),i=Math.max(1,t?t.first_line:e.first_line-3),o=Math.max(1,n?n.last_line:e.last_line+1),a=1+Math.log10(1|o)|0,s=new Array(a).join(" "),l=[],c=r.slice(i-1,o+1).map((function(t,n){var r=n+i,o=(s+r).substr(-a)+": "+t,c=new Array(a+1).join("^"),u=3,h=0;(r===e.first_line?(u+=e.first_column,h=Math.max(2,(r===e.last_line?e.last_column:t.length)-e.first_column+1)):r===e.last_line?h=Math.max(2,e.last_column+1):r>e.first_line&&r<e.last_line&&(h=Math.max(2,t.length+1)),h)&&(o+="\n"+c+new Array(u).join(".")+new Array(h).join("^"),t.trim().length>0&&l.push(n));return o=o.replace(/\t/g," ")}));if(l.length>4){var u=l[1]+1,h=l[l.length-2]-1,d=new Array(a+1).join(" ")+"  (...continued...)";d+="\n"+new Array(a+1).join("-")+"  (---------------)",c.splice(u,h-u+1,d)}return c.join("\n")},describeYYLLOC:function(e,t){var n,r=e.first_line,i=e.last_line,o=e.first_column,a=e.last_column;if(0===i-r?(n="line "+r+", ",n+=a-o<=1?"column "+o:"columns "+o+" .. "+a):n="lines "+r+"(column "+o+") .. "+i+"(column "+a+")",e.range&&t){var s=e.range[0],l=e.range[1]-1;n+=l<=s?" {String Offset: "+s+"}":" {String Offset range: "+s+" .. "+l+"}"}return n},test_match:function(e,t){var n,r,i,o,a;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),a=(o=e[0]).length,(r=o.split(/(?:\r\n?|\n)/g)).length>1?(this.yylineno+=r.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r[r.length-1].length):this.yylloc.last_column+=a,this.yytext+=o,this.match+=o,this.matched+=o,this.matches=e,this.yyleng=this.yytext.length,this.yylloc.range[1]+=a,this.offset+=a,this._more=!1,this._backtrack=!1,this._input=this._input.slice(a),n=this.performAction.call(this,this.yy,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in i)this[s]=i[s];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(n=this._signaled_error_token,this._signaled_error_token=!1,n)},next:function(){if(this.done)return this.clear(),this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||this.clear();var i=this.__currentRuleSet__;if(!i&&(!(i=this.__currentRuleSet__=this._currentRules())||!i.rules)){var o="";this.options.trackPosition&&(o=" on line "+(this.yylineno+1));var a=this.constructLexErrorInfo("Internal lexer engine error"+o+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(a.errStr,a,this.JisonLexerError)||this.ERROR}for(var s=i.rules,l=i.__rule_regexes,c=i.__rule_count,u=1;u<=c;u++)if((n=this._input.match(l[u]))&&(!t||n[0].length>t[0].length)){if(t=n,r=u,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,s[u])))return e;if(this._backtrack){t=void 0;continue}return!1}if(!this.options.flex)break}if(t)return!1!==(e=this.test_match(t,s[r]))&&e;if(this._input){o="";this.options.trackPosition&&(o=" on line "+(this.yylineno+1));a=this.constructLexErrorInfo("Lexical error"+o+": Unrecognized text.",this.options.lexerErrorsAreRecoverable);var h=this._input,d=this.topState(),p=this.conditionStack.length;return(e=this.parseError(a.errStr,a,this.JisonLexerError)||this.ERROR)===this.ERROR&&(this.matches||h!==this._input||d!==this.topState()||p!==this.conditionStack.length||this.input()),e}return this.done=!0,this.clear(),this.EOF},lex:function(){var e;for("function"===typeof this.pre_lex&&(e=this.pre_lex.call(this,0)),"function"===typeof this.options.pre_lex&&(e=this.options.pre_lex.call(this,e)||e),this.yy&&"function"===typeof this.yy.pre_lex&&(e=this.yy.pre_lex.call(this,e)||e);!e;)e=this.next();return this.yy&&"function"===typeof this.yy.post_lex&&(e=this.yy.post_lex.call(this,e)||e),"function"===typeof this.options.post_lex&&(e=this.options.post_lex.call(this,e)||e),"function"===typeof this.post_lex&&(e=this.post_lex.call(this,e)||e),e},fastLex:function(){for(var e;!e;)e=this.next();return e},canIUse:function(){return{fastLex:!("function"===typeof this.pre_lex||"function"===typeof this.options.pre_lex||this.yy&&"function"===typeof this.yy.pre_lex||this.yy&&"function"===typeof this.yy.post_lex||"function"===typeof this.options.post_lex||"function"===typeof this.post_lex)&&"function"===typeof this.fastLex}},begin:function(e){return this.pushState(e)},pushState:function(e){return this.conditionStack.push(e),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:e,performAction:function(e,t,n){if(1!==t)return this.simpleCaseActionClusters[t]},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return t}();function a(){this.yy={}}return i.lexer=o,a.prototype=i,i.Parser=a,new a}();t.parser=n,t.Parser=n.Parser,t.parse=function(){return n.parse.apply(n,arguments)}},40082:(e,t,n)=>{var r=n(83257),i=n(42993),o=n(19581);function a(e){return this instanceof a?(this.nodes=r(e),this):new a(e)}a.prototype.toString=function(){return Array.isArray(this.nodes)?o(this.nodes):""},a.prototype.walk=function(e,t){return i(this.nodes,e,t),this},a.unit=n(54119),a.walk=i,a.stringify=o,e.exports=a},83257:e=>{var t="(".charCodeAt(0),n=")".charCodeAt(0),r="'".charCodeAt(0),i='"'.charCodeAt(0),o="\\".charCodeAt(0),a="/".charCodeAt(0),s=",".charCodeAt(0),l=":".charCodeAt(0),c="*".charCodeAt(0);e.exports=function(e){for(var u,h,d,p,m,f,g,v,y=[],_=e,x=0,b=_.charCodeAt(x),w=_.length,S=[{nodes:y}],M=0,E="",T="",C="";x<w;)if(b<=32){u=x;do{u+=1,b=_.charCodeAt(u)}while(b<=32);p=_.slice(x,u),d=y[y.length-1],b===n&&M?C=p:d&&"div"===d.type?d.after=p:b===s||b===l||b===a&&_.charCodeAt(u+1)!==c?T=p:y.push({type:"space",sourceIndex:x,value:p}),x=u}else if(b===r||b===i){u=x,p={type:"string",sourceIndex:x,quote:h=b===r?"'":'"'};do{if(m=!1,~(u=_.indexOf(h,u+1)))for(f=u;_.charCodeAt(f-1)===o;)f-=1,m=!m;else u=(_+=h).length-1,p.unclosed=!0}while(m);p.value=_.slice(x+1,u),y.push(p),x=u+1,b=_.charCodeAt(x)}else if(b===a&&_.charCodeAt(x+1)===c)p={type:"comment",sourceIndex:x},-1===(u=_.indexOf("*/",x))&&(p.unclosed=!0,u=_.length),p.value=_.slice(x+2,u),y.push(p),x=u+2,b=_.charCodeAt(x);else if(b===a||b===s||b===l)p=_[x],y.push({type:"div",sourceIndex:x-T.length,value:p,before:T,after:""}),T="",x+=1,b=_.charCodeAt(x);else if(t===b){u=x;do{u+=1,b=_.charCodeAt(u)}while(b<=32);if(p={type:"function",sourceIndex:x-E.length,value:E,before:_.slice(x+1,u)},x=u,"url"===E&&b!==r&&b!==i){u-=1;do{if(m=!1,~(u=_.indexOf(")",u+1)))for(f=u;_.charCodeAt(f-1)===o;)f-=1,m=!m;else u=(_+=")").length-1,p.unclosed=!0}while(m);g=u;do{g-=1,b=_.charCodeAt(g)}while(b<=32);p.nodes=x!==g+1?[{type:"word",sourceIndex:x,value:_.slice(x,g+1)}]:[],p.unclosed&&g+1!==u?(p.after="",p.nodes.push({type:"space",sourceIndex:g+1,value:_.slice(g+1,u)})):p.after=_.slice(g+1,u),x=u+1,b=_.charCodeAt(x),y.push(p)}else M+=1,p.after="",y.push(p),S.push(p),y=p.nodes=[],v=p;E=""}else if(n===b&&M)x+=1,b=_.charCodeAt(x),v.after=C,C="",M-=1,S.pop(),y=(v=S[M]).nodes;else{u=x;do{b===o&&(u+=1),u+=1,b=_.charCodeAt(u)}while(u<w&&!(b<=32||b===r||b===i||b===s||b===l||b===a||b===t||b===n&&M));p=_.slice(x,u),t===b?E=p:y.push({type:"word",sourceIndex:x,value:p}),x=u}for(x=S.length-1;x;x-=1)S[x].unclosed=!0;return S[0].nodes}},19581:e=>{function t(e,t){var r,i,o=e.type,a=e.value;return t&&void 0!==(i=t(e))?i:"word"===o||"space"===o?a:"string"===o?(r=e.quote||"")+a+(e.unclosed?"":r):"comment"===o?"/*"+a+(e.unclosed?"":"*/"):"div"===o?(e.before||"")+a+(e.after||""):Array.isArray(e.nodes)?(r=n(e.nodes),"function"!==o?r:a+"("+(e.before||"")+r+(e.after||"")+(e.unclosed?"":")")):a}function n(e,n){var r,i;if(Array.isArray(e)){for(r="",i=e.length-1;~i;i-=1)r=t(e[i],n)+r;return r}return t(e,n)}e.exports=n},54119:e=>{var t="-".charCodeAt(0),n="+".charCodeAt(0),r=".".charCodeAt(0),i="e".charCodeAt(0),o="E".charCodeAt(0);e.exports=function(e){for(var a,s=0,l=e.length,c=!1,u=-1,h=!1;s<l;){if((a=e.charCodeAt(s))>=48&&a<=57)h=!0;else if(a===i||a===o){if(u>-1)break;u=s}else if(a===r){if(c)break;c=!0}else{if(a!==n&&a!==t)break;if(0!==s)break}s+=1}return u+1===s&&s--,!!h&&{number:e.slice(0,s),unit:e.slice(s)}}},42993:e=>{e.exports=function e(t,n,r){var i,o,a,s;for(i=0,o=t.length;i<o;i+=1)a=t[i],r||(s=n(a,i,t)),!1!==s&&"function"===a.type&&Array.isArray(a.nodes)&&e(a.nodes,n,r),r&&n(a,i,t)}},90474:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,o="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&l()}function s(){a(o)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},d=y(0,0,0,0);function p(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function f(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=h(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=p(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=p(r.width),l=p(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=m(r,"left","right")+o),Math.round(l+a)!==n&&(l-=m(r,"top","bottom")+a)),!function(e){return e===h(e).document.documentElement}(e)){var c=Math.round(s+o)-t,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return y(i.left,i.top,s,l)}var g="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"===typeof e.getBBox};function v(e){return i?g(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):f(e):d}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var _=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),x=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return u(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);u(this,{target:e,contentRect:n})},b=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new _(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new x(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!==typeof WeakMap?new WeakMap:new r,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new b(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));const M="undefined"!==typeof o.ResizeObserver?o.ResizeObserver:S},36813:(e,t)=>{"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,g=null,v=-1,y=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();_=e+y;try{g(!0,e)?b.postMessage(null):(f=!1,g=null)}catch(n){throw b.postMessage(null),n}}else f=!1},n=function(e){g=e,f||(f=!0,b.postMessage(null))},r=function(e,n){v=d((function(){e(t.unstable_now())}),n)},i=function(){p(v),v=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function M(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>E(a,n))void 0!==l&&0>E(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>E(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],C=[],A=1,P=null,O=3,R=!1,L=!1,D=!1;function k(e){for(var t=S(C);null!==t;){if(null===t.callback)M(C);else{if(!(t.startTime<=e))break;M(C),t.sortIndex=t.expirationTime,w(T,t)}t=S(C)}}function I(e){if(D=!1,k(e),!L)if(null!==S(T))L=!0,n(F);else{var t=S(C);null!==t&&r(I,t.startTime-e)}}function F(e,n){L=!1,D&&(D=!1,i()),R=!0;var o=O;try{for(k(n),P=S(T);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=P.callback;if("function"===typeof a){P.callback=null,O=P.priorityLevel;var s=a(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?P.callback=s:P===S(T)&&M(T),k(n)}else M(T);P=S(T)}if(null!==P)var l=!0;else{var c=S(C);null!==c&&r(I,c.startTime-n),l=!1}return l}finally{P=null,O=o,R=!1}}var N=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||R||(L=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return S(T)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:A++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,w(C,e),null===S(T)&&e===S(C)&&(D?i():D=!0,r(I,a-s))):(e.sortIndex=l,w(T,e),L||R||(L=!0,n(F))),e},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}},45296:(e,t,n)=>{"use strict";e.exports=n(36813)},79613:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>ne,AddEquation:()=>E,AddOperation:()=>Y,AdditiveAnimationBlendMode:()=>qt,AdditiveBlending:()=>b,AlphaFormat:()=>Fe,AlwaysDepth:()=>V,AlwaysStencilFunc:()=>Mn,AmbientLight:()=>Dh,AmbientLightProbe:()=>td,AnimationClip:()=>ku,AnimationLoader:()=>Vu,AnimationMixer:()=>Dd,AnimationObjectGroup:()=>Rd,AnimationUtils:()=>bu,ArcCurve:()=>Ku,ArrayCamera:()=>Zs,ArrowHelper:()=>Sp,Audio:()=>dd,AudioAnalyser:()=>yd,AudioContext:()=>Qh,AudioListener:()=>hd,AudioLoader:()=>Jh,AxesHelper:()=>Mp,AxisHelper:()=>Mm,BackSide:()=>f,BasicDepthPacking:()=>on,BasicShadowMap:()=>u,BinaryTextureLoader:()=>Pm,Bone:()=>Ll,BooleanKeyframeTrack:()=>Cu,BoundingBoxHelper:()=>Em,Box2:()=>Gd,Box3:()=>ur,Box3Helper:()=>yp,BoxBufferGeometry:()=>Eo,BoxGeometry:()=>Eo,BoxHelper:()=>vp,BufferAttribute:()=>Ni,BufferGeometry:()=>io,BufferGeometryLoader:()=>Bh,ByteType:()=>Ee,Cache:()=>Fu,Camera:()=>Oo,CameraHelper:()=>mp,CanvasRenderer:()=>Rm,CanvasTexture:()=>lc,CatmullRomCurve3:()=>nh,CineonToneMapping:()=>te,CircleBufferGeometry:()=>uc,CircleGeometry:()=>uc,ClampToEdgeWrapping:()=>de,Clock:()=>od,Color:()=>Di,ColorKeyframeTrack:()=>Au,CompressedTexture:()=>sc,CompressedTextureLoader:()=>Gu,ConeBufferGeometry:()=>dc,ConeGeometry:()=>dc,CubeCamera:()=>Do,CubeReflectionMapping:()=>oe,CubeRefractionMapping:()=>ae,CubeTexture:()=>ko,CubeTextureLoader:()=>Wu,CubeUVReflectionMapping:()=>ce,CubeUVRefractionMapping:()=>ue,CubicBezierCurve:()=>ah,CubicBezierCurve3:()=>sh,CubicInterpolant:()=>Su,CullFaceBack:()=>s,CullFaceFront:()=>l,CullFaceFrontBack:()=>c,CullFaceNone:()=>a,Curve:()=>$u,CurvePath:()=>mh,CustomBlending:()=>M,CustomToneMapping:()=>re,CylinderBufferGeometry:()=>hc,CylinderGeometry:()=>hc,Cylindrical:()=>Bd,DataTexture:()=>Dl,DataTexture2DArray:()=>oa,DataTexture3D:()=>aa,DataTextureLoader:()=>qu,DataUtils:()=>Cp,DecrementStencilOp:()=>pn,DecrementWrapStencilOp:()=>fn,DefaultLoadingManager:()=>zu,DepthFormat:()=>Ve,DepthStencilFormat:()=>Ge,DepthTexture:()=>cc,DirectionalLight:()=>Lh,DirectionalLightHelper:()=>hp,DiscreteInterpolant:()=>Eu,DodecahedronBufferGeometry:()=>mc,DodecahedronGeometry:()=>mc,DoubleSide:()=>g,DstAlphaFactor:()=>F,DstColorFactor:()=>z,DynamicBufferAttribute:()=>mm,DynamicCopyUsage:()=>Ln,DynamicDrawUsage:()=>Tn,DynamicReadUsage:()=>Pn,EdgesGeometry:()=>_c,EdgesHelper:()=>Tm,EllipseCurve:()=>Xu,EqualDepth:()=>W,EqualStencilFunc:()=>_n,EquirectangularReflectionMapping:()=>se,EquirectangularRefractionMapping:()=>le,Euler:()=>$r,EventDispatcher:()=>Fn,ExtrudeBufferGeometry:()=>$c,ExtrudeGeometry:()=>$c,FaceColors:()=>rm,FileLoader:()=>Bu,FlatShading:()=>v,Float16BufferAttribute:()=>Wi,Float32Attribute:()=>wm,Float32BufferAttribute:()=>qi,Float64Attribute:()=>Sm,Float64BufferAttribute:()=>Zi,FloatType:()=>Oe,Fog:()=>nl,FogExp2:()=>tl,Font:()=>$h,FontLoader:()=>Kh,FrontSide:()=>m,Frustum:()=>zo,GLBufferAttribute:()=>Fd,GLSL1:()=>kn,GLSL3:()=>In,GammaEncoding:()=>Qt,GreaterDepth:()=>Z,GreaterEqualDepth:()=>q,GreaterEqualStencilFunc:()=>Sn,GreaterStencilFunc:()=>bn,GridHelper:()=>ap,Group:()=>$s,HalfFloatType:()=>Re,HemisphereLight:()=>yh,HemisphereLightHelper:()=>op,HemisphereLightProbe:()=>ed,IcosahedronBufferGeometry:()=>Kc,IcosahedronGeometry:()=>Kc,ImageBitmapLoader:()=>qh,ImageLoader:()=>Hu,ImageUtils:()=>Qn,ImmediateRenderObject:()=>Zd,IncrementStencilOp:()=>dn,IncrementWrapStencilOp:()=>mn,InstancedBufferAttribute:()=>jh,InstancedBufferGeometry:()=>Uh,InstancedInterleavedBuffer:()=>Id,InstancedMesh:()=>Bl,Int16Attribute:()=>ym,Int16BufferAttribute:()=>Bi,Int32Attribute:()=>xm,Int32BufferAttribute:()=>Gi,Int8Attribute:()=>fm,Int8BufferAttribute:()=>zi,IntType:()=>Ae,InterleavedBuffer:()=>il,InterleavedBufferAttribute:()=>al,Interpolant:()=>wu,InterpolateDiscrete:()=>Ut,InterpolateLinear:()=>jt,InterpolateSmooth:()=>Bt,InvertStencilOp:()=>gn,JSONLoader:()=>Lm,KeepStencilOp:()=>un,KeyframeTrack:()=>Tu,LOD:()=>El,LatheBufferGeometry:()=>Yc,LatheGeometry:()=>Yc,Layers:()=>Xr,LensFlare:()=>km,LessDepth:()=>G,LessEqualDepth:()=>H,LessEqualStencilFunc:()=>xn,LessStencilFunc:()=>yn,Light:()=>vh,LightProbe:()=>Fh,Line:()=>$l,Line3:()=>qd,LineBasicMaterial:()=>Vl,LineCurve:()=>lh,LineCurve3:()=>ch,LineDashedMaterial:()=>_u,LineLoop:()=>Ql,LinePieces:()=>tm,LineSegments:()=>Yl,LineStrip:()=>em,LinearEncoding:()=>Kt,LinearFilter:()=>_e,LinearInterpolant:()=>Mu,LinearMipMapLinearFilter:()=>Se,LinearMipMapNearestFilter:()=>be,LinearMipmapLinearFilter:()=>we,LinearMipmapNearestFilter:()=>xe,LinearToneMapping:()=>J,Loader:()=>Uu,LoaderUtils:()=>zh,LoadingManager:()=>Nu,LogLuvEncoding:()=>en,LoopOnce:()=>Ft,LoopPingPong:()=>zt,LoopRepeat:()=>Nt,LuminanceAlphaFormat:()=>je,LuminanceFormat:()=>Ue,MOUSE:()=>i,Material:()=>Ti,MaterialLoader:()=>Nh,Math:()=>$n,MathUtils:()=>$n,Matrix3:()=>Kn,Matrix4:()=>zr,MaxEquation:()=>P,Mesh:()=>So,MeshBasicMaterial:()=>ki,MeshDepthMaterial:()=>Bs,MeshDistanceMaterial:()=>Vs,MeshFaceMaterial:()=>om,MeshLambertMaterial:()=>vu,MeshMatcapMaterial:()=>yu,MeshNormalMaterial:()=>gu,MeshPhongMaterial:()=>mu,MeshPhysicalMaterial:()=>pu,MeshStandardMaterial:()=>du,MeshToonMaterial:()=>fu,MinEquation:()=>A,MirroredRepeatWrapping:()=>pe,MixOperation:()=>K,MultiMaterial:()=>am,MultiplyBlending:()=>S,MultiplyOperation:()=>X,NearestFilter:()=>me,NearestMipMapLinearFilter:()=>ye,NearestMipMapNearestFilter:()=>ge,NearestMipmapLinearFilter:()=>ve,NearestMipmapNearestFilter:()=>fe,NeverDepth:()=>B,NeverStencilFunc:()=>vn,NoBlending:()=>_,NoColors:()=>nm,NoToneMapping:()=>Q,NormalAnimationBlendMode:()=>Wt,NormalBlending:()=>x,NotEqualDepth:()=>$,NotEqualStencilFunc:()=>wn,NumberKeyframeTrack:()=>Pu,Object3D:()=>ci,ObjectLoader:()=>Vh,ObjectSpaceNormalMap:()=>ln,OctahedronBufferGeometry:()=>Qc,OctahedronGeometry:()=>Qc,OneFactor:()=>R,OneMinusDstAlphaFactor:()=>N,OneMinusDstColorFactor:()=>U,OneMinusSrcAlphaFactor:()=>I,OneMinusSrcColorFactor:()=>D,OrthographicCamera:()=>Oh,PCFShadowMap:()=>h,PCFSoftShadowMap:()=>d,PMREMGenerator:()=>Wp,ParametricBufferGeometry:()=>Jc,ParametricGeometry:()=>Jc,Particle:()=>lm,ParticleBasicMaterial:()=>hm,ParticleSystem:()=>cm,ParticleSystemMaterial:()=>dm,Path:()=>fh,PerspectiveCamera:()=>Ro,Plane:()=>pi,PlaneBufferGeometry:()=>Bo,PlaneGeometry:()=>Bo,PlaneHelper:()=>_p,PointCloud:()=>sm,PointCloudMaterial:()=>um,PointLight:()=>Ph,PointLightHelper:()=>tp,Points:()=>ic,PointsMaterial:()=>Jl,PolarGridHelper:()=>sp,PolyhedronBufferGeometry:()=>pc,PolyhedronGeometry:()=>pc,PositionalAudio:()=>vd,PropertyBinding:()=>Od,PropertyMixer:()=>_d,QuadraticBezierCurve:()=>uh,QuadraticBezierCurve3:()=>hh,Quaternion:()=>ar,QuaternionKeyframeTrack:()=>Ru,QuaternionLinearInterpolant:()=>Ou,REVISION:()=>r,RGBADepthPacking:()=>an,RGBAFormat:()=>ze,RGBAIntegerFormat:()=>Xe,RGBA_ASTC_10x10_Format:()=>yt,RGBA_ASTC_10x5_Format:()=>ft,RGBA_ASTC_10x6_Format:()=>gt,RGBA_ASTC_10x8_Format:()=>vt,RGBA_ASTC_12x10_Format:()=>_t,RGBA_ASTC_12x12_Format:()=>xt,RGBA_ASTC_4x4_Format:()=>st,RGBA_ASTC_5x4_Format:()=>lt,RGBA_ASTC_5x5_Format:()=>ct,RGBA_ASTC_6x5_Format:()=>ut,RGBA_ASTC_6x6_Format:()=>ht,RGBA_ASTC_8x5_Format:()=>dt,RGBA_ASTC_8x6_Format:()=>pt,RGBA_ASTC_8x8_Format:()=>mt,RGBA_BPTC_Format:()=>bt,RGBA_ETC2_EAC_Format:()=>at,RGBA_PVRTC_2BPPV1_Format:()=>rt,RGBA_PVRTC_4BPPV1_Format:()=>nt,RGBA_S3TC_DXT1_Format:()=>Ye,RGBA_S3TC_DXT3_Format:()=>Qe,RGBA_S3TC_DXT5_Format:()=>Je,RGBDEncoding:()=>rn,RGBEEncoding:()=>Jt,RGBEFormat:()=>Be,RGBFormat:()=>Ne,RGBIntegerFormat:()=>$e,RGBM16Encoding:()=>nn,RGBM7Encoding:()=>tn,RGB_ETC1_Format:()=>it,RGB_ETC2_Format:()=>ot,RGB_PVRTC_2BPPV1_Format:()=>tt,RGB_PVRTC_4BPPV1_Format:()=>et,RGB_S3TC_DXT1_Format:()=>Ke,RGFormat:()=>qe,RGIntegerFormat:()=>Ze,RawShaderMaterial:()=>hu,Ray:()=>Nr,Raycaster:()=>Nd,RectAreaLight:()=>kh,RedFormat:()=>He,RedIntegerFormat:()=>We,ReinhardToneMapping:()=>ee,RepeatWrapping:()=>he,ReplaceStencilOp:()=>hn,ReverseSubtractEquation:()=>C,RingBufferGeometry:()=>eu,RingGeometry:()=>eu,SRGB8_ALPHA8_ASTC_10x10_Format:()=>Dt,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Ot,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Rt,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Lt,SRGB8_ALPHA8_ASTC_12x10_Format:()=>kt,SRGB8_ALPHA8_ASTC_12x12_Format:()=>It,SRGB8_ALPHA8_ASTC_4x4_Format:()=>wt,SRGB8_ALPHA8_ASTC_5x4_Format:()=>St,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Mt,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Et,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Tt,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Ct,SRGB8_ALPHA8_ASTC_8x6_Format:()=>At,SRGB8_ALPHA8_ASTC_8x8_Format:()=>Pt,Scene:()=>rl,SceneUtils:()=>Dm,ShaderChunk:()=>Vo,ShaderLib:()=>Ho,ShaderMaterial:()=>Po,ShadowMaterial:()=>uu,Shape:()=>gh,ShapeBufferGeometry:()=>tu,ShapeGeometry:()=>tu,ShapePath:()=>Zh,ShapeUtils:()=>Wc,ShortType:()=>Te,Skeleton:()=>Fl,SkeletonHelper:()=>Jd,SkinnedMesh:()=>Rl,SmoothShading:()=>y,Sphere:()=>Pr,SphereBufferGeometry:()=>nu,SphereGeometry:()=>nu,Spherical:()=>jd,SphericalHarmonics3:()=>Ih,SplineCurve:()=>dh,SpotLight:()=>Mh,SpotLightHelper:()=>Xd,Sprite:()=>bl,SpriteMaterial:()=>sl,SrcAlphaFactor:()=>k,SrcAlphaSaturateFactor:()=>j,SrcColorFactor:()=>L,StaticCopyUsage:()=>Rn,StaticDrawUsage:()=>En,StaticReadUsage:()=>An,StereoCamera:()=>id,StreamCopyUsage:()=>Dn,StreamDrawUsage:()=>Cn,StreamReadUsage:()=>On,StringKeyframeTrack:()=>Lu,SubtractEquation:()=>T,SubtractiveBlending:()=>w,TOUCH:()=>o,TangentSpaceNormalMap:()=>sn,TetrahedronBufferGeometry:()=>ru,TetrahedronGeometry:()=>ru,TextBufferGeometry:()=>iu,TextGeometry:()=>iu,Texture:()=>er,TextureLoader:()=>Zu,TorusBufferGeometry:()=>ou,TorusGeometry:()=>ou,TorusKnotBufferGeometry:()=>au,TorusKnotGeometry:()=>au,Triangle:()=>Mi,TriangleFanDrawMode:()=>Xt,TriangleStripDrawMode:()=>$t,TrianglesDrawMode:()=>Zt,TubeBufferGeometry:()=>su,TubeGeometry:()=>su,UVMapping:()=>ie,Uint16Attribute:()=>_m,Uint16BufferAttribute:()=>Vi,Uint32Attribute:()=>bm,Uint32BufferAttribute:()=>Hi,Uint8Attribute:()=>gm,Uint8BufferAttribute:()=>Ui,Uint8ClampedAttribute:()=>vm,Uint8ClampedBufferAttribute:()=>ji,Uniform:()=>kd,UniformsLib:()=>Go,UniformsUtils:()=>Ao,UnsignedByteType:()=>Me,UnsignedInt248Type:()=>Ie,UnsignedIntType:()=>Pe,UnsignedShort4444Type:()=>Le,UnsignedShort5551Type:()=>De,UnsignedShort565Type:()=>ke,UnsignedShortType:()=>Ce,VSMShadowMap:()=>p,Vector2:()=>Xn,Vector3:()=>sr,Vector4:()=>nr,VectorKeyframeTrack:()=>Du,Vertex:()=>pm,VertexColors:()=>im,VideoTexture:()=>ac,WebGL1Renderer:()=>el,WebGLCubeRenderTarget:()=>Io,WebGLMultipleRenderTargets:()=>ir,WebGLMultisampleRenderTarget:()=>or,WebGLRenderTarget:()=>rr,WebGLRenderTargetCube:()=>Om,WebGLRenderer:()=>Js,WebGLUtils:()=>qs,WireframeGeometry:()=>lu,WireframeHelper:()=>Cm,WrapAroundEnding:()=>Ht,XHRLoader:()=>Am,ZeroCurvatureEnding:()=>Vt,ZeroFactor:()=>O,ZeroSlopeEnding:()=>Gt,ZeroStencilOp:()=>cn,sRGBEncoding:()=>Yt});const r="129",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,c=3,u=0,h=1,d=2,p=3,m=0,f=1,g=2,v=1,y=2,_=0,x=1,b=2,w=3,S=4,M=5,E=100,T=101,C=102,A=103,P=104,O=200,R=201,L=202,D=203,k=204,I=205,F=206,N=207,z=208,U=209,j=210,B=0,V=1,G=2,H=3,W=4,q=5,Z=6,$=7,X=0,K=1,Y=2,Q=0,J=1,ee=2,te=3,ne=4,re=5,ie=300,oe=301,ae=302,se=303,le=304,ce=306,ue=307,he=1e3,de=1001,pe=1002,me=1003,fe=1004,ge=1004,ve=1005,ye=1005,_e=1006,xe=1007,be=1007,we=1008,Se=1008,Me=1009,Ee=1010,Te=1011,Ce=1012,Ae=1013,Pe=1014,Oe=1015,Re=1016,Le=1017,De=1018,ke=1019,Ie=1020,Fe=1021,Ne=1022,ze=1023,Ue=1024,je=1025,Be=ze,Ve=1026,Ge=1027,He=1028,We=1029,qe=1030,Ze=1031,$e=1032,Xe=1033,Ke=33776,Ye=33777,Qe=33778,Je=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,ot=37492,at=37496,st=37808,lt=37809,ct=37810,ut=37811,ht=37812,dt=37813,pt=37814,mt=37815,ft=37816,gt=37817,vt=37818,yt=37819,_t=37820,xt=37821,bt=36492,wt=37840,St=37841,Mt=37842,Et=37843,Tt=37844,Ct=37845,At=37846,Pt=37847,Ot=37848,Rt=37849,Lt=37850,Dt=37851,kt=37852,It=37853,Ft=2200,Nt=2201,zt=2202,Ut=2300,jt=2301,Bt=2302,Vt=2400,Gt=2401,Ht=2402,Wt=2500,qt=2501,Zt=0,$t=1,Xt=2,Kt=3e3,Yt=3001,Qt=3007,Jt=3002,en=3003,tn=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,ln=1,cn=0,un=7680,hn=7681,dn=7682,pn=7683,mn=34055,fn=34056,gn=5386,vn=512,yn=513,_n=514,xn=515,bn=516,wn=517,Sn=518,Mn=519,En=35044,Tn=35048,Cn=35040,An=35045,Pn=35049,On=35041,Rn=35046,Ln=35050,Dn=35042,kn="100",In="300 es";class Fn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Nn=[];for(let Im=0;Im<256;Im++)Nn[Im]=(Im<16?"0":"")+Im.toString(16);let zn=1234567;const Un=Math.PI/180,jn=180/Math.PI;function Bn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Nn[255&e]+Nn[e>>8&255]+Nn[e>>16&255]+Nn[e>>24&255]+"-"+Nn[255&t]+Nn[t>>8&255]+"-"+Nn[t>>16&15|64]+Nn[t>>24&255]+"-"+Nn[63&n|128]+Nn[n>>8&255]+"-"+Nn[n>>16&255]+Nn[n>>24&255]+Nn[255&r]+Nn[r>>8&255]+Nn[r>>16&255]+Nn[r>>24&255]).toUpperCase()}function Vn(e,t,n){return Math.max(t,Math.min(n,e))}function Gn(e,t){return(e%t+t)%t}function Hn(e,t,n){return(1-n)*e+n*t}function Wn(e){return 0===(e&e-1)&&0!==e}function qn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Zn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var $n=Object.freeze({__proto__:null,DEG2RAD:Un,RAD2DEG:jn,generateUUID:Bn,clamp:Vn,euclideanModulo:Gn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Hn,damp:function(e,t,n,r){return Hn(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Gn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(zn=e%2147483647),zn=16807*zn%2147483647,(zn-1)/2147483646},degToRad:function(e){return e*Un},radToDeg:function(e){return e*jn},isPowerOfTwo:Wn,ceilPowerOfTwo:qn,floorPowerOfTwo:Zn,setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),p=o((r-t)/2),m=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*m,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*m,s*c);break;case"ZYZ":e.set(l*m,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class Xn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Xn.prototype.isVector2=!0;class Kn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],m=r[0],f=r[3],g=r[6],v=r[1],y=r[4],_=r[7],x=r[2],b=r[5],w=r[8];return i[0]=o*m+a*v+s*x,i[3]=o*f+a*y+s*b,i[6]=o*g+a*_+s*w,i[1]=l*m+c*v+u*x,i[4]=l*f+c*y+u*b,i[7]=l*g+c*_+u*w,i[2]=h*m+d*v+p*x,i[5]=h*f+d*y+p*b,i[8]=h*g+d*_+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(r*l-c*n)*m,e[2]=(a*n-r*o)*m,e[3]=h*m,e[4]=(c*t-r*s)*m,e[5]=(r*i-a*t)*m,e[6]=d*m,e[7]=(n*s-l*t)*m,e[8]=(o*t-n*i)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let Yn;Kn.prototype.isMatrix3=!0;class Qn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Yn&&(Yn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Yn.width=e.width,Yn.height=e.height;const n=Yn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Yn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Jn=0;class er extends Fn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:er.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:we,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ze,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Me,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Kt;super(),Object.defineProperty(this,"id",{value:Jn++}),this.uuid=Bn(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Xn(0,0),this.repeat=new Xn(1,1),this.center=new Xn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Bn()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(tr(r[e].image)):t.push(tr(r[e]))}else t=tr(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case he:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case pe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case he:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case pe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function tr(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Qn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}er.DEFAULT_IMAGE=void 0,er.DEFAULT_MAPPING=ie,er.prototype.isTexture=!0;class nr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],m=s[2],f=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-m)<o&&Math.abs(p-f)<o){if(Math.abs(c+h)<a&&Math.abs(u+m)<a&&Math.abs(p+f)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,_=(u+m)/4,x=(p+f)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=_/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=_/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((f-p)*(f-p)+(u-m)*(u-m)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(u-m)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}nr.prototype.isVector4=!0;class rr extends Fn{constructor(e,t,n){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new nr(0,0,e,t),this.scissorTest=!1,this.viewport=new nr(0,0,e,t),n=n||{},this.texture=new er(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:_e,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}rr.prototype.isWebGLRenderTarget=!0;class ir extends rr{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let i=0;i<n;i++)this.texture[i]=r.clone()}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}ir.prototype.isWebGLMultipleRenderTargets=!0;class or extends rr{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}or.prototype.isWebGLMultisampleRenderTarget=!0;class ar{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],m=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=m);if(u!==m||s!==h||l!==d||c!==p){let e=1-a;const t=s*h+l*d+c*p+u*m,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+m*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*d-l*h,e[t+1]=s*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-s*u,e[t+3]=c*p-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ar.prototype.isQuaternion=!0;class sr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(cr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(cr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return lr.copy(this).projectOnVector(e),this.sub(lr)}reflect(e){return this.sub(lr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}sr.prototype.isVector3=!0;const lr=new sr,cr=new ar;class ur{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr(-1/0,-1/0,-1/0);this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=dr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new sr),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new sr),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),pr.copy(t.boundingBox),pr.applyMatrix4(e.matrixWorld),this.union(pr));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new sr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,dr),dr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xr),br.subVectors(this.max,xr),mr.subVectors(e.a,xr),fr.subVectors(e.b,xr),gr.subVectors(e.c,xr),vr.subVectors(fr,mr),yr.subVectors(gr,fr),_r.subVectors(mr,gr);let t=[0,-vr.z,vr.y,0,-yr.z,yr.y,0,-_r.z,_r.y,vr.z,0,-vr.x,yr.z,0,-yr.x,_r.z,0,-_r.x,-vr.y,vr.x,0,-yr.y,yr.x,0,-_r.y,_r.x,0];return!!Mr(t,mr,fr,gr,br)&&(t=[1,0,0,0,1,0,0,0,1],!!Mr(t,mr,fr,gr,br)&&(wr.crossVectors(vr,yr),t=[wr.x,wr.y,wr.z],Mr(t,mr,fr,gr,br)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new sr),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return dr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(dr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(hr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ur.prototype.isBox3=!0;const hr=[new sr,new sr,new sr,new sr,new sr,new sr,new sr,new sr],dr=new sr,pr=new ur,mr=new sr,fr=new sr,gr=new sr,vr=new sr,yr=new sr,_r=new sr,xr=new sr,br=new sr,wr=new sr,Sr=new sr;function Mr(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Sr.fromArray(e,o);const a=i.x*Math.abs(Sr.x)+i.y*Math.abs(Sr.y)+i.z*Math.abs(Sr.z),s=t.dot(Sr),l=n.dot(Sr),c=r.dot(Sr);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const Er=new ur,Tr=new sr,Cr=new sr,Ar=new sr;class Pr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Er.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new sr),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new ur),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Ar.subVectors(e,this.center);const t=Ar.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Ar.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return Cr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Tr.copy(e.center).add(Cr)),this.expandByPoint(Tr.copy(e.center).sub(Cr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Or=new sr,Rr=new sr,Lr=new sr,Dr=new sr,kr=new sr,Ir=new sr,Fr=new sr;class Nr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new sr),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Or)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new sr),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Or.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Or.copy(this.direction).multiplyScalar(t).add(this.origin),Or.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Rr.copy(e).add(t).multiplyScalar(.5),Lr.copy(t).sub(e).normalize(),Dr.copy(this.origin).sub(Rr);const i=.5*e.distanceTo(t),o=-this.direction.dot(Lr),a=Dr.dot(this.direction),s=-Dr.dot(Lr),l=Dr.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*s-a,h=o*a-s,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Lr).multiplyScalar(h).add(Rr),d}intersectSphere(e,t){Or.subVectors(e.center,this.origin);const n=Or.dot(this.direction),r=Or.dot(Or)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Or)}intersectTriangle(e,t,n,r,i){kr.subVectors(t,e),Ir.subVectors(n,e),Fr.crossVectors(kr,Ir);let o,a=this.direction.dot(Fr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Dr.subVectors(this.origin,e);const s=o*this.direction.dot(Ir.crossVectors(Dr,Ir));if(s<0)return null;const l=o*this.direction.dot(kr.cross(Dr));if(l<0)return null;if(s+l>a)return null;const c=-o*Dr.dot(Fr);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class zr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l,c,u,h,d,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new zr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Ur.setFromMatrixColumn(e,0).length(),i=1/Ur.setFromMatrixColumn(e,1).length(),o=1/Ur.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Br,e,Vr)}lookAt(e,t,n){const r=this.elements;return Wr.subVectors(e,t),0===Wr.lengthSq()&&(Wr.z=1),Wr.normalize(),Gr.crossVectors(n,Wr),0===Gr.lengthSq()&&(1===Math.abs(n.z)?Wr.x+=1e-4:Wr.z+=1e-4,Wr.normalize(),Gr.crossVectors(n,Wr)),Gr.normalize(),Hr.crossVectors(Wr,Gr),r[0]=Gr.x,r[4]=Hr.x,r[8]=Wr.x,r[1]=Gr.y,r[5]=Hr.y,r[9]=Wr.y,r[2]=Gr.z,r[6]=Hr.z,r[10]=Wr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],y=n[7],_=n[11],x=n[15],b=r[0],w=r[4],S=r[8],M=r[12],E=r[1],T=r[5],C=r[9],A=r[13],P=r[2],O=r[6],R=r[10],L=r[14],D=r[3],k=r[7],I=r[11],F=r[15];return i[0]=o*b+a*E+s*P+l*D,i[4]=o*w+a*T+s*O+l*k,i[8]=o*S+a*C+s*R+l*I,i[12]=o*M+a*A+s*L+l*F,i[1]=c*b+u*E+h*P+d*D,i[5]=c*w+u*T+h*O+d*k,i[9]=c*S+u*C+h*R+d*I,i[13]=c*M+u*A+h*L+d*F,i[2]=p*b+m*E+f*P+g*D,i[6]=p*w+m*T+f*O+g*k,i[10]=p*S+m*C+f*R+g*I,i[14]=p*M+m*A+f*L+g*F,i[3]=v*b+y*E+_*P+x*D,i[7]=v*w+y*T+_*O+x*k,i[11]=v*S+y*C+_*R+x*I,i[15]=v*M+y*A+_*L+x*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=u*f*l-m*h*l+m*s*d-a*f*d-u*s*g+a*h*g,y=p*h*l-c*f*l-p*s*d+o*f*d+c*s*g-o*h*g,_=c*m*l-p*u*l+p*a*d-o*m*d-c*a*g+o*u*g,x=p*u*s-c*m*s-p*a*h+o*m*h+c*a*f-o*u*f,b=t*v+n*y+r*_+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=v*w,e[1]=(m*h*i-u*f*i-m*r*d+n*f*d+u*r*g-n*h*g)*w,e[2]=(a*f*i-m*s*i+m*r*l-n*f*l-a*r*g+n*s*g)*w,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*w,e[4]=y*w,e[5]=(c*f*i-p*h*i+p*r*d-t*f*d-c*r*g+t*h*g)*w,e[6]=(p*s*i-o*f*i-p*r*l+t*f*l+o*r*g-t*s*g)*w,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*w,e[8]=_*w,e[9]=(p*u*i-c*m*i-p*n*d+t*m*d+c*n*g-t*u*g)*w,e[10]=(o*m*i-p*a*i+p*n*l-t*m*l-o*n*g+t*a*g)*w,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*w,e[12]=x*w,e[13]=(c*m*r-p*u*r+p*n*h-t*m*h-c*n*f+t*u*f)*w,e[14]=(p*a*r-o*m*r-p*n*s+t*m*s+o*n*f-t*a*f)*w,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,p=i*u,m=o*c,f=o*u,g=a*u,v=s*l,y=s*c,_=s*u,x=n.x,b=n.y,w=n.z;return r[0]=(1-(m+g))*x,r[1]=(d+_)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(d-_)*b,r[5]=(1-(h+g))*b,r[6]=(f+v)*b,r[7]=0,r[8]=(p+y)*w,r[9]=(f-v)*w,r[10]=(1-(h+m))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Ur.set(r[0],r[1],r[2]).length();const o=Ur.set(r[4],r[5],r[6]).length(),a=Ur.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],jr.copy(this);const s=1/i,l=1/o,c=1/a;return jr.elements[0]*=s,jr.elements[1]*=s,jr.elements[2]*=s,jr.elements[4]*=l,jr.elements[5]*=l,jr.elements[6]*=l,jr.elements[8]*=c,jr.elements[9]*=c,jr.elements[10]*=c,t.setFromRotationMatrix(jr),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}zr.prototype.isMatrix4=!0;const Ur=new sr,jr=new zr,Br=new sr(0,0,0),Vr=new sr(1,1,1),Gr=new sr,Hr=new sr,Wr=new sr,qr=new zr,Zr=new ar;class $r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$r.DefaultOrder;this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(Vn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Vn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Vn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Vn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Vn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Vn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return qr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qr,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Zr.setFromEuler(this),this.setFromQuaternion(Zr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new sr(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}$r.prototype.isEuler=!0,$r.DefaultOrder="XYZ",$r.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Xr{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}}let Kr=0;const Yr=new sr,Qr=new ar,Jr=new zr,ei=new sr,ti=new sr,ni=new sr,ri=new ar,ii=new sr(1,0,0),oi=new sr(0,1,0),ai=new sr(0,0,1),si={type:"added"},li={type:"removed"};class ci extends Fn{constructor(){super(),Object.defineProperty(this,"id",{value:Kr++}),this.uuid=Bn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ci.DefaultUp.clone();const e=new sr,t=new $r,n=new ar,r=new sr(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zr},normalMatrix:{value:new Kn}}),this.matrix=new zr,this.matrixWorld=new zr,this.matrixAutoUpdate=ci.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Xr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Qr.setFromAxisAngle(e,t),this.quaternion.multiply(Qr),this}rotateOnWorldAxis(e,t){return Qr.setFromAxisAngle(e,t),this.quaternion.premultiply(Qr),this}rotateX(e){return this.rotateOnAxis(ii,e)}rotateY(e){return this.rotateOnAxis(oi,e)}rotateZ(e){return this.rotateOnAxis(ai,e)}translateOnAxis(e,t){return Yr.copy(e).applyQuaternion(this.quaternion),this.position.add(Yr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ii,e)}translateY(e){return this.translateOnAxis(oi,e)}translateZ(e){return this.translateOnAxis(ai,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Jr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ei.copy(e):ei.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ti.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jr.lookAt(ti,ei,this.up):Jr.lookAt(ei,ti,this.up),this.quaternion.setFromRotationMatrix(Jr),r&&(Jr.extractRotation(r.matrixWorld),Qr.setFromRotationMatrix(Jr),this.quaternion.premultiply(Qr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(si)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(li)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(li)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Jr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Jr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Jr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new sr),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new ar),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ti,e,ni),e}getWorldScale(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new sr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ti,ri,e),e}getWorldDirection(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new sr),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}ci.DefaultUp=new sr(0,1,0),ci.DefaultMatrixAutoUpdate=!0,ci.prototype.isObject3D=!0;const ui=new sr,hi=new sr,di=new Kn;class pi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ui.subVectors(n,t).cross(hi.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new sr),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new sr);const n=e.delta(ui),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new sr),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||di.getNormalMatrix(e),r=this.coplanarPoint(ui).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}pi.prototype.isPlane=!0;const mi=new sr,fi=new sr,gi=new sr,vi=new sr,yi=new sr,_i=new sr,xi=new sr,bi=new sr,wi=new sr,Si=new sr;class Mi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sr;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new sr),r.subVectors(n,t),mi.subVectors(e,t),r.cross(mi);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){mi.subVectors(r,t),fi.subVectors(n,t),gi.subVectors(e,t);const o=mi.dot(mi),a=mi.dot(fi),s=mi.dot(gi),l=fi.dot(fi),c=fi.dot(gi),u=o*l-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new sr),0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,p=(o*c-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,vi),vi.x>=0&&vi.y>=0&&vi.x+vi.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,vi),s.set(0,0),s.addScaledVector(i,vi.x),s.addScaledVector(o,vi.y),s.addScaledVector(a,vi.z),s}static isFrontFacing(e,t,n,r){return mi.subVectors(n,t),fi.subVectors(e,t),mi.cross(fi).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mi.subVectors(this.c,this.b),fi.subVectors(this.a,this.b),.5*mi.cross(fi).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new sr),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Mi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new pi),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Mi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Mi.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Mi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Mi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new sr);const n=this.a,r=this.b,i=this.c;let o,a;yi.subVectors(r,n),_i.subVectors(i,n),bi.subVectors(e,n);const s=yi.dot(bi),l=_i.dot(bi);if(s<=0&&l<=0)return t.copy(n);wi.subVectors(e,r);const c=yi.dot(wi),u=_i.dot(wi);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(yi,o);Si.subVectors(e,i);const d=yi.dot(Si),p=_i.dot(Si);if(p>=0&&d<=p)return t.copy(i);const m=d*l-s*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(_i,a);const f=c*p-d*u;if(f<=0&&u-c>=0&&d-p>=0)return xi.subVectors(i,r),a=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(xi,a);const g=1/(f+m+h);return o=m*g,a=h*g,t.copy(n).addScaledVector(yi,o).addScaledVector(_i,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ei=0;class Ti extends Fn{constructor(){super(),Object.defineProperty(this,"id",{value:Ei++}),this.uuid=Bn(),this.name="",this.type="Material",this.fog=!0,this.blending=x,this.side=m,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=k,this.blendDst=I,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),this.side!==m&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Ti.prototype.isMaterial=!0;const Ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ai={h:0,s:0,l:0},Pi={h:0,s:0,l:0};function Oi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ri(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Li(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Di{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Gn(e,1),t=Vn(t,0,1),n=Vn(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Oi(i,r,e+1/3),this.g=Oi(i,r,e),this.b=Oi(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Ci[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Ri(e.r),this.g=Ri(e.g),this.b=Ri(e.b),this}copyLinearToSRGB(e){return this.r=Li(e.r),this.g=Li(e.g),this.b=Li(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const l=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=l<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(Ai),Ai.h+=e,Ai.s+=t,Ai.l+=n,this.setHSL(Ai.h,Ai.s,Ai.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ai),e.getHSL(Pi);const n=Hn(Ai.h,Pi.h,t),r=Hn(Ai.s,Pi.s,t),i=Hn(Ai.l,Pi.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Di.NAMES=Ci,Di.prototype.isColor=!0,Di.prototype.r=1,Di.prototype.g=1,Di.prototype.b=1;class ki extends Ti{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}ki.prototype.isMeshBasicMaterial=!0;const Ii=new sr,Fi=new Xn;class Ni{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Di),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Xn),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new sr),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new nr),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Fi.fromBufferAttribute(this,t),Fi.applyMatrix3(e),this.setXY(t,Fi.x,Fi.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ii.fromBufferAttribute(this,t),Ii.applyMatrix3(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ii.x=this.getX(t),Ii.y=this.getY(t),Ii.z=this.getZ(t),Ii.applyMatrix4(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ii.x=this.getX(t),Ii.y=this.getY(t),Ii.z=this.getZ(t),Ii.applyNormalMatrix(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ii.x=this.getX(t),Ii.y=this.getY(t),Ii.z=this.getZ(t),Ii.transformDirection(e),this.setXYZ(t,Ii.x,Ii.y,Ii.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==En&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}Ni.prototype.isBufferAttribute=!0;class zi extends Ni{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ui extends Ni{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class ji extends Ni{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Bi extends Ni{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Vi extends Ni{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Gi extends Ni{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Hi extends Ni{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Wi extends Ni{constructor(e,t,n){super(new Uint16Array(e),t,n)}}Wi.prototype.isFloat16BufferAttribute=!0;class qi extends Ni{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Zi extends Ni{constructor(e,t,n){super(new Float64Array(e),t,n)}}function $i(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}const Xi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ki(e,t){return new Xi[e](t)}let Yi=0;const Qi=new zr,Ji=new ci,eo=new sr,to=new ur,no=new ur,ro=new sr;class io extends Fn{constructor(){super(),Object.defineProperty(this,"id",{value:Yi++}),this.uuid=Bn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($i(e)>65535?Hi:Vi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Kn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qi.makeRotationFromQuaternion(e),this.applyMatrix4(Qi),this}rotateX(e){return Qi.makeRotationX(e),this.applyMatrix4(Qi),this}rotateY(e){return Qi.makeRotationY(e),this.applyMatrix4(Qi),this}rotateZ(e){return Qi.makeRotationZ(e),this.applyMatrix4(Qi),this}translate(e,t,n){return Qi.makeTranslation(e,t,n),this.applyMatrix4(Qi),this}scale(e,t,n){return Qi.makeScale(e,t,n),this.applyMatrix4(Qi),this}lookAt(e){return Ji.lookAt(e),Ji.updateMatrix(),this.applyMatrix4(Ji.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eo).negate(),this.translate(eo.x,eo.y,eo.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new qi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new sr(-1/0,-1/0,-1/0),new sr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];to.setFromBufferAttribute(e),this.morphTargetsRelative?(ro.addVectors(this.boundingBox.min,to.min),this.boundingBox.expandByPoint(ro),ro.addVectors(this.boundingBox.max,to.max),this.boundingBox.expandByPoint(ro)):(this.boundingBox.expandByPoint(to.min),this.boundingBox.expandByPoint(to.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new sr,1/0);if(e){const n=this.boundingSphere.center;if(to.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];no.setFromBufferAttribute(n),this.morphTargetsRelative?(ro.addVectors(to.min,no.min),to.expandByPoint(ro),ro.addVectors(to.max,no.max),to.expandByPoint(ro)):(to.expandByPoint(no.min),to.expandByPoint(no.max))}to.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)ro.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(ro));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)ro.fromBufferAttribute(o,t),a&&(eo.fromBufferAttribute(e,t),ro.add(eo)),r=Math.max(r,n.distanceToSquared(ro))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ni(new Float32Array(4*a),4));const s=t.tangent.array,l=[],c=[];for(let E=0;E<a;E++)l[E]=new sr,c[E]=new sr;const u=new sr,h=new sr,d=new sr,p=new Xn,m=new Xn,f=new Xn,g=new sr,v=new sr;function y(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(o,2*e),m.fromArray(o,2*t),f.fromArray(o,2*n),h.sub(u),d.sub(u),m.sub(p),f.sub(p);const i=1/(m.x*f.y-f.x*m.y);isFinite(i)&&(g.copy(h).multiplyScalar(f.y).addScaledVector(d,-m.y).multiplyScalar(i),v.copy(d).multiplyScalar(m.x).addScaledVector(h,-f.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)y(n[r+0],n[r+1],n[r+2])}const x=new sr,b=new sr,w=new sr,S=new sr;function M(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),b.crossVectors(S,t);const n=b.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let E=0,T=_.length;E<T;++E){const e=_[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)M(n[r+0]),M(n[r+1]),M(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ni(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new sr,i=new sr,o=new sr,a=new sr,s=new sr,l=new sr,c=new sr,u=new sr;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ro.fromBufferAttribute(e,t),ro.normalize(),e.setXYZ(t,ro.x,ro.y,ro.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=t[l]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Ni(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new io,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new io).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}io.prototype.isBufferGeometry=!0;const oo=new zr,ao=new Nr,so=new Pr,lo=new sr,co=new sr,uo=new sr,ho=new sr,po=new sr,mo=new sr,fo=new sr,go=new sr,vo=new sr,yo=new Xn,_o=new Xn,xo=new Xn,bo=new sr,wo=new sr;class So extends ci{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new io,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ki;super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),so.copy(n.boundingSphere),so.applyMatrix4(i),!1===e.ray.intersectsSphere(so))return;if(oo.copy(i).invert(),ao.copy(e.ray).applyMatrix4(oo),null!==n.boundingBox&&!1===ao.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],m=r[p.materialIndex];for(let n=Math.max(p.start,d.start),r=Math.min(p.start+p.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=Mo(this,m,e,ao,a,s,l,c,u,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),p=i.getX(n+2);o=Mo(this,r,e,ao,a,s,l,c,u,h,d,p),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3){o=Mo(this,p,e,ao,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){o=Mo(this,r,e,ao,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Mo(e,t,n,r,i,o,a,s,l,c,u,h){lo.fromBufferAttribute(i,c),co.fromBufferAttribute(i,u),uo.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){fo.set(0,0,0),go.set(0,0,0),vo.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(ho.fromBufferAttribute(n,c),po.fromBufferAttribute(n,u),mo.fromBufferAttribute(n,h),a?(fo.addScaledVector(ho,t),go.addScaledVector(po,t),vo.addScaledVector(mo,t)):(fo.addScaledVector(ho.sub(lo),t),go.addScaledVector(po.sub(co),t),vo.addScaledVector(mo.sub(uo),t)))}lo.add(fo),co.add(go),uo.add(vo)}e.isSkinnedMesh&&(e.boneTransform(c,lo),e.boneTransform(u,co),e.boneTransform(h,uo));const p=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===f?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==g,s),null===l)return null;wo.copy(s),wo.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(wo);return c<n.near||c>n.far?null:{distance:c,point:wo.clone(),object:e}}(e,t,n,r,lo,co,uo,bo);if(p){s&&(yo.fromBufferAttribute(s,c),_o.fromBufferAttribute(s,u),xo.fromBufferAttribute(s,h),p.uv=Mi.getUV(bo,lo,co,uo,yo,_o,xo,new Xn)),l&&(yo.fromBufferAttribute(l,c),_o.fromBufferAttribute(l,u),xo.fromBufferAttribute(l,h),p.uv2=Mi.getUV(bo,lo,co,uo,yo,_o,xo,new Xn));const e={a:c,b:u,c:h,normal:new sr,materialIndex:0};Mi.getNormal(lo,co,uo,e.normal),p.face=e}return p}So.prototype.isMesh=!0;class Eo extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,o,p,m,f,g,v){const y=o/f,_=p/g,x=o/2,b=p/2,w=m/2,S=f+1,M=g+1;let E=0,T=0;const C=new sr;for(let a=0;a<M;a++){const o=a*_-b;for(let s=0;s<S;s++){const h=s*y-x;C[e]=h*r,C[t]=o*i,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=m>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/f),u.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let e=0;e<f;e++){const t=h+e+S*a,n=h+e+S*(a+1),r=h+(e+1)+S*(a+1),i=h+(e+1)+S*a;s.push(t,n,i),s.push(n,r,i),T+=6}a.addGroup(d,T,v),d+=T,h+=E}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new qi(l,3)),this.setAttribute("normal",new qi(c,3)),this.setAttribute("uv",new qi(u,2))}}function To(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Co(e){const t={};for(let n=0;n<e.length;n++){const r=To(e[n]);for(const e in r)t[e]=r[e]}return t}const Ao={clone:To,merge:Co};class Po extends Ti{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=To(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}Po.prototype.isShaderMaterial=!0;class Oo extends ci{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new zr,this.projectionMatrix=new zr,this.projectionMatrixInverse=new zr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new sr),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Oo.prototype.isCamera=!0;class Ro extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*jn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Un*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*jn*Math.atan(Math.tan(.5*Un*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Un*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Ro.prototype.isPerspectiveCamera=!0;const Lo=90;class Do extends ci{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Ro(Lo,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new sr(1,0,0)),this.add(r);const i=new Ro(Lo,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new sr(-1,0,0)),this.add(i);const o=new Ro(Lo,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new sr(0,1,0)),this.add(o);const a=new Ro(Lo,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new sr(0,-1,0)),this.add(a);const s=new Ro(Lo,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new sr(0,0,1)),this.add(s);const l=new Ro(Lo,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new sr(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class ko extends er{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:oe,n,r,i,o,a=void 0!==a?a:Ne,s,l,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}ko.prototype.isCubeTexture=!0;class Io extends rr{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new ko(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:_e,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=ze,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Eo(5,5,5),i=new Po({name:"CubemapFromEquirect",uniforms:To(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:_});i.uniforms.tEquirect.value=t;const o=new So(r,i),a=t.minFilter;t.minFilter===we&&(t.minFilter=_e);return new Do(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}Io.prototype.isWebGLCubeRenderTarget=!0;const Fo=new Pr,No=new sr;class zo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new pi,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new pi,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new pi;this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],m=n[11],f=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,u-s,m-h,y-f).normalize(),t[1].setComponents(a+r,u+s,m+h,y+f).normalize(),t[2].setComponents(a+i,u+l,m+d,y+g).normalize(),t[3].setComponents(a-i,u-l,m-d,y-g).normalize(),t[4].setComponents(a-o,u-c,m-p,y-v).normalize(),t[5].setComponents(a+o,u+c,m+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Fo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Fo)}intersectsSprite(e){return Fo.center.set(0,0,0),Fo.radius=.7071067811865476,Fo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fo)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(No.x=r.normal.x>0?e.max.x:e.min.x,No.y=r.normal.y>0?e.max.y:e.min.y,No.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(No)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Uo(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function jo(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class Bo extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],p=[],m=[],f=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*u-i;p.push(n,-e,0),m.push(0,0,1),f.push(t/a),f.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new qi(p,3)),this.setAttribute("normal",new qi(m,3)),this.setAttribute("uv",new qi(f,2))}}const Vo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), rawDiffuseColor, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), rawDiffuseColor, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 f0 = vec3( pow( ior - 1.0, 2.0 ) / pow( ior + 1.0, 2.0 ) );\n\tvec3 f90 = vec3( 1.0 );\n\tvec3 f_transmission = totalTransmission * getIBLVolumeRefraction(\n\t\tnormal, v, viewDir, roughnessFactor, diffuseColor.rgb, f0, f90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance);\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, f_transmission, totalTransmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, vec3 viewDir, float perceptualRoughness, vec3 baseColor, vec3 f0, vec3 f90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\tfloat NdotV = saturate(dot(n, viewDir));\n\t\tvec2 brdf = integrateSpecularBRDF(NdotV, perceptualRoughness);\n\t\tvec3 specularColor = f0 * brdf.x + f90 * brdf.y;\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef USE_TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t\tfloat thicknessFactor = thickness;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\tvec3 rawDiffuseColor = diffuseColor.rgb;\n\t#include <transmission_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Go={common:{diffuse:{value:new Di(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Kn},uv2Transform:{value:new Kn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Di(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Di(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Kn}},sprite:{diffuse:{value:new Di(16777215)},opacity:{value:1},center:{value:new Xn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Kn}}},Ho={basic:{uniforms:Co([Go.common,Go.specularmap,Go.envmap,Go.aomap,Go.lightmap,Go.fog]),vertexShader:Vo.meshbasic_vert,fragmentShader:Vo.meshbasic_frag},lambert:{uniforms:Co([Go.common,Go.specularmap,Go.envmap,Go.aomap,Go.lightmap,Go.emissivemap,Go.fog,Go.lights,{emissive:{value:new Di(0)}}]),vertexShader:Vo.meshlambert_vert,fragmentShader:Vo.meshlambert_frag},phong:{uniforms:Co([Go.common,Go.specularmap,Go.envmap,Go.aomap,Go.lightmap,Go.emissivemap,Go.bumpmap,Go.normalmap,Go.displacementmap,Go.fog,Go.lights,{emissive:{value:new Di(0)},specular:{value:new Di(1118481)},shininess:{value:30}}]),vertexShader:Vo.meshphong_vert,fragmentShader:Vo.meshphong_frag},standard:{uniforms:Co([Go.common,Go.envmap,Go.aomap,Go.lightmap,Go.emissivemap,Go.bumpmap,Go.normalmap,Go.displacementmap,Go.roughnessmap,Go.metalnessmap,Go.fog,Go.lights,{emissive:{value:new Di(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vo.meshphysical_vert,fragmentShader:Vo.meshphysical_frag},toon:{uniforms:Co([Go.common,Go.aomap,Go.lightmap,Go.emissivemap,Go.bumpmap,Go.normalmap,Go.displacementmap,Go.gradientmap,Go.fog,Go.lights,{emissive:{value:new Di(0)}}]),vertexShader:Vo.meshtoon_vert,fragmentShader:Vo.meshtoon_frag},matcap:{uniforms:Co([Go.common,Go.bumpmap,Go.normalmap,Go.displacementmap,Go.fog,{matcap:{value:null}}]),vertexShader:Vo.meshmatcap_vert,fragmentShader:Vo.meshmatcap_frag},points:{uniforms:Co([Go.points,Go.fog]),vertexShader:Vo.points_vert,fragmentShader:Vo.points_frag},dashed:{uniforms:Co([Go.common,Go.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vo.linedashed_vert,fragmentShader:Vo.linedashed_frag},depth:{uniforms:Co([Go.common,Go.displacementmap]),vertexShader:Vo.depth_vert,fragmentShader:Vo.depth_frag},normal:{uniforms:Co([Go.common,Go.bumpmap,Go.normalmap,Go.displacementmap,{opacity:{value:1}}]),vertexShader:Vo.normal_vert,fragmentShader:Vo.normal_frag},sprite:{uniforms:Co([Go.sprite,Go.fog]),vertexShader:Vo.sprite_vert,fragmentShader:Vo.sprite_frag},background:{uniforms:{uvTransform:{value:new Kn},t2D:{value:null}},vertexShader:Vo.background_vert,fragmentShader:Vo.background_frag},cube:{uniforms:Co([Go.envmap,{opacity:{value:1}}]),vertexShader:Vo.cube_vert,fragmentShader:Vo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vo.equirect_vert,fragmentShader:Vo.equirect_frag},distanceRGBA:{uniforms:Co([Go.common,Go.displacementmap,{referencePosition:{value:new sr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vo.distanceRGBA_vert,fragmentShader:Vo.distanceRGBA_frag},shadow:{uniforms:Co([Go.lights,Go.fog,{color:{value:new Di(0)},opacity:{value:1}}]),vertexShader:Vo.shadow_vert,fragmentShader:Vo.shadow_frag}};function Wo(e,t,n,r,i){const o=new Di(0);let a,s,l=0,c=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),l=t,d(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(o,l)},render:function(n,i){let p=!1,g=!0===i.isScene?i.background:null;g&&g.isTexture&&(g=t.get(g));const v=e.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?d(o,l):g&&g.isColor&&(d(g,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.mapping===ce)?(void 0===s&&(s=new So(new Eo(1,1,1),new Po({name:"BackgroundCubeMaterial",uniforms:To(Ho.cube.uniforms),vertexShader:Ho.cube.vertexShader,fragmentShader:Ho.cube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,c===g&&u===g.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=g,u=g.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new So(new Bo(2,2),new Po({name:"BackgroundMaterial",uniforms:To(Ho.background.uniforms),vertexShader:Ho.background.vertexShader,fragmentShader:Ho.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&u===g.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=g,u=g.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function qo(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=d(null);let c=l;function u(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){f(e,0)}function f(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){_(),c!==l&&(c=l,u(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,y,_){let x=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=d(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u);return u}(y,h,l);c!==t&&(c=t,u(c.object)),x=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const o in r){const e=n[o],t=r[o];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(y,_),x&&function(e,t){const n={},r=e.attributes;let i=0;for(const o in r){const e=r[o],t={};t.attribute=e,e.data&&(t.data=e.data),n[o]=t,i++}c.attributes=n,c.attributesNum=i,c.index=t}(y,_)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,x=!0)}!0===i.isInstancedMesh&&(x=!0),null!==_&&n.update(_,34963),x&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r>=0){const o=l[t];if(void 0!==o){const t=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const l=a.buffer,c=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(f(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):m(r),e.bindBuffer(34962,l),v(r,i,c,t,a*u,h*u)}else o.isInstancedBufferAttribute?(f(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):m(r),e.bindBuffer(34962,l),v(r,i,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;f(r+0,1),f(r+1,1),f(r+2,1),f(r+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r+0,4,a,!1,64,0),e.vertexAttribPointer(r+1,4,a,!1,64,16),e.vertexAttribPointer(r+2,4,a,!1,64,32),e.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const o=t.buffer,a=t.type;f(r,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}g()}(i,l,h,y),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:y,resetDefaultState:_,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:g}}function Zo(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function $o(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),m=e.getParameter(34921),f=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,_=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?e.getParameter(36183):0}}function Xo(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new pi,s=new Kn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,m=e.get(t);if(!i||null===h||0===h.length||o&&!p)o?u(null):c();else{const e=o?0:r,t=4*e;let i=m.clippingState||null;l.value=i,i=u(h,a,t,s);for(let r=0;r!==t;++r)i[r]=n[r];m.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Ko(e){let t=new WeakMap;function n(e,t){return t===se?e.mapping=oe:t===le&&(e.mapping=ae),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===se||o===le){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new Io(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function Yo(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Qo(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new($i(n)>65535?Hi:Vi)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Jo(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,r*s,c),n.update(l,o,c)}}function ea(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function ta(e,t){return e[0]-t[0]}function na(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ra(e){const t={},n=new Float32Array(8),r=[];for(let i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){const l=i.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[o.id];if(void 0===u){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[o.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort(na);for(let e=0;e<8;e++)e<c&&u[e][1]?(r[e][0]=u[e][0],r[e][1]=u[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(ta);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],a=t[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[i]&&o.setAttribute("morphTarget"+e,h[i]),d&&o.getAttribute("morphNormal"+e)!==d[i]&&o.setAttribute("morphNormal"+e,d[i]),n[e]=a,p+=a):(h&&!0===o.hasAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),d&&!0===o.hasAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const m=o.morphTargetsRelative?1:1-p;s.getUniforms().setValue(e,"morphTargetBaseInfluence",m),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function ia(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}Ho.physical={uniforms:Co([Ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Di(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Xn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Di(0)}}]),vertexShader:Vo.meshphysical_vert,fragmentShader:Vo.meshphysical_frag};class oa extends er{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=me,this.minFilter=me,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}oa.prototype.isDataTexture2DArray=!0;class aa extends er{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=me,this.minFilter=me,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}aa.prototype.isDataTexture3D=!0;const sa=new er,la=new oa,ca=new aa,ua=new ko,ha=[],da=[],pa=new Float32Array(16),ma=new Float32Array(9),fa=new Float32Array(4);function ga(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=ha[i];if(void 0===o&&(o=new Float32Array(i),ha[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function va(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ya(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function _a(e,t){let n=da[t];void 0===n&&(n=new Int32Array(t),da[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function xa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ba(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(va(n,t))return;e.uniform2fv(this.addr,t),ya(n,t)}}function wa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(va(n,t))return;e.uniform3fv(this.addr,t),ya(n,t)}}function Sa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(va(n,t))return;e.uniform4fv(this.addr,t),ya(n,t)}}function Ma(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(va(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ya(n,t)}else{if(va(n,r))return;fa.set(r),e.uniformMatrix2fv(this.addr,!1,fa),ya(n,r)}}function Ea(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(va(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ya(n,t)}else{if(va(n,r))return;ma.set(r),e.uniformMatrix3fv(this.addr,!1,ma),ya(n,r)}}function Ta(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(va(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ya(n,t)}else{if(va(n,r))return;pa.set(r),e.uniformMatrix4fv(this.addr,!1,pa),ya(n,r)}}function Ca(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Aa(e,t){const n=this.cache;va(n,t)||(e.uniform2iv(this.addr,t),ya(n,t))}function Pa(e,t){const n=this.cache;va(n,t)||(e.uniform3iv(this.addr,t),ya(n,t))}function Oa(e,t){const n=this.cache;va(n,t)||(e.uniform4iv(this.addr,t),ya(n,t))}function Ra(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function La(e,t){const n=this.cache;va(n,t)||(e.uniform2uiv(this.addr,t),ya(n,t))}function Da(e,t){const n=this.cache;va(n,t)||(e.uniform3uiv(this.addr,t),ya(n,t))}function ka(e,t){const n=this.cache;va(n,t)||(e.uniform4uiv(this.addr,t),ya(n,t))}function Ia(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||sa,i)}function Fa(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||ca,i)}function Na(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||ua,i)}function za(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||la,i)}function Ua(e,t){e.uniform1fv(this.addr,t)}function ja(e,t){const n=ga(t,this.size,2);e.uniform2fv(this.addr,n)}function Ba(e,t){const n=ga(t,this.size,3);e.uniform3fv(this.addr,n)}function Va(e,t){const n=ga(t,this.size,4);e.uniform4fv(this.addr,n)}function Ga(e,t){const n=ga(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ha(e,t){const n=ga(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Wa(e,t){const n=ga(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function qa(e,t){e.uniform1iv(this.addr,t)}function Za(e,t){e.uniform2iv(this.addr,t)}function $a(e,t){e.uniform3iv(this.addr,t)}function Xa(e,t){e.uniform4iv(this.addr,t)}function Ka(e,t){e.uniform1uiv(this.addr,t)}function Ya(e,t){e.uniform2uiv(this.addr,t)}function Qa(e,t){e.uniform3uiv(this.addr,t)}function Ja(e,t){e.uniform4uiv(this.addr,t)}function es(e,t,n){const r=t.length,i=_a(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(t[o]||sa,i[o])}function ts(e,t,n){const r=t.length,i=_a(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(t[o]||ua,i[o])}function ns(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return xa;case 35664:return ba;case 35665:return wa;case 35666:return Sa;case 35674:return Ma;case 35675:return Ea;case 35676:return Ta;case 5124:case 35670:return Ca;case 35667:case 35671:return Aa;case 35668:case 35672:return Pa;case 35669:case 35673:return Oa;case 5125:return Ra;case 36294:return La;case 36295:return Da;case 36296:return ka;case 35678:case 36198:case 36298:case 36306:case 35682:return Ia;case 35679:case 36299:case 36307:return Fa;case 35680:case 36300:case 36308:case 36293:return Na;case 36289:case 36303:case 36311:case 36292:return za}}(t.type)}function rs(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ua;case 35664:return ja;case 35665:return Ba;case 35666:return Va;case 35674:return Ga;case 35675:return Ha;case 35676:return Wa;case 5124:case 35670:return qa;case 35667:case 35671:return Za;case 35668:case 35672:return $a;case 35669:case 35673:return Xa;case 5125:return Ka;case 36294:return Ya;case 36295:return Qa;case 36296:return Ja;case 35678:case 36198:case 36298:case 36306:case 35682:return es;case 35680:case 36300:case 36308:case 36293:return ts}}(t.type)}function is(e){this.id=e,this.seq=[],this.map={}}rs.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ya(t,e)},is.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const os=/(\w+)(\])?(\[|\.)?/g;function as(e,t){e.seq.push(t),e.map[t.id]=t}function ss(e,t,n){const r=e.name,i=r.length;for(os.lastIndex=0;;){const o=os.exec(r),a=os.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){as(n,void 0===c?new ns(s,e,t):new rs(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new is(s),as(n,e)),n=e}}}function ls(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);ss(n,e.getUniformLocation(t,n.name),this)}}function cs(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}ls.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},ls.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},ls.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},ls.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let us=0;function hs(e){switch(e){case Kt:return["Linear","( value )"];case Yt:return["sRGB","( value )"];case Jt:return["RGBE","( value )"];case tn:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Qt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case en:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function ds(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function ps(e,t){const n=hs(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ms(e,t){const n=hs(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function fs(e,t){let n;switch(t){case J:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function gs(e){return""!==e}function vs(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ys(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const _s=/^[ \t]*#include +<([\w\d./]+)>/gm;function xs(e){return e.replace(_s,bs)}function bs(e,t){const n=Vo[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return xs(n)}const ws=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ss=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ms(e){return e.replace(Ss,Ts).replace(ws,Es)}function Es(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ts(e,t,n,r)}function Ts(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Cs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function As(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case oe:case ae:t="ENVMAP_TYPE_CUBE";break;case ce:case ue:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ae:case ue:t="ENVMAP_MODE_REFRACTION"}return t}(n),m=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case X:t="ENVMAP_BLENDING_MULTIPLY";break;case K:t="ENVMAP_BLENDING_MIX";break;case Y:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gs).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),y=i.createProgram();let _,x,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=[v].filter(gs).join("\n"),_.length>0&&(_+="\n"),x=[g,v].filter(gs).join("\n"),x.length>0&&(x+="\n")):(_=[Cs(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(gs).join("\n"),x=[g,Cs(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Q?"#define TONE_MAPPING":"",n.toneMapping!==Q?Vo.tonemapping_pars_fragment:"",n.toneMapping!==Q?fs("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Vo.encodings_pars_fragment,n.map?ps("mapTexelToLinear",n.mapEncoding):"",n.matcap?ps("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?ps("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?ps("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?ps("lightMapTexelToLinear",n.lightMapEncoding):"",ms("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(gs).join("\n")),a=xs(a),a=vs(a,n),a=ys(a,n),s=xs(s),s=vs(s,n),s=ys(s,n),a=Ms(a),s=Ms(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",_=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,x=["#define varying in",n.glslVersion===In?"":"out highp vec4 pc_fragColor;",n.glslVersion===In?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const w=b+x+s,S=cs(i,35633,b+_+a),M=cs(i,35632,w);if(i.attachShader(y,S),i.attachShader(y,M),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(M).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const t=ds(i,S,"vertex"),n=ds(i,M,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(y,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:_},fragmentShader:{log:n,prefix:x}})}let E,T;return i.deleteShader(S),i.deleteShader(M),this.getUniforms=function(){return void 0===E&&(E=new ls(i,y)),E},this.getAttributes=function(){return void 0===T&&(T=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,y)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=us++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=M,this}function Ps(e,t,n,r,i,o){const a=[],s=r.isWebGL2,l=r.logarithmicDepthBuffer,c=r.floatVertexTextures,u=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function v(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Kt,t}return{getParameters:function(i,a,m,y,_){const x=y.fog,b=i.isMeshStandardMaterial?y.environment:null,w=t.get(i.envMap||b),S=p[i.type],M=_.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=u,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(_):0;let E,T;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),S){const e=Ho[S];E=e.vertexShader,T=e.fragmentShader}else E=i.vertexShader,T=i.fragmentShader;const C=e.getRenderTarget();return{isWebGL2:s,shaderID:S,shaderName:i.type,vertexShader:E,fragmentShader:T,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:h,outputEncoding:null!==C?v(C.texture):e.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:v(w),envMapCubeUV:!!w&&(w.mapping===ce||w.mapping===ue),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===ln,tangentSpaceNormalMap:i.normalMapType===sn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&_.geometry&&_.geometry.attributes.color&&4===_.geometry.attributes.color.itemSize,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmission||!!i.transmissionMap||!!i.thicknessMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap)&&!!i.displacementMap,fog:!!x,useFog:i.fog,fogExp2:x&&x.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===_.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:Q,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===g,flipSided:i.side===f,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<m.length;e++)n.push(t[m[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=Ho[t];n=Ao.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=a.length;e<i;e++){const t=a[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new As(e,n,t,i),a.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function Os(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Rs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ls(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ds(e){const t=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,l,c){let u=t[n];const h=e.get(o);return void 0===u?(u={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:l,group:c},t[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=o,u.program=h.program||a,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,l,c){const u=s(e,t,n,a,l,c);n.transmission>0?i.push(u):!0===n.transparent?o.push(u):r.push(u)},unshift:function(e,t,n,a,l,c){const u=s(e,t,n,a,l,c);n.transmission>0?i.unshift(u):!0===n.transparent?o.unshift(u):r.unshift(u)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Rs),i.length>1&&i.sort(t||Ls),o.length>1&&o.sort(t||Ls)}}}function ks(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new Ds(e),t.set(n,[i])):r>=t.get(n).length?(i=new Ds(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function Is(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new sr,color:new Di};break;case"SpotLight":n={position:new sr,direction:new sr,color:new Di,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new sr,color:new Di,distance:0,decay:0};break;case"HemisphereLight":n={direction:new sr,skyColor:new Di,groundColor:new Di};break;case"RectAreaLight":n={color:new Di,position:new sr,halfWidth:new sr,halfHeight:new sr}}return e[t.id]=n,n}}}let Fs=0;function Ns(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function zs(e,t){const n=new Is,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new sr);const o=new sr,a=new zr,s=new zr;return{setup:function(o){let a=0,s=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,u=0,h=0,d=0,p=0,m=0,f=0,g=0;o.sort(Ns);for(let e=0,t=o.length;e<t;e++){const t=o[e],v=t.color,y=t.intensity,_=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=v.r*y,s+=v.g*y,l+=v.b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=x,i.directionalShadowMatrix[c]=t.shadow.matrix,m++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(v).multiplyScalar(y),e.distance=_,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=x,i.spotShadowMatrix[h]=t.shadow.matrix,g++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(v).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[u]=n,i.pointShadowMap[u]=x,i.pointShadowMatrix[u]=t.shadow.matrix,f++}i.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y),e.groundColor.copy(t.groundColor).multiplyScalar(y),i.hemi[p]=e,p++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Go.LTC_FLOAT_1,i.rectAreaLTC2=Go.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Go.LTC_HALF_1,i.rectAreaLTC2=Go.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=l;const v=i.hash;v.directionalLength===c&&v.pointLength===u&&v.spotLength===h&&v.rectAreaLength===d&&v.hemiLength===p&&v.numDirectionalShadows===m&&v.numPointShadows===f&&v.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=d,i.point.length=u,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=f,i.pointShadowMap.length=f,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=f,i.spotShadowMatrix.length=g,v.directionalLength=c,v.pointLength=u,v.spotLength=h,v.rectAreaLength=d,v.hemiLength=p,v.numDirectionalShadows=m,v.numPointShadows=f,v.numSpotShadows=g,i.version=Fs++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(t.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:i}}function Us(e,t){const n=new zs(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function js(e,t){let n=new WeakMap;return{get:function(r){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new Us(e,t),n.set(r,[i])):o>=n.get(r).length?(i=new Us(e,t),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}class Bs extends Ti{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=on,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Bs.prototype.isMeshDepthMaterial=!0;class Vs extends Ti{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new sr,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Vs.prototype.isMeshDistanceMaterial=!0;function Gs(e,t,n){let r=new zo;const i=new Xn,o=new Xn,a=new nr,s=[],l=[],c={},u=n.maxTextureSize,d={0:f,1:m,2:g},v=new Po({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const x=new io;x.setAttribute("position",new Ni(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new So(x,v),w=this;function S(n,r){const i=t.update(b);v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,v,b,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,y,b,null)}function M(e){const t=e<<0;let n=s[t];return void 0===n&&(n=new Bs({depthPacking:an,morphTargets:e}),s[t]=n),n}function E(e){const t=e<<0;let n=l[t];return void 0===n&&(n=new Vs({morphTargets:e}),l[t]=n),n}function T(t,n,r,i,o,a,s){let l=null,u=M,h=t.customDepthMaterial;if(!0===i.isPointLight&&(u=E,h=t.customDistanceMaterial),void 0===h){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),l=u(e)}else l=h;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=l.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=l.clone(),n[t]=i),l=i}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=s===p?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:d[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function C(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=T(n,r,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=T(n,r,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)C(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,n,s){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(_),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let m=0,f=t.length;m<f;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/h.x),i.x=o.x*h.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/h.y),i.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map&&!c.isPointLightShadow&&this.type===p){const e={minFilter:_e,magFilter:_e,format:ze};c.map=new rr(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.mapPass=new rr(i.x,i.y,e),c.camera.updateProjectionMatrix()}if(null===c.map){const e={minFilter:me,magFilter:me,format:ze};c.map=new rr(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const f=c.getViewportCount();for(let e=0;e<f;e++){const t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),C(n,s,c.camera,l,this.type)}c.isPointLightShadow||this.type!==p||S(c,s),c.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function Hs(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new nr;let r=null;const i=new nr(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?ye(2929):_e(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case B:e.depthFunc(512);break;case V:e.depthFunc(519);break;case G:e.depthFunc(513);break;case H:e.depthFunc(515);break;case W:e.depthFunc(514);break;case q:e.depthFunc(518);break;case Z:e.depthFunc(516);break;case $:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?ye(2960):_e(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}};let u={},h=null,d={},p=null,m=!1,v=null,y=null,X=null,K=null,Y=null,Q=null,J=null,ee=!1,te=null,ne=null,re=null,ie=null,oe=null;const ae=e.getParameter(35661);let se=!1,le=0;const ce=e.getParameter(7938);-1!==ce.indexOf("WebGL")?(le=parseFloat(/^WebGL (\d)/.exec(ce)[1]),se=le>=1):-1!==ce.indexOf("OpenGL ES")&&(le=parseFloat(/^OpenGL ES (\d)/.exec(ce)[1]),se=le>=2);let ue=null,he={};const de=e.getParameter(3088),pe=e.getParameter(2978),me=(new nr).fromArray(de),fe=(new nr).fromArray(pe);function ge(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const ve={};function ye(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function _e(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}ve[3553]=ge(3553,3553,1),ve[34067]=ge(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),c.setClear(0),ye(2929),o.setFunc(H),Se(!1),Me(s),ye(2884),we(_);const xe={[E]:32774,[T]:32778,[C]:32779};if(r)xe[A]=32775,xe[P]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(xe[A]=e.MIN_EXT,xe[P]=e.MAX_EXT)}const be={[O]:0,[R]:1,[L]:768,[k]:770,[j]:776,[z]:774,[F]:772,[D]:769,[I]:771,[U]:775,[N]:773};function we(t,n,r,i,o,a,s,l){if(t!==_){if(!1===m&&(ye(3042),m=!0),t===M)o=o||n,a=a||r,s=s||i,n===y&&o===Y||(e.blendEquationSeparate(xe[n],xe[o]),y=n,Y=o),r===X&&i===K&&a===Q&&s===J||(e.blendFuncSeparate(be[r],be[i],be[a],be[s]),X=r,K=i,Q=a,J=s),v=t,ee=null;else if(t!==v||l!==ee){if(y===E&&Y===E||(e.blendEquation(32774),y=E,Y=E),l)switch(t){case x:e.blendFuncSeparate(1,771,1,771);break;case b:e.blendFunc(1,1);break;case w:e.blendFuncSeparate(0,0,769,771);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case x:e.blendFuncSeparate(770,771,1,771);break;case b:e.blendFunc(770,1);break;case w:e.blendFunc(0,769);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}X=null,K=null,Q=null,J=null,v=t,ee=l}}else!0===m&&(_e(3042),m=!1)}function Se(t){te!==t&&(t?e.frontFace(2304):e.frontFace(2305),te=t)}function Me(t){t!==a?(ye(2884),t!==ne&&(t===s?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):_e(2884),ne=t}function Ee(t,n,r){t?(ye(32823),ie===n&&oe===r||(e.polygonOffset(n,r),ie=n,oe=r)):_e(32823)}function Te(t){void 0===t&&(t=33984+ae-1),ue!==t&&(e.activeTexture(t),ue=t)}return{buffers:{color:i,depth:o,stencil:c},enable:ye,disable:_e,bindFramebuffer:function(t,n){return null===n&&null!==h&&(n=h),d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,r&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==h&&(e.bindFramebuffer(36160,t),h=t)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:we,setMaterial:function(e,t){e.side===g?_e(2884):ye(2884);let n=e.side===f;t&&(n=!n),Se(n),e.blending===x&&!1===e.transparent?we(_):we(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ee(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?ye(32926):_e(32926)},setFlipSided:Se,setCullFace:Me,setLineWidth:function(t){t!==re&&(se&&e.lineWidth(t),re=t)},setPolygonOffset:Ee,setScissorTest:function(e){e?ye(3089):_e(3089)},activeTexture:Te,bindTexture:function(t,n){null===ue&&Te();let r=he[ue];void 0===r&&(r={type:void 0,texture:void 0},he[ue]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||ve[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=he[ue];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===me.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),me.copy(t))},viewport:function(t){!1===fe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),fe.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},ue=null,he={},h=null,d={},p=null,m=!1,v=null,y=null,X=null,K=null,Y=null,Q=null,J=null,ee=!1,te=null,ne=null,re=null,ie=null,oe=null,me.set(0,0,e.canvas.width,e.canvas.height),fe.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),c.reset()}}}function Ws(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let p,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function f(e,t){return m?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Zn:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===p&&(p=f(o,a));const s=n?f(o,a):p;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return Wn(e.width)&&Wn(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==me&&e.minFilter!==_e}function _(t,n,i,o){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,o))}function x(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function b(e){return e===me||e===fe||e===ve?9728:9729}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}let M=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void R(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function T(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;O(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=a||l?l?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,c);const h=u[0],d=v(h)||s,p=o.convert(r.format),m=o.convert(r.type),f=x(r.internalFormat,p,m);let b;if(P(34067,r,d),a){for(let e=0;e<6;e++){b=u[e].mipmaps;for(let t=0;t<b.length;t++){const i=b[t];r.format!==ze&&r.format!==Ne?null!==p?n.compressedTexImage2D(34069+e,t,f,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,f,i.width,i.height,0,p,m,i.data)}}t.__maxMipLevel=b.length-1}else{b=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,f,u[e].width,u[e].height,0,p,m,u[e].data);for(let t=0;t<b.length;t++){const r=b[t].image[e].image;n.texImage2D(34069+e,t+1,f,r.width,r.height,0,p,m,r.data)}}else{n.texImage2D(34069+e,0,f,p,m,u[e]);for(let t=0;t<b.length;t++){const r=b[t];n.texImage2D(34069+e,t+1,f,p,m,r.image[e])}}t.__maxMipLevel=b.length}y(r,d)&&_(34067,r,h.width,h.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const C={[he]:10497,[de]:33071,[pe]:33648},A={[me]:9728,[fe]:9984,[ve]:9986,[_e]:9729,[xe]:9985,[we]:9987};function P(n,o,a){if(a?(e.texParameteri(n,10242,C[o.wrapS]),e.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,C[o.wrapR]),e.texParameteri(n,10240,A[o.magFilter]),e.texParameteri(n,10241,A[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===de&&o.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,b(o.magFilter)),e.texParameteri(n,10241,b(o.minFilter)),o.minFilter!==me&&o.minFilter!==_e&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===Oe&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===Re&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function O(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),a.memory.textures++)}function R(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),O(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!s&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==me&&e.minFilter!==_e)}(r)&&!1===v(r.image),c=g(r.image,l,!1,u),h=v(c)||s,d=o.convert(r.format);let p,m=o.convert(r.type),f=x(r.internalFormat,d,m);P(a,r,h);const b=r.mipmaps;if(r.isDepthTexture)f=6402,s?f=r.type===Oe?36012:r.type===Pe?33190:r.type===Ie?35056:33189:r.type===Oe&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ve&&6402===f&&r.type!==Ce&&r.type!==Pe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ce,m=o.convert(r.type)),r.format===Ge&&6402===f&&(f=34041,r.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ie,m=o.convert(r.type))),n.texImage2D(3553,0,f,c.width,c.height,0,d,m,null);else if(r.isDataTexture)if(b.length>0&&h){for(let e=0,t=b.length;e<t;e++)p=b[e],n.texImage2D(3553,e,f,p.width,p.height,0,d,m,p.data);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,f,c.width,c.height,0,d,m,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=b.length;e<t;e++)p=b[e],r.format!==ze&&r.format!==Ne?null!==d?n.compressedTexImage2D(3553,e,f,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,f,p.width,p.height,0,d,m,p.data);t.__maxMipLevel=b.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,f,c.width,c.height,c.depth,0,d,m,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,f,c.width,c.height,c.depth,0,d,m,c.data),t.__maxMipLevel=0;else if(b.length>0&&h){for(let e=0,t=b.length;e<t;e++)p=b[e],n.texImage2D(3553,e,f,d,m,p);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,f,d,m,c),t.__maxMipLevel=0;y(r,h)&&_(a,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function L(t,i,a,s,l){const c=o.convert(a.format),u=o.convert(a.type),h=x(a.internalFormat,c,u);32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function D(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Oe?i=36012:t.type===Pe&&(i=33190));const r=I(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=I(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),a=o.convert(t.type),s=x(t.internalFormat,i,a);if(r){const t=I(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function k(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Ve)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function I(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let F=!1,N=!1;this.allocateTextureUnit=function(){const e=M;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=T,this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(u.__webglTexture=e.createTexture(),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=!0===t.isWebGLMultisampleRenderTarget,m=l.isDataTexture3D||l.isDataTexture2DArray,f=v(t)||s;if(!s||l.format!==Ne||l.type!==Oe&&l.type!==Re||(l.format=ze,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(s){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const r=o.convert(l.format),i=o.convert(l.type),a=x(l.internalFormat,r,i),s=I(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),D(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,u.__webglTexture),P(34067,l,f);for(let e=0;e<6;e++)L(c.__webglFramebuffer[e],t,l,36064,34069+e);y(l,f)&&_(34067,l,t.width,t.height),n.bindTexture(34067,null)}else if(d){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),P(3553,o,f),L(c.__webglFramebuffer,t,o,36064+i,3553),y(o,f)&&_(3553,o,t.width,t.height)}n.bindTexture(3553,null)}else{let e=3553;if(m)if(s){e=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,u.__webglTexture),P(e,l,f),L(c.__webglFramebuffer,t,l,36064,e),y(l,f)&&_(3553,l,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&k(t)},this.updateRenderTargetMipmap=function(e){const t=v(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),_(t,a,e.width,e.height),n.bindTexture(t,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const i=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),T(e,t)}}function qs(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===Me)return 5121;if(e===Le)return 32819;if(e===De)return 32820;if(e===ke)return 33635;if(e===Ee)return 5120;if(e===Te)return 5122;if(e===Ce)return 5123;if(e===Ae)return 5124;if(e===Pe)return 5125;if(e===Oe)return 5126;if(e===Re)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Fe)return 6406;if(e===Ne)return 6407;if(e===ze)return 6408;if(e===Ue)return 6409;if(e===je)return 6410;if(e===Ve)return 6402;if(e===Ge)return 34041;if(e===He)return 6403;if(e===We)return 36244;if(e===qe)return 33319;if(e===Ze)return 33320;if(e===$e)return 36248;if(e===Xe)return 36249;if(e===Ke||e===Ye||e===Qe||e===Je){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Ke)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ye)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Qe)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Je)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===nt||e===rt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===et)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===rt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===it)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===ot||e===at)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===ot)return n.COMPRESSED_RGB8_ETC2;if(e===at)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===st||e===lt||e===ct||e===ut||e===ht||e===dt||e===pt||e===mt||e===ft||e===gt||e===vt||e===yt||e===_t||e===xt||e===wt||e===St||e===Mt||e===Et||e===Tt||e===Ct||e===At||e===Pt||e===Ot||e===Rt||e===Lt||e===Dt||e===kt||e===It?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===bt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Ie?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Zs extends Ro{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.cameras=e}}Zs.prototype.isArrayCamera=!0;class $s extends ci{constructor(){super(),this.type="Group"}}$s.prototype.isGroup=!0;const Xs={type:"move"};class Ks{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new $s,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new $s,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new sr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new sr),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new $s,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new sr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new sr),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Xs))),l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n);if(void 0===l.joints[o.jointName]){const e=new $s;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[o.jointName]=e,l.add(e)}const r=l.joints[o.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class Ys extends Fn{constructor(e,t){super();const n=this,r=e.state;let i=null,o=1,a=null,s="local-floor",l=null;const c=[],u=new Map,h=new Ro;h.layers.enable(1),h.viewport=new nr;const d=new Ro;d.layers.enable(2),d.viewport=new nr;const p=[h,d],m=new Zs;m.layers.enable(1),m.layers.enable(2);let f=null,g=null;function v(e){const t=u.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function y(){u.forEach((function(e,t){e.disconnect(t)})),u.clear(),f=null,g=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),M.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function _(e){const t=i.inputSources;for(let n=0;n<c.length;n++)u.set(t[n],c[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=u.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),u.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=u.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=c[e];return void 0===t&&(t=new Ks,c[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=c[e];return void 0===t&&(t=new Ks,c[e]=t),t.getGripSpace()},this.getHand=function(e){let t=c[e];return void 0===t&&(t=new Ks,c[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",y),i.addEventListener("inputsourceschange",_);const e=t.getContextAttributes();!0!==e.xrCompatible&&await t.makeXRCompatible();const r={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o},l=new XRWebGLLayer(i,t,r);i.updateRenderState({baseLayer:l}),a=await i.requestReferenceSpace(s),M.setContext(i),M.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const x=new sr,b=new sr;function w(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;m.near=d.near=h.near=e.near,m.far=d.far=h.far=e.far,f===m.near&&g===m.far||(i.updateRenderState({depthNear:m.near,depthFar:m.far}),f=m.near,g=m.far);const t=e.parent,n=m.cameras;w(m,t);for(let i=0;i<n.length;i++)w(n[i],t);e.matrixWorld.copy(m.matrixWorld),e.matrix.copy(m.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const r=e.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){x.setFromMatrixPosition(t.matrixWorld),b.setFromMatrixPosition(n.matrixWorld);const r=x.distanceTo(b),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,m=r/(-u+h),f=m*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+m,v=s+m,y=d-f,_=p+(r-f),w=l*s/v*g,S=c*s/v*g;e.projectionMatrix.makePerspective(y,_,w,S,g,v)}(m,h,d):m.projectionMatrix.copy(h.projectionMatrix)},this.getCamera=function(){return m};let S=null;const M=new Uo;M.setAnimationLoop((function(e,t){if(l=t.getViewerPose(a),null!==l){const e=l.views,t=i.renderState.baseLayer;r.bindXRFramebuffer(t.framebuffer);let n=!1;e.length!==m.cameras.length&&(m.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r],o=t.getViewport(i),a=p[r];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&m.matrix.copy(a.matrix),!0===n&&m.cameras.push(a)}}const n=i.inputSources;for(let r=0;r<c.length;r++){const e=c[r],i=n[r];e.update(i,t,a)}S&&S(e,t)})),this.setAnimationLoop=function(e){S=e},this.dispose=function(){}}}function Qs(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===f&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===f&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===f&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height));e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap);e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Js(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;const p=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Kt,this.physicallyCorrectLights=!1,this.toneMapping=Q,this.toneMappingExposure=1;const f=this;let g=!1,v=0,y=0,_=null,x=-1,b=null;const w=new nr,S=new nr;let M=null,E=t.width,T=t.height,C=1,A=null,P=null;const O=new nr(0,0,E,T),R=new nr(0,0,E,T);let L=!1;const D=[],k=new zo;let I=!1,F=!1,N=null;const z=new zr,U=new sr,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===_?C:1}let V,G,H,W,q,Z,$,X,K,Y,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he=n;function pe(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",ye,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&t.shift(),he=pe(t,e),null===he)throw pe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ke){throw console.error("THREE.WebGLRenderer: "+ke.message),ke}function fe(){V=new Yo(he),G=new $o(he,V,e),V.init(G),ce=new qs(he,V,G),H=new Hs(he,V,G),D[0]=1029,W=new ea(he),q=new Os,Z=new Ws(he,V,H,q,G,ce,W),$=new Ko(f),X=new jo(he,G),ue=new qo(he,V,X,G),K=new Qo(he,X,W,ue),Y=new ia(he,K,X,W),ae=new ra(he),re=new Xo(q),J=new Ps(f,$,V,G,ue,re),ee=new Qs(q),te=new ks(q),ne=new js(V,G),oe=new Wo(f,$,H,Y,s),ie=new Gs(f,Y,G),se=new Zo(he,V,W,G),le=new Jo(he,V,W,G),W.programs=J.programs,f.capabilities=G,f.extensions=V,f.properties=q,f.renderLists=te,f.shadowMap=ie,f.state=H,f.info=W}fe();const ge=new Ys(f,he);function ve(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;fe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function _e(e){const t=e.target;t.removeEventListener("dispose",_e),function(e){(function(e){const t=q.get(e).programs;void 0!==t&&t.forEach((function(e){J.releaseProgram(e)}))})(e),q.remove(e)}(t)}this.xr=ge,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(E,T,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Xn),e.set(E,T)},this.setSize=function(e,n,r){ge.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,T=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Xn),e.set(E*C,T*C).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,T=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new nr),e.copy(w)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),H.viewport(w.copy(O).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),H.scissor(S.copy(R).multiplyScalar(C).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){H.setScissorTest(L=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new Di),e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),q.dispose(),$.dispose(),Y.dispose(),ue.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",be),ge.removeEventListener("sessionend",Se),N&&(N.dispose(),N=null),Ee.stop()},this.renderBufferImmediate=function(e,t){ue.initAttributes();const n=q.get(e);e.hasPositions&&!n.position&&(n.position=he.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=he.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=he.createBuffer()),e.hasColors&&!n.color&&(n.color=he.createBuffer());const r=t.getAttributes();e.hasPositions&&(he.bindBuffer(34962,n.position),he.bufferData(34962,e.positionArray,35048),ue.enableAttribute(r.position),he.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(he.bindBuffer(34962,n.normal),he.bufferData(34962,e.normalArray,35048),ue.enableAttribute(r.normal),he.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(he.bindBuffer(34962,n.uv),he.bufferData(34962,e.uvArray,35048),ue.enableAttribute(r.uv),he.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(he.bindBuffer(34962,n.color),he.bufferData(34962,e.colorArray,35048),ue.enableAttribute(r.color),he.vertexAttribPointer(r.color,3,5126,!1,0,0)),ue.disableUnusedAttributes(),he.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=j);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=De(e,t,r,i);H.setMaterial(r,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=K.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&ae.update(i,n,r,s),ue.setup(i,r,s,n,l);let d=se;null!==l&&(u=X.get(l),d=le,d.setIndex(u));const p=null!==l?l.count:c.count,m=n.drawRange.start*h,f=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(m,g),_=Math.min(p,m+f,g+v)-1,x=Math.max(0,_-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*B()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),H.setLineWidth(e*B()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,e)}else d.render(y,x)}},this.compile=function(e,t){d=ne.get(e),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Pe(n[r],e,t)}else Pe(n,e,t)}))};let xe=null;function be(){Ee.stop()}function Se(){Ee.start()}const Ee=new Uo;function Te(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Y.update(e),i=e.material;i.visible&&h.push(e,t,i,n,U.z,null)}}else if(e.isImmediateRenderObject)r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),h.push(e,null,e.material,n,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||k.intersectsObject(e))){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Y.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,U.z,a)}}else i.visible&&h.push(e,t,i,n,U.z,null)}const i=e.children;for(let o=0,a=i.length;o<a;o++)Te(i[o],t,n,r)}function Ce(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];a.layers.test(r.layers)&&(H.viewport(w.copy(r.viewport)),d.setupLightsView(r),Ae(a,t,r,s,l,c))}}else Ae(a,t,n,s,l,c)}}function Ae(e,t,n,r,i,o){if(e.onBeforeRender(f,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=De(n,t,i,e);H.setMaterial(i),ue.reset(),function(e,t){e.render((function(e){f.renderBufferImmediate(e,t)}))}(e,r)}else f.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(f,t,n,r,i,o)}function Pe(e,t,n){!0!==t.isScene&&(t=j);const r=q.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=J.getParameters(e,i.state,o,t,n),l=J.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=$.get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",_e),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Le(e,s),u}else s.uniforms=J.getUniforms(e),e.onBuild(s,f),e.onBeforeCompile(s,f),u=J.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Le(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=u.getUniforms(),m=ls.seqWithValue(p.seq,h);return r.currentProgram=u,r.uniformsList=m,u}function Le(e,t){const n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas}function De(e,t,n,r){!0!==t.isScene&&(t=j),Z.resetTextureUnits();const i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===_?f.outputEncoding:_.texture.encoding,s=$.get(n.envMap||o),l=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,c=q.get(n),u=d.state.lights;if(!0===I&&(!0===F||e!==b)){const t=e===b&&n.id===x;re.setState(n,e,t)}let h=!1;n.version===c.__version?c.needsLights&&c.lightsStateVersion!==u.state.version||c.outputEncoding!==a||r.isInstancedMesh&&!1===c.instancing?h=!0:r.isInstancedMesh||!0!==c.instancing?r.isSkinnedMesh&&!1===c.skinning?h=!0:r.isSkinnedMesh||!0!==c.skinning?c.envMap!==s||n.fog&&c.fog!==i?h=!0:void 0===c.numClippingPlanes||c.numClippingPlanes===re.numPlanes&&c.numIntersection===re.numIntersection?c.vertexAlphas!==l&&(h=!0):h=!0:h=!0:h=!0:(h=!0,c.__version=n.version);let p=c.currentProgram;!0===h&&(p=Pe(n,t,r));let m=!1,g=!1,v=!1;const y=p.getUniforms(),w=c.uniforms;if(H.useProgram(p.program)&&(m=!0,g=!0,v=!0),n.id!==x&&(x=n.id,g=!0),m||b!==e){if(y.setValue(he,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&y.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),b!==e&&(b=e,g=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=y.map.cameraPosition;void 0!==t&&t.setValue(he,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&y.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&y.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){y.setOptional(he,r,"bindMatrix"),y.setOptional(he,r,"bindMatrixInverse");const e=r.skeleton;e&&(G.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),y.setValue(he,"boneTexture",e.boneTexture,Z),y.setValue(he,"boneTextureSize",e.boneTextureSize)):y.setOptional(he,e,"boneMatrices"))}var S,M;return(g||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,y.setValue(he,"receiveShadow",r.receiveShadow)),g&&(y.setValue(he,"toneMappingExposure",f.toneMappingExposure),c.needsLights&&(M=v,(S=w).ambientLightColor.needsUpdate=M,S.lightProbe.needsUpdate=M,S.directionalLights.needsUpdate=M,S.directionalLightShadows.needsUpdate=M,S.pointLights.needsUpdate=M,S.pointLightShadows.needsUpdate=M,S.spotLights.needsUpdate=M,S.spotLightShadows.needsUpdate=M,S.rectAreaLights.needsUpdate=M,S.hemisphereLights.needsUpdate=M),i&&n.fog&&ee.refreshFogUniforms(w,i),ee.refreshMaterialUniforms(w,n,C,T,N),ls.upload(he,c.uniformsList,w,Z)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ls.upload(he,c.uniformsList,w,Z),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(he,"center",r.center),y.setValue(he,"modelViewMatrix",r.modelViewMatrix),y.setValue(he,"normalMatrix",r.normalMatrix),y.setValue(he,"modelMatrix",r.matrixWorld),p}Ee.setAnimationLoop((function(e){xe&&xe(e)})),"undefined"!==typeof window&&Ee.setContext(window),this.setAnimationLoop=function(e){xe=e,ge.setAnimationLoop(e),null===e?Ee.stop():Ee.start()},ge.addEventListener("sessionstart",be),ge.addEventListener("sessionend",Se),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ge.enabled&&!0===ge.isPresenting&&(!0===ge.cameraAutoUpdate&&ge.updateCamera(t),t=ge.getCamera()),!0===e.isScene&&e.onBeforeRender(f,e,t,_),d=ne.get(e,m.length),d.init(),m.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(z),F=this.localClippingEnabled,I=re.init(this.clippingPlanes,F,t),h=te.get(e,p.length),h.init(),p.push(h),Te(e,t,0,f.sortObjects),h.finish(),!0===f.sortObjects&&h.sort(A,P),!0===I&&re.beginShadows();const n=d.state.shadowsArray;ie.render(n,e,t),d.setupLights(),d.setupLightsView(t),!0===I&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(h,e);const r=h.opaque,i=h.transmissive,o=h.transparent;r.length>0&&Ce(r,e,t),i.length>0&&function(e,t,n,r){null===N&&(N=new rr(1024,1024,{generateMipmaps:!0,minFilter:we,magFilter:me,wrapS:de,wrapT:de}));const i=f.getRenderTarget();f.setRenderTarget(N),f.clear(),Ce(e,n,r),Z.updateRenderTargetMipmap(N),f.setRenderTarget(i),Ce(t,n,r)}(r,i,e,t),o.length>0&&Ce(o,e,t),null!==_&&(Z.updateRenderTargetMipmap(_),Z.updateMultisampleRenderTarget(_)),!0===e.isScene&&e.onAfterRender(f,e,t),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),ue.resetDefaultState(),x=-1,b=null,m.pop(),d=m.length>0?m[m.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=e,v=t,y=n,e&&void 0===q.get(e).__webglFramebuffer&&Z.setupRenderTarget(e);let r=null,i=!1,o=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,w.copy(e.viewport),S.copy(e.scissor),M=e.scissorTest}else w.copy(O).multiplyScalar(C).floor(),S.copy(R).multiplyScalar(C).floor(),M=L;const a=H.bindFramebuffer(36160,r);if(a&&G.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(D.length!==n.length||36064!==D[0]){for(let e=0,t=n.length;e<t;e++)D[e]=36064+e;D.length=n.length,t=!0}}else 1===D.length&&36064===D[0]||(D[0]=36064,D.length=1,t=!0);else 1===D.length&&1029===D[0]||(D[0]=1029,D.length=1,t=!0);t&&(G.isWebGL2?he.drawBuffers(D):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(D))}if(H.viewport(w),H.scissor(S),H.setScissorTest(M),i){const r=q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=q.get(e.texture),i=t||0;he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==ze&&ce.convert(s)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Re&&(V.has("EXT_color_buffer_half_float")||G.isWebGL2&&V.has("EXT_color_buffer_float"));if(l!==Me&&ce.convert(l)!==he.getParameter(35738)&&(l!==Oe||!(G.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==_?q.get(_).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);let a=ce.convert(t.format);G.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),Z.setTexture2D(t,0),he.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t.image.width,o=t.image.height,a=ce.convert(n.format),s=ce.convert(n.type);Z.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(f.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:o,height:a,data:s}=n.image,l=ce.convert(r.format),c=ce.convert(r.type);let u;if(r.isDataTexture3D)Z.setTexture3D(r,0),u=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(r,0),u=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);const h=he.getParameter(3314),d=he.getParameter(32878),p=he.getParameter(3316),m=he.getParameter(3315),g=he.getParameter(32877);he.pixelStorei(3314,o),he.pixelStorei(32878,a),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),he.texSubImage3D(u,i,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,l,c,s),he.pixelStorei(3314,h),he.pixelStorei(32878,d),he.pixelStorei(3316,p),he.pixelStorei(3315,m),he.pixelStorei(32877,g),0===i&&r.generateMipmaps&&he.generateMipmap(u),H.unbindTexture()},this.initTexture=function(e){Z.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,_=null,H.reset(),ue.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class el extends Js{}el.prototype.isWebGL1Renderer=!0;class tl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.name="",this.color=new Di(e),this.density=t}clone(){return new tl(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}tl.prototype.isFogExp2=!0;class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.name="",this.color=new Di(e),this.near=t,this.far=n}clone(){return new nl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}nl.prototype.isFog=!0;class rl extends ci{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}rl.prototype.isScene=!0;class il{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Bn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Bn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}il.prototype.isInterleavedBuffer=!0;const ol=new sr;class al{constructor(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ol.x=this.getX(t),ol.y=this.getY(t),ol.z=this.getZ(t),ol.applyMatrix4(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ol.x=this.getX(t),ol.y=this.getY(t),ol.z=this.getZ(t),ol.applyNormalMatrix(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ol.x=this.getX(t),ol.y=this.getY(t),ol.z=this.getZ(t),ol.transformDirection(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ni(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new al(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}al.prototype.isInterleavedBufferAttribute=!0;class sl extends Ti{constructor(e){super(),this.type="SpriteMaterial",this.color=new Di(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let ll;sl.prototype.isSpriteMaterial=!0;const cl=new sr,ul=new sr,hl=new sr,dl=new Xn,pl=new Xn,ml=new zr,fl=new sr,gl=new sr,vl=new sr,yl=new Xn,_l=new Xn,xl=new Xn;class bl extends ci{constructor(e){if(super(),this.type="Sprite",void 0===ll){ll=new io;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new il(e,5);ll.setIndex([0,1,2,0,2,3]),ll.setAttribute("position",new al(t,3,0,!1)),ll.setAttribute("uv",new al(t,2,3,!1))}this.geometry=ll,this.material=void 0!==e?e:new sl,this.center=new Xn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ul.setFromMatrixScale(this.matrixWorld),ml.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ul.multiplyScalar(-hl.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;wl(fl.set(-.5,-.5,0),hl,o,ul,r,i),wl(gl.set(.5,-.5,0),hl,o,ul,r,i),wl(vl.set(.5,.5,0),hl,o,ul,r,i),yl.set(0,0),_l.set(1,0),xl.set(1,1);let a=e.ray.intersectTriangle(fl,gl,vl,!1,cl);if(null===a&&(wl(gl.set(-.5,.5,0),hl,o,ul,r,i),_l.set(0,1),a=e.ray.intersectTriangle(fl,vl,gl,!1,cl),null===a))return;const s=e.ray.origin.distanceTo(cl);s<e.near||s>e.far||t.push({distance:s,point:cl.clone(),uv:Mi.getUV(cl,fl,gl,vl,yl,_l,xl,new Xn),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function wl(e,t,n,r,i,o){dl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(pl.x=o*dl.x-i*dl.y,pl.y=i*dl.x+o*dl.y):pl.copy(dl),e.copy(t),e.x+=pl.x,e.y+=pl.y,e.applyMatrix4(ml)}bl.prototype.isSprite=!0;const Sl=new sr,Ml=new sr;class El extends ci{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Sl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Sl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Sl.setFromMatrixPosition(e.matrixWorld),Ml.setFromMatrixPosition(this.matrixWorld);const n=Sl.distanceTo(Ml)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance})}return t}}const Tl=new sr,Cl=new nr,Al=new nr,Pl=new sr,Ol=new zr;class Rl extends So{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zr,this.bindMatrixInverse=new zr}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new nr,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Cl.fromBufferAttribute(r.attributes.skinIndex,e),Al.fromBufferAttribute(r.attributes.skinWeight,e),Tl.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=Al.getComponent(i);if(0!==e){const r=Cl.getComponent(i);Ol.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Pl.copy(Tl).applyMatrix4(Ol),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}Rl.prototype.isSkinnedMesh=!0;class Ll extends ci{constructor(){super(),this.type="Bone"}}Ll.prototype.isBone=!0;class Dl extends er{constructor(e,t,n,r,i,o,a,s,l,c,u,h){super(null,o,a,s,l,c,r,i,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:me,this.minFilter=void 0!==c?c:me,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Dl.prototype.isDataTexture=!0;const kl=new zr,Il=new zr;class Fl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Bn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new zr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new zr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const r=e[i]?e[i].matrixWorld:Il;kl.multiplyMatrices(r,t[i]),kl.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Fl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=qn(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Dl(t,e,e,ze,Oe);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Ll),this.bones.push(i),this.boneInverses.push((new zr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}const Nl=new zr,zl=new zr,Ul=[],jl=new So;class Bl extends So{constructor(e,t,n){super(e,t),this.instanceMatrix=new Ni(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(jl.geometry=this.geometry,jl.material=this.material,void 0!==jl.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Nl),zl.multiplyMatrices(n,Nl),jl.matrixWorld=zl,jl.raycast(e,Ul);for(let e=0,n=Ul.length;e<n;e++){const n=Ul[e];n.instanceId=i,n.object=this,t.push(n)}Ul.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ni(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Bl.prototype.isInstancedMesh=!0;class Vl extends Ti{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Di(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}Vl.prototype.isLineBasicMaterial=!0;const Gl=new sr,Hl=new sr,Wl=new zr,ql=new Nr,Zl=new Pr;class $l extends ci{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new io,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vl;super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Gl.fromBufferAttribute(t,e-1),Hl.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Gl.distanceTo(Hl);e.setAttribute("lineDistance",new qi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Zl.copy(n.boundingSphere),Zl.applyMatrix4(r),Zl.radius+=i,!1===e.ray.intersectsSphere(Zl))return;Wl.copy(r).invert(),ql.copy(e.ray).applyMatrix4(Wl);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new sr,c=new sr,u=new sr,h=new sr,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=d){const o=r.getX(n),a=r.getX(n+1);l.fromBufferAttribute(i,o),c.fromBufferAttribute(i,a);if(ql.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=d){l.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(ql.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}$l.prototype.isLine=!0;const Xl=new sr,Kl=new sr;class Yl extends $l{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Xl.fromBufferAttribute(t,e),Kl.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Xl.distanceTo(Kl);e.setAttribute("lineDistance",new qi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Yl.prototype.isLineSegments=!0;class Ql extends $l{constructor(e,t){super(e,t),this.type="LineLoop"}}Ql.prototype.isLineLoop=!0;class Jl extends Ti{constructor(e){super(),this.type="PointsMaterial",this.color=new Di(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}Jl.prototype.isPointsMaterial=!0;const ec=new zr,tc=new Nr,nc=new Pr,rc=new sr;class ic extends ci{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new io,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jl;super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),nc.copy(n.boundingSphere),nc.applyMatrix4(r),nc.radius+=i,!1===e.ray.intersectsSphere(nc))return;ec.copy(r).invert(),tc.copy(e.ray).applyMatrix4(ec);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),l=Math.min(i.count,o.start+o.count);n<l;n++){const o=i.getX(n);rc.fromBufferAttribute(a,o),oc(rc,o,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)rc.fromBufferAttribute(a,n),oc(rc,n,s,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function oc(e,t,n,r,i,o,a){const s=tc.distanceSqToPoint(e);if(s<n){const n=new sr;tc.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}ic.prototype.isPoints=!0;class ac extends er{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.format=void 0!==a?a:Ne,this.minFilter=void 0!==o?o:_e,this.magFilter=void 0!==i?i:_e,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}ac.prototype.isVideoTexture=!0;class sc extends er{constructor(e,t,n,r,i,o,a,s,l,c,u,h){super(null,o,a,s,l,c,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}sc.prototype.isCompressedTexture=!0;class lc extends er{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}}lc.prototype.isCanvasTexture=!0;class cc extends er{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:Ve)!==Ve&&c!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ve&&(n=Ce),void 0===n&&c===Ge&&(n=Ie),super(null,r,i,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:me,this.minFilter=void 0!==s?s:me,this.flipY=!1,this.generateMipmaps=!1}}cc.prototype.isDepthTexture=!0;class uc extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],l=new sr,c=new Xn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const i=n+u/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,s.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new qi(o,3)),this.setAttribute("normal",new qi(a,3)),this.setAttribute("uv",new qi(s,2))}}class hc extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let p=0;const m=[],f=n/2;let g=0;function v(n){const i=p,o=new Xn,m=new sr;let v=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,f*_,0),h.push(0,_,0),d.push(.5,.5),p++;const x=p;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);m.x=y*i,m.y=f*_,m.z=y*n,u.push(m.x,m.y,m.z),h.push(0,_,0),o.x=.5*n+.5,o.y=.5*i*_+.5,d.push(o.x,o.y),p++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new sr,v=new sr;let y=0;const _=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),m=Math.cos(i);v.x=y*l,v.y=-g*n+f,v.z=y*m,u.push(v.x,v.y,v.z),o.set(l,_,m).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(p++)}m.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=m[t][e],r=m[t+1][e],i=m[t+1][e+1],o=m[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new qi(u,3)),this.setAttribute("normal",new qi(h,3)),this.setAttribute("uv",new qi(d,2))}}class dc extends hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class pc extends io{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];const r=e.clone().lerp(n,a/i),s=t.clone().lerp(n,a/i),l=i-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===i?r:r.clone().lerp(s,e/l)}for(let a=0;a<i;a++)for(let e=0;e<2*(i-a)-1;e++){const t=Math.floor(e/2);e%2===0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new sr,r=new sr,i=new sr;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new sr;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new sr;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new sr,t=new sr,n=new sr,r=new sr,a=new Xn,s=new Xn,l=new Xn;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(a,d+0,e,p),c(s,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new qi(i,3)),this.setAttribute("normal",new qi(i.slice(),3)),this.setAttribute("uv",new qi(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class mc extends pc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}}const fc=new sr,gc=new sr,vc=new sr,yc=new Mi;class _c extends io{constructor(e,t){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,!0===e.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=Math.pow(10,4),r=Math.cos(Un*t),i=e.getIndex(),o=e.getAttribute("position"),a=i?i.count:o.count,s=[0,0,0],l=["a","b","c"],c=new Array(3),u={},h=[];for(let d=0;d<a;d+=3){i?(s[0]=i.getX(d),s[1]=i.getX(d+1),s[2]=i.getX(d+2)):(s[0]=d,s[1]=d+1,s[2]=d+2);const{a:e,b:t,c:a}=yc;if(e.fromBufferAttribute(o,s[0]),t.fromBufferAttribute(o,s[1]),a.fromBufferAttribute(o,s[2]),yc.getNormal(vc),c[0]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,c[1]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,c[2]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let n=0;n<3;n++){const e=(n+1)%3,t=c[n],i=c[e],o=yc[l[n]],a=yc[l[e]],d=`${t}_${i}`,p=`${i}_${t}`;p in u&&u[p]?(vc.dot(u[p].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),u[p]=null):d in u||(u[d]={index0:s[n],index1:s[e],normal:vc.clone()})}}for(const d in u)if(u[d]){const{index0:e,index1:t}=u[d];fc.fromBufferAttribute(o,e),gc.fromBufferAttribute(o,t),h.push(fc.x,fc.y,fc.z),h.push(gc.x,gc.y,gc.z)}this.setAttribute("position",new qi(h,3))}}const xc=function(e,t,n){n=n||2;const r=t&&t.length,i=r?t[0]*n:e.length;let o=bc(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,p;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,c=bc(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Lc(c));for(i.sort(Ac),o=0;o<i.length;o++)Pc(i[o],n),n=wc(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-s,u-l),p=0!==p?1/p:0}return Sc(o,a,n,s,l,p),a};function bc(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Vc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Vc(o,e[o],e[o+1],a);return a&&Fc(a,a.next)&&(Gc(a),a=a.next),a}function wc(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Fc(r,r.next)&&0!==Ic(r.prev,r,r.next))r=r.next;else{if(Gc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Sc(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Rc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Ec(e,r,i,o):Mc(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Gc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Sc(e=Tc(wc(e),t,n),t,n,r,i,o,2):2===a&&Cc(e,t,n,r,i,o):Sc(wc(e),t,n,r,i,o,1);break}}function Mc(e){const t=e.prev,n=e,r=e.next;if(Ic(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Dc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ic(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ec(e,t,n,r){const i=e.prev,o=e,a=e.next;if(Ic(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Rc(s,l,t,n,r),d=Rc(c,u,t,n,r);let p=e.prevZ,m=e.nextZ;for(;p&&p.z>=h&&m&&m.z<=d;){if(p!==e.prev&&p!==e.next&&Dc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ic(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==e.prev&&m!==e.next&&Dc(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&Ic(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&Dc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ic(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==e.prev&&m!==e.next&&Dc(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&Ic(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function Tc(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!Fc(i,o)&&Nc(i,r,r.next,o)&&jc(i,o)&&jc(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Gc(r),Gc(r.next),r=e=o),r=r.next}while(r!==e);return wc(r)}function Cc(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&kc(a,e)){let s=Bc(a,e);return a=wc(a,a.next),s=wc(s,s.next),Sc(a,t,n,r,i,o),void Sc(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function Ac(e,t){return e.x-t.x}function Pc(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{r>=n.x&&n.x>=l&&r!==n.x&&Dc(i<c?r:a,i,l,c,i<c?a:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),jc(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&Oc(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(e,t),t){const n=Bc(t,e);wc(t,t.next),wc(n,n.next)}}function Oc(e,t){return Ic(e.prev,e,t.prev)<0&&Ic(t.next,e,e.next)<0}function Rc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Dc(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function kc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Nc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(jc(e,t)&&jc(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ic(e.prev,e,t.prev)||Ic(e,t.prev,t))||Fc(e,t)&&Ic(e.prev,e,e.next)>0&&Ic(t.prev,t,t.next)>0)}function Ic(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Fc(e,t){return e.x===t.x&&e.y===t.y}function Nc(e,t,n,r){const i=Uc(Ic(e,t,n)),o=Uc(Ic(e,t,r)),a=Uc(Ic(n,r,e)),s=Uc(Ic(n,r,t));return i!==o&&a!==s||(!(0!==i||!zc(e,n,t))||(!(0!==o||!zc(e,r,t))||(!(0!==a||!zc(n,e,r))||!(0!==s||!zc(n,t,r)))))}function zc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uc(e){return e>0?1:e<0?-1:0}function jc(e,t){return Ic(e.prev,e,e.next)<0?Ic(e,t,e.next)>=0&&Ic(e,e.prev,t)>=0:Ic(e,t,e.prev)<0||Ic(e,e.next,t)<0}function Bc(e,t){const n=new Hc(e.i,e.x,e.y),r=new Hc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Vc(e,t,n,r){const i=new Hc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Hc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Wc{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Wc.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];qc(e),Zc(n,e);let o=e.length;t.forEach(qc);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,Zc(n,t[s]);const a=xc(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function qc(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Zc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class $c extends io{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Xc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,_,x,b=!1;m&&(g=m.getSpacedPoints(s),b=!0,c=!1,v=m.computeFrenetFrames(s,!1),y=new sr,_=new sr,x=new sr),c||(p=0,u=0,h=0,d=0);const w=e.extractPoints(a);let S=w.shape;const M=w.holes;if(!Wc.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];Wc.isClockWise(t)&&(M[e]=t.reverse())}}const E=Wc.triangulateShape(S,M),T=S;for(let t=0,n=M.length;t<n;t++){const e=M[t];S=S.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const A=S.length,P=E.length;function O(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-s/h,m=t.y+a/h,f=((n.x-c/d-p)*c-(n.y+l/d-m)*l)/(a*c-s*l);r=p+a*f-e.x,i=m+s*f-e.y;const g=r*r+i*i;if(g<=2)return new Xn(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new Xn(r/o,i/o)}const R=[];for(let t=0,n=T.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),R[t]=O(T[t],T[r],T[i]);const L=[];let D,k=R.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];D=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[t]=O(e[t],e[r],e[i]);L.push(D),k=k.concat(D)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=T.length;t<i;t++){const e=C(T[t],R[t],r);N(e.x,e.y,-n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];D=L[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],D[t],r);N(i.x,i.y,-n)}}}const I=h+d;for(let t=0;t<A;t++){const e=c?C(S[t],k[t],I):S[t];b?(_.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),x.copy(g[0]).add(_).add(y),N(x.x,x.y,x.z)):N(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<A;e++){const n=c?C(S[e],k[e],I):S[e];b?(_.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),x.copy(g[t]).add(_).add(y),N(x.x,x.y,x.z)):N(n.x,n.y,l/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=T.length;t<i;t++){const e=C(T[t],R[t],r);N(e.x,e.y,l+n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];D=L[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],D[t],r);b?N(i.x,i.y+g[s-1].y,g[s-1].x+n):N(i.x,i.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=A*e,o=A*(e+1);U(t+r+n,t+i+n,t+i+o,t+r+o)}}}function N(e,t,n){o.push(e),o.push(t),o.push(n)}function z(e,t,i){j(e),j(t),j(i);const o=r.length/3,a=f.generateTopUV(n,r,o-3,o-2,o-1);B(a[0]),B(a[1]),B(a[2])}function U(e,t,i,o){j(e),j(t),j(o),j(t),j(i),j(o);const a=r.length/3,s=f.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);B(s[0]),B(s[1]),B(s[3]),B(s[1]),B(s[2]),B(s[3])}function j(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function B(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=A*e;for(let n=0;n<P;n++){const e=E[n];z(e[2]+t,e[1]+t,e[0]+t)}e=s+2*p,t=A*e;for(let n=0;n<P;n++){const e=E[n];z(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];z(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];z(t[0]+A*s,t[1]+A*s,t[2]+A*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(T,t),t+=T.length;for(let n=0,r=M.length;n<r;n++){const e=M[n];F(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new qi(r,3)),this.setAttribute("uv",new qi(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}const Xc={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Xn(o,a),new Xn(s,l),new Xn(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],m=t[3*i+2],f=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new Xn(a,1-l),new Xn(c,1-h),new Xn(d,1-m),new Xn(f,1-v)]:[new Xn(s,1-l),new Xn(u,1-h),new Xn(p,1-m),new Xn(g,1-v)]}};class Kc extends pc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}}class Yc extends io{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Vn(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/t,l=new sr,c=new Xn;for(let u=0;u<=t;u++){const i=n+u*s*r,h=Math.sin(i),d=Math.cos(i);for(let n=0;n<=e.length-1;n++)l.x=e[n].x*h,l.y=e[n].y,l.z=e[n].x*d,o.push(l.x,l.y,l.z),c.x=u/t,c.y=n/(e.length-1),a.push(c.x,c.y)}for(let u=0;u<t;u++)for(let t=0;t<e.length-1;t++){const n=t+u*e.length,r=n,o=n+e.length,a=n+e.length+1,s=n+1;i.push(r,o,s),i.push(o,a,s)}if(this.setIndex(i),this.setAttribute("position",new qi(o,3)),this.setAttribute("uv",new qi(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new sr,i=new sr,o=new sr,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class Qc extends pc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}}class Jc extends io{constructor(e,t,n){super(),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],o=[],a=[],s=1e-5,l=new sr,c=new sr,u=new sr,h=new sr,d=new sr;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=t+1;for(let m=0;m<=n;m++){const r=m/n;for(let n=0;n<=t;n++){const p=n/t;e(p,r,c),i.push(c.x,c.y,c.z),p-s>=0?(e(p-s,r,u),h.subVectors(c,u)):(e(p+s,r,u),h.subVectors(u,c)),r-s>=0?(e(p,r-s,u),d.subVectors(c,u)):(e(p,r+s,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),o.push(l.x,l.y,l.z),a.push(p,r)}}for(let m=0;m<n;m++)for(let e=0;e<t;e++){const t=m*p+e,n=m*p+e+1,i=(m+1)*p+e+1,o=(m+1)*p+e;r.push(t,n,o),r.push(n,i,o)}this.setIndex(r),this.setAttribute("position",new qi(i,3)),this.setAttribute("normal",new qi(o,3)),this.setAttribute("uv",new qi(a,2))}}class eu extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],s=[],l=[],c=[];let u=e;const h=(t-e)/r,d=new sr,p=new Xn;for(let m=0;m<=r;m++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let m=0;m<r;m++){const e=m*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,s=r+n+2,l=r+1;a.push(i,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new qi(s,3)),this.setAttribute("normal",new qi(l,3)),this.setAttribute("uv",new qi(c,2))}}class tu extends io{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,s,c),a+=s,s=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Wc.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Wc.isClockWise(e)&&(u[t]=e.reverse())}const h=Wc.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new qi(r,3)),this.setAttribute("normal",new qi(i,3)),this.setAttribute("uv",new qi(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class nu extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new sr,h=new sr,d=[],p=[],m=[],f=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0==g&&0==o?y=.5/t:g==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),m.push(h.x,h.y,h.z),f.push(s+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],a=c[g+1][e+1];(0!==g||o>0)&&d.push(t,r,a),(g!==n-1||s<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new qi(p,3)),this.setAttribute("normal",new qi(m,3)),this.setAttribute("uv",new qi(f,2))}}class ru extends pc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}}class iu extends $c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new io;const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class ou extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],c=new sr,u=new sr,h=new sr;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const p=o/r*i,m=d/n*Math.PI*2;u.x=(e+t*Math.cos(m))*Math.cos(p),u.y=(e+t*Math.cos(m))*Math.sin(p),u.z=t*Math.sin(m),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(o/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,a=(r+1)*d+e;o.push(t,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new qi(a,3)),this.setAttribute("normal",new qi(s,3)),this.setAttribute("uv",new qi(l,2))}}class au extends io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],l=[],c=[],u=new sr,h=new sr,d=new sr,p=new sr,m=new sr,f=new sr,g=new sr;for(let y=0;y<=n;++y){const a=y/n*i*Math.PI*2;v(a,i,o,e,d),v(a+.01,i,o,e,p),f.subVectors(p,d),g.addVectors(p,d),m.crossVectors(f,g),g.crossVectors(m,f),m.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),a=t*Math.sin(i);u.x=d.x+(o*g.x+a*m.x),u.y=d.y+(o*g.y+a*m.y),u.z=d.z+(o*g.z+a*m.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){const t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,o=(r+1)*(y-1)+e;a.push(t,n,o),a.push(n,i,o)}function v(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new qi(s,3)),this.setAttribute("normal",new qi(l,3)),this.setAttribute("uv",new qi(c,2))}}class su extends io{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new sr,s=new sr,l=new Xn;let c=new sr;const u=[],h=[],d=[],p=[];function m(i){c=e.getPointAt(i/t,c);const l=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+i*d.x,s.y=o*l.y+i*d.y,s.z=o*l.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)m(e);m(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new qi(u,3)),this.setAttribute("normal",new qi(h,3)),this.setAttribute("uv",new qi(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}}class lu extends io{constructor(e){if(super(),this.type="WireframeGeometry",!0===e.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const t=[],n=[0,0],r={},i=new sr;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],i=t.start;for(let e=i,o=i+t.count;e<o;e+=3)for(let t=0;t<3;t++){const i=a.getX(e+t),o=a.getX(e+(t+1)%3);n[0]=Math.min(i,o),n[1]=Math.max(i,o);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const e in r){const n=r[e];i.fromBufferAttribute(o,n.index1),t.push(i.x,i.y,i.z),i.fromBufferAttribute(o,n.index2),t.push(i.x,i.y,i.z)}}else{const n=e.attributes.position;for(let e=0,r=n.count/3;e<r;e++)for(let o=0;o<3;o++){const r=3*e+o;i.fromBufferAttribute(n,r),t.push(i.x,i.y,i.z);const a=3*e+(o+1)%3;i.fromBufferAttribute(n,a),t.push(i.x,i.y,i.z)}}this.setAttribute("position",new qi(t,3))}}var cu=Object.freeze({__proto__:null,BoxGeometry:Eo,BoxBufferGeometry:Eo,CircleGeometry:uc,CircleBufferGeometry:uc,ConeGeometry:dc,ConeBufferGeometry:dc,CylinderGeometry:hc,CylinderBufferGeometry:hc,DodecahedronGeometry:mc,DodecahedronBufferGeometry:mc,EdgesGeometry:_c,ExtrudeGeometry:$c,ExtrudeBufferGeometry:$c,IcosahedronGeometry:Kc,IcosahedronBufferGeometry:Kc,LatheGeometry:Yc,LatheBufferGeometry:Yc,OctahedronGeometry:Qc,OctahedronBufferGeometry:Qc,ParametricGeometry:Jc,ParametricBufferGeometry:Jc,PlaneGeometry:Bo,PlaneBufferGeometry:Bo,PolyhedronGeometry:pc,PolyhedronBufferGeometry:pc,RingGeometry:eu,RingBufferGeometry:eu,ShapeGeometry:tu,ShapeBufferGeometry:tu,SphereGeometry:nu,SphereBufferGeometry:nu,TetrahedronGeometry:ru,TetrahedronBufferGeometry:ru,TextGeometry:iu,TextBufferGeometry:iu,TorusGeometry:ou,TorusBufferGeometry:ou,TorusKnotGeometry:au,TorusKnotBufferGeometry:au,TubeGeometry:su,TubeBufferGeometry:su,WireframeGeometry:lu});class uu extends Ti{constructor(e){super(),this.type="ShadowMaterial",this.color=new Di(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}uu.prototype.isShadowMaterial=!0;class hu extends Po{constructor(e){super(e),this.type="RawShaderMaterial"}}hu.prototype.isRawShaderMaterial=!0;class du extends Ti{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Di(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}du.prototype.isMeshStandardMaterial=!0;class pu extends du{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Vn(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Di(1,1,1),this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Di).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}pu.prototype.isMeshPhysicalMaterial=!0;class mu extends Ti{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Di(16777215),this.specular=new Di(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}mu.prototype.isMeshPhongMaterial=!0;class fu extends Ti{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Di(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}fu.prototype.isMeshToonMaterial=!0;class gu extends Ti{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}gu.prototype.isMeshNormalMaterial=!0;class vu extends Ti{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Di(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}vu.prototype.isMeshLambertMaterial=!0;class yu extends Ti{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Di(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}yu.prototype.isMeshMatcapMaterial=!0;class _u extends Vl{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}_u.prototype.isLineDashedMaterial=!0;var xu=Object.freeze({__proto__:null,ShadowMaterial:uu,SpriteMaterial:sl,RawShaderMaterial:hu,ShaderMaterial:Po,PointsMaterial:Jl,MeshPhysicalMaterial:pu,MeshStandardMaterial:du,MeshPhongMaterial:mu,MeshToonMaterial:fu,MeshNormalMaterial:gu,MeshLambertMaterial:vu,MeshDepthMaterial:Bs,MeshDistanceMaterial:Vs,MeshBasicMaterial:ki,MeshMatcapMaterial:yu,LineDashedMaterial:_u,LineBasicMaterial:Vl,Material:Ti});const bu={arraySlice:function(e,t,n){return bu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),s=[],c=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==s.length&&(e.times=bu.convertArray(s,e.times.constructor),e.values=bu.convertArray(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0]){const e=s,n=l-s;d=bu.arraySlice(t.values,e,n)}else if(o>=t.times[h]){const e=h*l+s,n=e+l-s;d=bu.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=s,r=l-s;e.evaluate(o),d=bu.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){(new ar).fromArray(d).normalize().conjugate().toArray(d)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)ar.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=qt,e}};class wu{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}wu.prototype.beforeStart_=wu.prototype.copySampleValue_,wu.prototype.afterEnd_=wu.prototype.copySampleValue_;class Su extends wu{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vt,endingEnd:Vt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Gt:i=e,a=2*t-n;break;case Ht:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Gt:o=e,s=2*n-t;break;case Ht:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),m=p*p,f=m*p,g=-h*f+2*h*m-h*p,v=(1+h)*f+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-d)*f+(1.5+d)*m+.5*p,_=d*f-d*m;for(let x=0;x!==a;++x)i[x]=g*o[c+x]+v*o[l+x]+y*o[s+x]+_*o[u+x];return i}}class Mu extends wu{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let h=0;h!==a;++h)i[h]=o[l+h]*u+o[s+h]*c;return i}}class Eu extends wu{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Tu{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bu.convertArray(t,this.TimeBufferType),this.values=bu.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:bu.convertArray(e.times,Array),values:bu.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Eu(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Mu(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Su(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ut:t=this.InterpolantFactoryMethodDiscrete;break;case jt:t=this.InterpolantFactoryMethodLinear;break;case Bt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ut;case this.InterpolantFactoryMethodLinear:return jt;case this.InterpolantFactoryMethodSmooth:return Bt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=bu.arraySlice(n,i,o),this.values=bu.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&bu.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=bu.arraySlice(this.times),t=bu.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Bt,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=bu.arraySlice(e,0,o),this.values=bu.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=bu.arraySlice(this.times,0),t=bu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Tu.prototype.TimeBufferType=Float32Array,Tu.prototype.ValueBufferType=Float32Array,Tu.prototype.DefaultInterpolation=jt;class Cu extends Tu{}Cu.prototype.ValueTypeName="bool",Cu.prototype.ValueBufferType=Array,Cu.prototype.DefaultInterpolation=Ut,Cu.prototype.InterpolantFactoryMethodLinear=void 0,Cu.prototype.InterpolantFactoryMethodSmooth=void 0;class Au extends Tu{}Au.prototype.ValueTypeName="color";class Pu extends Tu{}Pu.prototype.ValueTypeName="number";class Ou extends wu{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)ar.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Ru extends Tu{InterpolantFactoryMethodLinear(e){return new Ou(this.times,this.values,this.getValueSize(),e)}}Ru.prototype.ValueTypeName="quaternion",Ru.prototype.DefaultInterpolation=jt,Ru.prototype.InterpolantFactoryMethodSmooth=void 0;class Lu extends Tu{}Lu.prototype.ValueTypeName="string",Lu.prototype.ValueBufferType=Array,Lu.prototype.DefaultInterpolation=Ut,Lu.prototype.InterpolantFactoryMethodLinear=void 0,Lu.prototype.InterpolantFactoryMethodSmooth=void 0;class Du extends Tu{}Du.prototype.ValueTypeName="vector";class ku{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wt;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Bn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Iu(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(Tu.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const l=bu.getKeyframeOrder(e);e=bu.sortedArray(e,1,l),s=bu.sortedArray(s,1,l),r||0!==e[0]||(e.push(i),s.push(s[0])),o.push(new Pu(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];bu.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new Pu(".morphTargetInfluence["+i+"]",t,o))}s=t.length*(o||1)}else{const i=".bones["+t[c].name+"]";n(Du,i+".position",e,"pos",r),n(Ru,i+".quaternion",e,"rot",r),n(Du,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Iu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pu;case"vector":case"vector2":case"vector3":case"vector4":return Du;case"color":return Au;case"quaternion":return Ru;case"bool":case"boolean":return Cu;case"string":return Lu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];bu.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Fu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Nu{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const zu=new Nu;class Uu{constructor(e){this.manager=void 0!==e?e:zu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ju={};class Bu extends Uu{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Fu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0!==ju[e])return void ju[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let n=0;n<s.length;n++)e[n]=s.charCodeAt(n);r="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(l){setTimeout((function(){r&&r(l),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{ju[e]=[],ju[e].push({onLoad:t,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,r=ju[e];if(delete ju[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Fu.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=ju[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=ju[e];delete ju[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=ju[e];delete ju[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return i.manager.itemStart(e),s}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vu extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Bu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=ku.parse(e[n]);t.push(r)}return t}}class Gu extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],a=new sc,s=new Bu(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=_e),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=_e),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class Hu extends Uu{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Fu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),Fu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Wu extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=new ko,o=new Hu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)s(l);return i}}class qu extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Dl,a=new Bu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:de,o.wrapT=void 0!==n.wrapT?n.wrapT:de,o.magFilter=void 0!==n.magFilter?n.magFilter:_e,o.minFilter=void 0!==n.minFilter?n.minFilter:_e,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=we),1===n.mipmapCount&&(o.minFilter=_e),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class Zu extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=new er,o=new Hu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ne:ze,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class $u{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new Xn:new sr);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new sr,r=[],i=[],o=[],a=new sr,s=new zr;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new sr),r[d].normalize()}i[0]=new sr,o[0]=new sr;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Vn(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(a,e))}o[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(Vn(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Xu extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new Xn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Xu.prototype.isEllipseCurve=!0;class Ku extends Xu{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function Yu(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}Ku.prototype.isArcCurve=!0;const Qu=new sr,Ju=new Yu,eh=new Yu,th=new Yu;class nh extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let o,a,s=Math.floor(i),l=i-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:0===l&&s===r-1&&(s=r-2,l=1),this.closed||s>0?o=n[(s-1)%r]:(Qu.subVectors(n[0],n[1]).add(n[0]),o=Qu);const c=n[s%r],u=n[(s+1)%r];if(this.closed||s+2<r?a=n[(s+2)%r]:(Qu.subVectors(n[r-1],n[r-2]).add(n[r-1]),a=Qu),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Ju.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,t,n,r),eh.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,t,n,r),th.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Ju.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),eh.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),th.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return t.set(Ju.calc(l),eh.calc(l),th.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new sr).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function rh(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function ih(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function oh(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}nh.prototype.isCatmullRomCurve3=!0;class ah extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Xn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Xn;super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(oh(e,n.x,r.x,i.x,o.x),oh(e,n.y,r.y,i.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ah.prototype.isCubicBezierCurve=!0;class sh extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sr,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new sr;super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(oh(e,n.x,r.x,i.x,o.x),oh(e,n.y,r.y,i.y,o.y),oh(e,n.z,r.z,i.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}sh.prototype.isCubicBezierCurve3=!0;class lh extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn;super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Xn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}lh.prototype.isLineCurve=!0;class ch extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr;super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uh extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Xn;super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn,n=this.v0,r=this.v1,i=this.v2;return t.set(ih(e,n.x,r.x,i.x),ih(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uh.prototype.isQuadraticBezierCurve=!0;class hh extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sr;super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr,n=this.v0,r=this.v1,i=this.v2;return t.set(ih(e,n.x,r.x,i.x),ih(e,n.y,r.y,i.y),ih(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}hh.prototype.isQuadraticBezierCurve3=!0;class dh extends $u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn,n=this.points,r=(n.length-1)*e,i=Math.floor(r),o=r-i,a=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],c=n[i>n.length-3?n.length-1:i+2];return t.set(rh(o,a.x,s.x,l.x,c.x),rh(o,a.y,s.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Xn).fromArray(n))}return this}}dh.prototype.isSplineCurve=!0;var ph=Object.freeze({__proto__:null,ArcCurve:Ku,CatmullRomCurve3:nh,CubicBezierCurve:ah,CubicBezierCurve3:sh,EllipseCurve:Xu,LineCurve:lh,LineCurve3:ch,QuadraticBezierCurve:uh,QuadraticBezierCurve3:hh,SplineCurve:dh});class mh extends $u{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new lh(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],o=i.getLength(),a=0===o?0:1-e/o;return i.getPointAt(a)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new ph[n.type]).fromJSON(n))}return this}}class fh extends mh{constructor(e){super(),this.type="Path",this.currentPoint=new Xn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new lh(this.currentPoint.clone(),new Xn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new uh(this.currentPoint.clone(),new Xn(e,t),new Xn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new ah(this.currentPoint.clone(),new Xn(e,t),new Xn(n,r),new Xn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new dh(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const l=new Xu(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class gh extends fh{constructor(e){super(e),this.uuid=Bn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new fh).fromJSON(n))}return this}}class vh extends ci{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.type="Light",this.color=new Di(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}vh.prototype.isLight=!0;class yh extends vh{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(ci.DefaultUp),this.updateMatrix(),this.groundColor=new Di(t)}copy(e){return vh.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}yh.prototype.isHemisphereLight=!0;const _h=new zr,xh=new sr,bh=new sr;class wh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Xn(512,512),this.map=null,this.mapPass=null,this.matrix=new zr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new zo,this._frameExtents=new Xn(1,1),this._viewportCount=1,this._viewports=[new nr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;xh.setFromMatrixPosition(e.matrixWorld),t.position.copy(xh),bh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(bh),t.updateMatrixWorld(),_h.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_h),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Sh extends wh{constructor(){super(new Ro(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*jn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Sh.prototype.isSpotLightShadow=!0;class Mh extends vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(e,t),this.type="SpotLight",this.position.copy(ci.DefaultUp),this.updateMatrix(),this.target=new ci,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new Sh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Mh.prototype.isSpotLight=!0;const Eh=new zr,Th=new sr,Ch=new sr;class Ah extends wh{constructor(){super(new Ro(90,1,.5,500)),this._frameExtents=new Xn(4,2),this._viewportCount=6,this._viewports=[new nr(2,1,1,1),new nr(0,1,1,1),new nr(3,1,1,1),new nr(1,1,1,1),new nr(3,0,1,1),new nr(1,0,1,1)],this._cubeDirections=[new sr(1,0,0),new sr(-1,0,0),new sr(0,0,1),new sr(0,0,-1),new sr(0,1,0),new sr(0,-1,0)],this._cubeUps=[new sr(0,1,0),new sr(0,1,0),new sr(0,1,0),new sr(0,1,0),new sr(0,0,1),new sr(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Th.setFromMatrixPosition(e.matrixWorld),n.position.copy(Th),Ch.copy(n.position),Ch.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Ch),n.updateMatrixWorld(),r.makeTranslation(-Th.x,-Th.y,-Th.z),Eh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Eh)}}Ah.prototype.isPointLightShadow=!0;class Ph extends vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Ah}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Ph.prototype.isPointLight=!0;class Oh extends Oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Oh.prototype.isOrthographicCamera=!0;class Rh extends wh{constructor(){super(new Oh(-5,5,5,-5,.5,500))}}Rh.prototype.isDirectionalLightShadow=!0;class Lh extends vh{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(ci.DefaultUp),this.updateMatrix(),this.target=new ci,this.shadow=new Rh}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Lh.prototype.isDirectionalLight=!0;class Dh extends vh{constructor(e,t){super(e,t),this.type="AmbientLight"}}Dh.prototype.isAmbientLight=!0;class kh extends vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}kh.prototype.isRectAreaLight=!0;class Ih{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new sr)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}Ih.prototype.isSphericalHarmonics3=!0;class Fh extends vh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ih;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Fh.prototype.isLightProbe=!0;class Nh extends Uu{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new Bu(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new xu[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new Di).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new Di).setHex(t.value);break;case"v2":r.uniforms[i].value=(new Xn).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new sr).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new nr).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new Kn).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new zr).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Xn).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Xn).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),r}setTextures(e){return this.textures=e,this}}class zh{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}class Uh extends io{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Uh.prototype.isInstancedBufferGeometry=!0;class jh extends Ni{constructor(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r||1}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}jh.prototype.isInstancedBufferAttribute=!0;class Bh extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Bu(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=Ki(i.type,o),s=new il(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new Uh:new io,o=e.data.index;if(void 0!==o){const e=Ki(o.type,o.array);i.setIndex(new Ni(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new al(i,t.itemSize,t.offset,t.normalized)}else{const e=Ki(t.type,t.array);n=new(t.isInstancedBufferAttribute?jh:Ni)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),i.setAttribute(u,n)}const s=e.data.morphAttributes;if(s)for(const u in s){const t=s[u],n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];let a;if(o.isInterleavedBufferAttribute){const t=r(e.data,o.data);a=new al(t,o.itemSize,o.offset,o.normalized)}else{const e=Ki(o.type,o.array);a=new Ni(e,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new sr;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Pr(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class Vh extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?zh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Bu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in o)if(o[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new gh).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,o=e.length;i<o;i++){const t=(new Fl).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};let r;if(void 0!==e){const i=new Bh;for(let o=0,a=e.length;o<a;o++){let a;const s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new cu[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":a=new cu[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new cu[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new cu[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new cu[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new cu[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new cu[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new cu[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new cu[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new cu[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new cu[s.type]((new ph[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new cu[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new cu[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let n=0,i=s.shapes.length;n<i;n++){const e=t[s.shapes[n]];r.push(e)}a=new cu[s.type](r,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let n=0,i=s.shapes.length;n<i;n++){const e=t[s.shapes[n]];r.push(e)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new ph[e.type]).fromJSON(e)),a=new cu[s.type](r,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Nh;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=ku.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Ki(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Nu(t);i=new Hu(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=o(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new Dl(t.data,t.width,t.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image];Array.isArray(s)?(a=new ko(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new Dl(s.data,s.width,s.height):new er(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Gh)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],Hh),a.wrapT=n(o.wrap[1],Hh)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,Wh)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,Wh)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),r[o.uuid]=a}return r}parseObject(e,t,n,r){let i,o,a;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new rl,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new Di(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new nl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new tl(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Ro(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Oh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Dh(e.color,e.intensity);break;case"DirectionalLight":i=new Lh(e.color,e.intensity);break;case"PointLight":i=new Ph(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new kh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Mh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new yh(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new Fh).fromJSON(e);break;case"SkinnedMesh":o=s(e.geometry),a=l(e.material),i=new Rl(o,a),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":o=s(e.geometry),a=l(e.material),i=new So(o,a);break;case"InstancedMesh":o=s(e.geometry),a=l(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;i=new Bl(o,a,t),i.instanceMatrix=new Ni(new Float32Array(n.array),16),void 0!==r&&(i.instanceColor=new Ni(new Float32Array(r.array),r.itemSize));break;case"LOD":i=new El;break;case"Line":i=new $l(s(e.geometry),l(e.material));break;case"LineLoop":i=new Ql(s(e.geometry),l(e.material));break;case"LineSegments":i=new Yl(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":i=new ic(s(e.geometry),l(e.material));break;case"Sprite":i=new bl(l(e.material));break;case"Group":i=new $s;break;case"Bone":i=new Ll;break;default:i=new ci}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)i.add(this.parseObject(o[e],t,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const Gh={UVMapping:ie,CubeReflectionMapping:oe,CubeRefractionMapping:ae,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:ue},Hh={RepeatWrapping:he,ClampToEdgeWrapping:de,MirroredRepeatWrapping:pe},Wh={NearestFilter:me,NearestMipmapNearestFilter:fe,NearestMipmapLinearFilter:ve,LinearFilter:_e,LinearMipmapNearestFilter:xe,LinearMipmapLinearFilter:we};class qh extends Uu{constructor(e){super(e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Fu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Fu.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}qh.prototype.isImageBitmapLoader=!0;class Zh{constructor(){this.type="ShapePath",this.color=new Di,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new fh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new gh;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=Wc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,l;const c=[];if(1===o.length)return s=o[0],l=new gh,l.curves=s.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const h=[],d=[];let p,m,f=[],g=0;d[g]=void 0,f[g]=[];for(let v=0,y=o.length;v<y;v++)s=o[v],p=s.getPoints(),a=i(p),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new gh,p:p},d[g].s.curves=s.curves,u&&g++,f[g]=[]):f[g].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let n=0,r=d.length;n<r;n++)h[n]=[];for(let n=0,i=d.length;n<i;n++){const i=f[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(f=h))}for(let v=0,y=d.length;v<y;v++){l=d[v].s,c.push(l),m=f[v];for(let e=0,t=m.length;e<t;e++)l.holes.push(m[e].h)}return c}}class $h{constructor(e){this.type="Font",this.data=e}generateShapes(e){const t=[],n=function(e,t,n){const r=Array.from(e),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,l=0;for(let c=0;c<r.length;c++){const e=r[c];if("\n"===e)s=0,l-=o;else{const t=Xh(e,i,s,l,n);s+=t.offsetX,a.push(t.path)}}return a}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,this.data);for(let r=0,i=n.length;r<i;r++)Array.prototype.push.apply(t,n[r].toShapes());return t}}function Xh(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const a=new Zh;let s,l,c,u,h,d,p,m;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=e.length;i<o;){switch(e[i++]){case"m":s=e[i++]*t+n,l=e[i++]*t+r,a.moveTo(s,l);break;case"l":s=e[i++]*t+n,l=e[i++]*t+r,a.lineTo(s,l);break;case"q":c=e[i++]*t+n,u=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,a.quadraticCurveTo(h,d,c,u);break;case"b":c=e[i++]*t+n,u=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,p=e[i++]*t+n,m=e[i++]*t+r,a.bezierCurveTo(h,d,p,m,c,u)}}}return{offsetX:o.ha*t,path:a}}$h.prototype.isFont=!0;class Kh extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Bu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const r=i.parse(n);t&&t(r)}),n,r)}parse(e){return new $h(e)}}let Yh;const Qh={getContext:function(){return void 0===Yh&&(Yh=new(window.AudioContext||window.webkitAudioContext)),Yh},setContext:function(e){Yh=e}};class Jh extends Uu{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Bu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);Qh.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}class ed extends Fh{constructor(e,t){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);const n=(new Di).set(e),r=(new Di).set(t),i=new sr(n.r,n.g,n.b),o=new sr(r.r,r.g,r.b),a=Math.sqrt(Math.PI),s=a*Math.sqrt(.75);this.sh.coefficients[0].copy(i).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(i).sub(o).multiplyScalar(s)}}ed.prototype.isHemisphereLightProbe=!0;class td extends Fh{constructor(e){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);const t=(new Di).set(e);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}}td.prototype.isAmbientLightProbe=!0;const nd=new zr,rd=new zr;class id{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ro,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ro,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,o=t.near*Math.tan(Un*t.fov*.5)/t.zoom;let a,s;rd.elements[12]=-r,nd.elements[12]=r,a=-o*t.aspect+i,s=o*t.aspect+i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*t.aspect-i,s=o*t.aspect-i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rd),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nd)}}class od{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ad(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ad();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ad(){return("undefined"===typeof performance?Date:performance).now()}const sd=new sr,ld=new ar,cd=new sr,ud=new sr;class hd extends ci{constructor(){super(),this.type="AudioListener",this.context=Qh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new od}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(sd,ld,cd),ud.set(0,0,-1).applyQuaternion(ld),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(sd.x,e),t.positionY.linearRampToValueAtTime(sd.y,e),t.positionZ.linearRampToValueAtTime(sd.z,e),t.forwardX.linearRampToValueAtTime(ud.x,e),t.forwardY.linearRampToValueAtTime(ud.y,e),t.forwardZ.linearRampToValueAtTime(ud.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(sd.x,sd.y,sd.z),t.setOrientation(ud.x,ud.y,ud.z,n.x,n.y,n.z)}}class dd extends ci{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const pd=new sr,md=new ar,fd=new sr,gd=new sr;class vd extends dd{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(pd,md,fd),gd.set(0,0,1).applyQuaternion(md);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(pd.x,e),t.positionY.linearRampToValueAtTime(pd.y,e),t.positionZ.linearRampToValueAtTime(pd.z,e),t.orientationX.linearRampToValueAtTime(gd.x,e),t.orientationY.linearRampToValueAtTime(gd.y,e),t.orientationZ.linearRampToValueAtTime(gd.z,e)}else t.setPosition(pd.x,pd.y,pd.z),t.setOrientation(gd.x,gd.y,gd.z)}}class yd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class _d{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){ar.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;ar.multiplyQuaternionsFlat(e,o,e,t,e,n),ar.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const xd="\\[\\]\\.:\\/",bd=new RegExp("[\\[\\]\\.:\\/]","g"),wd="[^\\[\\]\\.:\\/]",Sd="[^"+xd.replace("\\.","")+"]",Md=/((?:WC+[\/:])*)/.source.replace("WC",wd),Ed=/(WCOD+)?/.source.replace("WCOD",Sd),Td=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wd),Cd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wd),Ad=new RegExp("^"+Md+Ed+Td+Cd+"$"),Pd=["material","materials","bones"];class Od{constructor(e,t,n){this.path=t,this.parsedPath=n||Od.parseTrackName(t),this.node=Od.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Od.Composite(e,t,n):new Od(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(bd,"")}static parseTrackName(e){const t=Ad.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Pd.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Od.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Od.Composite=class{constructor(e,t,n){const r=n||Od.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Od.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Od.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Od.prototype.GetterByBindingType=[Od.prototype._getValue_direct,Od.prototype._getValue_array,Od.prototype._getValue_arrayElement,Od.prototype._getValue_toArray],Od.prototype.SetterByBindingTypeAndVersioning=[[Od.prototype._setValue_direct,Od.prototype._setValue_direct_setNeedsUpdate,Od.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Od.prototype._setValue_array,Od.prototype._setValue_array_setNeedsUpdate,Od.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Od.prototype._setValue_arrayElement,Od.prototype._setValue_arrayElement_setNeedsUpdate,Od.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Od.prototype._setValue_fromArray,Od.prototype._setValue_fromArray_setNeedsUpdate,Od.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Rd{constructor(){this.uuid=Bn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new Od(u,n[e],r[e]))}else if(d<l){a=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new Od(u,n[e],r[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const a=--i,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[c];t[l]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new Od(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}Rd.prototype.isAnimationObjectGroup=!0;class Ld{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:Vt,endingEnd:Vt};for(let l=0;l!==o;++l){const e=i[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Nt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===qt)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===zt;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(n===Ft){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Gt,r.endingEnd=Gt):(r.endingStart=e?this.zeroSlopeAtStart?Gt:Vt:Ht,r.endingEnd=t?this.zeroSlopeAtEnd?Gt:Vt:Ht)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}class Dd extends Fn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let l=c[i];if(void 0!==l)o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new _d(Od.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Mu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"===typeof e?ku.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Wt),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new Ld(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?ku.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Dd.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class kd{constructor(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new kd(void 0===this.value.clone?this.value:this.value.clone())}}class Id extends il{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.meshPerAttribute=n||1}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Id.prototype.isInstancedInterleavedBuffer=!0;class Fd{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}Fd.prototype.isGLBufferAttribute=!0;class Nd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Nr(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Xr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Ud(e,this,t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),t.sort(zd),t}intersectObjects(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)Ud(e[r],this,n,t);return n.sort(zd),n}}function zd(e,t){return e.distance-t.distance}function Ud(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Ud(r[e],t,n,!0)}}class jd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Bd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Vd=new Xn;class Gd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xn(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xn(-1/0,-1/0);this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Vd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Xn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Xn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Xn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Xn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Vd.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Gd.prototype.isBox2=!0;const Hd=new sr,Wd=new sr;class qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new sr),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new sr),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new sr),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Hd.subVectors(e,this.start),Wd.subVectors(this.end,this.start);const n=Wd.dot(Wd);let r=Wd.dot(Hd)/n;return t&&(r=Vn(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new sr),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class Zd extends ci{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}Zd.prototype.isImmediateRenderObject=!0;const $d=new sr;class Xd extends ci{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new io,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const e=o/s*Math.PI*2,t=a/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new qi(r,3));const i=new Vl({fog:!1,toneMapped:!1});this.cone=new Yl(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),$d.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($d),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Kd=new sr,Yd=new zr,Qd=new zr;class Jd extends Yl{constructor(e){const t=ep(e),n=new io,r=[],i=[],o=new Di(0,0,1),a=new Di(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new qi(r,3)),n.setAttribute("color",new qi(i,3));super(n,new Vl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Qd.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(Yd.multiplyMatrices(Qd,e.matrixWorld),Kd.setFromMatrixPosition(Yd),r.setXYZ(o,Kd.x,Kd.y,Kd.z),Yd.multiplyMatrices(Qd,e.parent.matrixWorld),Kd.setFromMatrixPosition(Yd),r.setXYZ(o+1,Kd.x,Kd.y,Kd.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function ep(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,ep(e.children[n]));return t}class tp extends So{constructor(e,t,n){super(new nu(t,4,2),new ki({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const np=new sr,rp=new Di,ip=new Di;class op extends ci{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Qc(t);r.rotateY(.5*Math.PI),this.material=new ki({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ni(o,3)),this.add(new So(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");rp.copy(this.light.color),ip.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?rp:ip;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(np.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ap extends Yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Di(n),r=new Di(r);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let u=0,h=0,d=-a;u<=t;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);const e=u===i?n:r;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new io;c.setAttribute("position",new qi(s,3)),c.setAttribute("color",new qi(l,3));super(c,new Vl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class sp extends Yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new Di(i),o=new Di(o);const a=[],s=[];for(let c=0;c<=t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(r,0,l);const u=1&c?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let c=0;c<=n;c++){const t=1&c?i:o,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l;a.push(i,0,o),s.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l,a.push(i,0,o),s.push(t.r,t.g,t.b)}}const l=new io;l.setAttribute("position",new qi(a,3)),l.setAttribute("color",new qi(s,3));super(l,new Vl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const lp=new sr,cp=new sr,up=new sr;class hp extends ci{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new io;r.setAttribute("position",new qi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Vl({fog:!1,toneMapped:!1});this.lightPlane=new $l(r,i),this.add(this.lightPlane),r=new io,r.setAttribute("position",new qi([0,0,0,0,0,1],3)),this.targetLine=new $l(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){lp.setFromMatrixPosition(this.light.matrixWorld),cp.setFromMatrixPosition(this.light.target.matrixWorld),up.subVectors(cp,lp),this.lightPlane.lookAt(cp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(cp),this.targetLine.scale.z=up.length()}}const dp=new sr,pp=new Oo;class mp extends Yl{constructor(e){const t=new io,n=new Vl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new Di(16755200),s=new Di(16711680),l=new Di(43775),c=new Di(16777215),u=new Di(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new qi(r,3)),t.setAttribute("color",new qi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;pp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fp("c",t,e,pp,0,0,-1),fp("t",t,e,pp,0,0,1),fp("n1",t,e,pp,-1,-1,-1),fp("n2",t,e,pp,1,-1,-1),fp("n3",t,e,pp,-1,1,-1),fp("n4",t,e,pp,1,1,-1),fp("f1",t,e,pp,-1,-1,1),fp("f2",t,e,pp,1,-1,1),fp("f3",t,e,pp,-1,1,1),fp("f4",t,e,pp,1,1,1),fp("u1",t,e,pp,.7,1.1,-1),fp("u2",t,e,pp,-.7,1.1,-1),fp("u3",t,e,pp,0,2,-1),fp("cf1",t,e,pp,-1,0,1),fp("cf2",t,e,pp,1,0,1),fp("cf3",t,e,pp,0,-1,1),fp("cf4",t,e,pp,0,1,1),fp("cn1",t,e,pp,-1,0,-1),fp("cn2",t,e,pp,1,0,-1),fp("cn3",t,e,pp,0,-1,-1),fp("cn4",t,e,pp,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fp(e,t,n,r,i,o,a){dp.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],dp.x,dp.y,dp.z)}}const gp=new ur;class vp extends Yl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new io;i.setIndex(new Ni(n,1)),i.setAttribute("position",new Ni(r,3)),super(i,new Vl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&gp.setFromObject(this.object),gp.isEmpty())return;const t=gp.min,n=gp.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Yl.prototype.copy.call(this,e),this.object=e.object,this}}class yp extends Yl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new io;r.setIndex(new Ni(n,1)),r.setAttribute("position",new qi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Vl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class _p extends $l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new io;r.setAttribute("position",new qi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new Vl({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new io;i.setAttribute("position",new qi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),i.computeBoundingSphere(),this.add(new So(i,new ki({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?f:m,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const xp=new sr;let bp,wp;class Sp extends ci{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sr(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sr(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===bp&&(bp=new io,bp.setAttribute("position",new qi([0,0,0,0,1,0],3)),wp=new hc(0,.5,1,5,1),wp.translate(0,-.5,0)),this.position.copy(t),this.line=new $l(bp,new Vl({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new So(wp,new ki({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xp.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xp,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Mp extends Yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new io;n.setAttribute("position",new qi(t,3)),n.setAttribute("color",new qi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Vl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ep=new Float32Array(1),Tp=new Int32Array(Ep.buffer);class Cp{static toHalfFloat(e){Ep[0]=e;const t=Tp[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}}const Ap=Math.pow(2,8),Pp=[.125,.215,.35,.446,.526,.582],Op=5+Pp.length,Rp=20,Lp={[Kt]:0,[Yt]:1,[Jt]:2,[tn]:3,[nn]:4,[rn]:5,[Qt]:6},Dp=new ki({side:f,depthWrite:!1,depthTest:!1}),kp=new So(new Eo,Dp),Ip=new Oh,{_lodPlanes:Fp,_sizeLods:Np,_sigmas:zp}=Zp(),Up=new Di;let jp=null;const Bp=(1+Math.sqrt(5))/2,Vp=1/Bp,Gp=[new sr(1,1,1),new sr(-1,1,1),new sr(1,1,-1),new sr(-1,1,-1),new sr(0,Bp,Vp),new sr(0,Bp,-Vp),new sr(Vp,0,Bp),new sr(-Vp,0,Bp),new sr(Bp,Vp,0),new sr(-Bp,Vp,0)];function Hp(e){const t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);e.multiplyScalar(Math.pow(2,-n));return(n+128)/255}class Wp{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new sr(0,1,0);return new hu({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Lp[Kt]},outputEncoding:{value:Lp[Kt]}},vertexShader:Qp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Jp()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:_,depthTest:!1,depthWrite:!1})}(Rp),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;jp=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Yp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Kp(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Fp.length;e++)Fp[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(jp),e.scissorTest=!1,Xp(e,0,0,e.width,e.height)}_fromTexture(e){jp=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:me,minFilter:me,generateMipmaps:!1,type:Me,format:Be,encoding:qp(e)?e.encoding:Jt,depthBuffer:!1},n=$p(t);return n.depthBuffer=!e,this._pingPongRenderTarget=$p(t),n}_compileMaterial(e){const t=new So(Fp[0],e);this._renderer.compile(t,Ip)}_sceneToCubeUV(e,t,n,r){const i=new Ro(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.outputEncoding,u=s.toneMapping;s.getClearColor(Up),s.toneMapping=Q,s.outputEncoding=Kt,s.autoClear=!1;let h=!1;const d=e.background;if(d){if(d.isColor){Dp.color.copy(d).convertSRGBToLinear(),e.background=null;const t=Hp(Dp.color);Dp.opacity=t,h=!0}}else{Dp.color.copy(Up).convertSRGBToLinear();const e=Hp(Dp.color);Dp.opacity=e,h=!0}for(let p=0;p<6;p++){const t=p%3;0==t?(i.up.set(0,o[p],0),i.lookAt(a[p],0,0)):1==t?(i.up.set(0,0,o[p]),i.lookAt(0,a[p],0)):(i.up.set(0,o[p],0),i.lookAt(0,0,a[p])),Xp(r,t*Ap,p>2?Ap:0,Ap,Ap),s.setRenderTarget(r),h&&s.render(kp,i),s.render(e,i)}s.toneMapping=u,s.outputEncoding=c,s.autoClear=l}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Yp()):null==this._equirectShader&&(this._equirectShader=Kp());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new So(Fp[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Lp[e.encoding],o.outputEncoding.value=Lp[t.texture.encoding],Xp(t,0,0,3*Ap,2*Ap),n.setRenderTarget(t),n.render(i,Ip)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<Op;r++){const t=Math.sqrt(zp[r]*zp[r]-zp[r-1]*zp[r-1]),n=Gp[(r-1)%Gp.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new So(Fp[r],l),u=l.uniforms,h=Np[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,m=isFinite(i)?1+Math.floor(3*p):Rp;m>Rp&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const f=[];let g=0;for(let y=0;y<Rp;++y){const e=y/p,t=Math.exp(-e*e/2);f.push(t),0==y?g+=t:y<m&&(g+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/g;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=f,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=Lp[e.texture.encoding],u.outputEncoding.value=Lp[e.texture.encoding];const v=Np[r];Xp(t,3*Math.max(0,Ap-2*v),(0===r?0:2*Ap)+2*v*(r>4?r-8+4:0),3*v,2*v),s.setRenderTarget(t),s.render(c,Ip)}}function qp(e){return void 0!==e&&e.type===Me&&(e.encoding===Kt||e.encoding===Yt||e.encoding===Qt)}function Zp(){const e=[],t=[],n=[];let r=8;for(let i=0;i<Op;i++){const o=Math.pow(2,r);t.push(o);let a=1/o;i>4?a=Pp[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,m=2,f=1,g=new Float32Array(p*d*h),v=new Float32Array(m*d*h),y=new Float32Array(f*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,p*d*e),v.set(u,m*d*e);const i=[e,e,e,e,e,e];y.set(i,f*d*e)}const _=new io;_.setAttribute("position",new Ni(g,p)),_.setAttribute("uv",new Ni(v,m)),_.setAttribute("faceIndex",new Ni(y,f)),e.push(_),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function $p(e){const t=new rr(3*Ap,3*Ap,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Xp(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Kp(){const e=new Xn(1,1);return new hu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Lp[Kt]},outputEncoding:{value:Lp[Kt]}},vertexShader:Qp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Jp()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:_,depthTest:!1,depthWrite:!1})}function Yp(){return new hu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Lp[Kt]},outputEncoding:{value:Lp[Kt]}},vertexShader:Qp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Jp()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:_,depthTest:!1,depthWrite:!1})}function Qp(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Jp(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}const em=0,tm=1,nm=0,rm=1,im=2;function om(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function am(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function sm(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ic(e,t)}function lm(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new bl(e)}function cm(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ic(e,t)}function um(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Jl(e)}function hm(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Jl(e)}function dm(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Jl(e)}function pm(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new sr(e,t,n)}function mm(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ni(e,t).setUsage(Tn)}function fm(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new zi(e,t)}function gm(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ui(e,t)}function vm(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ji(e,t)}function ym(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Bi(e,t)}function _m(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Vi(e,t)}function xm(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Gi(e,t)}function bm(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Hi(e,t)}function wm(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new qi(e,t)}function Sm(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Zi(e,t)}function Mm(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Mp(e)}function Em(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new vp(e,t)}function Tm(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Yl(new _c(e.geometry),new Vl({color:void 0!==t?t:16777215}))}function Cm(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Yl(new lu(e.geometry),new Vl({color:void 0!==t?t:16777215}))}function Am(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Bu(e)}function Pm(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new qu(e)}function Om(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Io(e,n)}function Rm(){console.error("THREE.CanvasRenderer has been removed")}function Lm(){console.error("THREE.JSONLoader has been removed.")}$u.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create($u.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},fh.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},ap.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Jd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Uu.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),zh.extractUrlBase(e)},Uu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Gd.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Gd.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Gd.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Gd.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},ur.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},ur.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ur.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},ur.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},ur.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Pr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},zo.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},qd.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Kn.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Kn.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Kn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Kn.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Kn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Kn.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},zr.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},zr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},zr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new sr).setFromMatrixColumn(this,3)},zr.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},zr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},zr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},zr.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},zr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},zr.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},zr.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},zr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},zr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},zr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},zr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},zr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},zr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},zr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},zr.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},zr.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},pi.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},ar.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},ar.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Nr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Nr.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Nr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Mi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Mi.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Mi.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Mi.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Mi.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Mi.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Mi.getBarycoord(e,t,n,r,i)},Mi.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Mi.getNormal(e,t,n,r)},gh.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},gh.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new $c(this,e)},gh.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new tu(this,e)},Xn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Xn.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Xn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},sr.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},sr.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},sr.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},sr.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},sr.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},sr.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},sr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},sr.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},sr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},nr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},nr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ci.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},ci.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ci.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},ci.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ci.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(ci.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),So.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(So.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Zt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Rl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Ro.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(vh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ni.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Tn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Tn)}}}),Ni.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Tn:En),this},Ni.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ni.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},io.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},io.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ni(arguments[1],arguments[2])))},io.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},io.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},io.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},io.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},io.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(io.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),il.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Tn:En),this},il.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},$c.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},$c.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},$c.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},rl.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},kd.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ti.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Di}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Po.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Js.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Js.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Js.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Js.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Js.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Js.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Js.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Js.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Js.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Js.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Js.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Js.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Js.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Js.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Js.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Js.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Js.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Js.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Js.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Js.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Js.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Js.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Js.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Js.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Js.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Js.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Yt:Kt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Gs.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(rr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),dd.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Jh).load(e,(function(e){t.setBuffer(e)})),this},yd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Do.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Do.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},Qn.crossOrigin=void 0,Qn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Zu;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Qn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Wu;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Qn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Qn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Dm={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function km(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},87462:(e,t,n)=>{"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})},63366:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>vd,scaleDiverging:()=>ey,scaleDivergingLog:()=>ty,scaleDivergingPow:()=>ry,scaleDivergingSqrt:()=>iy,scaleDivergingSymlog:()=>ny,scaleIdentity:()=>Fm,scaleImplicit:()=>fd,scaleLinear:()=>Im,scaleLog:()=>Wm,scaleOrdinal:()=>gd,scalePoint:()=>_d,scalePow:()=>ef,scaleQuantile:()=>df,scaleQuantize:()=>pf,scaleRadial:()=>of,scaleSequential:()=>qv,scaleSequentialLog:()=>Zv,scaleSequentialPow:()=>Xv,scaleSequentialQuantile:()=>Yv,scaleSequentialSqrt:()=>Kv,scaleSequentialSymlog:()=>$v,scaleSqrt:()=>tf,scaleSymlog:()=>Xm,scaleThreshold:()=>mf,scaleTime:()=>Vv,scaleUtc:()=>Gv,tickFormat:()=>Dm});var t=n(72791),r=n(54164),i=n(31201),o=n(48218),a=n(48991);var s=n(91490);function l(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function c(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function u(){}var h=.7,d=1/h,p="\\s*([+-]?\\d+)\\s*",m="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",f="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g=/^#([0-9a-f]{3,8})$/,v=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),y=new RegExp("^rgb\\("+[f,f,f]+"\\)$"),_=new RegExp("^rgba\\("+[p,p,p,m]+"\\)$"),x=new RegExp("^rgba\\("+[f,f,f,m]+"\\)$"),b=new RegExp("^hsl\\("+[m,f,f]+"\\)$"),w=new RegExp("^hsla\\("+[m,f,f,m]+"\\)$"),S={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function M(){return this.rgb().formatHex()}function E(){return this.rgb().formatRgb()}function T(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=g.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?C(t):3===n?new R(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?A(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?A(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=v.exec(e))?new R(t[1],t[2],t[3],1):(t=y.exec(e))?new R(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=_.exec(e))?A(t[1],t[2],t[3],t[4]):(t=x.exec(e))?A(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=b.exec(e))?I(t[1],t[2]/100,t[3]/100,1):(t=w.exec(e))?I(t[1],t[2]/100,t[3]/100,t[4]):S.hasOwnProperty(e)?C(S[e]):"transparent"===e?new R(NaN,NaN,NaN,0):null}function C(e){return new R(e>>16&255,e>>8&255,255&e,1)}function A(e,t,n,r){return r<=0&&(e=t=n=NaN),new R(e,t,n,r)}function P(e){return e instanceof u||(e=T(e)),e?new R((e=e.rgb()).r,e.g,e.b,e.opacity):new R}function O(e,t,n,r){return 1===arguments.length?P(e):new R(e,t,n,null==r?1:r)}function R(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function L(){return"#"+k(this.r)+k(this.g)+k(this.b)}function D(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function k(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function I(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new N(e,t,n,r)}function F(e){if(e instanceof N)return new N(e.h,e.s,e.l,e.opacity);if(e instanceof u||(e=T(e)),!e)return new N;if(e instanceof N)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new N(a,s,l,e.opacity)}function N(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function z(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function U(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}l(u,T,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:M,formatHex:M,formatHsl:function(){return F(this).formatHsl()},formatRgb:E,toString:E}),l(R,O,c(u,{brighter:function(e){return e=null==e?d:Math.pow(d,e),new R(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?h:Math.pow(h,e),new R(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L,formatHex:L,formatRgb:D,toString:D})),l(N,(function(e,t,n,r){return 1===arguments.length?F(e):new N(e,t,n,null==r?1:r)}),c(u,{brighter:function(e){return e=null==e?d:Math.pow(d,e),new N(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?h:Math.pow(h,e),new N(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new R(z(e>=240?e-240:e+120,i,r),z(e,i,r),z(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const j=e=>()=>e;function B(e,t){return function(n){return e+n*t}}function V(e){return 1===(e=+e)?G:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):j(isNaN(t)?n:t)}}function G(e,t){var n=t-e;return n?B(e,n):j(isNaN(e)?t:e)}(function e(t){var n=V(t);function r(e,t){var r=n((e=O(e)).r,(t=O(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=G(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r})(1);function H(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=O(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var W=H((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return U((n-r/t)*t,a,i,o,s)}}));H((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return U((n-r/t)*t,i,o,a,s)}}));var q=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map((function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}));const Z=(e=>W(e[e.length-1]))(q);var $=n(534);var X=n(80184);const K=new i.GeoCoordinates(47.58,-122.34),Y=new s.VectorTileDataSource({authenticationCode:"J0IJdYzKDYS3nHVDDEWETIqK3nAcxqW42vz7xeSq61M"});function Q(){const e=(0,t.useRef)(null),[n,r]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(!e.current)return;const t=new a.MapView({theme:"./resources/berlin_tilezen_effects_streets.json",canvas:e.current,target:K,zoomLevel:12.4,tilt:40,heading:0,projection:i.sphereProjection,decoderUrl:"decoder.bundle.js"});t.addDataSource(Y);const n=()=>t.resize(window.innerWidth,window.innerHeight);window.addEventListener("resize",n),r(t);const s=new o.MapControls(t),l=new o.MapControlsUI(s);return e.current.parentElement.appendChild(l.domElement),()=>window.removeEventListener("resize",n)}),[]),(e=>{(0,t.useEffect)((()=>{e&&(async()=>{const t=await fetch("./data/policeBoundaries.json");if(200!==t.status)return;const n=await t.json(),r=await fetch("./data/NeighbourhoodCount2021.json");if(200!==r.status)return;const i=await r.json(),o=Math.max(...Object.values(i));n.features.forEach((e=>{const t=i[e.properties.NEIGHBORHOOD]/o||0;e.properties.color=Z(t),e.properties.height=2700*t}));const a=new s.GeoJsonDataProvider("Seattle",n),l=new s.VectorTileDataSource({dataProvider:a,styleSetName:"geojson",gatherFeatureAttributes:!0,addGroundPlane:!1});await e.addDataSource(l),l.setTheme({styles:{geojson:[{when:"$geometryType == 'polygon'",technique:"extruded-polygon",renderOrder:1e3,maxZoomLevel:15,attr:{color:["get","color"],transparent:!0,opacity:.6,constantHeight:!0,boundaryWalls:!1}}]}}),e.update()})()}),[e])})(n),(e=>{(0,t.useEffect)((()=>{e&&(async()=>{const t=new s.VectorTileDataSource({baseUrl:"https://xyz.api.here.com/hub/spaces/f2RCpkYJ/tile/web",apiFormat:s.APIFormat.XYZSpace,authenticationCode:"APvHpXqZRCCJxzzPCQ55ZwA",styleSetName:"geojson"});await e.addDataSource(t),t.setTheme({styles:{geojson:[{when:"$geometryType == 'point'",technique:"circles",renderOrder:1e4,minZoomLevel:15,attr:{transparent:!0,opacity:.7,color:"#0080ff",size:["+",["*",["get","count"],.09],10]}}]}}),e.update()})()}),[e])})(n);const[l,c]=(e=>{const n=(0,t.useRef)();return[(0,t.useCallback)((e=>{n.current={x:e.pageX,y:e.pageY}}),[]),(0,t.useCallback)((t=>{if(!e||!n.current)return;if((n.current.x-t.pageX)**2+(n.current.y-t.pageY)**2>10)return;const r=e.intersectMapObjects(t.pageX,t.pageY).filter((e=>{var t;return"Seattle"===(null===(t=e.userData)||void 0===t?void 0:t.$layer)}));if(!r.length)return;const o=r[0].userData.target,s={target:new i.GeoCoordinates(o[1],o[0]),tilt:40,heading:0,distance:4e3},l=e.camera.position.clone(),c=e.camera.quaternion.clone(),u=a.MapViewUtils.getCameraPositionFromTargetCoordinates(s.target,s.distance,s.heading,s.tilt,e.projection),h=a.MapViewUtils.getCameraRotationAtTarget(e.projection,s.target,s.heading,s.tilt),d=Date.now(),p=new $.CatmullRomCurve3([l,u]),m=()=>{let t=(Date.now()-d)/1e3;t>=1&&(t=1,e.endAnimation(),e.removeEventListener(a.MapViewEventNames.Render,m)),e.camera.position.copy(p.getPoint(t));const n=c.clone().slerp(h,t);e.camera.quaternion.copy(n),e.camera.updateMatrixWorld(!0)};e.addEventListener(a.MapViewEventNames.Render,m),e.beginAnimation()}),[e])]})(n);return(0,X.jsx)("div",{className:"canvas-container",children:(0,X.jsx)("canvas",{ref:e,onPointerDown:l,onPointerUp:c})})}var J=n(14642),ee=n(59737),te=n(63366),ne=n(87462),re=n(52007),ie=n.n(re),oe=n(28182),ae=n(90767),se=n(12065),le=n(86481),ce=n(10551),ue=n(42071),he=n(89683),de=n(23031);function pe(e,t){return pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pe(e,t)}function me(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pe(e,t)}const fe=t.createContext(null);function ge(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function ve(e,t,n){return null!=n[t]?n[t]:e.props[t]}function ye(e,n,r){var i=ge(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,c=a in i,u=n[a],h=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,t.isValidElement)(u)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:ve(s,"exit",e),enter:ve(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:ve(s,"exit",e),enter:ve(s,"enter",e)})}})),o}var _e=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},xe=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}me(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,ge(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:ve(e,"appear",r),enter:ve(e,"enter",r),exit:ve(e,"exit",r)})}))):ye(e,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=ge(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,ne.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,te.Z)(e,["component","childFactory"]),o=this.state.contextValue,a=_e(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(fe.Provider,{value:o},a):t.createElement(fe.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);xe.propTypes={},xe.defaultProps={component:"div",childFactory:function(e){return e}};const be=xe;n(78677);var we=n(91672),Se=n(62110),Me=n.n(Se),Ee=n(95438),Te=n(84804),Ce=n(96567),Ae=(0,we.w)((function(e,n){var r=e.styles,i=(0,Te.O)([r],void 0,(0,t.useContext)(we.T)),o=(0,t.useRef)();return(0,t.useLayoutEffect)((function(){var e=n.key+"-global",t=new Ce.m({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),o.current=[t,r],function(){t.flush()}}),[n]),(0,t.useLayoutEffect)((function(){var e=o.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&(0,Ee.M)(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function Pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Te.O)(t)}var Oe=function(){var e=Pe.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const Re=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[h,d]=t.useState(!1),p=(0,oe.Z)(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),m={width:s,height:s,top:-s/2+a,left:-s/2+o},f=(0,oe.Z)(r.child,h&&r.childLeaving,i&&r.childPulsate);return l||h||d(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,X.jsx)("span",{className:p,style:m,children:(0,X.jsx)("span",{className:f})})};var Le=n(30208);const De=(0,Le.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ke=["center","classes","className"];let Ie,Fe,Ne,ze,Ue=e=>e;const je=Oe(Ie||(Ie=Ue`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Be=Oe(Fe||(Fe=Ue`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Ve=Oe(Ne||(Ne=Ue`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Ge=(0,le.ZP)("span",{name:"MuiTouchRipple",slot:"Root",skipSx:!0})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),He=(0,le.ZP)(Re,{name:"MuiTouchRipple",slot:"Ripple"})(ze||(ze=Ue`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),De.rippleVisible,je,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),De.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),De.child,De.childLeaving,Be,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),De.childPulsate,Ve,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),We=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,s=(0,te.Z)(r,ke),[l,c]=t.useState([]),u=t.useRef(0),h=t.useRef(null);t.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[l]);const d=t.useRef(!1),p=t.useRef(null),m=t.useRef(null),f=t.useRef(null);t.useEffect((()=>()=>{clearTimeout(p.current)}),[]);const g=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;c((e=>[...e,(0,X.jsx)(He,{classes:{ripple:(0,oe.Z)(o.ripple,De.ripple),rippleVisible:(0,oe.Z)(o.rippleVisible,De.rippleVisible),ripplePulsate:(0,oe.Z)(o.ripplePulsate,De.ripplePulsate),child:(0,oe.Z)(o.child,De.child),childLeaving:(0,oe.Z)(o.childLeaving,De.childLeaving),childPulsate:(0,oe.Z)(o.childPulsate,De.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,h.current=a}),[o]),v=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e.type&&d.current)return void(d.current=!1);"touchstart"===e.type&&(d.current=!0);const s=a?null:f.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(o||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}e.touches?null===m.current&&(m.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})},p.current=setTimeout((()=>{m.current&&(m.current(),m.current=null)}),80)):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[i,g]),y=t.useCallback((()=>{v({},{pulsate:!0})}),[v]),_=t.useCallback(((e,t)=>{if(clearTimeout(p.current),"touchend"===e.type&&m.current)return m.current(),m.current=null,void(p.current=setTimeout((()=>{_(e,t)})));m.current=null,c((e=>e.length>0?e.slice(1):e)),h.current=t}),[]);return t.useImperativeHandle(n,(()=>({pulsate:y,start:v,stop:_})),[y,v,_]),(0,X.jsx)(Ge,(0,ne.Z)({className:(0,oe.Z)(o.root,De.root,a),ref:f},s,{children:(0,X.jsx)(be,{component:null,exit:!0,children:l})}))})),qe=We;var Ze=n(95159);function $e(e){return(0,Ze.Z)("MuiButtonBase",e)}const Xe=(0,Le.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Ke=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"],Ye=(0,le.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Xe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Qe=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:m,onClick:f,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:_,onKeyDown:x,onKeyUp:b,onMouseDown:w,onMouseLeave:S,onMouseUp:M,onTouchEnd:E,onTouchMove:T,onTouchStart:C,tabIndex:A=0,TouchRippleProps:P,type:O}=r,R=(0,te.Z)(r,Ke),L=t.useRef(null),D=t.useRef(null),{isFocusVisibleRef:k,onFocus:I,onBlur:F,ref:N}=(0,de.Z)(),[z,U]=t.useState(!1);function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return(0,he.Z)((r=>{t&&t(r);return!n&&D.current&&D.current[e](r),!0}))}c&&z&&U(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{U(!0),L.current.focus()}})),[]),t.useEffect((()=>{z&&d&&!u&&D.current.pulsate()}),[u,d,z]);const B=j("start",w),V=j("stop",g),G=j("stop",v),H=j("stop",M),W=j("stop",(e=>{z&&e.preventDefault(),S&&S(e)})),q=j("start",C),Z=j("stop",E),$=j("stop",T),K=j("stop",(e=>{F(e),!1===k.current&&U(!1),m&&m(e)}),!1),Y=(0,he.Z)((e=>{L.current||(L.current=e.currentTarget),I(e),!0===k.current&&(U(!0),_&&_(e)),y&&y(e)})),Q=()=>{const e=L.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},J=t.useRef(!1),ee=(0,he.Z)((e=>{d&&!J.current&&z&&D.current&&" "===e.key&&(J.current=!0,D.current.stop(e,(()=>{D.current.start(e)}))),e.target===e.currentTarget&&Q()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&Q()&&"Enter"===e.key&&!c&&(e.preventDefault(),f&&f(e))})),re=(0,he.Z)((e=>{d&&" "===e.key&&D.current&&z&&!e.defaultPrevented&&(J.current=!1,D.current.stop(e,(()=>{D.current.pulsate(e)}))),b&&b(e),f&&e.target===e.currentTarget&&Q()&&" "===e.key&&!e.defaultPrevented&&f(e)}));let ie=l;"button"===ie&&(R.href||R.to)&&(ie=p);const se={};"button"===ie?(se.type=void 0===O?"button":O,se.disabled=c):(R.href||R.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=(0,ue.Z)(N,L),pe=(0,ue.Z)(n,le),[me,fe]=t.useState(!1);t.useEffect((()=>{fe(!0)}),[]);const ge=me&&!u&&!c;const ve=(0,ne.Z)({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:A,focusVisible:z}),ye=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,ae.Z)(o,$e,i);return n&&r&&(a.root+=` ${r}`),a})(ve);return(0,X.jsxs)(Ye,(0,ne.Z)({as:ie,className:(0,oe.Z)(ye.root,s),ownerState:ve,onBlur:K,onClick:f,onContextMenu:V,onFocus:Y,onKeyDown:ee,onKeyUp:re,onMouseDown:B,onMouseLeave:W,onMouseUp:H,onDragLeave:G,onTouchEnd:Z,onTouchMove:$,onTouchStart:q,ref:pe,tabIndex:c?-1:A,type:O},se,R,{children:[a,ge?(0,X.jsx)(qe,(0,ne.Z)({ref:D,center:o},P)):null]}))}));var Je=n(14036);function et(e){return(0,Ze.Z)("MuiIconButton",e)}const tt=(0,Le.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),nt=["edge","children","className","color","disabled","disableFocusRipple","size"],rt=(0,le.ZP)(Qe,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,Je.Z)(n.color)}`],n.edge&&t[`edge${(0,Je.Z)(n.edge)}`],t[`size${(0,Je.Z)(n.size)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:(0,se.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,ne.Z)({color:t.palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:(0,se.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${tt.disabled}`]:{backgroundColor:"transparent",color:t.palette.action.disabled}})})),it=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,te.Z)(n,nt),h=(0,ne.Z)({},n,{edge:r,color:a,disabled:s,disableFocusRipple:l,size:c}),d=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,a={root:["root",n&&"disabled","default"!==r&&`color${(0,Je.Z)(r)}`,i&&`edge${(0,Je.Z)(i)}`,`size${(0,Je.Z)(o)}`]};return(0,ae.Z)(a,et,t)})(h);return(0,X.jsx)(rt,(0,ne.Z)({className:(0,oe.Z)(d.root,o),centerRipple:!0,focusRipple:!l,disabled:s,ref:t,ownerState:h},u,{children:i}))})),ot=it;var at=n(57441),st=n(79613),lt=n.n(st);const ct=function(e){function t(e,r,l,c,d){for(var p,m,f,g,x,w=0,S=0,M=0,E=0,T=0,L=0,k=f=p=0,F=0,N=0,z=0,U=0,j=l.length,B=j-1,V="",G="",H="",W="";F<j;){if(m=l.charCodeAt(F),F===B&&0!==S+E+M+w&&(0!==S&&(m=47===S?10:47),E=M=w=0,j++,B++),0===S+E+M+w){if(F===B&&(0<N&&(V=V.replace(h,"")),0<V.trim().length)){switch(m){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(F)}m=59}switch(m){case 123:for(p=(V=V.trim()).charCodeAt(0),f=1,U=++F;F<j;){switch(m=l.charCodeAt(F)){case 123:f++;break;case 125:f--;break;case 47:switch(m=l.charCodeAt(F+1)){case 42:case 47:e:{for(k=F+1;k<B;++k)switch(l.charCodeAt(k)){case 47:if(42===m&&42===l.charCodeAt(k-1)&&F+2!==k){F=k+1;break e}break;case 10:if(47===m){F=k+1;break e}}F=k}}break;case 91:m++;case 40:m++;case 34:case 39:for(;F++<B&&l.charCodeAt(F)!==m;);}if(0===f)break;F++}if(f=l.substring(U,F),0===p&&(p=(V=V.replace(u,"").trim()).charCodeAt(0)),64===p){switch(0<N&&(V=V.replace(h,"")),m=V.charCodeAt(1)){case 100:case 109:case 115:case 45:N=r;break;default:N=R}if(U=(f=t(r,N,f,m,d+1)).length,0<D&&(x=s(3,f,N=n(R,V,z),r,A,C,U,m,d,c),V=N.join(""),void 0!==x&&0===(U=(f=x.trim()).length)&&(m=0,f="")),0<U)switch(m){case 115:V=V.replace(b,a);case 100:case 109:case 45:f=V+"{"+f+"}";break;case 107:f=(V=V.replace(v,"$1 $2"))+"{"+f+"}",f=1===O||2===O&&o("@"+f,3)?"@-webkit-"+f+"@"+f:"@"+f;break;default:f=V+f,112===c&&(G+=f,f="")}else f=""}else f=t(r,n(r,V,z),f,c,d+1);H+=f,f=z=N=k=p=0,V="",m=l.charCodeAt(++F);break;case 125:case 59:if(1<(U=(V=(0<N?V.replace(h,""):V).trim()).length))switch(0===k&&(p=V.charCodeAt(0),45===p||96<p&&123>p)&&(U=(V=V.replace(" ",":")).length),0<D&&void 0!==(x=s(1,V,r,e,A,C,G.length,c,d,c))&&0===(U=(V=x.trim()).length)&&(V="\0\0"),p=V.charCodeAt(0),m=V.charCodeAt(1),p){case 0:break;case 64:if(105===m||99===m){W+=V+l.charAt(F);break}default:58!==V.charCodeAt(U-1)&&(G+=i(V,p,m,V.charCodeAt(2)))}z=N=k=p=0,V="",m=l.charCodeAt(++F)}}switch(m){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<V.length&&(N=1,V+="\0"),0<D*I&&s(0,V,r,e,A,C,G.length,c,d,c),C=1,A++;break;case 59:case 125:if(0===S+E+M+w){C++;break}default:switch(C++,g=l.charAt(F),m){case 9:case 32:if(0===E+w+S)switch(T){case 44:case 58:case 9:case 32:g="";break;default:32!==m&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===E+S+w&&(N=z=1,g="\f"+g);break;case 108:if(0===E+S+w+P&&0<k)switch(F-k){case 2:112===T&&58===l.charCodeAt(F-3)&&(P=T);case 8:111===L&&(P=L)}break;case 58:0===E+S+w&&(k=F);break;case 44:0===S+M+E+w&&(N=1,g+="\r");break;case 34:case 39:0===S&&(E=E===m?0:0===E?m:E);break;case 91:0===E+S+M&&w++;break;case 93:0===E+S+M&&w--;break;case 41:0===E+S+w&&M--;break;case 40:if(0===E+S+w){if(0===p)if(2*T+3*L===533);else p=1;M++}break;case 64:0===S+M+E+w+k+f&&(f=1);break;case 42:case 47:if(!(0<E+w+M))switch(S){case 0:switch(2*m+3*l.charCodeAt(F+1)){case 235:S=47;break;case 220:U=F,S=42}break;case 42:47===m&&42===T&&U+2!==F&&(33===l.charCodeAt(U+2)&&(G+=l.substring(U,F+1)),g="",S=0)}}0===S&&(V+=g)}L=T,T=m,F++}if(0<(U=G.length)){if(N=r,0<D&&(void 0!==(x=s(2,G,N,e,A,C,U,c,d,c))&&0===(G=x).length))return W+G+H;if(G=N.join(",")+"{"+G+"}",0!==O*P){switch(2!==O||o(G,2)||(P=0),P){case 111:G=G.replace(_,":-moz-$1")+G;break;case 112:G=G.replace(y,"::-webkit-input-$1")+G.replace(y,"::-moz-$1")+G.replace(y,":-ms-input-$1")+G}P=0}}return W+G+H}function n(e,t,n){var i=t.trim().split(f);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<o;++s)for(var c=0;c<a;++c)t[l++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===O||2===O&&o(l,1)?"-webkit-"+l+l:l}if(0===O||2===O&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(T,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(x,"tb");break;case 232:l=a.replace(x,"tb-rl");break;case 220:l=a.replace(x,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),k(2!==t?r:r.replace(M,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,o,a,s,l,u){for(var h,d=0,p=t;d<D;++d)switch(h=L[d].call(c,e,p,n,r,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(k=null,e?"function"!==typeof e?O=1:(O=2,k=e):O=0),l}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<D){var i=s(-1,n,r,r,A,C,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var o=t(R,r,n,0,0);return 0<D&&(void 0!==(i=s(-2,o,r,r,A,C,o.length,0,0,0))&&(o=i)),"",P=0,C=A=1,o}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,m=/([,: ])(transform)/g,f=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,_=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,C=1,A=1,P=0,O=1,R=[],L=[],D=0,k=null,I=0;return c.use=function e(t){switch(t){case void 0:case null:D=L.length=0;break;default:if("function"===typeof t)L[D++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else I=0|!!t}return e},c.set=l,void 0!==e&&l(e),c};var ut=n(63840),ht=n(50620),dt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const pt=(0,ht.Z)((function(e){return dt.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ft=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},gt=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,at.typeOf)(e)},vt=Object.freeze([]),yt=Object.freeze({});function _t(e){return"function"==typeof e}function xt(e){return e.displayName||e.name||"Component"}function bt(e){return e&&"string"==typeof e.styledComponentId}var wt="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",St="undefined"!=typeof window&&"HTMLElement"in window,Mt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/Police-Map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Tt=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&Et(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),Ct=new Map,At=new Map,Pt=1,Ot=function(e){if(Ct.has(e))return Ct.get(e);for(;At.has(Pt);)Pt++;var t=Pt++;return Ct.set(e,t),At.set(t,e),t},Rt=function(e){return At.get(e)},Lt=function(e,t){t>=Pt&&(Pt=t+1),Ct.set(e,t),At.set(t,e)},Dt="style["+wt+'][data-styled-version="5.3.3"]',kt=new RegExp("^"+wt+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),It=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},Ft=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(kt);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(Lt(c,l),It(e,c,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},Nt=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},zt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(wt))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(wt,"active"),r.setAttribute("data-styled-version","5.3.3");var a=Nt();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},Ut=function(){function e(e){var t=this.element=zt(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}Et(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),jt=function(){function e(e){var t=this.element=zt(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Bt=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Vt=St,Gt={isServer:!St,useCSSOMInjection:!Mt},Ht=function(){function e(e,t,n){void 0===e&&(e=yt),void 0===t&&(t={}),this.options=mt({},Gt,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&St&&Vt&&(Vt=!1,function(e){for(var t=document.querySelectorAll(Dt),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(wt)&&(Ft(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return Ot(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(mt({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Bt(i):r?new Ut(i):new jt(i),new Tt(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Ot(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Ot(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Ot(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var o=Rt(i);if(void 0!==o){var a=e.names.get(o),s=t.getGroup(i);if(a&&s&&a.size){var l=wt+".g"+i+'[id="'+o+'"]',c="";void 0!==a&&a.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),Wt=/(a)(d)/gi,qt=function(e){return String.fromCharCode(e+(e>25?39:97))};function Zt(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=qt(t%52)+n;return(qt(t%52)+n).replace(Wt,"$1-$2")}var $t=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Xt=function(e){return $t(5381,e)};function Kt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(_t(n)&&!bt(n))return!1}return!0}var Yt=Xt("5.3.3"),Qt=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Kt(e),this.componentId=t,this.baseHash=$t(Yt,t),this.baseStyle=n,Ht.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=vn(this.rules,e,t,n).join(""),a=Zt($t(this.baseHash,o)>>>0);if(!t.hasNameForId(r,a)){var s=n(o,"."+a,void 0,r);t.insertRules(r,a,s)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=$t(this.baseHash,n.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var p=vn(d,e,t,n),m=Array.isArray(p)?p.join(""):p;c=$t(c,m+h),u+=m}}if(u){var f=Zt(c>>>0);if(!t.hasNameForId(r,f)){var g=n(u,"."+f,void 0,r);t.insertRules(r,f,g)}i.push(f)}}return i.join(" ")},e}(),Jt=/^\s*\/\/.*$/gm,en=[":","[",".","#"];function tn(e){var t,n,r,i,o=void 0===e?yt:e,a=o.options,s=void 0===a?yt:a,l=o.plugins,c=void 0===l?vt:l,u=new ct(s),h=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,l,c,u,h){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),p=function(e,r,o){return 0===r&&-1!==en.indexOf(o[n.length])||o.match(i)?e:"."+t};function m(e,o,a,s){void 0===s&&(s="&");var l=e.replace(Jt,""),c=o&&a?a+" "+o+" { "+l+" }":l;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(a||!o?"":o,c)}return u.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},d,function(e){if(-2===e){var t=h;return h=[],t}}])),m.hash=c.length?c.reduce((function(e,t){return t.name||Et(15),$t(e,t.name)}),5381).toString():"",m}var nn=t.createContext(),rn=(nn.Consumer,t.createContext()),on=(rn.Consumer,new Ht),an=tn();function sn(){return(0,t.useContext)(nn)||on}function ln(){return(0,t.useContext)(rn)||an}function cn(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=sn(),a=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return tn({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){lt()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(nn.Provider,{value:a},t.createElement(rn.Provider,{value:s},e.children))}var un=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=an);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return Et(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=an),this.name+e.hash},e}(),hn=/([A-Z])/,dn=/([A-Z])/g,pn=/^ms-/,mn=function(e){return"-"+e.toLowerCase()};function fn(e){return hn.test(e)?e.replace(dn,mn).replace(pn,"-ms-"):e}var gn=function(e){return null==e||!1===e||""===e};function vn(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)""!==(i=vn(e[a],t,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return gn(e)?"":bt(e)?"."+e.styledComponentId:_t(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:vn(e(t),t,n,r):e instanceof un?n?(e.inject(n,r),e.getName(r)):e:gt(e)?function e(t,n){var r,i,o=[];for(var a in t)t.hasOwnProperty(a)&&!gn(t[a])&&(Array.isArray(t[a])&&t[a].isCss||_t(t[a])?o.push(fn(a)+":",t[a],";"):gt(t[a])?o.push.apply(o,e(t[a],a)):o.push(fn(a)+": "+(r=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in ut.Z?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var l}var yn=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function _n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _t(e)||gt(e)?yn(vn(ft(vt,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:yn(vn(ft(e,n)))}new Set;var xn=function(e,t,n){return void 0===n&&(n=yt),e.theme!==n.theme&&e.theme||t||n.theme},bn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,wn=/(^-|-$)/g;function Sn(e){return e.replace(bn,"-").replace(wn,"")}var Mn=function(e){return Zt(Xt(e)>>>0)};function En(e){return"string"==typeof e&&!0}var Tn=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Cn=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function An(e,t,n){var r=e[n];Tn(t)&&Tn(r)?Pn(r,t):e[n]=t}function Pn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(Tn(a))for(var s in a)Cn(s)&&An(e,a[s],s)}return e}var On=t.createContext();On.Consumer;var Rn={};function Ln(e,n,r){var i=bt(e),o=!En(e),a=n.attrs,s=void 0===a?vt:a,l=n.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Sn(e);Rn[n]=(Rn[n]||0)+1;var r=n+"-"+Mn("5.3.3"+n+Rn[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):l,u=n.displayName,h=void 0===u?function(e){return En(e)?"styled."+e:"Styled("+xt(e)+")"}(e):u,d=n.displayName&&n.componentId?Sn(n.displayName)+"-"+n.componentId:n.componentId||c,p=i&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,m=n.shouldForwardProp;i&&e.shouldForwardProp&&(m=n.shouldForwardProp?function(t,r,i){return e.shouldForwardProp(t,r,i)&&n.shouldForwardProp(t,r,i)}:e.shouldForwardProp);var f,g=new Qt(r,d,i?e.componentStyle:void 0),v=g.isStatic&&0===s.length,y=function(e,n){return function(e,n,r,i){var o=e.attrs,a=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,u=e.styledComponentId,h=e.target,d=function(e,t,n){void 0===e&&(e=yt);var r=mt({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,o,a=e;for(t in _t(a)&&(a=a(r)),a)r[t]=i[t]="className"===t?(n=i[t],o=a[t],n&&o?n+" "+o:n||o):a[t]})),[r,i]}(xn(n,(0,t.useContext)(On),s)||yt,n,o),p=d[0],m=d[1],f=function(e,t,n,r){var i=sn(),o=ln();return t?e.generateAndInjectStyles(yt,i,o):e.generateAndInjectStyles(n,i,o)}(a,i,p),g=r,v=m.$as||n.$as||m.as||n.as||h,y=En(v),_=m!==n?mt({},n,{},m):n,x={};for(var b in _)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?x.as=_[b]:(c?c(b,pt,v):!y||pt(b))&&(x[b]=_[b]));return n.style&&m.style!==n.style&&(x.style=mt({},n.style,{},m.style)),x.className=Array.prototype.concat(l,u,f!==u?f:null,n.className,m.className).filter(Boolean).join(" "),x.ref=g,(0,t.createElement)(v,x)}(f,e,n,v)};return y.displayName=h,(f=t.forwardRef(y)).attrs=p,f.componentStyle=g,f.displayName=h,f.shouldForwardProp=m,f.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):vt,f.styledComponentId=d,f.target=i?e.target:e,f.withComponent=function(e){var t=n.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["componentId"]),o=t&&t+"-"+(En(e)?e:Sn(xt(e)));return Ln(e,mt({},i,{attrs:p,componentId:o}),r)},Object.defineProperty(f,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Pn({},e.defaultProps,t):t}}),f.toString=function(){return"."+f.styledComponentId},o&&Me()(f,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),f}var Dn=function(e){return function e(t,n,r){if(void 0===r&&(r=yt),!(0,at.isValidElementType)(n))return Et(1,String(n));var i=function(){return t(n,r,_n.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,mt({},r,{},i))},i.attrs=function(i){return e(t,n,mt({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Ln,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Dn[e]=Dn(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Kt(e),Ht.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(vn(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Ht.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Nt();return"<style "+[n&&'nonce="'+n+'"',wt+'="true"','data-styled-version="5.3.3"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?Et(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return Et(2);var r=((n={})[wt]="",n["data-styled-version"]="5.3.3",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=Nt();return i&&(r.nonce=i),[t.createElement("style",mt({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Ht({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?Et(2):t.createElement(cn,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return Et(3)}}();const kn=Dn,In=kn.div`
  position: fixed;
  top: 5px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1;
`,Fn=kn(ot)`
  color: black !important;
  background-color: #c2fadb !important;
  background-image: linear-gradient(315deg, #6daddb 0%, #c2fadb 74%) !important;
  height: 55px;
  width: 55px;
`;const Nn=function(e){return"string"===typeof e};function zn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Nn(e)?t:(0,ne.Z)({},t,{ownerState:(0,ne.Z)({},t.ownerState,n)})}var Un=n(30418),jn=n(99691);function Bn(){return(0,Un.Z)(jn.Z)}const Vn=!1;var Gn="unmounted",Hn="exited",Wn="entering",qn="entered",Zn="exiting",$n=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Hn,r.appearStatus=Wn):i=qn:i=t.unmountOnExit||t.mountOnEnter?Gn:Hn,r.state={status:i},r.nextCallback=null,r}me(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Gn?{status:Hn}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Wn&&n!==qn&&(t=Wn):n!==Wn&&n!==qn||(t=Zn)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Wn?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Hn&&this.setState({status:Gn})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,o=this.props.nodeRef?[i]:[r.findDOMNode(this),i],a=o[0],s=o[1],l=this.getTimeouts(),c=i?l.appear:l.enter;!e&&!n||Vn?this.safeSetState({status:qn},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,s),this.safeSetState({status:Wn},(function(){t.props.onEntering(a,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:qn},(function(){t.props.onEntered(a,s)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!Vn?(this.props.onExit(i),this.safeSetState({status:Zn},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Hn},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:Hn},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],s=o[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===Gn)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,te.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(fe.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function Xn(){}$n.contextType=fe,$n.propTypes={},$n.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xn,onEntering:Xn,onEntered:Xn,onExit:Xn,onExiting:Xn,onExited:Xn},$n.UNMOUNTED=Gn,$n.EXITED=Hn,$n.ENTERING=Wn,$n.ENTERED=qn,$n.EXITING=Zn;const Kn=$n,Yn=e=>e.scrollTop;function Qn(e,t){var n,r;const{timeout:i,easing:o,style:a={}}=e;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=a.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:a.transitionDelay}}const Jn=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function er(e){return`scale(${e}, ${e**2})`}const tr={entering:{opacity:1,transform:er(1)},entered:{opacity:1,transform:"none"}},nr=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:p,style:m,timeout:f="auto",TransitionComponent:g=Kn}=e,v=(0,te.Z)(e,Jn),y=t.useRef(),_=t.useRef(),x=Bn(),b=t.useRef(null),w=(0,ue.Z)(o.ref,n),S=(0,ue.Z)(b,w),M=e=>t=>{if(e){const n=b.current;void 0===t?e(n):e(n,t)}},E=M(u),T=M(((e,t)=>{Yn(e);const{duration:n,delay:r,easing:i}=Qn({style:m,timeout:f,easing:a},{mode:"enter"});let o;"auto"===f?(o=x.transitions.getAutoHeightDuration(e.clientHeight),_.current=o):o=n,e.style.transition=[x.transitions.create("opacity",{duration:o,delay:r}),x.transitions.create("transform",{duration:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),C=M(c),A=M(p),P=M((e=>{const{duration:t,delay:n,easing:r}=Qn({style:m,timeout:f,easing:a},{mode:"exit"});let i;"auto"===f?(i=x.transitions.getAutoHeightDuration(e.clientHeight),_.current=i):i=t,e.style.transition=[x.transitions.create("opacity",{duration:i,delay:n}),x.transitions.create("transform",{duration:.666*i,delay:n||.333*i,easing:r})].join(","),e.style.opacity="0",e.style.transform=er(.75),h&&h(e)})),O=M(d);return t.useEffect((()=>()=>{clearTimeout(y.current)}),[]),(0,X.jsx)(g,(0,ne.Z)({appear:i,in:s,nodeRef:b,onEnter:T,onEntered:C,onEntering:E,onExit:P,onExited:O,onExiting:A,addEndListener:e=>{"auto"===f&&(y.current=setTimeout(e,_.current||0)),r&&r(b.current,e)},timeout:"auto"===f?null:f},v,{children:(e,n)=>t.cloneElement(o,(0,ne.Z)({style:(0,ne.Z)({opacity:0,transform:er(.75),visibility:"exited"!==e||s?void 0:"hidden"},tr[e],m,o.props.style),ref:S},n))}))}));nr.muiSupportAuto=!0;const rr=nr;var ir=n(47563),or=n(75721),ar=n(99723);function sr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function lr(e){return e instanceof sr(e).Element||e instanceof Element}function cr(e){return e instanceof sr(e).HTMLElement||e instanceof HTMLElement}function ur(e){return"undefined"!==typeof ShadowRoot&&(e instanceof sr(e).ShadowRoot||e instanceof ShadowRoot)}var hr=Math.max,dr=Math.min,pr=Math.round;function mr(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(cr(e)&&t){var o=e.offsetHeight,a=e.offsetWidth;a>0&&(r=pr(n.width)/a||1),o>0&&(i=pr(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function fr(e){var t=sr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function gr(e){return e?(e.nodeName||"").toLowerCase():null}function vr(e){return((lr(e)?e.ownerDocument:e.document)||window.document).documentElement}function yr(e){return mr(vr(e)).left+fr(e).scrollLeft}function _r(e){return sr(e).getComputedStyle(e)}function xr(e){var t=_r(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function br(e,t,n){void 0===n&&(n=!1);var r=cr(t),i=cr(t)&&function(e){var t=e.getBoundingClientRect(),n=pr(t.width)/e.offsetWidth||1,r=pr(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=vr(t),a=mr(e,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==gr(t)||xr(o))&&(s=function(e){return e!==sr(e)&&cr(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:fr(e);var t}(t)),cr(t)?((l=mr(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=yr(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function wr(e){var t=mr(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Sr(e){return"html"===gr(e)?e:e.assignedSlot||e.parentNode||(ur(e)?e.host:null)||vr(e)}function Mr(e){return["html","body","#document"].indexOf(gr(e))>=0?e.ownerDocument.body:cr(e)&&xr(e)?e:Mr(Sr(e))}function Er(e,t){var n;void 0===t&&(t=[]);var r=Mr(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=sr(r),a=i?[o].concat(o.visualViewport||[],xr(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(Er(Sr(a)))}function Tr(e){return["table","td","th"].indexOf(gr(e))>=0}function Cr(e){return cr(e)&&"fixed"!==_r(e).position?e.offsetParent:null}function Ar(e){for(var t=sr(e),n=Cr(e);n&&Tr(n)&&"static"===_r(n).position;)n=Cr(n);return n&&("html"===gr(n)||"body"===gr(n)&&"static"===_r(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&cr(e)&&"fixed"===_r(e).position)return null;for(var n=Sr(e);cr(n)&&["html","body"].indexOf(gr(n))<0;){var r=_r(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Pr="top",Or="bottom",Rr="right",Lr="left",Dr="auto",kr=[Pr,Or,Rr,Lr],Ir="start",Fr="end",Nr="viewport",zr="popper",Ur=kr.reduce((function(e,t){return e.concat([t+"-"+Ir,t+"-"+Fr])}),[]),jr=[].concat(kr,[Dr]).reduce((function(e,t){return e.concat([t,t+"-"+Ir,t+"-"+Fr])}),[]),Br=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Vr(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Gr(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Hr={placement:"bottom",modifiers:[],strategy:"absolute"};function Wr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function qr(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Hr:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Hr,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:lr(e)?Er(e):e.contextElement?Er(e.contextElement):[],popper:Er(t)};var u=function(e){var t=Vr(e);return Br.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(Wr(t,n)){i.rects={reference:br(t,Ar(n),"fixed"===i.options.strategy),popper:wr(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof a&&(i=a({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:Gr((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!Wr(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Zr={passive:!0};function $r(e){return e.split("-")[0]}function Xr(e){return e.split("-")[1]}function Kr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Yr(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?$r(i):null,a=i?Xr(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case Pr:t={x:s,y:n.y-r.height};break;case Or:t={x:s,y:n.y+n.height};break;case Rr:t={x:n.x+n.width,y:l};break;case Lr:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?Kr(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ir:t[c]=t[c]-(n[u]/2-r[u]/2);break;case Fr:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var Qr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jr(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=a.x,p=void 0===d?0:d,m=a.y,f=void 0===m?0:m,g="function"===typeof u?u({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),_=Lr,x=Pr,b=window;if(c){var w=Ar(n),S="clientHeight",M="clientWidth";if(w===sr(n)&&"static"!==_r(w=vr(n)).position&&"absolute"===s&&(S="scrollHeight",M="scrollWidth"),w=w,i===Pr||(i===Lr||i===Rr)&&o===Fr)x=Or,f-=(h&&b.visualViewport?b.visualViewport.height:w[S])-r.height,f*=l?1:-1;if(i===Lr||(i===Pr||i===Or)&&o===Fr)_=Rr,p-=(h&&b.visualViewport?b.visualViewport.width:w[M])-r.width,p*=l?1:-1}var E,T=Object.assign({position:s},c&&Qr),C=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:pr(t*r)/r||0,y:pr(n*r)/r||0}}({x:p,y:f}):{x:p,y:f};return p=C.x,f=C.y,l?Object.assign({},T,((E={})[x]=y?"0":"",E[_]=v?"0":"",E.transform=(b.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",E)):Object.assign({},T,((t={})[x]=y?f+"px":"",t[_]=v?p+"px":"",t.transform="",t))}const ei={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];cr(i)&&gr(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});cr(r)&&gr(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};const ti={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=jr.reduce((function(e,n){return e[n]=function(e,t,n){var r=$r(e),i=[Lr,Pr].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[Lr,Rr].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};var ni={left:"right",right:"left",bottom:"top",top:"bottom"};function ri(e){return e.replace(/left|right|bottom|top/g,(function(e){return ni[e]}))}var ii={start:"end",end:"start"};function oi(e){return e.replace(/start|end/g,(function(e){return ii[e]}))}function ai(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&ur(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function si(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function li(e,t){return t===Nr?si(function(e){var t=sr(e),n=vr(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+yr(e),y:s}}(e)):lr(t)?function(e){var t=mr(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):si(function(e){var t,n=vr(e),r=fr(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=hr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=hr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+yr(e),l=-r.scrollTop;return"rtl"===_r(i||n).direction&&(s+=hr(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(vr(e)))}function ci(e,t,n){var r="clippingParents"===t?function(e){var t=Er(Sr(e)),n=["absolute","fixed"].indexOf(_r(e).position)>=0&&cr(e)?Ar(e):e;return lr(n)?t.filter((function(e){return lr(e)&&ai(e,n)&&"body"!==gr(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=li(e,n);return t.top=hr(r.top,t.top),t.right=dr(r.right,t.right),t.bottom=dr(r.bottom,t.bottom),t.left=hr(r.left,t.left),t}),li(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ui(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function hi(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function di(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,l=void 0===s?Nr:s,c=n.elementContext,u=void 0===c?zr:c,h=n.altBoundary,d=void 0!==h&&h,p=n.padding,m=void 0===p?0:p,f=ui("number"!==typeof m?m:hi(m,kr)),g=u===zr?"reference":zr,v=e.rects.popper,y=e.elements[d?g:u],_=ci(lr(y)?y:y.contextElement||vr(e.elements.popper),a,l),x=mr(e.elements.reference),b=Yr({reference:x,element:v,strategy:"absolute",placement:i}),w=si(Object.assign({},v,b)),S=u===zr?w:x,M={top:_.top-S.top+f.top,bottom:S.bottom-_.bottom+f.bottom,left:_.left-S.left+f.left,right:S.right-_.right+f.right},E=e.modifiersData.offset;if(u===zr&&E){var T=E[i];Object.keys(M).forEach((function(e){var t=[Rr,Or].indexOf(e)>=0?1:-1,n=[Pr,Or].indexOf(e)>=0?"y":"x";M[e]+=T[n]*t}))}return M}const pi={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=t.options.placement,v=$r(g),y=l||(v===g||!m?[ri(g)]:function(e){if($r(e)===Dr)return[];var t=ri(e);return[oi(e),t,oi(t)]}(g)),_=[g].concat(y).reduce((function(e,n){return e.concat($r(n)===Dr?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?jr:l,u=Xr(r),h=u?s?Ur:Ur.filter((function(e){return Xr(e)===u})):kr,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var p=d.reduce((function(t,n){return t[n]=di(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[$r(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),x=t.rects.reference,b=t.rects.popper,w=new Map,S=!0,M=_[0],E=0;E<_.length;E++){var T=_[E],C=$r(T),A=Xr(T)===Ir,P=[Pr,Or].indexOf(C)>=0,O=P?"width":"height",R=di(t,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),L=P?A?Rr:Lr:A?Or:Pr;x[O]>b[O]&&(L=ri(L));var D=ri(L),k=[];if(o&&k.push(R[C]<=0),s&&k.push(R[L]<=0,R[D]<=0),k.every((function(e){return e}))){M=T,S=!1;break}w.set(T,k)}if(S)for(var I=function(e){var t=_.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return M=t,"break"},F=m?3:1;F>0;F--){if("break"===I(F))break}t.placement!==M&&(t.modifiersData[r]._skip=!0,t.placement=M,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function mi(e,t,n){return hr(e,dr(t,n))}const fi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,m=n.tetherOffset,f=void 0===m?0:m,g=di(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=$r(t.placement),y=Xr(t.placement),_=!y,x=Kr(v),b="x"===x?"y":"x",w=t.modifiersData.popperOffsets,S=t.rects.reference,M=t.rects.popper,E="function"===typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,T="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(w){if(o){var P,O="y"===x?Pr:Lr,R="y"===x?Or:Rr,L="y"===x?"height":"width",D=w[x],k=D+g[O],I=D-g[R],F=p?-M[L]/2:0,N=y===Ir?S[L]:M[L],z=y===Ir?-M[L]:-S[L],U=t.elements.arrow,j=p&&U?wr(U):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=B[O],G=B[R],H=mi(0,S[L],j[L]),W=_?S[L]/2-F-H-V-T.mainAxis:N-H-V-T.mainAxis,q=_?-S[L]/2+F+H+G+T.mainAxis:z+H+G+T.mainAxis,Z=t.elements.arrow&&Ar(t.elements.arrow),$=Z?"y"===x?Z.clientTop||0:Z.clientLeft||0:0,X=null!=(P=null==C?void 0:C[x])?P:0,K=D+q-X,Y=mi(p?dr(k,D+W-X-$):k,D,p?hr(I,K):I);w[x]=Y,A[x]=Y-D}if(s){var Q,J="x"===x?Pr:Lr,ee="x"===x?Or:Rr,te=w[b],ne="y"===b?"height":"width",re=te+g[J],ie=te-g[ee],oe=-1!==[Pr,Lr].indexOf(v),ae=null!=(Q=null==C?void 0:C[b])?Q:0,se=oe?re:te-S[ne]-M[ne]-ae+T.altAxis,le=oe?te+S[ne]+M[ne]-ae-T.altAxis:ie,ce=p&&oe?function(e,t,n){var r=mi(e,t,n);return r>n?n:r}(se,te,le):mi(p?se:re,te,p?le:ie);w[b]=ce,A[b]=ce-te}t.modifiersData[r]=A}},requiresIfExists:["offset"]};const gi={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=$r(n.placement),l=Kr(s),c=[Lr,Rr].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(e,t){return ui("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:hi(e,kr))}(i.padding,n),h=wr(o),d="y"===l?Pr:Lr,p="y"===l?Or:Rr,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],f=a[l]-n.rects.reference[l],g=Ar(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=m/2-f/2,_=u[d],x=v-h[c]-u[p],b=v/2-h[c]/2+y,w=mi(_,b,x),S=l;n.modifiersData[r]=((t={})[S]=w,t.centerOffset=w-b,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&ai(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vi(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function yi(e){return[Pr,Rr,Or,Lr].some((function(t){return e[t]>=0}))}var _i=qr({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=sr(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,Zr)})),s&&l.addEventListener("resize",n.update,Zr),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Zr)})),s&&l.removeEventListener("resize",n.update,Zr)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Yr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:$r(t.placement),variation:Xr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Jr(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Jr(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},ei,ti,pi,fi,gi,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=di(t,{elementContext:"reference"}),s=di(t,{altBoundary:!0}),l=vi(a,r),c=vi(s,i,o),u=yi(l),h=yi(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),xi=n(62971);const bi=t.forwardRef((function(e,n){const{children:i,container:o,disablePortal:a=!1}=e,[s,l]=t.useState(null),c=(0,ir.Z)(t.isValidElement(i)?i.ref:null,n);return(0,or.Z)((()=>{a||l(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,a]),(0,or.Z)((()=>{if(s&&!a)return(0,xi.Z)(n,s),()=>{(0,xi.Z)(n,null)}}),[n,s,a]),a?t.isValidElement(i)?t.cloneElement(i,{ref:c}):i:s?r.createPortal(i,s):s})),wi=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","TransitionProps"],Si=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function Mi(e){return"function"===typeof e?e():e}const Ei={},Ti=t.forwardRef((function(e,n){const{anchorEl:r,children:i,direction:o,disablePortal:a,modifiers:s,open:l,placement:c,popperOptions:u,popperRef:h,TransitionProps:d}=e,p=(0,te.Z)(e,wi),m=t.useRef(null),f=(0,ir.Z)(m,n),g=t.useRef(null),v=(0,ir.Z)(g,h),y=t.useRef(v);(0,or.Z)((()=>{y.current=v}),[v]),t.useImperativeHandle(h,(()=>g.current),[]);const _=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(c,o),[x,b]=t.useState(_);t.useEffect((()=>{g.current&&g.current.forceUpdate()})),(0,or.Z)((()=>{if(!r||!l)return;Mi(r);let e=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;b(t.placement)}}];null!=s&&(e=e.concat(s)),u&&null!=u.modifiers&&(e=e.concat(u.modifiers));const t=_i(Mi(r),m.current,(0,ne.Z)({placement:_},u,{modifiers:e}));return y.current(t),()=>{t.destroy(),y.current(null)}}),[r,a,s,l,u,_]);const w={placement:x};return null!==d&&(w.TransitionProps=d),(0,X.jsx)("div",(0,ne.Z)({ref:f,role:"tooltip"},p,{children:"function"===typeof i?i(w):i}))})),Ci=t.forwardRef((function(e,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:h="bottom",popperOptions:d=Ei,popperRef:p,style:m,transition:f=!1}=e,g=(0,te.Z)(e,Si),[v,y]=t.useState(!0);if(!l&&!u&&(!f||v))return null;const _=o||(r?(0,ar.Z)(Mi(r)).body:void 0);return(0,X.jsx)(bi,{disablePortal:s,container:_,children:(0,X.jsx)(Ti,(0,ne.Z)({anchorEl:r,direction:a,disablePortal:s,modifiers:c,ref:n,open:f?!v:u,placement:h,popperOptions:d,popperRef:p},g,{style:(0,ne.Z)({position:"fixed",top:0,left:0,display:u||!l||f&&!v?null:"none"},m),TransitionProps:f?{in:u,onEnter:()=>{y(!1)},onExited:()=>{y(!0)}}:null,children:i}))})}));var Ai=n(27301);const Pi=t.forwardRef((function(e,t){const n=(0,Ai.Z)();return(0,X.jsx)(Ci,(0,ne.Z)({direction:null==n?void 0:n.direction},e,{ref:t}))})),Oi=Pi;var Ri=n(67384),Li=n(98278);function Di(e){return(0,Ze.Z)("MuiTooltip",e)}const ki=(0,Le.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ii=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function Fi(e){return Math.round(1e5*e)/1e5}const Ni=(0,le.ZP)(Oi,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,ne.Z)({zIndex:t.zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{[`&[data-popper-placement*="bottom"] .${ki.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ki.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ki.arrow}`]:(0,ne.Z)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${ki.arrow}`]:(0,ne.Z)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),zi=(0,le.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,Je.Z)(n.placement.split("-")[0])}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({backgroundColor:(0,se.Fq)(t.palette.grey[700],.92),borderRadius:t.shape.borderRadius,color:t.palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Fi(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${ki.popper}[data-popper-placement*="left"] &`]:(0,ne.Z)({transformOrigin:"right center"},n.isRtl?(0,ne.Z)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,ne.Z)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[`.${ki.popper}[data-popper-placement*="right"] &`]:(0,ne.Z)({transformOrigin:"left center"},n.isRtl?(0,ne.Z)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,ne.Z)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[`.${ki.popper}[data-popper-placement*="top"] &`]:(0,ne.Z)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[`.${ki.popper}[data-popper-placement*="bottom"] &`]:(0,ne.Z)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})})})),Ui=(0,le.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,se.Fq)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let ji=!1,Bi=null;function Vi(e,t){return n=>{t&&t(n),e(n)}}const Gi=t.forwardRef((function(e,n){var r,i,o,a,s,l;const c=(0,ce.Z)({props:e,name:"MuiTooltip"}),{arrow:u=!1,children:h,components:d={},componentsProps:p={},describeChild:m=!1,disableFocusListener:f=!1,disableHoverListener:g=!1,disableInteractive:v=!1,disableTouchListener:y=!1,enterDelay:_=100,enterNextDelay:x=0,enterTouchDelay:b=700,followCursor:w=!1,id:S,leaveDelay:M=0,leaveTouchDelay:E=1500,onClose:T,onOpen:C,open:A,placement:P="bottom",PopperComponent:O,PopperProps:R={},title:L,TransitionComponent:D=rr,TransitionProps:k}=c,I=(0,te.Z)(c,Ii),F=Bn(),N="rtl"===F.direction,[z,U]=t.useState(),[j,B]=t.useState(null),V=t.useRef(!1),G=v||w,H=t.useRef(),W=t.useRef(),q=t.useRef(),Z=t.useRef(),[$,K]=(0,Li.Z)({controlled:A,default:!1,name:"Tooltip",state:"open"});let Y=$;const Q=(0,Ri.Z)(S),J=t.useRef(),ee=t.useCallback((()=>{void 0!==J.current&&(document.body.style.WebkitUserSelect=J.current,J.current=void 0),clearTimeout(Z.current)}),[]);t.useEffect((()=>()=>{clearTimeout(H.current),clearTimeout(W.current),clearTimeout(q.current),ee()}),[ee]);const re=e=>{clearTimeout(Bi),ji=!0,K(!0),C&&!Y&&C(e)},ie=(0,he.Z)((e=>{clearTimeout(Bi),Bi=setTimeout((()=>{ji=!1}),800+M),K(!1),T&&Y&&T(e),clearTimeout(H.current),H.current=setTimeout((()=>{V.current=!1}),F.transitions.duration.shortest)})),se=e=>{V.current&&"touchstart"!==e.type||(z&&z.removeAttribute("title"),clearTimeout(W.current),clearTimeout(q.current),_||ji&&x?W.current=setTimeout((()=>{re(e)}),ji?x:_):re(e))},le=e=>{clearTimeout(W.current),clearTimeout(q.current),q.current=setTimeout((()=>{ie(e)}),M)},{isFocusVisibleRef:pe,onBlur:me,onFocus:fe,ref:ge}=(0,de.Z)(),[,ve]=t.useState(!1),ye=e=>{me(e),!1===pe.current&&(ve(!1),le(e))},_e=e=>{z||U(e.currentTarget),fe(e),!0===pe.current&&(ve(!0),se(e))},xe=e=>{V.current=!0;const t=h.props;t.onTouchStart&&t.onTouchStart(e)},be=se,we=le,Se=e=>{xe(e),clearTimeout(q.current),clearTimeout(H.current),ee(),J.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Z.current=setTimeout((()=>{document.body.style.WebkitUserSelect=J.current,se(e)}),b)},Me=e=>{h.props.onTouchEnd&&h.props.onTouchEnd(e),ee(),clearTimeout(q.current),q.current=setTimeout((()=>{ie(e)}),E)};t.useEffect((()=>{if(Y)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ie(e)}}),[ie,Y]);const Ee=(0,ue.Z)(U,n),Te=(0,ue.Z)(ge,Ee),Ce=(0,ue.Z)(h.ref,Te);""===L&&(Y=!1);const Ae=t.useRef({x:0,y:0}),Pe=t.useRef(),Oe={},Re="string"===typeof L;m?(Oe.title=Y||!Re||g?null:L,Oe["aria-describedby"]=Y?Q:null):(Oe["aria-label"]=Re?L:null,Oe["aria-labelledby"]=Y&&!Re?Q:null);const Le=(0,ne.Z)({},Oe,I,h.props,{className:(0,oe.Z)(I.className,h.props.className),onTouchStart:xe,ref:Ce},w?{onMouseMove:e=>{const t=h.props;t.onMouseMove&&t.onMouseMove(e),Ae.current={x:e.clientX,y:e.clientY},Pe.current&&Pe.current.update()}}:{});const De={};y||(Le.onTouchStart=Se,Le.onTouchEnd=Me),g||(Le.onMouseOver=Vi(be,Le.onMouseOver),Le.onMouseLeave=Vi(we,Le.onMouseLeave),G||(De.onMouseOver=be,De.onMouseLeave=we)),f||(Le.onFocus=Vi(_e,Le.onFocus),Le.onBlur=Vi(ye,Le.onBlur),G||(De.onFocus=_e,De.onBlur=ye));const ke=t.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(j),options:{element:j,padding:4}}];return null!=(e=R.popperOptions)&&e.modifiers&&(t=t.concat(R.popperOptions.modifiers)),(0,ne.Z)({},R.popperOptions,{modifiers:t})}),[j,R]),Ie=(0,ne.Z)({},c,{isRtl:N,arrow:u,disableInteractive:G,placement:P,PopperComponentProp:O,touch:V.current}),Fe=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${(0,Je.Z)(o.split("-")[0])}`],arrow:["arrow"]};return(0,ae.Z)(a,Di,t)})(Ie),Ne=null!=(r=d.Popper)?r:Ni,ze=null!=(i=null!=(o=d.Transition)?o:D)?i:rr,Ue=null!=(a=d.Tooltip)?a:zi,je=null!=(s=d.Arrow)?s:Ui,Be=zn(Ne,(0,ne.Z)({},R,p.popper),Ie),Ve=zn(ze,(0,ne.Z)({},k,p.transition),Ie),Ge=zn(Ue,(0,ne.Z)({},p.tooltip),Ie),He=zn(je,(0,ne.Z)({},p.arrow),Ie);return(0,X.jsxs)(t.Fragment,{children:[t.cloneElement(h,Le),(0,X.jsx)(Ne,(0,ne.Z)({as:null!=O?O:Oi,placement:P,anchorEl:w?{getBoundingClientRect:()=>({top:Ae.current.y,left:Ae.current.x,right:Ae.current.x,bottom:Ae.current.y,width:0,height:0})}:z,popperRef:Pe,open:!!z&&Y,id:Q,transition:!0},De,Be,{className:(0,oe.Z)(Fe.popper,null==R?void 0:R.className,null==(l=p.popper)?void 0:l.className),popperOptions:ke,children:e=>{let{TransitionProps:t}=e;var n,r;return(0,X.jsx)(ze,(0,ne.Z)({timeout:F.transitions.duration.shorter},t,Ve,{children:(0,X.jsxs)(Ue,(0,ne.Z)({},Ge,{className:(0,oe.Z)(Fe.tooltip,null==(n=p.tooltip)?void 0:n.className),children:[L,u?(0,X.jsx)(je,(0,ne.Z)({},He,{className:(0,oe.Z)(Fe.arrow,null==(r=p.arrow)?void 0:r.className),ref:B})):null]}))}))}}))]})})),Hi=Gi;function Wi(e){let{mode:t,setMode:n}=e;return(0,X.jsx)(In,{children:(0,X.jsx)(Hi,{title:(()=>{switch(t){case qE.Map:return"Switch to chart view";case qE.Charts:return"Switch to map view";default:return""}})(),children:(0,X.jsx)(Fn,{onClick:()=>{n((e=>e===qE.Map?qE.Charts:qE.Map))},children:{[qE.Map]:(0,X.jsx)(ee.Z,{}),[qE.Charts]:(0,X.jsx)(J.Z,{})}[t]})})})}const qi=kn.div`
  position: relative;
  box-sizing: border-box;
  height: 100vh;
  width: 100vw;
  overflow: auto;
  background-color: #4c4177;
  background-image: linear-gradient(
    315deg,
    hsl(252, 35%, 20%) 0%,
    hsl(204, 45%, 15%) 60%
  );
  padding-top: 75px;
  display: flex;
  justify-content: center;
`,Zi=kn.div`
  height: calc(100vh - 75px);
  width: calc(100vw - 400px);
  overflow: hidden;
  user-select: none;
`,$i=kn.div`
  position: absolute;
  top: 5px;
  left: 55px;
  color: white;
  height: 35px;
  width: 35px;
`,Xi=kn.div`
  position: absolute;
  top: 75px;
  left: 5px;
`,Ki=kn.div`
  display: flex;
  flex-direction: column;
  color: white;
  text-align: center;
  border: 1px solid white;
  border-radius: 10px;
  padding: 15px;
  margin-bottom: 30px;
  width: 165px;
`,Yi=kn.div`
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid
    ${e=>{let{selected:t}=e;return t?"lime":"rgb(200, 200, 200)"}};
  border-radius: 10px;
  margin: 5px 0;
  padding: 5px;
  cursor: pointer;
  &:hover {
    background-color: rgba(200, 200, 200, 0.2);
  }
`,Qi=kn.div`
  margin-bottom: 15px;
  font-weight: 600;
`;function Ji(e){let{mode:t,setMode:n}=e;return(0,X.jsxs)(Ki,{children:[(0,X.jsx)(Qi,{children:"Display Options"}),(0,X.jsx)(Yi,{selected:t===WE.Total,onClick:()=>n(WE.Total),children:"Total"}),(0,X.jsx)(Yi,{selected:t===WE.Categories,onClick:()=>n(WE.Categories),children:"Categories"}),(0,X.jsx)(Yi,{selected:t===WE.Neighbourhoods,onClick:()=>n(WE.Neighbourhoods),children:"Neighbourhoods"})]})}var eo=n(48573),to=n.n(eo),no=n(81694),ro=n.n(no),io=n(17719),oo=n(26181),ao=n.n(oo),so=n(93629),lo=n.n(so),co=n(82066),uo=n.n(co),ho=n(30298),po=n.n(ho),mo=n(26769),fo=n.n(mo),go=function(e){return 0===e?0:e>0?1:-1},vo=function(e){return fo()(e)&&e.indexOf("%")===e.length-1},yo=function(e){return po()(e)&&!uo()(e)},_o=function(e){return yo(e)||fo()(e)},xo=0,bo=function(e){var t=++xo;return"".concat(e||"").concat(t)},wo=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!yo(e)&&!fo()(e))return r;if(vo(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return uo()(n)&&(n=r),i&&n>t&&(n=t),n},So=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Mo=function(e,t){return yo(e)&&yo(t)?function(n){return e+n*(t-e)}:function(){return t}};function Eo(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):ao()(e,t))===n})):null}var To=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]};function Co(){return Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Co.apply(this,arguments)}function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Po(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Po(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Po(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oo=(0,t.forwardRef)((function(e,n){var r=e.aspect,i=e.width,o=void 0===i?"100%":i,a=e.height,s=void 0===a?"100%":a,l=e.minWidth,c=e.minHeight,u=e.maxHeight,h=e.children,d=e.debounce,p=void 0===d?0:d,m=e.id,f=e.className,g=Ao((0,t.useState)({containerWidth:-1,containerHeight:-1}),2),v=g[0],y=g[1],_=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return _}),[_]);var x=Ao((0,t.useState)(!1),2),b=x[0],w=x[1],S=function(){return _.current?{containerWidth:_.current.clientWidth,containerHeight:_.current.clientHeight}:null},M=function(){if(b){var e=S();if(e){var t=v.containerWidth,n=v.containerHeight,r=e.containerWidth,i=e.containerHeight;r===t&&i===n||y({containerWidth:r,containerHeight:i})}}},E=p>0?to()(M,p):M;(0,t.useEffect)((function(){if(b){var e=S();e&&y(e)}}),[b]),(0,t.useEffect)((function(){w(!0)}),[]);var T={width:o,height:s,minWidth:l,minHeight:c,maxHeight:u};return t.createElement(io.ZP,{handleWidth:!0,handleHeight:!0,onResize:E,targetRef:_},t.createElement("div",Co({},null!=m?{id:"".concat(m)}:{},{className:ro()("recharts-responsive-container",f),style:T,ref:_}),function(){var e=v.containerWidth,n=v.containerHeight;if(e<0||n<0)return null;To(vo(o)||vo(s),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,s),To(!r||r>0,"The aspect(%s) must be greater than zero.",r);var i=vo(o)?e:o,a=vo(s)?n:s;return r&&r>0&&(i?a=i/r:a&&(i=a*r),u&&a>u&&(a=u)),To(i>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,a,o,s,l,c,r),(0,t.cloneElement)(h,{width:i,height:a})}()))})),Ro=n(82730),Lo=n.n(Ro),Do=n(61211),ko=n.n(Do),Io=n(74786),Fo=n.n(Io),No=n(33038),zo=n.n(No),Uo=n(64286),jo=n.n(Uo),Bo=n(66222),Vo=n.n(Bo),Go=n(42854),Ho=n.n(Go),Wo=n(65127),qo=n.n(Wo),Zo=n(8092),$o=n.n(Zo);function Xo(e){return Xo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(e)}var Ko=["viewBox","children"],Yo=["className","color","height","id","lang","max","media","method","min","name","style","target","type","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Qo=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Jo=function(e,n,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,t.isValidElement)(e)&&(i=e.props),!$o()(i))return null;var o={};return Object.keys(i).forEach((function(e){(Yo.includes(e)||r&&Ko.includes(e)||n&&Qo.includes(e))&&(o[e]=i[e])})),o},ea=function(e,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,t.isValidElement)(e)&&(r=e.props),!$o()(r))return null;var i={};return Object.keys(r).forEach((function(e){Qo.includes(e)&&(i[e]=n||function(t){return r[e](r,t)})})),i},ta=function(e,t,n){if(!$o()(e)||"object"!==Xo(e))return null;var r=null;return Object.keys(e).forEach((function(i){var o=e[i];Qo.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))})),r};function na(){return na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},na.apply(this,arguments)}function ra(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ia(e){var n=e.children,r=e.width,i=e.height,o=e.viewBox,a=e.className,s=e.style,l=ra(e,["children","width","height","viewBox","className","style"]),c=o||{width:r,height:i,x:0,y:0},u=ro()("recharts-surface",a);return t.createElement("svg",na({},Jo(l,!0,!0),{className:u,width:r,height:i,style:s,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height),version:"1.1"}),n)}function oa(){return oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oa.apply(this,arguments)}function aa(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sa(e){var n=e.children,r=e.className,i=aa(e,["children","className"]),o=ro()("recharts-layer",r);return t.createElement("g",oa({className:o},Jo(i,!0)),n)}var la=n(66339),ca=n.n(la),ua=n(25244),ha=n(55475),da=n.n(ha);function pa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,r=function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):da()(r)};da()(r)}function ma(e){return ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function fa(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ga(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function va(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=fa(r),o=i[0],a=i.slice(1);return"number"===typeof o?void pa(n.bind(null,a),o):(n(o),void pa(n.bind(null,a)))}"object"===ma(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ba=["Webkit","Moz","O","ms"],wa=["-webkit-","-moz-","-o-","-ms-"],Sa=["transform","transformOrigin","transition"],Ma=function(e){return e},Ea=function(e,t){return Object.keys(t).reduce((function(n,r){return _a(_a({},n),{},xa({},r,e(r,t[r])))}),{})},Ta=function(e){return Object.keys(e).reduce((function(e,t){return _a(_a({},e),function(e,t){if(-1===Sa.indexOf(e))return xa({},e,t);var n="transition"===e,r=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),i=t;return ba.reduce((function(e,o,a){return n&&(i=t.replace(/(transform|transform-origin)/gim,"".concat(wa[a],"$1"))),_a(_a({},e),{},xa({},o+r,i))}),{})}(t,e[t]))}),e)},Ca=function(e,t,n){return e.map((function(e){return"".concat(function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())}))}(e)," ").concat(t,"ms ").concat(n)})).join(",")};function Aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pa(e){return function(e){if(Array.isArray(e))return Ra(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oa(e,t){if(e){if("string"===typeof e)return Ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ra(e,t):void 0}}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var La=1e-4,Da=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},ka=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},Ia=function(e,t){return function(n){var r=Da(e,t);return ka(r,n)}},Fa=function(e,t){return function(n){var r=Da(e,t),i=[].concat(Pa(r.map((function(e,t){return e*t})).slice(1)),[0]);return ka(i,n)}},Na=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=Aa(l,4);r=c[0],i=c[1],o=c[2],a=c[3]}}[r,o,i,a].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var u=Ia(r,o),h=Ia(i,a),d=Fa(r,o),p=function(e){return e>1?1:e<0?0:e},m=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=u(n)-t,o=d(n);if(Math.abs(i-t)<La||o<La)return h(n);n=p(n-i/o)}return h(n)};return m.isStepper=!1,m},za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,a=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*i)*a/1e3,s=r*a/1e3+e;return Math.abs(s-t)<La&&Math.abs(o)<La?[t,0]:[s,o]};return s.isStepper=!0,s.dt=a,s};function Ua(e){return function(e){if(Array.isArray(e))return Wa(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ha(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){Va(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Ha(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(e,t){if(e){if("string"===typeof e)return Wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wa(e,t):void 0}}function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qa=function(e,t,n){return e+(t-e)*n},Za=function(e){return e.from!==e.to},$a=function e(t,n,r){var i=Ea((function(e,n){if(Za(n)){var r=Ga(t(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return Ba(Ba({},n),{},{from:i,velocity:o})}return n}),n);return r<1?Ea((function(e,t){return Za(t)?Ba(Ba({},t),{},{velocity:qa(t.velocity,i[e].velocity,r),from:qa(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const Xa=function(e,t,n,r,i){var o,a,s,l,c=(o=e,a=t,[Object.keys(o),Object.keys(a)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(n,r){return Ba(Ba({},n),{},Va({},r,[e[r],t[r]]))}),{}),h=c.reduce((function(n,r){return Ba(Ba({},n),{},Va({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),d=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=$a(n,h,o),i(Ba(Ba(Ba({},e),t),Ea((function(e,t){return t.from}),h))),s=r,Object.values(h).filter(Za).length&&(d=da()(p))}:function(o){l||(l=o);var a=(o-l)/r,s=Ea((function(e,t){return qa.apply(void 0,Ua(t).concat([n(a)]))}),u);if(i(Ba(Ba(Ba({},e),t),s)),a<1)d=da()(p);else{var c=Ea((function(e,t){return qa.apply(void 0,Ua(t).concat([n(1)]))}),u);i(Ba(Ba(Ba({},e),t),c))}},function(){return da()(p),function(){(0,ha.cancel)(d)}}};function Ka(e){return Ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(e)}function Ya(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qa(e){return function(e){if(Array.isArray(e))return Ja(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ja(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ja(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){ns(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function is(e,t){return is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},is(e,t)}function os(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ls(e);if(t){var i=ls(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return as(this,n)}}function as(e,t){return!t||"object"!==Ka(t)&&"function"!==typeof t?ss(e):t}function ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ls(e){return ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ls(e)}var cs=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&is(e,t)}(a,e);var n,r,i,o=os(a);function a(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=(n=o.call(this,e,t)).props,i=r.isActive,s=r.attributeName,l=r.from,c=r.to,u=r.steps,h=r.children;if(n.handleStyleChange=n.handleStyleChange.bind(ss(n)),n.changeStyle=n.changeStyle.bind(ss(n)),!i)return n.state={style:{}},"function"===typeof h&&(n.state={style:c}),as(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof h)return n.state={style:l},as(n);n.state={style:s?ns({},s,l):l}}else n.state={style:{}};return n}return n=a,r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate;if(r)if(n){if(!((0,ua.deepEqual)(e.to,this.props.to)&&e.canBegin&&e.isActive)){var a=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var s=a||o?this.props.from:e.to;if(this.state&&this.state.style){var l={style:i?ns({},i,s):s};(i&&this.state.style[i]!==s||!i&&this.state.style!==s)&&this.setState(l)}this.runAnimation(ts(ts({},this.props),{},{from:s,begin:0}))}}else{var c={style:i?ns({},i,this.props.to):this.props.to};this.state&&this.state.style&&(i&&this.state.style[i]!==this.props.to||!i&&this.state.style!==this.props.to)&&this.setState(c)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,a=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,c=Xa(n,r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Na(r);case"spring":return za();default:if("cubic-bezier"===r.split("(")[0])return Na(r)}return"function"===typeof r?r:null}(o),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=c()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(Qa(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,c=r.properties,u=r.onAnimationEnd,h=i>0?n[i-1]:r,d=c||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(Qa(e),[t.runJSAnimation.bind(t,{from:h.style,to:l,duration:o,easing:s}),o]);var p=Ca(d,o,s),m=ts(ts(ts({},h.style),l),{},{transition:p});return[].concat(Qa(e),[m,o,u]).filter(Ma)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=va());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var h=r?ns({},r,i):i,d=Ca(Object.keys(h),n,o);u.start([a,t,ts(ts({},h),{},{transition:d}),n,s])}else this.runJSAnimation(e)}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"render",value:function(){var e=this.props,n=e.children,r=(e.begin,e.duration,e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,Ya(e,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"])),o=t.Children.count(n),a=Ta(this.state.style);if("function"===typeof n)return n(a);if(!r||0===o)return n;var s=function(e){var n=e.props,r=n.style,o=void 0===r?{}:r,s=n.className;return(0,t.cloneElement)(e,ts(ts({},i),{},{style:ts(ts({},o),a),className:s}))};return 1===o?s(t.Children.only(n)):t.createElement("div",null,t.Children.map(n,(function(e){return s(e)})))}}],r&&rs(n.prototype,r),i&&rs(n,i),a}(t.PureComponent);cs.displayName="Animate",cs.propTypes={from:ie().oneOfType([ie().object,ie().string]),to:ie().oneOfType([ie().object,ie().string]),attributeName:ie().string,duration:ie().number,begin:ie().number,easing:ie().oneOfType([ie().string,ie().func]),steps:ie().arrayOf(ie().shape({duration:ie().number.isRequired,style:ie().object.isRequired,easing:ie().oneOfType([ie().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ie().func]),properties:ie().arrayOf("string"),onAnimationEnd:ie().func})),children:ie().oneOfType([ie().node,ie().func]),isActive:ie().bool,canBegin:ie().bool,onAnimationEnd:ie().func,shouldReAnimate:ie().bool,onAnimationStart:ie().func,onAnimationReStart:ie().func},cs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};const us=cs;var hs=n(25937);function ds(e){return ds="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ds(e)}function ps(){return ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ps.apply(this,arguments)}function ms(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){vs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xs(e,t){return xs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xs(e,t)}function bs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ss(e);if(t){var i=Ss(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ws(this,n)}}function ws(e,t){return!t||"object"!==ds(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ss(e){return Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ss(e)}void 0===Number.isFinite&&(Number.isFinite=function(e){return"number"===typeof e&&isFinite(e)});var Ms=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},Es=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xs(e,t)}(a,e);var n,r,i,o=bs(a);function a(){var e;ys(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={isActive:!1},e.handleEnter=function(t,n){var r=e.props,i=r.appearOptions,o=r.enterOptions;e.handleStyleActive(n?i:o)},e.handleExit=function(){e.handleStyleActive(e.props.leaveOptions)},e}return n=a,(r=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(gs(gs({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return Ms(t)+Ms(n)+Ms(r)}},{key:"render",value:function(){var e=this,n=this.props,r=n.children,i=(n.appearOptions,n.enterOptions,n.leaveOptions,ms(n,["children","appearOptions","enterOptions","leaveOptions"]));return t.createElement(hs.Transition,ps({},i,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return t.createElement(us,e.state,t.Children.only(r))}))}}])&&_s(n.prototype,r),i&&_s(n,i),a}(t.Component);Es.propTypes={appearOptions:ie().object,enterOptions:ie().object,leaveOptions:ie().object,children:ie().element};const Ts=Es;function Cs(e){var n=e.component,r=e.children,i=e.appear,o=e.enter,a=e.leave;return t.createElement(hs.TransitionGroup,{component:n},t.Children.map(r,(function(e,n){return t.createElement(Ts,{appearOptions:i,enterOptions:o,leaveOptions:a,key:"child-".concat(n)},e)})))}Cs.propTypes={appear:ie().object,enter:ie().object,leave:ie().object,children:ie().oneOfType([ie().array,ie().element]),component:ie().any},Cs.defaultProps={component:"span"};const As=us;function Ps(e){return Ps="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(n),!0).forEach((function(t){ks(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Is(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ns(e,t){return Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ns(e,t)}function zs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=js(e);if(t){var i=js(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Us(this,n)}}function Us(e,t){return!t||"object"!==Ps(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function js(e){return js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},js(e)}function Bs(e){return lo()(e)&&_o(e[0])&&_o(e[1])?e.join(" ~ "):e}var Vs=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ns(e,t)}(a,e);var n,r,i,o=zs(a);function a(){return Is(this,a),o.apply(this,arguments)}return n=a,r=[{key:"renderContent",value:function(){var e=this.props,n=e.payload,r=e.separator,i=e.formatter,o=e.itemStyle,a=e.itemSorter;if(n&&n.length){var s=(a?jo()(n,a):n).map((function(e,a){if("none"===e.type)return null;var s=Ds({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),l=e.formatter||i||Bs,c=e.name,u=e.value;if(l){var h=l(u,c,e,a,n);if(Array.isArray(h)){var d=Os(h,2);u=d[0],c=d[1]}else u=h}return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(a),style:s},_o(c)?t.createElement("span",{className:"recharts-tooltip-item-name"},c):null,_o(c)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},u),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},s)}return null}},{key:"render",value:function(){var e=this.props,n=e.wrapperClassName,r=e.contentStyle,i=e.labelClassName,o=e.labelStyle,a=e.label,s=e.labelFormatter,l=e.payload,c=Ds({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),u=Ds({margin:0},o),h=!Ho()(a),d=h?a:"",p=ro()("recharts-default-tooltip",n),m=ro()("recharts-tooltip-label",i);return h&&s&&(d=s(a,l)),t.createElement("div",{className:p,style:c},t.createElement("p",{className:m,style:u},t.isValidElement(d)?d:"".concat(d)),this.renderContent())}}],r&&Fs(n.prototype,r),i&&Fs(n,i),a}(t.PureComponent);Vs.displayName="DefaultTooltipContent",Vs.defaultProps={separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}};var Gs={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return Gs[e]},set:function(e,t){if("string"===typeof e)Gs[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){Gs[t]=e[t]}))}}};function Hs(e){return Hs="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hs(e)}function Ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(n),!0).forEach((function(t){Zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ks(e,t){return Ks=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ks(e,t)}function Ys(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Js(e);if(t){var i=Js(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qs(this,n)}}function Qs(e,t){return!t||"object"!==Hs(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Js(e){return Js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Js(e)}var el="recharts-tooltip-wrapper";function tl(e){return e.dataKey}var nl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ks(e,t)}(a,e);var n,r,i,o=Ys(a);function a(){var e;$s(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={boxWidth:-1,boxHeight:-1},e.wrapperNode=void 0,e.getTranslate=function(t){var n=t.key,r=t.tooltipDimension,i=t.viewBoxDimension,o=e.props,a=o.allowEscapeViewBox,s=o.coordinate,l=o.offset,c=o.position,u=o.viewBox;if(c&&yo(c[n]))return c[n];var h=s[n]-r-l,d=s[n]+l;return a[n]?d:s[n]+r+l>u[n]+i?Math.max(h,u[n]):Math.max(d,u[n])},e}return n=a,(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>1||Math.abs(r.height-n)>1)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e,n,r,i=this,o=this.props,a=o.payload,s=o.isAnimationActive,l=o.animationDuration,c=o.animationEasing,u=o.filterNull,h=function(e,t){return!0===e?ca()(t,tl):Fo()(e)?ca()(t,e):t}(o.payloadUniqBy,u&&a&&a.length?a.filter((function(e){return!Ho()(e.value)})):a),d=h&&h.length,p=this.props,m=p.content,f=p.viewBox,g=p.coordinate,v=p.position,y=p.active,_=qs({pointerEvents:"none",visibility:y&&d?"visible":"hidden",position:"absolute",top:0,left:0},p.wrapperStyle);if(v&&yo(v.x)&&yo(v.y))n=v.x,r=v.y;else{var x=this.state,b=x.boxWidth,w=x.boxHeight;b>0&&w>0&&g?(n=this.getTranslate({key:"x",tooltipDimension:b,viewBoxDimension:f.width}),r=this.getTranslate({key:"y",tooltipDimension:w,viewBoxDimension:f.height})):_.visibility="hidden"}_=qs(qs({},Ta({transform:this.props.useTranslate3d?"translate3d(".concat(n,"px, ").concat(r,"px, 0)"):"translate(".concat(n,"px, ").concat(r,"px)")})),_),s&&y&&(_=qs(qs({},Ta({transition:"transform ".concat(l,"ms ").concat(c)})),_));var S=ro()(el,(Zs(e={},"".concat(el,"-right"),yo(n)&&g&&yo(g.x)&&n>=g.x),Zs(e,"".concat(el,"-left"),yo(n)&&g&&yo(g.x)&&n<g.x),Zs(e,"".concat(el,"-bottom"),yo(r)&&g&&yo(g.y)&&r>=g.y),Zs(e,"".concat(el,"-top"),yo(r)&&g&&yo(g.y)&&r<g.y),e));return t.createElement("div",{className:S,style:_,ref:function(e){i.wrapperNode=e}},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Fo()(e)?t.createElement(e,n):t.createElement(Vs,n)}(m,qs(qs({},this.props),{},{payload:h})))}}])&&Xs(n.prototype,r),i&&Xs(n,i),a}(t.PureComponent);nl.displayName="Tooltip",nl.defaultProps={active:!1,allowEscapeViewBox:{x:!1,y:!1},offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!Gs.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1};var rl=n(52085),il=n.n(rl),ol=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI),al=2*ol;const sl={draw:function(e,t){var n=Math.sqrt(t/ol);e.moveTo(n,0),e.arc(0,0,n,0,al)}},ll={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}};var cl=Math.sqrt(1/3),ul=2*cl;const hl={draw:function(e,t){var n=Math.sqrt(t/ul),r=n*cl;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},dl={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}};var pl=Math.sin(ol/10)/Math.sin(7*ol/10),ml=Math.sin(al/10)*pl,fl=-Math.cos(al/10)*pl;const gl={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=ml*n,i=fl*n;e.moveTo(0,-n),e.lineTo(r,i);for(var o=1;o<5;++o){var a=al*o/5,s=Math.cos(a),l=Math.sin(a);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}};var vl=Math.sqrt(3);const yl={draw:function(e,t){var n=-Math.sqrt(t/(3*vl));e.moveTo(0,2*n),e.lineTo(-vl*n,-n),e.lineTo(vl*n,-n),e.closePath()}};var _l=-.5,xl=Math.sqrt(3)/2,bl=1/Math.sqrt(12),wl=3*(bl/2+1);const Sl={draw:function(e,t){var n=Math.sqrt(t/wl),r=n/2,i=n*bl,o=r,a=n*bl+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(_l*r-xl*i,xl*r+_l*i),e.lineTo(_l*o-xl*a,xl*o+_l*a),e.lineTo(_l*s-xl*l,xl*s+_l*l),e.lineTo(_l*r+xl*i,_l*i-xl*r),e.lineTo(_l*o+xl*a,_l*a-xl*o),e.lineTo(_l*s+xl*l,_l*l-xl*s),e.closePath()}},Ml=Math.PI,El=2*Ml,Tl=1e-6,Cl=El-Tl;function Al(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Pl(){return new Al}Al.prototype=Pl.prototype={constructor:Al,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Tl)if(Math.abs(u*s-l*c)>Tl&&i){var d=n-o,p=r-a,m=s*s+l*l,f=d*d+p*p,g=Math.sqrt(m),v=Math.sqrt(h),y=i*Math.tan((Ml-Math.acos((m+h-f)/(2*g*v)))/2),_=y/v,x=y/g;Math.abs(_-1)>Tl&&(this._+="L"+(e+_*c)+","+(t+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*p)+","+(this._x1=e+x*s)+","+(this._y1=t+x*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Tl||Math.abs(this._y1-c)>Tl)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%El+El),h>Cl?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>Tl&&(this._+="A"+n+","+n+",0,"+ +(h>=Ml)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Ol=Pl;function Rl(e){return function(){return e}}function Ll(e){return Ll="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(e)}function Dl(){return Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dl.apply(this,arguments)}function kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fl(e,t){return Fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fl(e,t)}function Nl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ul(e);if(t){var i=Ul(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zl(this,n)}}function zl(e,t){return!t||"object"!==Ll(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ul(e){return Ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ul(e)}var jl={symbolCircle:sl,symbolCross:ll,symbolDiamond:hl,symbolSquare:dl,symbolStar:gl,symbolTriangle:yl,symbolWye:Sl},Bl=Math.PI/180,Vl=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fl(e,t)}(a,e);var n,r,i,o=Nl(a);function a(){return kl(this,a),o.apply(this,arguments)}return n=a,r=[{key:"getPath",value:function(){var e=this.props,t=e.size,n=e.sizeType,r=e.type,i=function(e){var t="symbol".concat(il()(e));return jl[t]||sl}(r),o=function(e,t){var n=null;function r(){var r;if(n||(n=r=Ol()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:Rl(e||sl),t="function"===typeof t?t:Rl(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:Rl(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(i).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*Bl;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(t,n,r));return o()}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.cx,i=e.cy,o=e.size;return r===+r&&i===+i&&o===+o?t.createElement("path",Dl({},Jo(this.props,!0),{className:ro()("recharts-symbols",n),transform:"translate(".concat(r,", ").concat(i,")"),d:this.getPath()})):null}}],r&&Il(n.prototype,r),i&&Il(n,i),a}(t.PureComponent);function Gl(e){return Gl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(e)}function Hl(){return Hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hl.apply(this,arguments)}function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xl(e,t){return Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xl(e,t)}function Kl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ql(e);if(t){var i=Ql(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}function Yl(e,t){return!t||"object"!==Gl(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ql(e){return Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ql(e)}Vl.defaultProps={type:"circle",size:64,sizeType:"area"},Vl.registerSymbol=function(e,t){jl["symbol".concat(il()(e))]=t};var Jl=32,ec=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(a,e);var n,r,i,o=Kl(a);function a(){return Zl(this,a),o.apply(this,arguments)}return n=a,r=[{key:"renderIcon",value:function(e){var n=this.props.inactiveColor,r=16,i=Jl/6,o=Jl/3,a=e.inactive?n:e.color;if("plainline"===e.type)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:Jl,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(r,"h").concat(o,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,"\n            H").concat(Jl,"M").concat(2*o,",").concat(r,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return t.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(Jl,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){ql(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete s.legendIcon,t.cloneElement(e.legendIcon,s)}return t.createElement(Vl,{fill:a,cx:r,cy:r,size:Jl,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,n=this.props,r=n.payload,i=n.iconSize,o=n.layout,a=n.formatter,s=n.inactiveColor,l={x:0,y:0,width:Jl,height:Jl},c={display:"horizontal"===o?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((function(n,r){var o,h=n.formatter||a,d=ro()((ql(o={"recharts-legend-item":!0},"legend-item-".concat(r),!0),ql(o,"inactive",n.inactive),o));if("none"===n.type)return null;var p=n.inactive?s:n.color;return t.createElement("li",Hl({className:d,style:c,key:"legend-item-".concat(r)},ta(e.props,n,r)),t.createElement(ia,{width:i,height:i,viewBox:l,style:u},e.renderIcon(n)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},h?h(n.value,n,r):n.value))}))}},{key:"render",value:function(){var e=this.props,n=e.payload,r=e.layout,i=e.align;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===r?i:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}],r&&$l(n.prototype,r),i&&$l(n,i),a}(t.PureComponent);function tc(e){return tc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(e)}function nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach((function(t){ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sc(e,t){return sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sc(e,t)}function lc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uc(e);if(t){var i=uc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cc(this,n)}}function cc(e,t){return!t||"object"!==tc(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uc(e){return uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},uc(e)}function hc(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dc(e){return e.value}function pc(e,t){return!0===e?ca()(t,dc):Fo()(e)?ca()(t,e):t}ec.displayName="Legend",ec.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"};var mc=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(a,e);var n,r,i,o=lc(a);function a(){var e;oc(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).wrapperNode=void 0,e.state={boxWidth:-1,boxHeight:-1},e}return n=a,i=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&yo(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;return t>=0&&n>=0?{width:t,height:n}:null}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-(this.getBBoxSnapshot()||{width:0}).width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((c||0)-(this.getBBoxSnapshot()||{height:0}).height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),rc(rc({},t),n)}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight,r=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-t)>1||Math.abs(i.height-n)>1)&&this.setState({boxWidth:i.width,boxHeight:i.height},(function(){r&&r(i)}))}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1},(function(){r&&r(null)}))}},{key:"render",value:function(){var e=this,n=this.props,r=n.content,i=n.width,o=n.height,a=n.wrapperStyle,s=n.payloadUniqBy,l=n.payload,c=rc(rc({position:"absolute",width:i||"auto",height:o||"auto"},this.getDefaultPosition(a)),a);return t.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,n){if(t.isValidElement(e))return t.cloneElement(e,n);if(Fo()(e))return t.createElement(e,n);n.ref;var r=hc(n,["ref"]);return t.createElement(ec,r)}(r,rc(rc({},this.props),{},{payload:pc(s,l)})))}}])&&ac(n.prototype,r),i&&ac(n,i),a}(t.PureComponent);function fc(){}function gc(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function vc(e){this._context=e}function yc(e){this._context=e}function _c(e){this._context=e}function xc(e){this._context=e}function bc(e){this._context=e}function wc(e){return new bc(e)}function Sc(e){return e<0?-1:1}function Mc(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Sc(o)+Sc(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Ec(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Tc(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Cc(e){this._context=e}function Ac(e){this._context=new Pc(e)}function Pc(e){this._context=e}function Oc(e){this._context=e}function Rc(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Lc(e,t){this._context=e,this._t=t}mc.displayName="Legend",mc.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"},vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gc(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yc.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gc(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},_c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gc(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xc.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},bc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tc(this,this._t0,Ec(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Tc(this,Ec(this,n=Mc(this,e,t)),n);break;default:Tc(this,this._t0,n=Mc(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ac.prototype=Object.create(Cc.prototype)).point=function(e,t){Cc.prototype.point.call(this,t,e)},Pc.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Oc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Rc(e),i=Rc(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};Array.prototype.slice;function Dc(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function kc(e){return e[0]}function Ic(e){return e[1]}function Fc(e,t){var n=Rl(!0),r=null,i=wc,o=null;function a(a){var s,l,c,u=(a=Dc(a)).length,h=!1;for(null==r&&(o=i(c=Ol())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(l,s,a),+t(l,s,a));if(c)return o=null,c+""||null}return e="function"===typeof e?e:void 0===e?kc:Rl(e),t="function"===typeof t?t:void 0===t?Ic:Rl(t),a.x=function(t){return arguments.length?(e="function"===typeof t?t:Rl(+t),a):e},a.y=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),a):t},a.defined=function(e){return arguments.length?(n="function"===typeof e?e:Rl(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}function Nc(e,t,n){var r=null,i=Rl(!0),o=null,a=wc,s=null;function l(l){var c,u,h,d,p,m=(l=Dc(l)).length,f=!1,g=new Array(m),v=new Array(m);for(null==o&&(s=a(p=Ol())),c=0;c<=m;++c){if(!(c<m&&i(d=l[c],c,l))===f)if(f=!f)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=u;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}f&&(g[c]=+e(d,c,l),v[c]=+t(d,c,l),s.point(r?+r(d,c,l):g[c],n?+n(d,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return Fc().defined(i).curve(a).context(o)}return e="function"===typeof e?e:void 0===e?kc:Rl(+e),t="function"===typeof t?t:Rl(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Ic:Rl(+n),l.x=function(t){return arguments.length?(e="function"===typeof t?t:Rl(+t),r=null,l):e},l.x0=function(t){return arguments.length?(e="function"===typeof t?t:Rl(+t),l):e},l.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Rl(+e),l):r},l.y=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),n=null,l):t},l.y0=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),l):t},l.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Rl(+e),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(e){return arguments.length?(i="function"===typeof e?e:Rl(!!e),l):i},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l}function zc(e){return zc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(e)}function Uc(){return Uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uc.apply(this,arguments)}function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){Vc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wc(e,t){return Wc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wc(e,t)}function qc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$c(e);if(t){var i=$c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zc(this,n)}}function Zc(e,t){return!t||"object"!==zc(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $c(e){return $c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$c(e)}var Xc={curveBasisClosed:function(e){return new yc(e)},curveBasisOpen:function(e){return new _c(e)},curveBasis:function(e){return new vc(e)},curveLinearClosed:function(e){return new xc(e)},curveLinear:wc,curveMonotoneX:function(e){return new Cc(e)},curveMonotoneY:function(e){return new Ac(e)},curveNatural:function(e){return new Oc(e)},curveStep:function(e){return new Lc(e,.5)},curveStepAfter:function(e){return new Lc(e,1)},curveStepBefore:function(e){return new Lc(e,0)}},Kc=function(e){return e.x===+e.x&&e.y===+e.y},Yc=function(e){return e.x},Qc=function(e){return e.y},Jc=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wc(e,t)}(a,e);var n,r,i,o=qc(a);function a(){return Gc(this,a),o.apply(this,arguments)}return n=a,r=[{key:"getPath",value:function(){var e,t=this.props,n=t.type,r=t.points,i=t.baseLine,o=t.layout,a=t.connectNulls,s=function(e,t){if(Fo()(e))return e;var n="curve".concat(il()(e));return"curveMonotone"===n&&t?Xc["".concat(n).concat("vertical"===t?"Y":"X")]:Xc[n]||wc}(n,o),l=a?r.filter((function(e){return Kc(e)})):r;if(lo()(i)){var c=a?i.filter((function(e){return Kc(e)})):i,u=l.map((function(e,t){return Bc(Bc({},e),{},{base:c[t]})}));return(e="vertical"===o?Nc().y(Qc).x1(Yc).x0((function(e){return e.base.x})):Nc().x(Yc).y1(Qc).y0((function(e){return e.base.y}))).defined(Kc).curve(s),e(u)}return(e="vertical"===o&&yo(i)?Nc().y(Qc).x1(Yc).x0(i):yo(i)?Nc().x(Yc).y1(Qc).y0(i):Fc().x(Yc).y(Qc)).defined(Kc).curve(s),e(l)}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?this.getPath():i;return t.createElement("path",Uc({},Jo(this.props),ea(this.props),{className:ro()("recharts-curve",n),d:a,ref:o}))}}],r&&Hc(n.prototype,r),i&&Hc(n,i),a}(t.PureComponent);function eu(e){return eu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(e)}function tu(){return tu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tu.apply(this,arguments)}function nu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iu(e,t){return iu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},iu(e,t)}function ou(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=su(e);if(t){var i=su(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return au(this,n)}}function au(e,t){return!t||"object"!==eu(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}Jc.defaultProps={type:"linear",points:[],connectNulls:!1};var lu=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iu(e,t)}(a,e);var n,r,i,o=ou(a);function a(){return nu(this,a),o.apply(this,arguments)}return n=a,r=[{key:"render",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,o=e.height,s=e.top,l=e.left,c=e.className;return yo(n)&&yo(r)&&yo(i)&&yo(o)&&yo(s)&&yo(l)?t.createElement("path",tu({},Jo(this.props,!0),{className:ro()("recharts-cross",c),d:a.getPath(n,r,i,o,s,l)})):null}}],i=[{key:"getPath",value:function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)}}],r&&ru(n.prototype,r),i&&ru(n,i),a}(t.PureComponent);function cu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cu(Object(n),!0).forEach((function(t){hu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}lu.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var du=Math.PI/180,pu=function(e){return 180*e/Math.PI},mu=function(e,t,n,r){return{x:e+Math.cos(-du*r)*n,y:t+Math.sin(-du*r)*n}},fu=function(e,t){var n=e.x,r=e.y,i=t.cx,o=t.cy,a=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:pu(l),angleInRadian:l}},gu=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},vu=function(e,t){var n=e.x,r=e.y,i=fu({x:n,y:r},t),o=i.radius,a=i.angle,s=t.innerRadius,l=t.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),h=u.startAngle,d=u.endAngle,p=a;if(h<=d){for(;p>d;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=d}else{for(;p>h;)p-=360;for(;p<d;)p+=360;c=p>=d&&p<=h}return c?uu(uu({},t),{},{radius:o,angle:gu(p,t)}):null};function yu(e){return yu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(e)}function _u(){return _u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(this,arguments)}function xu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wu(e,t){return wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wu(e,t)}function Su(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Eu(e);if(t){var i=Eu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mu(this,n)}}function Mu(e,t){return!t||"object"!==yu(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Eu(e)}var Tu=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,a=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,c=s*(a?1:-1)+r,u=Math.asin(s/c)/du,h=l?i:i+o*u,d=l?i-o*u:i;return{center:mu(t,n,c,h),circleTangency:mu(t,n,r,h),lineTangency:mu(t,n,c*Math.cos(u*du),d),theta:u}},Cu=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=function(e,t){return go(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+a,l=mu(t,n,i,o),c=mu(t,n,i,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=mu(t,n,r,o),d=mu(t,n,r,s);u+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},Au=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wu(e,t)}(a,e);var n,r,i,o=Su(a);function a(){return xu(this,a),o.apply(this,arguments)}return n=a,r=[{key:"render",value:function(){var e=this.props,n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,h=e.className;if(o<i||c===u)return null;var d,p=ro()("recharts-sector",h),m=o-i,f=wo(a,m,0,!0);return d=f>0&&Math.abs(c-u)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=go(c-l),h=Tu({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,p=h.lineTangency,m=h.theta,f=Tu({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=f.circleTangency,v=f.lineTangency,y=f.theta,_=s?Math.abs(l-c):Math.abs(l-c)-m-y;if(_<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):Cu({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var x="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var b=Tu({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),w=b.circleTangency,S=b.lineTangency,M=b.theta,E=Tu({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),T=E.circleTangency,C=E.lineTangency,A=E.theta,P=s?Math.abs(l-c):Math.abs(l-c)-M-A;if(P<0&&0===o)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(C.x,",").concat(C.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(T.x,",").concat(T.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(P>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(f,m/2),forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:u}):Cu({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u}),t.createElement("path",_u({},Jo(this.props,!0),{className:p,d:d}))}}],r&&bu(n.prototype,r),i&&bu(n,i),a}(t.PureComponent);function Pu(e){return Pu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(e)}function Ou(){return Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(this,arguments)}function Ru(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Du(e,t){return Du=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Du(e,t)}function ku(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fu(e);if(t){var i=Fu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Iu(this,n)}}function Iu(e,t){return!t||"object"!==Pu(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fu(e){return Fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fu(e)}Au.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1};var Nu=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Du(e,t)}(a,e);var n,r,i,o=ku(a);function a(){return Ru(this,a),o.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){var e=this.props,n=e.cx,r=e.cy,i=e.r,o=e.className,a=ro()("recharts-dot",o);return n===+n&&r===+r&&i===+i?t.createElement("circle",Ou({},Jo(this.props),ea(this.props),{className:a,cx:n,cy:r,r:i})):null}}])&&Lu(n.prototype,r),i&&Lu(n,i),a}(t.PureComponent);function zu(e){return zu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}function Uu(){return Uu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}function ju(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vu(e,t){return Vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vu(e,t)}function Gu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wu(e);if(t){var i=Wu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hu(this,n)}}function Hu(e,t){return!t||"object"!==zu(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wu(e){return Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wu(e)}var qu=function(e,t,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],h=0;h<4;h++)u[h]=i[h]>a?a:i[h];o="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*u[1])),o+="L ".concat(e+n,",").concat(t+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),o+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(e,",").concat(t+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+l*d,",").concat(t,"\n            L ").concat(e+n-l*d,",").concat(t,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*d,"\n            L ").concat(e+n,",").concat(t+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+n-l*d,",").concat(t+r,"\n            L ").concat(e+l*d,",").concat(t+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*d," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},Zu=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,o=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),c=Math.max(i,i+a),u=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=c&&r>=u&&r<=h}return!1},$u=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vu(e,t)}(a,e);var n,r,i,o=Gu(a);function a(){var e;ju(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={totalLength:-1},e.node=void 0,e}return n=a,r=[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var e=this.node.getTotalLength();e&&this.setState({totalLength:e})}catch(t){}}},{key:"render",value:function(){var e=this,n=this.props,r=n.x,i=n.y,o=n.width,a=n.height,s=n.radius,l=n.className,c=this.state.totalLength,u=this.props,h=u.animationEasing,d=u.animationDuration,p=u.animationBegin,m=u.isAnimationActive,f=u.isUpdateAnimationActive;if(r!==+r||i!==+i||o!==+o||a!==+a||0===o||0===a)return null;var g=ro()("recharts-rectangle",l);return f?t.createElement(As,{canBegin:c>0,from:{width:o,height:a,x:r,y:i},to:{width:o,height:a,x:r,y:i},duration:d,animationEasing:h,isActive:f},(function(n){var r=n.width,i=n.height,o=n.x,a=n.y;return t.createElement(As,{canBegin:c>0,from:"0px ".concat(-1===c?1:c,"px"),to:"".concat(c,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:d,isActive:m,easing:h},t.createElement("path",Uu({},Jo(e.props,!0),{className:g,d:qu(o,a,r,i,s),ref:function(t){e.node=t}})))})):t.createElement("path",Uu({},Jo(this.props,!0),{className:g,d:qu(r,i,o,a,s)}))}}],r&&Bu(n.prototype,r),i&&Bu(n,i),a}(t.PureComponent);$u.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"};var Xu=n(8493);function Ku(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Yu(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Qu={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Ju=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},eh=null,th=null,nh=function e(n){if(n===eh&&lo()(th))return th;var r=[];return t.Children.forEach(n,(function(t){Ho()(t)||((0,Xu.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))})),th=r,eh=n,r},rh=function(e,t){var n=[],r=[];return r=lo()(t)?t.map((function(e){return Ju(e)})):[Ju(t)],nh(e).forEach((function(e){var t=ao()(e,"type.displayName")||ao()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n},ih=function(e,t){var n=rh(e,t);return n&&n[0]},oh=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!yo(n)||n<=0||!yo(r)||r<=0)},ah=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sh=function(e){return e&&e.type&&fo()(e.type)&&ah.indexOf(e.type)>=0},lh=function e(n,r){if(n===r)return!0;var i=t.Children.count(n);if(i!==t.Children.count(r))return!1;if(0===i)return!0;if(1===i)return ch(lo()(n)?n[0]:n,lo()(r)?r[0]:r);for(var o=0;o<i;o++){var a=n[o],s=r[o];if(lo()(a)||lo()(s)){if(!e(a,s))return!1}else if(!ch(a,s))return!1}return!0},ch=function(e,t){if(Ho()(e)&&Ho()(t))return!0;if(!Ho()(e)&&!Ho()(t)){var n=e.props||{},r=n.children,i=Yu(n,["children"]),o=t.props||{},a=o.children,s=Yu(o,["children"]);return r&&a?Ku(i,s)&&lh(r,a):!r&&!a&&Ku(i,s)}return!1},uh=function(e,t){var n=[],r={};return nh(e).forEach((function(e,i){if(sh(e))n.push(e);else if(e){var o=Ju(e.type),a=t[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var c=s(e,o,i);n.push(c),r[o]=!0}}})),n};function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){ph(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ph(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mh(e){return function(e){if(Array.isArray(e))return fh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return fh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fh(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gh={widthCache:{},cacheCount:0},vh={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},yh=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],_h="recharts_measurement_span";var xh=function(e){return Object.keys(e).reduce((function(t,n){return"".concat(t).concat((r=n,r.split("").reduce((function(e,t){return t===t.toUpperCase()?[].concat(mh(e),["-",t.toLowerCase()]):[].concat(mh(e),[t])}),[]).join("")),":").concat(function(e,t){return yh.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}(n,e[n]),";");var r}),"")},bh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||Gs.isSsr)return{width:0,height:0};var n="".concat(e),r=xh(t),i="".concat(n,"-").concat(r);if(gh.widthCache[i])return gh.widthCache[i];try{var o=document.getElementById(_h);o||((o=document.createElement("span")).setAttribute("id",_h),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=dh(dh({},vh),t);Object.keys(a).map((function(e){return o.style[e]=a[e],e})),o.textContent=n;var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return gh.widthCache[i]=l,++gh.cacheCount>2e3&&(gh.cacheCount=0,gh.widthCache={}),l}catch(c){return{width:0,height:0}}},wh=n(72692),Sh=n.n(wh);function Mh(e){return Mh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(e)}function Eh(){return Eh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eh.apply(this,arguments)}function Th(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ch(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ph(e,t){return Ph=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ph(e,t)}function Oh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lh(e);if(t){var i=Lh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rh(this,n)}}function Rh(e,t){return!t||"object"!==Mh(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lh(e)}function Dh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(n),!0).forEach((function(t){Nh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zh=/[ \f\n\r\t\v\u2028\u2029]+/,Uh=function(e){try{var t=[];return Ho()(e.children)||(t=e.breakAll?e.children.toString().split(""):e.children.toString().split(zh)),{wordsWithComputedWidth:t.map((function(t){return{word:t,width:bh(t,e.style).width}})),spaceWidth:e.breakAll?0:bh("\xa0",e.style).width}}catch(n){return null}},jh=function(e){return[{words:Ho()(e)?[]:e.toString().split(zh)}]},Bh=function(e,t){if((e.width||e.scaleToFit)&&!Gs.isSsr&&t){var n=Uh(e);return n?function(e,t,n,r,i){var o=yo(e.maxLines),a=e.children,s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var o=t.word,a=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+a+n<r))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};e.push(l)}return e}),[])},l=s(t);if(!o)return l;for(var c,u=function(t){var n=a.slice(0,t),i=Uh(Fh(Fh({},e),{},{children:n+"\u2026"})).wordsWithComputedWidth,o=s(i),l=o.length>e.maxLines||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(o).width>r;return[l,o]},h=0,d=a.length-1,p=0;h<=d&&p<=a.length-1;){var m=Math.floor((h+d)/2),f=Dh(u(m-1),2),g=f[0],v=f[1],y=Dh(u(m),1)[0];if(g||y||(h=m+1),g&&y&&(d=m-1),!g&&y){c=v;break}p++}return c||l}(e,n.wordsWithComputedWidth,n.spaceWidth,e.width,e.scaleToFit):jh(e.children)}return jh(e.children)},Vh=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ph(e,t)}(a,e);var n,r,i,o=Oh(a);function a(){var e;Ch(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={},e}return n=a,r=[{key:"render",value:function(){var e=this.props,n=e.dx,r=e.dy,i=e.textAnchor,o=e.verticalAnchor,a=e.scaleToFit,s=e.angle,l=e.lineHeight,c=e.capHeight,u=e.className,h=e.breakAll,d=Th(e,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className","breakAll"]),p=this.state.wordsByLines;if(!_o(d.x)||!_o(d.y))return null;var m,f=d.x+(yo(n)?n:0),g=d.y+(yo(r)?r:0);switch(o){case"start":m=Sh()("calc(".concat(c,")"));break;case"middle":m=Sh()("calc(".concat((p.length-1)/2," * -").concat(l," + (").concat(c," / 2))"));break;default:m=Sh()("calc(".concat(p.length-1," * -").concat(l,")"))}var v=[];if(a){var y=p[0].width,_=this.props.width;v.push("scale(".concat((yo(_)?_/y:1)/y,")"))}return s&&v.push("rotate(".concat(s,", ").concat(f,", ").concat(g,")")),v.length&&(d.transform=v.join(" ")),t.createElement("text",Eh({},Jo(d,!0),{x:f,y:g,className:ro()("recharts-text",u),textAnchor:i}),p.map((function(e,n){return t.createElement("tspan",{x:f,dy:0===n?m:l,key:n},e.words.join(h?"":" "))})))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){if(e.width!==t.prevWidth||e.scaleToFit!==t.prevScaleToFit||e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll){var n=e.children!==t.prevChildren||e.style!==t.prevStyle||e.breakAll!==t.prevBreakAll;return{prevWidth:e.width,prevScaleToFit:e.scaleToFit,prevChildren:e.children,prevStyle:e.style,wordsByLines:Bh(e,n)}}return null}}],r&&Ah(n.prototype,r),i&&Ah(n,i),a}(t.Component);function Gh(e){return function(e){if(Array.isArray(e))return Hh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Hh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hh(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wh(Object(n),!0).forEach((function(t){Zh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $h(){return $h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$h.apply(this,arguments)}Vh.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"};var Xh=function(e,n,r){var i,o,a=e.position,s=e.viewBox,l=e.offset,c=e.className,u=s,h=u.cx,d=u.cy,p=u.innerRadius,m=u.outerRadius,f=u.startAngle,g=u.endAngle,v=u.clockWise,y=(p+m)/2,_=function(e,t){return go(t-e)*Math.min(Math.abs(t-e),360)}(f,g),x=_>=0?1:-1;"insideStart"===a?(i=f+x*l,o=v):"insideEnd"===a?(i=g-x*l,o=!v):"end"===a&&(i=g+x*l,o=v),o=_<=0?o:!o;var b=mu(h,d,y,i),w=mu(h,d,y,i+359*(o?1:-1)),S="M".concat(b.x,",").concat(b.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(o?0:1,",\n    ").concat(w.x,",").concat(w.y),M=Ho()(e.id)?bo("recharts-radial-line-"):e.id;return t.createElement("text",$h({},r,{dominantBaseline:"central",className:ro()("recharts-radial-bar-label",c)}),t.createElement("defs",null,t.createElement("path",{id:M,d:S})),t.createElement("textPath",{xlinkHref:"#".concat(M)},n))};function Kh(e){var n,r=e.viewBox,i=e.position,o=e.value,a=e.children,s=e.content,l=e.className,c=void 0===l?"":l,u=e.textBreakAll;if(!r||Ho()(o)&&Ho()(a)&&!(0,t.isValidElement)(s)&&!Fo()(s))return null;if((0,t.isValidElement)(s))return(0,t.cloneElement)(s,e);if(Fo()(s)){if(n=(0,t.createElement)(s,e),(0,t.isValidElement)(n))return n}else n=function(e){var t=e.value,n=e.formatter,r=Ho()(e.children)?t:e.children;return Fo()(n)?n(r):r}(e);var h=function(e){return yo(e.cx)}(r),d=Jo(e,!0);if(h&&("insideStart"===i||"insideEnd"===i||"end"===i))return Xh(e,n,d);var p=h?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=mu(o,a,l+n,c),h=u.x;return{x:h,y:u.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=mu(o,a,(s+l)/2,c);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}}(e):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,o=t,a=o.x,s=o.y,l=o.width,c=o.height,u=c>=0?1:-1,h=u*r,d=u>0?"end":"start",p=u>0?"start":"end",m=l>=0?1:-1,f=m*r,g=m>0?"end":"start",v=m>0?"start":"end";if("top"===i)return qh(qh({},{x:a+l/2,y:s-u*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return qh(qh({},{x:a+l/2,y:s+c+h,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===i){var y={x:a-f,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return qh(qh({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===i){var _={x:a+l+f,y:s+c/2,textAnchor:v,verticalAnchor:"middle"};return qh(qh({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:c}:{})}var x=n?{width:l,height:c}:{};return"insideLeft"===i?qh({x:a+f,y:s+c/2,textAnchor:v,verticalAnchor:"middle"},x):"insideRight"===i?qh({x:a+l-f,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?qh({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:p},x):"insideBottom"===i?qh({x:a+l/2,y:s+c-h,textAnchor:"middle",verticalAnchor:d},x):"insideTopLeft"===i?qh({x:a+f,y:s+h,textAnchor:v,verticalAnchor:p},x):"insideTopRight"===i?qh({x:a+l-f,y:s+h,textAnchor:g,verticalAnchor:p},x):"insideBottomLeft"===i?qh({x:a+f,y:s+c-h,textAnchor:v,verticalAnchor:d},x):"insideBottomRight"===i?qh({x:a+l-f,y:s+c-h,textAnchor:g,verticalAnchor:d},x):$o()(i)&&(yo(i.x)||vo(i.x))&&(yo(i.y)||vo(i.y))?qh({x:a+wo(i.x,l),y:s+wo(i.y,c),textAnchor:"end",verticalAnchor:"end"},x):qh({x:a+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(e);return t.createElement(Vh,$h({className:ro()("recharts-label",c)},d,p,{breakAll:u}),n)}Kh.displayName="Label",Kh.defaultProps={offset:5};var Yh=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,s=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,h=e.y,d=e.top,p=e.left,m=e.width,f=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(yo(m)&&yo(f)){if(yo(u)&&yo(h))return{x:u,y:h,width:m,height:f};if(yo(d)&&yo(p))return{x:d,y:p,width:m,height:f}}return yo(u)&&yo(h)?{x:u,y:h,width:0,height:0}:yo(t)&&yo(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}},Qh=function(e,n){return e?!0===e?t.createElement(Kh,{key:"label-implicit",viewBox:n}):_o(e)?t.createElement(Kh,{key:"label-implicit",viewBox:n,value:e}):(0,t.isValidElement)(e)?e.type===Kh?(0,t.cloneElement)(e,{key:"label-implicit",viewBox:n}):t.createElement(Kh,{key:"label-implicit",content:e,viewBox:n}):Fo()(e)?t.createElement(Kh,{key:"label-implicit",content:e,viewBox:n}):$o()(e)?t.createElement(Kh,$h({viewBox:n},e,{key:"label-implicit"})):null:null};function Jh(e){return Jh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(e)}function ed(){return ed=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ed.apply(this,arguments)}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function id(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function od(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sd(e,t){return sd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sd(e,t)}function ld(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ud(e);if(t){var i=ud(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cd(this,n)}}function cd(e,t){return!t||"object"!==Jh(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ud(e){return ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ud(e)}Kh.parseViewBox=Yh,Kh.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=Yh(e),a=rh(i,Kh.displayName).map((function(e,r){return(0,t.cloneElement)(e,{viewBox:n||o,key:"label-".concat(r)})}));if(!r)return a;var s=Qh(e.label,n||o);return[s].concat(Gh(a))};var hd=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sd(e,t)}(a,e);var n,r,i,o=ld(a);function a(){return od(this,a),o.apply(this,arguments)}return n=a,r=[{key:"shouldComponentUpdate",value:function(e){var t=e.viewBox,n=id(e,["viewBox"]),r=this.props,i=r.viewBox,o=id(r,["viewBox"]);return!Ku(t,i)||!Ku(n,o)}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,o,a,s=this.props,l=s.x,c=s.y,u=s.width,h=s.height,d=s.orientation,p=s.tickSize,m=s.mirror,f=s.tickMargin,g=m?-1:1,v=e.tickSize||p,y=yo(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,a=(r=(i=c+ +!m*h)-g*v)-g*f,o=y;break;case"left":r=i=e.coordinate,o=(t=(n=l+ +!m*u)-g*v)-g*f,a=y;break;case"right":r=i=e.coordinate,o=(t=(n=l+ +m*u)+g*v)+g*f,a=y;break;default:t=n=e.coordinate,a=(r=(i=c+ +m*h)+g*v)+g*f,o=y}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,o=e.height,a=e.orientation,s=e.mirror,l=e.axisLine,c=nd(nd(nd({},Jo(this.props)),Jo(l)),{},{fill:"none"});if("top"===a||"bottom"===a){var u=+("top"===a&&!s||"bottom"===a&&s);c=nd(nd({},c),{},{x1:n,y1:r+u*o,x2:n+i,y2:r+u*o})}else{var h=+("left"===a&&!s||"right"===a&&s);c=nd(nd({},c),{},{x1:n+h*i,y1:r,x2:n+h*i,y2:r+o})}return t.createElement("line",ed({},c,{className:ro()("recharts-cartesian-axis-line",ao()(l,"className"))}))}},{key:"renderTicks",value:function(e){var n=this,r=this.props,i=r.tickLine,o=r.stroke,s=r.tick,l=r.tickFormatter,c=r.unit,u=a.getTicks(nd(nd({},this.props),{},{ticks:e})),h=this.getTickTextAnchor(),d=this.getTickVerticalAnchor(),p=Jo(this.props),m=Jo(s),f=nd(nd({},p),{},{fill:"none"},Jo(i)),g=u.map((function(e,r){var g=n.getTickLineCoord(e),v=g.line,y=g.tick,_=nd(nd(nd(nd({textAnchor:h,verticalAnchor:d},p),{},{stroke:"none",fill:o},m),y),{},{index:r,payload:e,visibleTicksCount:u.length,tickFormatter:l});return t.createElement(sa,ed({className:"recharts-cartesian-axis-tick",key:"tick-".concat(r)},ta(n.props,e,r)),i&&t.createElement("line",ed({},f,v,{className:ro()("recharts-cartesian-axis-tick-line",ao()(i,"className"))})),s&&a.renderTickItem(s,_,"".concat(Fo()(l)?l(e.value,r):e.value).concat(c||"")))}));return t.createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var e=this.props,n=e.axisLine,r=e.width,i=e.height,o=e.ticksGenerator,a=e.className;if(e.hide)return null;var s=this.props,l=s.ticks,c=id(s,["ticks"]),u=l;return Fo()(o)&&(u=l&&l.length>0?o(this.props):o(c)),r<=0||i<=0||!u||!u.length?null:t.createElement(sa,{className:ro()("recharts-cartesian-axis",a)},n&&this.renderAxisLine(),this.renderTicks(u),Kh.renderCallByParent(this.props))}}],i=[{key:"getTicks",value:function(e){var t=e.tick,n=e.ticks,r=e.viewBox,i=e.minTickGap,o=e.orientation,s=e.interval,l=e.tickFormatter,c=e.unit;return n&&n.length&&t?yo(s)||Gs.isSsr?a.getNumberIntervalTicks(n,"number"===typeof s&&yo(s)?s:0):"preserveStartEnd"===s?a.getTicksStart({ticks:n,tickFormatter:l,viewBox:r,orientation:o,minTickGap:i,unit:c},!0):"preserveStart"===s?a.getTicksStart({ticks:n,tickFormatter:l,viewBox:r,orientation:o,minTickGap:i,unit:c}):a.getTicksEnd({ticks:n,tickFormatter:l,viewBox:r,orientation:o,minTickGap:i,unit:c}):[]}},{key:"getNumberIntervalTicks",value:function(e,t){return e.filter((function(e,n){return n%(t+1)===0}))}},{key:"getTicksStart",value:function(e,t){var n,r,i=e.ticks,o=e.tickFormatter,a=e.viewBox,s=e.orientation,l=e.minTickGap,c=e.unit,u=a.x,h=a.y,d=a.width,p=a.height,m="top"===s||"bottom"===s?"width":"height",f=(i||[]).slice(),g=c&&"width"===m?bh(c)[m]:0,v=f.length,y=v>=2?go(f[1].coordinate-f[0].coordinate):1;if(1===y?(n="width"===m?u:h,r="width"===m?u+d:h+p):(n="width"===m?u+d:h+p,r="width"===m?u:h),t){var _=i[v-1],x=Fo()(o)?o(_.value,v-1):_.value,b=bh(x)[m]+g,w=y*(_.coordinate+y*b/2-r);f[v-1]=_=nd(nd({},_),{},{tickCoord:w>0?_.coordinate-w*y:_.coordinate}),y*(_.tickCoord-y*b/2-n)>=0&&y*(_.tickCoord+y*b/2-r)<=0&&(r=_.tickCoord-y*(b/2+l),f[v-1]=nd(nd({},_),{},{isShow:!0}))}for(var S=t?v-1:v,M=0;M<S;M++){var E=f[M],T=Fo()(o)?o(E.value,M):E.value,C=bh(T)[m]+g;if(0===M){var A=y*(E.coordinate-y*C/2-n);f[M]=E=nd(nd({},E),{},{tickCoord:A<0?E.coordinate-A*y:E.coordinate})}else f[M]=E=nd(nd({},E),{},{tickCoord:E.coordinate});y*(E.tickCoord-y*C/2-n)>=0&&y*(E.tickCoord+y*C/2-r)<=0&&(n=E.tickCoord+y*(C/2+l),f[M]=nd(nd({},E),{},{isShow:!0}))}return f.filter((function(e){return e.isShow}))}},{key:"getTicksEnd",value:function(e){var t,n,r=e.ticks,i=e.tickFormatter,o=e.viewBox,a=e.orientation,s=e.minTickGap,l=e.unit,c=o.x,u=o.y,h=o.width,d=o.height,p="top"===a||"bottom"===a?"width":"height",m=l&&"width"===p?bh(l)[p]:0,f=(r||[]).slice(),g=f.length,v=g>=2?go(f[1].coordinate-f[0].coordinate):1;1===v?(t="width"===p?c:u,n="width"===p?c+h:u+d):(t="width"===p?c+h:u+d,n="width"===p?c:u);for(var y=g-1;y>=0;y--){var _=f[y],x=Fo()(i)?i(_.value,g-y-1):_.value,b=bh(x)[p]+m;if(y===g-1){var w=v*(_.coordinate+v*b/2-n);f[y]=_=nd(nd({},_),{},{tickCoord:w>0?_.coordinate-w*v:_.coordinate})}else f[y]=_=nd(nd({},_),{},{tickCoord:_.coordinate});v*(_.tickCoord-v*b/2-t)>=0&&v*(_.tickCoord+v*b/2-n)<=0&&(n=_.tickCoord-v*(b/2+s),f[y]=nd(nd({},_),{},{isShow:!0}))}return f.filter((function(e){return e.isShow}))}},{key:"renderTickItem",value:function(e,n,r){return t.isValidElement(e)?t.cloneElement(e,n):Fo()(e)?e(n):t.createElement(Vh,ed({},n,{className:"recharts-cartesian-axis-tick-value"}),r)}}],r&&ad(n.prototype,r),i&&ad(n,i),a}(t.Component);function dd(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function pd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function md(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}hd.displayName="CartesianAxis",hd.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};const fd=Symbol("implicit");function gd(){var e=new Map,t=[],n=[],r=fd;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==fd)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return gd(t,n).unknown(r)},pd.apply(i,arguments),i}function vd(){var e,t,n=gd().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=a<o,d=h?a:o,p=h?o:a;e=(p-d)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),d+=(p-d-e*(n-l))*u,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var m=dd(n).map((function(t){return d+e*t}));return i(h?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return vd(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},pd.apply(h(),arguments)}function yd(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yd(t())},e}function _d(){return yd(vd.apply(null,arguments).paddingInner(1))}var xd=n(18111),bd=n.n(xd),wd=n(29627),Sd=n.n(wd),Md=n(66452),Ed=n.n(Md),Td=n(5008),Cd=n.n(Td),Ad=n(4234),Pd=n.n(Ad);function Od(e){return function(e){if(Array.isArray(e))return Rd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ld=function(e){return e},Dd={"@@functional/placeholder":!0},kd=function(e){return e===Dd},Id=function(e){return function t(){return 0===arguments.length||1===arguments.length&&kd(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Fd=function e(t,n){return 1===t?n:Id((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(e){return e!==Dd})).length;return a>=t?n.apply(void 0,i):e(t-a,Id((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i.map((function(e){return kd(e)?t.shift():e}));return n.apply(void 0,Od(o).concat(t))})))}))},Nd=function(e){return Fd(e.length,e)},zd=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Ud=Nd((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),jd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Ld;var r=t.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},Bd=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Vd=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var Gd=Nd((function(e,t,n){var r=+e;return r+n*(+t-r)})),Hd=Nd((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),Wd=Nd((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const qd={rangeStep:function(e,t,n){for(var r=new(Pd())(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new(Pd())(e).abs().log(10).toNumber())+1},interpolateNumber:Gd,uninterpolateNumber:Hd,uninterpolateTruncation:Wd};function Zd(e){return function(e){if(Array.isArray(e))return Kd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Xd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Xd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xd(e,t){if(e){if("string"===typeof e)return Kd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kd(e,t):void 0}}function Kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yd(e){var t=$d(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function Qd(e,t,n){if(e.lte(0))return new(Pd())(0);var r=qd.getDigitCount(e.toNumber()),i=new(Pd())(10).pow(r),o=e.div(i),a=1!==r?.05:.1,s=new(Pd())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return t?s:new(Pd())(Math.ceil(s))}function Jd(e,t,n){var r=1,i=new(Pd())(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new(Pd())(10).pow(qd.getDigitCount(e)-1),i=new(Pd())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(Pd())(Math.floor(e)))}else 0===e?i=new(Pd())(Math.floor((t-1)/2)):n||(i=new(Pd())(Math.floor(e)));var a=Math.floor((t-1)/2);return jd(Ud((function(e){return i.add(new(Pd())(e-a).mul(r)).toNumber()})),zd)(0,t)}function ep(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(Pd())(0),tickMin:new(Pd())(0),tickMax:new(Pd())(0)};var o,a=Qd(new(Pd())(t).sub(e).div(n-1),r,i);o=e<=0&&t>=0?new(Pd())(0):(o=new(Pd())(e).add(t).div(2)).sub(new(Pd())(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(Pd())(t).sub(o).div(a).toNumber()),c=s+l+1;return c>n?ep(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:a,tickMin:o.sub(new(Pd())(s).mul(a)),tickMax:o.add(new(Pd())(l).mul(a))})}var tp=Vd((function(e){var t=$d(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Yd([n,r]),l=$d(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var h=u===1/0?[c].concat(Zd(zd(0,i-1).map((function(){return 1/0})))):[].concat(Zd(zd(0,i-1).map((function(){return-1/0}))),[u]);return n>r?Bd(h):h}if(c===u)return Jd(c,i,o);var d=ep(c,u,a,o),p=d.step,m=d.tickMin,f=d.tickMax,g=qd.rangeStep(m,f.add(new(Pd())(.1).mul(p)),p);return n>r?Bd(g):g})),np=(Vd((function(e){var t=$d(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=Yd([n,r]),l=$d(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,r];if(c===u)return Jd(c,i,o);var h=Qd(new(Pd())(u).sub(c).div(a-1),o,0),d=jd(Ud((function(e){return new(Pd())(c).add(new(Pd())(e).mul(h)).toNumber()})),zd),p=d(0,a).filter((function(e){return e>=c&&e<=u}));return n>r?Bd(p):p})),Vd((function(e,t){var n=$d(e,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Yd([r,i]),s=$d(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(t,2),h=Qd(new(Pd())(c).sub(l).div(u-1),o,0),d=[].concat(Zd(qd.rangeStep(new(Pd())(l),new(Pd())(c).sub(new(Pd())(.99).mul(h)),h)),[c]);return r>i?Bd(d):d}))),rp=Math.sqrt(50),ip=Math.sqrt(10),op=Math.sqrt(2);function ap(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=sp(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}function sp(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=rp?10:o>=ip?5:o>=op?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=rp?10:o>=ip?5:o>=op?2:1)}function lp(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=rp?i*=10:o>=ip?i*=5:o>=op&&(i*=2),t<e?-i:i}function cp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function up(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>cp(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}function hp(e){return null===e?NaN:+e}const dp=up(cp),pp=dp.right,mp=(dp.left,up(hp).center,pp);function fp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vp(){}var yp=.7,_p=1/yp,xp="\\s*([+-]?\\d+)\\s*",bp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",wp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sp=/^#([0-9a-f]{3,8})$/,Mp=new RegExp("^rgb\\("+[xp,xp,xp]+"\\)$"),Ep=new RegExp("^rgb\\("+[wp,wp,wp]+"\\)$"),Tp=new RegExp("^rgba\\("+[xp,xp,xp,bp]+"\\)$"),Cp=new RegExp("^rgba\\("+[wp,wp,wp,bp]+"\\)$"),Ap=new RegExp("^hsl\\("+[bp,wp,wp]+"\\)$"),Pp=new RegExp("^hsla\\("+[bp,wp,wp,bp]+"\\)$"),Op={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rp(){return this.rgb().formatHex()}function Lp(){return this.rgb().formatRgb()}function Dp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?kp(t):3===n?new zp(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ip(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ip(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Mp.exec(e))?new zp(t[1],t[2],t[3],1):(t=Ep.exec(e))?new zp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Tp.exec(e))?Ip(t[1],t[2],t[3],t[4]):(t=Cp.exec(e))?Ip(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ap.exec(e))?Vp(t[1],t[2]/100,t[3]/100,1):(t=Pp.exec(e))?Vp(t[1],t[2]/100,t[3]/100,t[4]):Op.hasOwnProperty(e)?kp(Op[e]):"transparent"===e?new zp(NaN,NaN,NaN,0):null}function kp(e){return new zp(e>>16&255,e>>8&255,255&e,1)}function Ip(e,t,n,r){return r<=0&&(e=t=n=NaN),new zp(e,t,n,r)}function Fp(e){return e instanceof vp||(e=Dp(e)),e?new zp((e=e.rgb()).r,e.g,e.b,e.opacity):new zp}function Np(e,t,n,r){return 1===arguments.length?Fp(e):new zp(e,t,n,null==r?1:r)}function zp(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Up(){return"#"+Bp(this.r)+Bp(this.g)+Bp(this.b)}function jp(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Bp(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Vp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hp(e,t,n,r)}function Gp(e){if(e instanceof Hp)return new Hp(e.h,e.s,e.l,e.opacity);if(e instanceof vp||(e=Dp(e)),!e)return new Hp;if(e instanceof Hp)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Hp(a,s,l,e.opacity)}function Hp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wp(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function qp(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}fp(vp,Dp,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Rp,formatHex:Rp,formatHsl:function(){return Gp(this).formatHsl()},formatRgb:Lp,toString:Lp}),fp(zp,Np,gp(vp,{brighter:function(e){return e=null==e?_p:Math.pow(_p,e),new zp(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?yp:Math.pow(yp,e),new zp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Up,formatHex:Up,formatRgb:jp,toString:jp})),fp(Hp,(function(e,t,n,r){return 1===arguments.length?Gp(e):new Hp(e,t,n,null==r?1:r)}),gp(vp,{brighter:function(e){return e=null==e?_p:Math.pow(_p,e),new Hp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?yp:Math.pow(yp,e),new Hp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new zp(Wp(e>=240?e-240:e+120,i,r),Wp(e,i,r),Wp(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const Zp=e=>()=>e;function $p(e,t){return function(n){return e+n*t}}function Xp(e){return 1===(e=+e)?Kp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Zp(isNaN(t)?n:t)}}function Kp(e,t){var n=t-e;return n?$p(e,n):Zp(isNaN(e)?t:e)}const Yp=function e(t){var n=Xp(t);function r(e,t){var r=n((e=Np(e)).r,(t=Np(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Kp(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Qp(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Np(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}Qp((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return qp((n-r/t)*t,a,i,o,s)}})),Qp((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return qp((n-r/t)*t,i,o,a,s)}}));function Jp(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=sm(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function em(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tm(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function nm(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=sm(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var rm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,im=new RegExp(rm.source,"g");function om(e,t){var n,r,i,o=rm.lastIndex=im.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=rm.exec(e))&&(r=im.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:tm(n,r)})),o=im.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function am(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function sm(e,t){var n,r=typeof t;return null==t||"boolean"===r?Zp(t):("number"===r?tm:"string"===r?(n=Dp(t))?(t=n,Yp):om:t instanceof Dp?Yp:t instanceof Date?em:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?am:Array.isArray(t)?Jp:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?nm:tm)(e,t)}function lm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function cm(e){return+e}var um=[0,1];function hm(e){return e}function dm(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function pm(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=dm(i,r),o=n(a,o)):(r=dm(r,i),o=n(o,a)),function(e){return o(r(e))}}function mm(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=dm(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=mp(e,t,1,r)-1;return o[n](i[n](t))}}function fm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gm(){var e,t,n,r,i,o,a=um,s=um,l=sm,c=hm;function u(){var e=Math.min(a.length,s.length);return c!==hm&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?mm:pm,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),tm)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,cm),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=lm,u()},h.clamp=function(e){return arguments.length?(c=!!e||hm,u()):c!==hm},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function vm(){return gm()(hm,hm)}var ym,_m=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xm(e){if(!(t=_m.exec(e)))throw new Error("invalid format: "+e);var t;return new bm({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function bm(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function wm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Sm(e){return(e=wm(Math.abs(e)))?e[1]:NaN}function Mm(e,t){var n=wm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}xm.prototype=bm.prototype,bm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Em={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Mm(100*e,t),r:Mm,s:function(e,t){var n=wm(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(ym=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wm(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Tm(e){return e}var Cm,Am,Pm,Om=Array.prototype.map,Rm=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Lm(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Tm:(t=Om.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Tm:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Om.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=xm(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(f=!0,y="g"):Em[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?o:/[%p]/.test(y)?l:"",b=Em[y],w=/[defgprs%]/.test(y);function S(e){var i,o,l,d=_,S=x;if("c"===y)S=b(e)+S,e="";else{var M=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:b(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),M&&0===+e&&"+"!==h&&(M=!1),d=(M?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===y?Rm[8+ym/3]:"")+S+(M&&"("===h?")":""),w)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}f&&!p&&(e=r(e,1/0));var E=d.length+e.length+S.length,T=E<m?new Array(m-E+1).join(t):"";switch(f&&p&&(e=r(T+e,T.length?m-S.length:1/0),T=""),n){case"<":e=d+e+S+T;break;case"=":e=d+T+e+S;break;case"^":e=T.slice(0,E=T.length>>1)+d+e+S+T.slice(E);break;default:e=T+d+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=xm(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Sm(t)/3))),i=Math.pow(10,-r),o=Rm[8+r/3];return function(e){return n(i*e)+o}}}}function Dm(e,t,n,r){var i,o=lp(e,t,n);switch((r=xm(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sm(t)/3)))-Sm(Math.abs(e)))}(o,a))||(r.precision=i),Pm(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sm(t)-Sm(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Sm(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return Am(r)}function km(e){var t=e.domain;return e.ticks=function(e){var n=t();return ap(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Dm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=sp(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function Im(){var e=vm();return e.copy=function(){return fm(e,Im())},pd.apply(e,arguments),km(e)}function Fm(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,cm),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Fm(e).unknown(t)},e=arguments.length?Array.from(e,cm):[0,1],km(n)}function Nm(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function zm(e){return Math.log(e)}function Um(e){return Math.exp(e)}function jm(e){return-Math.log(-e)}function Bm(e){return-Math.exp(-e)}function Vm(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gm(e){return function(t){return-e(-t)}}function Hm(e){var t,n,r=e(zm,Um),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?Vm:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=Gm(t),n=Gm(n),e(jm,Bm)):e(zm,Um),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],l=a[a.length-1];(r=l<s)&&(d=s,s=l,l=d);var c,u,h,d=t(s),p=t(l),m=null==e?10:+e,f=[];if(!(o%1)&&p-d<m){if(d=Math.floor(d),p=Math.ceil(p),s>0){for(;d<=p;++d)for(u=1,c=n(d);u<o;++u)if(!((h=c*u)<s)){if(h>l)break;f.push(h)}}else for(;d<=p;++d)for(u=o-1,c=n(d);u>=1;--u)if(!((h=c*u)<s)){if(h>l)break;f.push(h)}2*f.length<m&&(f=ap(s,l,m))}else f=ap(d,p,Math.min(p-d,m)).map(n);return r?f.reverse():f},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=Am(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(Nm(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Wm(){var e=Hm(gm()).domain([1,10]);return e.copy=function(){return fm(e,Wm()).base(e.base())},pd.apply(e,arguments),e}function qm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $m(e){var t=1,n=e(qm(t),Zm(t));return n.constant=function(n){return arguments.length?e(qm(t=+n),Zm(t)):t},km(n)}function Xm(){var e=$m(gm());return e.copy=function(){return fm(e,Xm()).constant(e.constant())},pd.apply(e,arguments)}function Km(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ym(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qm(e){return e<0?-e*e:e*e}function Jm(e){var t=e(hm,hm),n=1;function r(){return 1===n?e(hm,hm):.5===n?e(Ym,Qm):e(Km(n),Km(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},km(t)}function ef(){var e=Jm(gm());return e.copy=function(){return fm(e,ef()).exponent(e.exponent())},pd.apply(e,arguments),e}function tf(){return ef.apply(null,arguments).exponent(.5)}function nf(e){return Math.sign(e)*e*e}function rf(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function of(){var e,t=vm(),n=[0,1],r=!1;function i(n){var i=rf(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(nf(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,cm)).map(nf)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return of(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},pd.apply(i,arguments),km(i)}function af(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function sf(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cp;for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);lf(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}const o=e[t];let a=n,s=r;for(cf(e,n,t),i(e[r],o)>0&&cf(e,n,r);a<s;){for(cf(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?cf(e,n,s):(++s,cf(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function cf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function uf(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),r=e.length){if((t=+t)<=0||r<2)return sf(e);if(t>=1)return af(e);var r,i=(r-1)*t,o=Math.floor(i),a=af(lf(e,o).subarray(0,o+1));return a+(sf(e.subarray(o+1))-a)*(i-o)}}function hf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hp;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function df(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=hf(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[mp(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(cp),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return df().domain(t).range(n).unknown(e)},pd.apply(o,arguments)}function pf(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[mp(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return pf().domain([t,n]).range(o).unknown(e)},pd.apply(km(a),arguments)}function mf(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[mp(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return mf().domain(t).range(n).unknown(e)},pd.apply(i,arguments)}Cm=Lm({thousands:",",grouping:[3],currency:["$",""]}),Am=Cm.format,Pm=Cm.formatPrefix;const ff=1e3,gf=6e4,vf=36e5,yf=864e5,_f=6048e5,xf=2592e6,bf=31536e6;var wf=new Date,Sf=new Date;function Mf(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return Mf((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return wf.setTime(+t),Sf.setTime(+r),e(wf),e(Sf),Math.floor(n(wf,Sf))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}var Ef=Mf((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Ef.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Mf((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Ef:null};const Tf=Ef;Ef.range;var Cf=Mf((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*ff)}),(function(e,t){return(t-e)/ff}),(function(e){return e.getUTCSeconds()}));const Af=Cf;Cf.range;var Pf=Mf((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ff)}),(function(e,t){e.setTime(+e+t*gf)}),(function(e,t){return(t-e)/gf}),(function(e){return e.getMinutes()}));const Of=Pf;Pf.range;var Rf=Mf((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ff-e.getMinutes()*gf)}),(function(e,t){e.setTime(+e+t*vf)}),(function(e,t){return(t-e)/vf}),(function(e){return e.getHours()}));const Lf=Rf;Rf.range;var Df=Mf((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gf)/yf),(e=>e.getDate()-1));const kf=Df;Df.range;function If(e){return Mf((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gf)/_f}))}var Ff=If(0),Nf=If(1),zf=If(2),Uf=If(3),jf=If(4),Bf=If(5),Vf=If(6),Gf=(Ff.range,Nf.range,zf.range,Uf.range,jf.range,Bf.range,Vf.range,Mf((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})));const Hf=Gf;Gf.range;var Wf=Mf((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Wf.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Mf((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const qf=Wf;Wf.range;var Zf=Mf((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*gf)}),(function(e,t){return(t-e)/gf}),(function(e){return e.getUTCMinutes()}));const $f=Zf;Zf.range;var Xf=Mf((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*vf)}),(function(e,t){return(t-e)/vf}),(function(e){return e.getUTCHours()}));const Kf=Xf;Xf.range;var Yf=Mf((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/yf}),(function(e){return e.getUTCDate()-1}));const Qf=Yf;Yf.range;function Jf(e){return Mf((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/_f}))}var eg=Jf(0),tg=Jf(1),ng=Jf(2),rg=Jf(3),ig=Jf(4),og=Jf(5),ag=Jf(6),sg=(eg.range,tg.range,ng.range,rg.range,ig.range,og.range,ag.range,Mf((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})));const lg=sg;sg.range;var cg=Mf((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));cg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Mf((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const ug=cg;cg.range;function hg(e,t,n,r,i,o){const a=[[Af,1,ff],[Af,5,5e3],[Af,15,15e3],[Af,30,3e4],[o,1,gf],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,vf],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,yf],[r,2,1728e5],[n,1,_f],[t,1,xf],[t,3,7776e6],[e,1,bf]];function s(t,n,r){const i=Math.abs(n-t)/r,o=up((e=>{let[,,t]=e;return t})).right(a,i);if(o===a.length)return e.every(lp(t/bf,n/bf,r));if(0===o)return Tf.every(Math.max(lp(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[dg,pg]=hg(ug,lg,eg,Qf,Kf,$f),[mg,fg]=hg(qf,Hf,Ff,kf,Lf,Of);function gg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var _g,xg,bg,wg={"-":"",_:" ",0:"0"},Sg=/^\s*\d+/,Mg=/^%/,Eg=/[\\^$*+?|[\]().{}]/g;function Tg(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Cg(e){return e.replace(Eg,"\\$&")}function Ag(e){return new RegExp("^(?:"+e.map(Cg).join("|")+")","i")}function Pg(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Og(e,t,n){var r=Sg.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Rg(e,t,n){var r=Sg.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Lg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Dg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function kg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ig(e,t,n){var r=Sg.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Fg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ng(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zg(e,t,n){var r=Sg.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Ug(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function jg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Bg(e,t,n){var r=Sg.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Vg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Gg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Hg(e,t,n){var r=Sg.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Wg(e,t,n){var r=Sg.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function qg(e,t,n){var r=Sg.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Zg(e,t,n){var r=Mg.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $g(e,t,n){var r=Sg.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Xg(e,t,n){var r=Sg.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Kg(e,t){return Tg(e.getDate(),t,2)}function Yg(e,t){return Tg(e.getHours(),t,2)}function Qg(e,t){return Tg(e.getHours()%12||12,t,2)}function Jg(e,t){return Tg(1+kf.count(qf(e),e),t,3)}function ev(e,t){return Tg(e.getMilliseconds(),t,3)}function tv(e,t){return ev(e,t)+"000"}function nv(e,t){return Tg(e.getMonth()+1,t,2)}function rv(e,t){return Tg(e.getMinutes(),t,2)}function iv(e,t){return Tg(e.getSeconds(),t,2)}function ov(e){var t=e.getDay();return 0===t?7:t}function av(e,t){return Tg(Ff.count(qf(e)-1,e),t,2)}function sv(e){var t=e.getDay();return t>=4||0===t?jf(e):jf.ceil(e)}function lv(e,t){return e=sv(e),Tg(jf.count(qf(e),e)+(4===qf(e).getDay()),t,2)}function cv(e){return e.getDay()}function uv(e,t){return Tg(Nf.count(qf(e)-1,e),t,2)}function hv(e,t){return Tg(e.getFullYear()%100,t,2)}function dv(e,t){return Tg((e=sv(e)).getFullYear()%100,t,2)}function pv(e,t){return Tg(e.getFullYear()%1e4,t,4)}function mv(e,t){var n=e.getDay();return Tg((e=n>=4||0===n?jf(e):jf.ceil(e)).getFullYear()%1e4,t,4)}function fv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tg(t/60|0,"0",2)+Tg(t%60,"0",2)}function gv(e,t){return Tg(e.getUTCDate(),t,2)}function vv(e,t){return Tg(e.getUTCHours(),t,2)}function yv(e,t){return Tg(e.getUTCHours()%12||12,t,2)}function _v(e,t){return Tg(1+Qf.count(ug(e),e),t,3)}function xv(e,t){return Tg(e.getUTCMilliseconds(),t,3)}function bv(e,t){return xv(e,t)+"000"}function wv(e,t){return Tg(e.getUTCMonth()+1,t,2)}function Sv(e,t){return Tg(e.getUTCMinutes(),t,2)}function Mv(e,t){return Tg(e.getUTCSeconds(),t,2)}function Ev(e){var t=e.getUTCDay();return 0===t?7:t}function Tv(e,t){return Tg(eg.count(ug(e)-1,e),t,2)}function Cv(e){var t=e.getUTCDay();return t>=4||0===t?ig(e):ig.ceil(e)}function Av(e,t){return e=Cv(e),Tg(ig.count(ug(e),e)+(4===ug(e).getUTCDay()),t,2)}function Pv(e){return e.getUTCDay()}function Ov(e,t){return Tg(tg.count(ug(e)-1,e),t,2)}function Rv(e,t){return Tg(e.getUTCFullYear()%100,t,2)}function Lv(e,t){return Tg((e=Cv(e)).getUTCFullYear()%100,t,2)}function Dv(e,t){return Tg(e.getUTCFullYear()%1e4,t,4)}function kv(e,t){var n=e.getUTCDay();return Tg((e=n>=4||0===n?ig(e):ig.ceil(e)).getUTCFullYear()%1e4,t,4)}function Iv(){return"+0000"}function Fv(){return"%"}function Nv(e){return+e}function zv(e){return Math.floor(+e/1e3)}function Uv(e){return new Date(e)}function jv(e){return e instanceof Date?+e:+new Date(+e)}function Bv(e,t,n,r,i,o,a,s,l,c){var u=vm(),h=u.invert,d=u.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),_=c("%B"),x=c("%Y");function b(e){return(l(e)<e?p:s(e)<e?m:a(e)<e?f:o(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?_:x)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,jv)):d().map(Uv)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?b:c(t)},u.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(Nm(n,e)):u},u.copy=function(){return fm(u,Bv(e,t,n,r,i,o,a,s,l,c))},u}function Vv(){return pd.apply(Bv(mg,fg,qf,Hf,Ff,kf,Lf,Of,Af,xg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gv(){return pd.apply(Bv(dg,pg,ug,lg,eg,Qf,Kf,$f,Af,bg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hv(){var e,t,n,r,i,o=0,a=1,s=hm,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(sm),c.rangeRound=u(lm),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function Wv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qv(){var e=km(Hv()(hm));return e.copy=function(){return Wv(e,qv())},md.apply(e,arguments)}function Zv(){var e=Hm(Hv()).domain([1,10]);return e.copy=function(){return Wv(e,Zv()).base(e.base())},md.apply(e,arguments)}function $v(){var e=$m(Hv());return e.copy=function(){return Wv(e,$v()).constant(e.constant())},md.apply(e,arguments)}function Xv(){var e=Jm(Hv());return e.copy=function(){return Wv(e,Xv()).exponent(e.exponent())},md.apply(e,arguments)}function Kv(){return Xv.apply(null,arguments).exponent(.5)}function Yv(){var e=[],t=hm;function n(n){if(null!=n&&!isNaN(n=+n))return t((mp(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(cp),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>uf(e,r/t)))},n.copy=function(){return Yv(t).domain(e)},md.apply(n,arguments)}function Qv(e,t){void 0===t&&(t=e,e=sm);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}function Jv(){var e,t,n,r,i,o,a,s=0,l=.5,c=1,u=1,h=hm,d=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),h(d?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=Qv(e,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,l,c]=a,e=o(s=+s),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p):[s,l,c]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=m(sm),p.rangeRound=m(lm),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function ey(){var e=km(Jv()(hm));return e.copy=function(){return Wv(e,ey())},md.apply(e,arguments)}function ty(){var e=Hm(Jv()).domain([.1,1,10]);return e.copy=function(){return Wv(e,ty()).base(e.base())},md.apply(e,arguments)}function ny(){var e=$m(Jv());return e.copy=function(){return Wv(e,ny()).constant(e.constant())},md.apply(e,arguments)}function ry(){var e=Jm(Jv());return e.copy=function(){return Wv(e,ry()).exponent(e.exponent())},md.apply(e,arguments)}function iy(){return ry.apply(null,arguments).exponent(.5)}function oy(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function ay(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function sy(e,t){return e[t]}function ly(e){const t=[];return t.key=e,t}function cy(e){return function(e){if(Array.isArray(e))return uy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hy(Object(n),!0).forEach((function(t){py(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function my(e,t,n){return Ho()(e)||Ho()(t)?n:_o(t)?ao()(e,t,n):Fo()(t)?t(e):n}function fy(e,t,n,r){var i=Cd()(e,(function(e){return my(e,t)}));if("number"===n){var o=i.filter((function(e){return yo(e)||parseFloat(e)}));return o.length?[Ed()(o),Sd()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!Ho()(e)})):i).map((function(e){return _o(e)||e instanceof Date?e:""}))}!function(e){_g=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=Ag(i),u=Pg(i),h=Ag(o),d=Pg(o),p=Ag(a),m=Pg(a),f=Ag(s),g=Pg(s),v=Ag(l),y=Pg(l),_={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Kg,e:Kg,f:tv,g:dv,G:mv,H:Yg,I:Qg,j:Jg,L:ev,m:nv,M:rv,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Nv,s:zv,S:iv,u:ov,U:av,V:lv,w:cv,W:uv,x:null,X:null,y:hv,Y:pv,Z:fv,"%":Fv},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:gv,e:gv,f:bv,g:Lv,G:kv,H:vv,I:yv,j:_v,L:xv,m:wv,M:Sv,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Nv,s:zv,S:Mv,u:Ev,U:Tv,V:Av,w:Pv,W:Ov,x:null,X:null,y:Rv,Y:Dv,Z:Iv,"%":Fv},b={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:jg,e:jg,f:qg,g:Fg,G:Ig,H:Vg,I:Vg,j:Bg,L:Wg,m:Ug,M:Gg,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:zg,Q:$g,s:Xg,S:Hg,u:Rg,U:Lg,V:Dg,w:Og,W:kg,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:Fg,Y:Ig,Z:Ng,"%":Zg};function w(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=wg[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function S(e,t){return function(n){var r,i,o=yg(1900,void 0,1);if(M(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=vg(yg(o.y,0,1))).getUTCDay(),r=i>4||0===i?tg.ceil(r):tg(r),r=Qf.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=gg(yg(o.y,0,1))).getDay(),r=i>4||0===i?Nf.ceil(r):Nf(r),r=kf.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?vg(yg(o.y,0,1)).getUTCDay():gg(yg(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,vg(o)):gg(o)}}function M(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=b[i in wg?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=w(n,_),_.X=w(r,_),_.c=w(t,_),x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),{format:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),xg=_g.format,_g.parse,bg=_g.utcFormat,_g.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var gy=function(e){var t,n=e.type.displayName,r=e.props,i=r.stroke,o=r.fill;switch(n){case"Line":t=i;break;case"Area":case"Radar":t=i&&"none"!==i?i:o;break;default:t=o}return t},vy=function(e){var t,n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=ih(n,mc.displayName);return a?(t=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:gy(t),value:i||r,payload:t.props}})),dy(dy(dy({},a.props),mc.getWithHeight(a,i)),{},{payload:t,item:a})):null},yy=function(e,t,n,r){var i=t.props.children,o=rh(i,"ErrorBar").filter((function(e){var t=e.props.direction;return!(!Ho()(t)&&!Ho()(r))||r.indexOf(t)>=0}));if(o&&o.length){var a=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=my(t,n,0),i=lo()(r)?[Ed()(r),Sd()(r)]:[r,r],o=a.reduce((function(e,n){var r=my(t,n,0),o=i[0]-Math.abs(lo()(r)?r[0]:r),a=i[1]+Math.abs(lo()(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},_y=function(e,t,n,r){var i=t.map((function(t){var i=t.props.dataKey;return"number"===n&&i&&yy(e,t,i)||fy(e,i,n,r)}));if("number"===n)return i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var o={};return i.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)o[t[n]]||(o[t[n]]=!0,e.push(t[n]));return e}),[])},xy=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},by=function(e,t,n){var r,i,o=e.map((function(e){return e.coordinate===t&&(r=!0),e.coordinate===n&&(i=!0),e.coordinate}));return r||o.push(t),i||o.push(n),o},wy=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,s=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/2:0;return s="angleAxis"===e.axisType?2*go(a[0]-a[1])*s:s,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+s,value:e,offset:s}})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+s,value:e,index:t,offset:s}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+s,value:e,offset:s}})):r.domain().map((function(e,t){return{coordinate:r(e)+s,value:i?i[e]:e,index:t,offset:s}}))},Sy=function(e,t,n){var r;return Fo()(n)?r=n:Fo()(t)&&(r=t),Fo()(e)||r?function(t,n,i,o){Fo()(e)&&e(t,n,i,o),Fo()(r)&&r(t,n,i,o)}:null},My=1e-4,Ey={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,a=0;a<t;++a){var s=uo()(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}oy(e,t)}},none:oy,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}oy(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,c=0;s<i;++s){for(var u=e[t[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,p=0;p<s;++p){var m=e[t[p]];d+=(m[a][1]||0)-(m[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,oy(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var a=uo()(e[o][n][1])?e[o][n][0]:e[o][n][1];a>=0?(e[o][n][0]=i,e[o][n][1]=i+a,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},Ty=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=function(){var e=Rl([]),t=ay,n=oy,r=sy;function i(i){var o,a,s=Array.from(e.apply(this,arguments),ly),l=s.length,c=-1;for(const e of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(e,s[o].key,c,i)]).data=e;for(o=0,a=Dc(t(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:Rl(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:Rl(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?ay:"function"===typeof e?e:Rl(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?oy:e,i):n},i}().keys(r).value((function(e,t){return+my(e,t,0)})).order(ay).offset(Ey[n]);return i(e)},Cy=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var c=tp(l,i,a);return e.domain(function(e,t){return"number"===t?[Ed()(e),Sd()(e)]:e}(c,r)),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:np(u,i,a)}}return null},Ay=function(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,o=e.index,a=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ho()(i[t.dataKey])){var s=Eo(n,"value",i[t.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=my(i,Ho()(a)?t.dataKey:a);return Ho()(l)?null:t.scale(l)},Py=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=r.slice(t,n+1).reduce((function(e,t){return[Ed()(t.concat([e[0]]).filter(yo)),Sd()(t.concat([e[1]]).filter(yo))]}),[1/0,-1/0]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},Oy=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ry=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ly=function(e,t,n){if(!lo()(e))return t;var r=[];if(yo(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(Oy.test(e[0])){var i=+Oy.exec(e[0])[1];r[0]=t[0]-i}else Fo()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(yo(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(Ry.test(e[1])){var o=+Ry.exec(e[1])[1];r[1]=t[1]+o}else Fo()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Dy=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=jo()(t,(function(e){return e.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],c=i[a-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},ky=function(e,t,n){return e&&e.length?bd()(e,ao()(n,"type.defaultProps.domain"))?t:e:t},Iy=function(e,t){var n=e.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType;return dy(dy({},Jo(e)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:gy(e),value:my(t,r),type:s,payload:t,chartType:l})};function Fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fy(Object(n),!0).forEach((function(t){zy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uy=["Webkit","Moz","O","ms"];function jy(e){return jy="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(e)}function By(){return By=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(this,arguments)}function Vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vy(Object(n),!0).forEach((function(t){Hy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qy(e,t){return qy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qy(e,t)}function Zy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ky(e);if(t){var i=Ky(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $y(this,n)}}function $y(e,t){return!t||"object"!==jy(t)&&"function"!==typeof t?Xy(e):t}function Xy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ky(e){return Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ky(e)}var Yy=function(e){return e.changedTouches&&!!e.changedTouches.length},Qy=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qy(e,t)}(a,e);var n,r,i,o=Zy(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).leaveTimer=void 0,t.travellerDragStartHandlers=void 0,t.handleDrag=function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)},t.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])},t.handleDragEnd=function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1}),t.detachDragEndListener()},t.handleLeaveWrapper=function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))},t.handleEnterSlideOrTraveller=function(){t.setState({isTextActive:!0})},t.handleLeaveSlideOrTraveller=function(){t.setState({isTextActive:!1})},t.handleSlideDragStart=function(e){var n=Yy(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()},t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(Xy(t),"startX"),endX:t.handleTravellerDragStart.bind(Xy(t),"endX")},t.state={},t}return n=a,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,n=e.endX,r=this.state.scaleValues,i=this.props,o=i.gap,s=i.data.length-1,l=Math.min(t,n),c=Math.max(t,n),u=a.getIndexInRange(r,l),h=a.getIndexInRange(r,c);return{startIndex:u-u%o,endIndex:h===s?s:h-h%o}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=my(n[e],i,e);return Fo()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,h=o.onChange,d=e.pageX-n;d>0?d=Math.min(d,a+s-l-i,a+s-l-r):d<0&&(d=Math.max(d,a-r,a-i));var p=this.getIndex({startX:r+d,endX:i+d});p.startIndex===c&&p.endIndex===u||!h||h(p),this.setState({startX:r+d,endX:i+d,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=Yy(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t,n=this.state,r=n.brushMoveStartX,i=n.movingTravellerId,o=n.endX,a=n.startX,s=this.state[i],l=this.props,c=l.x,u=l.width,h=l.travellerWidth,d=l.onChange,p=l.gap,m=l.data,f={startX:this.state.startX,endX:this.state.endX},g=e.pageX-r;g>0?g=Math.min(g,c+u-h-s):g<0&&(g=Math.max(g,c-s)),f[i]=s+g;var v=this.getIndex(f),y=v.startIndex,_=v.endIndex;this.setState((Hy(t={},i,s+g),Hy(t,"brushMoveStartX",e.pageX),t),(function(){d&&function(){var e=m.length-1;return"startX"===i&&(o>a?y%p===0:_%p===0)||o<a&&_===e||"endX"===i&&(o>a?_%p===0:y%p===0)||o>a&&_===e}()&&d(v)}))}},{key:"renderBackground",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,o=e.height,a=e.fill,s=e.stroke;return t.createElement("rect",{stroke:s,fill:a,x:n,y:r,width:i,height:o})}},{key:"renderPanorama",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,o=e.height,a=e.data,s=e.children,l=e.padding,c=t.Children.only(s);return c?t.cloneElement(c,{x:n,y:r,width:i,height:o,margin:l,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(e,n){var r=this.props,i=r.y,o=r.travellerWidth,s=r.height,l=r.traveller,c=Math.max(e,this.props.x),u=Gy(Gy({},Jo(this.props)),{},{x:c,y:i,width:o,height:s});return t.createElement(sa,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],style:{cursor:"col-resize"}},a.renderTraveller(l,u))}},{key:"renderSlide",value:function(e,n){var r=this.props,i=r.y,o=r.height,a=r.stroke,s=r.travellerWidth,l=Math.min(e,n)+s,c=Math.max(Math.abs(n-e)-s,0);return t.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:l,y:i,width:c,height:o})}},{key:"renderText",value:function(){var e=this.props,n=e.startIndex,r=e.endIndex,i=e.y,o=e.height,a=e.travellerWidth,s=e.stroke,l=this.state,c=l.startX,u=l.endX,h={pointerEvents:"none",fill:s};return t.createElement(sa,{className:"recharts-brush-texts"},t.createElement(Vh,By({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+o/2},h),this.getTextOfTick(n)),t.createElement(Vh,By({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+a+5,y:i+o/2},h),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,n=e.data,r=e.className,i=e.children,o=e.x,a=e.y,s=e.width,l=e.height,c=e.alwaysShowText,u=this.state,h=u.startX,d=u.endX,p=u.isTextActive,m=u.isSlideMoving,f=u.isTravellerMoving;if(!n||!n.length||!yo(o)||!yo(a)||!yo(s)||!yo(l)||s<=0||l<=0)return null;var g=ro()("recharts-brush",r),v=1===t.Children.count(i),y=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=Uy.reduce((function(e,r){return Ny(Ny({},e),{},zy({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return t.createElement(sa,{className:g,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(h,d),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(d,"endX"),(p||m||f||c)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(e){var n=e.x,r=e.y,i=e.width,o=e.height,a=e.stroke,s=Math.floor(r+o/2)-1;return t.createElement(t.Fragment,null,t.createElement("rect",{x:n,y:r,width:i,height:o,fill:a,stroke:"none"}),t.createElement("line",{x1:n+1,y1:s,x2:n+i-1,y2:s,fill:"none",stroke:"#fff"}),t.createElement("line",{x1:n+1,y1:s+2,x2:n+i-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Fo()(e)?e(n):a.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,o=e.travellerWidth,a=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return Gy({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=_d().domain(Vo()(0,s)).range([i,i+o-a]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([i,i+r-o]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],r&&Wy(n.prototype,r),i&&Wy(n,i),a}(t.PureComponent);Qy.displayName="Brush",Qy.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var Jy=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},e_=n(37702),t_=n.n(e_);function n_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(n),!0).forEach((function(t){o_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a_=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},s_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=void 0,this.scale=t}var t,n,r;return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&n_(t.prototype,n),r&&n_(t,r),e}();s_.EPS=1e-4;var l_=function(e){var t=Object.keys(e).reduce((function(t,n){return i_(i_({},t),{},o_({},n,s_.create(e[n])))}),{});return i_(i_({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return t_()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return Lo()(e,(function(e,n){return t[n].isInRange(e)}))}})};function c_(){return c_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c_.apply(this,arguments)}function u_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u_(Object(n),!0).forEach((function(t){d_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p_(e){var n=e.x,r=e.y,i=e.r,o=e.alwaysShow,a=e.clipPathId,s=_o(n),l=_o(r);if(To(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!l)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=l_({x:r.scale,y:i.scale}),a=o.apply({x:t,y:n},{bandAware:!0});return Jy(e,"discard")&&!o.isInRange(a)?null:a}(e);if(!c)return null;var u=c.x,h=c.y,d=e.shape,p=e.className,m=h_(h_({clipPath:Jy(e,"hidden")?"url(#".concat(a,")"):void 0},Jo(e,!0)),{},{cx:u,cy:h});return t.createElement(sa,{className:ro()("recharts-reference-dot",p)},p_.renderDot(d,m),Kh.renderCallByParent(e,{x:u-i,y:h-i,width:2*i,height:2*i}))}p_.displayName="ReferenceDot",p_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},p_.renderDot=function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Fo()(e)?e(n):t.createElement(Nu,c_({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"}))};var m_=n(14064),f_=n.n(m_);function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g_(Object(n),!0).forEach((function(t){y_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function __(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b_(){return b_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b_.apply(this,arguments)}function w_(e){var n=e.x,r=e.y,i=e.segment,o=e.xAxis,a=e.yAxis,s=e.shape,l=e.className,c=e.alwaysShow,u=e.clipPathId;To(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=function(e,t,n,r,i){var o=i.viewBox,a=o.x,s=o.y,l=o.width,c=o.height,u=i.position;if(n){var h=i.y,d=i.yAxis.orientation,p=e.y.apply(h,{position:u});if(Jy(i,"discard")&&!e.y.isInRange(p))return null;var m=[{x:a+l,y:p},{x:a,y:p}];return"left"===d?m.reverse():m}if(t){var f=i.x,g=i.xAxis.orientation,v=e.x.apply(f,{position:u});if(Jy(i,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:s+c},{x:v,y:s}];return"top"===g?y.reverse():y}if(r){var _=i.segment.map((function(t){return e.apply(t,{position:u})}));return Jy(i,"discard")&&f_()(_,(function(t){return!e.isInRange(t)}))?null:_}return null}(l_({x:o.scale,y:a.scale}),_o(n),_o(r),i&&2===i.length,e);if(!h)return null;var d=__(h,2),p=d[0],m=p.x,f=p.y,g=d[1],v=g.x,y=g.y,_=v_(v_({clipPath:Jy(e,"hidden")?"url(#".concat(u,")"):void 0},Jo(e,!0)),{},{x1:m,y1:f,x2:v,y2:y});return t.createElement(sa,{className:ro()("recharts-reference-line",l)},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Fo()(e)?e(n):t.createElement("line",b_({},n,{className:"recharts-reference-line-line"}))}(s,_),Kh.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return a_({x:t,y:n},{x:r,y:i})}({x1:m,y1:f,x2:v,y2:y})))}function S_(){return S_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S_.apply(this,arguments)}function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M_(Object(n),!0).forEach((function(t){T_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}w_.displayName="ReferenceLine",w_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function C_(e){var n=e.x1,r=e.x2,i=e.y1,o=e.y2,a=e.className,s=e.alwaysShow,l=e.clipPathId;To(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=_o(n),u=_o(r),h=_o(i),d=_o(o),p=e.shape;if(!c&&!u&&!h&&!d&&!p)return null;var m=function(e,t,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var h=l_({x:c.scale,y:u.scale}),d={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},p={x:t?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!Jy(i,"discard")||h.isInRange(d)&&h.isInRange(p)?a_(d,p):null}(c,u,h,d,e);if(!m&&!p)return null;var f=Jy(e,"hidden")?"url(#".concat(l,")"):void 0;return t.createElement(sa,{className:ro()("recharts-reference-area",a)},C_.renderRect(p,E_(E_({clipPath:f},Jo(e,!0)),m)),Kh.renderCallByParent(e,m))}C_.displayName="ReferenceArea",C_.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},C_.renderRect=function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Fo()(e)?e(n):t.createElement($u,S_({},n,{className:"recharts-reference-area-rect"}))};var A_=function(e,t,n,r,i){var o=rh(e,w_.displayName),a=rh(e,p_.displayName),s=o.concat(a),l=rh(e,C_.displayName),c="".concat(r,"Id"),u=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[c]===n&&Jy(t.props,"extendDomain")&&yo(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),l.length){var d="".concat(u,"1"),p="".concat(u,"2");h=l.reduce((function(e,t){if(t.props[c]===n&&Jy(t.props,"extendDomain")&&yo(t.props[d])&&yo(t.props[p])){var r=t.props[d],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),h)}return i&&i.length&&(h=i.reduce((function(e,t){return yo(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},P_=n(97143),O_=new(n.n(P_)());O_.setMaxListeners&&O_.setMaxListeners(10);var R_="recharts.syncMouseEvents";function L_(e){return L_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L_(e)}function D_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||G_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k_(){return k_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k_.apply(this,arguments)}function I_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function F_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N_(e,t){return N_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N_(e,t)}function z_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B_(e);if(t){var i=B_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U_(this,n)}}function U_(e,t){return!t||"object"!==L_(t)&&"function"!==typeof t?j_(e):t}function j_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B_(e){return B_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B_(e)}function V_(e){return function(e){if(Array.isArray(e))return H_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||G_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G_(e,t){if(e){if("string"===typeof e)return H_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H_(e,t):void 0}}function H_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W_(Object(n),!0).forEach((function(t){Z_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $_={xAxis:["bottom","top"],yAxis:["left","right"]},X_={x:0,y:0},K_=Number.isFinite?Number.isFinite:isFinite,Y_="function"===typeof requestAnimationFrame?requestAnimationFrame:"function"===typeof setImmediate?setImmediate:setTimeout,Q_="function"===typeof cancelAnimationFrame?cancelAnimationFrame:"function"===typeof clearImmediate?clearImmediate:clearTimeout,J_=function(e,t,n){var r=t.graphicalItems,i=t.dataStartIndex,o=t.dataEndIndex,a=(r||[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(V_(e),V_(n)):e}),[]);return a&&a.length>0?a:n&&n.props&&n.props.data&&n.props.data.length>0?n.props.data:e&&e.length&&yo(i)&&yo(o)?e.slice(i,o+1):[]},ex=function(e,t,n,r){var i=e.graphicalItems,o=e.tooltipAxis,a=J_(t,e);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(e,t){if(t.props.hide)return e;var i,s=t.props.data;o.dataKey&&!o.allowDuplicatedCategory?i=Eo(void 0===s?a:s,o.dataKey,r):i=s&&s[n]||a[n];return i?[].concat(V_(e),[Iy(t,i)]):e}),[])},tx=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),a=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(a>1){if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,d=void 0;if(go(u-c)!==go(h-u)){var p=[];if(go(h-u)===go(s[1]-s[0])){d=h;var m=u+s[1]-s[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{d=c;var f=h+s[1]-s[0];p[0]=Math.min(u,(f+u)/2),p[1]=Math.max(u,(f+u)/2)}var g=[Math.min(u,(d+u)/2),Math.max(u,(d+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){o=r[l].index;break}}else{var v=Math.min(c,h),y=Math.max(c,h);if(e>(v+u)/2&&e<=(y+u)/2){o=r[l].index;break}}}else for(var _=0;_<a;_++)if(0===_&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<a-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===a-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}}else o=0;return o}(o,a,l,s);if(c>=0&&l){var u=l[c]&&l[c].value,h=ex(e,t,c,u),d=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var o=i.coordinate,a=r.radius;return q_(q_(q_({},r),mu(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return q_(q_(q_({},r),mu(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return X_}(n,a,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:h,activeCoordinate:d}}return null},nx=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=e.stackOffset,d=xy(c,i),p=n.reduce((function(t,n){var p=n.props,m=p.type,f=p.dataKey,g=p.allowDataOverflow,v=p.allowDuplicatedCategory,y=p.scale,_=p.ticks,x=n.props[o],b=J_(e.data,{graphicalItems:r.filter((function(e){return e.props[o]===x})),dataStartIndex:s,dataEndIndex:l}),w=b.length;if(!t[x]){var S,M,E;if(f){if(S=fy(b,f,m),"category"===m&&d){var T=function(e){if(!lo()(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);v&&T?(M=S,S=Vo()(0,w)):v||(S=ky(n.props.domain,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(V_(e),[t])}),[]))}else if("category"===m)S=v?S.filter((function(e){return""!==e&&!Ho()(e)})):ky(n.props.domain,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||Ho()(t)?e:[].concat(V_(e),[t])}),[]);else if("number"===m){var C=function(e,t,n,r){var i=t.map((function(t){return yy(e,t,n,r)})).filter((function(e){return!Ho()(e)}));return i&&i.length?i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(b,r.filter((function(e){return e.props[o]===x&&!e.props.hide})),f,i);C&&(S=C)}!d||"number"!==m&&"auto"===y||(E=fy(b,f,"category"))}else S=d?Vo()(0,w):a&&a[x]&&a[x].hasStack&&"number"===m?"expand"===h?[0,1]:Py(a[x].stackGroups,s,l):_y(b,r.filter((function(e){return e.props[o]===x&&!e.props.hide})),m,!0);if("number"===m)S=A_(u,S,x,i,_),n.props.domain&&(S=Ly(n.props.domain,S,g));else if("category"===m&&n.props.domain){var A=n.props.domain;S.every((function(e){return A.indexOf(e)>=0}))&&(S=A)}return q_(q_({},t),{},Z_({},x,q_(q_({},n.props),{},{axisType:i,domain:S,categoricalDomain:E,duplicateDomain:M,originalDomain:n.props.domain,isCategorical:d,layout:c})))}return t}),{});return p},rx=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),h=rh(c,i),d={};return h&&h.length?d=nx(e,{axes:h,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(d=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=J_(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),d=h.length,p=xy(c,i),m=-1;return n.reduce((function(e,t){var f,g=t.props[o];return e[g]?e:(m++,p?f=Vo()(0,d):a&&a[g]&&a[g].hasStack?(f=Py(a[g].stackGroups,s,l),f=A_(u,f,g,i)):(f=Ly(r.defaultProps.domain,_y(h,n.filter((function(e){return e.props[o]===g&&!e.props.hide})),"number"),r.defaultProps.allowDataOverflow),f=A_(u,f,g,i)),q_(q_({},e),{},Z_({},g,q_(q_({axisType:i},r.defaultProps),{},{hide:!0,orientation:ao()($_,"".concat(i,".").concat(m%2),null),domain:f,originalDomain:r.defaultProps.domain,isCategorical:p,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),d},ix=function(e){var t=e.children,n=e.defaultShowTooltip,r=ih(t,Qy.displayName);return{chartX:0,chartY:0,dataStartIndex:r&&r.props&&r.props.startIndex||0,dataEndIndex:r&&r.props&&r.props.endIndex||e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!Ho()(n)&&n}},ox=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ax=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,o=e.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,c=n.children,u=n.margin||{},h=ih(c,Qy.displayName),d=ih(c,mc.displayName),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:q_(q_({},e),{},Z_({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),m=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:q_(q_({},e),{},Z_({},r,ao()(e,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),f=q_(q_({},m),p),g=f.bottom;return h&&(f.bottom+=h.props.height||Qy.defaultProps.height),d&&t&&(f=function(e,t,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=vy({children:i,legendWidth:s}),c=e;if(l){var u=r||{},h=l.align,d=l.verticalAlign,p=l.layout;("vertical"===p||"horizontal"===p&&"center"===d)&&yo(e[h])&&(c=dy(dy({},e),{},py({},h,c[h]+(u.width||0)))),("horizontal"===p||"vertical"===p&&"center"===h)&&yo(e[d])&&(c=dy(dy({},e),{},py({},d,c[d]+(u.height||0))))}return c}(f,0,n,t)),q_(q_({brushBottom:g},f),{},{width:s-f.left-f.right,height:l-f.top-f.bottom})},sx=n(15727),lx=n.n(sx);function cx(e){return function(e){if(Array.isArray(e))return ux(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ux(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ux(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ux(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hx(){return hx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hx.apply(this,arguments)}function dx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function px(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dx(Object(n),!0).forEach((function(t){mx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gx={valueAccessor:function(e){return lo()(e.value)?lx()(e.value):e.value}};function vx(e){var n=e.data,r=e.valueAccessor,i=e.dataKey,o=e.clockWise,a=e.id,s=e.textBreakAll,l=fx(e,["data","valueAccessor","dataKey","clockWise","id","textBreakAll"]);return n&&n.length?t.createElement(sa,{className:"recharts-label-list"},n.map((function(e,n){var c=Ho()(i)?r(e,n):my(e&&e.payload,i),u=Ho()(a)?{}:{id:"".concat(a,"-").concat(n)};return t.createElement(Kh,hx({},Jo(e,!0),l,u,{parentViewBox:e.parentViewBox,index:n,value:c,textBreakAll:s,viewBox:Kh.parseViewBox(Ho()(o)?e:px(px({},e),{},{clockWise:o})),key:"label-".concat(n)}))}))):null}function yx(e,n){return e?!0===e?t.createElement(vx,{key:"labelList-implicit",data:n}):t.isValidElement(e)||Fo()(e)?t.createElement(vx,{key:"labelList-implicit",data:n,content:e}):$o()(e)?t.createElement(vx,hx({data:n},e,{key:"labelList-implicit"})):null:null}function _x(){return _x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(this,arguments)}function xx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return bx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Sx(e){var n=e.offset,r=e.layout,i=e.width,o=e.dataKey,a=e.data,s=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=wx(e,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),h=Jo(u),d=a.map((function(e,a){var u=s(e,o),d=u.x,p=u.y,m=u.value,f=u.errorVal;if(!f)return null;var g,v,y=[];if(Array.isArray(f)){var _=xx(f,2);g=_[0],v=_[1]}else g=v=f;if("vertical"===r){var x=l.scale,b=p+n,w=b+i,S=b-i,M=x(m-g),E=x(m+v);y.push({x1:E,y1:w,x2:E,y2:S}),y.push({x1:M,y1:b,x2:E,y2:b}),y.push({x1:M,y1:w,x2:M,y2:S})}else if("horizontal"===r){var T=c.scale,C=d+n,A=C-i,P=C+i,O=T(m-g),R=T(m+v);y.push({x1:A,y1:R,x2:P,y2:R}),y.push({x1:C,y1:O,x2:C,y2:R}),y.push({x1:A,y1:O,x2:P,y2:O})}return t.createElement(sa,_x({className:"recharts-errorBar",key:"bar-".concat(a)},h),y.map((function(e,n){return t.createElement("line",_x({},e,{key:"line-".concat(n)}))})))}));return t.createElement(sa,{className:"recharts-errorBars"},d)}function Mx(e){return Mx="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mx(e)}function Ex(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tx(){return Tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tx.apply(this,arguments)}function Cx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ax(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cx(Object(n),!0).forEach((function(t){Px(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Px(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ox(e){return function(e){if(Array.isArray(e))return Rx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Rx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kx(e,t){return kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kx(e,t)}function Ix(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nx(e);if(t){var i=Nx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fx(this,n)}}function Fx(e,t){return!t||"object"!==Mx(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nx(e)}vx.displayName="LabelList",vx.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=rh(i,vx.displayName).map((function(e,r){return(0,t.cloneElement)(e,{data:n,key:"labelList-".concat(r)})}));if(!r)return o;var a=yx(e.label,n);return[a].concat(cx(o))},vx.defaultProps=gx,Sx.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},Sx.displayName="ErrorBar";var zx=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kx(e,t)}(a,e);var n,r,i,o=Ix(a);function a(){var e;Lx(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).mainCurve=void 0,e.state={isAnimationFinished:!0,totalLength:0},e.getStrokeDasharray=function(e,t,n){for(var r=n.reduce((function(e,t){return e+t})),i=Math.floor(e/r),o=e%r,s=t-e,l=[],c=0,u=0;;u+=n[c],++c)if(u+n[c]>o){l=[].concat(Ox(n.slice(0,c)),[o-u]);break}var h=l.length%2===0?[0,s]:[s];return[].concat(Ox(a.repeat(n,i)),Ox(l),h).map((function(e){return"".concat(e,"px")})).join(", ")},e.id=bo("recharts-line-"),e.pathRef=function(t){e.mainCurve=t},e.handleAnimationEnd=function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()},e.handleAnimationStart=function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()},e}return n=a,r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,n=e.points,r=e.xAxis,i=e.yAxis,o=e.layout,a=e.children,s=rh(a,Sx.displayName);if(!s)return null;function l(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:my(e.payload,t)}}return s.map((function(e,a){return t.cloneElement(e,{key:"bar-".concat(a),data:n,xAxis:r,yAxis:i,layout:o,dataPointFormatter:l})}))}},{key:"renderDots",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,i=r.dot,o=r.points,s=r.dataKey,l=Jo(this.props),c=Jo(i,!0),u=o.map((function(e,t){var n=Ax(Ax(Ax({key:"dot-".concat(t),r:3},l),c),{},{value:e.value,dataKey:s,cx:e.x,cy:e.y,index:t,payload:e.payload});return a.renderDotItem(i,n)})),h={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement(sa,Tx({className:"recharts-line-dots",key:"dots"},h),u)}},{key:"renderCurveStatically",value:function(e,n,r,i){var o=this.props,a=o.type,s=o.layout,l=o.connectNulls,c=(o.ref,Ex(o,["type","layout","connectNulls","ref"])),u=Ax(Ax(Ax({},Jo(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(r,")"):null,points:e},i),{},{type:a,layout:s,connectNulls:l});return t.createElement(Jc,Tx({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,n){var r=this,i=this.props,o=i.points,a=i.strokeDasharray,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,h=i.animationId,d=i.animateNewValues,p=i.width,m=i.height,f=this.state,g=f.prevPoints,v=f.totalLength;return t.createElement(As,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var i=t.t;if(g){var s=g.length/o.length,l=o.map((function(e,t){var n=Math.floor(t*s);if(g[n]){var r=g[n],o=Mo(r.x,e.x),a=Mo(r.y,e.y);return Ax(Ax({},e),{},{x:o(i),y:a(i)})}if(d){var l=Mo(2*p,e.x),c=Mo(m/2,e.y);return Ax(Ax({},e),{},{x:l(i),y:c(i)})}return Ax(Ax({},e),{},{x:e.x,y:e.y})}));return r.renderCurveStatically(l,e,n)}var c,u=Mo(0,v)(i);if(a){var h="".concat(a).split(/[,\s]+/gim).map((function(e){return parseFloat(e)}));c=r.getStrokeDasharray(u,v,h)}else c="".concat(u,"px ").concat(v-u,"px");return r.renderCurveStatically(o,e,n,{strokeDasharray:c})}))}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,i=n.isAnimationActive,o=this.state,a=o.prevPoints,s=o.totalLength;return i&&r&&r.length&&(!a&&s>0||!bd()(a,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e=this.props,n=e.hide,r=e.dot,i=e.points,o=e.className,a=e.xAxis,s=e.yAxis,l=e.top,c=e.left,u=e.width,h=e.height,d=e.isAnimationActive,p=e.id;if(n||!i||!i.length)return null;var m=this.state.isAnimationFinished,f=1===i.length,g=ro()("recharts-line",o),v=a&&a.allowDataOverflow||s&&s.allowDataOverflow,y=Ho()(p)?this.id:p;return t.createElement(sa,{className:g},v?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(y)},t.createElement("rect",{x:c,y:l,width:u,height:h}))):null,!f&&this.renderCurve(v,y),this.renderErrorBar(),(f||r)&&this.renderDots(v,y),(!d||m)&&vx.renderCallByParent(this.props,i))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!==0?[].concat(Ox(e),[0]):e,r=[],i=0;i<t;++i)r=[].concat(Ox(r),Ox(n));return r}},{key:"renderDotItem",value:function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(Fo()(e))r=e(n);else{var i=ro()("recharts-line-dot",e?e.className:"");r=t.createElement(Nu,Tx({},n,{className:i}))}return r}}],r&&Dx(n.prototype,r),i&&Dx(n,i),a}(t.PureComponent);zx.displayName="Line",zx.defaultProps={xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Gs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1},zx.getComposedData=function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,a=e.dataKey,s=e.bandSize,l=e.displayedData,c=e.offset,u=t.layout,h=l.map((function(e,t){var l=my(e,a);return"horizontal"===u?{x:Ay({axis:n,ticks:i,bandSize:s,entry:e,index:t}),y:Ho()(l)?null:r.scale(l),value:l,payload:e}:{x:Ho()(l)?null:n.scale(l),y:Ay({axis:r,ticks:o,bandSize:s,entry:e,index:t}),value:l,payload:e}}));return Ax({points:h,layout:u},c)};var Ux=function(){return null};Ux.displayName="XAxis",Ux.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",domain:[0,"auto"],padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var jx=function(){return null};jx.displayName="YAxis",jx.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",domain:[0,"auto"],padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var Bx=function(e){var n,r,i=e.chartName,o=e.GraphicalChild,a=e.defaultTooltipEventType,s=void 0===a?"axis":a,l=e.validateTooltipEventTypes,c=void 0===l?["axis"]:l,u=e.axisComponents,h=e.legendContent,d=e.formatAxisMap,p=e.defaultProps,m=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,o=t.updateId,a=t.dataStartIndex,s=t.dataEndIndex,l=e.barSize,c=e.layout,h=e.barGap,d=e.barCategoryGap,p=e.maxBarSize,m=ox(c),f=m.numericAxisName,g=m.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some((function(e){var t=Ju(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),y=v&&function(e){var t=e.barSize,n=e.stackGroups,r=void 0===n?{}:n;if(!r)return{};for(var i={},o=Object.keys(r),a=0,s=o.length;a<s;a++)for(var l=r[o[a]].stackGroups,c=Object.keys(l),u=0,h=c.length;u<h;u++){var d=l[c[u]],p=d.items,m=d.cateAxisId,f=p.filter((function(e){return Ju(e.type).indexOf("Bar")>=0}));if(f&&f.length){var g=f[0].props.barSize,v=f[0].props[m];i[v]||(i[v]=[]),i[v].push({item:f[0],stackList:f.slice(1),barSize:Ho()(g)?t:g})}}return i}({barSize:l,stackGroups:r}),_=[];return n.forEach((function(n,l){var m=J_(e.data,{dataStartIndex:a,dataEndIndex:s},n),v=n.props,x=v.dataKey,b=v.maxBarSize,w=n.props["".concat(f,"Id")],S=n.props["".concat(g,"Id")],M=u.reduce((function(e,r){var i,o=t["".concat(r.axisType,"Map")],a=n.props["".concat(r.axisType,"Id")],s=o&&o[a];return q_(q_({},e),{},(Z_(i={},r.axisType,s),Z_(i,"".concat(r.axisType,"Ticks"),wy(s)),i))}),{}),E=M[g],T=M["".concat(g,"Ticks")],C=r&&r[w]&&r[w].hasStack&&function(e,t){var n=e.props.stackId;if(_o(n)){var r=t[n];if(r&&r.items.length){for(var i=-1,o=0,a=r.items.length;o<a;o++)if(r.items[o]===e){i=o;break}return i>=0?r.stackedData[i]:null}}return null}(n,r[w].stackGroups),A=Ju(n.type).indexOf("Bar")>=0,P=Dy(E,T),O=[];if(A){var R,L,D=Ho()(b)?p:b,k=null!==(R=null!==(L=Dy(E,T,!0))&&void 0!==L?L:D)&&void 0!==R?R:0;O=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,a=e.maxBarSize,s=o.length;if(s<1)return null;var l,c=wo(t,r,0,!0);if(o[0].barSize===+o[0].barSize){var u=!1,h=r/s,d=o.reduce((function(e,t){return e+t.barSize||0}),0);(d+=(s-1)*c)>=r&&(d-=(s-1)*c,c=0),d>=r&&h>0&&(u=!0,d=s*(h*=.9));var p={offset:((r-d)/2>>0)-c,size:0};l=o.reduce((function(e,t){var n=[].concat(cy(e),[{item:t.item,position:{offset:p.offset+p.size+c,size:u?h:t.barSize}}]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:p})})),n}),[])}else{var m=wo(n,r,0,!0);r-2*m-(s-1)*c<=0&&(c=0);var f=(r-2*m-(s-1)*c)/s;f>1&&(f>>=0);var g=a===+a?Math.min(f,a):f;l=o.reduce((function(e,t,n){var r=[].concat(cy(e),[{item:t.item,position:{offset:m+(f+c)*n+(f-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),[])}return l}({barGap:h,barCategoryGap:d,bandSize:k!==P?k:P,sizeList:y[S],maxBarSize:D}),k!==P&&(O=O.map((function(e){return q_(q_({},e),{},{position:q_(q_({},e.position),{},{offset:e.position.offset-k/2})})})))}var I,F,N,z=n&&n.type&&n.type.getComposedData;z&&_.push({props:q_(q_({},z(q_(q_({},M),{},{displayedData:m,props:e,dataKey:x,item:n,bandSize:P,barPosition:O,offset:i,stackedData:C,layout:c,dataStartIndex:a,dataEndIndex:s}))),{},(I={key:n.key||"item-".concat(l)},Z_(I,f,M[f]),Z_(I,g,M[g]),Z_(I,"animationId",o),I)),childIndex:(F=n,N=e.children,nh(N).indexOf(F)),item:n})})),_},f=function(e,t){var n=e.props,r=e.dataStartIndex,a=e.dataEndIndex,s=e.updateId;if(!oh({props:n}))return null;var l=n.children,c=n.layout,h=n.stackOffset,p=n.data,f=n.reverseStackOrder,g=ox(c),v=g.numericAxisName,y=g.cateAxisName,_=rh(l,o),x=function(e,t,n,r,i,o){if(!e)return null;var a=(o?t.reverse():t).reduce((function(e,t){var i=t.props,o=i.stackId;if(i.hide)return e;var a=t.props[n],s=e[a]||{hasStack:!1,stackGroups:{}};if(_o(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(t),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[bo("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return dy(dy({},e),{},py({},a,s))}),{});return Object.keys(a).reduce((function(t,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,o){var a=s.stackGroups[o];return dy(dy({},t),{},py({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:Ty(e,a.items,i)}))}),{})),dy(dy({},t),{},py({},o,s))}),{})}(p,_,"".concat(v,"Id"),"".concat(y,"Id"),h,f),b=u.reduce((function(e,t){var i="".concat(t.axisType,"Map");return q_(q_({},e),{},Z_({},i,rx(n,q_(q_({},t),{},{graphicalItems:_,stackGroups:t.axisType===v&&x,dataStartIndex:r,dataEndIndex:a}))))}),{}),w=ax(q_(q_({},b),{},{props:n,graphicalItems:_}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(b).forEach((function(e){b[e]=d(n,b[e],w,e.replace("Map",""),i)}));var S=function(e){var t=So(e),n=wy(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:jo()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:Dy(t,n)}}(b["".concat(y,"Map")]),M=m(n,q_(q_({},b),{},{dataStartIndex:r,dataEndIndex:a,updateId:s,graphicalItems:_,stackGroups:x,offset:w}));return q_(q_({formattedGraphicalItems:M,graphicalItems:_,offset:w,stackGroups:x},S),b)};return r=n=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N_(e,t)}(l,e);var n,r,o,a=z_(l);function l(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this,e)).uniqueChartId=void 0,n.clipPathId=void 0,n.legendInstance=void 0,n.deferId=void 0,n.container=void 0,n.clearDeferId=function(){!Ho()(n.deferId)&&Q_&&Q_(n.deferId),n.deferId=null},n.handleLegendBBoxUpdate=function(e){if(e&&n.legendInstance){var t=n.state,r=t.dataStartIndex,i=t.dataEndIndex,o=t.updateId;n.setState(q_({legendBBox:e},f({props:n.props,dataStartIndex:r,dataEndIndex:i,updateId:o},q_(q_({},n.state),{},{legendBBox:e}))))}},n.handleReceiveSyncEvent=function(e,t,r){n.props.syncId===e&&t!==n.uniqueChartId&&(n.clearDeferId(),n.deferId=Y_&&Y_(n.applySyncEvent.bind(j_(n),r)))},n.handleBrushChange=function(e){var t=e.startIndex,r=e.endIndex;if(t!==n.state.dataStartIndex||r!==n.state.dataEndIndex){var i=n.state.updateId;n.setState((function(){return q_({dataStartIndex:t,dataEndIndex:r},f({props:n.props,dataStartIndex:t,dataEndIndex:r,updateId:i},n.state))})),n.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}},n.handleMouseEnter=function(e){var t=n.props.onMouseEnter,r=n.getMouseInfo(e);if(r){var i=q_(q_({},r),{},{isTooltipActive:!0});n.setState(i),n.triggerSyncEvent(i),Fo()(t)&&t(i,e)}},n.triggeredAfterMouseMove=function(e){var t=n.props.onMouseMove,r=n.getMouseInfo(e),i=r?q_(q_({},r),{},{isTooltipActive:!0}):{isTooltipActive:!1};n.setState(i),n.triggerSyncEvent(i),Fo()(t)&&t(i,e)},n.handleItemMouseEnter=function(e){n.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))},n.handleItemMouseLeave=function(){n.setState((function(){return{isTooltipActive:!1}}))},n.handleMouseMove=function(e){e&&Fo()(e.persist)&&e.persist(),n.triggeredAfterMouseMove(e)},n.handleMouseLeave=function(e){var t=n.props.onMouseLeave,r={isTooltipActive:!1};n.setState(r),n.triggerSyncEvent(r),Fo()(t)&&t(r,e),n.cancelThrottledTriggerAfterMouseMove()},n.handleOuterEvent=function(e){var t=function(e){var t=e&&e.type;return t&&Qu[t]?Qu[t]:null}(e),r=ao()(n.props,"".concat(t));t&&Fo()(r)&&r(/.*touch.*/i.test(t)?n.getMouseInfo(e.changedTouches[0]):n.getMouseInfo(e),e)},n.handleClick=function(e){var t=n.props.onClick,r=n.getMouseInfo(e);if(r){var i=q_(q_({},r),{},{isTooltipActive:!0});n.setState(i),n.triggerSyncEvent(i),Fo()(t)&&t(i,e)}},n.handleMouseDown=function(e){var t=n.props.onMouseDown;Fo()(t)&&t(n.getMouseInfo(e),e)},n.handleMouseUp=function(e){var t=n.props.onMouseUp;Fo()(t)&&t(n.getMouseInfo(e),e)},n.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseMove(e.changedTouches[0])},n.handleTouchStart=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseDown(e.changedTouches[0])},n.handleTouchEnd=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseUp(e.changedTouches[0])},n.verticalCoordinatesGenerator=function(e){var t=e.xAxis,n=e.width,r=e.height,i=e.offset;return by(hd.getTicks(q_(q_(q_({},hd.defaultProps),t),{},{ticks:wy(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.left,i.left+i.width)},n.horizontalCoordinatesGenerator=function(e){var t=e.yAxis,n=e.width,r=e.height,i=e.offset;return by(hd.getTicks(q_(q_(q_({},hd.defaultProps),t),{},{ticks:wy(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.top,i.top+i.height)},n.axesTicksGenerator=function(e){return wy(e,!0)},n.renderCursor=function(e){var r=n.state,o=r.isTooltipActive,a=r.activeCoordinate,s=r.activePayload,l=r.offset,c=r.activeTooltipIndex,u=n.getTooltipEventType();if(!e||!e.props.cursor||!o||!a||"ScatterChart"!==i&&"axis"!==u)return null;var h,d=n.props.layout,p=Jc;if("ScatterChart"===i)h=a,p=lu;else if("BarChart"===i)h=n.getCursorRectangle(),p=$u;else if("radial"===d){var m=n.getCursorPoints(),f=m.cx,g=m.cy,v=m.radius;h={cx:f,cy:g,startAngle:m.startAngle,endAngle:m.endAngle,innerRadius:v,outerRadius:v},p=Au}else h={points:n.getCursorPoints()},p=Jc;var y=e.key||"_recharts-cursor",_=q_(q_(q_(q_({stroke:"#ccc",pointerEvents:"none"},l),h),Jo(e.props.cursor)),{},{payload:s,payloadIndex:c,key:y,className:"recharts-tooltip-cursor"});return(0,t.isValidElement)(e.props.cursor)?(0,t.cloneElement)(e.props.cursor,_):(0,t.createElement)(p,_)},n.renderPolarAxis=function(e,r,i){var o=ao()(e,"type.axisType"),a=ao()(n.state,"".concat(o,"Map"))[e.props["".concat(o,"Id")]];return(0,t.cloneElement)(e,q_(q_({},a),{},{className:o,key:e.key||"".concat(r,"-").concat(i),ticks:wy(a,!0)}))},n.renderXAxis=function(e,t,r){var i=n.state.xAxisMap[e.props.xAxisId];return n.renderAxis(i,e,t,r)},n.renderYAxis=function(e,t,r){var i=n.state.yAxisMap[e.props.yAxisId];return n.renderAxis(i,e,t,r)},n.renderGrid=function(e){var r=n.state,i=r.xAxisMap,o=r.yAxisMap,a=r.offset,s=n.props,l=s.width,c=s.height,u=So(i),h=ko()(o,(function(e){return Lo()(e.domain,K_)}))||So(o),d=e.props||{};return(0,t.cloneElement)(e,{key:e.key||"grid",x:yo(d.x)?d.x:a.left,y:yo(d.y)?d.y:a.top,width:yo(d.width)?d.width:a.width,height:yo(d.height)?d.height:a.height,xAxis:u,yAxis:h,offset:a,chartWidth:l,chartHeight:c,verticalCoordinatesGenerator:d.verticalCoordinatesGenerator||n.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:d.horizontalCoordinatesGenerator||n.horizontalCoordinatesGenerator})},n.renderPolarGrid=function(e){var r=e.props,i=r.radialLines,o=r.polarAngles,a=r.polarRadius,s=n.state,l=s.radiusAxisMap,c=s.angleAxisMap,u=So(l),h=So(c),d=h.cx,p=h.cy,m=h.innerRadius,f=h.outerRadius;return(0,t.cloneElement)(e,{polarAngles:lo()(o)?o:wy(h,!0).map((function(e){return e.coordinate})),polarRadius:lo()(a)?a:wy(u,!0).map((function(e){return e.coordinate})),cx:d,cy:p,innerRadius:m,outerRadius:f,key:e.key||"polar-grid",radialLines:i})},n.renderLegend=function(){var e=n.state.formattedGraphicalItems,r=n.props,i=r.children,o=r.width,a=r.height,s=n.props.margin||{},l=o-(s.left||0)-(s.right||0),c=vy({children:i,formattedGraphicalItems:e,legendWidth:l,legendContent:h});if(!c)return null;var u=c.item,d=I_(c,["item"]);return(0,t.cloneElement)(u,q_(q_({},d),{},{chartWidth:o,chartHeight:a,margin:s,ref:function(e){n.legendInstance=e},onBBoxUpdate:n.handleLegendBBoxUpdate}))},n.renderTooltip=function(){var e=n.props.children,r=ih(e,nl.displayName);if(!r)return null;var i=n.state,o=i.isTooltipActive,a=i.activeCoordinate,s=i.activePayload,l=i.activeLabel,c=i.offset;return(0,t.cloneElement)(r,{viewBox:q_(q_({},c),{},{x:c.left,y:c.top}),active:o,label:l,payload:o?s:[],coordinate:a})},n.renderBrush=function(e){var r=n.props,i=r.margin,o=r.data,a=n.state,s=a.offset,l=a.dataStartIndex,c=a.dataEndIndex,u=a.updateId;return(0,t.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:Sy(n.handleBrushChange,null,e.props.onChange),data:o,x:yo(e.props.x)?e.props.x:s.left,y:yo(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(i.bottom||0),width:yo(e.props.width)?e.props.width:s.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})},n.renderReferenceElement=function(e,r,i){if(!e)return null;var o=j_(n).clipPathId,a=n.state,s=a.xAxisMap,l=a.yAxisMap,c=a.offset,u=e.props,h=u.xAxisId,d=u.yAxisId;return(0,t.cloneElement)(e,{key:e.key||"".concat(r,"-").concat(i),xAxis:s[h],yAxis:l[d],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:o})},n.renderActivePoints=function(e){var t=e.item,n=e.activePoint,r=e.basePoint,i=e.childIndex,o=e.isRange,a=[],s=t.props.key,c=t.item.props,u=c.activeDot,h=q_(q_({index:i,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:gy(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value,key:"".concat(s,"-activePoint-").concat(i)},Jo(u)),ea(u));return a.push(l.renderActiveDot(u,h)),r?a.push(l.renderActiveDot(u,q_(q_({},h),{},{cx:r.x,cy:r.y,key:"".concat(s,"-basePoint-").concat(i)}))):o&&a.push(null),a},n.renderGraphicChild=function(e,r,i){var o=n.filterFormatItem(e,r,i);if(!o)return null;var a=n.getTooltipEventType(),s=n.state,l=s.isTooltipActive,c=s.tooltipAxis,u=s.activeTooltipIndex,h=s.activeLabel,d=n.props.children,p=ih(d,nl.displayName),m=o.props,f=m.points,g=m.isRange,v=m.baseLine,y=o.item.props,_=y.activeDot,x=!y.hide&&l&&p&&_&&u>=0,b={};"axis"!==a&&p&&"click"===p.props.trigger?b={onClick:Sy(n.handleItemMouseEnter,null,e.props.onCLick)}:"axis"!==a&&(b={onMouseLeave:Sy(n.handleItemMouseLeave,null,e.props.onMouseLeave),onMouseEnter:Sy(n.handleItemMouseEnter,null,e.props.onMouseEnter)});var w=(0,t.cloneElement)(e,q_(q_({},o.props),b));if(x){var S,M;if(c.dataKey&&!c.allowDuplicatedCategory){var E="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());S=Eo(f,E,h),M=g&&v&&Eo(v,E,h)}else S=f[u],M=g&&v&&v[u];if(!Ho()(S))return[w].concat(V_(n.renderActivePoints({item:o,activePoint:S,basePoint:M,childIndex:u,isRange:g})))}return g?[w,null,null]:[w,null]},n.renderCustomized=function(e,r,i){return(0,t.cloneElement)(e,q_(q_({key:"recharts-customized-".concat(i)},n.props),n.state))},n.uniqueChartId=Ho()(e.id)?bo("recharts"):e.id,n.clipPathId="".concat(n.uniqueChartId,"-clip"),e.throttleDelay&&(n.triggeredAfterMouseMove=zo()(n.triggeredAfterMouseMove,e.throttleDelay)),n.state={},n}return n=l,r=[{key:"componentDidMount",value:function(){Ho()(this.props.syncId)||this.addListener()}},{key:"componentDidUpdate",value:function(e){Ho()(e.syncId)&&!Ho()(this.props.syncId)&&this.addListener(),!Ho()(e.syncId)&&Ho()(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),Ho()(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){"function"===typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=ih(this.props.children,nl.displayName);if(e&&qo()(e.props.shared)){var t=e.props.shared?"axis":"item";return c.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=function(e,t){return{chartX:Math.round(e.pageX-t.left),chartY:Math.round(e.pageY-t.top)}}(e,function(e){var t=e.ownerDocument.documentElement,n={top:0,left:0};return"undefined"!==typeof e.getBoundingClientRect&&(n=e.getBoundingClientRect()),{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}(this.container)),n=this.inRange(t.chartX,t.chartY);if(!n)return null;var r=this.state,i=r.xAxisMap,o=r.yAxisMap;if("axis"!==this.getTooltipEventType()&&i&&o){var a=So(i).scale,s=So(o).scale,l=a&&a.invert?a.invert(t.chartX):null,c=s&&s.invert?s.invert(t.chartY):null;return q_(q_({},t),{},{xValue:l,yValue:c})}var u=tx(this.state,this.props.data,this.props.layout,n);return u?q_(q_({},t),u):null}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,n=t.activeCoordinate,r=t.offset,i=t.tooltipAxisBandSize,o=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?n.x-o:r.left+.5,y:"horizontal"===e?r.top+.5:n.y-o,width:"horizontal"===e?i:r.width-1,height:"horizontal"===e?r.height-1:i}}},{key:"getCursorPoints",value:function(){var e,t,n,r,i=this.props.layout,o=this.state,a=o.activeCoordinate,s=o.offset;if("horizontal"===i)n=e=a.x,t=s.top,r=s.top+s.height;else if("vertical"===i)r=t=a.y,e=s.left,n=s.left+s.width;else if(!Ho()(a.cx)||!Ho()(a.cy)){if("centric"!==i){var l=a.cx,c=a.cy,u=a.radius,h=a.startAngle,d=a.endAngle;return{points:[mu(l,c,u,h),mu(l,c,u,d)],cx:l,cy:c,radius:u,startAngle:h,endAngle:d}}var p=a.cx,m=a.cy,f=a.innerRadius,g=a.outerRadius,v=a.angle,y=mu(p,m,f,v),_=mu(p,m,g,v);e=y.x,t=y.y,n=_.x,r=_.y}return[{x:e,y:t},{x:n,y:r}]}},{key:"inRange",value:function(e,t){var n=this.props.layout;if("horizontal"===n||"vertical"===n){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var i=this.state,o=i.angleAxisMap,a=i.radiusAxisMap;if(o&&a){var s=So(o);return vu({x:e,y:t},s)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=ih(e,nl.displayName),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),q_(q_({},ea(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){O_.on(R_,this.handleReceiveSyncEvent),O_.setMaxListeners&&O_._maxListeners&&O_.setMaxListeners(O_._maxListeners+1)}},{key:"removeListener",value:function(){O_.removeListener(R_,this.handleReceiveSyncEvent),O_.setMaxListeners&&O_._maxListeners&&O_.setMaxListeners(O_._maxListeners-1)}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;Ho()(t)||O_.emit(R_,t,this.uniqueChartId,e)}},{key:"applySyncEvent",value:function(e){var t=this.props,n=t.layout,r=t.syncMethod,i=this.state.updateId,o=e.dataStartIndex,a=e.dataEndIndex;if(Ho()(e.dataStartIndex)&&Ho()(e.dataEndIndex))if(Ho()(e.activeTooltipIndex))this.setState(e);else{var s=e.chartX,l=e.chartY,c=e.activeTooltipIndex,u=this.state,h=u.offset,d=u.tooltipTicks;if(!h)return;if("function"===typeof r)c=r(d,e);else if("value"===r){c=-1;for(var p=0;p<d.length;p++)if(d[p].value===e.activeLabel){c=p;break}}var m=q_(q_({},h),{},{x:h.left,y:h.top}),g=Math.min(s,m.x+m.width),v=Math.min(l,m.y+m.height),y=d[c]&&d[c].value,_=ex(this.state,this.props.data,c),x=d[c]?{x:"horizontal"===n?d[c].coordinate:g,y:"horizontal"===n?v:d[c].coordinate}:X_;this.setState(q_(q_({},e),{},{activeLabel:y,activeCoordinate:x,activePayload:_,activeTooltipIndex:c}))}else this.setState(q_({dataStartIndex:o,dataEndIndex:a},f({props:this.props,dataStartIndex:o,dataEndIndex:a,updateId:i},this.state)))}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===Ju(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderAxis",value:function(e,n,r,i){var o=this.props,a=o.width,s=o.height;return t.createElement(hd,k_({},e,{className:"recharts-".concat(e.axisType," ").concat(e.axisType),key:n.key||"".concat(r,"-").concat(i),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var e=this.clipPathId,n=this.state.offset,r=n.left,i=n.top,o=n.height,a=n.width;return t.createElement("defs",null,t.createElement("clipPath",{id:e},t.createElement("rect",{x:r,y:i,height:o,width:a})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=D_(t,2),r=n[0],i=n[1];return q_(q_({},e),{},Z_({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=D_(t,2),r=n[0],i=n[1];return q_(q_({},e),{},Z_({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.xAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getYScaleByAxisId",value:function(e){var t,n;return null===(t=this.state.yAxisMap)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.scale}},{key:"getItemByXY",value:function(e){var t=this.state.formattedGraphicalItems;if(t&&t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n],o=i.props,a=i.item,s=Ju(a.type);if("Bar"===s){var l=(o.data||[]).find((function(t){return Zu(e,t)}));if(l)return{graphicalItem:i,payload:l}}else if("RadialBar"===s){var c=(o.data||[]).find((function(t){return vu(e,t)}));if(c)return{graphicalItem:i,payload:c}}}return null}},{key:"render",value:function(){var e=this;if(!oh(this))return null;var n=this.props,r=n.children,i=n.className,o=n.width,a=n.height,s=n.style,l=n.compact,c=I_(n,["children","className","width","height","style","compact"]),u=Jo(c),h={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(l)return t.createElement(ia,k_({},u,{width:o,height:a}),this.renderClipPath(),uh(r,h));var d=this.parseEventsOfWrapper();return t.createElement("div",k_({className:ro()("recharts-wrapper",i),style:q_({position:"relative",cursor:"default",width:o,height:a},s)},d,{ref:function(t){e.container=t}}),t.createElement(ia,k_({},u,{width:o,height:a}),this.renderClipPath(),uh(r,h)),this.renderLegend(),this.renderTooltip())}}],r&&F_(n.prototype,r),o&&F_(n,o),l}(t.Component),n.displayName=i,n.defaultProps=q_({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p),n.getDerivedStateFromProps=function(e,t){var n=e.data,r=e.children,i=e.width,o=e.height,a=e.layout,s=e.stackOffset,l=e.margin;if(Ho()(t.updateId)){var c=ix(e);return q_(q_(q_({},c),{},{updateId:0},f(q_(q_({props:e},c),{},{updateId:0}),t)),{},{prevData:n,prevWidth:i,prevHeight:o,prevLayout:a,prevStackOffset:s,prevMargin:l,prevChildren:r})}if(n!==t.prevData||i!==t.prevWidth||o!==t.prevHeight||a!==t.prevLayout||s!==t.prevStackOffset||!Ku(l,t.prevMargin)){var u=ix(e),h={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},d=q_(q_({},tx(t,n,a)),{},{updateId:t.updateId+1}),p=q_(q_(q_({},u),h),d);return q_(q_(q_({},p),f(q_({props:e},p),t)),{},{prevData:n,prevWidth:i,prevHeight:o,prevLayout:a,prevStackOffset:s,prevMargin:l,prevChildren:r})}if(!lh(r,t.prevChildren)){var m=!Ho()(n)?t.updateId:t.updateId+1;return q_(q_({updateId:m},f(q_(q_({props:e},t),{},{updateId:m}),t)),{},{prevChildren:r})}return null},n.renderActiveDot=function(e,n){var r;return r=(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):Fo()(e)?e(n):t.createElement(Nu,n),t.createElement(sa,{className:"recharts-active-dot",key:n.key},r)},r}({chartName:"LineChart",GraphicalChild:zx,axisComponents:[{axisType:"xAxis",AxisComp:Ux},{axisType:"yAxis",AxisComp:jx}],formatAxisMap:function(t,n,r,i,o){var a=t.width,s=t.height,l=t.layout,c=t.children,u=Object.keys(n),h={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},d=!!ih(c,"Bar");return u.reduce((function(a,s){var c,u,p,m,f,g=n[s],v=g.orientation,y=g.domain,_=g.padding,x=void 0===_?{}:_,b=g.mirror,w=g.reversed,S="".concat(v).concat(b?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var M=y[1]-y[0],E=1/0,T=g.categoricalDomain.sort();T.forEach((function(e,t){t>0&&(E=Math.min((e||0)-(T[t-1]||0),E))}));var C=E/M,A="vertical"===g.layout?r.height:r.width;if("gap"===g.padding&&(c=C*A/2),"no-gap"===g.padding){var P=wo(t.barCategoryGap,C*A),O=C*A/2;c=O-P-(O-P)/A*P}}u="xAxis"===i?[r.left+(x.left||0)+(c||0),r.left+r.width-(x.right||0)-(c||0)]:"yAxis"===i?"horizontal"===l?[r.top+r.height-(x.bottom||0),r.top+(x.top||0)]:[r.top+(x.top||0)+(c||0),r.top+r.height-(x.bottom||0)-(c||0)]:g.range,w&&(u=[u[1],u[0]]);var R=function(t,n,r){var i=t.scale,o=t.type,a=t.layout,s=t.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===s?{scale:vd(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:Im(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:_d(),realScaleType:"point"}:"category"===o?{scale:vd(),realScaleType:"band"}:{scale:Im(),realScaleType:"linear"};if(fo()(i)){var l="scale".concat(il()(i));return{scale:(e[l]||_d)(),realScaleType:e[l]?l:"point"}}return Fo()(i)?{scale:i}:{scale:_d(),realScaleType:"point"}}(g,o,d),L=R.scale,D=R.realScaleType;L.domain(y).range(u),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-My,o=Math.max(r[0],r[1])+My,a=e(t[0]),s=e(t[n-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[n-1]])}}(L);var k=Cy(L,i_(i_({},g),{},{realScaleType:D}));"xAxis"===i?(f="top"===v&&!b||"bottom"===v&&b,p=r.left,m=h[S]-f*g.height):"yAxis"===i&&(f="left"===v&&!b||"right"===v&&b,p=h[S]-f*g.width,m=r.top);var I=i_(i_(i_({},g),k),{},{realScaleType:D,x:p,y:m,scale:L,width:"xAxis"===i?r.width:g.width,height:"yAxis"===i?r.height:g.height});return I.bandSize=Dy(I,k),g.hide||"xAxis"!==i?g.hide||(h[S]+=(f?-1:1)*I.width):h[S]+=(f?-1:1)*I.height,i_(i_({},a),{},o_({},s,I))}),{})}});function Vx(e){return Vx="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vx(e)}function Gx(){return Gx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gx.apply(this,arguments)}function Hx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wx(Object(n),!0).forEach((function(t){Zx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kx(e,t){return Kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kx(e,t)}function Yx(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jx(e);if(t){var i=Jx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qx(this,n)}}function Qx(e,t){return!t||"object"!==Vx(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jx(e){return Jx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jx(e)}var eb=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kx(e,t)}(a,e);var n,r,i,o=Yx(a);function a(){return $x(this,a),o.apply(this,arguments)}return n=a,r=[{key:"renderHorizontal",value:function(e){var n=this,r=this.props,i=r.x,o=r.width,s=r.horizontal;if(!e||!e.length)return null;var l=e.map((function(e,t){var r=qx(qx({},n.props),{},{x1:i,y1:e,x2:i+o,y2:e,key:"line-".concat(t),index:t});return a.renderLineItem(s,r)}));return t.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}},{key:"renderVertical",value:function(e){var n=this,r=this.props,i=r.y,o=r.height,s=r.vertical;if(!e||!e.length)return null;var l=e.map((function(e,t){var r=qx(qx({},n.props),{},{x1:e,y1:i,x2:e,y2:i+o,key:"line-".concat(t),index:t});return a.renderLineItem(s,r)}));return t.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}},{key:"renderVerticalStripes",value:function(e){var n=this.props.verticalFill;if(!n||!n.length)return null;var r=this.props,i=r.fillOpacity,o=r.x,a=r.y,s=r.width,l=r.height,c=e.slice().sort((function(e,t){return e-t}));o!==c[0]&&c.unshift(0);var u=c.map((function(e,r){var u=c[r+1]?c[r+1]-e:o+s-e;if(u<=0)return null;var h=r%n.length;return t.createElement("rect",{key:"react-".concat(r),x:Math.round(e+o-o),y:a,width:u,height:l,stroke:"none",fill:n[h],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return t.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}},{key:"renderHorizontalStripes",value:function(e){var n=this.props.horizontalFill;if(!n||!n.length)return null;var r=this.props,i=r.fillOpacity,o=r.x,a=r.y,s=r.width,l=r.height,c=e.slice().sort((function(e,t){return e-t}));a!==c[0]&&c.unshift(0);var u=c.map((function(e,r){var u=c[r+1]?c[r+1]-e:a+l-e;if(u<=0)return null;var h=r%n.length;return t.createElement("rect",{key:"react-".concat(r),y:Math.round(e+a-a),x:o,height:u,width:s,stroke:"none",fill:n[h],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return t.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}},{key:"renderBackground",value:function(){var e=this.props.fill;if(!e||"none"===e)return null;var n=this.props,r=n.fillOpacity,i=n.x,o=n.y,a=n.width,s=n.height;return t.createElement("rect",{x:i,y:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,o=e.height,a=e.horizontal,s=e.vertical,l=e.horizontalCoordinatesGenerator,c=e.verticalCoordinatesGenerator,u=e.xAxis,h=e.yAxis,d=e.offset,p=e.chartWidth,m=e.chartHeight;if(!yo(i)||i<=0||!yo(o)||o<=0||!yo(n)||n!==+n||!yo(r)||r!==+r)return null;var f=this.props,g=f.horizontalPoints,v=f.verticalPoints;return g&&g.length||!Fo()(l)||(g=l({yAxis:h,width:p,height:m,offset:d})),v&&v.length||!Fo()(c)||(v=c({xAxis:u,width:p,height:m,offset:d})),t.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),a&&this.renderHorizontal(g),s&&this.renderVertical(v),a&&this.renderHorizontalStripes(g),s&&this.renderVerticalStripes(v))}}],i=[{key:"renderLineItem",value:function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(Fo()(e))r=e(n);else{var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.key,c=Hx(n,["x1","y1","x2","y2","key"]);r=t.createElement("line",Gx({},Jo(c),{x1:i,y1:o,x2:a,y2:s,fill:"none",key:l}))}return r}}],r&&Xx(n.prototype,r),i&&Xx(n,i),a}(t.PureComponent);eb.displayName="CartesianGrid",eb.defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};var tb=n(8529);const nb=kn.div`
  background-color: #4c4177;
  background-image: linear-gradient(
    315deg,
    hsl(204, 45%, 15%) 0%,
    hsl(252, 35%, 20%) 70%
  );
  padding: 15px;
  border-radius: 15px;
  border: 3px groove rgb(200, 200, 200);
`,rb=kn.div`
  font-size: 1.1rem;
  font-weight: 700;
  text-align: center;
  color: rgb(200, 200, 200);
`,ib=kn.div`
  width: 100%;
  display: flex;
  justify-content: space-between;
  color: ${e=>{let{color:t}=e;return t}};
`,ob=kn.div`
  margin-left: 8px;
`;function ab(e){let{active:t,payload:n,label:r,xAxisLabels:i}=e;return t&&n&&n.length?(0,X.jsxs)(nb,{children:[(0,X.jsx)(rb,{children:i[r]}),n.sort(((e,t)=>t.value-e.value)).map((e=>(0,X.jsxs)(ib,{color:e.color,children:[(0,X.jsxs)("div",{children:[" ",e.dataKey,":"]}),(0,X.jsx)(ob,{children:e.value})]},e.dataKey)))]}):null}var sb=O(),lb=Math.PI/3,cb=2*Math.PI/3;const ub=(e,t,n)=>{switch(e){case WE.Categories:return((e,t)=>(Object.keys(e.categories).forEach((e=>{t[e]||(t[e]=!0)})),{...e.categories}))(t,n);case WE.Neighbourhoods:return((e,t)=>(Object.keys(e.neighbourhoods).forEach((e=>{t[e]||(t[e]=!0)})),{...e.neighbourhoods}))(t,n);case WE.Total:return((e,t)=>{t.crimes=!0;const n=Object.values(e.categories).reduce((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),0);return{crimes:n}})(t,n);default:return{}}},hb=e=>{let{mode:n,filteredData:r}=e;return(0,t.useMemo)((()=>{const{categories:e,groupedData:t,xAxisLabels:i}=((e,t)=>{const n=[],r={},i=e.map(((e,i)=>{const[o,a]=e.month.split(", ");return n.push(`${a}/${o.slice(2)}`),{name:i,...ub(t,e,r)}}));return{categories:r,groupedData:i,xAxisLabels:n}})(r,n),o=Object.keys(e),a=1/o.length,s=o.map(((e,t)=>function(e){var t;return e=(.5-e)*Math.PI,sb.r=255*(t=Math.sin(e))*t,sb.g=255*(t=Math.sin(e+lb))*t,sb.b=255*(t=Math.sin(e+cb))*t,sb+""}(t*a)));return{groupedData:t,categories:o.sort(),xAxisLabels:i,colors:s}}),[r,n])};function db(e){let{mode:n,filteredData:r}=e;const{groupedData:i,categories:o,xAxisLabels:a,colors:s}=hb({mode:n,filteredData:r}),{left:l,right:c,top:u,bottom:h,refAreaLeft:d,refAreaRight:p,zoom:m,zoomOut:f,onMouseDown:g,onMouseMove:v}=(e=>{let{initialData:n}=e;const[r,i]=(0,t.useState)("dataMin"),[o,a]=(0,t.useState)("dataMax"),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[h,d]=(0,t.useState)("dataMax+1"),[p,m]=(0,t.useState)("dataMin-1"),f=(0,t.useCallback)((()=>{l(null),u(null),i("dataMin"),a("dataMax"),m("dataMin-1"),d("dataMax+1")}),[n]);(0,t.useEffect)((()=>{setTimeout((()=>{f()}),100)}),[f]);const g=(0,t.useCallback)(((e,t)=>{const r=n.slice(e,t+1);let i=1/0,o=-1/0;return r.forEach((e=>{Object.keys(e).forEach((t=>{"name"!==t&&(e[t]<i&&(i=e[t]),e[t]>o&&(o=e[t]))}))})),[i,o]}),[n]);return{left:r,right:o,top:h,bottom:p,refAreaLeft:s,refAreaRight:c,zoom:()=>{let e=s,t=c;if(l(null),u(null),e===t||null===t||null===e)return;e>t&&([e,t]=[t,e]);const[r,o]=g(e,t);i(n[e].name),a(n[t].name),m(r),d(o)},zoomOut:()=>{f()},onMouseDown:e=>{l(e.activeTooltipIndex)},onMouseMove:e=>{s&&u(e.activeTooltipIndex)}}})({initialData:i});return(0,X.jsxs)(Zi,{children:[l>=0&&(0,X.jsx)($i,{children:(0,X.jsx)(Fn,{onClick:f,children:(0,X.jsx)(tb.Z,{fontSize:"large"})})}),(0,X.jsx)(Oo,{width:"100%",height:"100%",children:(0,X.jsxs)(Bx,{data:i,margin:{top:5,right:30,left:20,bottom:5},onMouseDown:g,onMouseMove:v,onMouseUp:m,children:[(0,X.jsx)(eb,{strokeDasharray:"3 3"}),(0,X.jsx)(Ux,{allowDataOverflow:!0,allowDecimals:!1,tickFormatter:e=>a[e],dataKey:"name",type:"number",domain:[l,c]}),(0,X.jsx)(jx,{allowDataOverflow:!0,domain:[h,u]}),(0,X.jsx)(nl,{content:(0,X.jsx)(ab,{xAxisLabels:a})}),(0,X.jsx)(mc,{}),o.map(((e,t)=>(0,X.jsx)(zx,{type:"monotone",dataKey:e,stroke:s[t],dot:!1},e))),d&&p?(0,X.jsx)(C_,{x1:i[d].name,x2:i[p].name,strokeOpacity:.3}):null]})})]})}const pb=kn.div`
  margin-bottom: 15px;
  font-weight: 600;
`;const mb=t.createContext();function fb(){return t.useContext(mb)}function gb(e){return(0,Ze.Z)("PrivateSwitchBase",e)}(0,Le.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const vb=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],yb=(0,le.ZP)(Qe,{skipSx:!0})((e=>{let{ownerState:t}=e;return(0,ne.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),_b=(0,le.ZP)("input",{skipSx:!0})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),xb=t.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:a,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:h,inputProps:d,inputRef:p,name:m,onBlur:f,onChange:g,onFocus:v,readOnly:y,required:_,tabIndex:x,type:b,value:w}=e,S=(0,te.Z)(e,vb),[M,E]=(0,Li.Z)({controlled:r,default:Boolean(a),name:"SwitchBase",state:"checked"}),T=fb();let C=s;T&&"undefined"===typeof C&&(C=T.disabled);const A="checkbox"===b||"radio"===b,P=(0,ne.Z)({},e,{checked:M,disabled:C,disableFocusRipple:l,edge:c}),O=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${(0,Je.Z)(i)}`],input:["input"]};return(0,ae.Z)(o,gb,t)})(P);return(0,X.jsxs)(yb,(0,ne.Z)({component:"span",className:(0,oe.Z)(O.root,o),centerRipple:!0,focusRipple:!l,disabled:C,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{f&&f(e),T&&T.onBlur&&T.onBlur(e)},ownerState:P,ref:t},S,{children:[(0,X.jsx)(_b,(0,ne.Z)({autoFocus:n,checked:r,defaultChecked:a,className:O.input,disabled:C,id:A&&h,name:m,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;E(t),g&&g(e,t)},readOnly:y,ref:p,required:_,ownerState:P,tabIndex:x,type:b},"checkbox"===b&&void 0===w?{}:{value:w},d)),M?i:u]}))})),bb=xb;var wb=n(76189);const Sb=(0,wb.Z)((0,X.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Mb=(0,wb.Z)((0,X.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Eb=(0,wb.Z)((0,X.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Tb(e){return(0,Ze.Z)("MuiCheckbox",e)}const Cb=(0,Le.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Ab=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],Pb=(0,le.ZP)(bb,{shouldForwardProp:e=>(0,le.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t[`color${(0,Je.Z)(n.color)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({color:t.palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:(0,se.Fq)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{[`&.${Cb.checked}, &.${Cb.indeterminate}`]:{color:t.palette[n.color].main},[`&.${Cb.disabled}`]:{color:t.palette.action.disabled}})})),Ob=(0,X.jsx)(Mb,{}),Rb=(0,X.jsx)(Sb,{}),Lb=(0,X.jsx)(Eb,{}),Db=t.forwardRef((function(e,n){var r,i;const o=(0,ce.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:a=Ob,color:s="primary",icon:l=Rb,indeterminate:c=!1,indeterminateIcon:u=Lb,inputProps:h,size:d="medium"}=o,p=(0,te.Z)(o,Ab),m=c?u:l,f=c?u:a,g=(0,ne.Z)({},o,{color:s,indeterminate:c,size:d}),v=(e=>{const{classes:t,indeterminate:n,color:r}=e,i={root:["root",n&&"indeterminate",`color${(0,Je.Z)(r)}`]},o=(0,ae.Z)(i,Tb,t);return(0,ne.Z)({},t,o)})(g);return(0,X.jsx)(Pb,(0,ne.Z)({type:"checkbox",inputProps:(0,ne.Z)({"data-indeterminate":c},h),icon:t.cloneElement(m,{fontSize:null!=(r=m.props.fontSize)?r:d}),checkedIcon:t.cloneElement(f,{fontSize:null!=(i=f.props.fontSize)?i:d}),ownerState:g,ref:n},p,{classes:v}))})),kb=Db;var Ib=n(96248),Fb=n(82466),Nb=n(46189),zb=n(27979),Ub=n(93981);const jb=["onChange","maxRows","minRows","style","value"];function Bb(e,t){return parseInt(e[t],10)||0}const Vb={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Gb=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s}=e,l=(0,te.Z)(e,jb),{current:c}=t.useRef(null!=s),u=t.useRef(null),h=(0,ir.Z)(n,u),d=t.useRef(null),p=t.useRef(0),[m,f]=t.useState({}),g=t.useCallback((()=>{const t=u.current,n=(0,zb.Z)(t).getComputedStyle(t);if("0px"===n.width)return;const r=d.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const a=n["box-sizing"],s=Bb(n,"padding-bottom")+Bb(n,"padding-top"),l=Bb(n,"border-bottom-width")+Bb(n,"border-top-width"),c=r.scrollHeight;r.value="x";const h=r.scrollHeight;let m=c;o&&(m=Math.max(Number(o)*h,m)),i&&(m=Math.min(Number(i)*h,m)),m=Math.max(m,h);const g=m+("border-box"===a?s+l:0),v=Math.abs(m-c)<=1;f((e=>p.current<20&&(g>0&&Math.abs((e.outerHeightStyle||0)-g)>1||e.overflow!==v)?(p.current+=1,{overflow:v,outerHeightStyle:g}):e))}),[i,o,e.placeholder]);t.useEffect((()=>{const e=(0,Ub.Z)((()=>{p.current=0,g()})),t=(0,zb.Z)(u.current);let n;return t.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver(e),n.observe(u.current)),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}}),[g]),(0,or.Z)((()=>{g()})),t.useEffect((()=>{p.current=0}),[s]);return(0,X.jsxs)(t.Fragment,{children:[(0,X.jsx)("textarea",(0,ne.Z)({value:s,onChange:e=>{p.current=0,c||g(),r&&r(e)},ref:h,rows:o,style:(0,ne.Z)({height:m.outerHeightStyle,overflow:m.overflow?"hidden":null},a)},l)),(0,X.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,ne.Z)({},Vb,a,{padding:0})})]})})),Hb=Gb;function Wb(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}var qb=n(40162);function Zb(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,X.jsx)(Ae,{styles:r})}const $b=function(e){return(0,X.jsx)(Zb,(0,ne.Z)({},e,{defaultTheme:jn.Z}))};function Xb(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Kb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Xb(e.value)&&""!==e.value||t&&Xb(e.defaultValue)&&""!==e.defaultValue)}function Yb(e){return(0,Ze.Z)("MuiInputBase",e)}const Qb=(0,Le.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Jb=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],ew=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${(0,Je.Z)(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},tw=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},nw=(0,le.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ew})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({},t.typography.body1,{color:t.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Qb.disabled}`]:{color:t.palette.text.disabled,cursor:"default"}},n.multiline&&(0,ne.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),rw=(0,le.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:tw})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i={color:"currentColor",opacity:r?.42:.5,transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},o={opacity:"0 !important"},a={opacity:r?.42:.5};return(0,ne.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Qb.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${Qb.disabled}`]:{opacity:1,WebkitTextFillColor:t.palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),iw=(0,X.jsx)($b,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),ow=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:a,className:s,components:l={},componentsProps:c={},defaultValue:u,disabled:h,disableInjectingGlobalStyles:d,endAdornment:p,fullWidth:m=!1,id:f,inputComponent:g="input",inputProps:v={},inputRef:y,maxRows:_,minRows:x,multiline:b=!1,name:w,onBlur:S,onChange:M,onClick:E,onFocus:T,onKeyDown:C,onKeyUp:A,placeholder:P,readOnly:O,renderSuffix:R,rows:L,startAdornment:D,type:k="text",value:I}=r,F=(0,te.Z)(r,Jb),N=null!=v.value?v.value:I,{current:z}=t.useRef(null!=N),U=t.useRef(),j=t.useCallback((e=>{0}),[]),B=(0,ue.Z)(v.ref,j),V=(0,ue.Z)(y,B),G=(0,ue.Z)(U,V),[H,W]=t.useState(!1),q=fb();const Z=Wb({props:r,muiFormControl:q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Z.focused=q?q.focused:H,t.useEffect((()=>{!q&&h&&H&&(W(!1),S&&S())}),[q,h,H,S]);const $=q&&q.onFilled,K=q&&q.onEmpty,Y=t.useCallback((e=>{Kb(e)?$&&$():K&&K()}),[$,K]);(0,qb.Z)((()=>{z&&Y({value:N})}),[N,Y,z]);t.useEffect((()=>{Y(U.current)}),[]);let Q=g,J=v;b&&"input"===Q&&(J=L?(0,ne.Z)({type:void 0,minRows:L,maxRows:L},J):(0,ne.Z)({type:void 0,maxRows:_,minRows:x},J),Q=Hb);t.useEffect((()=>{q&&q.setAdornedStart(Boolean(D))}),[q,D]);const ee=(0,ne.Z)({},r,{color:Z.color||"primary",disabled:Z.disabled,endAdornment:p,error:Z.error,focused:Z.focused,formControl:q,fullWidth:m,hiddenLabel:Z.hiddenLabel,multiline:b,size:Z.size,startAdornment:D,type:k}),re=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,size:h,startAdornment:d,type:p}=e,m={root:["root",`color${(0,Je.Z)(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===h&&"sizeSmall",u&&"multiline",d&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",d&&"inputAdornedStart",o&&"inputAdornedEnd"]};return(0,ae.Z)(m,Yb,t)})(ee),ie=l.Root||nw,se=c.root||{},le=l.Input||rw;return J=(0,ne.Z)({},J,c.input),(0,X.jsxs)(t.Fragment,{children:[!d&&iw,(0,X.jsxs)(ie,(0,ne.Z)({},se,!Nn(ie)&&{ownerState:(0,ne.Z)({},ee,se.ownerState)},{ref:n,onClick:e=>{U.current&&e.currentTarget===e.target&&U.current.focus(),E&&E(e)}},F,{className:(0,oe.Z)(re.root,se.className,s),children:[D,(0,X.jsx)(mb.Provider,{value:null,children:(0,X.jsx)(le,(0,ne.Z)({ownerState:ee,"aria-invalid":Z.error,"aria-describedby":i,autoComplete:o,autoFocus:a,defaultValue:u,disabled:Z.disabled,id:f,onAnimationStart:e=>{Y("mui-auto-fill-cancel"===e.animationName?U.current:{value:"x"})},name:w,placeholder:P,readOnly:O,required:Z.required,rows:L,value:N,onKeyDown:C,onKeyUp:A,type:k},J,!Nn(le)&&{as:Q,ownerState:(0,ne.Z)({},ee,J.ownerState)},{ref:G,className:(0,oe.Z)(re.input,J.className),onBlur:e=>{S&&S(e),v.onBlur&&v.onBlur(e),q&&q.onBlur?q.onBlur(e):W(!1)},onChange:function(e){if(!z){const t=e.target||U.current;if(null==t)throw new Error((0,Nb.Z)(1));Y({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v.onChange&&v.onChange(e,...n),M&&M(e,...n)},onFocus:e=>{Z.disabled?e.stopPropagation():(T&&T(e),v.onFocus&&v.onFocus(e),q&&q.onFocus?q.onFocus(e):W(!0))}}))}),p,R?R((0,ne.Z)({},Z,{startAdornment:D})):null]}))]})})),aw=ow;function sw(e){return(0,Ze.Z)("MuiInput",e)}const lw=(0,Le.Z)("MuiInput",["root","formControl","focused","disabled","colorSecondary","underline","error","sizeSmall","multiline","fullWidth","input","inputSizeSmall","inputMultiline","inputTypeSearch"]),cw=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],uw=(0,le.ZP)(nw,{shouldForwardProp:e=>(0,le.FO)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ew(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,ne.Z)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&:after":{borderBottom:`2px solid ${t.palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${lw.focused}:after`]:{transform:"scaleX(1)"},[`&.${lw.error}:after`]:{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${lw.disabled}):before`]:{borderBottom:`2px solid ${t.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${lw.disabled}:before`]:{borderBottomStyle:"dotted"}})})),hw=(0,le.ZP)(rw,{name:"MuiInput",slot:"Input",overridesResolver:tw})({}),dw=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiInput"}),{disableUnderline:r,components:i={},componentsProps:o,fullWidth:a=!1,inputComponent:s="input",multiline:l=!1,type:c="text"}=n,u=(0,te.Z)(n,cw),h=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,ae.Z)(r,sw,t);return(0,ne.Z)({},t,i)})(n),d={root:{ownerState:{disableUnderline:r}}},p=o?(0,Fb.Z)(o,d):d;return(0,X.jsx)(aw,(0,ne.Z)({components:(0,ne.Z)({Root:uw,Input:hw},i),componentsProps:p,fullWidth:a,inputComponent:s,multiline:l,ref:t,type:c},u,{classes:h}))}));dw.muiName="Input";const pw=dw;function mw(e){return(0,Ze.Z)("MuiFilledInput",e)}const fw=(0,Le.Z)("MuiFilledInput",["root","colorSecondary","underline","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","hiddenLabel","input","inputSizeSmall","inputHiddenLabel","inputMultiline","inputAdornedStart","inputAdornedEnd"]),gw=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],vw=(0,le.ZP)(nw,{shouldForwardProp:e=>(0,le.FO)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ew(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,ne.Z)({position:"relative",backgroundColor:o,borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:o}},[`&.${fw.focused}`]:{backgroundColor:o},[`&.${fw.disabled}`]:{backgroundColor:r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},!n.disableUnderline&&{"&:after":{borderBottom:`2px solid ${t.palette[n.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${fw.focused}:after`]:{transform:"scaleX(1)"},[`&.${fw.error}:after`]:{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${fw.disabled}):before`]:{borderBottom:`1px solid ${t.palette.text.primary}`},[`&.${fw.disabled}:before`]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,ne.Z)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),yw=(0,le.ZP)(rw,{name:"MuiFilledInput",slot:"Input",overridesResolver:tw})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),_w=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiFilledInput"}),{components:r={},componentsProps:i,fullWidth:o=!1,inputComponent:a="input",multiline:s=!1,type:l="text"}=n,c=(0,te.Z)(n,gw),u=(0,ne.Z)({},n,{fullWidth:o,inputComponent:a,multiline:s,type:l}),h=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,ae.Z)(r,mw,t);return(0,ne.Z)({},t,i)})(n),d={root:{ownerState:u},input:{ownerState:u}},p=i?(0,Fb.Z)(i,d):d;return(0,X.jsx)(aw,(0,ne.Z)({components:(0,ne.Z)({Root:vw,Input:yw},r),componentsProps:p,fullWidth:o,inputComponent:a,multiline:s,ref:t,type:l},c,{classes:h}))}));_w.muiName="Input";const xw=_w,bw=["children","classes","className","label","notched"],ww=(0,le.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Sw=(0,le.ZP)("legend",{skipSx:!0})((e=>{let{ownerState:t,theme:n}=e;return(0,ne.Z)({float:"unset"},void 0===t.label&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},void 0!==t.label&&(0,ne.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function Mw(e){return(0,Ze.Z)("MuiOutlinedInput",e)}const Ew=(0,Le.Z)("MuiOutlinedInput",["root","colorSecondary","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","notchedOutline","input","inputSizeSmall","inputMultiline","inputAdornedStart","inputAdornedEnd"]),Tw=["components","fullWidth","inputComponent","label","multiline","notched","type"],Cw=(0,le.ZP)(nw,{shouldForwardProp:e=>(0,le.FO)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:ew})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,ne.Z)({position:"relative",borderRadius:t.shape.borderRadius,[`&:hover .${Ew.notchedOutline}`]:{borderColor:t.palette.text.primary},"@media (hover: none)":{[`&:hover .${Ew.notchedOutline}`]:{borderColor:r}},[`&.${Ew.focused} .${Ew.notchedOutline}`]:{borderColor:t.palette[n.color].main,borderWidth:2},[`&.${Ew.error} .${Ew.notchedOutline}`]:{borderColor:t.palette.error.main},[`&.${Ew.disabled} .${Ew.notchedOutline}`]:{borderColor:t.palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,ne.Z)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),Aw=(0,le.ZP)((function(e){const{className:t,label:n,notched:r}=e,i=(0,te.Z)(e,bw),o=(0,ne.Z)({},e,{notched:r,label:n});return(0,X.jsx)(ww,(0,ne.Z)({"aria-hidden":!0,className:t,ownerState:o},i,{children:(0,X.jsx)(Sw,{ownerState:o,children:n?(0,X.jsx)("span",{children:n}):(0,X.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}})})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;return{borderColor:"light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),Pw=(0,le.ZP)(rw,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:tw})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),Ow=t.forwardRef((function(e,n){var r;const i=(0,ce.Z)({props:e,name:"MuiOutlinedInput"}),{components:o={},fullWidth:a=!1,inputComponent:s="input",label:l,multiline:c=!1,notched:u,type:h="text"}=i,d=(0,te.Z)(i,Tw),p=(e=>{const{classes:t}=e,n=(0,ae.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Mw,t);return(0,ne.Z)({},t,n)})(i),m=Wb({props:i,muiFormControl:fb(),states:["required"]});return(0,X.jsx)(aw,(0,ne.Z)({components:(0,ne.Z)({Root:Cw,Input:Pw},o),renderSuffix:e=>(0,X.jsx)(Aw,{className:p.notchedOutline,label:l&&m.required?r||(r=(0,X.jsxs)(t.Fragment,{children:[l,"\xa0","*"]})):l,notched:"undefined"!==typeof u?u:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:a,inputComponent:s,multiline:c,ref:n,type:h},d,{classes:(0,ne.Z)({},p,{notchedOutline:null})}))}));Ow.muiName="Input";const Rw=Ow;function Lw(e){return(0,Ze.Z)("MuiFormLabel",e)}const Dw=(0,Le.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),kw=["children","className","color","component","disabled","error","filled","focused","required"],Iw=(0,le.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,ne.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({color:t.palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Dw.focused}`]:{color:t.palette[n.color].main},[`&.${Dw.disabled}`]:{color:t.palette.text.disabled},[`&.${Dw.error}`]:{color:t.palette.error.main}})})),Fw=(0,le.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{[`&.${Dw.error}`]:{color:t.palette.error.main}}})),Nw=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,a=(0,te.Z)(n,kw),s=Wb({props:n,muiFormControl:fb(),states:["color","required","focused","disabled","error","filled"]}),l=(0,ne.Z)({},n,{color:s.color||"primary",component:o,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e,l={root:["root",`color${(0,Je.Z)(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return(0,ae.Z)(l,Lw,t)})(l);return(0,X.jsxs)(Iw,(0,ne.Z)({as:o,ownerState:l,className:(0,oe.Z)(c.root,i),ref:t},a,{children:[r,s.required&&(0,X.jsxs)(Fw,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),zw=Nw;function Uw(e){return(0,Ze.Z)("MuiInputLabel",e)}(0,Le.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const jw=["disableAnimation","margin","shrink","variant"],Bw=(0,le.ZP)(zw,{shouldForwardProp:e=>(0,le.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Dw.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,ne.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,ne.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,ne.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Vw=t.forwardRef((function(e,t){const n=(0,ce.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i}=n,o=(0,te.Z)(n,jw),a=fb();let s=i;"undefined"===typeof s&&a&&(s=a.filled||a.focused||a.adornedStart);const l=Wb({props:n,muiFormControl:a,states:["size","variant","required"]}),c=(0,ne.Z)({},n,{disableAnimation:r,formControl:a,shrink:s,size:l.size,variant:l.variant,required:l.required}),u=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink","small"===r&&"sizeSmall",a],asterisk:[s&&"asterisk"]},c=(0,ae.Z)(l,Uw,t);return(0,ne.Z)({},t,c)})(c);return(0,X.jsx)(Bw,(0,ne.Z)({"data-shrink":s,ownerState:c,ref:t},o,{classes:u}))}));var Gw=n(19103);function Hw(e){return(0,Ze.Z)("MuiFormControl",e)}(0,Le.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ww=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],qw=(0,le.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,ne.Z)({},t.root,t[`margin${(0,Je.Z)(n.margin)}`],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,ne.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),Zw=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:p="none",required:m=!1,size:f="medium",variant:g="outlined"}=r,v=(0,te.Z)(r,Ww),y=(0,ne.Z)({},r,{color:a,component:s,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:p,required:m,size:f,variant:g}),_=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&`margin${(0,Je.Z)(n)}`,r&&"fullWidth"]};return(0,ae.Z)(i,Hw,t)})(y),[x,b]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!(0,Gw.Z)(t,["Input","Select"]))return;const n=(0,Gw.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[w,S]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{(0,Gw.Z)(t,["Input","Select"])&&Kb(t.props,!0)&&(e=!0)})),e})),[M,E]=t.useState(!1);l&&M&&E(!1);const T=void 0===u||l?M:u;const C=t.useCallback((()=>{S(!0)}),[]),A={adornedStart:x,setAdornedStart:b,color:a,disabled:l,error:c,filled:w,focused:T,fullWidth:h,hiddenLabel:d,size:f,onBlur:()=>{E(!1)},onEmpty:t.useCallback((()=>{S(!1)}),[]),onFilled:C,onFocus:()=>{E(!0)},registerEffect:undefined,required:m,variant:g};return(0,X.jsx)(mb.Provider,{value:A,children:(0,X.jsx)(qw,(0,ne.Z)({as:s,ownerState:y,className:(0,oe.Z)(_.root,o),ref:n},v,{children:i}))})})),$w=Zw;function Xw(e){return(0,Ze.Z)("MuiFormHelperText",e)}const Kw=(0,Le.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Yw=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Qw=(0,le.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${(0,Je.Z)(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({color:t.palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Kw.disabled}`]:{color:t.palette.text.disabled},[`&.${Kw.error}`]:{color:t.palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),Jw=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,a=(0,te.Z)(n,Yw),s=Wb({props:n,muiFormControl:fb(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,ne.Z)({},n,{component:o,contained:"filled"===s.variant||"outlined"===s.variant,variant:s.variant,size:s.size,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${(0,Je.Z)(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return(0,ae.Z)(c,Xw,t)})(l);return(0,X.jsx)(Qw,(0,ne.Z)({as:o,ownerState:l,className:(0,oe.Z)(c.root,i),ref:t},a,{children:" "===r?(0,X.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):r}))}));var eS=n(98301);const tS=t.createContext({});function nS(e){return(0,Ze.Z)("MuiList",e)}(0,Le.Z)("MuiList",["root","padding","dense","subheader"]);const rS=["children","className","component","dense","disablePadding","subheader"],iS=(0,le.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,ne.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),oS=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=r,u=(0,te.Z)(r,rS),h=t.useMemo((()=>({dense:s})),[s]),d=(0,ne.Z)({},r,{component:a,dense:s,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,ae.Z)(o,nS,t)})(d);return(0,X.jsx)(tS.Provider,{value:h,children:(0,X.jsxs)(iS,(0,ne.Z)({as:a,className:(0,oe.Z)(p.root,o),ref:n,ownerState:d},u,{children:[c,i]}))})}));function aS(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const sS=aS,lS=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function cS(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function uS(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function hS(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function dS(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&hS(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const pS=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu"}=e,d=(0,te.Z)(e,lS),p=t.useRef(null),m=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,qb.Z)((()=>{i&&p.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{const n=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&n){const n=`${sS((0,eS.Z)(e))}px`;p.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,p.current.style.width=`calc(100% + ${n})`}return p.current}})),[]);const f=(0,ue.Z)(p,n);let g=-1;t.Children.forEach(a,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===g)&&(g=n))}));const v=t.Children.map(a,((e,n)=>{if(n===g){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,X.jsx)(oS,(0,ne.Z)({role:"menu",ref:f,className:s,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,eS.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),dS(t,r,c,l,cS);else if("ArrowUp"===n)e.preventDefault(),dS(t,r,c,l,uS);else if("Home"===n)e.preventDefault(),dS(t,null,c,l,cS);else if("End"===n)e.preventDefault(),dS(t,null,c,l,uS);else if(1===n.length){const i=m.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const s=r&&!i.repeating&&hS(r,i);i.previousKeyMatched&&(s||dS(t,r,!1,l,cS,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},d,{children:v}))})),mS=pS;function fS(e){return(0,Ze.Z)("MuiPaper",e)}(0,Le.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const gS=["className","component","elevation","square","variant"],vS=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)},yS=(0,le.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:`1px solid ${t.palette.divider}`},"elevation"===n.variant&&(0,ne.Z)({boxShadow:t.shadows[n.elevation]},"dark"===t.palette.mode&&{backgroundImage:`linear-gradient(${(0,se.Fq)("#fff",vS(n.elevation))}, ${(0,se.Fq)("#fff",vS(n.elevation))})`}))})),_S=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:a=!1,variant:s="elevation"}=n,l=(0,te.Z)(n,gS),c=(0,ne.Z)({},n,{component:i,elevation:o,square:a,variant:s}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,ae.Z)(o,fS,i)})(c);return(0,X.jsx)(yS,(0,ne.Z)({as:i,ownerState:c,className:(0,oe.Z)(u.root,r),ref:t},l))})),xS=_S;var bS=n(83199),wS=n(17602),SS=n(58956),MS=n(78949);function ES(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function TS(e){return parseInt((0,zb.Z)(e).getComputedStyle(e).paddingRight,10)||0}function CS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;const o=[t,n,...r],a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(e=>{-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&ES(e,i)}))}function AS(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function PS(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,ar.Z)(e);return t.body===e?(0,zb.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=aS((0,ar.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${TS(r)+e}px`;const t=(0,ar.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${TS(t)+e}px`}))}const e=r.parentElement,t=(0,zb.Z)(r),i="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===t.getComputedStyle(e).overflowY?e:r;n.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const OS=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function RS(e){const t=[],n=[];return Array.from(e.querySelectorAll(OS)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function LS(){return!0}const DS=function(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:a=RS,isEnabled:s=LS,open:l}=e,c=t.useRef(),u=t.useRef(null),h=t.useRef(null),d=t.useRef(null),p=t.useRef(null),m=t.useRef(!1),f=t.useRef(null),g=(0,ir.Z)(n.ref,f),v=t.useRef(null);t.useEffect((()=>{l&&f.current&&(m.current=!r)}),[r,l]),t.useEffect((()=>{if(!l||!f.current)return;const e=(0,ar.Z)(f.current);return f.current.contains(e.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex",-1),m.current&&f.current.focus()),()=>{o||(d.current&&d.current.focus&&(c.current=!0,d.current.focus()),d.current=null)}}),[l]),t.useEffect((()=>{if(!l||!f.current)return;const e=(0,ar.Z)(f.current),t=t=>{const{current:n}=f;if(null!==n)if(e.hasFocus()&&!i&&s()&&!c.current){if(!n.contains(e.activeElement)){if(t&&p.current!==t.target||e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!m.current)return;let i=[];if(e.activeElement!==u.current&&e.activeElement!==h.current||(i=a(f.current)),i.length>0){var r,o;const e=Boolean((null==(r=v.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=v.current)?void 0:o.key)),t=i[0],n=i[i.length-1];e?n.focus():t.focus()}else n.focus()}}else c.current=!1},n=t=>{v.current=t,!i&&s()&&"Tab"===t.key&&e.activeElement===f.current&&t.shiftKey&&(c.current=!0,h.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);const r=setInterval((()=>{"BODY"===e.activeElement.tagName&&t()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}),[r,i,o,s,l,a]);const y=e=>{null===d.current&&(d.current=e.relatedTarget),m.current=!0};return(0,X.jsxs)(t.Fragment,{children:[(0,X.jsx)("div",{tabIndex:0,onFocus:y,ref:u,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:g,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),m.current=!0,p.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,X.jsx)("div",{tabIndex:0,onFocus:y,ref:h,"data-test":"sentinelEnd"})]})};function kS(e){return(0,Ze.Z)("MuiModal",e)}(0,Le.Z)("MuiModal",["root","hidden"]);const IS=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];const FS=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ES(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);CS(t,e.mount,e.modalRef,r,!0);const i=AS(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=AS(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=PS(r,t))}remove(e){const t=this.modals.indexOf(e);if(-1===t)return t;const n=AS(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&ES(e.modalRef,!0),CS(r.container,e.mount,e.modalRef,r.hiddenSiblings,!1),this.containers.splice(n,1);else{const e=r.modals[r.modals.length-1];e.modalRef&&ES(e.modalRef,!1)}return t}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}},NS=t.forwardRef((function(e,n){const{BackdropComponent:r,BackdropProps:i,children:o,classes:a,className:s,closeAfterTransition:l=!1,component:c="div",components:u={},componentsProps:h={},container:d,disableAutoFocus:p=!1,disableEnforceFocus:m=!1,disableEscapeKeyDown:f=!1,disablePortal:g=!1,disableRestoreFocus:v=!1,disableScrollLock:y=!1,hideBackdrop:_=!1,keepMounted:x=!1,manager:b=FS,onBackdropClick:w,onClose:S,onKeyDown:M,open:E,theme:T,onTransitionEnter:C,onTransitionExited:A}=e,P=(0,te.Z)(e,IS),[O,R]=t.useState(!0),L=t.useRef({}),D=t.useRef(null),k=t.useRef(null),I=(0,ir.Z)(k,n),F=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),N=()=>(L.current.modalRef=k.current,L.current.mountNode=D.current,L.current),z=()=>{b.mount(N(),{disableScrollLock:y}),k.current.scrollTop=0},U=(0,SS.Z)((()=>{const e=function(e){return"function"===typeof e?e():e}(d)||(0,ar.Z)(D.current).body;b.add(N(),e),k.current&&z()})),j=t.useCallback((()=>b.isTopModal(N())),[b]),B=(0,SS.Z)((e=>{D.current=e,e&&(E&&j()?z():ES(k.current,!0))})),V=t.useCallback((()=>{b.remove(N())}),[b]);t.useEffect((()=>()=>{V()}),[V]),t.useEffect((()=>{E?U():F&&l||V()}),[E,V,F,l,U]);const G=(0,ne.Z)({},e,{classes:a,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:m,disableEscapeKeyDown:f,disablePortal:g,disableRestoreFocus:v,disableScrollLock:y,exited:O,hideBackdrop:_,keepMounted:x}),H=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"]};return(0,ae.Z)(i,kS,r)})(G);if(!x&&!E&&(!F||O))return null;const W=()=>{R(!1),C&&C()},q=()=>{R(!0),A&&A(),l&&V()},Z={};void 0===o.props.tabIndex&&(Z.tabIndex="-1"),F&&(Z.onEnter=(0,MS.Z)(W,o.props.onEnter),Z.onExited=(0,MS.Z)(q,o.props.onExited));const $=u.Root||c,K=h.root||{};return(0,X.jsx)(bi,{ref:B,container:d,disablePortal:g,children:(0,X.jsxs)($,(0,ne.Z)({role:"presentation"},K,!Nn($)&&{as:c,ownerState:(0,ne.Z)({},G,K.ownerState),theme:T},P,{ref:I,onKeyDown:e=>{M&&M(e),"Escape"===e.key&&j()&&(f||(e.stopPropagation(),S&&S(e,"escapeKeyDown")))},className:(0,oe.Z)(H.root,K.className,s),children:[!_&&r?(0,X.jsx)(r,(0,ne.Z)({open:E,onClick:e=>{e.target===e.currentTarget&&(w&&w(e),S&&S(e,"backdropClick"))}},i)):null,(0,X.jsx)(DS,{disableEnforceFocus:m,disableAutoFocus:p,disableRestoreFocus:v,isEnabled:j,open:E,children:t.cloneElement(o,Z)})]}))})})),zS=NS;function US(e){return(0,Ze.Z)("MuiBackdrop",e)}(0,Le.Z)("MuiBackdrop",["root","invisible"]);const jS=["classes","className","invisible","component","components","componentsProps","theme"],BS=t.forwardRef((function(e,t){const{classes:n,className:r,invisible:i=!1,component:o="div",components:a={},componentsProps:s={},theme:l}=e,c=(0,te.Z)(e,jS),u=(0,ne.Z)({},e,{classes:n,invisible:i}),h=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,ae.Z)(r,US,t)})(u),d=a.Root||o,p=s.root||{};return(0,X.jsx)(d,(0,ne.Z)({"aria-hidden":!0},p,!Nn(d)&&{as:o,ownerState:(0,ne.Z)({},u,p.ownerState),theme:l},{ref:t},c,{className:(0,oe.Z)(h.root,p.className,r)}))})),VS=BS;var GS=n(81314);const HS=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],WS={entering:{opacity:1},entered:{opacity:1}},qS={enter:GS.x9.enteringScreen,exit:GS.x9.leavingScreen},ZS=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:p,style:m,timeout:f=qS,TransitionComponent:g=Kn}=e,v=(0,te.Z)(e,HS),y=Bn(),_=t.useRef(null),x=(0,ue.Z)(o.ref,n),b=(0,ue.Z)(_,x),w=e=>t=>{if(e){const n=_.current;void 0===t?e(n):e(n,t)}},S=w(u),M=w(((e,t)=>{Yn(e);const n=Qn({style:m,timeout:f,easing:a},{mode:"enter"});e.style.webkitTransition=y.transitions.create("opacity",n),e.style.transition=y.transitions.create("opacity",n),l&&l(e,t)})),E=w(c),T=w(p),C=w((e=>{const t=Qn({style:m,timeout:f,easing:a},{mode:"exit"});e.style.webkitTransition=y.transitions.create("opacity",t),e.style.transition=y.transitions.create("opacity",t),h&&h(e)})),A=w(d);return(0,X.jsx)(g,(0,ne.Z)({appear:i,in:s,nodeRef:_,onEnter:M,onEntered:E,onEntering:S,onExit:C,onExited:A,onExiting:T,addEndListener:e=>{r&&r(_.current,e)},timeout:f},v,{children:(e,n)=>t.cloneElement(o,(0,ne.Z)({style:(0,ne.Z)({opacity:0,visibility:"exited"!==e||s?void 0:"hidden"},WS[e],m,o.props.style),ref:b},n))}))})),$S=ZS,XS=["children","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],KS=(0,le.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,ne.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),YS=t.forwardRef((function(e,t){var n;const r=(0,ce.Z)({props:e,name:"MuiBackdrop"}),{children:i,components:o={},componentsProps:a={},className:s,invisible:l=!1,open:c,transitionDuration:u,TransitionComponent:h=$S}=r,d=(0,te.Z)(r,XS),p=(e=>{const{classes:t}=e;return t})((0,ne.Z)({},r,{invisible:l}));return(0,X.jsx)(h,(0,ne.Z)({in:c,timeout:u},d,{children:(0,X.jsx)(VS,{className:s,invisible:l,components:(0,ne.Z)({Root:KS},o),componentsProps:{root:(0,ne.Z)({},a.root,(!o.Root||!Nn(o.Root))&&{ownerState:(0,ne.Z)({},null==(n=a.root)?void 0:n.ownerState)})},classes:p,ref:t,children:i})}))})),QS=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],JS=(0,le.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),eM=(0,le.ZP)(YS,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),tM=t.forwardRef((function(e,n){var r;const i=(0,ce.Z)({name:"MuiModal",props:e}),{BackdropComponent:o=eM,closeAfterTransition:a=!1,children:s,components:l={},componentsProps:c={},disableAutoFocus:u=!1,disableEnforceFocus:h=!1,disableEscapeKeyDown:d=!1,disablePortal:p=!1,disableRestoreFocus:m=!1,disableScrollLock:f=!1,hideBackdrop:g=!1,keepMounted:v=!1}=i,y=(0,te.Z)(i,QS),[_,x]=t.useState(!0),b={closeAfterTransition:a,disableAutoFocus:u,disableEnforceFocus:h,disableEscapeKeyDown:d,disablePortal:p,disableRestoreFocus:m,disableScrollLock:f,hideBackdrop:g,keepMounted:v},w=(e=>e.classes)((0,ne.Z)({},i,b,{exited:_}));return(0,X.jsx)(zS,(0,ne.Z)({components:(0,ne.Z)({Root:JS},l),componentsProps:{root:(0,ne.Z)({},c.root,(!l.Root||!Nn(l.Root))&&{ownerState:(0,ne.Z)({},null==(r=c.root)?void 0:r.ownerState)})},BackdropComponent:o,onTransitionEnter:()=>x(!1),onTransitionExited:()=>x(!0),ref:n},y,{classes:w},b,{children:s}))}));function nM(e){return(0,Ze.Z)("MuiPopover",e)}(0,Le.Z)("MuiPopover",["root","paper"]);const rM=["onEntering"],iM=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function oM(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function aM(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function sM(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function lM(e){return"function"===typeof e?e():e}const cM=(0,le.ZP)(tM,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),uM=(0,le.ZP)(xS,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),hM=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:d=8,marginThreshold:p=16,open:m,PaperProps:f={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:v=rr,transitionDuration:y="auto",TransitionProps:{onEntering:_}={}}=r,x=(0,te.Z)(r.TransitionProps,rM),b=(0,te.Z)(r,iM),w=t.useRef(),S=(0,ue.Z)(w,f.ref),M=(0,ne.Z)({},r,{anchorOrigin:a,anchorReference:l,elevation:d,marginThreshold:p,PaperProps:f,transformOrigin:g,TransitionComponent:v,transitionDuration:y,TransitionProps:x}),E=(e=>{const{classes:t}=e;return(0,ae.Z)({root:["root"],paper:["paper"]},nM,t)})(M),T=t.useCallback((()=>{if("anchorPosition"===l)return s;const e=lM(o),t=(e&&1===e.nodeType?e:(0,eS.Z)(w.current).body).getBoundingClientRect();return{top:t.top+oM(t,a.vertical),left:t.left+aM(t,a.horizontal)}}),[o,a.horizontal,a.vertical,s,l]),C=t.useCallback((e=>({vertical:oM(e,g.vertical),horizontal:aM(e,g.horizontal)})),[g.horizontal,g.vertical]),A=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=C(t);if("none"===l)return{top:null,left:null,transformOrigin:sM(n)};const r=T();let i=r.top-n.vertical,a=r.left-n.horizontal;const s=i+t.height,c=a+t.width,u=(0,wS.Z)(lM(o)),h=u.innerHeight-p,d=u.innerWidth-p;if(i<p){const e=i-p;i-=e,n.vertical+=e}else if(s>h){const e=s-h;i-=e,n.vertical+=e}if(a<p){const e=a-p;a-=e,n.horizontal+=e}else if(c>d){const e=c-d;a-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(a)}px`,transformOrigin:sM(n)}}),[o,l,T,C,p]),P=t.useCallback((()=>{const e=w.current;if(!e)return;const t=A(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}),[A]);t.useEffect((()=>{m&&P()})),t.useImperativeHandle(i,(()=>m?{updatePosition:()=>{P()}}:null),[m,P]),t.useEffect((()=>{if(!m)return;const e=(0,bS.Z)((()=>{P()})),t=(0,wS.Z)(o);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[o,m,P]);let O=y;"auto"!==y||v.muiSupportAuto||(O=void 0);const R=h||(o?(0,eS.Z)(lM(o)).body:void 0);return(0,X.jsx)(cM,(0,ne.Z)({BackdropProps:{invisible:!0},className:(0,oe.Z)(E.root,u),container:R,open:m,ref:n,ownerState:M},b,{children:(0,X.jsx)(v,(0,ne.Z)({appear:!0,in:m,onEntering:(e,t)=>{_&&_(e,t),P()},timeout:O},x,{children:(0,X.jsx)(uM,(0,ne.Z)({elevation:d},f,{ref:S,className:(0,oe.Z)(E.paper,f.className),children:c}))}))}))})),dM=hM;function pM(e){return(0,Ze.Z)("MuiMenu",e)}(0,Le.Z)("MuiMenu",["root","paper","list"]);const mM=["onEntering"],fM=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],gM={vertical:"top",horizontal:"right"},vM={vertical:"top",horizontal:"left"},yM=(0,le.ZP)(dM,{shouldForwardProp:e=>(0,le.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_M=(0,le.ZP)(xS,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),xM=(0,le.ZP)(mS,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),bM=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:o,disableAutoFocusItem:a=!1,MenuListProps:s={},onClose:l,open:c,PaperProps:u={},PopoverClasses:h,transitionDuration:d="auto",TransitionProps:{onEntering:p}={},variant:m="selectedMenu"}=r,f=(0,te.Z)(r.TransitionProps,mM),g=(0,te.Z)(r,fM),v=Bn(),y="rtl"===v.direction,_=(0,ne.Z)({},r,{autoFocus:i,disableAutoFocusItem:a,MenuListProps:s,onEntering:p,PaperProps:u,transitionDuration:d,TransitionProps:f,variant:m}),x=(e=>{const{classes:t}=e;return(0,ae.Z)({root:["root"],paper:["paper"],list:["list"]},pM,t)})(_),b=i&&!a&&c,w=t.useRef(null);let S=-1;return t.Children.map(o,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===S)&&(S=n))})),(0,X.jsx)(yM,(0,ne.Z)({classes:h,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:y?"right":"left"},transformOrigin:y?gM:vM,PaperProps:(0,ne.Z)({component:_M},u,{classes:(0,ne.Z)({},u.classes,{root:x.paper})}),className:x.root,open:c,ref:n,transitionDuration:d,TransitionProps:(0,ne.Z)({onEntering:(e,t)=>{w.current&&w.current.adjustStyleForScrollbar(e,v),p&&p(e,t)}},f),ownerState:_},g,{children:(0,X.jsx)(xM,(0,ne.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),l&&l(e,"tabKeyDown"))},actions:w,autoFocus:i&&(-1===S||a),autoFocusItem:b,variant:m},s,{className:(0,oe.Z)(x.list,s.className),children:o}))}))})),wM=bM;function SM(e){return(0,Ze.Z)("MuiNativeSelect",e)}const MM=(0,Le.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),EM=["className","disabled","IconComponent","inputRef","variant"],TM=e=>{let{ownerState:t,theme:n}=e;return(0,ne.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},[`&.${MM.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:n.palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:n.shape.borderRadius,"&:focus":{borderRadius:n.shape.borderRadius},"&&&":{paddingRight:32}})},CM=(0,le.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:le.FO,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{[`&.${MM.multiple}`]:t.multiple}]}})(TM),AM=e=>{let{ownerState:t,theme:n}=e;return(0,ne.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:n.palette.action.active,[`&.${MM.disabled}`]:{color:n.palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},PM=(0,le.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,Je.Z)(n.variant)}`],n.open&&t.iconOpen]}})(AM),OM=t.forwardRef((function(e,n){const{className:r,disabled:i,IconComponent:o,inputRef:a,variant:s="standard"}=e,l=(0,te.Z)(e,EM),c=(0,ne.Z)({},e,{disabled:i,variant:s}),u=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o}=e,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon",`icon${(0,Je.Z)(n)}`,o&&"iconOpen",r&&"disabled"]};return(0,ae.Z)(a,SM,t)})(c);return(0,X.jsxs)(t.Fragment,{children:[(0,X.jsx)(CM,(0,ne.Z)({ownerState:c,className:(0,oe.Z)(u.select,r),disabled:i,ref:a||n},l)),e.multiple?null:(0,X.jsx)(PM,{as:o,ownerState:c,className:u.icon})]})}));function RM(e){return(0,Ze.Z)("MuiSelect",e)}const LM=(0,Le.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),DM=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],kM=(0,le.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${LM.select}`]:t.select},{[`&.${LM.select}`]:t[n.variant]},{[`&.${LM.multiple}`]:t.multiple}]}})(TM,{[`&.${LM.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),IM=(0,le.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${(0,Je.Z)(n.variant)}`],n.open&&t.iconOpen]}})(AM),FM=(0,le.ZP)("input",{shouldForwardProp:e=>(0,le.Dz)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function NM(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function zM(e){return null==e||"string"===typeof e&&!e.trim()}const UM=t.forwardRef((function(e,n){const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:a,children:s,className:l,defaultValue:c,disabled:u,displayEmpty:h,IconComponent:d,inputRef:p,labelId:m,MenuProps:f={},multiple:g,name:v,onBlur:y,onChange:_,onClose:x,onFocus:b,onOpen:w,open:S,readOnly:M,renderValue:E,SelectDisplayProps:T={},tabIndex:C,value:A,variant:P="standard"}=e,O=(0,te.Z)(e,DM),[R,L]=(0,Li.Z)({controlled:A,default:c,name:"Select"}),D=t.useRef(null),k=t.useRef(null),[I,F]=t.useState(null),{current:N}=t.useRef(null!=S),[z,U]=t.useState(),[j,B]=t.useState(!1),V=(0,ue.Z)(n,p),G=t.useCallback((e=>{k.current=e,e&&F(e)}),[]);t.useImperativeHandle(V,(()=>({focus:()=>{k.current.focus()},node:D.current,value:R})),[R]),t.useEffect((()=>{o&&k.current.focus()}),[o]),t.useEffect((()=>{const e=(0,eS.Z)(k.current).getElementById(m);if(e){const t=()=>{getSelection().isCollapsed&&k.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[m]);const H=(e,t)=>{e?w&&w(t):x&&x(t),N||(U(a?null:I.clientWidth),B(e))},W=t.Children.toArray(s),q=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(g){n=Array.isArray(R)?R.slice():[];const t=R.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),R!==n&&(L(n),_)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:v}}),_(i,e)}g||H(!1,t)}},Z=null!==I&&(N?S:j);let $,K;delete O["aria-invalid"];const Y=[];let Q=!1,J=!1;(Kb({value:R})||h)&&(E?$=E(R):Q=!0);const ee=W.map((e=>{if(!t.isValidElement(e))return null;let n;if(g){if(!Array.isArray(R))throw new Error((0,Nb.Z)(2));n=R.some((t=>NM(t,e.props.value))),n&&Q&&Y.push(e.props.children)}else n=NM(R,e.props.value),n&&Q&&(K=e.props.children);return n&&(J=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:q(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));Q&&($=g?0===Y.length?null:Y.reduce(((e,t,n)=>(e.push(t),n<Y.length-1&&e.push(", "),e)),[]):K);let re,ie=z;!a&&N&&I&&(ie=I.clientWidth),re="undefined"!==typeof C?C:u?null:0;const se=T.id||(v?`mui-component-select-${v}`:void 0),le=(0,ne.Z)({},e,{variant:P,value:R,open:Z}),ce=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o}=e,a={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon",`icon${(0,Je.Z)(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,ae.Z)(a,RM,t)})(le);return(0,X.jsxs)(t.Fragment,{children:[(0,X.jsx)(kM,(0,ne.Z)({ref:G,tabIndex:re,role:"button","aria-disabled":u?"true":void 0,"aria-expanded":Z?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[m,se].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:e=>{if(!M){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),H(!0,e))}},onMouseDown:u||M?null:e=>{0===e.button&&(e.preventDefault(),k.current.focus(),H(!0,e))},onBlur:e=>{!Z&&y&&(Object.defineProperty(e,"target",{writable:!0,value:{value:R,name:v}}),y(e))},onFocus:b},T,{ownerState:le,className:(0,oe.Z)(ce.select,l,T.className),id:se,children:zM($)?(0,X.jsx)("span",{className:"notranslate",dangerouslySetInnerHTML:{__html:"&#8203;"}}):$})),(0,X.jsx)(FM,(0,ne.Z)({value:Array.isArray(R)?R.join(","):R,name:v,ref:D,"aria-hidden":!0,onChange:e=>{const t=W.map((e=>e.props.value)).indexOf(e.target.value);if(-1===t)return;const n=W[t];L(n.props.value),_&&_(e,n)},tabIndex:-1,disabled:u,className:ce.nativeInput,autoFocus:o,ownerState:le},O)),(0,X.jsx)(IM,{as:d,className:ce.icon,ownerState:le}),(0,X.jsx)(wM,(0,ne.Z)({id:`menu-${v||""}`,anchorEl:I,open:Z,onClose:e=>{H(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},f,{MenuListProps:(0,ne.Z)({"aria-labelledby":m,role:"listbox",disableListWrap:!0},f.MenuListProps),PaperProps:(0,ne.Z)({},f.PaperProps,{style:(0,ne.Z)({minWidth:ie},null!=f.PaperProps?f.PaperProps.style:null)}),children:ee}))]})})),jM=UM,BM=(0,wb.Z)((0,X.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");var VM,GM;const HM=["autoWidth","children","classes","className","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],WM=t.forwardRef((function(e,n){const r=(0,ce.Z)({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:s,displayEmpty:l=!1,IconComponent:c=BM,id:u,input:h,inputProps:d,label:p,labelId:m,MenuProps:f,multiple:g=!1,native:v=!1,onClose:y,onOpen:_,open:x,renderValue:b,SelectDisplayProps:w,variant:S="outlined"}=r,M=(0,te.Z)(r,HM),E=v?OM:jM,T=Wb({props:r,muiFormControl:fb(),states:["variant"]}).variant||S,C=h||{standard:VM||(VM=(0,X.jsx)(pw,{})),outlined:(0,X.jsx)(Rw,{label:p}),filled:GM||(GM=(0,X.jsx)(xw,{}))}[T],A=(e=>{const{classes:t}=e;return t})((0,ne.Z)({},r,{classes:a})),P=(0,ue.Z)(n,C.ref);return t.cloneElement(C,(0,ne.Z)({inputComponent:E,inputProps:(0,ne.Z)({children:o,IconComponent:c,variant:T,type:void 0,multiple:g},v?{id:u}:{autoWidth:i,displayEmpty:l,labelId:m,MenuProps:f,onClose:y,onOpen:_,open:x,renderValue:b,SelectDisplayProps:(0,ne.Z)({id:u},w)},d,{classes:d?(0,Fb.Z)(A,d.classes):A},h?h.props.inputProps:{})},g&&v&&"outlined"===T?{notched:!0}:{},{ref:P,className:(0,oe.Z)(C.props.className,s)},M))}));WM.muiName="Select";const qM=WM;function ZM(e){return(0,Ze.Z)("MuiTextField",e)}(0,Le.Z)("MuiTextField",["root"]);const $M=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],XM={standard:pw,filled:xw,outlined:Rw},KM=(0,le.ZP)($w,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),YM=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:a,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:p,id:m,InputLabelProps:f,inputProps:g,InputProps:v,inputRef:y,label:_,maxRows:x,minRows:b,multiline:w=!1,name:S,onBlur:M,onChange:E,onFocus:T,placeholder:C,required:A=!1,rows:P,select:O=!1,SelectProps:R,type:L,value:D,variant:k="outlined"}=n,I=(0,te.Z)(n,$M),F=(0,ne.Z)({},n,{autoFocus:i,color:s,disabled:c,error:u,fullWidth:d,multiline:w,required:A,select:O,variant:k}),N=(e=>{const{classes:t}=e;return(0,ae.Z)({root:["root"]},ZM,t)})(F);const z={};"outlined"===k&&(f&&"undefined"!==typeof f.shrink&&(z.notched=f.shrink),z.label=_),O&&(R&&R.native||(z.id=void 0),z["aria-describedby"]=void 0);const U=(0,Ib.Z)(m),j=p&&U?`${U}-helper-text`:void 0,B=_&&U?`${U}-label`:void 0,V=XM[k],G=(0,X.jsx)(V,(0,ne.Z)({"aria-describedby":j,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:d,multiline:w,name:S,rows:P,maxRows:x,minRows:b,type:L,value:D,id:U,inputRef:y,onBlur:M,onChange:E,onFocus:T,placeholder:C,inputProps:g},z,v));return(0,X.jsxs)(KM,(0,ne.Z)({className:(0,oe.Z)(N.root,a),disabled:c,error:u,fullWidth:d,ref:t,required:A,color:s,variant:k,ownerState:F},I,{children:[_&&(0,X.jsx)(Vw,(0,ne.Z)({htmlFor:U,id:B},f,{children:_})),O?(0,X.jsx)(qM,(0,ne.Z)({"aria-describedby":j,id:U,labelId:B,value:D,input:G},R,{children:o})):G,p&&(0,X.jsx)(Jw,(0,ne.Z)({id:j},h,{children:p}))]}))})),QM=YM;var JM=n(98937),eE=n(77907),tE=n(58959);function nE(e){return"undefined"!==typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function rE(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const iE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:a=!1}=e;return(e,s)=>{let{inputValue:l,getOptionLabel:c}=s,u=a?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=nE(u));const h=e.filter((e=>{let r=(o||c)(e);return n&&(r=r.toLowerCase()),t&&(r=nE(r)),"start"===i?0===r.indexOf(u):r.indexOf(u)>-1}));return"number"===typeof r?h.slice(0,r):h}}();function oE(e){const{autoComplete:n=!1,autoHighlight:r=!1,autoSelect:i=!1,blurOnSelect:o=!1,disabled:a,clearOnBlur:s=!e.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=(e.multiple?[]:null),disableClearable:h=!1,disableCloseOnSelect:d=!1,disabledItemsFocusable:p=!1,disableListWrap:m=!1,filterOptions:f=iE,filterSelectedOptions:g=!1,freeSolo:v=!1,getOptionDisabled:y,getOptionLabel:_=(e=>{var t;return null!=(t=e.label)?t:e}),isOptionEqualToValue:x=((e,t)=>e===t),groupBy:b,handleHomeEndKeys:w=!e.freeSolo,id:S,includeInputInList:M=!1,inputValue:E,multiple:T=!1,onChange:C,onClose:A,onHighlightChange:P,onInputChange:O,onOpen:R,open:L,openOnFocus:D=!1,options:k,selectOnFocus:I=!e.freeSolo,value:F}=e,N=(0,Ib.Z)(S);let z=_;z=e=>{const t=_(e);return"string"!==typeof t?String(t):t};const U=t.useRef(!1),j=t.useRef(!0),B=t.useRef(null),V=t.useRef(null),[G,H]=t.useState(null),[W,q]=t.useState(-1),Z=r?0:-1,$=t.useRef(Z),[X,K]=(0,tE.Z)({controlled:F,default:u,name:c}),[Y,Q]=(0,tE.Z)({controlled:E,default:"",name:c,state:"inputValue"}),[J,ee]=t.useState(!1),te=t.useCallback(((e,t)=>{if(!(T?X.length<t.length:null!==t)&&!s)return;let n;if(T)n="";else if(null==t)n="";else{const e=z(t);n="string"===typeof e?e:""}Y!==n&&(Q(n),O&&O(e,n,"reset"))}),[z,Y,T,O,Q,s,X]),re=t.useRef();t.useEffect((()=>{const e=X!==re.current;re.current=X,J&&!e||v&&!e||te(null,X)}),[X,te,J,re,v]);const[ie,oe]=(0,tE.Z)({controlled:L,default:!1,name:c,state:"open"}),[ae,se]=t.useState(!0),le=!T&&null!=X&&Y===z(X),ce=ie,ue=ce?f(k.filter((e=>!g||!(T?X:[X]).some((t=>null!==t&&x(e,t))))),{inputValue:le&&ae?"":Y,getOptionLabel:z}):[],he=ie&&ue.length>0;const de=(0,SS.Z)((e=>{-1===e?B.current.focus():G.querySelector(`[data-tag-index="${e}"]`).focus()}));t.useEffect((()=>{T&&W>X.length-1&&(q(-1),de(-1))}),[X,T,W,de]);const pe=(0,SS.Z)((e=>{let{event:t,index:n,reason:r="auto"}=e;if($.current=n,-1===n?B.current.removeAttribute("aria-activedescendant"):B.current.setAttribute("aria-activedescendant",`${N}-option-${n}`),P&&P(t,-1===n?null:ue[n],r),!V.current)return;const i=V.current.querySelector('[role="option"].Mui-focused');i&&(i.classList.remove("Mui-focused"),i.classList.remove("Mui-focusVisible"));const o=V.current.parentElement.querySelector('[role="listbox"]');if(!o)return;if(-1===n)return void(o.scrollTop=0);const a=V.current.querySelector(`[data-option-index="${n}"]`);if(a&&(a.classList.add("Mui-focused"),"keyboard"===r&&a.classList.add("Mui-focusVisible"),o.scrollHeight>o.clientHeight&&"mouse"!==r)){const e=a,t=o.clientHeight+o.scrollTop,n=e.offsetTop+e.offsetHeight;n>t?o.scrollTop=n-o.clientHeight:e.offsetTop-e.offsetHeight*(b?1.3:0)<o.scrollTop&&(o.scrollTop=e.offsetTop-e.offsetHeight*(b?1.3:0))}})),me=(0,SS.Z)((e=>{let{event:t,diff:r,direction:i="next",reason:o="auto"}=e;if(!ce)return;const a=function(e,t){if(!V.current||-1===e)return-1;let n=e;for(;;){if("next"===t&&n===ue.length||"previous"===t&&-1===n)return-1;const e=V.current.querySelector(`[data-option-index="${n}"]`),r=!p&&(!e||e.disabled||"true"===e.getAttribute("aria-disabled"));if(!(e&&!e.hasAttribute("tabindex")||r))return n;n+="next"===t?1:-1}}((()=>{const e=ue.length-1;if("reset"===r)return Z;if("start"===r)return 0;if("end"===r)return e;const t=$.current+r;return t<0?-1===t&&M?-1:m&&-1!==$.current||Math.abs(r)>1?0:e:t>e?t===e+1&&M?-1:m||Math.abs(r)>1?e:0:t})(),i);if(pe({index:a,reason:o,event:t}),n&&"reset"!==r)if(-1===a)B.current.value=Y;else{const e=z(ue[a]);B.current.value=e;0===e.toLowerCase().indexOf(Y.toLowerCase())&&Y.length>0&&B.current.setSelectionRange(Y.length,e.length)}})),fe=t.useCallback((()=>{if(!ce)return;const e=T?X[0]:X;if(0!==ue.length&&null!=e){if(V.current)if(null==e)$.current>=ue.length-1?pe({index:ue.length-1}):pe({index:$.current});else{const t=ue[$.current];if(T&&t&&-1!==rE(X,(e=>x(t,e))))return;const n=rE(ue,(t=>x(t,e)));-1===n?me({diff:"reset"}):pe({index:n})}}else me({diff:"reset"})}),[ue.length,!T&&X,g,me,pe,ce,Y,T]),ge=(0,SS.Z)((e=>{(0,xi.Z)(V,e),e&&fe()}));t.useEffect((()=>{fe()}),[fe]);const ve=e=>{ie||(oe(!0),se(!0),R&&R(e))},ye=(e,t)=>{ie&&(oe(!1),A&&A(e,t))},_e=(e,t,n,r)=>{if(Array.isArray(X)){if(X.length===t.length&&X.every(((e,n)=>e===t[n])))return}else if(X===t)return;C&&C(e,t,n,r),K(t)},xe=t.useRef(!1),be=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",i=n,a=t;if(T){a=Array.isArray(X)?X.slice():[];const e=rE(a,(e=>x(t,e)));-1===e?a.push(t):"freeSolo"!==r&&(a.splice(e,1),i="removeOption")}te(e,a),_e(e,a,i,{option:t}),d||e.ctrlKey||e.metaKey||ye(e,i),(!0===o||"touch"===o&&xe.current||"mouse"===o&&!xe.current)&&B.current.blur()};const we=(e,t)=>{if(!T)return;ye(e,"toggleInput");let n=W;-1===W?""===Y&&"previous"===t&&(n=X.length-1):(n+="next"===t?1:-1,n<0&&(n=0),n===X.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;let n=e;for(;;){if("next"===t&&n===X.length||"previous"===t&&-1===n)return-1;const e=G.querySelector(`[data-tag-index="${n}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),q(n),de(n)},Se=e=>{U.current=!0,Q(""),O&&O(e,"","clear"),_e(e,T?[]:null,"clear")},Me=e=>t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==W&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(q(-1),de(-1)),229!==t.which))switch(t.key){case"Home":ce&&w&&(t.preventDefault(),me({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":ce&&w&&(t.preventDefault(),me({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),me({diff:-5,direction:"previous",reason:"keyboard",event:t}),ve(t);break;case"PageDown":t.preventDefault(),me({diff:5,direction:"next",reason:"keyboard",event:t}),ve(t);break;case"ArrowDown":t.preventDefault(),me({diff:1,direction:"next",reason:"keyboard",event:t}),ve(t);break;case"ArrowUp":t.preventDefault(),me({diff:-1,direction:"previous",reason:"keyboard",event:t}),ve(t);break;case"ArrowLeft":we(t,"previous");break;case"ArrowRight":we(t,"next");break;case"Enter":if(-1!==$.current&&ce){const e=ue[$.current],r=!!y&&y(e);if(t.preventDefault(),r)return;be(t,e,"selectOption"),n&&B.current.setSelectionRange(B.current.value.length,B.current.value.length)}else v&&""!==Y&&!1===le&&(T&&t.preventDefault(),be(t,Y,"createOption","freeSolo"));break;case"Escape":ce?(t.preventDefault(),t.stopPropagation(),ye(t,"escape")):l&&(""!==Y||T&&X.length>0)&&(t.preventDefault(),t.stopPropagation(),Se(t));break;case"Backspace":if(T&&""===Y&&X.length>0){const e=-1===W?X.length-1:W,n=X.slice();n.splice(e,1),_e(t,n,"removeOption",{option:X[e]})}}},Ee=e=>{ee(!0),D&&!U.current&&ve(e)},Te=e=>{null!==V.current&&V.current.parentElement.contains(document.activeElement)?B.current.focus():(ee(!1),j.current=!0,U.current=!1,i&&-1!==$.current&&ce?be(e,ue[$.current],"blur"):i&&v&&""!==Y?be(e,Y,"blur","freeSolo"):s&&te(e,X),ye(e,"blur"))},Ce=e=>{const t=e.target.value;Y!==t&&(Q(t),se(!1),O&&O(e,t,"input")),""===t?h||T||_e(e,null,"clear"):ve(e)},Ae=e=>{pe({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},Pe=()=>{xe.current=!0},Oe=e=>{const t=Number(e.currentTarget.getAttribute("data-option-index"));be(e,ue[t],"selectOption"),xe.current=!1},Re=e=>t=>{const n=X.slice();n.splice(e,1),_e(t,n,"removeOption",{option:X[e]})},Le=e=>{ie?ye(e,"toggleInput"):ve(e)},De=e=>{e.target.getAttribute("id")!==N&&e.preventDefault()},ke=()=>{B.current.focus(),I&&j.current&&B.current.selectionEnd-B.current.selectionStart===0&&B.current.select(),j.current=!1},Ie=e=>{""!==Y&&ie||Le(e)};let Fe=v&&Y.length>0;Fe=Fe||(T?X.length>0:null!==X);let Ne=ue;if(b){new Map;Ne=ue.reduce(((e,t,n)=>{const r=b(t);return e.length>0&&e[e.length-1].group===r?e[e.length-1].options.push(t):e.push({key:n,index:n,group:r,options:[t]}),e}),[])}return a&&J&&Te(),{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ne.Z)({"aria-owns":he?`${N}-listbox`:null,role:"combobox","aria-expanded":he},e,{onKeyDown:Me(e),onMouseDown:De,onClick:ke})},getInputLabelProps:()=>({id:`${N}-label`,htmlFor:N}),getInputProps:()=>({id:N,value:Y,onBlur:Te,onFocus:Ee,onChange:Ce,onMouseDown:Ie,"aria-activedescendant":ce?"":null,"aria-autocomplete":n?"both":"list","aria-controls":he?`${N}-listbox`:void 0,autoComplete:"off",ref:B,autoCapitalize:"none",spellCheck:"false"}),getClearProps:()=>({tabIndex:-1,onClick:Se}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Le}),getTagProps:e=>{let{index:t}=e;return{key:t,"data-tag-index":t,tabIndex:-1,onDelete:Re(t)}},getListboxProps:()=>({role:"listbox",id:`${N}-listbox`,"aria-labelledby":`${N}-label`,ref:ge,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:e=>{let{index:t,option:n}=e;const r=(T?X:[X]).some((e=>null!=e&&x(n,e))),i=!!y&&y(n);return{key:z(n),tabIndex:-1,role:"option",id:`${N}-option-${t}`,onMouseOver:Ae,onClick:Oe,onTouchStart:Pe,"data-option-index":t,"aria-disabled":i,"aria-selected":r}},id:N,inputValue:Y,value:X,dirty:Fe,popupOpen:ce,focused:J||-1!==W,anchorEl:G,setAnchorEl:H,focusedTag:W,groupedOptions:Ne}}function aE(e){return(0,Ze.Z)("MuiListSubheader",e)}(0,Le.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const sE=["className","color","component","disableGutters","disableSticky","inset"],lE=(0,le.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${(0,Je.Z)(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:t.palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:t.palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:t.palette.background.paper})})),cE=t.forwardRef((function(e,t){const n=(0,ce.Z)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:a=!1,disableSticky:s=!1,inset:l=!1}=n,c=(0,te.Z)(n,sE),u=(0,ne.Z)({},n,{color:i,component:o,disableGutters:a,disableSticky:s,inset:l}),h=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,a={root:["root","default"!==n&&`color${(0,Je.Z)(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,ae.Z)(a,aE,t)})(u);return(0,X.jsx)(lE,(0,ne.Z)({as:o,className:(0,oe.Z)(h.root,r),ref:t,ownerState:u},c))})),uE=cE,hE=(0,wb.Z)((0,X.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function dE(e){return(0,Ze.Z)("MuiChip",e)}const pE=(0,Le.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]),mE=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],fE=(0,le.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,clickable:i,onDelete:o,size:a,variant:s}=n;return[{[`& .${pE.avatar}`]:t.avatar},{[`& .${pE.avatar}`]:t[`avatar${(0,Je.Z)(a)}`]},{[`& .${pE.avatar}`]:t[`avatarColor${(0,Je.Z)(r)}`]},{[`& .${pE.icon}`]:t.icon},{[`& .${pE.icon}`]:t[`icon${(0,Je.Z)(a)}`]},{[`& .${pE.icon}`]:t[`iconColor${(0,Je.Z)(r)}`]},{[`& .${pE.deleteIcon}`]:t.deleteIcon},{[`& .${pE.deleteIcon}`]:t[`deleteIcon${(0,Je.Z)(a)}`]},{[`& .${pE.deleteIcon}`]:t[`deleteIconColor${(0,Je.Z)(r)}`]},{[`& .${pE.deleteIcon}`]:t[`deleteIconOutlinedColor${(0,Je.Z)(r)}`]},t.root,t[`size${(0,Je.Z)(a)}`],t[`color${(0,Je.Z)(r)}`],i&&t.clickable,i&&"default"!==r&&t[`clickableColor${(0,Je.Z)(r)})`],o&&t.deletable,o&&"default"!==r&&t[`deletableColor${(0,Je.Z)(r)}`],t[s],"outlined"===s&&t[`outlined${(0,Je.Z)(r)}`]]}})((e=>{let{theme:t,ownerState:n}=e;const r=(0,se.Fq)(t.palette.text.primary,.26);return(0,ne.Z)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:t.palette.text.primary,backgroundColor:t.palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${pE.disabled}`]:{opacity:t.palette.action.disabledOpacity,pointerEvents:"none"},[`& .${pE.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300],fontSize:t.typography.pxToRem(12)},[`& .${pE.avatarColorPrimary}`]:{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.dark},[`& .${pE.avatarColorSecondary}`]:{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.dark},[`& .${pE.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${pE.icon}`]:(0,ne.Z)({color:"light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300],marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==n.color&&{color:"inherit"}),[`& .${pE.deleteIcon}`]:(0,ne.Z)({WebkitTapHighlightColor:"transparent",color:r,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,se.Fq)(r,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:(0,se.Fq)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:t.palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},n.onDelete&&{[`&.${pE.focusVisible}`]:{backgroundColor:(0,se.Fq)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{[`&.${pE.focusVisible}`]:{backgroundColor:t.palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:(0,se.Fq)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${pE.focusVisible}`]:{backgroundColor:(0,se.Fq)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:t.shadows[1]}},n.clickable&&"default"!==n.color&&{[`&:hover, &.${pE.focusVisible}`]:{backgroundColor:t.palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${pE.clickable}:hover`]:{backgroundColor:t.palette.action.hover},[`&.${pE.focusVisible}`]:{backgroundColor:t.palette.action.focus},[`& .${pE.avatar}`]:{marginLeft:4},[`& .${pE.avatarSmall}`]:{marginLeft:2},[`& .${pE.icon}`]:{marginLeft:4},[`& .${pE.iconSmall}`]:{marginLeft:2},[`& .${pE.deleteIcon}`]:{marginRight:5},[`& .${pE.deleteIconSmall}`]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:t.palette[n.color].main,border:`1px solid ${(0,se.Fq)(t.palette[n.color].main,.7)}`,[`&.${pE.clickable}:hover`]:{backgroundColor:(0,se.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity)},[`&.${pE.focusVisible}`]:{backgroundColor:(0,se.Fq)(t.palette[n.color].main,t.palette.action.focusOpacity)},[`& .${pE.deleteIcon}`]:{color:(0,se.Fq)(t.palette[n.color].main,.7),"&:hover, &:active":{color:t.palette[n.color].main}}})})),gE=(0,le.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${(0,Je.Z)(r)}`]]}})((e=>{let{ownerState:t}=e;return(0,ne.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function vE(e){return"Backspace"===e.key||"Delete"===e.key}const yE=t.forwardRef((function(e,n){const r=(0,ce.Z)({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:h,label:d,onClick:p,onDelete:m,onKeyDown:f,onKeyUp:g,size:v="medium",variant:y="filled"}=r,_=(0,te.Z)(r,mE),x=t.useRef(null),b=(0,ue.Z)(x,n),w=e=>{e.stopPropagation(),m&&m(e)},S=!(!1===a||!p)||a,M="small"===v,E=S||m?Qe:l||"div",T=(0,ne.Z)({},r,{component:E,disabled:u,size:v,color:s,onDelete:!!m,clickable:S,variant:y}),C=(e=>{const{classes:t,disabled:n,size:r,color:i,onDelete:o,clickable:a,variant:s}=e,l={root:["root",s,n&&"disabled",`size${(0,Je.Z)(r)}`,`color${(0,Je.Z)(i)}`,a&&"clickable",a&&`clickableColor${(0,Je.Z)(i)}`,o&&"deletable",o&&`deletableColor${(0,Je.Z)(i)}`,`${s}${(0,Je.Z)(i)}`],label:["label",`label${(0,Je.Z)(r)}`],avatar:["avatar",`avatar${(0,Je.Z)(r)}`,`avatarColor${(0,Je.Z)(i)}`],icon:["icon",`icon${(0,Je.Z)(r)}`,`iconColor${(0,Je.Z)(i)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,Je.Z)(r)}`,`deleteIconColor${(0,Je.Z)(i)}`,`deleteIconOutlinedColor${(0,Je.Z)(i)}`]};return(0,ae.Z)(l,dE,t)})(T),A=E===Qe?(0,ne.Z)({component:l||"div",focusVisibleClassName:C.focusVisible},m&&{disableRipple:!0}):{};let P=null;if(m){const e=(0,oe.Z)("default"!==s&&("outlined"===y?C[`deleteIconOutlinedColor${(0,Je.Z)(s)}`]:C[`deleteIconColor${(0,Je.Z)(s)}`]),M&&C.deleteIconSmall);P=c&&t.isValidElement(c)?t.cloneElement(c,{className:(0,oe.Z)(c.props.className,C.deleteIcon,e),onClick:w}):(0,X.jsx)(hE,{className:(0,oe.Z)(C.deleteIcon,e),onClick:w})}let O=null;i&&t.isValidElement(i)&&(O=t.cloneElement(i,{className:(0,oe.Z)(C.avatar,i.props.className)}));let R=null;return h&&t.isValidElement(h)&&(R=t.cloneElement(h,{className:(0,oe.Z)(C.icon,h.props.className)})),(0,X.jsxs)(fE,(0,ne.Z)({as:E,className:(0,oe.Z)(C.root,o),disabled:!(!S||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&vE(e)&&e.preventDefault(),f&&f(e)},onKeyUp:e=>{e.currentTarget===e.target&&(m&&vE(e)?m(e):"Escape"===e.key&&x.current&&x.current.blur()),g&&g(e)},ref:b,ownerState:T},A,_,{children:[O||R,(0,X.jsx)(gE,{className:(0,oe.Z)(C.label),ownerState:T,children:d}),P]}))})),_E=yE,xE=(0,wb.Z)((0,X.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function bE(e){return(0,Ze.Z)("MuiAutocomplete",e)}const wE=(0,Le.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var SE,ME;const EE=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],TE=(0,le.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:a,size:s}=n;return[{[`& .${wE.tag}`]:t.tag},{[`& .${wE.tag}`]:t[`tagSize${(0,Je.Z)(s)}`]},{[`& .${wE.inputRoot}`]:t.inputRoot},{[`& .${wE.input}`]:t.input},{[`& .${wE.input}`]:a&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})((e=>{let{ownerState:t}=e;return(0,ne.Z)({[`&.${wE.focused} .${wE.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${wE.clearIndicator}`]:{visibility:"visible"}}},t.fullWidth&&{width:"100%"},{[`& .${wE.tag}`]:(0,ne.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===t.size&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${wE.inputRoot}`]:{flexWrap:"wrap",[`.${wE.hasPopupIcon}&, .${wE.hasClearIcon}&`]:{paddingRight:30},[`.${wE.hasPopupIcon}.${wE.hasClearIcon}&`]:{paddingRight:56},[`& .${wE.input}`]:{width:0,minWidth:30}},[`& .${lw.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${lw.root}.${Qb.sizeSmall}`]:{[`& .${lw.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Ew.root}`]:{padding:9,[`.${wE.hasPopupIcon}&, .${wE.hasClearIcon}&`]:{paddingRight:39},[`.${wE.hasPopupIcon}.${wE.hasClearIcon}&`]:{paddingRight:65},[`& .${wE.input}`]:{padding:"7.5px 4px 7.5px 6px"},[`& .${wE.endAdornment}`]:{right:9}},[`& .${Ew.root}.${Qb.sizeSmall}`]:{padding:6,[`& .${wE.input}`]:{padding:"2.5px 4px 2.5px 6px"}},[`& .${fw.root}`]:{paddingTop:19,paddingLeft:8,[`.${wE.hasPopupIcon}&, .${wE.hasClearIcon}&`]:{paddingRight:39},[`.${wE.hasPopupIcon}.${wE.hasClearIcon}&`]:{paddingRight:65},[`& .${fw.input}`]:{padding:"7px 4px"},[`& .${wE.endAdornment}`]:{right:9}},[`& .${fw.root}.${Qb.sizeSmall}`]:{paddingBottom:1,[`& .${fw.input}`]:{padding:"2.5px 4px"}},[`& .${Qb.hiddenLabel}`]:{paddingTop:8},[`& .${wE.input}`]:(0,ne.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},t.inputFocused&&{opacity:1})})})),CE=(0,le.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),AE=(0,le.ZP)(ot,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),PE=(0,le.ZP)(ot,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,ne.Z)({},t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen)}})((e=>{let{ownerState:t}=e;return(0,ne.Z)({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})})),OE=(0,le.ZP)(Oi,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${wE.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})((e=>{let{theme:t,ownerState:n}=e;return(0,ne.Z)({zIndex:t.zIndex.modal},n.disablePortal&&{position:"absolute"})})),RE=(0,le.ZP)(xS,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})((e=>{let{theme:t}=e;return(0,ne.Z)({},t.typography.body1,{overflow:"auto"})})),LE=(0,le.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})((e=>{let{theme:t}=e;return{color:t.palette.text.secondary,padding:"14px 16px"}})),DE=(0,le.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})((e=>{let{theme:t}=e;return{color:t.palette.text.secondary,padding:"14px 16px"}})),kE=(0,le.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})((e=>{let{theme:t}=e;return{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",[`& .${wE.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${wE.focused}`]:{backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:t.palette.action.disabledOpacity,pointerEvents:"none"},[`&.${wE.focusVisible}`]:{backgroundColor:t.palette.action.focus},'&[aria-selected="true"]':{backgroundColor:(0,se.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${wE.focused}`]:{backgroundColor:(0,se.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.palette.action.selected}},[`&.${wE.focusVisible}`]:{backgroundColor:(0,se.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}}})),IE=(0,le.ZP)(uE,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.paper,top:-8}})),FE=(0,le.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${wE.option}`]:{paddingLeft:24}}),NE=t.forwardRef((function(e,n){var r;const i=(0,ce.Z)({props:e,name:"MuiAutocomplete"}),{autoComplete:o=!1,autoHighlight:a=!1,autoSelect:s=!1,blurOnSelect:l=!1,ChipProps:c,className:u,clearIcon:h=SE||(SE=(0,X.jsx)(xE,{fontSize:"small"})),clearOnBlur:d=!i.freeSolo,clearOnEscape:p=!1,clearText:m="Clear",closeText:f="Close",componentsProps:g={},defaultValue:v=(i.multiple?[]:null),disableClearable:y=!1,disableCloseOnSelect:_=!1,disabled:x=!1,disabledItemsFocusable:b=!1,disableListWrap:w=!1,disablePortal:S=!1,filterSelectedOptions:M=!1,forcePopupIcon:E="auto",freeSolo:T=!1,fullWidth:C=!1,getLimitTagsText:A=(e=>`+${e}`),getOptionLabel:P=(e=>{var t;return null!=(t=e.label)?t:e}),groupBy:O,handleHomeEndKeys:R=!i.freeSolo,includeInputInList:L=!1,limitTags:D=-1,ListboxComponent:k="ul",ListboxProps:I,loading:F=!1,loadingText:N="Loading\u2026",multiple:z=!1,noOptionsText:U="No options",openOnFocus:j=!1,openText:B="Open",PaperComponent:V=xS,PopperComponent:G=Oi,popupIcon:H=ME||(ME=(0,X.jsx)(BM,{})),renderGroup:W,renderInput:q,renderOption:Z,renderTags:$,selectOnFocus:K=!i.freeSolo,size:Y="medium"}=i,Q=(0,te.Z)(i,EE),{getRootProps:J,getInputProps:ee,getInputLabelProps:re,getPopupIndicatorProps:ie,getClearProps:se,getTagProps:le,getListboxProps:ue,getOptionProps:he,value:de,dirty:pe,id:me,popupOpen:fe,focused:ge,focusedTag:ve,anchorEl:ye,setAnchorEl:_e,inputValue:xe,groupedOptions:be}=oE((0,ne.Z)({},i,{componentName:"Autocomplete"})),we=!y&&!x&&pe,Se=(!T||!0===E)&&!1!==E,Me=(0,ne.Z)({},i,{disablePortal:S,focused:ge,fullWidth:C,hasClearIcon:we,hasPopupIcon:Se,inputFocused:-1===ve,popupOpen:fe,size:Y}),Ee=(e=>{const{classes:t,disablePortal:n,focused:r,fullWidth:i,hasClearIcon:o,hasPopupIcon:a,inputFocused:s,popupOpen:l,size:c}=e,u={root:["root",r&&"focused",i&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag",`tagSize${(0,Je.Z)(c)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,ae.Z)(u,bE,t)})(Me);let Te;if(z&&de.length>0){const e=e=>(0,ne.Z)({className:(0,oe.Z)(Ee.tag),disabled:x},le(e));Te=$?$(de,e):de.map(((t,n)=>(0,X.jsx)(_E,(0,ne.Z)({label:P(t),size:Y},e({index:n}),c))))}if(D>-1&&Array.isArray(Te)){const e=Te.length-D;!ge&&e>0&&(Te=Te.splice(0,D),Te.push((0,X.jsx)("span",{className:Ee.tag,children:A(e)},Te.length)))}const Ce=W||(e=>(0,X.jsxs)("li",{children:[(0,X.jsx)(IE,{className:Ee.groupLabel,ownerState:Me,component:"div",children:e.group}),(0,X.jsx)(FE,{className:Ee.groupUl,ownerState:Me,children:e.children})]},e.key)),Ae=Z||((e,t)=>(0,X.jsx)("li",(0,ne.Z)({},e,{children:P(t)}))),Pe=(e,t)=>{const n=he({option:e,index:t});return Ae((0,ne.Z)({},n,{className:Ee.option}),e,{selected:n["aria-selected"],inputValue:xe})};return(0,X.jsxs)(t.Fragment,{children:[(0,X.jsx)(TE,(0,ne.Z)({ref:n,className:(0,oe.Z)(Ee.root,u),ownerState:Me},J(Q),{children:q({id:me,disabled:x,fullWidth:!0,size:"small"===Y?"small":void 0,InputLabelProps:re(),InputProps:{ref:_e,className:Ee.inputRoot,startAdornment:Te,endAdornment:(0,X.jsxs)(CE,{className:Ee.endAdornment,ownerState:Me,children:[we?(0,X.jsx)(AE,(0,ne.Z)({},se(),{"aria-label":m,title:m,ownerState:Me},g.clearIndicator,{className:(0,oe.Z)(Ee.clearIndicator,null==(r=g.clearIndicator)?void 0:r.className),children:h})):null,Se?(0,X.jsx)(PE,(0,ne.Z)({},ie(),{disabled:x,"aria-label":fe?f:B,title:fe?f:B,className:(0,oe.Z)(Ee.popupIndicator),ownerState:Me,children:H})):null]})},inputProps:(0,ne.Z)({className:(0,oe.Z)(Ee.input),disabled:x},ee())})})),fe&&ye?(0,X.jsx)(OE,{as:G,className:(0,oe.Z)(Ee.popper),disablePortal:S,style:{width:ye?ye.clientWidth:null},ownerState:Me,role:"presentation",anchorEl:ye,open:!0,children:(0,X.jsxs)(RE,{as:V,className:Ee.paper,ownerState:Me,children:[F&&0===be.length?(0,X.jsx)(LE,{className:Ee.loading,ownerState:Me,children:N}):null,0!==be.length||T||F?null:(0,X.jsx)(DE,{className:Ee.noOptions,ownerState:Me,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:U}),be.length>0?(0,X.jsx)(kE,(0,ne.Z)({as:k,className:Ee.listbox,ownerState:Me},ue(),I,{children:be.map(((e,t)=>O?Ce({key:e.key,group:e.group,children:e.options.map(((t,n)=>Pe(t,e.index+n)))}):Pe(e,t)))})):null]})}):null]})})),zE=NE,UE=(0,le.ZP)(Oi)({width:"auto !important"}),jE=(0,le.ZP)(zE)({marginBottom:10,width:165,"& .MuiInputLabel-root":{color:"white"},"&.Mui-focused .MuiInputLabel-root":{color:"white !important"},"& .MuiButtonBase-root":{color:"white"},"& .MuiChip-root":{display:"none"},"& .MuiAutocomplete-inputRoot":{color:"white"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white  !important"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white !important"}}),BE=(0,X.jsx)(JM.Z,{fontSize:"small"}),VE=(0,X.jsx)(eE.Z,{fontSize:"small"});function GE(e){let{allOptions:t,name:n,filter:r,setFilter:i}=e;return(0,X.jsx)(jE,{multiple:!0,options:t,limitTags:0,disableCloseOnSelect:!0,getOptionLabel:e=>e,renderOption:(e,t,n)=>{let{selected:r}=n;return(0,X.jsxs)("li",{...e,children:[(0,X.jsx)(kb,{icon:BE,checkedIcon:VE,style:{marginRight:8},checked:r}),t]})},PopperComponent:UE,renderInput:e=>(0,X.jsx)(QM,{...e,label:n}),onChange:(e,t)=>{i(t)},value:r})}function HE(e){let{mode:n,setFilteredData:r}=e;const[i,o]=(0,t.useState)([]),a=(0,t.useCallback)((e=>{let t={};return i.forEach((n=>{t={...t,...n[e]}})),Object.keys(t).sort()}),[i]),s=(0,t.useMemo)((()=>a("neighbourhoods")),[a]),l=(0,t.useMemo)((()=>a("categories")),[a]),[c,u]=(0,t.useState)([]),[h,d]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{const e=await fetch("./data/chartData.json");if(200!==e.status)return;const t=await e.json();o(t)})()}),[]),(0,t.useEffect)((()=>{if(!i.length)return;const e=i.map((e=>{const t={month:e.month,categories:{},neighbourhoods:{}};return c.length?c.forEach((n=>{e.categories[n]&&(t.categories[n]=e.categories[n])})):t.categories=e.categories,h.length?h.forEach((n=>{e.neighbourhoods[n]&&(t.neighbourhoods[n]=e.neighbourhoods[n])})):t.neighbourhoods=e.neighbourhoods,t}));r(e)}),[c,h,r,i]),n===WE.Total?null:(0,X.jsxs)(Ki,{children:[(0,X.jsx)(pb,{children:"Filter Data"}),n===WE.Categories&&(0,X.jsx)(GE,{allOptions:l,filter:c,setFilter:u,name:"Categories"}),n===WE.Neighbourhoods&&(0,X.jsx)(GE,{allOptions:s,filter:h,setFilter:d,name:"Neighbourhoods"})]})}let WE,qE;function ZE(){const[e,n]=(0,t.useState)(WE.Total),[r,i]=(0,t.useState)([]);return(0,X.jsxs)(qi,{children:[(0,X.jsxs)(Xi,{children:[(0,X.jsx)(Ji,{mode:e,setMode:n}),(0,X.jsx)(HE,{mode:e,setFilteredData:i})]}),(0,X.jsx)(db,{mode:e,filteredData:r})]})}function $E(){const[e,n]=(0,t.useState)(qE.Map);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wi,{mode:e,setMode:n}),{[qE.Map]:(0,X.jsx)(Q,{}),[qE.Charts]:(0,X.jsx)(ZE,{})}[e]]})}!function(e){e[e.Total=0]="Total",e[e.Categories=1]="Categories",e[e.Neighbourhoods=2]="Neighbourhoods"}(WE||(WE={})),function(e){e[e.Map=0]="Map",e[e.Charts=1]="Charts"}(qE||(qE={})),r.render((0,X.jsx)(t.StrictMode,{children:(0,X.jsx)($E,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.a6b22f45.js.map